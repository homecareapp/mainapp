!function(){"use strict";angular.module("webApp",["ui.bootstrap","main","routes","authentication","httpCalls","partner","waqtFilter","ui.bootstrap.modal","daypicker","ngTagsInput","ngFileUpload","daypicker","import","aurbano.multiselect","highcharts-ng","ngDragDrop","delete","anguFixedHeaderTable","ngMap","ui.tinymce","monospaced.elastic","gantt","gantt.table","gantt.labels","gantt.tooltips","discountFilter","angular-clipboard","demoGraphy","gmapAddress","fileupload"]).value("alerts",[]).value("webconfig",{}).run(["$rootScope",function(e){e.showLoading=!1}]),angular.module("webApp").config(["datepickerConfig","datepickerPopupConfig",function(e,t){t.datepickerPopup="dd-MM-yyyy"}]),angular.module("webApp").filter("sanitize",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}])}();var angularFire;!function(){"use strict";angular.module("httpCalls",[]),angular.module("httpCalls").value("apiRootUrl","http://localhost:8080/"),angular.module("httpCalls").factory("apiCall",["$http","$q","Upload","apiRootUrl","$rootScope","$location","user","alerts",function(e,t,a,s,i,n,r,o){function d(e,t){o.push("object"==typeof e&&null!=e?{type:"danger",msg:e.message}:"string"==typeof e?{type:"danger",msg:e}:{type:"danger",msg:"something went wrong"}),alert(e?"string"==typeof e.response?e.response:"object"==typeof e&&null!=e?e.message:e:"Please check network connection"),401==t&&(sessionStorage.clear(),delete r.authdata,window.location.reload(),n.path("/login"))}function l(a,n){i.showLoading=!0;var r=t.defer();return e({method:"DELETE",url:s+a,headers:{"Content-Type":"application/json"},data:n}).success(function(e){i.showLoading=!1,r.resolve(e)}).error(function(e,t){i.showLoading=!1,d(e,t),r.reject(e)}),r.promise}function c(a,n){i.showLoading=!0,$("#progressIndicator").modal("show");var r=t.defer();return e({method:"PUT",url:s+a,data:n}).success(function(e){i.showLoading=!1,$("#progressIndicator").modal("hide"),r.resolve(e)}).error(function(e,t){i.showLoading=!1,$("#progressIndicator").modal("hide"),d(e,t),r.reject(e)}),r.promise}function p(a,n,r,o){i.showLoading=r,void 0==r&&(i.showLoading=!0),$("#progressIndicator").modal("show");var l,c=t.defer();return l=e(o?{method:"POST",url:s+a,responseType:"arraybuffer",data:n,headers:{"Content-Type":"application/json"}}:{method:"POST",url:s+a,data:n,headers:{"Content-Type":"application/json"}}),l.success(function(e){i.showLoading=!1,$("#progressIndicator").modal("hide"),c.resolve(e)}),l.error(function(e,t){console.log(e),i.showLoading=!1,$("#progressIndicator").modal("hide"),d(e,t),c.reject(e)}),c.promise}function u(a,n,r){i.showLoading=n,void 0==n&&(i.showLoading=!0),$("#progressIndicator").modal("show");var o=t.defer();return console.log(r),a=r?r:s+a,e({method:"GET",url:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){i.showLoading=!1,$("#progressIndicator").modal("hide"),o.resolve(e)}).error(function(e,t){i.showLoading=!1,$("#progressIndicator").modal("hide"),d(e,t),o.reject(e)}),o.promise}function m(e,n,r,o){i.showLoading=!0,$("#progressIndicator").modal("show");var l=t.defer();return a.upload({method:"POST",url:s+e,headers:{"Content-Type":"application"},fileFormDataName:o,file:n[0]}).success(function(e){i.showLoading=!1,$("#progressIndicator").modal("hide"),l.resolve(e)}).error(function(e,t){i.showLoading=!1,$("#progressIndicator").modal("hide"),d(e,t),l.reject(e)}),l.promise}return{httpPUT:c,httpPOST:p,httpGET:u,httpFilePost:m,httpDELETE:l}}])}(),function(){"use strict";var e=null;angular.module("authentication",[]),angular.module("authentication").value("user",JSON.parse(sessionStorage.getItem("globaldata"))||{}).value("successURL","/").value("successState","main.dashboard").value("failURL","#");var t=function(t){t.state("login",{url:"/login",templateUrl:"partials/authentication/login.html",controller:"authenticationController"}),t.state("container",{url:"/container",templateUrl:"partials/mly/partner/container/containerStatus.html",controller:"containerStatusController"}),e=t};t.$inject=["$stateProvider"],angular.module("authentication").config(t).run(["$rootScope","$location","user","$http","$templateCache","$state",function(t,a,s,i,n,r){function o(t){angular.forEach(t,function(t){var a={url:t.url,"abstract":t["abstract"],views:t.views};e.state(t.name,a)})}s.authdata?(i.defaults.headers.common.Authorization="Bearer "+s.authdata,angularFire||(angularFire=firebase.initializeApp(s.firebaseConfig,"angularFire"))):a.path("/container"==a.path()?"/container":"/login"),t.$on("$locationChangeStart",function(){if("/container"!=a.path()||s.authdata?"/login"===a.path()||s.authdata||a.path("/login"):a.path("/container"),r.get()){for(var e=!1,t=r.get(),i=0,n=t.length;n>i;i++)if(t[i].name){var d=t[i].name.split(".");if(d[1]){e=!0;break}}if(!e&&s.userdata&&"superuser"!=s.userdata.role){var l=s.userdata.provider_id.routes;o(l)}}})}])}(),function(){"use strict";angular.module("main",[]),angular.module("main").value("HEADER","").value("BREADCRUM","")}(),function(){"use strict";angular.module("partner",[]),angular.module("partner").value("timeSlots",'[{"time":"360","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"420","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"480","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"540","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"600","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"660","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"720","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"780","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"840","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"900","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"960","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1020","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1080","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1140","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1200","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1260","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1320","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1380","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"0","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"60","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"120","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"180","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"240","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"300","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null}]').value("timeSlots30",'[{"time":"0","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"30","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"60","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"90","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"120","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"150","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"180","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"210","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"240","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"270","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"300","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"330","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"360","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"390","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"420","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"450","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"480","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"510","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"540","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"570","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"600","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"630","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"660","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"690","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"720","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"750","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"780","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"810","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"840","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"870","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"900","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"930","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"960","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"990","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1020","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1050","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1080","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1110","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1140","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1170","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1200","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1230","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1260","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1290","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1320","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1350","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1380","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1410","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null}]').value("timeSlots15",'[{"time":"0","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"15","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"30","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"45","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"60","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"75","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"90","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"105","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"120","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"135","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"150","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"165","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"180","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"195","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"210","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"225","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"240","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"255","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"270","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"285","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"300","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"315","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"330","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"345","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"360","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"375","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"390","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"405","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"420","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"435","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"450","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"465","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"480","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"495","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"510","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"525","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"540","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"555","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"570","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"585","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"600","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"615","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"630","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"645","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"660","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"675","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"690","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"705","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"720","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"735","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"750","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"765","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"780","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"795","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"810","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"825","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"840","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"855","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"870","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"885","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"900","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"915","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"930","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"945","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"960","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"975","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"990","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1005","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1020","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1035","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1050","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1065","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1080","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1095","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1110","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1125","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1140","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1155","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1170","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1185","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1200","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1215","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1230","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1245","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1260","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1275","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1290","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1305","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1320","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1335","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1350","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1365","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1380","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1395","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1410","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1425","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1440","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null}]').value("timeSlots20",'[{"time":"0","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"20","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"40","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"60","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"80","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"100","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"120","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"140","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"160","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"180","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"200","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"220","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"240","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"260","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"280","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"300","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"320","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"340","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"360","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"380","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"400","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"420","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"440","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"460","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"480","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"500","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"520","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"540","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"560","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"580","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"600","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"620","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"640","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"660","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"680","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"700","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"720","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"740","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"760","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"780","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"800","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"820","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"840","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"860","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"880","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"900","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"920","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"940","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"960","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"980","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1000","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1020","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1040","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1060","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1080","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1100","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1120","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1140","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1160","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1180","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1200","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1220","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1240","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1260","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1280","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1300","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1320","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1340","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1360","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1380","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1400","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null},{"time":"1420","monday":null,"tuesday":null,"wednesday":null,"thursday":null,"friday":null,"saturday":null,"sunday":null}]')
}(),function(){"use strict";angular.module("routes",["ui.router"])}(),function(){function e(){var e,t,a=arguments,s={},i=function(e,t){var a,s;"object"!=typeof e&&(e={});for(s in t)t.hasOwnProperty(s)&&(a=t[s],e[s]=a&&"object"==typeof a&&"[object Array]"!==Object.prototype.toString.call(a)&&"renderTo"!==s&&"number"!=typeof a.nodeType?i(e[s]||{},a):t[s]);return e};for(a[0]===!0&&(s=a[1],a=Array.prototype.slice.call(a,2)),t=a.length,e=0;t>e;e++)s=i(s,a[e]);return s}function t(e,t){return parseInt(e,t||10)}function a(e){return"string"==typeof e}function s(e){return e&&"object"==typeof e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return"number"==typeof e}function r(e){return mt.log(e)/mt.LN10}function o(e){return mt.pow(10,e)}function d(e,t){for(var a=e.length;a--;)if(e[a]===t){e.splice(a,1);break}}function l(e){return e!==F&&null!==e}function c(e,t,i){var n,r;if(a(t))l(i)?e.setAttribute(t,i):e&&e.getAttribute&&(r=e.getAttribute(t));else if(l(t)&&s(t))for(n in t)e.setAttribute(n,t[n]);return r}function p(e){return i(e)?e:[e]}function u(e,t){Ot&&!jt&&t&&t.opacity!==F&&(t.filter="alpha(opacity="+100*t.opacity+")"),na(e.style,t)}function m(e,t,a,s,i){var n=pt.createElement(e);return t&&na(n,t),i&&u(n,{padding:0,border:Xt,margin:0}),a&&u(n,a),s&&s.appendChild(n),n}function g(e,t){var a=function(){return F};return a.prototype=new e,na(a.prototype,t),a}function h(e,t){return new Array((t||2)+1-String(e).length).join(0)+e}function v(e,t){return/%$/.test(e)?t*parseFloat(e)/100:parseFloat(e)}function f(e){return 6e4*(J&&J(e)||X||0)}function y(e,t){var a,s=/f$/,i=/\.([0-9])/,n=H.lang;return s.test(e)?(a=e.match(i),a=a?a[1]:-1,null!==t&&(t=ct.numberFormat(t,a,n.decimalPoint,e.indexOf(",")>-1?n.thousandsSep:""))):t=z(e,t),t}function b(e,t){for(var a,s,i,n,r,o,d,l="{",c=!1,p=[];-1!==(d=e.indexOf(l));){if(a=e.slice(0,d),c){for(s=a.split(":"),i=s.shift().split("."),r=i.length,o=t,n=0;r>n;n++)o=o[i[n]];s.length&&(o=y(s.join(":"),o)),p.push(o)}else p.push(a);e=e.slice(d+1),c=!c,l=c?"}":"{"}return p.push(e),p.join("")}function w(e){return mt.pow(10,ht(mt.log(e)/mt.LN10))}function _(e,t,a,s,i){var n,r,o=e;for(a=ra(a,1),n=e/a,t||(t=[1,2,2.5,5,10],s===!1&&(1===a?t=[1,2,5,10]:.1>=a&&(t=[1/a]))),r=0;r<t.length&&(o=t[r],!(i&&o*a>=e||!i&&n<=(t[r]+(t[r+1]||t[r]))/2));r++);return o*=a}function x(e,t){var a,s,i=e.length;for(s=0;i>s;s++)e[s].ss_i=s;for(e.sort(function(e,s){return a=t(e,s),0===a?e.ss_i-s.ss_i:a}),s=0;i>s;s++)delete e[s].ss_i}function k(e){for(var t=e.length,a=e[0];t--;)e[t]<a&&(a=e[t]);return a}function P(e){for(var t=e.length,a=e[0];t--;)e[t]>a&&(a=e[t]);return a}function S(e,t){var a;for(a in e)e[a]&&e[a]!==t&&e[a].destroy&&e[a].destroy(),delete e[a]}function O(e){B||(B=m(Ht)),e&&B.appendChild(e),B.innerHTML=""}function A(e,t){var a="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw a;ut.console&&console.log(a)}function C(e,t){return parseFloat(e.toPrecision(t||14))}function D(e,t){t.renderer.globalAnimation=ra(e,t.animation)}function T(){var e=H.global,t=e.useUTC,a=t?"getUTC":"get",s=t?"setUTC":"set";Y=e.Date||window.Date,X=t&&e.timezoneOffset,J=t&&e.getTimezoneOffset,G=function(e,a,s,i,n,r){var o;return t?(o=Y.UTC.apply(0,arguments),o+=f(o)):o=new Y(e,a,ra(s,1),ra(i,0),ra(n,0),ra(r,0)).getTime(),o},K=a+"Minutes",Z=a+"Hours",Q=a+"Day",et=a+"Date",tt=a+"Month",at=a+"FullYear",st=s+"Milliseconds",it=s+"Seconds",nt=s+"Minutes",rt=s+"Hours",ot=s+"Date",dt=s+"Month",lt=s+"FullYear"}function M(t){return H=e(!0,H,t),T(),H}function j(){return H}function L(){}function E(e,t,a,s){this.axis=e,this.pos=t,this.type=a||"",this.isNew=!0,a||s||this.addLabel()}function I(e,t,a,s,i){var n=e.chart.inverted;this.axis=e,this.isNegative=a,this.options=t,this.x=s,this.total=null,this.points={},this.stack=i,this.alignOptions={align:t.align||(n?a?"left":"right":"center"),verticalAlign:t.verticalAlign||(n?"middle":a?"bottom":"top"),y:ra(t.y,n?4:a?14:-6),x:ra(t.x,n?a?-6:6:0)},this.textAlign=t.textAlign||(n?a?"right":"left":"center")}function $(e){var t=e.options,a=t.navigator,s=a.enabled,i=t.scrollbar,n=i.enabled,r=s?a.height:0,o=n?i.height:0;this.handles=[],this.scrollbarButtons=[],this.elementsToDestroy=[],this.chart=e,this.setBaseSeries(),this.height=r,this.scrollbarHeight=o,this.scrollbarEnabled=n,this.navigatorEnabled=s,this.navigatorOptions=a,this.scrollbarOptions=i,this.outlineHeight=r+o,this.init()}function R(e){this.init(e)}var F,N,q,B,H,z,W,U,V,Y,G,X,J,K,Z,Q,et,tt,at,st,it,nt,rt,ot,dt,lt,ct,pt=document,ut=window,mt=Math,gt=mt.round,ht=mt.floor,vt=mt.ceil,ft=mt.max,yt=mt.min,bt=mt.abs,wt=mt.cos,_t=mt.sin,xt=mt.PI,kt=2*xt/360,Pt=navigator.userAgent,St=ut.opera,Ot=/(msie|trident|edge)/i.test(Pt)&&!St,At=8===pt.documentMode,Ct=!Ot&&/AppleWebKit/.test(Pt),Dt=/Firefox/.test(Pt),Tt=/(Mobile|Android|Windows Phone)/.test(Pt),Mt="http://www.w3.org/2000/svg",jt=!!pt.createElementNS&&!!pt.createElementNS(Mt,"svg").createSVGRect,Lt=Dt&&parseInt(Pt.split("Firefox/")[1],10)<4,Et=!jt&&!Ot&&!!pt.createElement("canvas").getContext,It={},$t=0,Rt=function(){return F},Ft=[],Nt=0,qt="Highstock",Bt="2.1.9",Ht="div",zt="absolute",Wt="relative",Ut="hidden",Vt="highcharts-",Yt="visible",Gt="px",Xt="none",Jt="M",Kt="L",Zt=/^[0-9]+$/,Qt="",ea="hover",ta="select",aa=["plotTop","marginRight","marginBottom","plotLeft"],sa="stroke-width",ia={};ct=ut.Highcharts=ut.Highcharts?A(16,!0):{},ct.seriesTypes=ia;var na=ct.extend=function(e,t){var a;e||(e={});for(a in t)e[a]=t[a];return e},ra=ct.pick=function(){var e,t,a=arguments,s=a.length;for(e=0;s>e;e++)if(t=a[e],t!==F&&null!==t)return t},oa=ct.wrap=function(e,t,a){var s=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(s),a.apply(this,e)}};z=function(e,t,a){if(!l(t)||isNaN(t))return H.lang.invalidDate||"";e=ra(e,"%Y-%m-%d %H:%M:%S");var s,i=new Y(t-f(t)),n=i[Z](),r=i[Q](),o=i[et](),d=i[tt](),c=i[at](),p=H.lang,u=p.weekdays,m=na({a:u[r].substr(0,3),A:u[r],d:h(o),e:o,w:r,b:p.shortMonths[d],B:p.months[d],m:h(d+1),y:c.toString().substr(2,2),Y:c,H:h(n),k:n,I:h(n%12||12),l:n%12||12,M:h(i[K]()),p:12>n?"AM":"PM",P:12>n?"am":"pm",S:h(i.getSeconds()),L:h(gt(t%1e3),3)},ct.dateFormats);for(s in m)for(;-1!==e.indexOf("%"+s);)e=e.replace("%"+s,"function"==typeof m[s]?m[s](t):m[s]);return a?e.substr(0,1).toUpperCase()+e.substr(1):e},U={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ct.numberFormat=function(e,a,s,i){var n=H.lang,r=+e||0,o=-1===a?yt((r.toString().split(".")[1]||"").length,20):isNaN(a=bt(a))?2:a,d=void 0===s?n.decimalPoint:s,l=void 0===i?n.thousandsSep:i,c=0>r?"-":"",p=String(t(r=bt(r).toFixed(o))),u=p.length>3?p.length%3:0;return c+(u?p.substr(0,u)+l:"")+p.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+l)+(o?d+bt(r-p).toFixed(o).slice(2):"")},W={init:function(e,t,a){t=t||"";var s,i,n,r,o,d=e.shift,l=t.indexOf("C")>-1,c=l?7:3,p=t.split(" "),u=[].concat(a),m=function(e){for(n=e.length;n--;)e[n]===Jt&&e.splice(n+1,0,e[n+1],e[n+2],e[n+1],e[n+2])};if(l&&(m(p),m(u)),e.isArea&&(r=p.splice(p.length-6,6),o=u.splice(u.length-6,6)),d<=u.length/c&&p.length===u.length)for(;d--;)u=[].concat(u).splice(0,c).concat(u);if(e.shift=0,p.length)for(s=u.length;p.length<s;)i=[].concat(p).splice(p.length-c,c),l&&(i[c-6]=i[c-2],i[c-5]=i[c-1]),p=p.concat(i);return r&&(p=p.concat(r),u=u.concat(o)),[p,u]},step:function(e,t,a,s){var i,n=[],r=e.length;if(1===a)n=s;else if(r===t.length&&1>a)for(;r--;)i=parseFloat(e[r]),n[r]=isNaN(i)?e[r]:a*parseFloat(t[r]-i)+i;else n=t;return n}},function(e){ut.HighchartsAdapter=ut.HighchartsAdapter||e&&{init:function(t){var s=e.fx;e.extend(e.easing,{easeOutQuad:function(e,t,a,s,i){return-s*(t/=i)*(t-2)+a}}),e.each(["cur","_default","width","height","opacity"],function(t,a){var i,n=s.step;"cur"===a?n=s.prototype:"_default"===a&&e.Tween&&(n=e.Tween.propHooks[a],a="set"),i=n[a],i&&(n[a]=function(e){var s;return e=t?e:this,"align"!==e.prop?(s=e.elem,s.attr?s.attr(e.prop,"cur"===a?F:e.now):i.apply(this,arguments)):void 0})}),oa(e.cssHooks.opacity,"get",function(e,t,a){return t.attr?t.opacity||0:e.call(this,t,a)}),this.addAnimSetter("d",function(e){var a,s=e.elem;e.started||(a=t.init(s,s.d,s.toD),e.start=a[0],e.end=a[1],e.started=!0),s.attr("d",t.step(e.start,e.end,e.pos,s.toD))}),this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){var a,s=e.length;for(a=0;s>a;a++)if(t.call(e[a],e[a],a,e)===!1)return a},e.fn.highcharts=function(){var e,t,s,i="Chart",n=arguments;return this[0]&&(a(n[0])&&(i=n[0],n=Array.prototype.slice.call(n,1)),e=n[0],e!==F&&(e.chart=e.chart||{},e.chart.renderTo=this[0],s=new ct[i](e,n[1]),t=this),e===F&&(t=Ft[c(this[0],"data-highcharts-chart")])),t}},addAnimSetter:function(t,a){e.Tween?e.Tween.propHooks[t]={set:a}:e.fx.step[t]=a},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,a){return e(t)[a]()},grep:e.grep,map:function(e,t){for(var a=[],s=0,i=e.length;i>s;s++)a[s]=t.call(e[s],e[s],s,e);return a},offset:function(t){return e(t).offset()},addEvent:function(t,a,s){e(t).bind(a,s)},removeEvent:function(t,a,s){var i=pt.removeEventListener?"removeEventListener":"detachEvent";pt[i]&&t&&!t[i]&&(t[i]=function(){}),e(t).unbind(a,s)},fireEvent:function(t,a,s,i){var n,r=e.Event(a),o="detached"+a;!Ot&&s&&(delete s.layerX,delete s.layerY,delete s.returnValue),na(r,s),t[a]&&(t[o]=t[a],t[a]=null),e.each(["preventDefault","stopPropagation"],function(e,t){var a=r[t];r[t]=function(){try{a.call(r)}catch(e){"preventDefault"===t&&(n=!0)}}}),e(t).trigger(r),t[o]&&(t[a]=t[o],t[o]=null),!i||r.isDefaultPrevented()||n||i(r)},washMouseEvent:function(e){var t=e.originalEvent||e;return t.pageX===F&&(t.pageX=e.pageX,t.pageY=e.pageY),t},animate:function(t,a,s){var i=e(t);t.style||(t.style={}),a.d&&(t.toD=a.d,a.d=1),i.stop(),a.opacity!==F&&t.attr&&(a.opacity+="px"),t.hasAnim=1,i.animate(a,s)},stop:function(t){t.hasAnim&&e(t).stop()}}}(ut.jQuery);var da=ut.HighchartsAdapter,la=da||{};da&&da.init.call(da,W);var ca=la.adapterRun,pa=la.getScript,ua=la.inArray,ma=ct.each=la.each,ga=la.grep,ha=la.offset,va=la.map,fa=la.addEvent,ya=la.removeEvent,ba=la.fireEvent,wa=la.washMouseEvent,_a=la.animate,xa=la.stop;H={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/2.1.9/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/2.1.9/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":ct.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:zt,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:zt,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:Wt,top:"45%"},style:{position:zt,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:jt,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Tt?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var ka=H.plotOptions,Pa=ka.line;T();var Sa=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,Oa=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Aa=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Ca=function(a){function s(e){e&&e.stops?l=va(e.stops,function(e){return Ca(e[1])}):(d=Sa.exec(e),d?c=[t(d[1]),t(d[2]),t(d[3]),parseFloat(d[4],10)]:(d=Oa.exec(e),d?c=[t(d[1],16),t(d[2],16),t(d[3],16),1]:(d=Aa.exec(e),d&&(c=[t(d[1]),t(d[2]),t(d[3]),1]))))}function i(t){var s;return l?(s=e(a),s.stops=[].concat(s.stops),ma(l,function(e,a){s.stops[a]=[s.stops[a][0],e.get(t)]})):s=c&&!isNaN(c[0])?"rgb"===t?"rgb("+c[0]+","+c[1]+","+c[2]+")":"a"===t?c[3]:"rgba("+c.join(",")+")":a,s}function r(e){if(l)ma(l,function(t){t.brighten(e)});else if(n(e)&&0!==e){var a;for(a=0;3>a;a++)c[a]+=t(255*e),c[a]<0&&(c[a]=0),c[a]>255&&(c[a]=255)}return this}function o(e){return c[3]=e,this}var d,l,c=[];return s(a),{get:i,brighten:r,rgba:c,setOpacity:o,raw:a}};L.prototype={opacity:1,textProps:["fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textDecoration","textOverflow","textShadow"],init:function(e,t){var a=this;a.element="span"===t?m(t):pt.createElementNS(Mt,t),a.renderer=e},animate:function(t,a,s){var i=ra(a,this.renderer.globalAnimation,!0);return xa(this),i?(i=e(i,{}),s&&(i.complete=s),_a(this,t,i)):this.attr(t,null,s),this},colorGradient:function(t,a,s){var n,r,o,d,c,p,u,m,g,h,v,f,y=this.renderer,b=[];if(t.linearGradient?r="linearGradient":t.radialGradient&&(r="radialGradient"),r){o=t[r],c=y.gradients,u=t.stops,h=s.radialReference,i(o)&&(t[r]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===r&&h&&!l(o.gradientUnits)&&(d=o,o=e(o,y.getRadialAttr(h,d),{gradientUnits:"userSpaceOnUse"}));for(v in o)"id"!==v&&b.push(v,o[v]);for(v in u)b.push(u[v]);b=b.join(","),c[b]?f=c[b].attr("id"):(o.id=f=Vt+$t++,c[b]=p=y.createElement(r).attr(o).add(y.defs),p.radAttr=d,p.stops=[],ma(u,function(e){var t;0===e[1].indexOf("rgba")?(n=Ca(e[1]),m=n.get("rgb"),g=n.get("a")):(m=e[1],g=1),t=y.createElement("stop").attr({offset:e[0],"stop-color":m,"stop-opacity":g}).add(p),p.stops.push(t)})),s.setAttribute(a,"url("+y.url+"#"+f+")"),s.gradient=b}},applyTextShadow:function(e){var a,s=this.element,i=-1!==e.indexOf("contrast"),n={},r=this.renderer.forExport,o=r||s.style.textShadow!==F&&!Ot;i&&(n.textShadow=e=e.replace(/contrast/g,this.renderer.getContrast(s.style.fill))),(Ct||r)&&(n.textRendering="geometricPrecision"),o?this.css(n):(this.fakeTS=!0,this.ySetter=this.xSetter,a=[].slice.call(s.getElementsByTagName("tspan")),ma(e.split(/\s?,\s?/g),function(e){var i,n,r=s.firstChild;e=e.split(" "),i=e[e.length-1],n=e[e.length-2],n&&ma(a,function(e,a){var o;0===a&&(e.setAttribute("x",s.getAttribute("x")),a=s.getAttribute("y"),e.setAttribute("y",a||0),null===a&&s.setAttribute("y",0)),o=e.cloneNode(1),c(o,{"class":Vt+"text-shadow",fill:i,stroke:i,"stroke-opacity":1/ft(t(n),3),"stroke-width":n,"stroke-linejoin":"round"}),s.insertBefore(o,r)})}))},attr:function(e,t,a){var s,i,n,r,o=this.element,d=this;if("string"==typeof e&&t!==F&&(s=e,e={},e[s]=t),"string"==typeof e)d=(this[e+"Getter"]||this._defaultGetter).call(this,e,o);else{for(s in e)i=e[s],r=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(s)&&(n||(this.symbolAttr(e),n=!0),r=!0),!this.rotation||"x"!==s&&"y"!==s||(this.doTransform=!0),r||(this[s+"Setter"]||this._defaultSetter).call(this,i,s,o),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(s)&&this.updateShadows(s,i);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return a&&a(),d},updateShadows:function(e,t){for(var a=this.shadows,s=a.length;s--;)a[s].setAttribute(e,"height"===e?ft(t-(a[s].cutHeight||0),0):"d"===e?this.d:t)},addClass:function(e){var t=this.element,a=c(t,"class")||"";return-1===a.indexOf(e)&&c(t,"class",a+" "+e),this},symbolAttr:function(e){var t=this;ma(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(a){t[a]=ra(e[a],t[a])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":Xt)},crisp:function(e){var t,a,s=this,i={},n=e.strokeWidth||s.strokeWidth||0;a=gt(n)%2/2,e.x=ht(e.x||s.x||0)+a,e.y=ht(e.y||s.y||0)+a,e.width=ht((e.width||s.width||0)-2*a),e.height=ht((e.height||s.height||0)-2*a),e.strokeWidth=n;for(t in e)s[t]!==e[t]&&(s[t]=i[t]=e[t]);return i},css:function(e){var a,s,i,n=this,r=n.styles,o={},d=n.element,l="",p=!r;if(e&&e.color&&(e.fill=e.color),r)for(s in e)e[s]!==r[s]&&(o[s]=e[s],p=!0);if(p){if(a=n.textWidth=e&&e.width&&"text"===d.nodeName.toLowerCase()&&t(e.width)||n.textWidth,r&&(e=na(r,o)),n.styles=e,a&&(Et||!jt&&n.renderer.forExport)&&delete e.width,Ot&&!jt)u(n.element,e);else{i=function(e,t){return"-"+t.toLowerCase()};for(s in e)l+=s.replace(/([A-Z])/g,i)+":"+e[s]+";";c(d,"style",l)}a&&n.added&&n.renderer.buildText(n)}return n},on:function(e,t){var a=this,s=a.element;return q&&"click"===e?(s.ontouchstart=function(e){a.touchEventFired=Y.now(),e.preventDefault(),t.call(s,e)},s.onclick=function(e){(-1===Pt.indexOf("Android")||Y.now()-(a.touchEventFired||0)>1100)&&t.call(s,e)}):s["on"+e]=t,this},setRadialReference:function(e){var t=this.renderer.gradients[this.element.gradient];return this.element.radialReference=e,t&&t.radAttr&&t.animate(this.renderer.getRadialAttr(e,t.radAttr)),this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){var e=this;return e.inverted=!0,e.updateTransform(),e},updateTransform:function(){var e,t=this,a=t.translateX||0,s=t.translateY||0,i=t.scaleX,n=t.scaleY,r=t.inverted,o=t.rotation,d=t.element;r&&(a+=t.attr("width"),s+=t.attr("height")),e=["translate("+a+","+s+")"],r?e.push("rotate(90) scale(-1,1)"):o&&e.push("rotate("+o+" "+(d.getAttribute("x")||0)+" "+(d.getAttribute("y")||0)+")"),(l(i)||l(n))&&e.push("scale("+ra(i,1)+" "+ra(n,1)+")"),e.length&&d.setAttribute("transform",e.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,s){var i,n,r,o,l,c={},p=this.renderer,u=p.alignedObjects;return e?(this.alignOptions=e,this.alignByTranslate=t,(!s||a(s))&&(this.alignTo=l=s||"renderer",d(u,this),u.push(this),s=null)):(e=this.alignOptions,t=this.alignByTranslate,l=this.alignTo),s=ra(s,p[l],p),i=e.align,n=e.verticalAlign,r=(s.x||0)+(e.x||0),o=(s.y||0)+(e.y||0),("right"===i||"center"===i)&&(r+=(s.width-(e.width||0))/{right:1,center:2}[i]),c[t?"translateX":"x"]=gt(r),("bottom"===n||"middle"===n)&&(o+=(s.height-(e.height||0))/({bottom:1,middle:2}[n]||1)),c[t?"translateY":"y"]=gt(o),this[this.placed?"animate":"attr"](c),this.placed=!0,this.alignAttr=c,this},getBBox:function(e){var t,a,s,i,n,r,o=this,d=o.renderer,l=o.rotation,c=o.element,p=o.styles,u=l*kt,m=o.textStr,g=c.style;if(m!==F&&(r=["",l||0,p&&p.fontSize,c.style.width].join(","),r=""===m||Zt.test(m)?"num:"+m.toString().length+r:m+r),r&&!e&&(t=d.cache[r]),!t){if(c.namespaceURI===Mt||d.forExport){try{n=this.fakeTS&&function(e){ma(c.querySelectorAll("."+Vt+"text-shadow"),function(t){t.style.display=e})},Dt&&g.textShadow?(i=g.textShadow,g.textShadow=""):n&&n(Xt),t=c.getBBox?na({},c.getBBox()):{width:c.offsetWidth,height:c.offsetHeight},i?g.textShadow=i:n&&n("")}catch(h){}(!t||t.width<0)&&(t={width:0,height:0})}else t=o.htmlGetBBox();d.isSVG&&(a=t.width,s=t.height,Ot&&p&&"11px"===p.fontSize&&"16.9"===s.toPrecision(3)&&(t.height=s=14),l&&(t.width=bt(s*_t(u))+bt(a*wt(u)),t.height=bt(s*wt(u))+bt(a*_t(u)))),r&&(d.cache[r]=t)}return t},show:function(e){return this.attr({visibility:e?"inherit":Yt})},hide:function(){return this.attr({visibility:Ut})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.attr({y:-9999})}})},add:function(e){var t,a=this.renderer,s=this.element;return e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,void 0!==this.textStr&&a.buildText(this),this.added=!0,(!e||e.handleZ||this.zIndex)&&(t=this.zIndexSetter()),t||(e?e.element:a.box).appendChild(s),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e,t,a,s=this,i=s.element||{},n=s.shadows,r=s.renderer.isSVG&&"SPAN"===i.nodeName&&s.parentGroup;if(i.onclick=i.onmouseout=i.onmouseover=i.onmousemove=i.point=null,xa(s),s.clipPath&&(s.clipPath=s.clipPath.destroy()),s.stops){for(a=0;a<s.stops.length;a++)s.stops[a]=s.stops[a].destroy();s.stops=null}for(s.safeRemoveChild(i),n&&ma(n,function(e){s.safeRemoveChild(e)});r&&r.div&&0===r.div.childNodes.length;)e=r.parentGroup,s.safeRemoveChild(r.div),delete r.div,r=e;s.alignTo&&d(s.renderer.alignedObjects,s);for(t in s)delete s[t];return null},shadow:function(e,t,a){var s,i,n,r,o,d,l=[],p=this.element;if(e){for(r=ra(e.width,3),o=(e.opacity||.15)/r,d=this.parentInverted?"(-1,-1)":"("+ra(e.offsetX,1)+", "+ra(e.offsetY,1)+")",s=1;r>=s;s++)i=p.cloneNode(0),n=2*r+1-2*s,c(i,{isShadow:"true",stroke:e.color||"black","stroke-opacity":o*s,"stroke-width":n,transform:"translate"+d,fill:Xt}),a&&(c(i,"height",ft(c(i,"height")-n,0)),i.cutHeight=n),t?t.element.appendChild(i):p.parentNode.insertBefore(i,p),l.push(i);this.shadows=l}return this},xGetter:function(e){return"circle"===this.element.nodeName&&(e={x:"cx",y:"cy"}[e]||e),this._defaultGetter(e)},_defaultGetter:function(e){var t=ra(this[e],this.element?this.element.getAttribute(e):null,0);return/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(e,t,a){e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),a.setAttribute(t,e),this[t]=e},dashstyleSetter:function(e){var a;if(e=e&&e.toLowerCase()){for(e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),a=e.length;a--;)e[a]=t(e[a])*this["stroke-width"];e=e.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[e])},opacitySetter:function(e,t,a){this[t]=e,a.setAttribute(t,e)},titleSetter:function(e){var t=this.element.getElementsByTagName("title")[0];t||(t=pt.createElementNS(Mt,"title"),this.element.appendChild(t)),t.appendChild(pt.createTextNode(String(ra(e),"").replace(/<[^>]*>/g,"")))},textSetter:function(e){e!==this.textStr&&(delete this.bBox,this.textStr=e,this.added&&this.renderer.buildText(this))},fillSetter:function(e,t,a){"string"==typeof e?a.setAttribute(t,e):e&&this.colorGradient(e,t,a)},visibilitySetter:function(e,t,a){"inherit"===e?a.removeAttribute(t):a.setAttribute(t,e)},zIndexSetter:function(e,a){var s,i,n,r,o,d=this.renderer,p=this.parentGroup,u=p||d,m=u.element||d.box,g=this.element,h=this.added;if(l(e)&&(g.setAttribute(a,e),e=+e,this[a]===e&&(h=!1),this[a]=e),h){for(e=this.zIndex,e&&p&&(p.handleZ=!0),s=m.childNodes,o=0;o<s.length&&!r;o++)i=s[o],n=c(i,"zIndex"),i!==g&&(t(n)>e||!l(e)&&l(n))&&(m.insertBefore(g,i),r=!0);r||m.appendChild(g)}return r},_defaultSetter:function(e,t,a){a.setAttribute(t,e)}},L.prototype.yGetter=L.prototype.xGetter,L.prototype.translateXSetter=L.prototype.translateYSetter=L.prototype.rotationSetter=L.prototype.verticalAlignSetter=L.prototype.scaleXSetter=L.prototype.scaleYSetter=function(e,t){this[t]=e,this.doTransform=!0},L.prototype["stroke-widthSetter"]=L.prototype.strokeSetter=function(e,t,a){this[t]=e,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],L.prototype.fillSetter.call(this,this.stroke,"stroke",a),a.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===t&&0===e&&this.hasStroke&&(a.removeAttribute("stroke"),this.hasStroke=!1)};var Da=function(){this.init.apply(this,arguments)};Da.prototype={Element:L,init:function(e,t,a,s,i,n){var r,o,d,l=this,p=location;r=l.createElement("svg").attr({version:"1.1"}).css(this.getStyle(s)),o=r.element,e.appendChild(o),-1===e.innerHTML.indexOf("xmlns")&&c(o,"xmlns",Mt),l.isSVG=!0,l.box=o,l.boxWrapper=r,l.alignedObjects=[],l.url=(Dt||Ct)&&pt.getElementsByTagName("base").length?p.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",d=this.createElement("desc").add(),d.element.appendChild(pt.createTextNode("Created with "+qt+" "+Bt)),l.defs=this.createElement("defs").add(),l.allowHTML=n,l.forExport=i,l.gradients={},l.cache={},l.setSize(t,a,!1);var m,g;Dt&&e.getBoundingClientRect&&(l.subPixelFix=m=function(){u(e,{left:0,top:0}),g=e.getBoundingClientRect(),u(e,{left:vt(g.left)-g.left+Gt,top:vt(g.top)-g.top+Gt})},m(),fa(ut,"resize",m))},getStyle:function(e){return this.style=na({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,t=e.defs;return e.box=null,e.boxWrapper=e.boxWrapper.destroy(),S(e.gradients||{}),e.gradients=null,t&&(e.defs=t.destroy()),e.subPixelFix&&ya(ut,"resize",e.subPixelFix),e.alignedObjects=null,null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},getRadialAttr:function(e,t){return{cx:e[0]-e[2]/2+t.cx*e[2],cy:e[1]-e[2]/2+t.cy*e[2],r:t.r*e[2]}},buildText:function(e){for(var a,s,i,n=e.element,r=this,o=r.forExport,d=ra(e.textStr,"").toString(),l=-1!==d.indexOf("<"),p=n.childNodes,m=c(n,"x"),g=e.styles,h=e.textWidth,v=g&&g.lineHeight,f=g&&g.textShadow,y=g&&"ellipsis"===g.textOverflow,b=p.length,w=h&&!e.added&&this.box,_=function(e){return v?t(v):r.fontMetrics(/(px|em)$/.test(e&&e.style.fontSize)?e.style.fontSize:g&&g.fontSize||r.style.fontSize||12,e).h},x=function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">")};b--;)n.removeChild(p[b]);return l||f||y||-1!==d.indexOf(" ")?(s=/<.*style="([^"]+)".*>/,i=/<.*href="(http[^"]+)".*>/,w&&w.appendChild(n),a=l?d.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[d],""===a[a.length-1]&&a.pop(),ma(a,function(t,a){var d,l=0;t=t.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),d=t.split("|||"),ma(d,function(t){if(""!==t||1===d.length){var p,v={},f=pt.createElementNS(Mt,"tspan");if(s.test(t)&&(p=t.match(s)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),c(f,"style",p)),i.test(t)&&!o&&(c(f,"onclick",'location.href="'+t.match(i)[1]+'"'),u(f,{cursor:"pointer"})),t=x(t.replace(/<(.|\n)*?>/g,"")||" ")," "!==t){if(f.appendChild(pt.createTextNode(t)),l?v.dx=0:a&&null!==m&&(v.x=m),c(f,v),n.appendChild(f),!l&&a&&(!jt&&o&&u(f,{display:"block"}),c(f,"dy",_(f))),h){for(var b,w,k,P,S=t.replace(/([^\^])-/g,"$1- ").split(" "),O=d.length>1||a||S.length>1&&"nowrap"!==g.whiteSpace,A=[],C=_(f),D=1,T=e.rotation,M=t,j=M.length;(O||y)&&(S.length||A.length);)e.rotation=0,P=e.getBBox(!0),k=P.width,!jt&&r.forExport&&(k=r.measureSpanWidth(f.firstChild.data,e.styles)),b=k>h,void 0===w&&(w=b),y&&w?(j/=2,""===M||!b&&.5>j?S=[]:(b&&(w=!0),M=t.substring(0,M.length+(b?-1:1)*vt(j)),S=[M+(h>3?"…":"")],f.removeChild(f.firstChild))):b&&1!==S.length?(f.removeChild(f.firstChild),A.unshift(S.pop())):(S=A,A=[],S.length&&(D++,f=pt.createElementNS(Mt,"tspan"),c(f,{dy:C,x:m}),p&&c(f,"style",p),n.appendChild(f)),k>h&&(h=k)),S.length&&f.appendChild(pt.createTextNode(S.join(" ").replace(/- /g,"-")));w&&e.attr("title",e.textStr),e.rotation=T}l++}}})}),w&&w.removeChild(n),f&&e.applyTextShadow&&e.applyTextShadow(f),void 0):void n.appendChild(pt.createTextNode(x(d)))},getContrast:function(e){return e=Ca(e).rgba,e[0]+e[1]+e[2]>384?"#000000":"#FFFFFF"},button:function(t,a,s,i,n,r,o,d,l){var c,p,u,m,g,h,v=this.label(t,a,s,l,null,null,null,null,"button"),f=0,y={x1:0,y1:0,x2:0,y2:1};return n=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:y,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},n),u=n.style,delete n.style,r=e(n,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#FFF"],[1,"#ACF"]]}},r),m=r.style,delete r.style,o=e(n,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#9BD"],[1,"#CDF"]]}},o),g=o.style,delete o.style,d=e(n,{style:{color:"#CCC"}},d),h=d.style,delete d.style,fa(v.element,Ot?"mouseover":"mouseenter",function(){3!==f&&v.attr(r).css(m)}),fa(v.element,Ot?"mouseout":"mouseleave",function(){3!==f&&(c=[n,r,o][f],p=[u,m,g][f],v.attr(c).css(p))}),v.setState=function(e){v.state=f=e,e?2===e?v.attr(o).css(g):3===e&&v.attr(d).css(h):v.attr(n).css(u)},v.on("click",function(e){3!==f&&i.call(v,e)}).attr(n).css(na({cursor:"default"},u))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=gt(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=gt(e[2])+t%2/2),e},path:function(e){var t={fill:Xt};return i(e)?t.d=e:s(e)&&na(t,e),this.createElement("path").attr(t)},circle:function(e,t,a){var i=s(e)?e:{x:e,y:t,r:a},n=this.createElement("circle");return n.xSetter=function(e){this.element.setAttribute("cx",e)},n.ySetter=function(e){this.element.setAttribute("cy",e)},n.attr(i)},arc:function(e,t,a,i,n,r){var o;return s(e)&&(t=e.y,a=e.r,i=e.innerR,n=e.start,r=e.end,e=e.x),o=this.symbol("arc",e||0,t||0,a||0,a||0,{innerR:i||0,start:n||0,end:r||0}),o.r=a,o},rect:function(e,t,a,i,n,r){n=s(e)?e.r:n;var o=this.createElement("rect"),d=s(e)?e:e===F?{}:{x:e,y:t,width:ft(a,0),height:ft(i,0)};return r!==F&&(d.strokeWidth=r,d=o.crisp(d)),n&&(d.r=n),o.rSetter=function(e){c(this.element,{rx:e,ry:e})},o.attr(d)},setSize:function(e,t,a){var s=this,i=s.alignedObjects,n=i.length;for(s.width=e,s.height=t,s.boxWrapper[ra(a,!0)?"animate":"attr"]({width:e,height:t});n--;)i[n].align()},g:function(e){var t=this.createElement("g");return l(e)?t.attr({"class":Vt+e}):t},image:function(e,t,a,s,i){var n,r={preserveAspectRatio:Xt};return arguments.length>1&&na(r,{x:t,y:a,width:s,height:i}),n=this.createElement("image").attr(r),n.element.setAttributeNS?n.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):n.element.setAttribute("hc-svg-href",e),n},symbol:function(e,t,a,s,i,n){var r,o,d,l,c,p=this.symbols[e],g=p&&p(gt(t),gt(a),s,i,n),h=/^url\((.*?)\)$/;return g?(r=this.path(g),na(r,{symbolName:e,x:t,y:a,width:s,height:i}),n&&na(r,n)):h.test(e)&&(c=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(gt((s-t[0])/2),gt((i-t[1])/2)))},d=e.match(h)[1],l=It[d]||n&&n.width&&n.height&&[n.width,n.height],r=this.image(d).attr({x:t,y:a}),r.isImg=!0,l?c(r,l):(r.attr({width:0,height:0}),o=m("img",{onload:function(){0===this.width&&(u(this,{position:zt,top:"-999em"}),document.body.appendChild(this)),c(r,It[d]=[this.width,this.height]),this.parentNode&&this.parentNode.removeChild(this)
},src:d}))),r},symbols:{circle:function(e,t,a,s){var i=.166*a;return[Jt,e+a/2,t,"C",e+a+i,t,e+a+i,t+s,e+a/2,t+s,"C",e-i,t+s,e-i,t,e+a/2,t,"Z"]},square:function(e,t,a,s){return[Jt,e,t,Kt,e+a,t,e+a,t+s,e,t+s,"Z"]},triangle:function(e,t,a,s){return[Jt,e+a/2,t,Kt,e+a,t+s,e,t+s,"Z"]},"triangle-down":function(e,t,a,s){return[Jt,e,t,Kt,e+a,t,e+a/2,t+s,"Z"]},diamond:function(e,t,a,s){return[Jt,e+a/2,t,Kt,e+a,t+s/2,e+a/2,t+s,e,t+s/2,"Z"]},arc:function(e,t,a,s,i){var n=i.start,r=i.r||a||s,o=i.end-.001,d=i.innerR,l=i.open,c=wt(n),p=_t(n),u=wt(o),m=_t(o),g=i.end-n<xt?0:1;return[Jt,e+r*c,t+r*p,"A",r,r,0,g,1,e+r*u,t+r*m,l?Jt:Kt,e+d*u,t+d*m,"A",d,d,0,g,0,e+d*c,t+d*p,l?"":"Z"]},callout:function(e,t,a,s,i){var n,r=6,o=6,d=yt(i&&i.r||0,a,s),l=d+o,c=i&&i.anchorX,p=i&&i.anchorY;return n=["M",e+d,t,"L",e+a-d,t,"C",e+a,t,e+a,t,e+a,t+d,"L",e+a,t+s-d,"C",e+a,t+s,e+a,t+s,e+a-d,t+s,"L",e+d,t+s,"C",e,t+s,e,t+s,e,t+s-d,"L",e,t+d,"C",e,t,e,t,e+d,t],c&&c>a&&p>t+l&&t+s-l>p?n.splice(13,3,"L",e+a,p-o,e+a+r,p,e+a,p+o,e+a,t+s-d):c&&0>c&&p>t+l&&t+s-l>p?n.splice(33,3,"L",e,p+o,e-r,p,e,p-o,e,t+d):p&&p>s&&c>e+l&&e+a-l>c?n.splice(23,3,"L",c+o,t+s,c,t+s+r,c-o,t+s,e+d,t+s):p&&0>p&&c>e+l&&e+a-l>c&&n.splice(3,3,"L",c-o,t,c,t-r,c+o,t,a-d,t),n}},clipRect:function(e,t,a,s){var i,n=Vt+$t++,r=this.createElement("clipPath").attr({id:n}).add(this.defs);return i=this.rect(e,t,a,s,0).add(r),i.id=n,i.clipPath=r,i.count=0,i},text:function(e,t,a,s){var i,n=this,r=Et||!jt&&n.forExport,o={};return!s||!n.allowHTML&&n.forExport?(o.x=Math.round(t||0),a&&(o.y=Math.round(a)),(e||0===e)&&(o.text=e),i=n.createElement("text").attr(o),r&&i.css({position:zt}),s||(i.xSetter=function(e,t,a){var s,i,n=a.getElementsByTagName("tspan"),r=a.getAttribute(t);for(i=0;i<n.length;i++)s=n[i],s.getAttribute(t)===r&&s.setAttribute(t,e);a.setAttribute(t,e)}),i):n.html(e,t,a)},fontMetrics:function(e,a){var s,i,n;return e=e||this.style.fontSize,!e&&a&&ut.getComputedStyle&&(a=a.element||a,n=ut.getComputedStyle(a,""),e=n&&n.fontSize),e=/px/.test(e)?t(e):/em/.test(e)?12*parseFloat(e):12,s=24>e?e+3:gt(1.2*e),i=gt(.8*s),{h:s,b:i,f:e}},rotCorr:function(e,t,a){var s=e;return t&&a&&(s=ft(s*wt(t*kt),4)),{x:-e/3*_t(t*kt),y:s}},label:function(t,a,s,i,n,r,o,d,c){function p(){var e,t,a=P.element.style;h=(void 0===v||void 0===f||k.styles.textAlign)&&l(P.textStr)&&P.getBBox(),k.width=(v||h.width||0)+2*O+A,k.height=(f||h.height||0)+2*O,w=O+x.fontMetrics(a&&a.fontSize,P).b,_&&(g||(e=gt(-S*O)+C,t=(d?-w:0)+C,k.box=g=i?x.symbol(i,e,t,k.width,k.height,D):x.rect(e,t,k.width,k.height,0,D[sa]),g.isImg||g.attr("fill",Xt),g.add(k)),g.isImg||g.attr(na({width:gt(k.width),height:gt(k.height)},D)),D=null)}function u(){var e,t=k.styles,a=t&&t.textAlign,s=A+O*(1-S);e=d?0:w,l(v)&&h&&("center"===a||"right"===a)&&(s+={center:.5,right:1}[a]*(v-h.width)),(s!==P.x||e!==P.y)&&(P.attr("x",s),e!==F&&P.attr("y",e)),P.x=s,P.y=e}function m(e,t){g?g.attr(e,t):D[e]=t}var g,h,v,f,y,b,w,_,x=this,k=x.g(c),P=x.text("",0,0,o).attr({zIndex:1}),S=0,O=3,A=0,C=0,D={};k.onAdd=function(){P.add(k),k.attr({text:t||0===t?t:"",x:a,y:s}),g&&l(n)&&k.attr({anchorX:n,anchorY:r})},k.widthSetter=function(e){v=e},k.heightSetter=function(e){f=e},k.paddingSetter=function(e){l(e)&&e!==O&&(O=k.padding=e,u())},k.paddingLeftSetter=function(e){l(e)&&e!==A&&(A=e,u())},k.alignSetter=function(e){S={left:0,center:.5,right:1}[e]},k.textSetter=function(e){e!==F&&P.textSetter(e),p(),u()},k["stroke-widthSetter"]=function(e,t){e&&(_=!0),C=e%2/2,m(t,e)},k.strokeSetter=k.fillSetter=k.rSetter=function(e,t){"fill"===t&&e&&(_=!0),m(t,e)},k.anchorXSetter=function(e,t){n=e,m(t,gt(e)-C-y)},k.anchorYSetter=function(e,t){r=e,m(t,e-b)},k.xSetter=function(e){k.x=e,S&&(e-=S*((v||h.width)+O)),y=gt(e),k.attr("translateX",y)},k.ySetter=function(e){b=k.y=gt(e),k.attr("translateY",b)};var T=k.css;return na(k,{css:function(t){if(t){var a={};t=e(t),ma(k.textProps,function(e){t[e]!==F&&(a[e]=t[e],delete t[e])}),P.css(a)}return T.call(k,t)},getBBox:function(){return{width:h.width+2*O,height:h.height+2*O,x:h.x-O,y:h.y-O}},shadow:function(e){return g&&g.shadow(e),k},destroy:function(){ya(k.element,"mouseenter"),ya(k.element,"mouseleave"),P&&(P=P.destroy()),g&&(g=g.destroy()),L.prototype.destroy.call(k),k=x=p=u=m=null}})}},N=Da,na(L.prototype,{htmlCss:function(e){var t=this,a=t.element,s=e&&"SPAN"===a.tagName&&e.width;return s&&(delete e.width,t.textWidth=s,t.updateTransform()),e&&"ellipsis"===e.textOverflow&&(e.whiteSpace="nowrap",e.overflow="hidden"),t.styles=na(t.styles,e),u(t.element,e),t},htmlGetBBox:function(){var e=this,t=e.element;return"text"===t.nodeName&&(t.style.position=zt),{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){if(!this.added)return void(this.alignOnAdd=!0);var e=this,a=e.renderer,s=e.element,i=e.translateX||0,n=e.translateY||0,r=e.x||0,o=e.y||0,d=e.textAlign||"left",c={left:0,center:.5,right:1}[d],p=e.shadows,m=e.styles;if(u(s,{marginLeft:i,marginTop:n}),p&&ma(p,function(e){u(e,{marginLeft:i+1,marginTop:n+1})}),e.inverted&&ma(s.childNodes,function(e){a.invertChild(e,s)}),"SPAN"===s.tagName){var g,h,v=e.rotation,f=t(e.textWidth),y=[v,d,s.innerHTML,e.textWidth,e.textAlign].join(",");y!==e.cTT&&(h=a.fontMetrics(s.style.fontSize).b,l(v)&&e.setSpanRotation(v,c,h),g=ra(e.elemWidth,s.offsetWidth),g>f&&/[ \-]/.test(s.textContent||s.innerText)&&(u(s,{width:f+Gt,display:"block",whiteSpace:m&&m.whiteSpace||"normal"}),g=f),e.getSpanCorrection(g,h,c,v,d)),u(s,{left:r+(e.xCorr||0)+Gt,top:o+(e.yCorr||0)+Gt}),Ct&&(h=s.offsetHeight),e.cTT=y}},setSpanRotation:function(e,t,a){var s={},i=Ot?"-ms-transform":Ct?"-webkit-transform":Dt?"MozTransform":St?"-o-transform":"";s[i]=s.transform="rotate("+e+"deg)",s[i+(Dt?"Origin":"-origin")]=s.transformOrigin=100*t+"% "+a+"px",u(this.element,s)},getSpanCorrection:function(e,t,a){this.xCorr=-e*a,this.yCorr=-t}}),na(Da.prototype,{html:function(e,t,a){var s=this.createElement("span"),i=s.element,n=s.renderer;return s.textSetter=function(e){e!==i.innerHTML&&delete this.bBox,i.innerHTML=this.textStr=e,s.htmlUpdateTransform()},s.xSetter=s.ySetter=s.alignSetter=s.rotationSetter=function(e,t){"align"===t&&(t="textAlign"),s[t]=e,s.htmlUpdateTransform()},s.attr({text:e,x:gt(t),y:gt(a)}).css({position:zt,fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),i.style.whiteSpace="nowrap",s.css=s.htmlCss,n.isSVG&&(s.add=function(e){var t,a,r=n.box.parentNode,o=[];if(this.parentGroup=e,e){if(t=e.div,!t){for(a=e;a;)o.push(a),a=a.parentGroup;ma(o.reverse(),function(e){var a,s=c(e.element,"class");s&&(s={className:s}),t=e.div=e.div||m(Ht,s,{position:zt,left:(e.translateX||0)+Gt,top:(e.translateY||0)+Gt},t||r),a=t.style,na(e,{translateXSetter:function(t,s){a.left=t+Gt,e[s]=t,e.doTransform=!0},translateYSetter:function(t,s){a.top=t+Gt,e[s]=t,e.doTransform=!0}}),ma(["opacity","visibility"],function(t){oa(e,t+"Setter",function(e,t,s,i){e.call(this,t,s,i),a[s]=t})})})}}else t=r;return t.appendChild(i),s.added=!0,s.alignOnAdd&&s.htmlUpdateTransform(),s}),s}});var Ta,Ma;if(!jt&&!Et){Ma={init:function(e,t){var a=this,s=["<",t,' filled="f" stroked="f"'],i=["position: ",zt,";"],n=t===Ht;("shape"===t||n)&&i.push("left:0;top:0;width:1px;height:1px;"),i.push("visibility: ",n?Ut:Yt),s.push(' style="',i.join(""),'"/>'),t&&(s=n||"span"===t||"img"===t?s.join(""):e.prepVML(s),a.element=m(s)),a.renderer=e},add:function(e){var t=this,a=t.renderer,s=t.element,i=a.box,n=e&&e.inverted,r=e?e.element||e:i;return n&&a.invertChild(s,r),r.appendChild(s),t.added=!0,t.alignOnAdd&&!t.deferUpdateTransform&&t.updateTransform(),t.onAdd&&t.onAdd(),t},updateTransform:L.prototype.htmlUpdateTransform,setSpanRotation:function(){var e=this.rotation,t=wt(e*kt),a=_t(e*kt);u(this.element,{filter:e?["progid:DXImageTransform.Microsoft.Matrix(M11=",t,", M12=",-a,", M21=",a,", M22=",t,", sizingMethod='auto expand')"].join(""):Xt})},getSpanCorrection:function(e,t,a,s,i){var n,r=s?wt(s*kt):1,o=s?_t(s*kt):0,d=ra(this.elemHeight,this.element.offsetHeight),l=i&&"left"!==i;this.xCorr=0>r&&-e,this.yCorr=0>o&&-d,n=0>r*o,this.xCorr+=o*t*(n?1-a:a),this.yCorr-=r*t*(s?n?a:1-a:1),l&&(this.xCorr-=e*a*(0>r?-1:1),s&&(this.yCorr-=d*a*(0>o?-1:1)),u(this.element,{textAlign:i}))},pathToVML:function(e){for(var t=e.length,a=[];t--;)n(e[t])?a[t]=gt(10*e[t])-5:"Z"===e[t]?a[t]="x":(a[t]=e[t],!e.isArc||"wa"!==e[t]&&"at"!==e[t]||(a[t+5]===a[t+7]&&(a[t+7]+=e[t+7]>e[t+5]?1:-1),a[t+6]===a[t+8]&&(a[t+8]+=e[t+8]>e[t+6]?1:-1)));return a.join(" ")||"x"},clip:function(e){var t,a,s=this;return e?(t=e.members,d(t,s),t.push(s),s.destroyClip=function(){d(t,s)},a=e.getCSS(s)):(s.destroyClip&&s.destroyClip(),a={clip:At?"inherit":"rect(auto)"}),s.css(a)},css:L.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&O(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),L.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=ut.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,a){var s;return e=e.split(/[ ,]/),s=e.length,(9===s||11===s)&&(e[s-4]=e[s-2]=t(e[s-2])-10*a),e.join(" ")},shadow:function(e,a,s){var i,n,r,o,d,l,c,p=[],u=this.element,g=this.renderer,h=u.style,v=u.path;if(v&&"string"!=typeof v.value&&(v="x"),d=v,e){for(l=ra(e.width,3),c=(e.opacity||.15)/l,i=1;3>=i;i++)o=2*l+1-2*i,s&&(d=this.cutOffPath(v.value,o+.5)),r=['<shape isShadow="true" strokeweight="',o,'" filled="false" path="',d,'" coordsize="10 10" style="',u.style.cssText,'" />'],n=m(g.prepVML(r),null,{left:t(h.left)+ra(e.offsetX,1),top:t(h.top)+ra(e.offsetY,1)}),s&&(n.cutOff=o+1),r=['<stroke color="',e.color||"black",'" opacity="',c*i,'"/>'],m(g.prepVML(r),null,null,n),a?a.element.appendChild(n):u.parentNode.insertBefore(n,u),p.push(n);this.shadows=p}return this},updateShadows:Rt,setAttr:function(e,t){At?this.element[e]=t:this.element.setAttribute(e,t)},classSetter:function(e){this.element.className=e},dashstyleSetter:function(e,t,a){var s=a.getElementsByTagName("stroke")[0]||m(this.renderer.prepVML(["<stroke/>"]),null,null,a);s[t]=e||"solid",this[t]=e},dSetter:function(e,t,a){var s,i=this.shadows;if(e=e||[],this.d=e.join&&e.join(" "),a.path=e=this.pathToVML(e),i)for(s=i.length;s--;)i[s].path=i[s].cutOff?this.cutOffPath(e,i[s].cutOff):e;this.setAttr(t,e)},fillSetter:function(e,t,a){var s=a.nodeName;"SPAN"===s?a.style.color=e:"IMG"!==s&&(a.filled=e!==Xt,this.setAttr("fillcolor",this.renderer.color(e,a,t,this)))},opacitySetter:Rt,rotationSetter:function(e,t,a){var s=a.style;this[t]=s[t]=e,s.left=-gt(_t(e*kt)+1)+Gt,s.top=gt(wt(e*kt))+Gt},strokeSetter:function(e,t,a){this.setAttr("strokecolor",this.renderer.color(e,a,t))},"stroke-widthSetter":function(e,t,a){a.stroked=!!e,this[t]=e,n(e)&&(e+=Gt),this.setAttr("strokeweight",e)},titleSetter:function(e,t){this.setAttr(t,e)},visibilitySetter:function(e,t,a){"inherit"===e&&(e=Yt),this.shadows&&ma(this.shadows,function(a){a.style[t]=e}),"DIV"===a.nodeName&&(e=e===Ut?"-999em":0,At||(a.style[t]=e?Yt:Ut),t="top"),a.style[t]=e},xSetter:function(e,t,a){this[t]=e,"x"===t?t="left":"y"===t&&(t="top"),this.updateClipping?(this[t]=e,this.updateClipping()):a.style[t]=e},zIndexSetter:function(e,t,a){a.style[t]=e}},ct.VMLElement=Ma=g(L,Ma),Ma.prototype.ySetter=Ma.prototype.widthSetter=Ma.prototype.heightSetter=Ma.prototype.xSetter;var ja={Element:Ma,isIE8:Pt.indexOf("MSIE 8.0")>-1,init:function(e,t,a,s){var i,n,r,o=this;if(o.alignedObjects=[],i=o.createElement(Ht).css(na(this.getStyle(s),{position:Wt})),n=i.element,e.appendChild(i.element),o.isVML=!0,o.box=n,o.boxWrapper=i,o.cache={},o.setSize(t,a,!1),!pt.namespaces.hcv){pt.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),r="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{pt.createStyleSheet().cssText=r}catch(d){pt.styleSheets[0].cssText+=r}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,t,a,i){var n=this.createElement(),r=s(e);return na(n,{members:[],count:0,left:(r?e.x:e)+1,top:(r?e.y:t)+1,width:(r?e.width:a)-1,height:(r?e.height:i)-1,getCSS:function(e){var t=e.element,a=t.nodeName,s="shape"===a,i=e.inverted,n=this,r=n.top-(s?t.offsetTop:0),o=n.left,d=o+n.width,l=r+n.height,c={clip:"rect("+gt(i?o:r)+"px,"+gt(i?l:d)+"px,"+gt(i?d:l)+"px,"+gt(i?r:o)+"px)"};return!i&&At&&"DIV"===a&&na(c,{width:d+Gt,height:l+Gt}),c},updateClipping:function(){ma(n.members,function(e){e.element&&e.css(n.getCSS(e))})}})},color:function(e,t,a,s){var i,n,r,o=this,d=/^rgba/,l=Xt;if(e&&e.linearGradient?r="gradient":e&&e.radialGradient&&(r="pattern"),r){var c,p,u,g,h,v,f,y,b,w,_,x,k=e.linearGradient||e.radialGradient,P="",S=e.stops,O=[],A=function(){n=['<fill colors="'+O.join(",")+'" opacity="',y,'" o:opacity2="',f,'" type="',r,'" ',P,'focus="100%" method="any" />'],m(o.prepVML(n),null,null,t)};if(_=S[0],x=S[S.length-1],_[0]>0&&S.unshift([0,_[1]]),x[0]<1&&S.push([1,x[1]]),ma(S,function(e,t){d.test(e[1])?(i=Ca(e[1]),c=i.get("rgb"),p=i.get("a")):(c=e[1],p=1),O.push(100*e[0]+"% "+c),t?(y=p,b=c):(f=p,w=c)}),"fill"===a)if("gradient"===r)u=k.x1||k[0]||0,g=k.y1||k[1]||0,h=k.x2||k[2]||0,v=k.y2||k[3]||0,P='angle="'+(90-180*mt.atan((v-g)/(h-u))/xt)+'"',A();else{var C,D=k.r,T=2*D,M=2*D,j=k.cx,L=k.cy,E=t.radialReference,I=function(){E&&(C=s.getBBox(),j+=(E[0]-C.x)/C.width-.5,L+=(E[1]-C.y)/C.height-.5,T*=E[2]/C.width,M*=E[2]/C.height),P='src="'+H.global.VMLRadialGradientURL+'" size="'+T+","+M+'" origin="0.5,0.5" position="'+j+","+L+'" color2="'+w+'" ',A()};s.added?I():s.onAdd=I,l=b}else l=c}else if(d.test(e)&&"IMG"!==t.tagName)i=Ca(e),n=["<",a,' opacity="',i.get("a"),'"/>'],m(this.prepVML(n),null,null,t),l=i.get("rgb");else{var $=t.getElementsByTagName(a);$.length&&($[0].opacity=1,$[0].type="solid"),l=e}return l},prepVML:function(e){var t="display:inline-block;behavior:url(#default#VML);",a=this.isIE8;return e=e.join(""),a?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e=-1===e.indexOf('style="')?e.replace("/>",' style="'+t+'" />'):e.replace('style="','style="'+t)):e=e.replace("<","<hcv:"),e},text:Da.prototype.html,path:function(e){var t={coordsize:"10 10"};return i(e)?t.d=e:s(e)&&na(t,e),this.createElement("shape").attr(t)},circle:function(e,t,a){var i=this.symbol("circle");return s(e)&&(a=e.r,t=e.y,e=e.x),i.isCircle=!0,i.r=a,i.attr({x:e,y:t})},g:function(e){var t,a;return e&&(a={className:Vt+e,"class":Vt+e}),t=this.createElement(Ht).attr(a)},image:function(e,t,a,s,i){var n=this.createElement("img").attr({src:e});return arguments.length>1&&n.attr({x:t,y:a,width:s,height:i}),n},createElement:function(e){return"rect"===e?this.symbol(e):Da.prototype.createElement.call(this,e)},invertChild:function(e,a){var s=this,i=a.style,n="IMG"===e.tagName&&e.style;u(e,{flip:"x",left:t(i.width)-(n?t(n.top):1),top:t(i.height)-(n?t(n.left):1),rotation:-90}),ma(e.childNodes,function(t){s.invertChild(t,e)})},symbols:{arc:function(e,t,a,s,i){var n,r=i.start,o=i.end,d=i.r||a||s,l=i.innerR,c=wt(r),p=_t(r),u=wt(o),m=_t(o);return o-r===0?["x"]:(n=["wa",e-d,t-d,e+d,t+d,e+d*c,t+d*p,e+d*u,t+d*m],i.open&&!l&&n.push("e",Jt,e,t),n.push("at",e-l,t-l,e+l,t+l,e+l*u,t+l*m,e+l*c,t+l*p,"x","e"),n.isArc=!0,n)},circle:function(e,t,a,s,i){return i&&(a=s=2*i.r),i&&i.isCircle&&(e-=a/2,t-=s/2),["wa",e,t,e+a,t+s,e+a,t+s/2,e+a,t+s/2,"e"]},rect:function(e,t,a,s,i){return Da.prototype.symbols[l(i)&&i.r?"callout":"square"].call(0,e,t,a,s,i)}}};ct.VMLRenderer=Ta=function(){this.init.apply(this,arguments)},Ta.prototype=e(Da.prototype,ja),N=Ta}Da.prototype.measureSpanWidth=function(e,t){var a,s=pt.createElement("span"),i=pt.createTextNode(e);return s.appendChild(i),u(s,t),this.box.appendChild(s),a=s.offsetWidth,O(s),a};var La,Ea;Et&&(ct.CanVGRenderer=La=function(){Mt="http://www.w3.org/1999/xhtml"},La.prototype.symbols={},Ea=function(){function e(){var e,a=t.length;for(e=0;a>e;e++)t[e]();t=[]}var t=[];return{push:function(a,s){0===t.length&&pa(s,e),t.push(a)}}}(),N=La),E.prototype={addLabel:function(){var t,a,s=this,i=s.axis,n=i.options,r=i.chart,d=i.categories,c=i.names,p=s.pos,u=n.labels,m=i.tickPositions,g=p===m[0],h=p===m[m.length-1],v=d?ra(d[p],c[p],p):p,f=s.label,y=m.info;i.isDatetimeAxis&&y&&(a=n.dateTimeLabelFormats[y.higherRanks[p]||y.unitName]),s.isFirst=g,s.isLast=h,t=i.labelFormatter.call({axis:i,chart:r,isFirst:g,isLast:h,dateTimeLabelFormat:a,value:i.isLog?C(o(v)):v}),l(f)?f&&f.attr({text:t}):(s.label=f=l(t)&&u.enabled?r.renderer.text(t,0,0,u.useHTML).css(e(u.style)).add(i.labelGroup):null,s.labelLength=f&&f.getBBox().width,s.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(e){var t,a,s,i=this.axis,n=e.x,r=i.chart.chartWidth,o=i.chart.spacing,d=ra(i.labelLeft,yt(i.pos,o[3])),l=ra(i.labelRight,ft(i.pos+i.len,r-o[1])),c=this.label,p=this.rotation,u={left:0,center:.5,right:1}[i.labelAlign],m=c.getBBox().width,g=i.slotWidth,h=u,v=1,f={};p?0>p&&d>n-u*m?s=gt(n/wt(p*kt)-d):p>0&&n+u*m>l&&(s=gt((r-n)/wt(p*kt))):(t=n-u*m,a=n+(1-u)*m,d>t?g=e.x+g*(1-u)-d:a>l&&(g=l-e.x+g*u,v=-1),g=yt(i.slotWidth,g),g<i.slotWidth&&"center"===i.labelAlign&&(e.x+=v*(i.slotWidth-g-h*(i.slotWidth-yt(m,g)))),(m>g||i.autoRotation&&c.styles.width)&&(s=g)),s&&(f.width=s,i.options.labels.style.textOverflow||(f.textOverflow="ellipsis"),c.css(f))},getPosition:function(e,t,a,s){var i=this.axis,n=i.chart,r=s&&n.oldChartHeight||n.chartHeight;return{x:e?i.translate(t+a,null,null,s)+i.transB:i.left+i.offset+(i.opposite?(s&&n.oldChartWidth||n.chartWidth)-i.right-i.left:0),y:e?r-i.bottom+i.offset-(i.opposite?i.height:0):r-i.translate(t+a,null,null,s)-i.transB}},getLabelPosition:function(e,t,a,s,i,n,r,o){var d,l=this.axis,c=l.transA,p=l.reversed,u=l.staggerLines,m=l.tickRotCorr||{x:0,y:0},g=ra(i.y,m.y+(2===l.side?8:-(a.getBBox().height/2)));return e=e+i.x+m.x-(n&&s?n*c*(p?-1:1):0),t=t+g-(n&&!s?n*c*(p?1:-1):0),u&&(d=r/(o||1)%u,t+=d*(l.labelOffset/u)),{x:e,y:gt(t)}},getMarkPath:function(e,t,a,s,i,n){return n.crispLine([Jt,e,t,Kt,e+(i?0:-a),t+(i?a:0)],s)},render:function(e,t,a){var s,i,n,r=this,o=r.axis,d=o.options,l=o.chart,c=l.renderer,p=o.horiz,u=r.type,m=r.label,g=r.pos,h=d.labels,v=r.gridLine,f=u?u+"Grid":"grid",y=u?u+"Tick":"tick",b=d[f+"LineWidth"],w=d[f+"LineColor"],_=d[f+"LineDashStyle"],x=d[y+"Length"],k=ra(d[y+"Width"],!u&&o.isXAxis?1:0),P=d[y+"Color"],S=d[y+"Position"],O=r.mark,A=h.step,C=!0,D=o.tickmarkOffset,T=r.getPosition(p,g,D,t),M=T.x,j=T.y,L=p&&M===o.pos+o.len||!p&&j===o.pos?-1:1;a=ra(a,1),this.isActive=!0,b&&(s=o.getPlotLinePath(g+D,b*L,t,!0),v===F&&(n={stroke:w,"stroke-width":b},_&&(n.dashstyle=_),u||(n.zIndex=1),t&&(n.opacity=0),r.gridLine=v=b?c.path(s).attr(n).add(o.gridGroup):null),!t&&v&&s&&v[r.isNew?"attr":"animate"]({d:s,opacity:a})),k&&x&&("inside"===S&&(x=-x),o.opposite&&(x=-x),i=r.getMarkPath(M,j,x,k*L,p,c),O?O.animate({d:i,opacity:a}):r.mark=c.path(i).attr({stroke:P,"stroke-width":k,opacity:a}).add(o.axisGroup)),m&&!isNaN(M)&&(m.xy=T=r.getLabelPosition(M,j,m,p,h,D,e,A),r.isFirst&&!r.isLast&&!ra(d.showFirstLabel,1)||r.isLast&&!r.isFirst&&!ra(d.showLastLabel,1)?C=!1:!p||o.isRadial||h.step||h.rotation||t||0===a||r.handleOverflow(T),A&&e%A&&(C=!1),C&&!isNaN(T.y)?(T.opacity=a,m[r.isNew?"attr":"animate"](T),r.isNew=!1):m.attr("y",-9999))},destroy:function(){S(this,this.axis)}},ct.PlotLineOrBand=function(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)},ct.PlotLineOrBand.prototype={render:function(){var t,a,s,i,n,o,d=this,c=d.axis,p=c.horiz,u=d.options,m=u.label,g=d.label,h=u.width,v=u.to,f=u.from,y=l(f)&&l(v),b=u.value,w=u.dashStyle,_=d.svgElem,x=[],S=u.color,O=u.zIndex,A=u.events,C={},D=c.chart.renderer;if(c.isLog&&(f=r(f),v=r(v),b=r(b)),h)x=c.getPlotLinePath(b,h),C={stroke:S,"stroke-width":h},w&&(C.dashstyle=w);else{if(!y)return;x=c.getPlotBandPath(f,v,u),S&&(C.fill=S),u.borderWidth&&(C.stroke=u.borderColor,C["stroke-width"]=u.borderWidth)}if(l(O)&&(C.zIndex=O),_)x?_.animate({d:x},null,_.onGetPath):(_.hide(),_.onGetPath=function(){_.show()},g&&(d.label=g=g.destroy()));else if(x&&x.length&&(d.svgElem=_=D.path(x).attr(C).add(),A)){t=function(e){_.on(e,function(t){A[e].apply(d,[t])})};for(a in A)t(a)}return m&&l(m.text)&&x&&x.length&&c.width>0&&c.height>0?(m=e({align:p&&y&&"center",x:p?!y&&4:10,verticalAlign:!p&&y&&"middle",y:p?y?16:10:y?6:-4,rotation:p&&!y&&90},m),g||(C={align:m.textAlign||m.align,rotation:m.rotation},l(O)&&(C.zIndex=O),d.label=g=D.text(m.text,0,0,m.useHTML).attr(C).css(m.style).add()),s=[x[1],x[4],y?x[6]:x[1]],i=[x[2],x[5],y?x[7]:x[2]],n=k(s),o=k(i),g.align(m,!1,{x:n,y:o,width:P(s)-n,height:P(i)-o}),g.show()):g&&g.hide(),d},destroy:function(){d(this.axis.plotLinesAndBands,this),delete this.axis,S(this)}},V={getPlotBandPath:function(e,t){var a=this.getPlotLinePath(t,null,null,!0),s=this.getPlotLinePath(e,null,null,!0);return s&&a&&s.toString()!==a.toString()?s.push(a[4],a[5],a[1],a[2]):s=null,s},addPlotBand:function(e){return this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){return this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(e,t){var a=new ct.PlotLineOrBand(this,e).render(),s=this.userOptions;return a&&(t&&(s[t]=s[t]||[],s[t].push(e)),this.plotLinesAndBands.push(a)),a},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,a=this.options,s=this.userOptions,i=t.length;i--;)t[i].id===e&&t[i].destroy();ma([a.plotLines||[],s.plotLines||[],a.plotBands||[],s.plotBands||[]],function(t){for(i=t.length;i--;)t[i].id===e&&d(t,t[i])})}};var Ia=ct.Axis=function(){this.init.apply(this,arguments)};Ia.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return ct.numberFormat(this.total,-1)},style:e(ka.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(e,t){var a=t.isX,s=this;s.chart=e,s.horiz=e.inverted?!a:a,s.isXAxis=a,s.coll=a?"xAxis":"yAxis",s.opposite=t.opposite,s.side=t.side||(s.horiz?s.opposite?0:2:s.opposite?1:3),s.setOptions(t);var i=this.options,n=i.type,d="datetime"===n;s.labelFormatter=i.labels.formatter||s.defaultLabelFormatter,s.userOptions=t,s.minPixelPadding=0,s.reversed=i.reversed,s.visible=i.visible!==!1,s.zoomEnabled=i.zoomEnabled!==!1,s.categories=i.categories||"category"===n,s.names=s.names||[],s.isLog="logarithmic"===n,s.isDatetimeAxis=d,s.isLinked=l(i.linkedTo),s.ticks={},s.labelEdge=[],s.minorTicks={},s.plotLinesAndBands=[],s.alternateBands={},s.len=0,s.minRange=s.userMinRange=i.minRange||i.maxZoom,s.range=i.range,s.offset=i.offset||0,s.stacks={},s.oldStacks={},s.stacksTouched=0,s.max=null,s.min=null,s.crosshair=ra(i.crosshair,p(e.options.tooltip.crosshairs)[a?0:1],!1);var c,u=s.options.events;-1===ua(s,e.axes)&&(a&&!this.isColorAxis?e.axes.splice(e.xAxis.length,0,s):e.axes.push(s),e[s.coll].push(s)),s.series=s.series||[],e.inverted&&a&&s.reversed===F&&(s.reversed=!0),s.removePlotBand=s.removePlotBandOrLine,s.removePlotLine=s.removePlotBandOrLine;for(c in u)fa(s,c,u[c]);s.isLog&&(s.val2lin=r,s.lin2val=o)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e(H[this.coll],t))},defaultLabelFormatter:function(){var e,t,a=this.axis,s=this.value,i=a.categories,n=this.dateTimeLabelFormat,r=H.lang.numericSymbols,o=r&&r.length,d=a.options.labels.format,l=a.isLog?s:a.tickInterval;if(d)t=b(d,this);else if(i)t=s;else if(n)t=z(n,s);else if(o&&l>=1e3)for(;o--&&t===F;)e=Math.pow(1e3,o+1),l>=e&&10*s%e===0&&null!==r[o]&&(t=ct.numberFormat(s/e,-1)+r[o]);return t===F&&(t=bt(s)>=1e4?ct.numberFormat(s,-1):ct.numberFormat(s,-1,F,"")),t},getSeriesExtremes:function(){var e=this,t=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.threshold=null,e.softThreshold=!e.isXAxis,e.buildStacks&&e.buildStacks(),ma(e.series,function(a){if(a.visible||!t.options.chart.ignoreHiddenSeries){var s,i,n,r=a.options,o=r.threshold;e.hasVisibleSeries=!0,e.isLog&&0>=o&&(o=null),e.isXAxis?(s=a.xData,s.length&&(e.dataMin=yt(ra(e.dataMin,s[0]),k(s)),e.dataMax=ft(ra(e.dataMax,s[0]),P(s)))):(a.getExtremes(),n=a.dataMax,i=a.dataMin,l(i)&&l(n)&&(e.dataMin=yt(ra(e.dataMin,i),i),e.dataMax=ft(ra(e.dataMax,n),n)),l(o)&&(e.threshold=o),(!r.softThreshold||e.isLog)&&(e.softThreshold=!1))}})},translate:function(e,t,a,s,i,r){var o,d=this.linkedParent||this,l=1,c=0,p=s?d.oldTransA:d.transA,u=s?d.oldMin:d.min,m=d.minPixelPadding,g=(d.doPostTranslate||d.isLog&&i)&&d.lin2val;return p||(p=d.transA),a&&(l*=-1,c=d.len),d.reversed&&(l*=-1,c-=l*(d.sector||d.len)),t?(e=e*l+c,e-=m,o=e/p+u,g&&(o=d.lin2val(o))):(g&&(e=d.val2lin(e)),"between"===r&&(r=.5),o=l*(e-u)*p+c+l*m+(n(r)?p*r*d.pointRange:0)),o},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,a,s,i){var n,r,o,d,l,c=this,p=c.chart,u=c.left,m=c.top,g=a&&p.oldChartHeight||p.chartHeight,h=a&&p.oldChartWidth||p.chartWidth,v=c.transB,f=function(e,t,a){return(t>e||e>a)&&(s?e=yt(ft(t,e),a):l=!0),e};return i=ra(i,c.translate(e,null,null,a)),n=o=gt(i+v),r=d=gt(g-i-v),isNaN(i)?l=!0:c.horiz?(r=m,d=g-c.bottom,n=o=f(n,u,u+c.width)):(n=u,o=h-c.right,r=d=f(r,m,m+c.height)),l&&!s?null:p.renderer.crispLine([Jt,n,r,Kt,o,d],t||1)},getLinearTickPositions:function(e,t,a){var s,i,r=C(ht(t/e)*e),o=C(vt(a/e)*e),d=[];if(t===a&&n(t))return[t];for(s=r;o>=s&&(d.push(s),s=C(s+e),s!==i);)i=s;return d},getMinorTickPositions:function(){var e,t,a,s=this,i=s.options,n=s.tickPositions,r=s.minorTickInterval,o=[],d=s.pointRangePadding||0,l=s.min-d,c=s.max+d,p=c-l;if(p&&p/r<s.len/3)if(s.isLog)for(a=n.length,t=1;a>t;t++)o=o.concat(s.getLogTickPositions(r,n[t-1],n[t],!0));else if(s.isDatetimeAxis&&"auto"===i.minorTickInterval)o=o.concat(s.getTimeTicks(s.normalizeTimeTickInterval(r),l,c,i.startOfWeek));else for(e=l+(n[0]-l)%r;c>=e;e+=r)o.push(e);return 0!==o.length&&s.trimTicks(o,i.startOnTick,i.endOnTick),o},adjustForMinRange:function(){var e,t,a,s,i,n,r,o,d,c=this,p=c.options,u=c.min,m=c.max,g=c.dataMax-c.dataMin>=c.minRange;c.isXAxis&&c.minRange===F&&!c.isLog&&(l(p.min)||l(p.max)?c.minRange=null:(ma(c.series,function(e){for(i=e.xData,n=e.xIncrement?1:i.length-1,a=n;a>0;a--)s=i[a]-i[a-1],(t===F||t>s)&&(t=s)}),c.minRange=yt(5*t,c.dataMax-c.dataMin))),m-u<c.minRange&&(d=c.minRange,e=(d-m+u)/2,r=[u-e,ra(p.min,u-e)],g&&(r[2]=c.dataMin),u=P(r),o=[u+d,ra(p.max,u+d)],g&&(o[2]=c.dataMax),m=k(o),d>m-u&&(r[0]=m-d,r[1]=ra(p.min,m-d),u=P(r))),c.min=u,c.max=m},setAxisTranslation:function(e){var t,s,i=this,n=i.max-i.min,r=i.axisPointRange||0,o=0,d=0,c=i.linkedParent,p=!!i.categories,u=i.transA,m=i.isXAxis;(m||p||r)&&(c?(o=c.minPointOffset,d=c.pointRangePadding):ma(i.series,function(e){var s=p?1:m?e.pointRange:i.axisPointRange||0,n=e.options.pointPlacement,c=e.closestPointRange;r=ft(r,s),i.single||(o=ft(o,a(n)?0:s/2),d=ft(d,"on"===n?0:s)),!e.noSharedTooltip&&l(c)&&(t=l(t)?yt(t,c):c)}),s=i.ordinalSlope&&t?i.ordinalSlope/t:1,i.minPointOffset=o*=s,i.pointRangePadding=d*=s,i.pointRange=yt(r,n),m&&(i.closestPointRange=t)),e&&(i.oldTransA=u),i.translationSlope=i.transA=u=i.len/(n+d||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=u*o},minFromRange:function(){return this.max-this.range},setTickInterval:function(e){var t,a,s,i,o,d,c,p=this,u=p.chart,m=p.options,g=p.isLog,h=p.isDatetimeAxis,v=p.isXAxis,f=p.isLinked,y=m.maxPadding,b=m.minPadding,x=m.tickInterval,k=m.tickPixelInterval,P=p.categories,S=p.threshold,O=p.softThreshold;h||P||f||this.getTickAmount(),d=ra(p.userMin,m.min),c=ra(p.userMax,m.max),f?(p.linkedParent=u[p.coll][m.linkedTo],a=p.linkedParent.getExtremes(),p.min=ra(a.min,a.dataMin),p.max=ra(a.max,a.dataMax),m.type!==p.linkedParent.options.type&&A(11,1)):(!O&&l(S)&&(p.dataMin>=S?(i=S,b=0):p.dataMax<=S&&(o=S,y=0)),p.min=ra(d,i,p.dataMin),p.max=ra(c,o,p.dataMax)),g&&(!e&&yt(p.min,ra(p.dataMin,p.min))<=0&&A(10,1),p.min=C(r(p.min),15),p.max=C(r(p.max),15)),p.range&&l(p.max)&&(p.userMin=p.min=d=ft(p.min,p.minFromRange()),p.userMax=c=p.max,p.range=null),p.beforePadding&&p.beforePadding(),p.adjustForMinRange(),P||p.axisPointRange||p.usePercentage||f||!l(p.min)||!l(p.max)||(t=p.max-p.min,t&&(!l(d)&&b&&(p.min-=t*b),!l(c)&&y&&(p.max+=t*y))),n(m.floor)&&(p.min=ft(p.min,m.floor)),n(m.ceiling)&&(p.max=yt(p.max,m.ceiling)),O&&l(p.dataMin)&&(S=S||0,!l(d)&&p.min<S&&p.dataMin>=S?p.min=S:!l(c)&&p.max>S&&p.dataMax<=S&&(p.max=S)),p.tickInterval=p.min===p.max||void 0===p.min||void 0===p.max?1:f&&!x&&k===p.linkedParent.options.tickPixelInterval?x=p.linkedParent.tickInterval:ra(x,this.tickAmount?(p.max-p.min)/ft(this.tickAmount-1,1):void 0,P?1:(p.max-p.min)*k/ft(p.len,k)),v&&!e&&ma(p.series,function(e){e.processData(p.min!==p.oldMin||p.max!==p.oldMax)}),p.setAxisTranslation(!0),p.beforeSetTickPositions&&p.beforeSetTickPositions(),p.postProcessTickInterval&&(p.tickInterval=p.postProcessTickInterval(p.tickInterval)),p.pointRange&&(p.tickInterval=ft(p.pointRange,p.tickInterval)),s=ra(m.minTickInterval,p.isDatetimeAxis&&p.closestPointRange),!x&&p.tickInterval<s&&(p.tickInterval=s),h||g||x||(p.tickInterval=_(p.tickInterval,null,w(p.tickInterval),ra(m.allowDecimals,!(p.tickInterval>.5&&p.tickInterval<5&&p.max>1e3&&p.max<9999)),!!this.tickAmount)),!this.tickAmount&&this.len&&(p.tickInterval=p.unsquish()),this.setTickPositions()},setTickPositions:function(){var e,t,a=this.options,s=a.tickPositions,i=a.tickPositioner,n=a.startOnTick,r=a.endOnTick;this.tickmarkOffset=this.categories&&"between"===a.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===a.minorTickInterval&&this.tickInterval?this.tickInterval/5:a.minorTickInterval,this.tickPositions=e=s&&s.slice(),e||(e=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,a.units),this.min,this.max,a.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),e.length>this.len&&(e=[e[0],e.pop()]),this.tickPositions=e,i&&(i=i.apply(this,[this.min,this.max]),i&&(this.tickPositions=e=i))),this.isLinked||(this.trimTicks(e,n,r),this.min===this.max&&l(this.min)&&!this.tickAmount&&(t=!0,this.min-=.5,this.max+=.5),this.single=t,s||i||this.adjustTickAmount())},trimTicks:function(e,t,a){var s=e[0],i=e[e.length-1],n=this.minPointOffset||0;t?this.min=s:this.min-n>s&&e.shift(),a?this.max=i:this.max+n<i&&e.pop(),0===e.length&&l(s)&&e.push((i+s)/2)},getTickAmount:function(){var e,t={},a=this.options,s=a.tickAmount,i=a.tickPixelInterval;!l(a.tickInterval)&&this.len<i&&!this.isRadial&&!this.isLog&&a.startOnTick&&a.endOnTick&&(s=2),s||this.chart.options.chart.alignTicks===!1||a.alignTicks===!1||(ma(this.chart[this.coll],function(a){var s=a.options,i=a.horiz,n=[i?s.left:s.top,i?s.width:s.height,s.pane].join(",");a.series.length&&(t[n]?e=!0:t[n]=1)}),e&&(s=vt(this.len/i)+1)),4>s&&(this.finalTickAmt=s,s=5),this.tickAmount=s},adjustTickAmount:function(){var e,t,a=this.tickInterval,s=this.tickPositions,i=this.tickAmount,n=this.finalTickAmt,r=s&&s.length;
if(i>r){for(;s.length<i;)s.push(C(s[s.length-1]+a));this.transA*=(r-1)/(i-1),this.max=s[s.length-1]}else r>i&&(this.tickInterval*=2,this.setTickPositions());if(l(n)){for(e=t=s.length;e--;)(3===n&&e%2===1||2>=n&&e>0&&t-1>e)&&s.splice(e,1);this.finalTickAmt=F}},setScale:function(){var e,t,a=this;a.oldMin=a.min,a.oldMax=a.max,a.oldAxisLength=a.len,a.setAxisSize(),t=a.len!==a.oldAxisLength,ma(a.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(e=!0)}),t||e||a.isLinked||a.forceRedraw||a.userMin!==a.oldUserMin||a.userMax!==a.oldUserMax?(a.resetStacks&&a.resetStacks(),a.forceRedraw=!1,a.getSeriesExtremes(),a.setTickInterval(),a.oldUserMin=a.userMin,a.oldUserMax=a.userMax,a.isDirty||(a.isDirty=t||a.min!==a.oldMin||a.max!==a.oldMax)):a.cleanStacks&&a.cleanStacks()},setExtremes:function(e,t,a,s,i){var n=this,r=n.chart;a=ra(a,!0),ma(n.series,function(e){delete e.kdTree}),i=na(i,{min:e,max:t}),ba(n,"setExtremes",i,function(){n.userMin=e,n.userMax=t,n.eventArgs=i,a&&r.redraw(s)})},zoom:function(e,t){var a=this.dataMin,s=this.dataMax,i=this.options,n=yt(a,ra(i.min,a)),r=ft(s,ra(i.max,s));return this.allowZoomOutside||(l(a)&&n>=e&&(e=n),l(s)&&t>=r&&(t=r)),this.displayBtn=e!==F||t!==F,this.setExtremes(e,t,!1,F,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this.chart,t=this.options,a=t.offsetLeft||0,s=t.offsetRight||0,i=this.horiz,n=ra(t.width,e.plotWidth-a+s),r=ra(t.height,e.plotHeight),o=ra(t.top,e.plotTop),d=ra(t.left,e.plotLeft+a),l=/%$/;l.test(r)&&(r=parseFloat(r)/100*e.plotHeight),l.test(o)&&(o=parseFloat(o)/100*e.plotHeight+e.plotTop),this.left=d,this.top=o,this.width=n,this.height=r,this.bottom=e.chartHeight-r-o,this.right=e.chartWidth-n-d,this.len=ft(i?n:r,0),this.pos=i?d:o},getExtremes:function(){var e=this,t=e.isLog;return{min:t?C(o(e.min)):e.min,max:t?C(o(e.max)):e.max,dataMin:e.dataMin,dataMax:e.dataMax,userMin:e.userMin,userMax:e.userMax}},getThreshold:function(e){var t=this,a=t.isLog,s=a?o(t.min):t.min,i=a?o(t.max):t.max;return null===e?e=0>i?i:s:s>e?e=s:e>i&&(e=i),t.translate(e,0,1,0,1)},autoLabelAlign:function(e){var t,a=(ra(e,0)-90*this.side+720)%360;return t=a>15&&165>a?"right":a>195&&345>a?"left":"center"},unsquish:function(){var e,t,a,s=this.chart,i=this.ticks,n=this.options.labels,r=this.horiz,o=this.tickInterval,d=o,c=this.len/(((this.categories?1:0)+this.max-this.min)/o),p=n.rotation,u=s.renderer.fontMetrics(n.style.fontSize,i[0]&&i[0].label),m=Number.MAX_VALUE,g=function(e){var t=e/(c||1);return t=t>1?vt(t):1,t*o};return r?(a=!n.staggerLines&&!n.step&&(l(p)?[p]:c<ra(n.autoRotationLimit,80)&&n.autoRotation),a&&ma(a,function(a){var s;(a===p||a&&a>=-90&&90>=a)&&(t=g(bt(u.h/_t(kt*a))),s=t+bt(a/360),m>s&&(m=s,e=a,d=t))})):n.step||(d=g(u.h)),this.autoRotation=a,this.labelRotation=ra(e,p),d},renderUnsquish:function(){var t,s,i,n,r=this.chart,o=r.renderer,d=this.tickPositions,l=this.ticks,c=this.options.labels,p=this.horiz,u=r.margin,m=this.categories?d.length:d.length-1,g=this.slotWidth=p&&!c.step&&!c.rotation&&(this.staggerLines||1)*r.plotWidth/m||!p&&(u[3]&&u[3]-r.spacing[3]||.33*r.chartWidth),h=ft(1,gt(g-2*(c.padding||5))),v={},f=o.fontMetrics(c.style.fontSize,l[0]&&l[0].label),y=c.style.textOverflow,b=0;if(a(c.rotation)||(v.rotation=c.rotation||0),this.autoRotation)ma(d,function(e){e=l[e],e&&e.labelLength>b&&(b=e.labelLength)}),b>h&&b>f.h?v.rotation=this.labelRotation:this.labelRotation=0;else if(g&&(t={width:h+Gt},!y))for(t.textOverflow="clip",i=d.length;!p&&i--;)n=d[i],s=l[n].label,s&&("ellipsis"===s.styles.textOverflow&&s.css({textOverflow:"clip"}),s.getBBox().height>this.len/d.length-(f.h-f.f)&&(s.specCss={textOverflow:"ellipsis"}));v.rotation&&(t={width:(b>.5*r.chartHeight?.33*r.chartHeight:r.chartHeight)+Gt},y||(t.textOverflow="ellipsis")),this.labelAlign=v.align=c.align||this.autoLabelAlign(this.labelRotation),ma(d,function(a){var s=l[a],i=s&&s.label;i&&(i.attr(v),t&&i.css(e(t,i.specCss)),delete i.specCss,s.rotation=v.rotation)}),this.tickRotCorr=o.rotCorr(f.b,this.labelRotation||0,2===this.side)},hasData:function(){return this.hasVisibleSeries||l(this.min)&&l(this.max)&&!!this.tickPositions},getOffset:function(){var e,t,a,s,i,n,r,o=this,d=o.chart,c=d.renderer,p=o.options,u=o.tickPositions,m=o.ticks,g=o.horiz,h=o.side,v=d.inverted?[1,0,3,2][h]:h,f=0,y=0,b=p.title,w=p.labels,_=0,x=d.axisOffset,k=d.clipOffset,P=[-1,1,1,-1][h],S=o.axisParent;if(e=o.hasData(),o.showAxis=t=e||ra(p.showEmpty,!0),o.staggerLines=o.horiz&&w.staggerLines,o.axisGroup||(o.gridGroup=c.g("grid").attr({zIndex:p.gridZIndex||1}).add(S),o.axisGroup=c.g("axis").attr({zIndex:p.zIndex||2}).add(S),o.labelGroup=c.g("axis-labels").attr({zIndex:w.zIndex||7}).addClass(Vt+o.coll.toLowerCase()+"-labels").add(S)),e||o.isLinked)ma(u,function(e){m[e]?m[e].addLabel():m[e]=new E(o,e)}),o.renderUnsquish(),ma(u,function(e){(0===h||2===h||{1:"left",3:"right"}[h]===o.labelAlign)&&(_=ft(m[e].getLabelSize(),_))}),o.staggerLines&&(_*=o.staggerLines,o.labelOffset=_);else for(n in m)m[n].destroy(),delete m[n];b&&b.text&&b.enabled!==!1&&(o.axisTitle||(o.axisTitle=c.text(b.text,0,0,b.useHTML).attr({zIndex:7,rotation:b.rotation||0,align:b.textAlign||{low:"left",middle:"center",high:"right"}[b.align]}).addClass(Vt+this.coll.toLowerCase()+"-title").css(b.style).add(o.axisGroup),o.axisTitle.isNew=!0),t&&(f=o.axisTitle.getBBox()[g?"height":"width"],a=b.offset,y=l(a)?0:ra(b.margin,g?5:10)),o.axisTitle[t?"show":"hide"]()),o.offset=P*ra(p.offset,x[h]),o.tickRotCorr=o.tickRotCorr||{x:0,y:0},r=2===h?o.tickRotCorr.y:0,s=_+y+(_&&P*(g?ra(w.y,o.tickRotCorr.y+8):w.x)-r),o.axisTitleMargin=ra(a,s),x[h]=ft(x[h],o.axisTitleMargin+f+P*o.offset,s),i=p.offset?0:2*ht(p.lineWidth/2),k[v]=ft(k[v],i)},getLinePath:function(e){var t=this.chart,a=this.opposite,s=this.offset,i=this.horiz,n=this.left+(a?this.width:0)+s,r=t.chartHeight-this.bottom-(a?this.height:0)+s;return a&&(e*=-1),t.renderer.crispLine([Jt,i?this.left:n,i?r:this.top,Kt,i?t.chartWidth-this.right:n,i?r:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,a=this.left,s=this.top,i=this.len,n=this.options.title,r=e?a:s,o=this.opposite,d=this.offset,l=n.x||0,c=n.y||0,p=t(n.style.fontSize||12),u={low:r+(e?0:i),middle:r+i/2,high:r+(e?i:0)}[n.align],m=(e?s+this.height:a)+(e?1:-1)*(o?-1:1)*this.axisTitleMargin+(2===this.side?p:0);return{x:e?u+l:m+(o?this.width:0)+d+l,y:e?m+c-(o?this.height:0)+d:u+c}},render:function(){var e,t,a,s=this,i=s.chart,n=i.renderer,r=s.options,d=s.isLog,c=s.isLinked,p=s.tickPositions,u=s.axisTitle,m=s.ticks,g=s.minorTicks,h=s.alternateBands,v=r.stackLabels,f=r.alternateGridColor,y=s.tickmarkOffset,b=r.lineWidth,w=i.hasRendered,_=w&&l(s.oldMin)&&!isNaN(s.oldMin),x=s.showAxis,k=n.globalAnimation;s.labelEdge.length=0,s.overlap=!1,ma([m,g,h],function(e){var t;for(t in e)e[t].isActive=!1}),(s.hasData()||c)&&(s.minorTickInterval&&!s.categories&&ma(s.getMinorTickPositions(),function(e){g[e]||(g[e]=new E(s,e,"minor")),_&&g[e].isNew&&g[e].render(null,!0),g[e].render(null,!1,1)}),p.length&&(ma(p,function(e,t){(!c||e>=s.min&&e<=s.max)&&(m[e]||(m[e]=new E(s,e)),_&&m[e].isNew&&m[e].render(t,!0,.1),m[e].render(t))}),y&&(0===s.min||s.single)&&(m[-1]||(m[-1]=new E(s,-1,null,!0)),m[-1].render(-1))),f&&ma(p,function(e,i){a=p[i+1]!==F?p[i+1]+y:s.max-y,i%2===0&&e<s.max&&a<=s.max-y&&(h[e]||(h[e]=new ct.PlotLineOrBand(s)),t=e+y,h[e].options={from:d?o(t):t,to:d?o(a):a,color:f},h[e].render(),h[e].isActive=!0)}),s._addedPlotLB||(ma((r.plotLines||[]).concat(r.plotBands||[]),function(e){s.addPlotBandOrLine(e)}),s._addedPlotLB=!0)),ma([m,g,h],function(e){var t,a,s=[],n=k?k.duration||500:0,r=function(){for(a=s.length;a--;)e[s[a]]&&!e[s[a]].isActive&&(e[s[a]].destroy(),delete e[s[a]])};for(t in e)e[t].isActive||(e[t].render(t,!1,0),e[t].isActive=!1,s.push(t));e!==h&&i.hasRendered&&n?n&&setTimeout(r,n):r()}),b&&(e=s.getLinePath(b),s.axisLine?s.axisLine.animate({d:e}):s.axisLine=n.path(e).attr({stroke:r.lineColor,"stroke-width":b,zIndex:7}).add(s.axisGroup),s.axisLine[x?"show":"hide"]()),u&&x&&(u[u.isNew?"attr":"animate"](s.getTitlePosition()),u.isNew=!1),v&&v.enabled&&s.renderStackTotals(),s.isDirty=!1},redraw:function(){this.visible&&(this.render(),ma(this.plotLinesAndBands,function(e){e.render()})),ma(this.series,function(e){e.isDirty=!0})},destroy:function(e){var t,a,s=this,i=s.stacks,n=s.plotLinesAndBands;e||ya(s);for(t in i)S(i[t]),i[t]=null;for(ma([s.ticks,s.minorTicks,s.alternateBands],function(e){S(e)}),a=n.length;a--;)n[a].destroy();ma(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(e){s[e]&&(s[e]=s[e].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(e,t){var a,s,i,n,r=this.crosshair,o=r.animation;if(!this.crosshair||(l(t)||!ra(this.crosshair.snap,!0))===!1||t&&t.series&&t.series[this.coll]!==this)this.hideCrosshair();else{if(ra(r.snap,!0)?l(t)&&(s=this.isXAxis?t.plotX:this.len-t.plotY):s=this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos,a=this.isRadial?this.getPlotLinePath(this.isXAxis?t.x:ra(t.stackY,t.y))||null:this.getPlotLinePath(null,null,null,null,s)||null,null===a)return void this.hideCrosshair();this.cross?this.cross.attr({visibility:Yt})[o?"animate":"attr"]({d:a},o):(n=this.categories&&!this.isRadial,i={"stroke-width":r.width||(n?this.transA:1),stroke:r.color||(n?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:r.zIndex||2},r.dashStyle&&(i.dashstyle=r.dashStyle),this.cross=this.chart.renderer.path(a).attr(i).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},na(Ia.prototype,V),Ia.prototype.getTimeTicks=function(e,t,a,s){var i,n,r=[],o={},d=H.global.useUTC,c=new Y(t-f(t)),p=e.unitRange,u=e.count;if(l(t)){c[st](p>=U.second?0:u*ht(c.getMilliseconds()/u)),p>=U.second&&c[it](p>=U.minute?0:u*ht(c.getSeconds()/u)),p>=U.minute&&c[nt](p>=U.hour?0:u*ht(c[K]()/u)),p>=U.hour&&c[rt](p>=U.day?0:u*ht(c[Z]()/u)),p>=U.day&&c[ot](p>=U.month?1:u*ht(c[et]()/u)),p>=U.month&&(c[dt](p>=U.year?0:u*ht(c[tt]()/u)),n=c[at]()),p>=U.year&&(n-=n%u,c[lt](n)),p===U.week&&c[ot](c[et]()-c[Q]()+ra(s,1)),i=1,(X||J)&&(c=c.getTime(),c=new Y(c+f(c))),n=c[at]();for(var m=c.getTime(),g=c[tt](),h=c[et](),v=(U.day+(d?f(c):60*c.getTimezoneOffset()*1e3))%U.day;a>m;)r.push(m),p===U.year?m=G(n+i*u,0):p===U.month?m=G(n,g+i*u):d||p!==U.day&&p!==U.week?m+=p*u:m=G(n,g,h+i*u*(p===U.day?1:7)),i++;r.push(m),ma(ga(r,function(e){return p<=U.hour&&e%U.day===v}),function(e){o[e]="day"})}return r.info=na(e,{higherRanks:o,totalRange:p*u}),r},Ia.prototype.normalizeTimeTickInterval=function(e,t){var a,s,i=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],n=i[i.length-1],r=U[n[0]],o=n[1];for(s=0;s<i.length;s++)if(n=i[s],r=U[n[0]],o=n[1],i[s+1]){var d=(r*o[o.length-1]+U[i[s+1][0]])/2;if(d>=e)break}return r===U.year&&5*r>e&&(o=[1,2,5]),a=_(e/r,o,"year"===n[0]?ft(w(e/r),1):1),{unitRange:r,count:a,unitName:n[0]}},Ia.prototype.getLogTickPositions=function(e,t,a,s){var i=this,n=i.options,d=i.len,l=[];if(s||(i._minorAutoInterval=null),e>=.5)e=gt(e),l=i.getLinearTickPositions(e,t,a);else if(e>=.08){var c,p,u,m,g,h,v,f=ht(t);for(c=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],p=f;a+1>p&&!v;p++)for(m=c.length,u=0;m>u&&!v;u++)g=r(o(p)*c[u]),g>t&&(!s||a>=h)&&h!==F&&l.push(h),h>a&&(v=!0),h=g}else{var y=o(t),b=o(a),x=n[s?"minorTickInterval":"tickInterval"],k="auto"===x?null:x,P=n.tickPixelInterval/(s?5:1),S=s?d/i.tickPositions.length:d;e=ra(k,i._minorAutoInterval,(b-y)*P/(S||1)),e=_(e,null,w(e)),l=va(i.getLinearTickPositions(e,y,b),r),s||(i._minorAutoInterval=e/5)}return s||(i.tickInterval=e),l};var $a=ct.Tooltip=function(){this.init.apply(this,arguments)};$a.prototype={init:function(e,a){var s=a.borderWidth,i=a.style,n=t(i.padding);this.chart=e,this.options=a,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,a.shape||"callout",null,null,a.useHTML,null,"tooltip").attr({padding:n,fill:a.backgroundColor,"stroke-width":s,r:a.borderRadius,zIndex:8}).css(i).css({padding:0}).add().attr({y:-9999}),Et||this.label.shadow(a.shadow),this.shared=a.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,t,a,s){var i=this,n=i.now,r=i.options.animation!==!1&&!i.isHidden&&(bt(e-n.x)>1||bt(t-n.y)>1),o=i.followPointer||i.len>1;na(n,{x:r?(2*n.x+e)/3:e,y:r?(n.y+t)/2:t,anchorX:o?F:r?(2*n.anchorX+a)/3:a,anchorY:o?F:r?(n.anchorY+s)/2:s}),i.label.attr(n),r&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){i&&i.move(e,t,a,s)},32))},hide:function(e){var t,a=this;clearTimeout(this.hideTimer),this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){a.label.fadeOut(),a.isHidden=!0},ra(e,this.options.hideDelay,500)))},getAnchor:function(e,t){var a,s,i,n=this.chart,r=n.inverted,o=n.plotTop,d=n.plotLeft,l=0,c=0;return e=p(e),a=e[0].tooltipPos,this.followPointer&&t&&(t.chartX===F&&(t=n.pointer.normalize(t)),a=[t.chartX-n.plotLeft,t.chartY-o]),a||(ma(e,function(e){s=e.series.yAxis,i=e.series.xAxis,l+=e.plotX+(!r&&i?i.left-d:0),c+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!r&&s?s.top-o:0)}),l/=e.length,c/=e.length,a=[r?n.plotWidth-c:l,this.shared&&!r&&e.length>1&&t?t.chartY-o:r?n.plotHeight-l:c]),va(a,gt)},getPosition:function(e,t,a){var s,i=this.chart,n=this.distance,r={},o=a.h||0,d=["y",i.chartHeight,t,a.plotY+i.plotTop,i.plotTop,i.plotTop+i.plotHeight],l=["x",i.chartWidth,e,a.plotX+i.plotLeft,i.plotLeft,i.plotLeft+i.plotWidth],c=ra(a.ttBelow,i.inverted&&!a.negative||!i.inverted&&a.negative),p=function(e,t,a,s,i,d){var l=s-n>a,p=t>s+n+a,u=s-n-a,m=s+n;if(c&&p)r[e]=m;else if(!c&&l)r[e]=u;else if(l)r[e]=yt(d-a,0>u-o?u:u-o);else{if(!p)return!1;r[e]=ft(i,m+o+a>t?m:m+o)}},u=function(e,t,a,s){return n>s||s>t-n?!1:void(r[e]=a/2>s?1:s>t-a/2?t-a-2:s-a/2)},m=function(e){var t=d;d=l,l=t,s=e},g=function(){p.apply(0,d)!==!1?u.apply(0,l)!==!1||s||(m(!0),g()):s?r.x=r.y=0:(m(!0),g())};return(i.inverted||this.len>1)&&m(),g(),r},defaultFormatter:function(e){var t,a=this.points||p(this);return t=[e.tooltipFooterHeaderFormatter(a[0])],t=t.concat(e.bodyFormatter(a)),t.push(e.tooltipFooterHeaderFormatter(a[0],!0)),t.join("")},refresh:function(e,t){var a,s,i,n,r,o,d=this,l=d.chart,c=d.label,u=d.options,m={},g=[],h=u.formatter||d.defaultFormatter,v=l.hoverPoints,f=d.shared;clearTimeout(this.hideTimer),d.followPointer=p(e)[0].series.tooltipOptions.followPointer,i=d.getAnchor(e,t),a=i[0],s=i[1],!f||e.series&&e.series.noSharedTooltip?m=e.getLabelConfig():(l.hoverPoints=e,v&&ma(v,function(e){e.setState()}),ma(e,function(e){e.setState(ea),g.push(e.getLabelConfig())}),m={x:e[0].category,y:e[0].y},m.points=g,this.len=g.length,e=e[0]),n=h.call(m,d),o=e.series,this.distance=ra(o.tooltipOptions.distance,16),n===!1?this.hide():(d.isHidden&&(xa(c),c.attr("opacity",1).show()),c.attr({text:n}),r=u.borderColor||e.color||o.color||"#606060",c.attr({stroke:r}),d.updatePosition({plotX:a,plotY:s,negative:e.negative,ttBelow:e.ttBelow,h:i[2]||0}),this.isHidden=!1),ba(l,"tooltipRefresh",{text:n,x:a+l.plotLeft,y:s+l.plotTop,borderColor:r})},updatePosition:function(e){var t=this.chart,a=this.label,s=(this.options.positioner||this.getPosition).call(this,a.width,a.height,e);this.move(gt(s.x),gt(s.y||0),e.plotX+t.plotLeft,e.plotY+t.plotTop)},getXDateFormat:function(e,t,a){var s,i,n,r=t.dateTimeLabelFormats,o=a&&a.closestPointRange,d="01-01 00:00:00.000",l={millisecond:15,second:12,minute:9,hour:6,day:3},c="millisecond";if(o){n=z("%m-%d %H:%M:%S.%L",e.x);for(i in U){if(o===U.week&&+z("%w",e.x)===a.options.startOfWeek&&n.substr(6)===d.substr(6)){i="week";break}if(U[i]>o){i=c;break}if(l[i]&&n.substr(l[i])!==d.substr(l[i]))break;"week"!==i&&(c=i)}i&&(s=r[i])}else s=r.day;return s||r.year},tooltipFooterHeaderFormatter:function(e,t){var a=t?"footer":"header",s=e.series,i=s.tooltipOptions,r=i.xDateFormat,o=s.xAxis,d=o&&"datetime"===o.options.type&&n(e.key),l=i[a+"Format"];return d&&!r&&(r=this.getXDateFormat(e,i,o)),d&&r&&(l=l.replace("{point.key}","{point.key:"+r+"}")),b(l,{point:e,series:s})},bodyFormatter:function(e){return va(e,function(e){var t=e.series.tooltipOptions;return(t.pointFormatter||e.point.tooltipFormatter).call(e.point,t.pointFormat)})}};var Ra;q=pt.documentElement.ontouchstart!==F;var Fa=ct.Pointer=function(e,t){this.init(e,t)};if(Fa.prototype={init:function(e,t){var a,s,i=t.chart,n=i.events,r=Et?"":i.zoomType,o=e.inverted;this.options=t,this.chart=e,this.zoomX=a=/x/.test(r),this.zoomY=s=/y/.test(r),this.zoomHor=a&&!o||s&&o,this.zoomVert=s&&!o||a&&o,this.hasZoom=a||s,this.runChartClick=n&&!!n.click,this.pinchDown=[],this.lastValidTouch={},ct.Tooltip&&t.tooltip.enabled&&(e.tooltip=new $a(e,t.tooltip),this.followTouchMove=ra(t.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(e,t){var a,s,i;return e=e||window.event,e=wa(e),e.target||(e.target=e.srcElement),i=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,t||(this.chartPosition=t=ha(this.chart.container)),i.pageX===F?(a=ft(e.x,e.clientX-t.left),s=e.y):(a=i.pageX-t.left,s=i.pageY-t.top),na(e,{chartX:gt(a),chartY:gt(s)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return ma(this.chart.axes,function(a){t[a.isXAxis?"xAxis":"yAxis"].push({axis:a,value:a.toValue(e[a.horiz?"chartX":"chartY"])})}),t},runPointActions:function(e){var t,a,s,i,n,r,o,d,l=this,c=l.chart,p=c.series,u=c.tooltip,m=u?u.shared:!1,g=c.hoverPoint,h=c.hoverSeries,v=Number.MAX_VALUE,f=[];if(!m&&!h)for(a=0;a<p.length;a++)(p[a].directTouch||!p[a].options.stickyTracking)&&(p=[]);if(n=h&&(m?h.noSharedTooltip:h.directTouch),n&&g?o=g:(ma(p,function(t){i=t.noSharedTooltip&&m,r=!m&&t.directTouch,t.visible&&!i&&!r&&ra(t.options.enableMouseTracking,!0)&&(d=t.searchPoint(e,!i&&1===t.kdDimensions),d&&f.push(d))}),ma(f,function(e){e&&"number"==typeof e.dist&&e.dist<v&&(v=e.dist,o=e)})),o&&(o!==this.prevKDPoint||u&&u.isHidden)){if(m&&!o.series.noSharedTooltip){for(a=f.length;a--;)(f[a].clientX!==o.clientX||f[a].series.noSharedTooltip)&&f.splice(a,1);f.length&&u&&u.refresh(f,e),ma(f,function(t){t.onMouseOver(e,t!==(h&&h.directTouch&&g||o))})}else u&&u.refresh(o,e),h&&h.directTouch||o.onMouseOver(e);this.prevKDPoint=o}else t=h&&h.tooltipOptions.followPointer,u&&t&&!u.isHidden&&(s=u.getAnchor([{}],e),u.updatePosition({plotX:s[0],plotY:s[1]}));u&&!l._onDocumentMouseMove&&(l._onDocumentMouseMove=function(e){Ft[Ra]&&Ft[Ra].pointer.onDocumentMouseMove(e)},fa(pt,"mousemove",l._onDocumentMouseMove)),ma(c.axes,function(t){t.drawCrosshair(e,ra(o,g))})},reset:function(e,t){var a=this,s=a.chart,i=s.hoverSeries,n=s.hoverPoint,r=s.hoverPoints,o=s.tooltip,d=o&&o.shared?r:n;e=e&&o&&d,e&&p(d)[0].plotX===F&&(e=!1),e?(o.refresh(d),n&&(n.setState(n.state,!0),ma(s.axes,function(e){ra(e.options.crosshair&&e.options.crosshair.snap,!0)?e.drawCrosshair(null,n):e.hideCrosshair()}))):(n&&n.onMouseOut(),r&&ma(r,function(e){e.setState()}),i&&i.onMouseOut(),o&&o.hide(t),a._onDocumentMouseMove&&(ya(pt,"mousemove",a._onDocumentMouseMove),a._onDocumentMouseMove=null),ma(s.axes,function(e){e.hideCrosshair()}),a.hoverX=s.hoverPoints=s.hoverPoint=null)},scaleGroups:function(e,t){var a,s=this.chart;ma(s.series,function(i){a=e||i.getPlotBox(),i.xAxis&&i.xAxis.zoomEnabled&&(i.group.attr(a),i.markerGroup&&(i.markerGroup.attr(a),i.markerGroup.clip(t?s.clipRect:null)),i.dataLabelsGroup&&i.dataLabelsGroup.attr(a))}),s.clipRect.attr(t||s.clipBox)},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var t,a,s=this.chart,i=s.options.chart,n=e.chartX,r=e.chartY,o=this.zoomHor,d=this.zoomVert,l=s.plotLeft,c=s.plotTop,p=s.plotWidth,u=s.plotHeight,m=this.selectionMarker,g=this.mouseDownX,h=this.mouseDownY,v=i.panKey&&e[i.panKey+"Key"];m&&m.touch||(l>n?n=l:n>l+p&&(n=l+p),c>r?r=c:r>c+u&&(r=c+u),this.hasDragged=Math.sqrt(Math.pow(g-n,2)+Math.pow(h-r,2)),this.hasDragged>10&&(t=s.isInsidePlot(g-l,h-c),s.hasCartesianSeries&&(this.zoomX||this.zoomY)&&t&&!v&&(m||(this.selectionMarker=m=s.renderer.rect(l,c,o?1:p,d?1:u,0).attr({fill:i.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),m&&o&&(a=n-g,m.attr({width:bt(a),x:(a>0?0:a)+g})),m&&d&&(a=r-h,m.attr({height:bt(a),y:(a>0?0:a)+h})),t&&!m&&i.panning&&s.pan(e,i.panning)))},drop:function(e){var t=this,a=this.chart,s=this.hasPinched;if(this.selectionMarker){var i,n={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},r=this.selectionMarker,o=r.attr?r.attr("x"):r.x,d=r.attr?r.attr("y"):r.y,c=r.attr?r.attr("width"):r.width,p=r.attr?r.attr("height"):r.height;(this.hasDragged||s)&&(ma(a.axes,function(a){if(a.zoomEnabled&&l(a.min)&&(s||t[{xAxis:"zoomX",yAxis:"zoomY"}[a.coll]])){var r=a.horiz,u="touchend"===e.type?a.minPixelPadding:0,m=a.toValue((r?o:d)+u),g=a.toValue((r?o+c:d+p)-u);n[a.coll].push({axis:a,min:yt(m,g),max:ft(m,g)}),i=!0}}),i&&ba(a,"selection",n,function(e){a.zoom(na(e,s?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),s&&this.scaleGroups()}a&&(u(a.container,{cursor:a._cursor}),a.cancelClick=this.hasDragged>10,a.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){Ft[Ra]&&Ft[Ra].pointer.drop(e)},onDocumentMouseMove:function(e){var t=this.chart,a=this.chartPosition;e=this.normalize(e,a),!a||this.inClass(e.target,"highcharts-tracker")||t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)||this.reset()},onContainerMouseLeave:function(){var e=Ft[Ra];e&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(e){var t=this.chart;Ra=t.index,e=this.normalize(e),e.returnValue=!1,"mousedown"===t.mouseIsDown&&this.drag(e),!this.inClass(e.target,"highcharts-tracker")&&!t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)||t.openMenu||this.runPointActions(e)},inClass:function(e,t){for(var a;e;){if(a=c(e,"class")){if(-1!==a.indexOf(t))return!0;if(-1!==a.indexOf(Vt+"container"))return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries,a=e.relatedTarget||e.toElement;!t||t.options.stickyTracking||this.inClass(a,Vt+"tooltip")||this.inClass(a,Vt+"series-"+t.index)||t.onMouseOut()},onContainerClick:function(e){var t=this.chart,a=t.hoverPoint,s=t.plotLeft,i=t.plotTop;e=this.normalize(e),e.originalEvent=e,t.cancelClick||(a&&this.inClass(e.target,Vt+"tracker")?(ba(a.series,"click",na(e,{point:a})),t.hoverPoint&&a.firePointEvent("click",e)):(na(e,this.getCoordinates(e)),t.isInsidePlot(e.chartX-s,e.chartY-i)&&ba(t,"click",e)))},setDOMEvents:function(){var e=this,t=e.chart.container;t.onmousedown=function(t){e.onContainerMouseDown(t)},t.onmousemove=function(t){e.onContainerMouseMove(t)},t.onclick=function(t){e.onContainerClick(t)},fa(t,"mouseleave",e.onContainerMouseLeave),1===Nt&&fa(pt,"mouseup",e.onDocumentMouseUp),q&&(t.ontouchstart=function(t){e.onContainerTouchStart(t)},t.ontouchmove=function(t){e.onContainerTouchMove(t)},1===Nt&&fa(pt,"touchend",e.onDocumentTouchEnd))},destroy:function(){var e;ya(this.chart.container,"mouseleave",this.onContainerMouseLeave),Nt||(ya(pt,"mouseup",this.onDocumentMouseUp),ya(pt,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(e in this)this[e]=null}},na(ct.Pointer.prototype,{pinchTranslate:function(e,t,a,s,i,n){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,e,t,a,s,i,n),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,e,t,a,s,i,n)},pinchTranslateDirection:function(e,t,a,s,i,n,r,o){var d,l,c,p,u,m,g=this.chart,h=e?"x":"y",v=e?"X":"Y",f="chart"+v,y=e?"width":"height",b=g["plot"+(e?"Left":"Top")],w=o||1,_=g.inverted,x=g.bounds[e?"h":"v"],k=1===t.length,P=t[0][f],S=a[0][f],O=!k&&t[1][f],A=!k&&a[1][f],C=function(){!k&&bt(P-O)>20&&(w=o||bt(S-A)/bt(P-O)),c=(b-S)/w+P,d=g["plot"+(e?"Width":"Height")]/w};C(),l=c,l<x.min?(l=x.min,p=!0):l+d>x.max&&(l=x.max-d,p=!0),p?(S-=.8*(S-r[h][0]),k||(A-=.8*(A-r[h][1])),C()):r[h]=[S,A],_||(n[h]=c-b,n[y]=d),m=_?e?"scaleY":"scaleX":"scale"+v,u=_?1/w:w,i[y]=d,i[h]=l,s[m]=w,s["translate"+v]=u*b+(S-u*P)},pinch:function(e){var t=this,a=t.chart,s=t.pinchDown,i=e.touches,n=i.length,r=t.lastValidTouch,o=t.hasZoom,d=t.selectionMarker,l={},c=1===n&&(t.inClass(e.target,Vt+"tracker")&&a.runTrackerClick||t.runChartClick),p={};n>1&&(t.initiated=!0),o&&t.initiated&&!c&&e.preventDefault(),va(i,function(e){return t.normalize(e)}),"touchstart"===e.type?(ma(i,function(e,t){s[t]={chartX:e.chartX,chartY:e.chartY}}),r.x=[s[0].chartX,s[1]&&s[1].chartX],r.y=[s[0].chartY,s[1]&&s[1].chartY],ma(a.axes,function(e){if(e.zoomEnabled){var t=a.bounds[e.horiz?"h":"v"],s=e.minPixelPadding,i=e.toPixels(ra(e.options.min,e.dataMin)),n=e.toPixels(ra(e.options.max,e.dataMax)),r=yt(i,n),o=ft(i,n);t.min=yt(e.pos,r-s),t.max=ft(e.pos+e.len,o+s)}}),t.res=!0):s.length&&(d||(t.selectionMarker=d=na({destroy:Rt,touch:!0},a.plotBox)),t.pinchTranslate(s,i,l,d,p,r),t.hasPinched=o,t.scaleGroups(l,p),!o&&t.followTouchMove&&1===n?this.runPointActions(t.normalize(e)):t.res&&(t.res=!1,this.reset(!1,0)))},touch:function(e,t){var a=this.chart;Ra=a.index,1===e.touches.length?(e=this.normalize(e),a.isInsidePlot(e.chartX-a.plotLeft,e.chartY-a.plotTop)&&!a.openMenu?(t&&this.runPointActions(e),this.pinch(e)):t&&this.reset()):2===e.touches.length&&this.pinch(e)},onContainerTouchStart:function(e){this.touch(e,!0)},onContainerTouchMove:function(e){this.touch(e)},onDocumentTouchEnd:function(e){Ft[Ra]&&Ft[Ra].pointer.drop(e)}}),ut.PointerEvent||ut.MSPointerEvent){var Na={},qa=!!ut.PointerEvent,Ba=function(){var e,t=[];t.item=function(e){return this[e]};for(e in Na)Na.hasOwnProperty(e)&&t.push({pageX:Na[e].pageX,pageY:Na[e].pageY,target:Na[e].target});return t},Ha=function(e,t,a,s){var i;e=e.originalEvent||e,"touch"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||!Ft[Ra]||(s(e),i=Ft[Ra].pointer,i[t]({type:a,target:e.currentTarget,preventDefault:Rt,touches:Ba()}))};na(Fa.prototype,{onContainerPointerDown:function(e){Ha(e,"onContainerTouchStart","touchstart",function(e){Na[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){Ha(e,"onContainerTouchMove","touchmove",function(e){Na[e.pointerId]={pageX:e.pageX,pageY:e.pageY},Na[e.pointerId].target||(Na[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){Ha(e,"onDocumentTouchEnd","touchend",function(e){delete Na[e.pointerId]})},batchMSEvents:function(e){e(this.chart.container,qa?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,qa?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(pt,qa?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),oa(Fa.prototype,"init",function(e,t,a){e.call(this,t,a),this.hasZoom&&u(t.container,{"-ms-touch-action":Xt,"touch-action":Xt})}),oa(Fa.prototype,"setDOMEvents",function(e){e.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(fa)}),oa(Fa.prototype,"destroy",function(e){this.batchMSEvents(ya),e.call(this)})}var za=ct.Legend=function(e,t){this.init(e,t)};za.prototype={init:function(t,a){var s,i=this,n=a.itemStyle,r=a.itemMarginTop||0;this.options=a,a.enabled&&(i.itemStyle=n,i.itemHiddenStyle=e(n,a.itemHiddenStyle),i.itemMarginTop=r,i.padding=s=ra(a.padding,8),i.initialItemX=s,i.initialItemY=s-5,i.maxItemWidth=0,i.chart=t,i.itemHeight=0,i.symbolWidth=ra(a.symbolWidth,16),i.pages=[],i.render(),fa(i.chart,"endResize",function(){i.positionCheckboxes()}))},colorizeItem:function(e,t){var a,s,i=this,n=i.options,r=e.legendItem,o=e.legendLine,d=e.legendSymbol,l=i.itemHiddenStyle.color,c=t?n.itemStyle.color:l,p=t?e.legendColor||e.color||"#CCC":l,u=e.options&&e.options.marker,m={fill:p};if(r&&r.css({fill:c,color:c}),o&&o.attr({stroke:p}),d){if(u&&d.isMarker){m.stroke=p,u=e.convertAttribs(u);for(a in u)s=u[a],s!==F&&(m[a]=s)}d.attr(m)}},positionItem:function(e){var t=this,a=t.options,s=a.symbolPadding,i=!a.rtl,n=e._legendItemPos,r=n[0],o=n[1],d=e.checkbox,l=e.legendGroup;l&&l.element&&l.translate(i?r:t.legendWidth-r-2*s-4,o),d&&(d.x=r,d.y=o)},destroyItem:function(e){var t=e.checkbox;ma(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&O(e.checkbox)},destroy:function(){var e=this,t=e.group,a=e.box;a&&(e.box=a.destroy()),t&&(e.group=t.destroy())},positionCheckboxes:function(e){var t,a=this.group.alignAttr,s=this.clipHeight||this.legendHeight;a&&(t=a.translateY,ma(this.allItems,function(i){var n,r=i.checkbox;r&&(n=t+r.y+(e||0)+3,u(r,{left:a.translateX+i.checkboxOffset+r.x-20+Gt,top:n+Gt,display:n>t-6&&t+s-6>n?"":Xt}))}))},renderTitle:function(){var e,t=this.options,a=this.padding,s=t.title,i=0;s.text&&(this.title||(this.title=this.chart.renderer.label(s.text,a-3,a-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(s.style).add(this.group)),e=this.title.getBBox(),i=e.height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:i})),this.titleHeight=i},setText:function(e){var t=this.options;e.legendItem.attr({text:t.labelFormat?b(t.labelFormat,e):t.labelFormatter.call(e)})},renderItem:function(t){var a,s,i,n=this,r=n.chart,o=r.renderer,d=n.options,l="horizontal"===d.layout,c=n.symbolWidth,p=d.symbolPadding,u=n.itemStyle,m=n.itemHiddenStyle,g=n.padding,h=l?ra(d.itemDistance,20):0,v=!d.rtl,f=d.width,y=d.itemMarginBottom||0,b=n.itemMarginTop,w=n.initialItemX,_=t.legendItem,x=t.series&&t.series.drawLegendSymbol?t.series:t,k=x.options,P=n.createCheckboxForItem&&k&&k.showCheckbox,S=d.useHTML;_||(t.legendGroup=o.g("legend-item").attr({zIndex:1}).add(n.scrollGroup),t.legendItem=_=o.text("",v?c+p:-p,n.baseline||0,S).css(e(t.visible?u:m)).attr({align:v?"left":"right",zIndex:2}).add(t.legendGroup),n.baseline||(n.fontMetrics=o.fontMetrics(u.fontSize,_),n.baseline=n.fontMetrics.f+3+b,_.attr("y",n.baseline)),x.drawLegendSymbol(n,t),n.setItemEvents&&n.setItemEvents(t,_,S,u,m),n.colorizeItem(t,t.visible),P&&n.createCheckboxForItem(t)),n.setText(t),s=_.getBBox(),i=t.checkboxOffset=d.itemWidth||t.legendItemWidth||c+p+s.width+h+(P?20:0),n.itemHeight=a=gt(t.legendItemHeight||s.height),l&&n.itemX-w+i>(f||r.chartWidth-2*g-w-d.x)&&(n.itemX=w,n.itemY+=b+n.lastLineHeight+y,n.lastLineHeight=0),n.maxItemWidth=ft(n.maxItemWidth,i),n.lastItemY=b+n.itemY+y,n.lastLineHeight=ft(a,n.lastLineHeight),t._legendItemPos=[n.itemX,n.itemY],l?n.itemX+=i:(n.itemY+=b+a+y,n.lastLineHeight=a),n.offsetWidth=f||ft((l?n.itemX-w-h:i)+g,n.offsetWidth)},getAllItems:function(){var e=[];return ma(this.chart.series,function(t){var a=t.options;ra(a.showInLegend,l(a.linkedTo)?!1:F,!0)&&(e=e.concat(t.legendItems||("point"===a.legendType?t.data:t)))}),e},adjustMargins:function(e,t){var a=this.chart,s=this.options,i=s.align.charAt(0)+s.verticalAlign.charAt(0)+s.layout.charAt(0);this.display&&!s.floating&&ma([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(n,r){n.test(i)&&!l(e[r])&&(a[aa[r]]=ft(a[aa[r]],a.legend[(r+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][r]*s[r%2?"x":"y"]+ra(s.margin,12)+t[r]))})},render:function(){var e,t,a,s,i=this,n=i.chart,r=n.renderer,o=i.group,d=i.box,l=i.options,c=i.padding,p=l.borderWidth,u=l.backgroundColor;i.itemX=i.initialItemX,i.itemY=i.initialItemY,i.offsetWidth=0,i.lastItemY=0,o||(i.group=o=r.g("legend").attr({zIndex:7}).add(),i.contentGroup=r.g().attr({zIndex:1}).add(o),i.scrollGroup=r.g().add(i.contentGroup)),i.renderTitle(),e=i.getAllItems(),x(e,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),l.reversed&&e.reverse(),i.allItems=e,i.display=t=!!e.length,i.lastLineHeight=0,ma(e,function(e){i.renderItem(e)}),a=(l.width||i.offsetWidth)+c,s=i.lastItemY+i.lastLineHeight+i.titleHeight,s=i.handleOverflow(s),s+=c,(p||u)&&(d?a>0&&s>0&&(d[d.isNew?"attr":"animate"](d.crisp({width:a,height:s})),d.isNew=!1):(i.box=d=r.rect(0,0,a,s,l.borderRadius,p||0).attr({stroke:l.borderColor,"stroke-width":p||0,fill:u||Xt}).add(o).shadow(l.shadow),d.isNew=!0),d[t?"show":"hide"]()),i.legendWidth=a,i.legendHeight=s,ma(e,function(e){i.positionItem(e)
}),t&&o.align(na({width:a,height:s},l),!0,"spacingBox"),n.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t,a,s=this,i=this.chart,n=i.renderer,r=this.options,o=r.y,d="top"===r.verticalAlign,l=i.spacingBox.height+(d?-o:o)-this.padding,c=r.maxHeight,p=this.clipRect,u=r.navigation,m=ra(u.animation,!0),g=u.arrowSize||12,h=this.nav,v=this.pages,f=this.padding,y=this.allItems,b=function(e){p.attr({height:e}),s.contentGroup.div&&(s.contentGroup.div.style.clip="rect("+f+"px,9999px,"+(f+e)+"px,0)")};return"horizontal"===r.layout&&(l/=2),c&&(l=yt(l,c)),v.length=0,e>l?(this.clipHeight=t=ft(l-20-this.titleHeight-f,0),this.currentPage=ra(this.currentPage,1),this.fullHeight=e,ma(y,function(e,s){var i=e._legendItemPos[1],n=gt(e.legendItem.getBBox().height),r=v.length;(!r||i-v[r-1]>t&&(a||i)!==v[r-1])&&(v.push(a||i),r++),s===y.length-1&&i+n-v[r-1]>t&&v.push(i),i!==a&&(a=i)}),p||(p=s.clipRect=n.clipRect(0,f,9999,0),s.contentGroup.clip(p)),b(t),h||(this.nav=h=n.g().attr({zIndex:1}).add(this.group),this.up=n.symbol("triangle",0,0,g,g).on("click",function(){s.scroll(-1,m)}).add(h),this.pager=n.text("",15,10).css(u.style).add(h),this.down=n.symbol("triangle-down",0,0,g,g).on("click",function(){s.scroll(1,m)}).add(h)),s.scroll(0),e=l):h&&(b(i.chartHeight),h.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var a,s=this.pages,i=s.length,n=this.currentPage+e,r=this.clipHeight,o=this.options.navigation,d=o.activeColor,l=o.inactiveColor,c=this.pager,p=this.padding;n>i&&(n=i),n>0&&(t!==F&&D(t,this.chart),this.nav.attr({translateX:p,translateY:r+this.padding+7+this.titleHeight,visibility:Yt}),this.up.attr({fill:1===n?l:d}).css({cursor:1===n?"default":"pointer"}),c.attr({text:n+"/"+i}),this.down.attr({x:18+this.pager.getBBox().width,fill:n===i?l:d}).css({cursor:n===i?"default":"pointer"}),a=-s[n-1]+this.initialItemY,this.scrollGroup.animate({translateY:a}),this.currentPage=n,this.positionCheckboxes(a))}};var Wa=ct.LegendSymbolMixin={drawRectangle:function(e,t){var a=e.options.symbolHeight||e.fontMetrics.f;t.legendSymbol=this.chart.renderer.rect(0,e.baseline-a+1,e.symbolWidth,a,e.options.symbolRadius||0).attr({zIndex:3}).add(t.legendGroup)},drawLineMarker:function(e){var t,a,s,i=this.options,n=i.marker,r=e.symbolWidth,o=this.chart.renderer,d=this.legendGroup,l=e.baseline-gt(.3*e.fontMetrics.b);i.lineWidth&&(s={"stroke-width":i.lineWidth},i.dashStyle&&(s.dashstyle=i.dashStyle),this.legendLine=o.path([Jt,0,l,Kt,r,l]).attr(s).add(d)),n&&n.enabled!==!1&&(t=n.radius,this.legendSymbol=a=o.symbol(this.symbol,r/2-t,l-t,2*t,2*t).add(d),a.isMarker=!0)}};(/Trident\/7\.0/.test(Pt)||Dt)&&oa(za.prototype,"positionItem",function(e,t){var a=this,s=function(){t._legendItemPos&&e.call(a,t)};s(),setTimeout(s)});var Ua=ct.Chart=function(){this.init.apply(this,arguments)};Ua.prototype={callbacks:[],init:function(t,a){var s,i=t.series;t.series=null,s=e(H,t),s.series=t.series=i,this.userOptions=t;var n=s.chart;this.margin=this.splashArray("margin",n),this.spacing=this.splashArray("spacing",n);var r=n.events;this.bounds={h:{},v:{}},this.callback=a,this.isResizing=0,this.options=s,this.axes=[],this.series=[],this.hasCartesianSeries=n.showAxes;var o,d=this;if(d.index=Ft.length,Ft.push(d),Nt++,n.reflow!==!1&&fa(d,"load",function(){d.initReflow()}),r)for(o in r)fa(d,o,r[o]);d.xAxis=[],d.yAxis=[],d.animation=Et?!1:ra(n.animation,!0),d.pointCount=d.colorCounter=d.symbolCounter=0,d.firstRender()},initSeries:function(e){var t,a=this,s=a.options.chart,i=e.type||s.type||s.defaultSeriesType,n=ia[i];return n||A(17,!0),t=new n,t.init(this,e),t},isInsidePlot:function(e,t,a){var s=a?t:e,i=a?e:t;return s>=0&&s<=this.plotWidth&&i>=0&&i<=this.plotHeight},redraw:function(e){var t,a,s,i=this,n=i.axes,r=i.series,o=i.pointer,d=i.legend,l=i.isDirtyLegend,c=i.hasCartesianSeries,p=i.isDirtyBox,u=r.length,m=u,g=i.renderer,h=g.isHidden(),v=[];for(D(e,i),h&&i.cloneRenderTo(),i.layOutTitles();m--;)if(s=r[m],s.options.stacking&&(t=!0,s.isDirty)){a=!0;break}if(a)for(m=u;m--;)s=r[m],s.options.stacking&&(s.isDirty=!0);ma(r,function(e){e.isDirty&&"point"===e.options.legendType&&(e.updateTotals&&e.updateTotals(),l=!0)}),l&&d.options.enabled&&(d.render(),i.isDirtyLegend=!1),t&&i.getStacks(),c&&(i.isResizing||(i.maxTicks=null,ma(n,function(e){e.setScale()}))),i.getMargins(),c&&(ma(n,function(e){e.isDirty&&(p=!0)}),ma(n,function(e){var a=e.min+","+e.max;e.extKey!==a&&(e.extKey=a,v.push(function(){ba(e,"afterSetExtremes",na(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(p||t)&&e.redraw()})),p&&i.drawChartBox(),ma(r,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),o&&o.reset(!0),g.draw(),ba(i,"redraw"),h&&i.cloneRenderTo(!0),ma(v,function(e){e.call()})},get:function(e){var t,a,s,i=this,n=i.axes,r=i.series;for(t=0;t<n.length;t++)if(n[t].options.id===e)return n[t];for(t=0;t<r.length;t++)if(r[t].options.id===e)return r[t];for(t=0;t<r.length;t++)for(s=r[t].points||[],a=0;a<s.length;a++)if(s[a].id===e)return s[a];return null},getAxes:function(){var e,t,a=this,s=this.options,i=s.xAxis=p(s.xAxis||{}),n=s.yAxis=p(s.yAxis||{});ma(i,function(e,t){e.index=t,e.isX=!0}),ma(n,function(e,t){e.index=t}),e=i.concat(n),ma(e,function(e){t=new Ia(a,e)})},getSelectedPoints:function(){var e=[];return ma(this.series,function(t){e=e.concat(ga(t.points||[],function(e){return e.selected}))}),e},getSelectedSeries:function(){return ga(this.series,function(e){return e.selected})},setTitle:function(t,a,s){var i,n,r=this,o=r.options;i=o.title=e(o.title,t),n=o.subtitle=e(o.subtitle,a),ma([["title",t,i],["subtitle",a,n]],function(e){var t=e[0],a=r[t],s=e[1],i=e[2];a&&s&&(r[t]=a=a.destroy()),i&&i.text&&!a&&(r[t]=r.renderer.text(i.text,0,0,i.useHTML).attr({align:i.align,"class":Vt+t,zIndex:i.zIndex||4}).css(i.style).add())}),r.layOutTitles(s)},layOutTitles:function(e){var t,a=0,s=this.title,i=this.subtitle,n=this.options,r=n.title,o=n.subtitle,d=this.renderer,l=this.spacingBox.width-44;s&&(s.css({width:(r.width||l)+Gt}).align(na({y:d.fontMetrics(r.style.fontSize,s).b-3},r),!1,"spacingBox"),r.floating||r.verticalAlign||(a=s.getBBox().height)),i&&(i.css({width:(o.width||l)+Gt}).align(na({y:a+(r.margin-13)+d.fontMetrics(o.style.fontSize,s).b},o),!1,"spacingBox"),o.floating||o.verticalAlign||(a=vt(a+i.getBBox().height))),t=this.titleOffset!==a,this.titleOffset=a,!this.isDirtyBox&&t&&(this.isDirtyBox=t,this.hasRendered&&ra(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var e=this,t=e.options.chart,a=t.width,s=t.height,i=e.renderToClone||e.renderTo;l(a)||(e.containerWidth=ca(i,"width")),l(s)||(e.containerHeight=ca(i,"height")),e.chartWidth=ft(0,a||e.containerWidth||600),e.chartHeight=ft(0,ra(s,e.containerHeight>19?e.containerHeight:400))},cloneRenderTo:function(e){var t=this.renderToClone,a=this.container;e?t&&(this.renderTo.appendChild(a),O(t),delete this.renderToClone):(a&&a.parentNode===this.renderTo&&this.renderTo.removeChild(a),this.renderToClone=t=this.renderTo.cloneNode(0),u(t,{position:zt,top:"-9999px",display:"block"}),t.style.setProperty&&t.style.setProperty("display","block","important"),pt.body.appendChild(t),a&&t.appendChild(a))},getContainer:function(){var e,s,i,n,r,o,d,l=this,p=l.options,u=p.chart,g="data-highcharts-chart";l.renderTo=n=u.renderTo,d=Vt+$t++,a(n)&&(l.renderTo=n=pt.getElementById(n)),n||A(13,!0),r=t(c(n,g)),!isNaN(r)&&Ft[r]&&Ft[r].hasRendered&&Ft[r].destroy(),c(n,g,l.index),n.innerHTML="",u.skipClone||n.offsetWidth||l.cloneRenderTo(),l.getChartSize(),s=l.chartWidth,i=l.chartHeight,l.container=e=m(Ht,{className:Vt+"container"+(u.className?" "+u.className:""),id:d},na({position:Wt,overflow:Ut,width:s+Gt,height:i+Gt,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},u.style),l.renderToClone||n),l._cursor=e.style.cursor,o=ct[u.renderer]||N,l.renderer=new o(e,s,i,u.style,u.forExport,p.exporting&&p.exporting.allowHTML),Et&&l.renderer.create(l,e,s,i),l.renderer.chartIndex=l.index},getMargins:function(e){var t=this,a=t.spacing,s=t.margin,i=t.titleOffset;t.resetMargins(),i&&!l(s[0])&&(t.plotTop=ft(t.plotTop,i+t.options.title.margin+a[0])),t.legend.adjustMargins(s,a),t.extraBottomMargin&&(t.marginBottom+=t.extraBottomMargin),t.extraTopMargin&&(t.plotTop+=t.extraTopMargin),e||this.getAxisMargins()},getAxisMargins:function(){var e=this,t=e.axisOffset=[0,0,0,0],a=e.margin;e.hasCartesianSeries&&ma(e.axes,function(e){e.visible&&e.getOffset()}),ma(aa,function(s,i){l(a[i])||(e[s]+=t[i])}),e.setChartSize()},reflow:function(e){var t=this,a=t.options.chart,s=t.renderTo,i=a.width||ca(s,"width"),n=a.height||ca(s,"height"),r=e?e.target:ut,o=function(){t.container&&(t.setSize(i,n,!1),t.hasUserSize=null)};t.hasUserSize||t.isPrinting||!i||!n||r!==ut&&r!==pt||((i!==t.containerWidth||n!==t.containerHeight)&&(clearTimeout(t.reflowTimeout),e?t.reflowTimeout=setTimeout(o,100):o()),t.containerWidth=i,t.containerHeight=n)},initReflow:function(){var e=this,t=function(t){e.reflow(t)};fa(ut,"resize",t),fa(e,"destroy",function(){ya(ut,"resize",t)})},setSize:function(e,t,a){var s,i,n,r,o=this,d=o.renderer;o.isResizing+=1,n=function(){o&&ba(o,"endResize",null,function(){o.isResizing-=1})},D(a,o),o.oldChartHeight=o.chartHeight,o.oldChartWidth=o.chartWidth,l(e)&&(o.chartWidth=s=ft(0,gt(e)),o.hasUserSize=!!s),l(t)&&(o.chartHeight=i=ft(0,gt(t))),r=d.globalAnimation,(r?_a:u)(o.container,{width:s+Gt,height:i+Gt},r),o.setChartSize(!0),d.setSize(s,i,a),o.maxTicks=null,ma(o.axes,function(e){e.isDirty=!0,e.setScale()}),ma(o.series,function(e){e.isDirty=!0}),o.isDirtyLegend=!0,o.isDirtyBox=!0,o.layOutTitles(),o.getMargins(),o.redraw(a),o.oldChartHeight=null,ba(o,"resize"),r=d.globalAnimation,r===!1?n():setTimeout(n,r&&r.duration||500)},setChartSize:function(e){var t,a,s,i,n,r,o,d=this,l=d.inverted,c=d.renderer,p=d.chartWidth,u=d.chartHeight,m=d.options.chart,g=d.spacing,h=d.clipOffset;d.plotLeft=s=gt(d.plotLeft),d.plotTop=i=gt(d.plotTop),d.plotWidth=n=ft(0,gt(p-s-d.marginRight)),d.plotHeight=r=ft(0,gt(u-i-d.marginBottom)),d.plotSizeX=l?r:n,d.plotSizeY=l?n:r,d.plotBorderWidth=m.plotBorderWidth||0,d.spacingBox=c.spacingBox={x:g[3],y:g[0],width:p-g[3]-g[1],height:u-g[0]-g[2]},d.plotBox=c.plotBox={x:s,y:i,width:n,height:r},o=2*ht(d.plotBorderWidth/2),t=vt(ft(o,h[3])/2),a=vt(ft(o,h[0])/2),d.clipBox={x:t,y:a,width:ht(d.plotSizeX-ft(o,h[1])/2-t),height:ft(0,ht(d.plotSizeY-ft(o,h[2])/2-a))},e||ma(d.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this;ma(aa,function(t,a){e[t]=ra(e.margin[a],e.spacing[a])}),e.axisOffset=[0,0,0,0],e.clipOffset=[0,0,0,0]},drawChartBox:function(){var e,t,a=this,s=a.options.chart,i=a.renderer,n=a.chartWidth,r=a.chartHeight,o=a.chartBackground,d=a.plotBackground,l=a.plotBorder,c=a.plotBGImage,p=s.borderWidth||0,u=s.backgroundColor,m=s.plotBackgroundColor,g=s.plotBackgroundImage,h=s.plotBorderWidth||0,v=a.plotLeft,f=a.plotTop,y=a.plotWidth,b=a.plotHeight,w=a.plotBox,_=a.clipRect,x=a.clipBox;e=p+(s.shadow?8:0),(p||u)&&(o?o.animate(o.crisp({width:n-e,height:r-e})):(t={fill:u||Xt},p&&(t.stroke=s.borderColor,t["stroke-width"]=p),a.chartBackground=i.rect(e/2,e/2,n-e,r-e,s.borderRadius,p).attr(t).addClass(Vt+"background").add().shadow(s.shadow))),m&&(d?d.animate(w):a.plotBackground=i.rect(v,f,y,b,0).attr({fill:m}).add().shadow(s.plotShadow)),g&&(c?c.animate(w):a.plotBGImage=i.image(g,v,f,y,b).add()),_?_.animate({width:x.width,height:x.height}):a.clipRect=i.clipRect(x),h&&(l?l.animate(l.crisp({x:v,y:f,width:y,height:b,strokeWidth:-h})):a.plotBorder=i.rect(v,f,y,b,0,-h).attr({stroke:s.plotBorderColor,"stroke-width":h,fill:Xt,zIndex:1}).add()),a.isDirtyBox=!1},propFromSeries:function(){var e,t,a,s=this,i=s.options.chart,n=s.options.series;ma(["inverted","angular","polar"],function(r){for(e=ia[i.type||i.defaultSeriesType],a=s[r]||i[r]||e&&e.prototype[r],t=n&&n.length;!a&&t--;)e=ia[n[t].type],e&&e.prototype[r]&&(a=!0);s[r]=a})},linkSeries:function(){var e=this,t=e.series;ma(t,function(e){e.linkedSeries.length=0}),ma(t,function(t){var s=t.options.linkedTo;a(s)&&(s=":previous"===s?e.series[t.index-1]:e.get(s),s&&(s.linkedSeries.push(t),t.linkedParent=s,t.visible=ra(t.options.visible,s.options.visible,t.visible)))})},renderSeries:function(){ma(this.series,function(e){e.translate(),e.render()})},renderLabels:function(){var e=this,a=e.options.labels;a.items&&ma(a.items,function(s){var i=na(a.style,s.style),n=t(i.left)+e.plotLeft,r=t(i.top)+e.plotTop+12;delete i.left,delete i.top,e.renderer.text(s.html,n,r).attr({zIndex:2}).css(i).add()})},render:function(){var e,t,a,s,i=this,n=i.axes,r=i.renderer,o=i.options;i.setTitle(),i.legend=new za(i,o.legend),i.getStacks&&i.getStacks(),i.getMargins(!0),i.setChartSize(),e=i.plotWidth,t=i.plotHeight=i.plotHeight-13,ma(n,function(e){e.setScale()}),i.getAxisMargins(),a=e/i.plotWidth>1.1,s=t/i.plotHeight>1.1,(a||s)&&(i.maxTicks=null,ma(n,function(e){(e.horiz&&a||!e.horiz&&s)&&e.setTickInterval(!0)}),i.getMargins()),i.drawChartBox(),i.hasCartesianSeries&&ma(n,function(e){e.visible&&e.render()}),i.seriesGroup||(i.seriesGroup=r.g("series-group").attr({zIndex:3}).add()),i.renderSeries(),i.renderLabels(),i.showCredits(o.credits),i.hasRendered=!0},showCredits:function(e){e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text,0,0).on("click",function(){e.href&&(location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position))},destroy:function(){var e,t=this,a=t.axes,s=t.series,i=t.container,n=i&&i.parentNode;for(ba(t,"destroy"),Ft[t.index]=F,Nt--,t.renderTo.removeAttribute("data-highcharts-chart"),ya(t),e=a.length;e--;)a[e]=a[e].destroy();for(e=s.length;e--;)s[e]=s[e].destroy();ma(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(e){var a=t[e];a&&a.destroy&&(t[e]=a.destroy())}),i&&(i.innerHTML="",ya(i),n&&O(i));for(e in t)delete t[e]},isReadyToRender:function(){var e=this;return!jt&&ut==ut.top&&"complete"!==pt.readyState||Et&&!ut.canvg?(Et?Ea.push(function(){e.firstRender()},e.options.global.canvasToolsURL):pt.attachEvent("onreadystatechange",function(){pt.detachEvent("onreadystatechange",e.firstRender),"complete"===pt.readyState&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,a=e.callback;e.isReadyToRender()&&(e.getContainer(),ba(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),ma(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),ba(e,"beforeRender"),ct.Pointer&&(e.pointer=new Fa(e,t)),e.render(),e.renderer.draw(),a&&a.apply(e,[e]),ma(e.callbacks,function(t){e.index!==F&&t.apply(e,[e])}),ba(e,"load"),e.cloneRenderTo(!0))},splashArray:function(e,t){var a=t[e],i=s(a)?a:[a,a,a,a];return[ra(t[e+"Top"],i[0]),ra(t[e+"Right"],i[1]),ra(t[e+"Bottom"],i[2]),ra(t[e+"Left"],i[3])]}};var Va=ct.CenteredSeriesMixin={getCenter:function(){var e,t,a,s=this.options,i=this.chart,n=2*(s.slicedOffset||0),r=i.plotWidth-2*n,o=i.plotHeight-2*n,d=s.center,l=[ra(d[0],"50%"),ra(d[1],"50%"),s.size||"100%",s.innerSize||0],c=yt(r,o);for(t=0;4>t;++t)a=l[t],e=2>t||2===t&&/%$/.test(a),l[t]=v(a,[r,o,c,l[2]][t])+(e?n:0);return l[3]>l[2]&&(l[3]=l[2]),l}},Ya=function(){};Ya.prototype={init:function(e,t,a){var s,i=this;return i.series=e,i.color=e.color,i.applyOptions(t,a),i.pointAttr={},e.options.colorByPoint&&(s=e.options.colors||e.chart.options.colors,i.color=i.color||s[e.colorCounter++],e.colorCounter===s.length&&(e.colorCounter=0)),e.chart.pointCount++,i},applyOptions:function(e,t){var a=this,s=a.series,i=s.options.pointValKey||s.pointValKey;return e=Ya.prototype.optionsToObject.call(this,e),na(a,e),a.options=a.options?na(a.options,e):e,i&&(a.y=a[i]),a.x===F&&s&&(a.x=t===F?s.autoIncrement():t),a},optionsToObject:function(e){var t,a={},s=this.series,n=s.options.keys,r=n||s.pointArrayMap||["y"],o=r.length,d=0,l=0;if("number"==typeof e||null===e)a[r[0]]=e;else if(i(e))for(!n&&e.length>o&&(t=typeof e[0],"string"===t?a.name=e[0]:"number"===t&&(a.x=e[0]),d++);o>l;)n&&void 0===e[d]||(a[r[l]]=e[d]),d++,l++;else"object"==typeof e&&(a=e,e.dataLabels&&(s._hasPointLabels=!0),e.marker&&(s._hasPointMarkers=!0));return a},destroy:function(){var e,t=this,a=t.series,s=a.chart,i=s.hoverPoints;s.pointCount--,i&&(t.setState(),d(i,t),i.length||(s.hoverPoints=null)),t===s.hoverPoint&&t.onMouseOut(),(t.graphic||t.dataLabel)&&(ya(t),t.destroyElements()),t.legendItem&&s.legend.destroyItem(t);for(e in t)t[e]=null},destroyElements:function(){for(var e,t=this,a=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],s=6;s--;)e=a[s],t[e]&&(t[e]=t[e].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(e){var t=this.series,a=t.tooltipOptions,s=ra(a.valueDecimals,""),i=a.valuePrefix||"",n=a.valueSuffix||"";return ma(t.pointArrayMap||["y"],function(t){t="{point."+t,(i||n)&&(e=e.replace(t+"}",i+t+"}"+n)),e=e.replace(t+"}",t+":,."+s+"f}")}),b(e,{point:this,series:this.series})},firePointEvent:function(e,t,a){var s=this,i=this.series,n=i.options;(n.point.events[e]||s.options&&s.options.events&&s.options.events[e])&&this.importEvents(),"click"===e&&n.allowPointSelect&&(a=function(e){s.select&&s.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),ba(this,e,t,a)},visible:!0};var Ga=ct.Series=function(){};Ga.prototype={isCartesian:!0,type:"line",pointClass:Ya,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,t){var a,s,i=this,n=e.series,r=function(e,t){return ra(e.options.index,e._i)-ra(t.options.index,t._i)};i.chart=e,i.options=t=i.setOptions(t),i.linkedSeries=[],i.bindAxes(),na(i,{name:t.name,state:Qt,pointAttr:{},visible:t.visible!==!1,selected:t.selected===!0}),Et&&(t.animation=!1),s=t.events;for(a in s)fa(i,a,s[a]);(s&&s.click||t.point&&t.point.events&&t.point.events.click||t.allowPointSelect)&&(e.runTrackerClick=!0),i.getColor(),i.getSymbol(),ma(i.parallelArrays,function(e){i[e+"Data"]=[]}),i.setData(t.data,!1),i.isCartesian&&(e.hasCartesianSeries=!0),n.push(i),i._i=n.length-1,x(n,r),this.yAxis&&x(this.yAxis.series,r),ma(n,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)})},bindAxes:function(){var e,t=this,a=t.options,s=t.chart;ma(t.axisTypes||[],function(i){ma(s[i],function(s){e=s.options,(a[i]===e.index||a[i]!==F&&a[i]===e.id||a[i]===F&&0===e.index)&&(s.series.push(t),t[i]=s,s.isDirty=!0)}),t[i]||t.optionalAxis===i||A(18,!0)})},updateParallelArrays:function(e,t){var a=e.series,s=arguments,i="number"==typeof t?function(s){var i="y"===s&&a.toYData?a.toYData(e):e[s];a[s+"Data"][t]=i}:function(e){Array.prototype[t].apply(a[e+"Data"],Array.prototype.slice.call(s,2))};ma(a.parallelArrays,i)},autoIncrement:function(){var e,t,a=this.options,s=this.xIncrement,i=a.pointIntervalUnit;return s=ra(s,a.pointStart,0),this.pointInterval=t=ra(this.pointInterval,a.pointInterval,1),("month"===i||"year"===i)&&(e=new Y(s),e="month"===i?+e[dt](e[tt]()+t):+e[lt](e[at]()+t),t=e-s),this.xIncrement=s+t,s},getSegments:function(){var e,t=this,a=-1,s=[],i=t.points,n=i.length;if(n)if(t.options.connectNulls){for(e=n;e--;)null===i[e].y&&i.splice(e,1);i.length&&(s=[i])}else ma(i,function(e,t){null===e.y?(t>a+1&&s.push(i.slice(a+1,t)),a=t):t===n-1&&s.push(i.slice(a+1,t+1))});t.segments=s},setOptions:function(t){var a,s,i=this.chart,n=i.options,r=n.plotOptions,o=i.userOptions||{},d=o.plotOptions||{},c=r[this.type];return this.userOptions=t,a=e(c,r.series,t),this.tooltipOptions=e(H.tooltip,H.plotOptions[this.type].tooltip,o.tooltip,d.series&&d.series.tooltip,d[this.type]&&d[this.type].tooltip,t.tooltip),null===c.marker&&delete a.marker,this.zoneAxis=a.zoneAxis,s=this.zones=(a.zones||[]).slice(),!a.negativeColor&&!a.negativeFillColor||a.zones||s.push({value:a[this.zoneAxis+"Threshold"]||a.threshold||0,color:a.negativeColor,fillColor:a.negativeFillColor}),s.length&&l(s[s.length-1].value)&&s.push({color:this.color,fillColor:this.fillColor}),a},getCyclic:function(e,t,a){var s,i=this.userOptions,n="_"+e+"Index",r=e+"Counter";t||(l(i[n])?s=i[n]:(i[n]=s=this.chart[r]%a.length,this.chart[r]+=1),t=a[s]),this[e]=t},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||ka[this.type].color,this.chart.options.colors)},getSymbol:function(){var e=this.options.marker;this.getCyclic("symbol",e.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(e.radius=0)},drawLegendSymbol:Wa.drawLineMarker,setData:function(e,t,s,r){var o,d,c,p=this,u=p.points,m=u&&u.length||0,g=p.options,h=p.chart,v=null,f=p.xAxis,y=f&&!!f.categories,b=g.turboThreshold,w=this.xData,_=this.yData,x=p.pointArrayMap,k=x&&x.length;if(e=e||[],o=e.length,t=ra(t,!0),r!==!1&&o&&m===o&&!p.cropped&&!p.hasGroupedData&&p.visible)ma(e,function(e,t){u[t].update&&u[t].update(e,!1,null,!1)});else{if(p.xIncrement=null,p.pointRange=y?1:g.pointRange,p.colorCounter=0,ma(this.parallelArrays,function(e){p[e+"Data"].length=0}),b&&o>b){for(d=0;null===v&&o>d;)v=e[d],d++;if(n(v)){var P=ra(g.pointStart,0),S=ra(g.pointInterval,1);for(d=0;o>d;d++)w[d]=P,_[d]=e[d],P+=S;p.xIncrement=P}else if(i(v))if(k)for(d=0;o>d;d++)c=e[d],w[d]=c[0],_[d]=c.slice(1,k+1);else for(d=0;o>d;d++)c=e[d],w[d]=c[0],_[d]=c[1];else A(12)}else for(d=0;o>d;d++)e[d]!==F&&(c={series:p},p.pointClass.prototype.applyOptions.apply(c,[e[d]]),p.updateParallelArrays(c,d),y&&l(c.name)&&(f.names[c.x]=c.name));for(a(_[0])&&A(14,!0),p.data=[],p.options.data=e,d=m;d--;)u[d]&&u[d].destroy&&u[d].destroy();f&&(f.minRange=f.userMinRange),p.isDirty=p.isDirtyData=h.isDirtyBox=!0,s=!1}"point"===g.legendType&&(this.processData(),this.generatePoints()),t&&h.redraw(s)},processData:function(e){var t,a,s,i,n,r,o,d,l=this,c=l.xData,p=l.yData,u=c.length,m=0,g=l.xAxis,h=l.options,v=h.cropThreshold,f=l.getExtremesFromAll||h.getExtremesFromAll,y=l.isCartesian;if(y&&!l.isDirty&&!g.isDirty&&!l.yAxis.isDirty&&!e)return!1;for(g&&(r=g.getExtremes(),o=r.min,d=r.max),y&&l.sorted&&!f&&(!v||u>v||l.forceCrop)&&(c[u-1]<o||c[0]>d?(c=[],p=[]):(c[0]<o||c[u-1]>d)&&(t=this.cropData(l.xData,l.yData,o,d),c=t.xData,p=t.yData,m=t.start,a=!0)),n=c.length-1;n>=0;n--)s=c[n]-c[n-1],s>0&&(i===F||i>s)?i=s:0>s&&l.requireSorting&&A(15);l.cropped=a,l.cropStart=m,l.processedXData=c,l.processedYData=p,null===h.pointRange&&(l.pointRange=i||1),l.closestPointRange=i},cropData:function(e,t,a,s){var i,n=e.length,r=0,o=n,d=ra(this.cropShoulder,1);for(i=0;n>i;i++)if(e[i]>=a){r=ft(0,i-d);break}for(;n>i;i++)if(e[i]>s){o=i+d;break}return{xData:e.slice(r,o),yData:t.slice(r,o),start:r,end:o}},generatePoints:function(){var e,t,a,s,i=this,n=i.options,r=n.data,o=i.data,d=i.processedXData,l=i.processedYData,c=i.pointClass,u=d.length,m=i.cropStart||0,g=i.hasGroupedData,h=[];if(!o&&!g){var v=[];v.length=r.length,o=i.data=v}for(s=0;u>s;s++)t=m+s,g?h[s]=(new c).init(i,[d[s]].concat(p(l[s]))):(o[t]?a=o[t]:r[t]!==F&&(o[t]=a=(new c).init(i,r[t],d[s])),h[s]=a),h[s].index=t;if(o&&(u!==(e=o.length)||g))for(s=0;e>s;s++)s!==m||g||(s+=u),o[s]&&(o[s].destroyElements(),o[s].plotX=F);i.data=o,i.points=h},getExtremes:function(e){var t,a,s,i,n,r,o,d=this.xAxis,l=this.yAxis,c=this.processedXData,p=[],u=0,m=d.getExtremes(),g=m.min,h=m.max;for(e=e||this.stackedYData||this.processedYData,t=e.length,r=0;t>r;r++)if(i=c[r],n=e[r],a=null!==n&&n!==F&&(!l.isLog||n.length||n>0),s=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(c[r+1]||i)>=g&&(c[r-1]||i)<=h,a&&s)if(o=n.length)for(;o--;)null!==n[o]&&(p[u++]=n[o]);else p[u++]=n;this.dataMin=k(p),this.dataMax=P(p)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var e,t,a,s,i,r=this,o=r.options,d=o.stacking,c=r.xAxis,p=c.categories,u=r.yAxis,m=r.points,g=m.length,h=!!r.modifyValue,v=o.pointPlacement,f="between"===v||n(v),y=o.threshold,b=o.startFromThreshold?y:0,w=Number.MAX_VALUE;for(e=0;g>e;e++){var _,x,k=m[e],P=k.x,S=k.y,O=k.low,C=d&&u.stacks[(r.negStacks&&(b?0:y)>S?"-":"")+r.stackKey];u.isLog&&null!==S&&0>=S&&(k.y=S=null,A(10)),k.plotX=t=yt(ft(-1e5,c.translate(P,0,0,0,1,v,"flags"===this.type)),1e5),d&&r.visible&&C&&C[P]&&(i=r.getStackIndicator(i,P,r.index),_=C[P],x=_.points[i.key],O=x[0],S=x[1],O===b&&(O=ra(y,u.min)),u.isLog&&0>=O&&(O=null),k.total=k.stackTotal=_.total,k.percentage=_.total&&k.y/_.total*100,k.stackY=S,_.setOffset(r.pointXOffset||0,r.barW||0)),k.yBottom=l(O)?u.translate(O,0,1,0,1):null,h&&(S=r.modifyValue(S,k)),k.plotY=a="number"==typeof S&&1/0!==S?yt(ft(-1e5,u.translate(S,0,1,0,1)),1e5):F,k.isInside=a!==F&&a>=0&&a<=u.len&&t>=0&&t<=c.len,k.clientX=f?c.translate(P,0,0,0,1):t,k.negative=k.y<(y||0),k.category=p&&p[k.x]!==F?p[k.x]:k.x,e&&(w=yt(w,bt(t-s))),s=t}r.closestPointRangePx=w,r.getSegments()},setClip:function(e){var t=this.chart,a=this.options,s=t.renderer,i=t.inverted,n=this.clipBox,r=n||t.clipBox,o=this.sharedClipKey||["_sharedClip",e&&e.duration,e&&e.easing,r.height,a.xAxis,a.yAxis].join(","),d=t[o],l=t[o+"m"];d||(e&&(r.width=0,t[o+"m"]=l=s.clipRect(-99,i?-t.plotLeft:-t.plotTop,99,i?t.chartWidth:t.chartHeight)),t[o]=d=s.clipRect(r)),e&&(d.count+=1),a.clip!==!1&&(this.group.clip(e||n?d:t.clipRect),this.markerGroup.clip(l),this.sharedClipKey=o),e||(d.count-=1,d.count<=0&&o&&t[o]&&(n||(t[o]=t[o].destroy()),t[o+"m"]&&(t[o+"m"]=t[o+"m"].destroy())))},animate:function(e){var t,a,i=this,n=i.chart,r=i.options.animation;r&&!s(r)&&(r=ka[i.type].animation),e?i.setClip(r):(a=this.sharedClipKey,t=n[a],t&&t.animate({width:n.plotSizeX},r),n[a+"m"]&&n[a+"m"].animate({width:n.plotSizeX+99},r),i.animate=null)},afterAnimate:function(){this.setClip(),ba(this,"afterAnimate")},drawPoints:function(){var e,t,a,s,i,n,r,o,d,l,c,p,u,m=this,g=m.points,h=m.chart,v=m.options,f=v.marker,y=m.pointAttr[""],b=m.markerGroup,w=m.xAxis,_=ra(f.enabled,w.isRadial,m.closestPointRangePx>2*f.radius);if(f.enabled!==!1||m._hasPointMarkers)for(s=g.length;s--;)i=g[s],t=ht(i.plotX),a=i.plotY,d=i.graphic,l=i.marker||{},c=!!i.marker,p=_&&l.enabled===F||l.enabled,u=i.isInside,p&&a!==F&&!isNaN(a)&&null!==i.y?(e=i.pointAttr[i.selected?ta:Qt]||y,n=e.r,r=ra(l.symbol,m.symbol),o=0===r.indexOf("url"),d?d[u?"show":"hide"](!0).animate(na({x:t-n,y:a-n},d.symbolName?{width:2*n,height:2*n}:{})):u&&(n>0||o)&&(i.graphic=d=h.renderer.symbol(r,t-n,a-n,2*n,2*n,c?l:f).attr(e).add(b))):d&&(i.graphic=d.destroy())},convertAttribs:function(e,t,a,s){var i,n,r=this.pointAttrToOptions,o={};e=e||{},t=t||{},a=a||{},s=s||{};for(i in r)n=r[i],o[i]=ra(e[n],t[i],a[i],s[i]);return o},getAttribs:function(){var e,t,a,s,i,n,r,o,d=this,c=d.options,p=ka[d.type].marker?c.marker:c,u=p.states,m=u[ea],g=d.color,h=d.options.negativeColor,v={stroke:g,fill:g},f=d.points||[],y=[],b=d.pointAttrToOptions,w=d.hasPointSpecificOptions,_=p.lineColor,x=p.fillColor,k=c.turboThreshold,P=d.zones,S=d.zoneAxis||"y";if(c.marker?(m.radius=m.radius||p.radius+m.radiusPlus,m.lineWidth=m.lineWidth||p.lineWidth+m.lineWidthPlus):(m.color=m.color||Ca(m.color||g).brighten(m.brightness).get(),m.negativeColor=m.negativeColor||Ca(m.negativeColor||h).brighten(m.brightness).get()),y[Qt]=d.convertAttribs(p,v),ma([ea,ta],function(e){y[e]=d.convertAttribs(u[e],y[Qt])}),d.pointAttr=y,t=f.length,!k||k>t||w)for(;t--;){if(i=f[t],p=i.options&&i.options.marker||i.options,p&&p.enabled===!1&&(p.radius=0),P.length){for(a=0,s=P[a];i[S]>=s.value;)s=P[++a];i.color=i.fillColor=ra(s.color,d.color)}if(w=c.colorByPoint||i.color,i.options)for(o in b)l(p[b[o]])&&(w=!0);w?(p=p||{},n=[],u=p.states||{},e=u[ea]=u[ea]||{},(!c.marker||i.negative&&!e.fillColor&&!m.fillColor)&&(e[d.pointAttrToOptions.fill]=e.color||!i.options.color&&m[i.negative&&h?"negativeColor":"color"]||Ca(i.color).brighten(e.brightness||m.brightness).get()),r={color:i.color},x||(r.fillColor=i.color),_||(r.lineColor=i.color),p.hasOwnProperty("color")&&!p.color&&delete p.color,n[Qt]=d.convertAttribs(na(r,p),y[Qt]),n[ea]=d.convertAttribs(u[ea],y[ea],n[Qt]),n[ta]=d.convertAttribs(u[ta],y[ta],n[Qt])):n=y,i.pointAttr=n}},destroy:function(){var e,t,a,s,i,n=this,r=n.chart,o=/AppleWebKit\/533/.test(Pt),l=n.data||[];for(ba(n,"destroy"),ya(n),ma(n.axisTypes||[],function(e){i=n[e],i&&(d(i.series,n),i.isDirty=i.forceRedraw=!0)}),n.legendItem&&n.chart.legend.destroyItem(n),t=l.length;t--;)a=l[t],a&&a.destroy&&a.destroy();n.points=null,clearTimeout(n.animationTimeout);for(s in n)n[s]instanceof L&&!n[s].survive&&(e=o&&"group"===s?"hide":"destroy",n[s][e]());r.hoverSeries===n&&(r.hoverSeries=null),d(r.series,n);for(s in n)delete n[s]},getSegmentPath:function(e){var t=this,a=[],s=t.options.step;return ma(e,function(i,n){var r,o=i.plotX,d=i.plotY;t.getPointSpline?a.push.apply(a,t.getPointSpline(e,i,n)):(a.push(n?Kt:Jt),s&&n&&(r=e[n-1],"right"===s?a.push(r.plotX,d,Kt):"center"===s?a.push((r.plotX+o)/2,r.plotY,Kt,(r.plotX+o)/2,d,Kt):a.push(o,r.plotY,Kt)),a.push(i.plotX,i.plotY))}),a},getGraphPath:function(){var e,t=this,a=[],s=[];return ma(t.segments,function(i){e=t.getSegmentPath(i),i.length>1?a=a.concat(e):s.push(i[0])}),t.singlePoints=s,t.graphPath=a,a},drawGraph:function(){var e=this,t=this.options,a=[["graph",t.lineColor||this.color,t.dashStyle]],s=t.lineWidth,i="square"!==t.linecap,n=this.getGraphPath(),r=this.fillGraph&&this.color||Xt,o=this.zones;ma(o,function(s,i){a.push(["zoneGraph"+i,s.color||e.color,s.dashStyle||t.dashStyle])}),ma(a,function(a,o){var d,l=a[0],c=e[l];c?c.animate({d:n}):(s||r)&&n.length&&(d={stroke:a[1],"stroke-width":s,fill:r,zIndex:1},a[2]?d.dashstyle=a[2]:i&&(d["stroke-linecap"]=d["stroke-linejoin"]="round"),e[l]=e.chart.renderer.path(n).attr(d).add(e.group).shadow(2>o&&t.shadow))})},applyZones:function(){var e,t,a,s,i,n,r,o=this,d=this.chart,l=d.renderer,c=this.zones,p=this.clips||[],u=this.graph,m=this.area,g=ft(d.chartWidth,d.chartHeight),h=this[(this.zoneAxis||"y")+"Axis"],v=h.reversed,f=d.inverted,y=h.horiz,b=!1;c.length&&(u||m)&&h.min!==F&&(u&&u.hide(),m&&m.hide(),s=h.getExtremes(),ma(c,function(c,w){e=v?y?d.plotWidth:0:y?0:h.toPixels(s.min),e=yt(ft(ra(t,e),0),g),t=yt(ft(gt(h.toPixels(ra(c.value,s.max),!0)),0),g),b&&(e=t=h.toPixels(s.max)),i=Math.abs(e-t),n=yt(e,t),r=ft(e,t),h.isXAxis?(a={x:f?r:n,y:0,width:i,height:g},y||(a.x=d.plotHeight-a.x)):(a={x:0,y:f?r:n,width:g,height:i},y&&(a.y=d.plotWidth-a.y)),d.inverted&&l.isVML&&(a=h.isXAxis?{x:0,y:v?n:r,height:a.width,width:d.chartWidth}:{x:a.y-d.plotLeft-d.spacingBox.x,y:0,width:a.height,height:d.chartHeight}),p[w]?p[w].animate(a):(p[w]=l.clipRect(a),u&&o["zoneGraph"+w].clip(p[w]),m&&o["zoneArea"+w].clip(p[w])),b=c.value>s.max}),this.clips=p)},invertGroups:function(){function e(){var e={width:t.yAxis.len,height:t.xAxis.len};ma(["group","markerGroup"],function(a){t[a]&&t[a].attr(e).invert()})}var t=this,a=t.chart;t.xAxis&&(fa(a,"resize",e),fa(t,"destroy",function(){ya(a,"resize",e)}),e(),t.invertGroups=e)},plotGroup:function(e,t,a,s,i){var n=this[e],r=!n;return r&&(this[e]=n=this.chart.renderer.g(t).attr({visibility:a,zIndex:s||.1}).add(i),n.addClass("highcharts-series-"+this.index)),n[r?"attr":"animate"](this.getPlotBox()),n},getPlotBox:function(){var e=this.chart,t=this.xAxis,a=this.yAxis;return e.inverted&&(t=a,a=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:a?a.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var e,t=this,a=t.chart,s=t.options,i=s.animation,n=i&&!!t.animate&&a.renderer.isSVG&&ra(i.duration,500)||0,r=t.visible?Yt:Ut,o=s.zIndex,d=t.hasRendered,l=a.seriesGroup;e=t.plotGroup("group","series",r,o,l),t.markerGroup=t.plotGroup("markerGroup","markers",r,o,l),n&&t.animate(!0),t.getAttribs(),e.inverted=t.isCartesian?a.inverted:!1,t.drawGraph&&(t.drawGraph(),t.applyZones()),ma(t.points,function(e){e.redraw&&e.redraw()}),t.drawDataLabels&&t.drawDataLabels(),t.visible&&t.drawPoints(),t.drawTracker&&t.options.enableMouseTracking!==!1&&t.drawTracker(),a.inverted&&t.invertGroups(),s.clip===!1||t.sharedClipKey||d||e.clip(a.clipRect),n&&t.animate(),d||(n?t.animationTimeout=setTimeout(function(){t.afterAnimate()
},n):t.afterAnimate()),t.isDirty=t.isDirtyData=!1,t.hasRendered=!0},redraw:function(){var e=this,t=e.chart,a=e.isDirtyData,s=e.isDirty,i=e.group,n=e.xAxis,r=e.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:ra(n&&n.left,t.plotLeft),translateY:ra(r&&r.top,t.plotTop)})),e.translate(),e.render(),a&&ba(e,"updatedData"),(s||a)&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(e,t){var a=this,s=a.xAxis,i=a.yAxis,n=a.chart.inverted;return this.searchKDTree({clientX:n?s.len-e.chartY+s.pos:e.chartX-s.pos,plotY:n?i.len-e.chartX+i.pos:e.chartY-i.pos},t)},buildKDTree:function(){function e(t,s,i){var n,r,o=t&&t.length;return o?(n=a.kdAxisArray[s%i],t.sort(function(e,t){return e[n]-t[n]}),r=Math.floor(o/2),{point:t[r],left:e(t.slice(0,r),s+1,i),right:e(t.slice(r+1),s+1,i)}):void 0}function t(){var t=ga(a.points||[],function(e){return null!==e.y});a.kdTree=e(t,s,s)}var a=this,s=a.kdDimensions;delete a.kdTree,a.options.kdSync?t():setTimeout(t)},searchKDTree:function(e,t){function a(e,t){var a=l(e[n])&&l(t[n])?Math.pow(e[n]-t[n],2):null,s=l(e[r])&&l(t[r])?Math.pow(e[r]-t[r],2):null,i=(a||0)+(s||0);t.dist=l(i)?Math.sqrt(i):Number.MAX_VALUE,t.distX=l(a)?Math.sqrt(a):Number.MAX_VALUE}function s(e,t,n,r){var d,l,c,p,u,m=t.point,g=i.kdAxisArray[n%r],h=m;return a(e,m),d=e[g]-m[g],l=0>d?"left":"right",c=0>d?"right":"left",t[l]&&(p=s(e,t[l],n+1,r),h=p[o]<h[o]?p:m),t[c]&&Math.sqrt(d*d)<h[o]&&(u=s(e,t[c],n+1,r),h=u[o]<h[o]?u:h),h}var i=this,n=this.kdAxisArray[0],r=this.kdAxisArray[1],o=t?"distX":"dist";return this.kdTree||this.buildKDTree(),this.kdTree?s(e,this.kdTree,this.kdDimensions,this.kdDimensions):void 0}},I.prototype={destroy:function(){S(this,this.axis)},render:function(e){var t=this.options,a=t.format,s=a?b(a,this):t.formatter.call(this);this.label?this.label.attr({text:s,visibility:Ut}):this.label=this.axis.chart.renderer.text(s,null,null,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:Ut}).add(e)},setOffset:function(e,t){var a,s=this,i=s.axis,n=i.chart,r=n.inverted,o=i.reversed,d=this.isNegative&&!o||!this.isNegative&&o,l=i.translate(i.usePercentage?100:this.total,0,0,0,1),c=i.translate(0),p=bt(l-c),u=n.xAxis[0].translate(this.x)+e,m=n.plotHeight,g={x:r?d?l:l-p:u,y:r?m-u-t:d?m-l-p:m-l,width:r?p:t,height:r?t:p},h=this.label;h&&(h.align(this.alignOptions,null,g),a=h.alignAttr,h[this.options.crop===!1||n.isInsidePlot(a.x,a.y)?"show":"hide"](!0))}},Ua.prototype.getStacks=function(){var e=this;ma(e.yAxis,function(e){e.stacks&&e.hasVisibleSeries&&(e.oldStacks=e.stacks)}),ma(e.series,function(t){!t.options.stacking||t.visible!==!0&&e.options.chart.ignoreHiddenSeries!==!1||(t.stackKey=t.type+ra(t.options.stack,""))})},Ia.prototype.buildStacks=function(){var e=this.series,t=ra(this.options.reversedStacks,!0),a=e.length;if(!this.isXAxis){for(this.usePercentage=!1;a--;)e[t?a:e.length-a-1].setStackedPoints();if(this.usePercentage)for(a=0;a<e.length;a++)e[a].setPercentStacks()}},Ia.prototype.renderStackTotals=function(){var e,t,a,s=this,i=s.chart,n=i.renderer,r=s.stacks,o=s.stackTotalGroup;o||(s.stackTotalGroup=o=n.g("stack-labels").attr({visibility:Yt,zIndex:6}).add()),o.translate(i.plotLeft,i.plotTop);for(e in r){t=r[e];for(a in t)t[a].render(o)}},Ia.prototype.resetStacks=function(){var e,t,a=this.stacks;if(!this.isXAxis)for(e in a)for(t in a[e])a[e][t].touched<this.stacksTouched?(a[e][t].destroy(),delete a[e][t]):(a[e][t].total=null,a[e][t].cum=0)},Ia.prototype.cleanStacks=function(){var e,t,a;if(!this.isXAxis){this.oldStacks&&(e=this.stacks=this.oldStacks);for(t in e)for(a in e[t])e[t][a].cum=e[t][a].total}},Ga.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var e,t,a,s,i,n,r,o,d,l=this,c=l.processedXData,p=l.processedYData,u=[],m=p.length,g=l.options,h=g.threshold,v=g.startFromThreshold?h:0,f=g.stack,y=g.stacking,b=l.stackKey,w="-"+b,_=l.negStacks,x=l.yAxis,k=x.stacks,P=x.oldStacks;for(x.stacksTouched+=1,r=0;m>r;r++)o=c[r],d=p[r],e=l.getStackIndicator(e,o,l.index),n=e.key,t=_&&(v?0:h)>d,i=t?w:b,k[i]||(k[i]={}),k[i][o]||(P[i]&&P[i][o]?(k[i][o]=P[i][o],k[i][o].total=null):k[i][o]=new I(x,x.options.stackLabels,t,o,f)),a=k[i][o],a.points[n]=[ra(a.cum,v)],a.touched=x.stacksTouched,"percent"===y?(s=t?b:w,_&&k[s]&&k[s][o]?(s=k[s][o],a.total=s.total=ft(s.total,a.total)+bt(d)||0):a.total=C(a.total+(bt(d)||0))):a.total=C(a.total+(d||0)),a.cum=ra(a.cum,v)+(d||0),a.points[n].push(a.cum),u[r]=a.cum;"percent"===y&&(x.usePercentage=!0),this.stackedYData=u,x.oldStacks={}}},Ga.prototype.setPercentStacks=function(){var e,t=this,a=t.stackKey,s=t.yAxis.stacks,i=t.processedXData;ma([a,"-"+a],function(a){for(var n,r,o,d,l=i.length;l--;)n=i[l],e=t.getStackIndicator(e,n,t.index),r=s[a]&&s[a][n],o=r&&r.points[e.key],o&&(d=r.total?100/r.total:0,o[0]=C(o[0]*d),o[1]=C(o[1]*d),t.stackedYData[l]=o[1])})},Ga.prototype.getStackIndicator=function(e,t,a){return l(e)&&e.x===t?e.index++:e={x:t,index:0},e.key=[a,t,e.index].join(","),e},na(Ua.prototype,{addSeries:function(e,t,a){var s,i=this;return e&&(t=ra(t,!0),ba(i,"addSeries",{options:e},function(){s=i.initSeries(e),i.isDirtyLegend=!0,i.linkSeries(),t&&i.redraw(a)})),s},addAxis:function(t,a,s,i){var n,r=a?"xAxis":"yAxis",o=this.options;n=new Ia(this,e(t,{index:this[r].length,isX:a})),o[r]=p(o[r]||{}),o[r].push(t),ra(s,!0)&&this.redraw(i)},showLoading:function(e){var t=this,a=t.options,s=t.loadingDiv,i=a.loading,n=function(){s&&u(s,{left:t.plotLeft+Gt,top:t.plotTop+Gt,width:t.plotWidth+Gt,height:t.plotHeight+Gt})};s||(t.loadingDiv=s=m(Ht,{className:Vt+"loading"},na(i.style,{zIndex:10,display:Xt}),t.container),t.loadingSpan=m("span",null,i.labelStyle,s),fa(t,"redraw",n)),t.loadingSpan.innerHTML=e||a.lang.loading,t.loadingShown||(u(s,{opacity:0,display:""}),_a(s,{opacity:i.style.opacity},{duration:i.showDuration||0}),t.loadingShown=!0),n()},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&_a(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){u(t,{display:Xt})}}),this.loadingShown=!1}}),na(Ya.prototype,{update:function(e,t,a,n){function r(){d.applyOptions(e),null===d.y&&c&&(d.graphic=c.destroy()),s(e)&&!i(e)&&(d.redraw=function(){c&&c.element&&e&&e.marker&&e.marker.symbol&&(d.graphic=c.destroy()),e&&e.dataLabels&&d.dataLabel&&(d.dataLabel=d.dataLabel.destroy()),d.redraw=null}),o=d.index,l.updateParallelArrays(d,o),m&&d.name&&(m[d.x]=d.name),u.data[o]=d.options,l.isDirty=l.isDirtyData=!0,!l.fixedBox&&l.hasCartesianSeries&&(p.isDirtyBox=!0),"point"===u.legendType&&(p.isDirtyLegend=!0),t&&p.redraw(a)}var o,d=this,l=d.series,c=d.graphic,p=l.chart,u=l.options,m=l.xAxis&&l.xAxis.names;t=ra(t,!0),n===!1?r():d.firePointEvent("update",{options:e},r)},remove:function(e,t){this.series.removePoint(ua(this,this.series.data),e,t)}}),na(Ga.prototype,{addPoint:function(e,t,a,s){var i,n,r,o,d=this,l=d.options,c=d.data,p=d.graph,u=d.area,m=d.chart,g=d.xAxis&&d.xAxis.names,h=p&&p.shift||0,v=["graph","area"],f=l.data,y=d.xData;if(D(s,m),a){for(r=d.zones.length;r--;)v.push("zoneGraph"+r,"zoneArea"+r);ma(v,function(e){d[e]&&(d[e].shift=h+(l.step?2:1))})}if(u&&(u.isArea=!0),t=ra(t,!0),i={series:d},d.pointClass.prototype.applyOptions.apply(i,[e]),o=i.x,r=y.length,d.requireSorting&&o<y[r-1])for(n=!0;r&&y[r-1]>o;)r--;d.updateParallelArrays(i,"splice",r,0,0),d.updateParallelArrays(i,r),g&&i.name&&(g[o]=i.name),f.splice(r,0,e),n&&(d.data.splice(r,0,null),d.processData()),"point"===l.legendType&&d.generatePoints(),a&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),d.updateParallelArrays(i,"shift"),f.shift())),d.isDirty=!0,d.isDirtyData=!0,t&&(d.getAttribs(),m.redraw())},removePoint:function(e,t,a){var s=this,i=s.data,n=i[e],r=s.points,o=s.chart,d=function(){i.length===r.length&&r.splice(e,1),i.splice(e,1),s.options.data.splice(e,1),s.updateParallelArrays(n||{series:s},"splice",e,1),n&&n.destroy(),s.isDirty=!0,s.isDirtyData=!0,t&&o.redraw()};D(a,o),t=ra(t,!0),n?n.firePointEvent("remove",null,d):d()},remove:function(e,t){var a=this,s=a.chart;e=ra(e,!0),a.isRemoving||(a.isRemoving=!0,ba(a,"remove",null,function(){a.destroy(),s.isDirtyLegend=s.isDirtyBox=!0,s.linkSeries(),e&&s.redraw(t)})),a.isRemoving=!1},update:function(t,a){var s,i=this,n=this.chart,r=this.userOptions,o=this.type,d=ia[o].prototype,l=["group","markerGroup","dataLabelsGroup"];(t.type&&t.type!==o||void 0!==t.zIndex)&&(l.length=0),ma(l,function(e){l[e]=i[e],delete i[e]}),t=e(r,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},t),this.remove(!1);for(s in d)this[s]=F;na(this,ia[t.type||o].prototype),ma(l,function(e){i[e]=l[e]}),this.init(n,t),n.linkSeries(),ra(a,!0)&&n.redraw(!1)}}),na(Ia.prototype,{update:function(t,a){var s=this.chart;t=s.options[this.coll][this.options.index]=e(this.userOptions,t),this.destroy(!0),this._addedPlotLB=this.chart._labelPanes=F,this.init(s,na(t,{events:F})),s.isDirtyBox=!0,ra(a,!0)&&s.redraw()},remove:function(e){for(var t=this.chart,a=this.coll,s=this.series,i=s.length;i--;)s[i]&&s[i].remove(!1);d(t.axes,this),d(t[a],this),t.options[a].splice(this.options.index,1),ma(t[a],function(e,t){e.options.index=t}),this.destroy(),t.isDirtyBox=!0,ra(e,!0)&&t.redraw()},setTitle:function(e,t){this.update({title:e},t)},setCategories:function(e,t){this.update({categories:e},t)}});var Xa=g(Ga);ia.line=Xa,ka.area=e(Pa,{softThreshold:!1,threshold:0});var Ja=g(Ga,{type:"area",getSegments:function(){var e,t,a,s,i,n=this,r=[],o=[],d=[],l=this.xAxis,c=this.yAxis,p=c.stacks[this.stackKey],u={},m=this.points,g=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(s=0;s<m.length;s++)u[m[s].x]=m[s];for(i in p)null!==p[i].total&&d.push(+i);d.sort(function(e,t){return e-t}),ma(d,function(i){var r,d=null;if(!g||u[i]&&null!==u[i].y)if(u[i])o.push(u[i]);else{for(s=n.index;s<=c.series.length;s++)if(a=n.getStackIndicator(null,i,s),r=p[i].points[a.key]){d=r[1];break}e=l.translate(i),t=c.getThreshold(d),o.push({y:null,plotX:e,clientX:e,plotY:t,yBottom:t,onMouseOver:Rt})}}),o.length&&r.push(o)}else Ga.prototype.getSegments.call(this),r=this.segments;this.segments=r},getSegmentPath:function(e){var t,a,s=Ga.prototype.getSegmentPath.call(this,e),i=[].concat(s),n=this.options,r=s.length,o=this.yAxis.getThreshold(n.threshold);if(3===r&&i.push(Kt,s[1],s[2]),n.stacking&&!this.closedStacks)for(t=e.length-1;t>=0;t--)a=ra(e[t].yBottom,o),t<e.length-1&&n.step&&i.push(e[t+1].plotX,a),i.push(e[t].plotX,a);else this.closeSegment(i,e,o);return this.areaPath=this.areaPath.concat(i),s},closeSegment:function(e,t,a){e.push(Kt,t[t.length-1].plotX,a,Kt,t[0].plotX,a)},drawGraph:function(){this.areaPath=[],Ga.prototype.drawGraph.apply(this);var e=this,t=this.areaPath,a=this.options,s=this.zones,i=[["area",this.color,a.fillColor]];ma(s,function(t,s){i.push(["zoneArea"+s,t.color||e.color,t.fillColor||a.fillColor])}),ma(i,function(s){var i=s[0],n=e[i];n?n.animate({d:t}):e[i]=e.chart.renderer.path(t).attr({fill:ra(s[2],Ca(s[1]).setOpacity(ra(a.fillOpacity,.75)).get()),zIndex:0}).add(e.group)})},drawLegendSymbol:Wa.drawRectangle});ia.area=Ja,ka.spline=e(Pa);var Ka=g(Ga,{type:"spline",getPointSpline:function(e,t,a){var s,i,n,r,o,d=1.5,l=d+1,c=t.plotX,p=t.plotY,u=e[a-1],m=e[a+1];if(u&&m){var g,h=u.plotX,v=u.plotY,f=m.plotX,y=m.plotY;s=(d*c+h)/l,i=(d*p+v)/l,n=(d*c+f)/l,r=(d*p+y)/l,g=(r-i)*(n-c)/(n-s)+p-r,i+=g,r+=g,i>v&&i>p?(i=ft(v,p),r=2*p-i):v>i&&p>i&&(i=yt(v,p),r=2*p-i),r>y&&r>p?(r=ft(y,p),i=2*p-r):y>r&&p>r&&(r=yt(y,p),i=2*p-r),t.rightContX=n,t.rightContY=r}return a?(o=["C",u.rightContX||u.plotX,u.rightContY||u.plotY,s||c,i||p,c,p],u.rightContX=u.rightContY=null):o=[Jt,c,p],o}});ia.spline=Ka,ka.areaspline=e(ka.area);var Za=Ja.prototype,Qa=g(Ka,{type:"areaspline",closedStacks:!0,getSegmentPath:Za.getSegmentPath,closeSegment:Za.closeSegment,drawGraph:Za.drawGraph,drawLegendSymbol:Wa.drawRectangle});ia.areaspline=Qa,ka.column=e(Pa,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0});var es=g(Ga,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Ga.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&ma(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e,t,a=this,s=a.options,i=a.xAxis,n=a.yAxis,r=i.reversed,o={},d=0;s.grouping===!1?d=1:ma(a.chart.series,function(s){var i=s.options,r=s.yAxis;s.type===a.type&&s.visible&&n.len===r.len&&n.pos===r.pos&&(i.stacking?(e=s.stackKey,o[e]===F&&(o[e]=d++),t=o[e]):i.grouping!==!1&&(t=d++),s.columnIndex=t)});var l=yt(bt(i.transA)*(i.ordinalSlope||s.pointRange||i.closestPointRange||i.tickInterval||1),i.len),c=l*s.groupPadding,p=l-2*c,u=p/d,m=yt(s.maxPointWidth||i.len,ra(s.pointWidth,u*(1-2*s.pointPadding))),g=(u-m)/2,h=(r?d-(a.columnIndex||0):a.columnIndex)||0,v=g+(c+h*u-l/2)*(r?-1:1);return a.columnMetrics={width:m,offset:v}},crispCol:function(e,t,a,s){var i,n,r,o=this.chart,d=this.borderWidth,l=-(d%2?.5:0),c=d%2?.5:1;return o.inverted&&o.renderer.isVML&&(c+=1),i=Math.round(e+a)+l,e=Math.round(e)+l,a=i-e,r=bt(t)<=.5,n=Math.round(t+s)+c,t=Math.round(t)+c,s=n-t,r&&(t-=1,s+=1),{x:e,y:t,width:a,height:s}},translate:function(){var e=this,t=e.chart,a=e.options,s=e.borderWidth=ra(a.borderWidth,e.closestPointRange*e.xAxis.transA<2?0:1),i=e.yAxis,n=a.threshold,r=e.translatedThreshold=i.getThreshold(n),o=ra(a.minPointLength,5),d=e.getColumnMetrics(),l=d.width,c=e.barW=ft(l,1+2*s),p=e.pointXOffset=d.offset;t.inverted&&(r-=.5),a.pointPadding&&(c=vt(c)),Ga.prototype.translate.apply(e),ma(e.points,function(a){var s,n=yt(ra(a.yBottom,r),9e4),d=999+bt(n),u=yt(ft(-d,a.plotY),i.len+d),m=a.plotX+p,g=c,h=yt(u,n),v=ft(u,n)-h;bt(v)<o&&o&&(v=o,s=!i.reversed&&!a.negative||i.reversed&&a.negative,h=bt(h-r)>o?n-o:r-(s?o:0)),a.barX=m,a.pointWidth=l,a.tooltipPos=t.inverted?[i.len+i.pos-t.plotLeft-u,e.xAxis.len-m-g/2,v]:[m+g/2,u+i.pos-t.plotTop,v],a.shapeType="rect",a.shapeArgs=e.crispCol(m,h,g,v)})},getSymbol:Rt,drawLegendSymbol:Wa.drawRectangle,drawGraph:Rt,drawPoints:function(){var t,a,s=this,i=this.chart,n=s.options,r=i.renderer,o=n.animationLimit||250;ma(s.points,function(d){var c,p=d.plotY,u=d.graphic;p===F||isNaN(p)||null===d.y?u&&(d.graphic=u.destroy()):(t=d.shapeArgs,c=l(s.borderWidth)?{"stroke-width":s.borderWidth}:{},a=d.pointAttr[d.selected?ta:Qt]||s.pointAttr[Qt],u?(xa(u),u.attr(c)[i.pointCount<o?"animate":"attr"](e(t))):d.graphic=u=r[d.shapeType](t).attr(c).attr(a).add(d.group||s.group).shadow(n.shadow,null,n.stacking&&!n.borderRadius))})},animate:function(e){var t,a=this,s=this.yAxis,i=a.options,n=this.chart.inverted,r={};jt&&(e?(r.scaleY=.001,t=yt(s.pos+s.len,ft(s.pos,s.toPixels(i.threshold))),n?r.translateX=t-s.len:r.translateY=t,a.group.attr(r)):(r.scaleY=1,r[n?"translateX":"translateY"]=s.pos,a.group.animate(r,a.options.animation),a.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&ma(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),Ga.prototype.remove.apply(e,arguments)}});ia.column=es,ka.bar=e(ka.column);var ts=g(es,{type:"bar",inverted:!0});ia.bar=ts,ka.scatter=e(Pa,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var as=g(Ga,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&Ga.prototype.drawGraph.call(this)}});ia.scatter=as,ka.pie=e(Pa,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var ss=g(Ya,{init:function(){Ya.prototype.init.apply(this,arguments);var e,t=this;return t.name=ra(t.name,"Slice"),e=function(e){t.slice("select"===e.type)},fa(t,"select",e),fa(t,"unselect",e),t},setVisible:function(e,t){var a=this,s=a.series,i=s.chart,n=s.options.ignoreHiddenPoint;t=ra(t,n),e!==a.visible&&(a.visible=a.options.visible=e=e===F?!a.visible:e,s.options.data[ua(a,s.data)]=a.options,ma(["graphic","dataLabel","connector","shadowGroup"],function(t){a[t]&&a[t][e?"show":"hide"](!0)}),a.legendItem&&i.legend.colorizeItem(a,e),e||"hover"!==a.state||a.setState(""),n&&(s.isDirty=!0),t&&i.redraw())},slice:function(e,t,a){var s,i=this,n=i.series,r=n.chart;D(a,r),t=ra(t,!0),i.sliced=i.options.sliced=e=l(e)?e:!i.sliced,n.options.data[ua(i,n.data)]=i.options,s=e?i.slicedTranslation:{translateX:0,translateY:0},i.graphic.animate(s),i.shadowGroup&&i.shadowGroup.animate(s)},haloPath:function(e){var t=this.shapeArgs,a=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(a.plotLeft+t.x,a.plotTop+t.y,t.r+e,t.r+e,{innerR:this.shapeArgs.r,start:t.start,end:t.end})}}),is={type:"pie",isCartesian:!1,pointClass:ss,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(e){var t=this,a=t.points,s=t.startAngleRad;e||(ma(a,function(e){var a=e.graphic,i=e.shapeArgs;a&&(a.attr({r:e.startR||t.center[3]/2,start:s,end:s}),a.animate({r:i.r,start:i.start,end:i.end},t.options.animation))}),t.animate=null)},updateTotals:function(){var e,t,a=0,s=this.points,i=s.length,n=this.options.ignoreHiddenPoint;for(e=0;i>e;e++)t=s[e],a+=n&&!t.visible?0:t.y;for(this.total=a,e=0;i>e;e++)t=s[e],t.percentage=a>0&&(t.visible||!n)?t.y/a*100:0,t.total=a},generatePoints:function(){Ga.prototype.generatePoints.call(this),this.updateTotals()},translate:function(e){this.generatePoints();var t,a,s,i,n,r,o,d=this,l=0,c=1e3,p=d.options,u=p.slicedOffset,m=u+p.borderWidth,g=p.startAngle||0,h=d.startAngleRad=xt/180*(g-90),v=d.endAngleRad=xt/180*(ra(p.endAngle,g+360)-90),f=v-h,y=d.points,b=p.dataLabels.distance,w=p.ignoreHiddenPoint,_=y.length;for(e||(d.center=e=d.getCenter()),d.getX=function(t,a){return s=mt.asin(yt((t-e[1])/(e[2]/2+b),1)),e[0]+(a?-1:1)*wt(s)*(e[2]/2+b)},r=0;_>r;r++)o=y[r],t=h+l*f,(!w||o.visible)&&(l+=o.percentage/100),a=h+l*f,o.shapeType="arc",o.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:gt(t*c)/c,end:gt(a*c)/c},s=(a+t)/2,s>1.5*xt?s-=2*xt:-xt/2>s&&(s+=2*xt),o.slicedTranslation={translateX:gt(wt(s)*u),translateY:gt(_t(s)*u)},i=wt(s)*e[2]/2,n=_t(s)*e[2]/2,o.tooltipPos=[e[0]+.7*i,e[1]+.7*n],o.half=-xt/2>s||s>xt/2?1:0,o.angle=s,m=yt(m,b/2),o.labelPos=[e[0]+i+wt(s)*b,e[1]+n+_t(s)*b,e[0]+i+wt(s)*m,e[1]+n+_t(s)*m,e[0]+i,e[1]+n,0>b?"center":o.half?"right":"left",s]},drawGraph:null,drawPoints:function(){var e,t,a,s,i,n=this,r=n.chart,o=r.renderer,d=n.options.shadow;d&&!n.shadowGroup&&(n.shadowGroup=o.g("shadow").add(n.group)),ma(n.points,function(r){null!==r.y&&(t=r.graphic,s=r.shapeArgs,a=r.shadowGroup,d&&!a&&(a=r.shadowGroup=o.g("shadow").add(n.shadowGroup)),e=r.sliced?r.slicedTranslation:{translateX:0,translateY:0},a&&a.attr(e),t?t.setRadialReference(n.center).animate(na(s,e)):(i={"stroke-linejoin":"round"},r.visible||(i.visibility="hidden"),r.graphic=t=o[r.shapeType](s).setRadialReference(n.center).attr(r.pointAttr[r.selected?ta:Qt]).attr(i).attr(e).add(n.group).shadow(d,a)))})},searchPoint:Rt,sortByAngle:function(e,t){e.sort(function(e,a){return void 0!==e.angle&&(a.angle-e.angle)*t})},drawLegendSymbol:Wa.drawRectangle,getCenter:Va.getCenter,getSymbol:Rt};is=g(Ga,is),ia.pie=is,Ga.prototype.drawDataLabels=function(){var t,a,s,i,n=this,r=n.options,o=r.cursor,d=r.dataLabels,c=n.points,p=n.hasRendered||0,u=n.chart.renderer;(d.enabled||n._hasPointLabels)&&(n.dlProcessOptions&&n.dlProcessOptions(d),i=n.plotGroup("dataLabelsGroup","data-labels",d.defer?Ut:Yt,d.zIndex||6),ra(d.defer,!0)&&(i.attr({opacity:+p}),p||fa(n,"afterAnimate",function(){n.visible&&i.show(),i[r.animation?"animate":"attr"]({opacity:1},{duration:200})})),a=d,ma(c,function(c){var p,m,g,h,v,f,y=c.dataLabel,w=c.connector,_=!0,x={};if(t=c.dlOptions||c.options&&c.options.dataLabels,p=ra(t&&t.enabled,a.enabled),y&&!p)c.dataLabel=y.destroy();else if(p){if(d=e(a,t),f=d.style,v=d.rotation,m=c.getLabelConfig(),s=d.format?b(d.format,m):d.formatter.call(m,d),f.color=ra(d.color,f.color,n.color,"black"),y)l(s)?(y.attr({text:s}),_=!1):(c.dataLabel=y=y.destroy(),w&&(c.connector=w.destroy()));else if(l(s)){g={fill:d.backgroundColor,stroke:d.borderColor,"stroke-width":d.borderWidth,r:d.borderRadius||0,rotation:v,padding:d.padding,zIndex:1},"contrast"===f.color&&(x.color=d.inside||d.distance<0||r.stacking?u.getContrast(c.color||n.color):"#000000"),o&&(x.cursor=o);for(h in g)g[h]===F&&delete g[h];y=c.dataLabel=u[v?"text":"label"](s,0,-999,d.shape,null,null,d.useHTML).attr(g).css(na(f,x)).add(i).shadow(d.shadow)}y&&n.alignDataLabel(c,y,d,null,_)}}))},Ga.prototype.alignDataLabel=function(e,t,a,s,i){var n,r,o=this.chart,d=o.inverted,l=ra(e.plotX,-999),c=ra(e.plotY,-999),p=t.getBBox(),u=o.renderer.fontMetrics(a.style.fontSize).b,m=this.visible&&(e.series.forceDL||o.isInsidePlot(l,gt(c),d)||s&&o.isInsidePlot(l,d?s.x+1:s.y+s.height-1,d));m&&(s=na({x:d?o.plotWidth-c:l,y:gt(d?o.plotHeight-l:c),width:0,height:0},s),na(a,{width:p.width,height:p.height}),a.rotation?(n=o.renderer.rotCorr(u,a.rotation),t[i?"attr":"animate"]({x:s.x+a.x+s.width/2+n.x,y:s.y+a.y+s.height/2}).attr({align:a.align})):(t.align(a,null,s),r=t.alignAttr,"justify"===ra(a.overflow,"justify")?this.justifyDataLabel(t,a,r,p,s,i):ra(a.crop,!0)&&(m=o.isInsidePlot(r.x,r.y)&&o.isInsidePlot(r.x+p.width,r.y+p.height)),a.shape&&t.attr({anchorX:e.plotX,anchorY:e.plotY}))),m||(xa(t),t.attr({y:-999}),t.placed=!1)},Ga.prototype.justifyDataLabel=function(e,t,a,s,i,n){var r,o,d=this.chart,l=t.align,c=t.verticalAlign,p=e.box?0:e.padding||0;r=a.x+p,0>r&&("right"===l?t.align="left":t.x=-r,o=!0),r=a.x+s.width-p,r>d.plotWidth&&("left"===l?t.align="right":t.x=d.plotWidth-r,o=!0),r=a.y+p,0>r&&("bottom"===c?t.verticalAlign="top":t.y=-r,o=!0),r=a.y+s.height-p,r>d.plotHeight&&("top"===c?t.verticalAlign="bottom":t.y=d.plotHeight-r,o=!0),o&&(e.placed=!n,e.align(t,null,i))},ia.pie&&(ia.pie.prototype.drawDataLabels=function(){var e,t,a,s,i,n,r,o,d,l,c,p,u,m=this,g=m.data,h=m.chart,v=m.options.dataLabels,f=ra(v.connectorPadding,10),y=ra(v.connectorWidth,1),b=h.plotWidth,w=h.plotHeight,_=ra(v.softConnector,!0),x=v.distance,k=m.center,S=k[2]/2,O=k[1],A=x>0,C=[[],[]],D=[0,0,0,0],T=function(e,t){return t.y-e.y};if(m.visible&&(v.enabled||m._hasPointLabels)){for(Ga.prototype.drawDataLabels.apply(m),ma(g,function(e){e.dataLabel&&e.visible&&C[e.half].push(e)}),p=2;p--;){var M,j,L,E,I=[],$=[],R=C[p],F=R.length;if(F){for(m.sortByAngle(R,p-.5),u=r=0;!r&&R[u];)r=R[u]&&R[u].dataLabel&&(R[u].dataLabel.getBBox().height||21),u++;if(x>0){for(L=yt(O+S+x,h.plotHeight),j=ft(0,O-S-x);L>=j;j+=r)I.push(j);if(M=I.length,F>M){for(c=[].concat(R),c.sort(T),u=F;u--;)c[u].rank=u;for(u=F;u--;)R[u].rank>=M&&R.splice(u,1);F=R.length}for(u=0;F>u;u++){e=R[u],n=e.labelPos;var N,q,B=9999;for(q=0;M>q;q++)N=bt(I[q]-n[1]),B>N&&(B=N,E=q);if(u>E&&null!==I[u])E=u;else if(F-u+E>M&&null!==I[u])for(E=M-F+u;null===I[E];)E++;else for(;null===I[E];)E++;$.push({i:E,y:I[E]}),I[E]=null}$.sort(T)}for(u=0;F>u;u++){var H,z;e=R[u],n=e.labelPos,s=e.dataLabel,l=e.visible===!1?Ut:"inherit",z=n[1],x>0?(H=$.pop(),E=H.i,d=H.y,(z>d&&null!==I[E+1]||d>z&&null!==I[E-1])&&(d=yt(ft(0,z),h.plotHeight))):d=z,o=v.justify?k[0]+(p?-1:1)*(S+x):m.getX(d===O-S-x||d===O+S+x?z:d,p),s._attr={visibility:l,align:n[6]},s._pos={x:o+v.x+({left:f,right:-f}[n[6]]||0),y:d+v.y-10},s.connX=o,s.connY=d,null===this.options.size&&(i=s.width,f>o-i?D[3]=ft(gt(i-o+f),D[3]):o+i>b-f&&(D[1]=ft(gt(o+i-b+f),D[1])),0>d-r/2?D[0]=ft(gt(-d+r/2),D[0]):d+r/2>w&&(D[2]=ft(gt(d+r/2-w),D[2])))}}}(0===P(D)||this.verifyDataLabelOverflow(D))&&(this.placeDataLabels(),A&&y&&ma(this.points,function(e){t=e.connector,n=e.labelPos,s=e.dataLabel,s&&s._pos&&e.visible?(l=s._attr.visibility,o=s.connX,d=s.connY,a=_?[Jt,o+("left"===n[6]?5:-5),d,"C",o,d,2*n[2]-n[4],2*n[3]-n[5],n[2],n[3],Kt,n[4],n[5]]:[Jt,o+("left"===n[6]?5:-5),d,Kt,n[2],n[3],Kt,n[4],n[5]],t?(t.animate({d:a}),t.attr("visibility",l)):e.connector=t=m.chart.renderer.path(a).attr({"stroke-width":y,stroke:v.connectorColor||e.color||"#606060",visibility:l}).add(m.dataLabelsGroup)):t&&(e.connector=t.destroy())}))}},ia.pie.prototype.placeDataLabels=function(){ma(this.points,function(e){var t,a=e.dataLabel;a&&e.visible&&(t=a._pos,t?(a.attr(a._attr),a[a.moved?"animate":"attr"](t),a.moved=!0):a&&a.attr({y:-999}))})},ia.pie.prototype.alignDataLabel=Rt,ia.pie.prototype.verifyDataLabelOverflow=function(e){var t,a=this.center,s=this.options,i=s.center,n=s.minSize||80,r=n;return null!==i[0]?r=ft(a[2]-ft(e[1],e[3]),n):(r=ft(a[2]-e[1]-e[3],n),a[0]+=(e[3]-e[1])/2),null!==i[1]?r=ft(yt(r,a[2]-ft(e[0],e[2])),n):(r=ft(yt(r,a[2]-e[0]-e[2]),n),a[1]+=(e[0]-e[2])/2),r<a[2]?(a[2]=r,a[3]=Math.min(v(s.innerSize||0,r),r),this.translate(a),ma(this.points,function(e){e.dataLabel&&(e.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):t=!0,t}),ia.column&&(ia.column.prototype.alignDataLabel=function(t,a,s,i,n){var r=this.chart.inverted,o=t.series,d=t.dlBox||t.shapeArgs,l=ra(t.below,t.plotY>ra(this.translatedThreshold,o.yAxis.len)),c=ra(s.inside,!!this.options.stacking);d&&(i=e(d),r&&(i={x:o.yAxis.len-i.y-i.height,y:o.xAxis.len-i.x-i.width,width:i.height,height:i.width}),c||(r?(i.x+=l?0:i.width,i.width=0):(i.y+=l?i.height:0,i.height=0))),s.align=ra(s.align,!r||c?"center":l?"right":"left"),s.verticalAlign=ra(s.verticalAlign,r||c?"middle":l?"top":"bottom"),Ga.prototype.alignDataLabel.call(this,t,a,s,i,n)}),function(e){var t=e.Chart,a=e.each,s=e.pick,i=HighchartsAdapter.addEvent;t.prototype.callbacks.push(function(e){function t(){var t=[];a(e.series,function(e){var i=e.options.dataLabels,n=e.dataLabelCollections||["dataLabel"];(i.enabled||e._hasPointLabels)&&!i.allowOverlap&&e.visible&&a(n,function(i){a(e.points,function(e){e[i]&&(e[i].labelrank=s(e.labelrank,e.shapeArgs&&e.shapeArgs.height),t.push(e[i]))})})}),e.hideOverlappingLabels(t)}t(),i(e,"redraw",t)}),t.prototype.hideOverlappingLabels=function(e){var t,s,i,n,r,o,d,l,c,p=e.length,u=function(e,t,a,s,i,n,r,o){return!(i>e+a||e>i+r||n>t+s||t>n+o)};for(s=0;p>s;s++)t=e[s],t&&(t.oldOpacity=t.opacity,t.newOpacity=1);for(e.sort(function(e,t){return(t.labelrank||0)-(e.labelrank||0)}),s=0;p>s;s++)for(n=e[s],i=s+1;p>i;++i)r=e[i],n&&r&&n.placed&&r.placed&&0!==n.newOpacity&&0!==r.newOpacity&&(d=n.alignAttr,l=r.alignAttr,c=2*(n.box?0:n.padding),o=u(d.x,d.y,n.width-c,n.height-c,l.x,l.y,r.width-c,r.height-c),o&&((n.labelrank<r.labelrank?n:r).newOpacity=0));a(e,function(e){var t,a;e&&(a=e.newOpacity,e.oldOpacity!==a&&e.placed&&(a?e.show(!0):t=function(){e.hide()},e.alignAttr.opacity=a,e[e.isOld?"animate":"attr"](e.alignAttr,null,t)),e.isOld=!0)})}}(ct);var ns=ct.TrackerMixin={drawTrackerPoint:function(){var e=this,t=e.chart,a=t.pointer,s=e.options.cursor,i=s&&{cursor:s},n=function(e){for(var a,s=e.target;s&&!a;)a=s.point,s=s.parentNode;a!==F&&a!==t.hoverPoint&&a.onMouseOver(e)};ma(e.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.element.point=e)}),e._hasTracking||(ma(e.trackerGroups,function(t){e[t]&&(e[t].addClass(Vt+"tracker").on("mouseover",n).on("mouseout",function(e){a.onTrackerMouseOut(e)}).css(i),q&&e[t].on("touchstart",n))}),e._hasTracking=!0)},drawTrackerGraph:function(){var e,t,a=this,s=a.options,i=s.trackByArea,n=[].concat(i?a.areaPath:a.graphPath),r=n.length,o=a.chart,d=o.pointer,l=o.renderer,c=o.options.tooltip.snap,p=a.tracker,u=s.cursor,m=u&&{cursor:u},g=a.singlePoints,h=function(){o.hoverSeries!==a&&a.onMouseOver()},v="rgba(192,192,192,"+(jt?1e-4:.002)+")";if(r&&!i)for(t=r+1;t--;)n[t]===Jt&&n.splice(t+1,0,n[t+1]-c,n[t+2],Kt),(t&&n[t]===Jt||t===r)&&n.splice(t,0,Kt,n[t-2]+c,n[t-1]);for(t=0;t<g.length;t++)e=g[t],n.push(Jt,e.plotX-c,e.plotY,Kt,e.plotX+c,e.plotY);p?p.attr({d:n}):(a.tracker=l.path(n).attr({"stroke-linejoin":"round",visibility:a.visible?Yt:Ut,stroke:v,fill:i?v:Xt,"stroke-width":s.lineWidth+(i?0:2*c),zIndex:2}).add(a.group),ma([a.tracker,a.markerGroup],function(e){e.addClass(Vt+"tracker").on("mouseover",h).on("mouseout",function(e){d.onTrackerMouseOut(e)}).css(m),q&&e.on("touchstart",h)}))}};ia.column&&(es.prototype.drawTracker=ns.drawTrackerPoint),ia.pie&&(ia.pie.prototype.drawTracker=ns.drawTrackerPoint),ia.scatter&&(as.prototype.drawTracker=ns.drawTrackerPoint),na(za.prototype,{setItemEvents:function(e,t,a,s,i){var n=this;(a?t:e.legendGroup).on("mouseover",function(){e.setState(ea),t.css(n.options.itemHoverStyle)}).on("mouseout",function(){t.css(e.visible?s:i),e.setState()}).on("click",function(t){var a="legendItemClick",s=function(){e.setVisible&&e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent(a,t,s):ba(e,a,t,s)})},createCheckboxForItem:function(e){var t=this;e.checkbox=m("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},t.options.itemCheckboxStyle,t.chart.container),fa(e.checkbox,"click",function(t){var a=t.target;ba(e.series||e,"checkboxClick",{checked:a.checked,item:e},function(){e.select()})})}}),H.legend.itemStyle.cursor="pointer",na(Ua.prototype,{showResetZoom:function(){var e=this,t=H.lang,a=e.options.chart.resetZoomButton,s=a.theme,i=s.states,n="chart"===a.relativeTo?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},s,i&&i.hover).attr({align:a.position.align,title:t.resetZoomTitle}).add().align(a.position,!1,n)},zoomOut:function(){var e=this;ba(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t,a,i=this,n=i.pointer,r=!1;!e||e.resetSelection?ma(i.axes,function(e){t=e.zoom()}):ma(e.xAxis.concat(e.yAxis),function(e){var a=e.axis,s=a.isXAxis;(n[s?"zoomX":"zoomY"]||n[s?"pinchX":"pinchY"])&&(t=a.zoom(e.min,e.max),a.displayBtn&&(r=!0))}),a=i.resetZoomButton,r&&!a?i.showResetZoom():!r&&s(a)&&(i.resetZoomButton=a.destroy()),t&&i.redraw(ra(i.options.chart.animation,e&&e.animation,i.pointCount<100))},pan:function(e,t){var a,s=this,i=s.hoverPoints;i&&ma(i,function(e){e.setState()}),ma("xy"===t?[1,0]:[1],function(t){var i=e[t?"chartX":"chartY"],n=s[t?"xAxis":"yAxis"][0],r=s[t?"mouseDownX":"mouseDownY"],o=(n.pointRange||0)/2,d=n.getExtremes(),l=n.toValue(r-i,!0)+o,c=n.toValue(r+s[t?"plotWidth":"plotHeight"]-i,!0)-o,p=r>i;n.series.length&&(p||l>yt(d.dataMin,d.min))&&(!p||c<ft(d.dataMax,d.max))&&(n.setExtremes(l,c,!1,!1,{trigger:"pan"}),a=!0),s[t?"mouseDownX":"mouseDownY"]=i}),a&&s.redraw(!1),u(s.container,{cursor:"move"})}}),na(Ya.prototype,{select:function(e,t){var a=this,s=a.series,i=s.chart;e=ra(e,!a.selected),a.firePointEvent(e?"select":"unselect",{accumulate:t},function(){a.selected=a.options.selected=e,s.options.data[ua(a,s.data)]=a.options,a.setState(e&&ta),t||ma(i.getSelectedPoints(),function(e){e.selected&&e!==a&&(e.selected=e.options.selected=!1,s.options.data[ua(e,s.data)]=e.options,e.setState(Qt),e.firePointEvent("unselect"))})})},onMouseOver:function(e,t){var a=this,s=a.series,i=s.chart,n=i.tooltip,r=i.hoverPoint;i.hoverSeries!==s&&s.onMouseOver(),r&&r!==a&&r.onMouseOut(),a.series&&(a.firePointEvent("mouseOver"),!n||n.shared&&!s.noSharedTooltip||n.refresh(a,e),a.setState(ea),t||(i.hoverPoint=a))},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;this.firePointEvent("mouseOut"),t&&-1!==ua(this,t)||(this.setState(),e.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,a=this,s=e(a.series.options.point,a.options),i=s.events;
a.events=i;for(t in i)fa(a,t,i[t]);this.hasImportedEvents=!0}},setState:function(t,a){var s,i,n,r,o=this,d=ht(o.plotX),l=o.plotY,c=o.series,p=c.options.states,u=ka[c.type].marker&&c.options.marker,m=u&&!u.enabled,g=u&&u.states[t],h=g&&g.enabled===!1,v=c.stateMarkerGraphic,f=o.marker||{},y=c.chart,b=c.halo;t=t||Qt,r=o.pointAttr[t]||c.pointAttr[t],t===o.state&&!a||o.selected&&t!==ta||p[t]&&p[t].enabled===!1||t&&(h||m&&g.enabled===!1)||t&&f.states&&f.states[t]&&f.states[t].enabled===!1||(o.graphic?(s=u&&o.graphic.symbolName&&r.r,o.graphic.attr(e(r,s?{x:d-s,y:l-s,width:2*s,height:2*s}:{})),v&&v.hide()):(t&&g&&(s=g.radius,n=f.symbol||c.symbol,v&&v.currentSymbol!==n&&(v=v.destroy()),v?v[a?"animate":"attr"]({x:d-s,y:l-s}):n&&(c.stateMarkerGraphic=v=y.renderer.symbol(n,d-s,l-s,2*s,2*s).attr(r).add(c.markerGroup),v.currentSymbol=n)),v&&(v[t&&y.isInsidePlot(d,l,y.inverted)?"show":"hide"](),v.element.point=o)),i=p[t]&&p[t].halo,i&&i.size?(b||(c.halo=b=y.renderer.path().add(y.seriesGroup)),b.attr(na({fill:Ca(o.color||c.color).setOpacity(i.opacity).get()},i.attributes))[a?"animate":"attr"]({d:o.haloPath(i.size)})):b&&b.attr({d:[]}),o.state=t)},haloPath:function(e){var t=this.series,a=t.chart,s=t.getPlotBox(),i=a.inverted;return a.renderer.symbols.circle(s.translateX+(i?t.yAxis.len-this.plotY:this.plotX)-e,s.translateY+(i?t.xAxis.len-this.plotX:this.plotY)-e,2*e,2*e)}}),na(Ga.prototype,{onMouseOver:function(){var e=this,t=e.chart,a=t.hoverSeries;a&&a!==e&&a.onMouseOut(),e.options.events.mouseOver&&ba(e,"mouseOver"),e.setState(ea),t.hoverSeries=e},onMouseOut:function(){var e=this,t=e.options,a=e.chart,s=a.tooltip,i=a.hoverPoint;a.hoverSeries=null,i&&i.onMouseOut(),e&&t.events.mouseOut&&ba(e,"mouseOut"),!s||t.stickyTracking||s.shared&&!e.noSharedTooltip||s.hide(),e.setState()},setState:function(e){var t,a=this,s=a.options,i=a.graph,n=s.states,r=s.lineWidth,o=0;if(e=e||Qt,a.state!==e){if(a.state=e,n[e]&&n[e].enabled===!1)return;if(e&&(r=n[e].lineWidth||r+(n[e].lineWidthPlus||0)),i&&!i.dashstyle)for(t={"stroke-width":r},i.attr(t);a["zoneGraph"+o];)a["zoneGraph"+o].attr(t),o+=1}},setVisible:function(e,t){var a,s=this,i=s.chart,n=s.legendItem,r=i.options.chart.ignoreHiddenSeries,o=s.visible;s.visible=e=s.userOptions.visible=e===F?!o:e,a=e?"show":"hide",ma(["group","dataLabelsGroup","markerGroup","tracker"],function(e){s[e]&&s[e][a]()}),(i.hoverSeries===s||(i.hoverPoint&&i.hoverPoint.series)===s)&&s.onMouseOut(),n&&i.legend.colorizeItem(s,e),s.isDirty=!0,s.options.stacking&&ma(i.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),ma(s.linkedSeries,function(t){t.setVisible(e,!1)}),r&&(i.isDirtyBox=!0),t!==!1&&i.redraw(),ba(s,a)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){var t=this;t.selected=e=e===F?!t.selected:e,t.checkbox&&(t.checkbox.checked=e),ba(t,e?"select":"unselect")},drawTracker:ns.drawTrackerGraph}),oa(Ga.prototype,"init",function(e){var t,a=this;e.apply(this,Array.prototype.slice.call(arguments,1)),t=a.xAxis,t&&t.options.ordinal&&fa(a,"updatedData",function(){delete t.ordinalIndex})}),oa(Ia.prototype,"getTimeTicks",function(e,t,a,s,i,n,r,o){var d,c,p,u,m,g=0,h=0,v={},f=[],y=-Number.MAX_VALUE,b=this.options.tickPixelInterval;if(!this.options.ordinal&&!this.options.breaks||!n||n.length<3||a===F)return e.call(this,t,a,s,i);for(u=n.length;u>h;h++){if(m=h&&n[h-1]>s,n[h]<a&&(g=h),h===u-1||n[h+1]-n[h]>5*r||m){if(n[h]>y){for(d=e.call(this,t,n[g],n[h],i);d.length&&d[0]<=y;)d.shift();d.length&&(y=d[d.length-1]),f=f.concat(d)}g=h+1}if(m)break}if(p=d.info,o&&p.unitRange<=U.hour){for(h=f.length-1,g=1;h>g;g++)z("%d",f[g])!==z("%d",f[g-1])&&(v[f[g]]="day",c=!0);c&&(v[f[0]]="day"),p.higherRanks=v}if(f.info=p,o&&l(b)){for(var w,_,x,k,P,S=f.length,O=S,A=[],C=[];O--;)_=this.translate(f[O]),x&&(C[O]=x-_),A[O]=x=_;for(C.sort(),k=C[ht(C.length/2)],.6*b>k&&(k=null),O=f[S-1]>s?S-1:S,x=void 0;O--;)_=A[O],P=x-_,x&&.8*b>P&&(null===k||.8*k>P)?(v[f[O]]&&!v[f[O+1]]?(w=O+1,x=_):w=O,f.splice(w,1)):x=_}return f}),na(Ia.prototype,{beforeSetTickPositions:function(){var e,t,a,s,i,n,r=this,o=[],d=!1,l=r.getExtremes(),c=l.min,p=l.max,u=r.isXAxis&&!!r.options.breaks,m=r.options.ordinal;if(m||u){if(ma(r.series,function(t,a){if(t.visible!==!1&&(t.takeOrdinalPosition!==!1||u)&&(o=o.concat(t.processedXData),e=o.length,o.sort(function(e,t){return e-t}),e))for(a=e-1;a--;)o[a]===o[a+1]&&o.splice(a,1)}),e=o.length,e>2){for(t=o[1]-o[0],n=e-1;n--&&!d;)o[n+1]-o[n]!==t&&(d=!0);!r.options.keepOrdinalPadding&&(o[0]-c>t||p-o[o.length-1]>t)&&(d=!0)}d?(r.ordinalPositions=o,a=r.val2lin(ft(c,o[0]),!0),s=ft(r.val2lin(yt(p,o[o.length-1]),!0),1),r.ordinalSlope=i=(p-c)/(s-a),r.ordinalOffset=c-a*i):r.ordinalPositions=r.ordinalSlope=r.ordinalOffset=F}r.doPostTranslate=m&&d||u,r.groupIntervalFactor=null},val2lin:function(e,t){var a=this,s=a.ordinalPositions;if(s){var i,n,r,o=s.length;for(i=o;i--;)if(s[i]===e){r=i;break}for(i=o-1;i--;)if(e>s[i]||0===i){n=(e-s[i])/(s[i+1]-s[i]),r=i+n;break}return t?r:a.ordinalSlope*(r||0)+a.ordinalOffset}return e},lin2val:function(e,t){var a=this,s=a.ordinalPositions;if(s){var i,n,r,o=a.ordinalSlope,d=a.ordinalOffset,l=s.length-1;if(t)0>e?e=s[0]:e>l?e=s[l]:(l=ht(e),r=e-l);else for(;l--;)if(i=o*l+d,e>=i){n=o*(l+1)+d,r=(e-i)/(n-i);break}return r!==F&&s[l]!==F?s[l]+(r?r*(s[l+1]-s[l]):0):e}return e},getExtendedPositions:function(){var e,t,a=this,s=a.chart,i=a.series[0].currentDataGrouping,n=a.ordinalIndex,r=i?i.count+i.unitName:"raw",o=a.getExtremes();return n||(n=a.ordinalIndex={}),n[r]||(e={series:[],getExtremes:function(){return{min:o.dataMin,max:o.dataMax}},options:{ordinal:!0},val2lin:Ia.prototype.val2lin},ma(a.series,function(a){t={xAxis:e,xData:a.xData,chart:s,destroyGroupedData:Rt},t.options={dataGrouping:i?{enabled:!0,forced:!0,approximation:"open",units:[[i.unitName,[i.count]]]}:{enabled:!1}},a.processData.apply(t),e.series.push(t)}),a.beforeSetTickPositions.apply(e),n[r]=e.ordinalPositions),n[r]},getGroupIntervalFactor:function(e,t,a){var s,i=0,n=a.processedXData,r=n.length,o=[],d=this.groupIntervalFactor;if(!d){for(;r-1>i;i++)o[i]=n[i+1]-n[i];o.sort(function(e,t){return e-t}),s=o[ht(r/2)],e=ft(e,n[0]),t=yt(t,n[r-1]),this.groupIntervalFactor=d=r*s/(t-e)}return d},postProcessTickInterval:function(e){var t=this.ordinalSlope;return t?this.options.breaks?this.closestPointRange:e/(t/this.closestPointRange):e}}),oa(Ua.prototype,"pan",function(e,t){var a=this,s=a.xAxis[0],i=t.chartX,n=!1;if(s.options.ordinal&&s.series.length){var r,o,d,l,c=a.mouseDownX,p=s.getExtremes(),m=p.dataMax,g=p.min,h=p.max,v=a.hoverPoints,f=s.closestPointRange,y=s.translationSlope*(s.ordinalSlope||f),b=(c-i)/y,w={ordinalPositions:s.getExtendedPositions()},_=s.lin2val,x=s.val2lin;w.ordinalPositions?bt(b)>1&&(v&&ma(v,function(e){e.setState()}),0>b?(d=w,l=s.ordinalPositions?s:w):(d=s.ordinalPositions?s:w,l=w),o=l.ordinalPositions,m>o[o.length-1]&&o.push(m),a.fixedRange=h-g,r=s.toFixedRange(null,null,_.apply(d,[x.apply(d,[g,!0])+b,!0]),_.apply(l,[x.apply(l,[h,!0])+b,!0])),r.min>=yt(p.dataMin,g)&&r.max<=ft(m,h)&&s.setExtremes(r.min,r.max,!0,!1,{trigger:"pan"}),a.mouseDownX=i,u(a.container,{cursor:"move"})):n=!0}else n=!0;n&&e.apply(this,Array.prototype.slice.call(arguments,1))}),oa(Ga.prototype,"getSegments",function(e){var t,a=this,s=a.options.gapSize,i=a.xAxis;e.apply(this,Array.prototype.slice.call(arguments,1)),s&&(t=a.segments,ma(t,function(e,a){for(var n=e.length-1;n--;){if(e[n].x<i.min&&e[n+1].x>i.max){t.length=0;break}e[n+1].x-e[n].x>i.closestPointRange*s&&t.splice(a+1,0,e.splice(n+1,e.length-n))}}))}),function(e){"use strict";function t(){return Array.prototype.slice.call(arguments,1)}var a=e.pick,s=e.wrap,i=e.extend,n=HighchartsAdapter.fireEvent,r=e.Axis,o=e.Series;i(r.prototype,{isInBreak:function(e,t){var a,s=e.repeat||1/0,i=e.from,n=e.to-e.from,r=t>=i?(t-i)%s:s-(i-t)%s;return a=e.inclusive?n>=r:n>r&&0!==r},isInAnyBreak:function(e,t){var s,i,n,r=this.options.breaks,o=r&&r.length;if(o){for(;o--;)this.isInBreak(r[o],e)&&(s=!0,i||(i=a(r[o].showPoints,this.isXAxis?!1:!0)));n=s&&t?s&&!i:s}return n}}),s(r.prototype,"setTickPositions",function(e){if(e.apply(this,Array.prototype.slice.call(arguments,1)),this.options.breaks){var t,a=this,s=this.tickPositions,i=this.tickPositions.info,n=[];for(t=0;t<s.length;t++)a.isInAnyBreak(s[t])||n.push(s[t]);this.tickPositions=n,this.tickPositions.info=i}}),s(r.prototype,"init",function(e,t,a){if(a.breaks&&a.breaks.length&&(a.ordinal=!1),e.call(this,t,a),this.options.breaks){var s=this;s.doPostTranslate=!0,this.val2lin=function(e){var t,a,i=e;for(a=0;a<s.breakArray.length;a++)if(t=s.breakArray[a],t.to<=e)i-=t.len;else{if(t.from>=e)break;if(s.isInBreak(t,e)){i-=e-t.from;break}}return i},this.lin2val=function(e){var t,a,i=e;for(a=0;a<s.breakArray.length&&(t=s.breakArray[a],!(t.from>=i));a++)t.to<i?i+=t.len:s.isInBreak(t,i)&&(i+=t.len);return i},this.setExtremes=function(e,t,a,s,i){for(;this.isInAnyBreak(e);)e-=this.closestPointRange;for(;this.isInAnyBreak(t);)t-=this.closestPointRange;r.prototype.setExtremes.call(this,e,t,a,s,i)},this.setAxisTranslation=function(e){r.prototype.setAxisTranslation.call(this,e);var t,a,i,o,d,l,c=s.options.breaks,p=[],u=[],m=0,g=s.userMin||s.min,h=s.userMax||s.max;for(d in c)i=c[d],a=i.repeat||1/0,s.isInBreak(i,g)&&(g+=i.to%a-g%a),s.isInBreak(i,h)&&(h-=h%a-i.from%a);for(d in c){for(i=c[d],o=i.from,a=i.repeat||1/0;o-a>g;)o-=a;for(;g>o;)o+=a;for(l=o;h>l;l+=a)p.push({value:l,move:"in"}),p.push({value:l+(i.to-i.from),move:"out",size:i.breakSize})}p.sort(function(e,t){return e.value===t.value?("in"===e.move?0:1)-("in"===t.move?0:1):e.value-t.value}),t=0,o=g;for(d in p)i=p[d],t+="in"===i.move?1:-1,1===t&&"in"===i.move&&(o=i.value),0===t&&(u.push({from:o,to:i.value,len:i.value-o-(i.size||0)}),m+=i.value-o-(i.size||0));s.breakArray=u,n(s,"afterBreaks"),s.transA*=(h-s.min)/(h-g-m),s.min=g,s.max=h}}}),s(o.prototype,"generatePoints",function(e){e.apply(this,t(arguments));var a,s,i=this,n=i.xAxis,r=i.yAxis,o=i.points,d=o.length,l=i.options.connectNulls;if(n&&r&&(n.options.breaks||r.options.breaks))for(;d--;)a=o[d],s=null===a.y&&l===!1,s||!n.isInAnyBreak(a.x,!0)&&!r.isInAnyBreak(a.y,!0)||(o.splice(d,1),this.data[d]&&this.data[d].destroyElements())}),s(e.seriesTypes.column.prototype,"drawPoints",function(e){e.apply(this);var t,s,i,r,o,d,l=this,c=l.points,p=l.yAxis,u=p.breakArray||[],m=a(this.options.threshold,p.min);for(r=0;r<c.length;r++)for(s=c[r],d=s.stackY||s.y,o=0;o<u.length;o++)i=u[o],t=!1,m<i.from&&d>i.to||m>i.from&&d<i.from?t="pointBreak":(m<i.from&&d>i.from&&d<i.to||m>i.from&&d>i.to&&d<i.from)&&(t="pointInBreak"),t&&n(p,t,{point:s,brk:i})})}(ct);var rs="dataGrouping",os=Ga.prototype,ds=$a.prototype,ls=os.processData,cs=os.generatePoints,ps=os.destroy,us=ds.tooltipFooterHeaderFormatter,ms="number",gs={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},hs={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},vs=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],fs={sum:function(e){var t,a=e.length;if(!a&&e.hasNulls)t=null;else if(a)for(t=0;a--;)t+=e[a];return t},average:function(e){var t=e.length,a=fs.sum(e);return typeof a===ms&&t&&(a/=t),a},open:function(e){return e.length?e[0]:e.hasNulls?null:F},high:function(e){return e.length?P(e):e.hasNulls?null:F},low:function(e){return e.length?k(e):e.hasNulls?null:F},close:function(e){return e.length?e[e.length-1]:e.hasNulls?null:F},ohlc:function(e,t,a,s){return e=fs.open(e),t=fs.high(t),a=fs.low(a),s=fs.close(s),typeof e===ms||typeof t===ms||typeof a===ms||typeof s===ms?[e,t,a,s]:void 0},range:function(e,t){return e=fs.low(e),t=fs.high(t),typeof e===ms||typeof t===ms?[e,t]:void 0}};os.groupData=function(e,t,a,s){var i,n,r,o,d=this,l=d.data,c=d.options.data,p=[],u=[],m=e.length,g=!!t,h=[[],[],[],[]],v="function"==typeof s?s:fs[s],f=d.pointArrayMap,y=f&&f.length;for(o=0;m>=o&&!(e[o]>=a[0]);o++);for(;m>=o;o++){for(;(a[1]!==F&&e[o]>=a[1]||o===m)&&(i=a.shift(),r=v.apply(0,h),r!==F&&(p.push(i),u.push(r)),h[0]=[],h[1]=[],h[2]=[],h[3]=[],o!==m););if(o===m)break;if(f){var b,w,_=d.cropStart+o,x=l&&l[_]||d.pointClass.prototype.applyOptions.apply({series:d},[c[_]]);for(b=0;y>b;b++)w=x[f[b]],typeof w===ms?h[b].push(w):null===w&&(h[b].hasNulls=!0)}else n=g?t[o]:null,typeof n===ms?h[0].push(n):null===n&&(h[0].hasNulls=!0)}return[p,u]},os.processData=function(){var e,t=this,a=t.chart,s=t.options,i=s[rs],n=t.allowDG!==!1&&i&&ra(i.enabled,a.options._stock);if(t.forceCrop=n,t.groupPixelWidth=null,t.hasProcessed=!0,ls.apply(t,arguments)!==!1&&n){t.destroyGroupedData();var r,o=t.processedXData,d=t.processedYData,c=a.plotSizeX,p=t.xAxis,u=p.options.ordinal,m=t.groupPixelWidth=p.getGroupPixelWidth&&p.getGroupPixelWidth(),g=t.pointRange;if(m){e=!0,t.points=null;var h=p.getExtremes(),v=h.min,f=h.max,y=u&&p.getGroupIntervalFactor(v,f,t)||1,b=m*(f-v)/c*y,w=p.getTimeTicks(p.normalizeTimeTickInterval(b,i.units||vs),v,f,p.options.startOfWeek,o,t.closestPointRange),_=os.groupData.apply(t,[o,d,w,i.approximation]),x=_[0],k=_[1];if(i.smoothed){for(r=x.length-1,x[r]=Math.min(x[r],f);r--&&r>0;)x[r]+=b/2;x[0]=Math.max(x[0],v)}t.currentDataGrouping=w.info,null===s.pointRange&&(t.pointRange=w.info.totalRange),t.closestPointRange=w.info.totalRange,l(x[0])&&x[0]<p.dataMin&&(p.min===p.dataMin&&(p.min=x[0]),p.dataMin=x[0]),t.processedXData=x,t.processedYData=k}else t.currentDataGrouping=null,t.pointRange=g;t.hasGroupedData=e}},os.destroyGroupedData=function(){var e=this.groupedData;ma(e||[],function(t,a){t&&(e[a]=t.destroy?t.destroy():null)}),this.groupedData=null},os.generatePoints=function(){cs.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},ds.tooltipFooterHeaderFormatter=function(e,t){var a,s,i,r,o,d,l=this,c=e.series,p=c.options,u=c.tooltipOptions,m=p.dataGrouping,g=u.xDateFormat,h=c.xAxis;return h&&"datetime"===h.options.type&&m&&n(e.key)?(s=c.currentDataGrouping,i=m.dateTimeLabelFormats,s?(r=i[s.unitName],1===s.count?g=r[0]:(g=r[1],a=r[2])):!g&&i&&(g=l.getXDateFormat(e,u,h)),o=z(g,e.key),a&&(o+=z(a,e.key+s.totalRange-1)),d=u[(t?"footer":"header")+"Format"].replace("{point.key}",o)):d=us.call(l,e,t),d},os.destroy=function(){for(var e=this,t=e.groupedData||[],a=t.length;a--;)t[a]&&t[a].destroy();ps.apply(e)},oa(os,"setOptions",function(t,a){var s=t.call(this,a),i=this.type,n=this.chart.options.plotOptions,r=ka[i].dataGrouping;return hs[i]&&(r||(r=e(gs,hs[i])),s.dataGrouping=e(r,n.series&&n.series.dataGrouping,n[i].dataGrouping,a.dataGrouping)),this.chart.options._stock&&(this.requireSorting=!0),s}),oa(Ia.prototype,"setScale",function(e){e.call(this),ma(this.series,function(e){e.hasProcessed=!1})}),Ia.prototype.getGroupPixelWidth=function(){var e,t,a,s=this.series,i=s.length,n=0,r=!1;for(e=i;e--;)a=s[e].options.dataGrouping,a&&(n=ft(n,a.groupPixelWidth));for(e=i;e--;)a=s[e].options.dataGrouping,a&&s[e].hasProcessed&&(t=(s[e].processedXData||s[e].data).length,(s[e].groupPixelWidth||t>this.chart.plotSizeX/n||t&&a.forced)&&(r=!0));return r?n:0},Ia.prototype.setDataGrouping=function(e,t){var a;if(t=ra(t,!0),e||(e={forced:!1,units:null}),this instanceof Ia)for(a=this.series.length;a--;)this.series[a].update({dataGrouping:e},!1);else ma(this.chart.options.series,function(t){t.dataGrouping=e},!1);t&&this.chart.redraw()},ka.ohlc=e(ka.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});var ys=g(ia.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(e){return[e.open,e.high,e.low,e.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){ia.column.prototype.getAttribs.apply(this,arguments);var t=this,a=t.options,s=a.states,i=a.upColor||t.color,n=e(t.pointAttr),r=t.upColorProp;n[""][r]=i,n.hover[r]=s.hover.upColor||i,n.select[r]=s.select.upColor||i,ma(t.points,function(e){e.open<e.close&&!e.options.color&&(e.pointAttr=n)})},translate:function(){var e=this,t=e.yAxis;ia.column.prototype.translate.apply(e),ma(e.points,function(e){null!==e.open&&(e.plotOpen=t.translate(e.open,0,1,0,1)),null!==e.close&&(e.plotClose=t.translate(e.close,0,1,0,1))})},drawPoints:function(){var e,t,a,s,i,n,r,o,d=this,l=d.points,c=d.chart;ma(l,function(l){l.plotY!==F&&(r=l.graphic,e=l.pointAttr[l.selected?"selected":""]||d.pointAttr[Qt],s=e["stroke-width"]%2/2,o=gt(l.plotX)-s,i=gt(l.shapeArgs.width/2),n=["M",o,gt(l.yBottom),"L",o,gt(l.plotY)],null!==l.open&&(t=gt(l.plotOpen)+s,n.push("M",o,t,"L",o-i,t)),null!==l.close&&(a=gt(l.plotClose)+s,n.push("M",o,a,"L",o+i,a)),r?r.attr(e).animate({d:n}):l.graphic=c.renderer.path(n).attr(e).add(d.group))})},animate:null});ia.ohlc=ys,ka.candlestick=e(ka.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:ka.ohlc.tooltip,threshold:null,upColor:"white"});var bs=g(ys,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){ia.ohlc.prototype.getAttribs.apply(this,arguments);var t=this,a=t.options,s=a.states,i=a.upLineColor||a.lineColor,n=s.hover.upLineColor||i,r=s.select.upLineColor||i;ma(t.points,function(t){t.open<t.close&&(t.lineColor&&(t.pointAttr=e(t.pointAttr),i=t.lineColor),t.pointAttr[""].stroke=i,t.pointAttr.hover.stroke=n,t.pointAttr.select.stroke=r)})},drawPoints:function(){var e,t,a,s,i,n,r,o,d,l,c,p,u=this,m=u.points,g=u.chart,h=u.pointAttr[""];ma(m,function(m){l=m.graphic,m.plotY!==F&&(e=m.pointAttr[m.selected?"selected":""]||h,o=e["stroke-width"]%2/2,d=gt(m.plotX)-o,t=m.plotOpen,a=m.plotClose,s=mt.min(t,a),i=mt.max(t,a),p=gt(m.shapeArgs.width/2),n=gt(s)!==gt(m.plotY),r=i!==m.yBottom,s=gt(s)+o,i=gt(i)+o,c=["M",d-p,i,"L",d-p,s,"L",d+p,s,"L",d+p,i,"Z","M",d,s,"L",d,n?gt(m.plotY):s,"M",d,i,"L",d,r?gt(m.yBottom):i],l?l.attr(e).animate({d:c}):m.graphic=g.renderer.path(c).attr(e).add(u.group).shadow(u.options.shadow))})}});ia.candlestick=bs;var ws=Da.prototype.symbols;ka.flags=e(ka.column,{fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30}),ia.flags=g(ia.column,{type:"flags",sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:Ga.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){ia.column.prototype.translate.apply(this);var e,t,a,s,i,n,r=this,o=r.options,d=r.chart,l=r.points,c=l.length-1,p=o.onSeries,u=p&&d.get(p),m=u&&u.options.step,g=u&&u.points,h=g&&g.length,v=r.xAxis,f=v.getExtremes();if(u&&u.visible&&h)for(n=u.currentDataGrouping,s=g[h-1].x+(n?n.totalRange:0),l.sort(function(e,t){return e.x-t.x});h--&&l[c]&&(e=l[c],a=g[h],!(a.x<=e.x&&a.plotY!==F&&(e.x<=s&&(e.plotY=a.plotY,a.x<e.x&&!m&&(i=g[h+1],i&&i.plotY!==F&&(e.plotY+=(e.x-a.x)/(i.x-a.x)*(i.plotY-a.plotY)))),c--,h++,0>c))););ma(l,function(e,a){var s;e.plotY===F&&(e.x>=f.min&&e.x<=f.max?e.plotY=d.chartHeight-v.bottom-(v.opposite?v.height:0)+v.offset-d.plotTop:e.shapeArgs={}),t=l[a-1],t&&t.plotX===e.plotX&&(t.stackIndex===F&&(t.stackIndex=0),s=t.stackIndex+1),e.stackIndex=s})},drawPoints:function(){var t,a,s,i,n,r,o,d,l,c,p,u=this,m=u.pointAttr[""],g=u.points,h=u.chart,v=h.renderer,f=u.options,y=f.y;for(n=g.length;n--;)r=g[n],p=r.plotX>u.xAxis.len,a=r.plotX,a>0&&(a-=ra(r.lineWidth,f.lineWidth)%2),d=r.stackIndex,i=r.options.shape||f.shape,s=r.plotY,s!==F&&(s=r.plotY+y-(d!==F&&d*f.stackDistance)),l=d?F:r.plotX,c=d?F:r.plotY,o=r.graphic,s!==F&&a>=0&&!p?(t=r.pointAttr[r.selected?"select":""]||m,o?o.attr({x:a,y:s,r:t.r,anchorX:l,anchorY:c}):o=r.graphic=v.label(r.options.title||f.title||"A",a,s,i,l,c,f.useHTML).css(e(f.style,r.style)).attr(t).attr({align:"flag"===i?"left":"center",width:f.width,height:f.height}).add(u.markerGroup).shadow(f.shadow),r.tooltipPos=[a,s]):o&&(r.graphic=o.destroy())},drawTracker:function(){var e=this,t=e.points;ns.drawTrackerPoint.apply(this),ma(t,function(e){var a=e.graphic;a&&fa(a.element,"mouseover",function(){e.stackIndex>0&&!e.raised&&(e._y=a.y,a.attr({y:e._y-8}),e.raised=!0),ma(t,function(t){t!==e&&t.raised&&t.graphic&&(t.graphic.attr({y:t._y}),t.raised=!1)})})})},animate:Rt,buildKDTree:Rt,setClip:Rt}),ws.flag=function(e,t,a,s,i){var n=i&&i.anchorX||e,r=i&&i.anchorY||t;return["M",n,r,"L",e,t+s,e,t,e+a,t,e+a,t+s,e,t+s,"Z"]},ma(["circle","square"],function(e){ws[e+"pin"]=function(t,a,s,i,n){var r,o,d=n&&n.anchorX,l=n&&n.anchorY;return"circle"===e&&i>s&&(t-=gt((i-s)/2),s=i),r=ws[e](t,a,s,i),d&&l&&(o=a>l?a:a+i,r.push("M",d,o,"L",d,l)),r}}),N===ct.VMLRenderer&&ma(["flag","circlepin","squarepin"],function(e){Ta.prototype.symbols[e]=ws[e]});var _s,xs=[].concat(vs),ks=function(e){var t=ga(arguments,function(e){return"number"==typeof e});return t.length?Math[e].apply(0,t):void 0};xs[4]=["day",[1,2,3,4]],xs[5]=["week",[1,2,3]],_s=ia.areaspline===F?"line":"areaspline",na(H,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:_s,color:"#4572A7",compare:null,fillOpacity:.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:xs},dataLabels:{enabled:!1,zIndex:2},id:Vt+"navigator-series",lineColor:null,lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:Tt?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:jt&&!Tt}}),$.prototype={drawHandle:function(e,t){var a,s=this,i=s.chart,n=i.renderer,r=s.elementsToDestroy,o=s.handles,d=s.navigatorOptions.handles,l={fill:d.backgroundColor,stroke:d.borderColor,"stroke-width":1};s.rendered||(o[t]=n.g("navigator-handle-"+["left","right"][t]).css({cursor:"ew-resize"}).attr({zIndex:4-t}).add(),a=n.rect(-4.5,0,9,16,0,1).attr(l).add(o[t]),r.push(a),a=n.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(l).add(o[t]),r.push(a)),o[t][i.isResizing?"animate":"attr"]({translateX:s.scrollerLeft+s.scrollbarHeight+parseInt(e,10),translateY:s.top+s.height/2-8})},drawScrollbarButton:function(e){var t,a=this,s=a.chart,i=s.renderer,n=a.elementsToDestroy,r=a.scrollbarButtons,o=a.scrollbarHeight,d=a.scrollbarOptions;a.rendered||(r[e]=i.g().add(a.scrollbarGroup),t=i.rect(-.5,-.5,o+1,o+1,d.buttonBorderRadius,d.buttonBorderWidth).attr({stroke:d.buttonBorderColor,"stroke-width":d.buttonBorderWidth,fill:d.buttonBackgroundColor}).add(r[e]),n.push(t),t=i.path(["M",o/2+(e?-1:1),o/2-3,"L",o/2+(e?-1:1),o/2+3,o/2+(e?2:-2),o/2]).attr({fill:d.buttonArrowColor}).add(r[e]),n.push(t)),e&&r[e].attr({translateX:a.scrollerWidth-o})},render:function(e,t,a,s){var i,n,r,o,d,c,p,u,m,g,h,v,f,y=this,b=y.chart,w=b.renderer,_=y.scrollbarGroup,x=y.navigatorGroup,k=y.scrollbar,P=y.xAxis,S=y.scrollbarTrack,O=y.scrollbarHeight,A=y.scrollbarEnabled,C=y.navigatorOptions,D=y.scrollbarOptions,T=D.minWidth,M=y.height,j=y.top,L=y.navigatorEnabled,E=C.outlineWidth,I=E/2,$=0,R=y.outlineHeight,F=D.barBorderRadius,N=D.barBorderWidth,q=j+I;l(e)&&!isNaN(e)&&(y.navigatorLeft=i=ra(P.left,b.plotLeft+O),y.navigatorWidth=n=ra(P.len,b.plotWidth-2*O),y.scrollerLeft=r=i-O,y.scrollerWidth=o=o=n+2*O,P.getExtremes&&(f=y.getUnionExtremes(!0),!f||f.dataMin===P.min&&f.dataMax===P.max||P.setExtremes(f.dataMin,f.dataMax,!0,!1)),a=ra(a,P.translate(e)),s=ra(s,P.translate(t)),(isNaN(a)||1/0===bt(a))&&(a=0,s=o),P.translate(s,!0)-P.translate(a,!0)<b.xAxis[0].minRange||(y.zoomedMax=yt(ft(a,s,0),n),y.zoomedMin=ft(y.fixedWidth?y.zoomedMax-y.fixedWidth:yt(a,s),0),y.range=y.zoomedMax-y.zoomedMin,c=gt(y.zoomedMax),d=gt(y.zoomedMin),p=c-d,y.rendered||(L&&(y.navigatorGroup=x=w.g("navigator").attr({zIndex:3}).add(),y.leftShade=w.rect().attr({fill:C.maskFill}).add(x),C.maskInside?y.leftShade.css({cursor:"ew-resize "}):y.rightShade=w.rect().attr({fill:C.maskFill}).add(x),y.outline=w.path().attr({"stroke-width":E,stroke:C.outlineColor}).add(x)),A&&(y.scrollbarGroup=_=w.g("scrollbar").add(),g=D.trackBorderWidth,y.scrollbarTrack=S=w.rect().attr({x:0,y:-g%2/2,fill:D.trackBackgroundColor,stroke:D.trackBorderColor,"stroke-width":g,r:D.trackBorderRadius||0,height:O}).add(_),y.scrollbar=k=w.rect().attr({y:-N%2/2,height:O,fill:D.barBackgroundColor,stroke:D.barBorderColor,"stroke-width":N,r:F}).add(_),y.scrollbarRifles=w.path().attr({stroke:D.rifleColor,"stroke-width":1}).add(_))),v=b.isResizing?"animate":"attr",L&&(y.leftShade[v](C.maskInside?{x:i+d,y:j,width:c-d,height:M}:{x:i,y:j,width:d,height:M}),y.rightShade&&y.rightShade[v]({x:i+c,y:j,width:n-c,height:M}),y.outline[v]({d:[Jt,r,q,Kt,i+d-I,q,i+d-I,q+R,Kt,i+c-I,q+R,Kt,i+c-I,q,r+o,q].concat(C.maskInside?[Jt,i+d+I,q,Kt,i+c-I,q]:[])}),y.drawHandle(d+I,0),y.drawHandle(c+I,1)),A&&_&&(y.drawScrollbarButton(0),y.drawScrollbarButton(1),_[v]({translateX:r,translateY:gt(q+M)}),S[v]({width:o}),u=O+d,m=p-N,T>m&&($=(T-m)/2,m=T,u-=$),y.scrollbarPad=$,k[v]({x:ht(u)+N%2/2,width:m}),h=O+d+p/2-.5,y.scrollbarRifles.attr({visibility:p>12?Yt:Ut})[v]({d:[Jt,h-3,O/4,Kt,h-3,2*O/3,Jt,h,O/4,Kt,h,2*O/3,Jt,h+3,O/4,Kt,h+3,2*O/3]})),y.scrollbarPad=$,y.rendered=!0))},addEvents:function(){var e,t=this.chart.container,a=this.mouseDownHandler,s=this.mouseMoveHandler,i=this.mouseUpHandler;e=[[t,"mousedown",a],[t,"mousemove",s],[document,"mouseup",i]],q&&e.push([t,"touchstart",a],[t,"touchmove",s],[document,"touchend",i]),ma(e,function(e){fa.apply(null,e)}),this._events=e},removeEvents:function(){ma(this._events,function(e){ya.apply(null,e)}),this._events=F,this.navigatorEnabled&&this.baseSeries&&ya(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var t,a,s,i,n=this,r=n.chart,o=n.scrollbarHeight,d=n.navigatorOptions,l=n.height,c=n.top,p=n.baseSeries;n.mouseDownHandler=function(e){e=r.pointer.normalize(e);var a,i,o,d,c=n.zoomedMin,p=n.zoomedMax,u=n.top,m=n.scrollbarHeight,g=n.scrollerLeft,h=n.scrollerWidth,v=n.navigatorLeft,f=n.navigatorWidth,y=n.scrollbarPad,b=n.range,w=e.chartX,_=e.chartY,x=r.xAxis[0],k=Tt?10:7;_>u&&u+l+m>_&&(d=!n.scrollbarEnabled||u+l>_,d&&mt.abs(w-c-v)<k?(n.grabbedLeft=!0,n.otherHandlePos=p,n.fixedExtreme=x.max,r.fixedRange=null):d&&mt.abs(w-p-v)<k?(n.grabbedRight=!0,n.otherHandlePos=c,n.fixedExtreme=x.min,r.fixedRange=null):w>v+c-y&&v+p+y>w?(n.grabbedCenter=w,n.fixedWidth=b,s=w-c):w>g&&g+h>w&&(o=d?w-v-b/2:v>w?c-.2*b:w>g+h-m?c+.2*b:v+c>w?c-b:p,0>o?o=0:o+b>=f&&(o=f-b,a=n.getUnionExtremes().dataMax),o!==c&&(n.fixedWidth=b,i=t.toFixedRange(o,o+b,null,a),x.setExtremes(i.min,i.max,!0,!1,{trigger:"navigator"}))))},n.mouseMoveHandler=function(e){var t,a=n.scrollbarHeight,o=n.navigatorLeft,d=n.navigatorWidth,l=n.scrollerLeft,c=n.scrollerWidth,p=n.range;0!==e.pageX&&(e=r.pointer.normalize(e),t=e.chartX,o>t?t=o:t>l+c-a&&(t=l+c-a),n.grabbedLeft?(i=!0,n.render(0,0,t-o,n.otherHandlePos)):n.grabbedRight?(i=!0,n.render(0,0,n.otherHandlePos,t-o)):n.grabbedCenter&&(i=!0,s>t?t=s:t>d+s-p&&(t=d+s-p),n.render(0,0,t-s,t-s+p)),i&&n.scrollbarOptions.liveRedraw&&setTimeout(function(){n.mouseUpHandler(e)},0))},n.mouseUpHandler=function(e){var a,o,d;i&&(n.zoomedMin===n.otherHandlePos?o=n.fixedExtreme:n.zoomedMax===n.otherHandlePos&&(d=n.fixedExtreme),a=t.toFixedRange(n.zoomedMin,n.zoomedMax,o,d),r.xAxis[0].setExtremes(a.min,a.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:e})),"mousemove"!==e.type&&(n.grabbedLeft=n.grabbedRight=n.grabbedCenter=n.fixedWidth=n.fixedExtreme=n.otherHandlePos=i=s=null)};var u=r.xAxis.length,m=r.yAxis.length;r.extraBottomMargin=n.outlineHeight+d.margin,n.navigatorEnabled?(n.xAxis=t=new Ia(r,e({breaks:p&&p.xAxis.options.breaks,ordinal:p&&p.xAxis.options.ordinal},d.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:u,height:l,offset:0,offsetLeft:o,offsetRight:-o,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),n.yAxis=a=new Ia(r,e(d.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:l,offset:0,index:m,zoomEnabled:!1})),p||d.series.data?n.addBaseSeries():0===r.series.length&&oa(r,"redraw",function(e,t){r.series.length>0&&!n.series&&(n.setBaseSeries(),r.redraw=e),e.call(r,t)})):n.xAxis=t={translate:function(e,t){var a=r.xAxis[0],s=a.getExtremes(),i=r.plotWidth-2*o,n=ks("min",a.options.min,s.dataMin),d=ks("max",a.options.max,s.dataMax)-n;return t?e*d/i+n:i*(e-n)/d},toFixedRange:Ia.prototype.toFixedRange},oa(r,"getMargins",function(e){var s=this.legend,i=s.options;e.apply(this,[].slice.call(arguments,1)),n.top=c=n.navigatorOptions.top||this.chartHeight-n.height-n.scrollbarHeight-this.spacing[2]-("bottom"===i.verticalAlign&&i.enabled&&!i.floating?s.legendHeight+ra(i.margin,10):0),t&&a&&(t.options.top=a.options.top=c,t.setAxisSize(),a.setAxisSize())}),n.addEvents()},getUnionExtremes:function(e){var t,a=this.chart.xAxis[0],s=this.xAxis,i=s.options,n=a.options;return e&&null===a.dataMin||(t={dataMin:ra(i&&i.min,ks("min",n.min,a.dataMin,s.dataMin)),dataMax:ra(i&&i.max,ks("max",n.max,a.dataMax,s.dataMax))}),t},setBaseSeries:function(e){var t=this.chart;e=e||t.options.navigator.baseSeries,this.series&&this.series.remove(),this.baseSeries=t.series[e]||"string"==typeof e&&t.get(e)||t.series[0],this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var t,a,s=this.baseSeries,i=s?s.options:{},n=i.data,r=this.navigatorOptions.series;a=r.data,this.hasNavigatorData=!!a,t=e(i,r,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0}),t.data=a||n,this.series=this.chart.initSeries(t),s&&this.navigatorOptions.adaptToUpdatedData!==!1&&(fa(s,"updatedData",this.updatedDataHandler),s.userOptions.events=na(s.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(){var e,t,a,s,i,n=this.chart.scroller,r=n.baseSeries,o=r.xAxis,d=o.getExtremes(),l=d.min,c=d.max,p=d.dataMin,u=d.dataMax,m=c-l,g=n.series,h=g.xData,v=!!o.setExtremes;t=c>=h[h.length-1]-(this.closestPointRange||0),e=p>=l,n.hasNavigatorData||(g.options.pointStart=r.xData[0],g.setData(r.options.data,!1),i=!0),e&&(s=p,a=s+m),t&&(a=u,e||(s=ft(a-m,g.xData[0]))),v&&(e||t)?isNaN(s)||o.setExtremes(s,a,!0,!1,{trigger:"updatedData"}):(i&&this.chart.redraw(!1),n.render(ft(l,p),yt(c,u)))},destroy:function(){var e=this;e.removeEvents(),ma([e.xAxis,e.yAxis,e.leftShade,e.rightShade,e.outline,e.scrollbarTrack,e.scrollbarRifles,e.scrollbarGroup,e.scrollbar],function(e){e&&e.destroy&&e.destroy()}),e.xAxis=e.yAxis=e.leftShade=e.rightShade=e.outline=e.scrollbarTrack=e.scrollbarRifles=e.scrollbarGroup=e.scrollbar=null,ma([e.scrollbarButtons,e.handles,e.elementsToDestroy],function(e){S(e)
})}},ct.Scroller=$,oa(Ia.prototype,"zoom",function(e,t,a){var s,i,n=this.chart,r=n.options,o=r.chart.zoomType,d=r.navigator,c=r.rangeSelector;return this.isXAxis&&(d&&d.enabled||c&&c.enabled)&&("x"===o?n.resetZoomButton="blocked":"y"===o?i=!1:"xy"===o&&(s=this.previousZoom,l(t)?this.previousZoom=[this.min,this.max]:s&&(t=s[0],a=s[1],delete this.previousZoom))),i!==F?i:e.call(this,t,a)}),oa(Ua.prototype,"init",function(e,t,a){fa(this,"beforeRender",function(){var e=this.options;(e.navigator.enabled||e.scrollbar.enabled)&&(this.scroller=new $(this))}),e.call(this,t,a)}),oa(Ga.prototype,"addPoint",function(e,t,a,n,r){var o=this.options.turboThreshold;o&&this.xData.length>o&&s(t)&&!i(t)&&this.chart.scroller&&A(20,!0),e.call(this,t,a,n,r)}),na(H,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},height:35,inputPosition:{align:"right"},labelStyle:{color:"#666"}}}),H.lang=e(H.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),R.prototype={clickButton:function(e,t){var a,s,i,n,r,o,d,l,c=this,p=c.selected,u=c.chart,m=c.buttons,g=c.buttonOptions[e],h=u.xAxis[0],v=u.scroller&&u.scroller.getUnionExtremes()||h||{},f=v.dataMin,y=v.dataMax,b=h&&gt(yt(h.max,ra(y,h.max))),w=g.type,_=g._range,x=g.dataGrouping;if(null!==f&&null!==y&&e!==c.selected){if(u.fixedRange=_,x&&(this.forcedDataGrouping=!0,Ia.prototype.setDataGrouping.call(h||{chart:this.chart},x,!1)),"month"===w||"year"===w)h?(l={range:g,max:b,dataMin:f,dataMax:y},a=h.minFromRange.call(l),"number"==typeof l.newMax&&(b=l.newMax)):_=g;else if(_)a=ft(b-_,f),b=yt(a+_,y);else if("ytd"===w){if(!h)return void fa(u,"beforeRender",function(){c.clickButton(e)});y===F&&(f=Number.MAX_VALUE,y=Number.MIN_VALUE,ma(u.series,function(e){var t=e.xData;f=yt(t[0],f),y=ft(t[t.length-1],y)}),t=!1),s=new Y(y),r=s.getFullYear(),a=n=ft(f||0,Y.UTC(r,0,1)),s=s.getTime(),b=yt(y||s,s)}else"all"===w&&h&&(a=f,b=y);m[p]&&m[p].setState(0),m[e]&&m[e].setState(2),h?(h.setExtremes(a,b,ra(t,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:g}),c.setSelected(e)):(i=u.options.xAxis[0],d=i.range,i.range=_,o=i.min,i.min=n,c.setSelected(e),fa(u,"load",function(){i.range=d,i.min=o}))}},setSelected:function(e){this.selected=this.options.selected=e},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(e){var t=this,a=e.options.rangeSelector,s=a.buttons||[].concat(t.defaultButtons),i=a.selected,n=t.blurInputs=function(){var e=t.minInput,a=t.maxInput;e&&e.blur&&ba(e,"blur"),a&&a.blur&&ba(a,"blur")};t.chart=e,t.options=a,t.buttons=[],e.extraTopMargin=a.height,t.buttonOptions=s,fa(e.container,"mousedown",n),fa(e,"resize",n),ma(s,t.computeButtonRange),i!==F&&s[i]&&this.clickButton(i,!1),fa(e,"load",function(){fa(e.xAxis[0],"setExtremes",function(a){this.max-this.min!==e.fixedRange&&"rangeSelectorButton"!==a.trigger&&"updatedData"!==a.trigger&&t.forcedDataGrouping&&this.setDataGrouping(!1,!1)}),fa(e.xAxis[0],"afterSetExtremes",function(){t.updateButtonStates(!0)})})},updateButtonStates:function(e){var t=this,a=this.chart,s=a.xAxis[0],i=a.scroller&&a.scroller.getUnionExtremes()||s,n=i.dataMin,r=i.dataMax,o=t.selected,d=t.options.allButtonsEnabled,l=t.buttons;e&&a.fixedRange!==gt(s.max-s.min)&&(l[o]&&l[o].setState(0),t.setSelected(null)),ma(t.buttonOptions,function(e,i){var c=gt(s.max-s.min),p=e._range,u=e.type,m=e.count||1,g=p>r-n,h=p<s.minRange,v="all"===e.type&&s.max-s.min>=r-n&&2!==l[i].state,f="ytd"===e.type&&z("%Y",n)===z("%Y",r),y=a.renderer.forExport&&i===o,b=p===c;("month"===u||"year"===u)&&c>=24*{month:28,year:365}[u]*36e5*m&&c<=24*{month:31,year:366}[u]*36e5*m&&(b=!0),y||b&&i!==o?(t.setSelected(i),l[i].setState(2)):!d&&(g||h||v||f)?l[i].setState(3):3===l[i].state&&l[i].setState(0)})},computeButtonRange:function(e){var t=e.type,a=e.count||1,s={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};s[t]?e._range=s[t]*a:("month"===t||"year"===t)&&(e._range=24*{month:30,year:365}[t]*36e5*a)},setInputValue:function(e,t){var a=this.chart.options.rangeSelector;l(t)&&(this[e+"Input"].HCTime=t),this[e+"Input"].value=z(a.inputEditDateFormat||"%Y-%m-%d",this[e+"Input"].HCTime),this[e+"DateBox"].attr({text:z(a.inputDateFormat||"%b %e, %Y",this[e+"Input"].HCTime)})},showInput:function(e){var t=this.inputGroup,a=this[e+"DateBox"];u(this[e+"Input"],{left:t.translateX+a.x+Gt,top:t.translateY+Gt,width:a.width-2+Gt,height:a.height-2+Gt,border:"2px solid silver"})},hideInput:function(e){u(this[e+"Input"],{border:0,width:"1px",height:"1px"}),this.setInputValue(e)},drawInput:function(a){var s,i,n,r=this,o=r.chart,d=o.renderer.style,l=o.renderer,c=o.options.rangeSelector,p=H.lang,u=r.div,g="min"===a,h=this.inputGroup;this[a+"Label"]=i=l.label(p[g?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(e(d,c.labelStyle)).add(h),h.offset+=i.width+5,this[a+"DateBox"]=n=l.label("",h.offset).attr({padding:2,width:c.inputBoxWidth||90,height:c.inputBoxHeight||17,stroke:c.inputBoxBorderColor||"silver","stroke-width":1}).css(e({textAlign:"center",color:"#444"},d,c.inputStyle)).on("click",function(){r.showInput(a),r[a+"Input"].focus()}).add(h),h.offset+=n.width+(g?10:0),this[a+"Input"]=s=m("input",{name:a,className:Vt+"range-selector",type:"text"},na({position:zt,border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:d.fontSize,fontFamily:d.fontFamily,top:o.plotTop+Gt},c.inputStyle),u),s.onfocus=function(){r.showInput(a)},s.onblur=function(){r.hideInput(a)},s.onchange=function(){var e=s.value,a=(c.inputDateParser||Y.parse)(e),i=o.xAxis[0],n=i.dataMin,d=i.dataMax;isNaN(a)&&(a=e.split("-"),a=Y.UTC(t(a[0]),t(a[1])-1,t(a[2]))),isNaN(a)||(H.global.useUTC||(a+=60*(new Y).getTimezoneOffset()*1e3),g?a>r.maxInput.HCTime?a=F:n>a&&(a=n):a<r.minInput.HCTime?a=F:a>d&&(a=d),a!==F&&o.xAxis[0].setExtremes(g?a:i.min,g?i.max:a,F,F,{trigger:"rangeSelectorInput"}))}},getPosition:function(){var e=this.chart,t=e.options.rangeSelector,a=ra((t.buttonPosition||{}).y,e.plotTop-e.axisOffset[0]-t.height);return{buttonTop:a,inputTop:a-10}},render:function(e,t){var a,s,i=this,n=i.chart,r=n.renderer,o=n.container,d=n.options,c=d.exporting&&d.navigation&&d.navigation.buttonOptions,p=d.rangeSelector,u=i.buttons,g=H.lang,h=i.div,v=i.inputGroup,f=p.buttonTheme,y=p.buttonPosition||{},b=p.inputEnabled,w=f&&f.states,_=n.plotLeft,x=this.getPosition(),k=i.group,P=i.rendered;P||(i.group=k=r.g("range-selector-buttons").add(),i.zoomText=r.text(g.rangeSelectorZoom,ra(y.x,_),15).css(p.labelStyle).add(k),a=ra(y.x,_)+i.zoomText.getBBox().width+5,ma(i.buttonOptions,function(e,t){u[t]=r.button(e.text,a,0,function(){i.clickButton(t),i.isActive=!0},f,w&&w.hover,w&&w.select,w&&w.disabled).css({textAlign:"center"}).add(k),a+=u[t].width+ra(p.buttonSpacing,5),i.selected===t&&u[t].setState(2)}),i.updateButtonStates(),b!==!1&&(i.div=h=m("div",null,{position:"relative",height:0,zIndex:1}),o.parentNode.insertBefore(h,o),i.inputGroup=v=r.g("input-group").add(),v.offset=0,i.drawInput("min"),i.drawInput("max"))),k[P?"animate":"attr"]({translateY:x.buttonTop}),b!==!1&&(v.align(na({y:x.inputTop,width:v.offset,x:c&&x.inputTop<(c.y||0)+c.height-n.spacing[0]?-40:0},p.inputPosition),!0,n.spacingBox),l(b)||(s=k.getBBox(),v[v.translateX<s.x+s.width+10?"hide":"show"]()),i.setInputValue("min",e),i.setInputValue("max",t)),i.rendered=!0},destroy:function(){var e,t=this.minInput,a=this.maxInput,s=this.chart,i=this.blurInputs;ya(s.container,"mousedown",i),ya(s,"resize",i),S(this.buttons),t&&(t.onfocus=t.onblur=t.onchange=null),a&&(a.onfocus=a.onblur=a.onchange=null);for(e in this)this[e]&&"chart"!==e&&(this[e].destroy?this[e].destroy():this[e].nodeType&&O(this[e])),this[e]=null}},Ia.prototype.toFixedRange=function(e,t,a,s){var i=this.chart&&this.chart.fixedRange,n=ra(a,this.translate(e,!0)),r=ra(s,this.translate(t,!0)),o=i&&(r-n)/i;return o>.7&&1.3>o&&(s?n=r-i:r=n+i),{min:n,max:r}},Ia.prototype.minFromRange=function(){var e,t,a,s=this.range,i=s.type,n={month:"Month",year:"FullYear"}[i],r=this.max,o=function(e,t){var a=new Y(e);return a["set"+n](a["get"+n]()+t),a.getTime()-e};return"number"==typeof s?(e=this.max-s,a=s):e=r+o(r,-s.count),t=ra(this.dataMin,Number.MIN_VALUE),isNaN(e)&&(e=t),t>=e&&(e=t,void 0===a&&(a=o(e,s.count)),this.newMax=yt(e+a,this.dataMax)),isNaN(r)&&(e=void 0),e},oa(Ua.prototype,"init",function(e,t,a){fa(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new R(this))}),e.call(this,t,a)}),ct.RangeSelector=R,Ua.prototype.callbacks.push(function(e){function t(){r=e.xAxis[0].getExtremes(),o.render(r.min,r.max)}function a(){r=e.xAxis[0].getExtremes(),isNaN(r.min)||d.render(r.min,r.max)}function s(e){"navigator-drag"!==e.triggerOp&&o.render(e.min,e.max)}function i(e){d.render(e.min,e.max)}function n(){o&&ya(e.xAxis[0],"afterSetExtremes",s),d&&(ya(e,"resize",a),ya(e.xAxis[0],"afterSetExtremes",i))}var r,o=e.scroller,d=e.rangeSelector;o&&(fa(e.xAxis[0],"afterSetExtremes",s),oa(e,"drawChartBox",function(e){var a=this.isDirtyBox;e.call(this),a&&t()}),t()),d&&(fa(e.xAxis[0],"afterSetExtremes",i),fa(e,"resize",a),a()),fa(e,"destroy",n)}),ct.StockChart=function(t,a){var s,i=t.series,n=ra(t.navigator&&t.navigator.enabled,!0),r=n?{startOnTick:!1,endOnTick:!1}:null,o={marker:{enabled:!1,radius:2}},d={shadow:!1,borderWidth:0};return t.xAxis=va(p(t.xAxis||{}),function(t){return e({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},t,{type:"datetime",categories:null},r)}),t.yAxis=va(p(t.yAxis||{}),function(t){return s=ra(t.opposite,!0),e({labels:{y:-2},opposite:s,showLastLabel:!1,title:{text:null}},t)}),t.series=null,t=e({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:o,spline:o,area:o,areaspline:o,arearange:o,areasplinerange:o,column:d,columnrange:d,candlestick:d,ohlc:d}},t,{_stock:!0,chart:{inverted:!1}}),t.series=i,new Ua(t,a)},oa(Fa.prototype,"init",function(e,t,a){var s=a.chart.pinchType||"";e.call(this,t,a),this.pinchX=this.pinchHor=-1!==s.indexOf("x"),this.pinchY=this.pinchVert=-1!==s.indexOf("y"),this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert}),oa(Ia.prototype,"autoLabelAlign",function(e){var t,a=this.chart,s=this.options,i=a._labelPanes=a._labelPanes||{},n=this.options.labels;return this.chart.options._stock&&"yAxis"===this.coll&&(t=s.top+","+s.height,!i[t]&&n.enabled)?(15===n.x&&(n.x=0),void 0===n.align&&(n.align="right"),i[t]=1,"right"):e.call(this,[].slice.call(arguments,1))}),oa(Ia.prototype,"getPlotLinePath",function(e,t,a,s,i,n){var r,o,d,c,p,u,m=this,g=this.isLinked&&!this.series?this.linkedParent.series:this.series,h=m.chart,v=h.renderer,f=m.left,y=m.top,b=[],w=[];return"colorAxis"===m.coll?e.apply(this,[].slice.call(arguments,1)):(w=m.isXAxis?l(m.options.yAxis)?[h.yAxis[m.options.yAxis]]:va(g,function(e){return e.yAxis}):l(m.options.xAxis)?[h.xAxis[m.options.xAxis]]:va(g,function(e){return e.xAxis}),p=m.isXAxis?h.yAxis:h.xAxis,ma(p,function(e){if(l(e.options.id)?-1===e.options.id.indexOf("navigator"):!0){var t=e.isXAxis?"yAxis":"xAxis",a=l(e.options[t])?h[t][e.options[t]]:h[t][0];m===a&&w.push(e)}}),u=w.length?[]:[m.isXAxis?h.yAxis[0]:h.xAxis[0]],ma(w,function(e){-1===ua(e,u)&&u.push(e)}),n=ra(n,m.translate(t,null,null,s)),isNaN(n)||(m.horiz?ma(u,function(e){var t;o=e.pos,c=o+e.len,r=d=gt(n+m.transB),(f>r||r>f+m.width)&&(i?r=d=yt(ft(f,r),f+m.width):t=!0),t||b.push("M",r,o,"L",d,c)}):ma(u,function(e){var t;r=e.pos,d=r+e.len,o=c=gt(y+m.height-n),(y>o||o>y+m.height)&&(i?o=c=yt(ft(y,o),m.top+m.height):t=!0),t||b.push("M",r,o,"L",d,c)})),b.length>0?v.crispPolyLine(b,a||1):null)}),Ia.prototype.getPlotBandPath=function(e,t){var a,s=this.getPlotLinePath(t,null,null,!0),i=this.getPlotLinePath(e,null,null,!0),n=[];if(i&&s&&i.toString()!==s.toString())for(a=0;a<i.length;a+=6)n.push("M",i[a+1],i[a+2],"L",i[a+4],i[a+5],s[a+4],s[a+5],s[a+1],s[a+2]);else n=null;return n},Da.prototype.crispPolyLine=function(e,t){var a;for(a=0;a<e.length;a+=6)e[a+1]===e[a+4]&&(e[a+1]=e[a+4]=gt(e[a+1])-t%2/2),e[a+2]===e[a+5]&&(e[a+2]=e[a+5]=gt(e[a+2])+t%2/2);return e},N===ct.VMLRenderer&&(Ta.prototype.crispPolyLine=Da.prototype.crispPolyLine),oa(Ia.prototype,"hideCrosshair",function(e,t){e.call(this,t),l(this.crossLabelArray)&&(l(t)?this.crossLabelArray[t]&&this.crossLabelArray[t].hide():ma(this.crossLabelArray,function(e){e.hide()}))}),oa(Ia.prototype,"drawCrosshair",function(e,t,a){if(e.call(this,t,a),l(this.crosshair.label)&&this.crosshair.label.enabled&&l(a)){var s,i,n,r,o=this.chart,d=this.options.crosshair.label,c=this.isXAxis?"x":"y",p=this.horiz,u=this.opposite,m=this.left,g=this.top,h=this.crossLabel,v=d.format,f="";if(h||(h=this.crossLabel=o.renderer.label().attr({align:d.align||(p?"center":u?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center"),zIndex:12,height:p?16:F,fill:d.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:ra(d.padding,2),stroke:d.borderColor||null,"stroke-width":d.borderWidth||0}).css(na({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},d.style)).add()),p?(s=a.plotX+m,i=g+(u?0:this.height)):(s=u?this.width+m:0,i=a.plotY+g),g>i||i>g+this.height)return void this.hideCrosshair();v||d.formatter||(this.isDatetimeAxis&&(f="%b %d, %Y"),v="{value"+(f?":"+f:"")+"}"),h.attr({text:v?b(v,{value:a[c]}):d.formatter.call(this,a[c]),x:s,y:i,visibility:Yt}),n=h.getBBox(),p?("inside"===this.options.tickPosition&&!u||"inside"!==this.options.tickPosition&&u)&&(i=h.y-n.height):i=h.y-n.height/2,r=p?{left:m-n.x,right:m+this.width-n.x}:{left:"left"===this.labelAlign?m:0,right:"right"===this.labelAlign?m+this.width:o.chartWidth},h.translateX<r.left&&(s+=r.left-h.translateX),h.translateX+n.width>=r.right&&(s-=h.translateX+n.width-r.right),h.attr({x:s,y:i,visibility:Yt})}});var Ps=os.init,Ss=os.processData,Os=Ya.prototype.tooltipFormatter;os.init=function(){Ps.apply(this,arguments),this.setCompare(this.options.compare)},os.setCompare=function(e){this.modifyValue="value"===e||"percent"===e?function(t,a){var s=this.compareValue;return t!==F&&(t="value"===e?t-s:t=100*(t/s)-100,a&&(a.change=t)),t}:null,this.chart.hasRendered&&(this.isDirty=!0)},os.processData=function(){var e,t,a,s=this,i=0;if(Ss.apply(this,arguments),s.xAxis&&s.processedYData)for(e=s.processedXData,t=s.processedYData,a=t.length;a>i;i++)if(typeof t[i]===ms&&e[i]>=s.xAxis.min){s.compareValue=t[i];break}},oa(os,"getExtremes",function(e){e.apply(this,[].slice.call(arguments,1)),this.modifyValue&&(this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin))}),Ia.prototype.setCompare=function(e,t){this.isXAxis||(ma(this.series,function(t){t.setCompare(e)}),ra(t,!0)&&this.chart.redraw())},Ya.prototype.tooltipFormatter=function(e){var t=this;return e=e.replace("{point.change}",(t.change>0?"+":"")+ct.numberFormat(t.change,ra(t.series.tooltipOptions.changeDecimals,2))),Os.apply(this,[e])},oa(Ga.prototype,"render",function(t){this.chart.options._stock&&this.xAxis&&(!this.clipBox&&this.animate?(this.clipBox=e(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]&&(xa(this.chart[this.sharedClipKey]),this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}))),t.call(this)}),na(ct,{Color:Ca,Point:Ya,Tick:E,Renderer:N,SVGElement:L,SVGRenderer:Da,arrayMin:k,arrayMax:P,charts:Ft,dateFormat:z,error:A,format:b,pathAnim:W,getOptions:j,hasBidiBug:Lt,isTouchDevice:Tt,setOptions:M,addEvent:fa,removeEvent:ya,createElement:m,discardElement:O,css:u,each:ma,map:va,merge:e,splat:p,extendClass:g,pInt:t,svg:jt,canvas:Et,vml:!jt&&!Et,product:qt,version:Bt})}(),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,s){var i,n,r,o=t.nodeName.toLowerCase();return"area"===o?(i=t.parentNode,n=i.name,t.href&&n&&"map"===i.nodeName.toLowerCase()?(r=e("img[usemap='#"+n+"']")[0],!!r&&a(r)):!1):(/^(input|select|textarea|button|object)$/.test(o)?!t.disabled:"a"===o?t.href||s:s)&&a(t)}function a(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,a;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(a=parseInt(e.css("zIndex"),10),!isNaN(a)&&0!==a))return a;e=e.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var a="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(a,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(a,"mouseover",r)}function r(){e.datepicker._isDisabledDatepicker(f.inline?f.dpDiv.parent()[0]:f.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function o(t,a){e.extend(t,a);for(var s in a)null==a[s]&&(t[s]=a[s]);return t}function d(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var a=this.css("position"),s="absolute"===a,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==a&&n.length?n:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(a){return!!e.data(a,t)}}):function(t,a,s){return!!e.data(t,s[3])},focusable:function(a){return t(a,!isNaN(e.attr(a,"tabindex")))},tabbable:function(a){var s=e.attr(a,"tabindex"),i=isNaN(s);return(i||s>=0)&&t(a,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,a){function s(t,a,s,n){return e.each(i,function(){a-=parseFloat(e.css(t,"padding"+this))||0,s&&(a-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(a-=parseFloat(e.css(t,"margin"+this))||0)}),a}var i="Width"===a?["Left","Right"]:["Top","Bottom"],n=a.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+a]=function(t){return void 0===t?r["inner"+a].call(this):this.each(function(){e(this).css(n,s(this,t)+"px")})},e.fn["outer"+a]=function(t,i){return"number"!=typeof t?r["outer"+a].call(this,t):this.each(function(){e(this).css(n,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(a){return arguments.length?t.call(this,e.camelCase(a)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(a,s){return"number"==typeof a?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},a)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var a,s,i=e(this[0]);i.length&&i[0]!==document;){if(a=i.css("position"),("absolute"===a||"relative"===a||"fixed"===a)&&(s=parseInt(i.css("zIndex"),10),!isNaN(s)&&0!==s))return s;i=i.parent()}return 0}}),e.ui.plugin={add:function(t,a,s){var i,n=e.ui[t].prototype;for(i in s)n.plugins[i]=n.plugins[i]||[],n.plugins[i].push([a,s[i]])},call:function(e,t,a,s){var i,n=e.plugins[t];if(n&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;i<n.length;i++)e.options[n[i][0]]&&n[i][1].apply(e.element,a)}};var l=0,c=Array.prototype.slice;e.cleanData=function(t){return function(a){var s,i,n;for(n=0;null!=(i=a[n]);n++)try{s=e._data(i,"events"),s&&s.remove&&e(i).triggerHandler("remove")}catch(r){}t(a)}}(e.cleanData),e.widget=function(t,a,s){var i,n,r,o,d={},l=t.split(".")[0];return t=t.split(".")[1],i=l+"-"+t,s||(s=a,a=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[l]=e[l]||{},n=e[l][t],r=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new r(e,t)},e.extend(r,n,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),o=new a,o.options=e.widget.extend({},o.options),e.each(s,function(t,s){return e.isFunction(s)?void(d[t]=function(){var e=function(){return a.prototype[t].apply(this,arguments)},i=function(e){return a.prototype[t].apply(this,e)};return function(){var t,a=this._super,n=this._superApply;return this._super=e,this._superApply=i,t=s.apply(this,arguments),this._super=a,this._superApply=n,t}}()):void(d[t]=s)}),r.prototype=e.widget.extend(o,{widgetEventPrefix:n?o.widgetEventPrefix||t:t},d,{constructor:r,namespace:l,widgetName:t,widgetFullName:i}),n?(e.each(n._childConstructors,function(t,a){var s=a.prototype;e.widget(s.namespace+"."+s.widgetName,r,a._proto)}),delete n._childConstructors):a._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var a,s,i=c.call(arguments,1),n=0,r=i.length;r>n;n++)for(a in i[n])s=i[n][a],i[n].hasOwnProperty(a)&&void 0!==s&&(t[a]=e.isPlainObject(s)?e.isPlainObject(t[a])?e.widget.extend({},t[a],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,a){var s=a.prototype.widgetFullName||t;e.fn[t]=function(i){var n="string"==typeof i,r=c.call(arguments,1),o=this;return n?this.each(function(){var a,n=e.data(this,s);return"instance"===i?(o=n,!1):n?e.isFunction(n[i])&&"_"!==i.charAt(0)?(a=n[i].apply(n,r),a!==n&&void 0!==a?(o=a&&a.jquery?o.pushStack(a.get()):a,!1):void 0):e.error("no such method '"+i+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+i+"'")}):(r.length&&(i=e.widget.extend.apply(null,[i].concat(r))),this.each(function(){var t=e.data(this,s);t?(t.option(i||{}),t._init&&t._init()):e.data(this,s,new a(i,this))})),o}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,a){a=e(a||this.defaultElement||this)[0],this.element=e(a),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),a!==this&&(e.data(a,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===a&&this.destroy()}}),this.document=e(a.style?a.ownerDocument:a.document||a),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,a){var s,i,n,r=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(r={},s=t.split("."),t=s.shift(),s.length){for(i=r[t]=e.widget.extend({},this.options[t]),n=0;n<s.length-1;n++)i[s[n]]=i[s[n]]||{},i=i[s[n]];if(t=s.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=a}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=a}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,a,s){var i,n=this;"boolean"!=typeof t&&(s=a,a=t,t=!1),s?(a=i=e(a),this.bindings=this.bindings.add(a)):(s=a,a=this.element,i=this.widget()),e.each(s,function(s,r){function o(){return t||n.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?n[r]:r).apply(n,arguments):void 0}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||e.guid++);var d=s.match(/^([\w:-]*)\s*(.*)$/),l=d[1]+n.eventNamespace,c=d[2];c?i.delegate(c,l,o):a.bind(l,o)})},_off:function(t,a){a=(a||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(a).undelegate(a),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function a(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(a,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,a,s){var i,n,r=this.options[t];if(s=s||{},a=e.Event(a),a.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),a.target=this.element[0],n=a.originalEvent)for(i in n)i in a||(a[i]=n[i]);return this.element.trigger(a,s),!(e.isFunction(r)&&r.apply(this.element[0],[a].concat(s))===!1||a.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,a){e.Widget.prototype["_"+t]=function(s,i,n){"string"==typeof i&&(i={effect:i});var r,o=i?i===!0||"number"==typeof i?a:i.effect||a:t;i=i||{},"number"==typeof i&&(i={duration:i}),r=!e.isEmptyObject(i),i.complete=n,i.delay&&s.delay(i.delay),r&&e.effects&&e.effects.effect[o]?s[t](i):o!==t&&s[o]?s[o](i.duration,i.easing,n):s.queue(function(a){e(this)[t](),n&&n.call(s[0]),a()})}});var p=(e.widget,!1);e(document).mouseup(function(){p=!1});e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(a){return!0===e.data(a.target,t.widgetName+".preventClickEvent")?(e.removeData(a.target,t.widgetName+".preventClickEvent"),a.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!p){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var a=this,s=1===t.which,i="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!i&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return a._mouseMove(e)},this._mouseUpDelegate=function(e){return a._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),p=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),p=!1,!1
},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function t(e,t,a){return[parseFloat(e[0])*(m.test(e[0])?t/100:1),parseFloat(e[1])*(m.test(e[1])?a/100:1)]}function a(t,a){return parseInt(e.css(t,a),10)||0}function s(t){var a=t[0];return 9===a.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(a)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:a.preventDefault?{width:0,height:0,offset:{top:a.pageY,left:a.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var i,n,r=Math.max,o=Math.abs,d=Math.round,l=/left|center|right/,c=/top|center|bottom/,p=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,m=/%$/,g=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==i)return i;var t,a,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=s.children()[0];return e("body").append(s),t=n.offsetWidth,s.css("overflow","scroll"),a=n.offsetWidth,t===a&&(a=s[0].clientWidth),s.remove(),i=t-a},getScrollInfo:function(t){var a=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===a||"auto"===a&&t.width<t.element[0].scrollWidth,n="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:n?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var a=e(t||window),s=e.isWindow(a[0]),i=!!a[0]&&9===a[0].nodeType;return{element:a,isWindow:s,isDocument:i,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:s||i?a.width():a.outerWidth(),height:s||i?a.height():a.outerHeight()}}},e.fn.position=function(i){if(!i||!i.of)return g.apply(this,arguments);i=e.extend({},i);var m,h,v,f,y,b,w=e(i.of),_=e.position.getWithinInfo(i.within),x=e.position.getScrollInfo(_),k=(i.collision||"flip").split(" "),P={};return b=s(w),w[0].preventDefault&&(i.at="left top"),h=b.width,v=b.height,f=b.offset,y=e.extend({},f),e.each(["my","at"],function(){var e,t,a=(i[this]||"").split(" ");1===a.length&&(a=l.test(a[0])?a.concat(["center"]):c.test(a[0])?["center"].concat(a):["center","center"]),a[0]=l.test(a[0])?a[0]:"center",a[1]=c.test(a[1])?a[1]:"center",e=p.exec(a[0]),t=p.exec(a[1]),P[this]=[e?e[0]:0,t?t[0]:0],i[this]=[u.exec(a[0])[0],u.exec(a[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===i.at[0]?y.left+=h:"center"===i.at[0]&&(y.left+=h/2),"bottom"===i.at[1]?y.top+=v:"center"===i.at[1]&&(y.top+=v/2),m=t(P.at,h,v),y.left+=m[0],y.top+=m[1],this.each(function(){var s,l,c=e(this),p=c.outerWidth(),u=c.outerHeight(),g=a(this,"marginLeft"),b=a(this,"marginTop"),S=p+g+a(this,"marginRight")+x.width,O=u+b+a(this,"marginBottom")+x.height,A=e.extend({},y),C=t(P.my,c.outerWidth(),c.outerHeight());"right"===i.my[0]?A.left-=p:"center"===i.my[0]&&(A.left-=p/2),"bottom"===i.my[1]?A.top-=u:"center"===i.my[1]&&(A.top-=u/2),A.left+=C[0],A.top+=C[1],n||(A.left=d(A.left),A.top=d(A.top)),s={marginLeft:g,marginTop:b},e.each(["left","top"],function(t,a){e.ui.position[k[t]]&&e.ui.position[k[t]][a](A,{targetWidth:h,targetHeight:v,elemWidth:p,elemHeight:u,collisionPosition:s,collisionWidth:S,collisionHeight:O,offset:[m[0]+C[0],m[1]+C[1]],my:i.my,at:i.at,within:_,elem:c})}),i.using&&(l=function(e){var t=f.left-A.left,a=t+h-p,s=f.top-A.top,n=s+v-u,d={target:{element:w,left:f.left,top:f.top,width:h,height:v},element:{element:c,left:A.left,top:A.top,width:p,height:u},horizontal:0>a?"left":t>0?"right":"center",vertical:0>n?"top":s>0?"bottom":"middle"};p>h&&o(t+a)<h&&(d.horizontal="center"),u>v&&o(s+n)<v&&(d.vertical="middle"),d.important=r(o(t),o(a))>r(o(s),o(n))?"horizontal":"vertical",i.using.call(this,e,d)}),c.offset(e.extend(A,{using:l}))})},e.ui.position={fit:{left:function(e,t){var a,s=t.within,i=s.isWindow?s.scrollLeft:s.offset.left,n=s.width,o=e.left-t.collisionPosition.marginLeft,d=i-o,l=o+t.collisionWidth-n-i;t.collisionWidth>n?d>0&&0>=l?(a=e.left+d+t.collisionWidth-n-i,e.left+=d-a):e.left=l>0&&0>=d?i:d>l?i+n-t.collisionWidth:i:d>0?e.left+=d:l>0?e.left-=l:e.left=r(e.left-o,e.left)},top:function(e,t){var a,s=t.within,i=s.isWindow?s.scrollTop:s.offset.top,n=t.within.height,o=e.top-t.collisionPosition.marginTop,d=i-o,l=o+t.collisionHeight-n-i;t.collisionHeight>n?d>0&&0>=l?(a=e.top+d+t.collisionHeight-n-i,e.top+=d-a):e.top=l>0&&0>=d?i:d>l?i+n-t.collisionHeight:i:d>0?e.top+=d:l>0?e.top-=l:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var a,s,i=t.within,n=i.offset.left+i.scrollLeft,r=i.width,d=i.isWindow?i.scrollLeft:i.offset.left,l=e.left-t.collisionPosition.marginLeft,c=l-d,p=l+t.collisionWidth-r-d,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,m="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,g=-2*t.offset[0];0>c?(a=e.left+u+m+g+t.collisionWidth-r-n,(0>a||a<o(c))&&(e.left+=u+m+g)):p>0&&(s=e.left-t.collisionPosition.marginLeft+u+m+g-d,(s>0||o(s)<p)&&(e.left+=u+m+g))},top:function(e,t){var a,s,i=t.within,n=i.offset.top+i.scrollTop,r=i.height,d=i.isWindow?i.scrollTop:i.offset.top,l=e.top-t.collisionPosition.marginTop,c=l-d,p=l+t.collisionHeight-r-d,u="top"===t.my[1],m=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,g="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,h=-2*t.offset[1];0>c?(s=e.top+m+g+h+t.collisionHeight-r-n,(0>s||s<o(c))&&(e.top+=m+g+h)):p>0&&(a=e.top-t.collisionPosition.marginTop+m+g+h-d,(a>0||o(a)<p)&&(e.top+=m+g+h))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,a,s,i,r,o=document.getElementsByTagName("body")[0],d=document.createElement("div");t=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in s)t.style[r]=s[r];t.appendChild(d),a=o||document.documentElement,a.insertBefore(t,a.firstChild),d.style.cssText="position: absolute; left: 10.7432222px;",i=e(d).offset().left,n=i>10&&11>i,t.innerHTML="",a.removeChild(t)}()}();e.ui.position;e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var a=this.options;return this._blurActiveElement(t),this.helper||a.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(a.iframeFix===!0?"iframe":a.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var a=this.document[0];if(this.handleElement.is(t.target))try{a.activeElement&&"body"!==a.activeElement.nodeName.toLowerCase()&&e(a.activeElement).blur()}catch(s){}},_mouseStart:function(t){var a=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,a){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!a){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var a=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){a._trigger("stop",t)!==!1&&a._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var a=this.options,s=e.isFunction(a.helper),i=s?e(a.helper.apply(this.element[0],[t])):"clone"===a.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===a.appendTo?this.element[0].parentNode:a.appendTo),s&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),a=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==a&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,a,s,i=this.options,n=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===i.containment?void(this.containment=[0,0,e(n).width()-this.helperProportions.width-this.margins.left,(e(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):i.containment.constructor===Array?void(this.containment=i.containment):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),a=e(i.containment),s=a[0],void(s&&(t=/(scroll|auto)/.test(a.css("overflow")),this.containment=[(parseInt(a.css("borderLeftWidth"),10)||0)+(parseInt(a.css("paddingLeft"),10)||0),(parseInt(a.css("borderTopWidth"),10)||0)+(parseInt(a.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(a.css("borderRightWidth"),10)||0)-(parseInt(a.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(a.css("borderBottomWidth"),10)||0)-(parseInt(a.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=a))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var a="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*a,left:t.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*a}},_generatePosition:function(e,t){var a,s,i,n,r=this.options,o=this._isRootNode(this.scrollParent[0]),d=e.pageX,l=e.pageY;return o&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),a=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):a=this.containment,e.pageX-this.offset.click.left<a[0]&&(d=a[0]+this.offset.click.left),e.pageY-this.offset.click.top<a[1]&&(l=a[1]+this.offset.click.top),e.pageX-this.offset.click.left>a[2]&&(d=a[2]+this.offset.click.left),e.pageY-this.offset.click.top>a[3]&&(l=a[3]+this.offset.click.top)),r.grid&&(i=r.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,l=a?i-this.offset.click.top>=a[1]||i-this.offset.click.top>a[3]?i:i-this.offset.click.top>=a[1]?i-r.grid[1]:i+r.grid[1]:i,n=r.grid[0]?this.originalPageX+Math.round((d-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,d=a?n-this.offset.click.left>=a[0]||n-this.offset.click.left>a[2]?n:n-this.offset.click.left>=a[0]?n-r.grid[0]:n+r.grid[0]:n),"y"===r.axis&&(d=this.originalPageX),"x"===r.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,a,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[a,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,a,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,a,s){var i=e.extend({},a,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var a=e(this).sortable("instance");a&&!a.options.disabled&&(s.sortables.push(a),a.refreshPositions(),a._trigger("activate",t,i))})},stop:function(t,a,s){var i=e.extend({},a,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,a,s){e.each(s.sortables,function(){var i=!1,n=this;n.positionAbs=s.positionAbs,n.helperProportions=s.helperProportions,n.offset.click=s.offset.click,n._intersectsWith(n.containerCache)&&(i=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==n&&this._intersectsWith(this.containerCache)&&e.contains(n.element[0],this.element[0])&&(i=!1),i})),i?(n.isOver||(n.isOver=1,s._parent=a.helper.parent(),n.currentItem=a.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return a.helper[0]},t.target=n.currentItem[0],n._mouseCapture(t,!0),n._mouseStart(t,!0,!0),n.offset.click.top=s.offset.click.top,n.offset.click.left=s.offset.click.left,n.offset.parent.left-=s.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=s.offset.parent.top-n.offset.parent.top,s._trigger("toSortable",t),s.dropped=n.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,n.fromOutside=s),n.currentItem&&(n._mouseDrag(t),a.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",t,n._uiHash(n)),n._mouseStop(t,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),a.helper.appendTo(s._parent),s._refreshOffsets(t),a.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,a,s){var i=e("body"),n=s.options;i.css("cursor")&&(n._cursor=i.css("cursor")),i.css("cursor",n.cursor)},stop:function(t,a,s){var i=s.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,a,s){var i=e(a.helper),n=s.options;i.css("opacity")&&(n._opacity=i.css("opacity")),i.css("opacity",n.opacity)},stop:function(t,a,s){var i=s.options;i._opacity&&e(a.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,a){a.scrollParentNotHidden||(a.scrollParentNotHidden=a.helper.scrollParent(!1)),a.scrollParentNotHidden[0]!==a.document[0]&&"HTML"!==a.scrollParentNotHidden[0].tagName&&(a.overflowOffset=a.scrollParentNotHidden.offset())},drag:function(t,a,s){var i=s.options,n=!1,r=s.scrollParentNotHidden[0],o=s.document[0];r!==o&&"HTML"!==r.tagName?(i.axis&&"x"===i.axis||(s.overflowOffset.top+r.offsetHeight-t.pageY<i.scrollSensitivity?r.scrollTop=n=r.scrollTop+i.scrollSpeed:t.pageY-s.overflowOffset.top<i.scrollSensitivity&&(r.scrollTop=n=r.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(s.overflowOffset.left+r.offsetWidth-t.pageX<i.scrollSensitivity?r.scrollLeft=n=r.scrollLeft+i.scrollSpeed:t.pageX-s.overflowOffset.left<i.scrollSensitivity&&(r.scrollLeft=n=r.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(o).scrollTop()<i.scrollSensitivity?n=e(o).scrollTop(e(o).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(o).scrollTop())<i.scrollSensitivity&&(n=e(o).scrollTop(e(o).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(o).scrollLeft()<i.scrollSensitivity?n=e(o).scrollLeft(e(o).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(o).scrollLeft())<i.scrollSensitivity&&(n=e(o).scrollLeft(e(o).scrollLeft()+i.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,a,s){var i=s.options;s.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),a=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:a.top,left:a.left})})},drag:function(t,a,s){var i,n,r,o,d,l,c,p,u,m,g=s.options,h=g.snapTolerance,v=a.offset.left,f=v+s.helperProportions.width,y=a.offset.top,b=y+s.helperProportions.height;for(u=s.snapElements.length-1;u>=0;u--)d=s.snapElements[u].left-s.margins.left,l=d+s.snapElements[u].width,c=s.snapElements[u].top-s.margins.top,p=c+s.snapElements[u].height,d-h>f||v>l+h||c-h>b||y>p+h||!e.contains(s.snapElements[u].item.ownerDocument,s.snapElements[u].item)?(s.snapElements[u].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[u].item})),s.snapElements[u].snapping=!1):("inner"!==g.snapMode&&(i=Math.abs(c-b)<=h,n=Math.abs(p-y)<=h,r=Math.abs(d-f)<=h,o=Math.abs(l-v)<=h,i&&(a.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),n&&(a.position.top=s._convertPositionTo("relative",{top:p,left:0}).top),r&&(a.position.left=s._convertPositionTo("relative",{top:0,left:d-s.helperProportions.width}).left),o&&(a.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),m=i||n||r||o,"outer"!==g.snapMode&&(i=Math.abs(c-y)<=h,n=Math.abs(p-b)<=h,r=Math.abs(d-v)<=h,o=Math.abs(l-f)<=h,i&&(a.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),n&&(a.position.top=s._convertPositionTo("relative",{top:p-s.helperProportions.height,left:0}).top),r&&(a.position.left=s._convertPositionTo("relative",{top:0,left:d}).left),o&&(a.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[u].snapping&&(i||n||r||o||m)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[u].item})),s.snapElements[u].snapping=i||n||r||o||m)}}),e.ui.plugin.add("draggable","stack",{start:function(t,a,s){var i,n=s.options,r=e.makeArray(e(n.stack)).sort(function(t,a){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(a).css("zIndex"),10)||0)});r.length&&(i=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,a,s){var i=e(a.helper),n=s.options;i.css("zIndex")&&(n._zIndex=i.css("zIndex")),i.css("zIndex",n.zIndex)},stop:function(t,a,s){var i=s.options;i._zIndex&&e(a.helper).css("zIndex",i._zIndex)}});e.ui.draggable;e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,a=this.options,s=a.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(a.scope),a.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,a){if("accept"===t)this.accept=e.isFunction(a)?a:function(e){return e.is(a)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(a)}this._super(t,a)},_activate:function(t){var a=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),a&&this._trigger("activate",t,this.ui(a))},_deactivate:function(t){var a=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),a&&this._trigger("deactivate",t,this.ui(a))},_over:function(t){var a=e.ui.ddmanager.current;a&&(a.currentItem||a.element)[0]!==this.element[0]&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(a)))},_out:function(t){var a=e.ui.ddmanager.current;a&&(a.currentItem||a.element)[0]!==this.element[0]&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(a)))},_drop:function(t,a){var s=a||e.ui.ddmanager.current,i=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var a=e(this).droppable("instance");return a.options.greedy&&!a.options.disabled&&a.options.scope===s.options.scope&&a.accept.call(a.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(a,{offset:a.element.offset()}),a.options.tolerance,t)?(i=!0,!1):void 0}),i?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,a){return e>=t&&t+a>e}return function(t,a,s,i){if(!a.offset)return!1;var n=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,o=n+t.helperProportions.width,d=r+t.helperProportions.height,l=a.offset.left,c=a.offset.top,p=l+a.proportions().width,u=c+a.proportions().height;switch(s){case"fit":return n>=l&&p>=o&&r>=c&&u>=d;case"intersect":return l<n+t.helperProportions.width/2&&o-t.helperProportions.width/2<p&&c<r+t.helperProportions.height/2&&d-t.helperProportions.height/2<u;case"pointer":return e(i.pageY,c,a.proportions().height)&&e(i.pageX,l,a.proportions().width);case"touch":return(r>=c&&u>=r||d>=c&&u>=d||c>r&&d>u)&&(n>=l&&p>=n||o>=l&&p>=o||l>n&&o>p);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,a){var s,i,n=e.ui.ddmanager.droppables[t.options.scope]||[],r=a?a.type:null,o=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;s<n.length;s++)if(!(n[s].options.disabled||t&&!n[s].accept.call(n[s].element[0],t.currentItem||t.element))){for(i=0;i<o.length;i++)if(o[i]===n[s].element[0]){n[s].proportions().height=0;continue e}n[s].visible="none"!==n[s].element.css("display"),n[s].visible&&("mousedown"===r&&n[s]._activate.call(n[s],a),n[s].offset=n[s].element.offset(),n[s].proportions({width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight}))}},drop:function(t,a){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,a)&&(s=this._drop.call(this,a)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,a)))}),s},dragStart:function(t,a){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,a)})},drag:function(t,a){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,a),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,i,n,r=e.ui.intersect(t,this,this.options.tolerance,a),o=!r&&this.isover?"isout":r&&!this.isover?"isover":null;o&&(this.options.greedy&&(i=this.options.scope,n=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===i}),n.length&&(s=e(n[0]).droppable("instance"),s.greedyChild="isover"===o)),s&&"isover"===o&&(s.isover=!1,s.isout=!0,s._out.call(s,a)),this[o]=!0,this["isout"===o?"isover":"isout"]=!1,this["isover"===o?"_over":"_out"].call(this,a),s&&"isout"===o&&(s.isout=!1,s.isover=!0,s._over.call(s,a)))}})},dragStop:function(t,a){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,a)}};e.ui.droppable;e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,a){if("hidden"===e(t).css("overflow"))return!1;var s=a&&"left"===a?"scrollLeft":"scrollTop",i=!1;return t[s]>0?!0:(t[s]=1,i=t[s]>0,t[s]=0,i)},_create:function(){var t,a,s,i,n,r=this,o=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},a=0;a<t.length;a++)s=e.trim(t[a]),n="ui-resizable-"+s,i=e("<div class='ui-resizable-handle "+n+"'></div>"),i.css({zIndex:o.zIndex}),"se"===s&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(i);
this._renderAxis=function(t){var a,s,i,n;t=t||this.element;for(a in this.handles)this.handles[a].constructor===String?this.handles[a]=this.element.children(this.handles[a]).first().show():(this.handles[a].jquery||this.handles[a].nodeType)&&(this.handles[a]=e(this.handles[a]),this._on(this.handles[a],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[a],this.element),n=/sw|ne|nw|se|n|s/.test(a)?s.outerHeight():s.outerWidth(),i=["padding",/ne|nw|n/.test(a)?"Top":/se|sw|s/.test(a)?"Bottom":/^e$/.test(a)?"Right":"Left"].join(""),t.css(i,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[a])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=i&&i[1]?i[1]:"se")}),o.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(e(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){o.disabled||r.resizing||(e(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,a=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(a(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_mouseCapture:function(t){var a,s,i=!1;for(a in this.handles)s=e(this.handles[a])[0],(s===t.target||e.contains(s,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var a,s,i,n=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),a=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(a+=e(n.containment).scrollLeft()||0,s+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:a,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:a,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var a,s,i=this.originalMousePosition,n=this.axis,r=t.pageX-i.left||0,o=t.pageY-i.top||0,d=this._change[n];return this._updatePrevProperties(),d?(a=d.apply(this,[t,r,o]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(a=this._updateRatio(a,t)),a=this._respectSize(a,t),this._updateCache(a),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var a,s,i,n,r,o,d,l=this.options,c=this;return this._helper&&(a=this._proportionallyResizeElements,s=a.length&&/textarea/i.test(a[0].nodeName),i=s&&this._hasScroll(a[0],"left")?0:c.sizeDiff.height,n=s?0:c.sizeDiff.width,r={width:c.helper.width()-n,height:c.helper.height()-i},o=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,d=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(e.extend(r,{top:d,left:o})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,a,s,i,n,r=this.options;n={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,a=n.maxHeight*this.aspectRatio,i=n.maxWidth/this.aspectRatio,t>n.minWidth&&(n.minWidth=t),s>n.minHeight&&(n.minHeight=s),a<n.maxWidth&&(n.maxWidth=a),i<n.maxHeight&&(n.maxHeight=i)),this._vBoundaries=n},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,a=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(a.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(a.height-e.height),e.left=t.left+(a.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,a=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,n=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,o=this.originalPosition.left+this.originalSize.width,d=this.position.top+this.size.height,l=/sw|nw|w/.test(a),c=/nw|ne|n/.test(a);return n&&(e.width=t.minWidth),r&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),n&&l&&(e.left=o-t.minWidth),s&&l&&(e.left=o-t.maxWidth),r&&c&&(e.top=d-t.minHeight),i&&c&&(e.top=d-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,a=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)a[t]=parseInt(s[t],10)||0,a[t]+=parseInt(i[t],10)||0;return{height:a[0]+a[2],width:a[1]+a[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,a=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:a.height()-this.outerDimensions.height||0,width:a.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,a=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var a=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:a.width-t}},n:function(e,t,a){var s=this.originalSize,i=this.originalPosition;return{top:i.top+a,height:s.height-a}},s:function(e,t,a){return{height:this.originalSize.height+a}},se:function(t,a,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,a,s]))},sw:function(t,a,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,a,s]))},ne:function(t,a,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,a,s]))},nw:function(t,a,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,a,s]))}},_propagate:function(t,a){e.ui.plugin.call(this,t,[a,this.ui()]),"resize"!==t&&this._trigger(t,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var a=e(this).resizable("instance"),s=a.options,i=a._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),r=n&&a._hasScroll(i[0],"left")?0:a.sizeDiff.height,o=n?0:a.sizeDiff.width,d={width:a.size.width-o,height:a.size.height-r},l=parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left)||null,c=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(d,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:s.width,height:s.height}),a._updateCache(s),a._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,a,s,i,n,r,o,d=e(this).resizable("instance"),l=d.options,c=d.element,p=l.containment,u=p instanceof e?p.get(0):/parent/.test(p)?c.parent().get(0):p;u&&(d.containerElement=e(u),/document/.test(p)||p===document?(d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(u),a=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){a[e]=d._num(t.css("padding"+s))}),d.containerOffset=t.offset(),d.containerPosition=t.position(),d.containerSize={height:t.innerHeight()-a[3],width:t.innerWidth()-a[1]},s=d.containerOffset,i=d.containerSize.height,n=d.containerSize.width,r=d._hasScroll(u,"left")?u.scrollWidth:n,o=d._hasScroll(u)?u.scrollHeight:i,d.parentData={element:u,left:s.left,top:s.top,width:r,height:o}))},resize:function(t){var a,s,i,n,r=e(this).resizable("instance"),o=r.options,d=r.containerOffset,l=r.position,c=r._aspectRatio||t.shiftKey,p={top:0,left:0},u=r.containerElement,m=!0;u[0]!==document&&/static/.test(u.css("position"))&&(p=d),l.left<(r._helper?d.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-d.left:r.position.left-p.left),c&&(r.size.height=r.size.width/r.aspectRatio,m=!1),r.position.left=o.helper?d.left:0),l.top<(r._helper?d.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-d.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio,m=!1),r.position.top=r._helper?d.top:0),i=r.containerElement.get(0)===r.element.parent().get(0),n=/relative|absolute/.test(r.containerElement.css("position")),i&&n?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),a=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-p.left:r.offset.left-d.left)),s=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-p.top:r.offset.top-d.top)),a+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-a,c&&(r.size.height=r.size.width/r.aspectRatio,m=!1)),s+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-s,c&&(r.size.width=r.size.height*r.aspectRatio,m=!1)),m||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),a=t.options,s=t.containerOffset,i=t.containerPosition,n=t.containerElement,r=e(t.helper),o=r.offset(),d=r.outerWidth()-t.sizeDiff.width,l=r.outerHeight()-t.sizeDiff.height;t._helper&&!a.animate&&/relative/.test(n.css("position"))&&e(this).css({left:o.left-i.left-s.left,width:d,height:l}),t._helper&&!a.animate&&/static/.test(n.css("position"))&&e(this).css({left:o.left-i.left-s.left,width:d,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),a=t.options;e(a.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,a){var s=e(this).resizable("instance"),i=s.options,n=s.originalSize,r=s.originalPosition,o={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-r.top||0,left:s.position.left-r.left||0};e(i.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),i={},n=t.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(n,function(e,t){var a=(s[t]||0)+(o[t]||0);a&&a>=0&&(i[t]=a||null)}),t.css(i)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),a=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof a.ghost?a.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,a=e(this).resizable("instance"),s=a.options,i=a.size,n=a.originalSize,r=a.originalPosition,o=a.axis,d="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=d[0]||1,c=d[1]||1,p=Math.round((i.width-n.width)/l)*l,u=Math.round((i.height-n.height)/c)*c,m=n.width+p,g=n.height+u,h=s.maxWidth&&s.maxWidth<m,v=s.maxHeight&&s.maxHeight<g,f=s.minWidth&&s.minWidth>m,y=s.minHeight&&s.minHeight>g;s.grid=d,f&&(m+=l),y&&(g+=c),h&&(m-=l),v&&(g-=c),/^(se|s|e)$/.test(o)?(a.size.width=m,a.size.height=g):/^(ne)$/.test(o)?(a.size.width=m,a.size.height=g,a.position.top=r.top-u):/^(sw)$/.test(o)?(a.size.width=m,a.size.height=g,a.position.left=r.left-p):((0>=g-c||0>=m-l)&&(t=a._getPaddingPlusBorderDimensions(this)),g-c>0?(a.size.height=g,a.position.top=r.top-u):(g=c-t.height,a.size.height=g,a.position.top=r.top+n.height-g),m-l>0?(a.size.width=m,a.position.left=r.left-p):(m=l-t.width,a.size.width=m,a.position.left=r.left+n.width-m))}});e.ui.resizable,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,a=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(a.options.filter,a.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),a=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:a.left,top:a.top,right:a.left+t.outerWidth(),bottom:a.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var a=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,a._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,i=e.data(this,"selectable-item");return i?(s=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),i.unselecting=!s,i.selecting=s,i.selected=s,s?a._trigger("selecting",t,{selecting:i.element}):a._trigger("unselecting",t,{unselecting:i.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var a,s=this,i=this.options,n=this.opos[0],r=this.opos[1],o=t.pageX,d=t.pageY;return n>o&&(a=o,o=n,n=a),r>d&&(a=d,d=r,r=a),this.helper.css({left:n,top:r,width:o-n,height:d-r}),this.selectees.each(function(){var a=e.data(this,"selectable-item"),l=!1;a&&a.element!==s.element[0]&&("touch"===i.tolerance?l=!(a.left>o||a.right<n||a.top>d||a.bottom<r):"fit"===i.tolerance&&(l=a.left>n&&a.right<o&&a.top>r&&a.bottom<d),l?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,s._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),s._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&(t.metaKey||t.ctrlKey||a.startselected||(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,s._trigger("unselecting",t,{unselecting:a.element})))))}),!1}},_mouseStop:function(t){var a=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,a._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,a._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,a){return e>=t&&t+a>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,a){var s=null,i=!1,n=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")===n?(s=e(this),!1):void 0}),e.data(t.target,n.widgetName+"-item")===n&&(s=e(t.target)),s&&(!this.options.handle||a||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i))?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,a,s){var i,n,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(n)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var a,s,i,n,r=this.options,o=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-this.document.scrollTop()<r.scrollSensitivity?o=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity&&(o=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),t.pageX-this.document.scrollLeft()<r.scrollSensitivity?o=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(o=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),o!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a=this.items.length-1;a>=0;a--)if(s=this.items[a],i=s.item[0],n=this._intersectsWithPointer(s),n&&s.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===n?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,a){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,i=this.placeholder.offset(),n=this.options.axis,r={};n&&"x"!==n||(r.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(r.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,a);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var a=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(a).each(function(){var a=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);a&&s.push((t.key||a[1]+"[]")+"="+(t.key&&t.expression?a[1]:a[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var a=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},a.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,a=t+this.helperProportions.width,s=this.positionAbs.top,i=s+this.helperProportions.height,n=e.left,r=n+e.width,o=e.top,d=o+e.height,l=this.offset.click.top,c=this.offset.click.left,p="x"===this.options.axis||s+l>o&&d>s+l,u="y"===this.options.axis||t+c>n&&r>t+c,m=p&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?m:n<t+this.helperProportions.width/2&&a-this.helperProportions.width/2<r&&o<s+this.helperProportions.height/2&&i-this.helperProportions.height/2<d},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&a,i=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return s?this.floating?n&&"right"===n||"down"===i?2:1:i&&("down"===i?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&a||"left"===i&&!a:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function a(){o.push(this)}var s,i,n,r,o=[],d=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(n=e(l[s],this.document[0]),i=n.length-1;i>=0;i--)r=e.data(n[i],this.widgetFullName),r&&r!==this&&!r.options.disabled&&d.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(d.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=d.length-1;s>=0;s--)d[s][0].each(a);return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var a=0;a<t.length;a++)if(t[a]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var a,s,i,n,r,o,d,l,c=this.items,p=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(a=u.length-1;a>=0;a--)for(i=e(u[a],this.document[0]),s=i.length-1;s>=0;s--)n=e.data(i[s],this.widgetFullName),n&&n!==this&&!n.options.disabled&&(p.push([e.isFunction(n.options.items)?n.options.items.call(n.element[0],t,{item:this.currentItem}):e(n.options.items,n.element),n]),this.containers.push(n));for(a=p.length-1;a>=0;a--)for(r=p[a][1],o=p[a][0],s=0,l=o.length;l>s;s++)d=e(o[s]),d.data(this.widgetName+"-item",r),c.push({item:d,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var a,s,i,n;for(a=this.items.length-1;a>=0;a--)s=this.items[a],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=i.outerWidth(),s.height=i.outerHeight()),n=i.offset(),s.left=n.left,s.top=n.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(a=this.containers.length-1;a>=0;a--)n=this.containers[a].element.offset(),this.containers[a].containerCache.left=n.left,this.containers[a].containerCache.top=n.top,this.containers[a].containerCache.width=this.containers[a].element.outerWidth(),this.containers[a].containerCache.height=this.containers[a].element.outerHeight();
return this},_createPlaceholder:function(t){t=t||this;var a,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(a=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+s+">",t.document[0]).addClass(a||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===s?t._createTrPlaceholder(t.currentItem,i):"img"===s&&i.attr("src",t.currentItem.attr("src")),a||i.css("visibility","hidden"),i},update:function(e,i){(!a||s.forcePlaceholderSize)&&(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,a){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(a)})},_contactContainers:function(t){var a,s,i,n,r,o,d,l,c,p,u=null,m=null;for(a=this.containers.length-1;a>=0;a--)if(!e.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(u&&e.contains(this.containers[a].element[0],u.element[0]))continue;u=this.containers[a],m=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",t,this._uiHash(this)),this.containers[a].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(i=1e4,n=null,c=u.floating||this._isFloating(this.currentItem),r=c?"left":"top",o=c?"width":"height",p=c?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[m].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(d=this.items[s].item.offset()[r],l=!1,t[p]-d>this.items[s][o]/2&&(l=!0),Math.abs(t[p]-d)<i&&(i=Math.abs(t[p]-d),n=this.items[s],this.direction=l?"up":"down"));if(!n&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return void(this.currentContainer.containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));n?this._rearrange(t,n,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var a=this.options,s=e.isFunction(a.helper)?e(a.helper.apply(this.element[0],[t,this.currentItem])):"clone"===a.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==a.appendTo?a.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||a.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||a.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,a,s,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],a=e(i.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[a.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,a.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,a){a||(a=this.position);var s="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(i[0].tagName);return{top:a.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:i.scrollTop())*s,left:a.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:i.scrollLeft())*s}},_generatePosition:function(t){var a,s,i=this.options,n=t.pageX,r=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid&&(a=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1],r=this.containment?a-this.offset.click.top>=this.containment[1]&&a-this.offset.click.top<=this.containment[3]?a:a-this.offset.click.top>=this.containment[1]?a-i.grid[1]:a+i.grid[1]:a,s=this.originalPageX+Math.round((n-this.originalPageX)/i.grid[0])*i.grid[0],n=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-i.grid[0]:s+i.grid[0]:s)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():d?0:o.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():d?0:o.scrollLeft())}},_rearrange:function(e,t,a,s){a?a[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function a(e,t,a){return function(s){a._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||i.push(a("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(i.push(a("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;s<i.length;s++)i[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var a=t||this;return{helper:a.helper,placeholder:a.placeholder||e([]),position:a.position,originalPosition:a.originalPosition,offset:a.positionAbs,item:a.currentItem,sender:t?t.element:null}}}),e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t))))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var a=e.ui.keyCode,s=this.headers.length,i=this.headers.index(t.target),n=!1;switch(t.keyCode){case a.RIGHT:case a.DOWN:n=this.headers[(i+1)%s];break;case a.LEFT:case a.UP:n=this.headers[(i-1+s)%s];break;case a.SPACE:case a.ENTER:this._eventHandler(t);break;case a.HOME:n=this.headers[0];break;case a.END:n=this.headers[s-1]}n&&(e(t.target).attr("tabIndex",-1),e(n).attr("tabIndex",0),n.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,a=this.options,s=a.heightStyle,i=this.element.parent();this.active=this._findActive(a.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),a=t.uniqueId().attr("id"),s=t.next(),i=s.uniqueId().attr("id");t.attr("aria-controls",i),s.attr("aria-labelledby",a)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(a.event),"fill"===s?(t=i.height(),this.element.siblings(":visible").each(function(){var a=e(this),s=a.css("position");"absolute"!==s&&"fixed"!==s&&(t-=a.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var a=this._findActive(t)[0];a!==this.active[0]&&(a=a||this.active[0],this._eventHandler({target:a,currentTarget:a,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var a={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){a[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,a),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var a=this.options,s=this.active,i=e(t.currentTarget),n=i[0]===s[0],r=n&&a.collapsible,o=r?e():i.next(),d=s.next(),l={oldHeader:s,oldPanel:d,newHeader:r?e():i,newPanel:o};t.preventDefault(),n&&!a.collapsible||this._trigger("beforeActivate",t,l)===!1||(a.active=r?!1:this.headers.index(i),this.active=n?e():i,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),a.icons&&s.children(".ui-accordion-header-icon").removeClass(a.icons.activeHeader).addClass(a.icons.header),n||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),a.icons&&i.children(".ui-accordion-header-icon").removeClass(a.icons.header).addClass(a.icons.activeHeader),i.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var a=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=a,this.prevHide=s,this.options.animate?this._animate(a,s,t):(s.hide(),a.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):a.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),a.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,a){var s,i,n,r=this,o=0,d=e.css("box-sizing"),l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},p=l&&c.down||c,u=function(){r._toggleComplete(a)};return"number"==typeof p&&(n=p),"string"==typeof p&&(i=p),i=i||p.easing||c.easing,n=n||p.duration||c.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:n,easing:i,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:n,easing:i,complete:u,step:function(e,a){a.now=Math.round(e),"height"!==a.prop?"content-box"===d&&(o+=a.now):"content"!==r.options.heightStyle&&(a.now=Math.round(s-t.outerHeight()-o),o=0)}})):t.animate(this.hideProps,n,i,u):e.animate(this.showProps,n,i,u)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var a=e(t.target);!this.mouseHandled&&a.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),a.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var a=e(t.currentTarget);a.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,a)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var a=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,a)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var a,s,i,n,r=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:r=!1,s=this.previousFilter||"",i=String.fromCharCode(t.keyCode),n=!1,clearTimeout(this.filterTimer),i===s?n=!0:i=s+i,a=this._filterMenuItems(i),a=n&&-1!==a.index(this.active.next())?this.active.nextAll(".ui-menu-item"):a,a.length||(i=String.fromCharCode(t.keyCode),a=this._filterMenuItems(i)),a.length?(this.focus(t,a),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}r&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,a,s=this,i=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),a=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);a.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",a.attr("id"))}),t=n.add(this.element),a=t.find(this.options.items),a.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),a.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),a.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var a,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),a=t.children(".ui-menu"),a.length&&e&&/^mouse/.test(e.type)&&this._startOpening(a),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var a,s,i,n,r,o;this._hasScroll()&&(a=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-a-s,n=this.activeMenu.scrollTop(),r=this.activeMenu.height(),o=t.outerHeight(),0>i?this.activeMenu.scrollTop(n+i):i+o>r&&this.activeMenu.scrollTop(n+i-r+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var a=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(a)},collapseAll:function(t,a){clearTimeout(this.timer),this.timer=this._delay(function(){var s=a?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,a){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(a,s)},nextPage:function(t){var a,s,i;return this.active?void(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return a=e(this),a.offset().top-s-i<0}),this.focus(t,a)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var a,s,i;return this.active?void(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return a=e(this),a.offset().top-s+i>0}),this.focus(t,a)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var a={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,a)},_filterMenuItems:function(t){var a=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=new RegExp("^"+a,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}});e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,a,s,i=this.element[0].nodeName.toLowerCase(),n="textarea"===i,r="input"===i;this.isMultiLine=n?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[n||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly"))return t=!0,s=!0,void(a=!0);t=!1,s=!1,a=!1;var n=e.ui.keyCode;switch(i.keyCode){case n.PAGE_UP:t=!0,this._move("previousPage",i);break;case n.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case n.UP:t=!0,this._keyEvent("previous",i);break;case n.DOWN:t=!0,this._keyEvent("next",i);break;case n.ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case n.TAB:this.menu.active&&this.menu.select(i);break;case n.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(i),i.preventDefault());break;default:a=!0,this._searchTimeout(i)}},keypress:function(s){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault());if(!a){var i=e.ui.keyCode;switch(s.keyCode){case i.PAGE_UP:this._move("previousPage",s);break;case i.PAGE_DOWN:this._move("nextPage",s);break;case i.UP:this._keyEvent("previous",s);break;case i.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var a=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===a||e.contains(a,s.target)||t.close()})})},menufocus:function(t,a){var s,i;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)})):(i=a.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),s=a.item.attr("aria-label")||i.value,void(s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion))))
},menuselect:function(e,t){var a=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=a})),!1!==this._trigger("select",e,{item:a})&&this._value(a.value),this.term=this._value(),this.close(e),this.selectedItem=a}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,a,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(a,s){s(e.ui.autocomplete.filter(t,a.term))}):"string"==typeof this.options.source?(a=this.options.source,this.source=function(t,i){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:a,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),a=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!a&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var a=this.menu.element.empty();this._renderMenu(a,t),this.isNewMenu=!0,this.menu.refresh(),a.show(),this._resizeMenu(),a.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,a){var s=this;e.each(a,function(e,a){s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,a){return e("<li>").text(a.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,a){var s=new RegExp(e.ui.autocomplete.escapeRegex(a),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var a;this._superApply(arguments),this.options.disabled||this.cancelSearch||(a=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(a).appendTo(this.liveRegion))}});var u,m=(e.ui.autocomplete,"ui-button ui-widget ui-state-default ui-corner-all"),g="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},v=function(t){var a=t.name,s=t.form,i=e([]);return a&&(a=a.replace(/'/g,"\\'"),i=s?e(s).find("[name='"+a+"'][type=radio]"):e("[name='"+a+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,a=this.options,s="checkbox"===this.type||"radio"===this.type,i=s?"":"ui-state-active";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(m).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===u&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(i)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];v(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),u=this,void t.document.one("mouseup",function(){u=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,a;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),a=this.element.is(":checked"),a&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(m+" ui-state-active "+g).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("checkbox"===this.type||"radio"===this.type?"ui-state-focus":"ui-state-focus ui-state-active"))):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?v(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(g),a=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,i=s.primary&&s.secondary,n=[];s.primary||s.secondary?(this.options.text&&n.push("ui-button-text-icon"+(i?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(n.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(a)))):n.push("ui-button-text-only"),t.addClass(n.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),a=this.element.find(this.options.items),s=a.filter(":ui-button");a.not(":ui-button").button(),s.button("refresh"),this.buttons=a.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});e.ui.button;e.extend(e.ui,{datepicker:{version:"1.11.4"}});var f;e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,a){var s,i,n;s=t.nodeName.toLowerCase(),i="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),n=this._newInst(e(t),i),n.settings=e.extend({},a||{}),"input"===s?this._connectDatepicker(t,n):i&&this._inlineDatepicker(t,n)},_newInst:function(t,a){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:a,dpDiv:a?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,a){var s=e(t);a.append=e([]),a.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,a),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(a),e.data(t,"datepicker",a),a.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,a){var s,i,n,r=this._get(a,"appendText"),o=this._get(a,"isRTL");a.append&&a.append.remove(),r&&(a.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[o?"before":"after"](a.append)),t.unbind("focus",this._showDatepicker),a.trigger&&a.trigger.remove(),s=this._get(a,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(i=this._get(a,"buttonText"),n=this._get(a,"buttonImage"),a.trigger=e(this._get(a,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:n,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(n?e("<img/>").attr({src:n,alt:i,title:i}):i)),t[o?"before":"after"](a.trigger),a.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,a,s,i,n=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(a=0,s=0,i=0;i<e.length;i++)e[i].length>a&&(a=e[i].length,s=i);return s},n.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),e.input.attr("size",this._formatDate(e,n).length)}},_inlineDatepicker:function(t,a){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(a.dpDiv),e.data(t,"datepicker",a),this._setDate(a,this._getDefaultDate(a),!0),this._updateDatepicker(a),this._updateAlternate(a),a.settings.disabled&&this._disableDatepicker(t),a.dpDiv.css("display","block"))},_dialogDatepicker:function(t,a,s,i,n){var r,d,l,c,p,u=this._dialogInst;return u||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),u=this._dialogInst=this._newInst(this._dialogInput,!1),u.settings={},e.data(this._dialogInput[0],"datepicker",u)),o(u.settings,i||{}),a=a&&a.constructor===Date?this._formatDate(u,a):a,this._dialogInput.val(a),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(d=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,p=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[d/2-100+c,l/2-150+p]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",u),this},_destroyDatepicker:function(t){var a,s=e(t),i=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(a=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===a?(i.append.remove(),i.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===a||"span"===a)&&s.removeClass(this.markerClassName).empty(),f===i&&(f=null))},_enableDatepicker:function(t){var a,s,i=e(t),n=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(a=t.nodeName.toLowerCase(),"input"===a?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===a||"span"===a)&&(s=i.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var a,s,i=e(t),n=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(a=t.nodeName.toLowerCase(),"input"===a?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===a||"span"===a)&&(s=i.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(a){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,a,s){var i,n,r,d,l=this._getInst(t);return 2===arguments.length&&"string"==typeof a?"defaults"===a?e.extend({},e.datepicker._defaults):l?"all"===a?e.extend({},l.settings):this._get(l,a):null:(i=a||{},"string"==typeof a&&(i={},i[a]=s),void(l&&(this._curInst===l&&this._hideDatepicker(),n=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(l,"min"),d=this._getMinMaxDate(l,"max"),o(l.settings,i),null!==r&&void 0!==i.dateFormat&&void 0===i.minDate&&(l.settings.minDate=this._formatDate(l,r)),null!==d&&void 0!==i.dateFormat&&void 0===i.maxDate&&(l.settings.maxDate=this._formatDate(l,d)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,n),this._updateAlternate(l),this._updateDatepicker(l))))},_changeDatepicker:function(e,t,a){this._optionDatepicker(e,t,a)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var a=this._getInst(e);a&&(this._setDate(a,t),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(e,t){var a=this._getInst(e);return a&&!a.inline&&this._setDateFromField(a,t),a?this._getDate(a):null},_doKeyDown:function(t){var a,s,i,n=e.datepicker._getInst(t.target),r=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",n.dpDiv),i[0]&&e.datepicker._selectDay(t.target,n.selectedMonth,n.selectedYear,i[0]),a=e.datepicker._get(n,"onSelect"),a?(s=e.datepicker._formatDate(n),a.apply(n.input?n.input[0]:null,[s,n])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var a,s,i=e.datepicker._getInst(t.target);return e.datepicker._get(i,"constrainInput")?(a=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!a||a.indexOf(s)>-1):void 0},_doKeyUp:function(t){var a,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{a=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),a&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(i){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var a,i,n,r,d,l,c;a=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==a&&(e.datepicker._curInst.dpDiv.stop(!0,!0),a&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),i=e.datepicker._get(a,"beforeShow"),n=i?i.apply(t,[t,a]):{},n!==!1&&(o(a.settings,n),a.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(a),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),d={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,a.dpDiv.empty(),a.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(a),d=e.datepicker._checkOffset(a,d,r),a.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"}),a.inline||(l=e.datepicker._get(a,"showAnim"),c=e.datepicker._get(a,"duration"),a.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?a.dpDiv.show(l,e.datepicker._get(a,"showOptions"),c):a.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(a)&&a.input.focus(),e.datepicker._curInst=a))}},_updateDatepicker:function(t){this.maxRows=4,f=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var a,s=this._getNumberOfMonths(t),i=s[1],n=17,o=t.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&r.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",n*i+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(a=t.yearshtml,setTimeout(function(){a===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),a=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,a,s){var i=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,d=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return a.left-=this._get(t,"isRTL")?i-r:0,a.left-=s&&a.left===t.input.offset().left?e(document).scrollLeft():0,a.top-=s&&a.top===t.input.offset().top+o?e(document).scrollTop():0,a.left-=Math.min(a.left,a.left+i>d&&d>i?Math.abs(a.left+i-d):0),a.top-=Math.min(a.top,a.top+n>l&&l>n?Math.abs(n+o):0),a},_findPos:function(t){for(var a,s=this._getInst(t),i=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return a=e(t).offset(),[a.left,a.top]},_hideDatepicker:function(t){var a,s,i,n,r=this._curInst;!r||t&&r!==e.data(t,"datepicker")||this._datepickerShowing&&(a=this._get(r,"showAnim"),s=this._get(r,"duration"),i=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[a]||e.effects[a])?r.dpDiv.hide(a,e.datepicker._get(r,"showOptions"),s,i):r.dpDiv["slideDown"===a?"slideUp":"fadeIn"===a?"fadeOut":"hide"](a?s:null,i),a||i(),this._datepickerShowing=!1,n=this._get(r,"onClose"),n&&n.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var a=e(t.target),s=e.datepicker._getInst(a[0]);(a[0].id!==e.datepicker._mainDivId&&0===a.parents("#"+e.datepicker._mainDivId).length&&!a.hasClass(e.datepicker.markerClassName)&&!a.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||a.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,a,s){var i=e(t),n=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(n,a+("M"===s?this._get(n,"showCurrentAtPos"):0),s),this._updateDatepicker(n))},_gotoToday:function(t){var a,s=e(t),i=this._getInst(s[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(a=new Date,i.selectedDay=a.getDate(),i.drawMonth=i.selectedMonth=a.getMonth(),i.drawYear=i.selectedYear=a.getFullYear()),this._notifyChange(i),this._adjustDate(s)},_selectMonthYear:function(t,a,s){var i=e(t),n=this._getInst(i[0]);n["selected"+("M"===s?"Month":"Year")]=n["draw"+("M"===s?"Month":"Year")]=parseInt(a.options[a.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(i)},_selectDay:function(t,a,s,i){var n,r=e(t);e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(n=this._getInst(r[0]),n.selectedDay=n.currentDay=e("a",i).html(),n.selectedMonth=n.currentMonth=a,n.selectedYear=n.currentYear=s,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){var a=e(t);this._selectDate(a,"")},_selectDate:function(t,a){var s,i=e(t),n=this._getInst(i[0]);a=null!=a?a:this._formatDate(n),n.input&&n.input.val(a),this._updateAlternate(n),s=this._get(n,"onSelect"),s?s.apply(n.input?n.input[0]:null,[a,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var a,s,i,n=this._get(t,"altField");n&&(a=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),i=this.formatDate(a,s,this._getFormatConfig(t)),e(n).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,a=new Date(e.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),t=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((t-a)/864e5)/7)+1},parseDate:function(t,a,s){if(null==t||null==a)throw"Invalid arguments";if(a="object"==typeof a?a.toString():a+"",""===a)return null;var i,n,r,o,d=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),p=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,u=(s?s.dayNames:null)||this._defaults.dayNames,m=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,g=(s?s.monthNames:null)||this._defaults.monthNames,h=-1,v=-1,f=-1,y=-1,b=!1,w=function(e){var a=i+1<t.length&&t.charAt(i+1)===e;return a&&i++,a},_=function(e){var t=w(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i="y"===e?s:1,n=new RegExp("^\\d{"+i+","+s+"}"),r=a.substring(d).match(n);if(!r)throw"Missing number at position "+d;return d+=r[0].length,parseInt(r[0],10)},x=function(t,s,i){var n=-1,r=e.map(w(t)?i:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(r,function(e,t){var s=t[1];return a.substr(d,s.length).toLowerCase()===s.toLowerCase()?(n=t[0],d+=s.length,!1):void 0}),-1!==n)return n+1;throw"Unknown name at position "+d},k=function(){if(a.charAt(d)!==t.charAt(i))throw"Unexpected literal at position "+d;d++};for(i=0;i<t.length;i++)if(b)"'"!==t.charAt(i)||w("'")?k():b=!1;else switch(t.charAt(i)){case"d":f=_("d");break;case"D":x("D",p,u);break;case"o":y=_("o");break;case"m":v=_("m");break;case"M":v=x("M",m,g);break;case"y":h=_("y");break;case"@":o=new Date(_("@")),h=o.getFullYear(),v=o.getMonth()+1,f=o.getDate();break;case"!":o=new Date((_("!")-this._ticksTo1970)/1e4),h=o.getFullYear(),v=o.getMonth()+1,f=o.getDate();break;case"'":w("'")?k():b=!0;break;default:k()}if(d<a.length&&(r=a.substr(d),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===h?h=(new Date).getFullYear():100>h&&(h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=h?0:-100)),y>-1)for(v=1,f=y;;){if(n=this._getDaysInMonth(h,v-1),n>=f)break;v++,f-=n}if(o=this._daylightSavingAdjust(new Date(h,v-1,f)),o.getFullYear()!==h||o.getMonth()+1!==v||o.getDate()!==f)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,a){if(!t)return"";var s,i=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,n=(a?a.dayNames:null)||this._defaults.dayNames,r=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,o=(a?a.monthNames:null)||this._defaults.monthNames,d=function(t){var a=s+1<e.length&&e.charAt(s+1)===t;return a&&s++,a},l=function(e,t,a){var s=""+t;if(d(e))for(;s.length<a;)s="0"+s;return s},c=function(e,t,a,s){return d(e)?s[t]:a[t]},p="",u=!1;if(t)for(s=0;s<e.length;s++)if(u)"'"!==e.charAt(s)||d("'")?p+=e.charAt(s):u=!1;else switch(e.charAt(s)){case"d":p+=l("d",t.getDate(),2);break;case"D":p+=c("D",t.getDay(),i,n);break;case"o":p+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":p+=l("m",t.getMonth()+1,2);break;case"M":p+=c("M",t.getMonth(),r,o);break;case"y":p+=d("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":p+=t.getTime();break;case"!":p+=1e4*t.getTime()+this._ticksTo1970;break;case"'":d("'")?p+="'":u=!0;break;default:p+=e.charAt(s)}return p},_possibleChars:function(e){var t,a="",s=!1,i=function(a){var s=t+1<e.length&&e.charAt(t+1)===a;return s&&t++,s};for(t=0;t<e.length;t++)if(s)"'"!==e.charAt(t)||i("'")?a+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":a+="0123456789";break;case"D":case"M":return null;case"'":i("'")?a+="'":s=!0;break;default:a+=e.charAt(t)}return a},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var a=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),n=i,r=this._getFormatConfig(e);
try{n=this.parseDate(a,s,r)||i}catch(o){s=t?"":s}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=s?n.getDate():0,e.currentMonth=s?n.getMonth():0,e.currentYear=s?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,a,s){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},n=function(a){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),a,e.datepicker._getFormatConfig(t))}catch(s){}for(var i=(a.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=i.getFullYear(),r=i.getMonth(),o=i.getDate(),d=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=d.exec(a);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r))}l=d.exec(a)}return new Date(n,r,o)},r=null==a||""===a?s:"string"==typeof a?n(a):"number"==typeof a?isNaN(a)?s:i(a):new Date(a.getTime());return r=r&&"Invalid Date"===r.toString()?s:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,a){var s=!t,i=e.selectedMonth,n=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),i===e.selectedMonth&&n===e.selectedYear||a||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var a=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-a,"M")},next:function(){e.datepicker._adjustDate(s,+a,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,a,s,i,n,r,o,d,l,c,p,u,m,g,h,v,f,y,b,w,_,x,k,P,S,O,A,C,D,T,M,j,L,E,I,$,R,F,N,q=new Date,B=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),H=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),U=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),X=1!==V[0]||1!==V[1],J=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),K=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),Q=e.drawMonth-Y,et=e.drawYear;if(0>Q&&(Q+=12,et--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-V[0]*V[1]+1,Z.getDate())),t=K&&K>t?K:t;this._daylightSavingAdjust(new Date(et,Q,1))>t;)Q--,0>Q&&(Q=11,et--);for(e.drawMonth=Q,e.drawYear=et,a=this._get(e,"prevText"),a=U?this.formatDate(a,this._daylightSavingAdjust(new Date(et,Q-G,1)),this._getFormatConfig(e)):a,s=this._canAdjustMonth(e,-1,et,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+a+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+a+"</span></a>",i=this._get(e,"nextText"),i=U?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Q+G,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,1,et,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+i+"</span></a>",r=this._get(e,"currentText"),o=this._get(e,"gotoCurrent")&&e.currentDay?J:B,r=U?this.formatDate(r,o,this._getFormatConfig(e)):r,d=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(H?d:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(H?"":d)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,p=this._get(e,"showWeek"),u=this._get(e,"dayNames"),m=this._get(e,"dayNamesMin"),g=this._get(e,"monthNames"),h=this._get(e,"monthNamesShort"),v=this._get(e,"beforeShowDay"),f=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",x=0;x<V[0];x++){for(k="",this.maxRows=4,P=0;P<V[1];P++){if(S=this._daylightSavingAdjust(new Date(et,Q,e.selectedDay)),O=" ui-corner-all",A="",X){if(A+="<div class='ui-datepicker-group",V[1]>1)switch(P){case 0:A+=" ui-datepicker-group-first",O=" ui-corner-"+(H?"right":"left");break;case V[1]-1:A+=" ui-datepicker-group-last",O=" ui-corner-"+(H?"left":"right");break;default:A+=" ui-datepicker-group-middle",O=""}A+="'>"}for(A+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+O+"'>"+(/all|left/.test(O)&&0===x?H?n:s:"")+(/all|right/.test(O)&&0===x?H?s:n:"")+this._generateMonthYearHeader(e,Q,et,K,Z,x>0||P>0,g,h)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=p?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",_=0;7>_;_++)D=(_+c)%7,C+="<th scope='col'"+((_+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[D]+"'>"+m[D]+"</span></th>";for(A+=C+"</tr></thead><tbody>",T=this._getDaysInMonth(et,Q),et===e.selectedYear&&Q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,T)),M=(this._getFirstDayOfMonth(et,Q)-c+7)%7,j=Math.ceil((M+T)/7),L=X&&this.maxRows>j?this.maxRows:j,this.maxRows=L,E=this._daylightSavingAdjust(new Date(et,Q,1-M)),I=0;L>I;I++){for(A+="<tr>",$=p?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(E)+"</td>":"",_=0;7>_;_++)R=v?v.apply(e.input?e.input[0]:null,[E]):[!0,""],F=E.getMonth()!==Q,N=F&&!y||!R[0]||K&&K>E||Z&&E>Z,$+="<td class='"+((_+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(E.getTime()===S.getTime()&&Q===e.selectedMonth&&e._keyEvent||b.getTime()===E.getTime()&&b.getTime()===S.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!f?"":" "+R[1]+(E.getTime()===J.getTime()?" "+this._currentClass:"")+(E.getTime()===B.getTime()?" ui-datepicker-today":""))+"'"+(F&&!f||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(F&&!f?"&#xa0;":N?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===B.getTime()?" ui-state-highlight":"")+(E.getTime()===J.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);A+=$+"</tr>"}Q++,Q>11&&(Q=0,et++),A+="</tbody></table>"+(X?"</div>"+(V[0]>0&&P===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=A}w+=k}return w+=l,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,a,s,i,n,r,o){var d,l,c,p,u,m,g,h,v=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(n||!v)w+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(d=s&&s.getFullYear()===a,l=i&&i.getFullYear()===a,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!d||c>=s.getMonth())&&(!l||c<=i.getMonth())&&(w+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+o[c]+"</option>");w+="</select>"}if(y||(b+=w+(!n&&v&&f?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!f)b+="<span class='ui-datepicker-year'>"+a+"</span>";else{for(p=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),m=function(e){var t=e.match(/c[+\-].*/)?a+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t},g=m(p[0]),h=Math.max(g,m(p[1]||"")),g=s?Math.max(g,s.getFullYear()):g,h=i?Math.min(h,i.getFullYear()):h,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";h>=g;g++)e.yearshtml+="<option value='"+g+"'"+(g===a?" selected='selected'":"")+">"+g+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!n&&v&&f?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,a){var s=e.drawYear+("Y"===a?t:0),i=e.drawMonth+("M"===a?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(s,i))+("D"===a?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,i,n)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===a||"Y"===a)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var a=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),i=a&&a>t?a:t;return s&&i>s?s:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,a,s){var i=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(a,s+(0>t?t:i[0]*i[1]),1));return 0>t&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var a,s,i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=null,o=null,d=this._get(e,"yearRange");return d&&(a=d.split(":"),s=(new Date).getFullYear(),r=parseInt(a[0],10),o=parseInt(a[1],10),a[0].match(/[+\-].*/)&&(r+=s),a[1].match(/[+\-].*/)&&(o+=s)),(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())&&(!r||t.getFullYear()>=r)&&(!o||t.getFullYear()<=o)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,a,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,a,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var a=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(a)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(a)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(a))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4";var y=(e.datepicker,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var a=e(this).css(t).offset().top;0>a&&e(this).css("top",t.top-a)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var a,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{a=this.document[0].activeElement,a&&"body"!==a.nodeName.toLowerCase()&&e(a).blur()}catch(i){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,a){var s=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),n=Math.max.apply(null,i);return n>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",n+1),s=!0),s&&!a&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function a(){var t=this.document[0].activeElement,a=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);a||this._focusTabbable()}t.preventDefault(),a.call(this),this._delay(a)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var a=this.uiDialog.find(":tabbable"),s=a.filter(":first"),i=a.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){i.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,a=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(a)||e.isArray(a)&&!a.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(a,function(a,s){var i,n;s=e.isFunction(s)?{click:s,text:a}:s,s=e.extend({type:"button"},s),i=s.click,s.click=function(){i.apply(t.element[0],arguments)},n={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(n).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var a=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,i){e(this).addClass("ui-dialog-dragging"),a._blockFrames(),a._trigger("dragStart",s,t(i))},drag:function(e,s){a._trigger("drag",e,t(s))},stop:function(i,n){var r=n.offset.left-a.document.scrollLeft(),o=n.offset.top-a.document.scrollTop();s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(o>=0?"+":"")+o,of:a.window},e(this).removeClass("ui-dialog-dragging"),a._unblockFrames(),a._trigger("dragStop",i,t(n))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var a=this,s=this.options,i=s.resizable,n=this.uiDialog.css("position"),r="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:r,start:function(s,i){e(this).addClass("ui-dialog-resizing"),a._blockFrames(),a._trigger("resizeStart",s,t(i))},resize:function(e,s){a._trigger("resize",e,t(s))},stop:function(i,n){var r=a.uiDialog.offset(),o=r.left-a.document.scrollLeft(),d=r.top-a.document.scrollTop();s.height=a.uiDialog.height(),s.width=a.uiDialog.width(),s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(d>=0?"+":"")+d,of:a.window},e(this).removeClass("ui-dialog-resizing"),a._unblockFrames(),a._trigger("resizeStop",i,t(n))}}).css("position",n)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),a=e.inArray(this,t);-1!==a&&t.splice(a,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var a=this,s=!1,i={};e.each(t,function(e,t){a._setOption(e,t),e in a.sizeRelatedOptions&&(s=!0),e in a.resizableRelatedOptions&&(i[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(e,t){var a,s,i=this.uiDialog;"dialogClass"===e&&i.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(a=i.is(":data(ui-draggable)"),a&&!t&&i.draggable("destroy"),!a&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=i.is(":data(ui-resizable)"),s&&!t&&i.resizable("destroy"),s&&"string"==typeof t&&i.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,a,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),a="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:a,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,a=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(a.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,a){e.preventDefault(),t._setSelection(),t._select(a.item.data("ui-selectmenu-item"),e)},focus:function(e,a){var s=a.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,a){var s=this,i="";e.each(a,function(a,n){n.optgroup!==i&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(n.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:n.optgroup}).appendTo(t),i=n.optgroup),s._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,a){var s=e("<li>");return a.disabled&&s.addClass("ui-state-disabled"),this._setText(s,a.label),s.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var a,s,i=".ui-menu-item";this.isOpen?a=this.menuItems.eq(this.focusIndex):(a=this.menuItems.eq(this.element[0].selectedIndex),i+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?a["first"===e?"prevAll":"nextAll"](i).eq(-1):a[e+"All"](i).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var a=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),a=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;
case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),a=!1}a&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var a=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==a&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var a=[];t.each(function(t,s){var i=e(s),n=i.parent("optgroup");a.push({element:i,index:t,value:i.val(),label:i.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||i.prop("disabled")})}),this.items=a},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,a,s=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",r=[];for(a=s.values&&s.values.length||1,i.length>a&&(i.slice(a).remove(),i=i.slice(0,a)),t=i.length;a>t;t++)r.push(n);this.handles=i.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,a="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),a="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(a+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var a,s,i,n,r,o,d,l,c=this,p=this.options;return p.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),a={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(a),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var a=Math.abs(s-c.values(t));(i>a||i===a&&(t===c._lastChangedValue||c.values(t)===p.min))&&(i=a,n=e(this),r=t)}),o=this._start(t,r),o===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,n.addClass("ui-state-active").focus(),d=n.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-d.left-n.width()/2,top:t.pageY-d.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},a=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,a),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,a,s,i,n;return"horizontal"===this.orientation?(t=this.elementSize.width,a=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,a=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=a/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),i=this._valueMax()-this._valueMin(),n=this._valueMin()+s*i,this._trimAlignValue(n)},_start:function(e,t){var a={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(a.value=this.values(t),a.values=this.values()),this._trigger("start",e,a)},_slide:function(e,t,a){var s,i,n;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&a>s||1===t&&s>a)&&(a=s),a!==this.values(t)&&(i=this.values(),i[t]=a,n=this._trigger("slide",e,{handle:this.handles[t],value:a,values:i}),s=this.values(t?0:1),n!==!1&&this.values(t,a))):a!==this.value()&&(n=this._trigger("slide",e,{handle:this.handles[t],value:a}),n!==!1&&this.value(a))},_stop:function(e,t){var a={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(t),a.values=this.values()),this._trigger("stop",e,a)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(t),a.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,a)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,a){var s,i,n;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(a),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,i=arguments[0],n=0;n<s.length;n+=1)s[n]=this._trimAlignValue(i[n]),this._change(null,n);this._refreshValue()},_setOption:function(t,a){var s,i=0;switch("range"===t&&this.options.range===!0&&("min"===a?(this.options.value=this._values(0),this.options.values=null):"max"===a&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!a),this._super(t,a),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===a?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;i>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,a,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(a=this.options.values.slice(),s=0;s<a.length;s+=1)a[s]=this._trimAlignValue(a[s]);return a}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,a=(e-this._valueMin())%t,s=e-a;return 2*Math.abs(a)>=t&&(s+=a>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),a=this.options.step,s=Math.floor(+(e-t).toFixed(this._precision())/a)*a;e=s+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),a=t.indexOf(".");return-1===a?0:t.length-a-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,a,s,i,n,r=this.options.range,o=this.options,d=this,l=this._animateOff?!1:o.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){a=(d.values(s)-d._valueMin())/(d._valueMax()-d._valueMin())*100,c["horizontal"===d.orientation?"left":"bottom"]=a+"%",e(this).stop(1,1)[l?"animate":"css"](c,o.animate),d.options.range===!0&&("horizontal"===d.orientation?(0===s&&d.range.stop(1,1)[l?"animate":"css"]({left:a+"%"},o.animate),1===s&&d.range[l?"animate":"css"]({width:a-t+"%"},{queue:!1,duration:o.animate})):(0===s&&d.range.stop(1,1)[l?"animate":"css"]({bottom:a+"%"},o.animate),1===s&&d.range[l?"animate":"css"]({height:a-t+"%"},{queue:!1,duration:o.animate}))),t=a}):(s=this.value(),i=this._valueMin(),n=this._valueMax(),a=n!==i?(s-i)/(n-i)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=a+"%",this.handle.stop(1,1)[l?"animate":"css"](c,o.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:a+"%"},o.animate),"max"===r&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-a+"%"},{queue:!1,duration:o.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:a+"%"},o.animate),"max"===r&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-a+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(t){var a,s,i,n,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),a=this._start(t,r),a===!1))return}switch(n=this.options.step,s=i=this.options.values&&this.options.values.length?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;i=this._trimAlignValue(s+n);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;i=this._trimAlignValue(s-n)}this._slide(t,r,i)},keyup:function(t){var a=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,a),this._change(t,a),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},a=this.element;return e.each(["min","max","step"],function(e,s){var i=a.attr(s);void 0!==i&&i.length&&(t[s]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function a(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),a.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,a.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var a=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,a.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-a.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,a){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,a)},e),this._spin(t*this.options.step,a)},_spin:function(e,t){var a=this.value()||0;this.counter||(this.counter=1),a=this._adjustValue(a+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:a})===!1||(this._value(a),this.counter++)},_increment:function(t){var a=this.options.incremental;return a?e.isFunction(a)?a(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),a=t.indexOf(".");return-1===a?0:t.length-a-1},_adjustValue:function(e){var t,a,s=this.options;return t=null!==s.min?s.min:0,a=e-t,a=Math.round(a/s.step)*s.step,e=t+a,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&e<s.min?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var a=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(a))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:d(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var a;""!==e&&(a=this._parse(e),null!==a&&(t||(a=this._adjustValue(a)),e=this._format(a))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:d(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:d(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:d(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:d(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void d(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var a,s;t=t.cloneNode(!1),a=t.href.replace(e,""),s=location.href.replace(e,"");try{a=decodeURIComponent(a)}catch(i){}try{s=decodeURIComponent(s)}catch(i){}return t.hash.length>1&&a===s}}(),_create:function(){var t=this,a=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",a.collapsible),this._processTabs(),a.active=this._initialActive(),e.isArray(a.disabled)&&(a.disabled=e.unique(a.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(a.active):e(),this._refresh(),this.active.length&&this.load(a.active)},_initialActive:function(){var t=this.options.active,a=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(a,i){return e(i).attr("aria-controls")===s?(t=a,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=a?!1:0)),!a&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var a=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(a),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(s);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(s===this.options.active?!1:s);default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,i),t.ctrlKey||t.metaKey||(a.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,a){function s(){return t>i&&(t=0),0>t&&(t=i),t}for(var i=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=a?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,a=this.tablist.children(":has(a[href])");t.disabled=e.map(a.filter(".ui-state-disabled"),function(e){return a.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,a=this.tabs,s=this.anchors,i=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(a,s){var i,n,r,o=e(s).uniqueId().attr("id"),d=e(s).closest("li"),l=d.attr("aria-controls");t._isLocal(s)?(i=s.hash,r=i.substring(1),n=t.element.find(t._sanitizeSelector(i))):(r=d.attr("aria-controls")||e({}).uniqueId()[0].id,i="#"+r,n=t.element.find(i),n.length||(n=t._createPanel(r),n.insertAfter(t.panels[a-1]||t.tablist)),n.attr("aria-live","polite")),n.length&&(t.panels=t.panels.add(n)),l&&d.data("ui-tabs-aria-controls",l),d.attr({"aria-controls":r,"aria-labelledby":o}),n.attr("aria-labelledby",o)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),a&&(this._off(a.not(this.tabs)),this._off(s.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var a,s=0;a=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(a).addClass("ui-state-disabled").attr("aria-disabled","true"):e(a).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var a={};t&&e.each(t.split(" "),function(e,t){a[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,a),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var a,s=this.element.parent();"fill"===t?(a=s.height(),a-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(a-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){a-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,a-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(a=0,this.panels.each(function(){a=Math.max(a,e(this).height("").height())}).height(a))},_eventHandler:function(t){var a=this.options,s=this.active,i=e(t.currentTarget),n=i.closest("li"),r=n[0]===s[0],o=r&&a.collapsible,d=o?e():this._getPanelForTab(n),l=s.length?this._getPanelForTab(s):e(),c={oldTab:s,oldPanel:l,newTab:o?e():n,newPanel:d};t.preventDefault(),n.hasClass("ui-state-disabled")||n.hasClass("ui-tabs-loading")||this.running||r&&!a.collapsible||this._trigger("beforeActivate",t,c)===!1||(a.active=o?!1:this.tabs.index(n),this.active=r?e():n,this.xhr&&this.xhr.abort(),l.length||d.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),d.length&&this.load(this.tabs.index(n),t),this._toggle(t,c))},_toggle:function(t,a){function s(){n.running=!1,n._trigger("activate",t,a)}function i(){a.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&n.options.show?n._show(r,n.options.show,s):(r.show(),s())}var n=this,r=a.newPanel,o=a.oldPanel;this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){a.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i()}):(a.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),i()),o.attr("aria-hidden","true"),a.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),r.length&&o.length?a.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr("aria-hidden","false"),a.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var a,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),a=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,currentTarget:a,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),a=t.data("ui-tabs-aria-controls");a?t.attr("aria-controls",a).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var a=this.options.disabled;a!==!1&&(void 0===t?a=!1:(t=this._getIndex(t),a=e.isArray(a)?e.map(a,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,a){return a!==t?a:null})),this._setupDisabled(a))},disable:function(t){var a=this.options.disabled;if(a!==!0){if(void 0===t)a=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,a))return;a=e.isArray(a)?e.merge([t],a).sort():[t]}this._setupDisabled(a)}},load:function(t,a){t=this._getIndex(t);var s=this,i=this.tabs.eq(t),n=i.find(".ui-tabs-anchor"),r=this._getPanelForTab(i),o={tab:i,panel:r},d=function(e,t){"abort"===t&&s.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(n[0])||(this.xhr=e.ajax(this._ajaxSettings(n,a,o)),this.xhr&&"canceled"!==this.xhr.statusText&&(i.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.done(function(e,t,i){setTimeout(function(){r.html(e),s._trigger("load",a,o),d(i,t)},1)}).fail(function(e,t){setTimeout(function(){d(e,t)},1)})))},_ajaxSettings:function(t,a,s){var i=this;return{url:t.attr("href"),beforeSend:function(t,n){return i._trigger("beforeLoad",a,e.extend({jqXHR:t,ajaxSettings:n},s))}}},_getPanelForTab:function(t){var a=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,a){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(a),t.data("ui-tooltip-id",a).attr("aria-describedby",e.trim(s.join(" ")))
},_removeDescribedBy:function(t){var a=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(a,s);-1!==i&&s.splice(i,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,a){var s=this;return"disabled"===t?(this[a?"_disable":"_enable"](),void(this.options[t]=a)):(this._super(t,a),void("content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)})))},_disable:function(){var t=this;e.each(this.tooltips,function(a,s){var i=e.Event("blur");i.target=i.currentTarget=s.element[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var a=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,a.close(t,!0)),s.attr("title")&&(s.uniqueId(),a.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(t,s),this._updateContent(s,t))},_updateContent:function(e,t){var a,s=this.options.content,i=this,n=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(a=s.call(e[0],function(a){i._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=n),this._open(t,e,a))})}),void(a&&this._open(t,e,a)))},_open:function(t,a,s){function i(e){l.of=e,r.is(":hidden")||r.position(l)}var n,r,o,d,l=e.extend({},this.options.position);if(s){if(n=this._find(a))return void n.tooltip.find(".ui-tooltip-content").html(s);a.is("[title]")&&(t&&"mouseover"===t.type?a.attr("title",""):a.removeAttr("title")),n=this._tooltip(a),r=n.tooltip,this._addDescribedBy(a,r.attr("id")),r.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(d=s.clone(),d.removeAttr("id").find("[id]").removeAttr("id")):d=s,e("<div>").html(d).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:i}),i(t)):r.position(e.extend({of:a},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){r.is(":visible")&&(i(l.of),clearInterval(o))},e.fx.interval)),this._trigger("open",t,{tooltip:r})}},_registerCloseHandlers:function(t,a){var s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=a[0],this.close(s,!0)}}};a[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(a).tooltip)}),t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,a,s)},close:function(t){var a,s=this,i=e(t?t.currentTarget:this.element),n=this._find(i);return n?(a=n.tooltip,void(n.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),n.hiding=!0,a.stop(!0),this._hide(a,this.options.hide,function(){s._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,a){e(a.element).attr("title",a.title),delete s.parents[t]}),n.closing=!0,this._trigger("close",t,{tooltip:a}),n.hiding||(n.closing=!1)))):void i.removeData("ui-tooltip-open")},_tooltip:function(t){var a=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=a.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(a),a.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:a}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(a,s){var i=e.Event("blur"),n=s.element;i.target=i.currentTarget=n[0],t.close(i,!0),e("#"+a).remove(),n.data("ui-tooltip-title")&&(n.attr("title")||n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),"ui-effects-"),b=e;e.effects={effect:{}},function(e,t){function a(e,t,a){var s=p[t.type]||{};return null==e?a||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:s.max<e?s.max:e)}function s(t){var a=l(),s=a._rgba=[];return t=t.toLowerCase(),g(d,function(e,i){var n,r=i.re.exec(t),o=r&&i.parse(r),d=i.space||"rgba";return o?(n=a[d](o),a[c[d].cache]=n[c[d].cache],s=a._rgba=n._rgba,!1):void 0}),s.length?("0,0,0,0"===s.join()&&e.extend(s,n.transparent),a):n[t]}function i(e,t,a){return a=(a+1)%1,1>6*a?e+(t-e)*a*6:1>2*a?t:2>3*a?e+(t-e)*(2/3-a)*6:e}var n,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",o=/^([\-+])=\s*(\d+\.?\d*)/,d=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,a,s,i){return new e.Color.fn.parse(t,a,s,i)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=l.support={},m=e("<p>")[0],g=e.each;m.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=m.style.backgroundColor.indexOf("rgba")>-1,g(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(i,r,o,d){if(i===t)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=e(i).css(r),r=t);var p=this,u=e.type(i),m=this._rgba=[];return r!==t&&(i=[i,r,o,d],u="array"),"string"===u?this.parse(s(i)||n._default):"array"===u?(g(c.rgba.props,function(e,t){m[t.idx]=a(i[t.idx],t)}),this):"object"===u?(i instanceof l?g(c,function(e,t){i[t.cache]&&(p[t.cache]=i[t.cache].slice())}):g(c,function(t,s){var n=s.cache;g(s.props,function(e,t){if(!p[n]&&s.to){if("alpha"===e||null==i[e])return;p[n]=s.to(p._rgba)}p[n][t.idx]=a(i[e],t,!0)}),p[n]&&e.inArray(null,p[n].slice(0,3))<0&&(p[n][3]=1,s.from&&(p._rgba=s.from(p[n])))}),this):void 0},is:function(e){var t=l(e),a=!0,s=this;return g(c,function(e,i){var n,r=t[i.cache];return r&&(n=s[i.cache]||i.to&&i.to(s._rgba)||[],g(i.props,function(e,t){return null!=r[t.idx]?a=r[t.idx]===n[t.idx]:void 0})),a}),a},_space:function(){var e=[],t=this;return g(c,function(a,s){t[s.cache]&&e.push(a)}),e.pop()},transition:function(e,t){var s=l(e),i=s._space(),n=c[i],r=0===this.alpha()?l("transparent"):this,o=r[n.cache]||n.to(r._rgba),d=o.slice();return s=s[n.cache],g(n.props,function(e,i){var n=i.idx,r=o[n],l=s[n],c=p[i.type]||{};null!==l&&(null===r?d[n]=l:(c.mod&&(l-r>c.mod/2?r+=c.mod:r-l>c.mod/2&&(r-=c.mod)),d[n]=a((l-r)*t+r,i)))}),this[i](d)},blend:function(t){if(1===this._rgba[3])return this;var a=this._rgba.slice(),s=a.pop(),i=l(t)._rgba;return l(e.map(a,function(e,t){return(1-s)*i[t]+s*e}))},toRgbaString:function(){var t="rgba(",a=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===a[3]&&(a.pop(),t="rgb("),t+a.join()+")"},toHslaString:function(){var t="hsla(",a=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===a[3]&&(a.pop(),t="hsl("),t+a.join()+")"},toHexString:function(t){var a=this._rgba.slice(),s=a.pop();return t&&a.push(~~(255*s)),"#"+e.map(a,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,a,s=e[0]/255,i=e[1]/255,n=e[2]/255,r=e[3],o=Math.max(s,i,n),d=Math.min(s,i,n),l=o-d,c=o+d,p=.5*c;return t=d===o?0:s===o?60*(i-n)/l+360:i===o?60*(n-s)/l+120:60*(s-i)/l+240,a=0===l?0:.5>=p?l/c:l/(2-c),[Math.round(t)%360,a,p,null==r?1:r]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,a=e[1],s=e[2],n=e[3],r=.5>=s?s*(1+a):s+a-s*a,o=2*s-r;return[Math.round(255*i(o,r,t+1/3)),Math.round(255*i(o,r,t)),Math.round(255*i(o,r,t-1/3)),n]},g(c,function(s,i){var n=i.props,r=i.cache,d=i.to,c=i.from;l.fn[s]=function(s){if(d&&!this[r]&&(this[r]=d(this._rgba)),s===t)return this[r].slice();var i,o=e.type(s),p="array"===o||"object"===o?s:arguments,u=this[r].slice();return g(n,function(e,t){var s=p["object"===o?e:t.idx];null==s&&(s=u[t.idx]),u[t.idx]=a(s,t)}),c?(i=l(c(u)),i[r]=u,i):l(u)},g(n,function(t,a){l.fn[t]||(l.fn[t]=function(i){var n,r=e.type(i),d="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[d](),c=l[a.idx];return"undefined"===r?c:("function"===r&&(i=i.call(this,c),r=e.type(i)),null==i&&a.empty?this:("string"===r&&(n=o.exec(i),n&&(i=c+parseFloat(n[2])*("+"===n[1]?1:-1))),l[a.idx]=i,this[d](l)))})})}),l.hook=function(t){var a=t.split(" ");g(a,function(t,a){e.cssHooks[a]={set:function(t,i){var n,r,o="";if("transparent"!==i&&("string"!==e.type(i)||(n=s(i)))){if(i=l(n||i),!u.rgba&&1!==i._rgba[3]){for(r="backgroundColor"===a?t.parentNode:t;(""===o||"transparent"===o)&&r&&r.style;)try{o=e.css(r,"backgroundColor"),r=r.parentNode}catch(d){}i=i.blend(o&&"transparent"!==o?o:"_default")}i=i.toRgbaString()}try{t.style[a]=i}catch(d){}}},e.fx.step[a]=function(t){t.colorInit||(t.start=l(t.elem,a),t.end=l(t.end),t.colorInit=!0),e.cssHooks[a].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(r),e.cssHooks.borderColor={expand:function(e){var t={};return g(["Top","Right","Bottom","Left"],function(a,s){t["border"+s+"Color"]=e}),t}},n=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var a,s,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,n={};if(i&&i.length&&i[0]&&i[i[0]])for(s=i.length;s--;)a=i[s],"string"==typeof i[a]&&(n[e.camelCase(a)]=i[a]);else for(a in i)"string"==typeof i[a]&&(n[a]=i[a]);return n}function a(t,a){var s,n,r={};for(s in a)n=a[s],t[s]!==n&&(i[s]||(e.fx.step[s]||!isNaN(parseFloat(n)))&&(r[s]=n));return r}var s=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,a){e.fx.step[a]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,a,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(i,n,r,o){var d=e.speed(n,r,o);return this.queue(function(){var n,r=e(this),o=r.attr("class")||"",l=d.children?r.find("*").addBack():r;l=l.map(function(){var a=e(this);return{el:a,start:t(this)}}),n=function(){e.each(s,function(e,t){i[t]&&r[t+"Class"](i[t])})},n(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=a(this.start,this.end),this}),r.attr("class",o),l=l.map(function(){var t=this,a=e.Deferred(),s=e.extend({},d,{queue:!1,complete:function(){a.resolve(t)}});return this.el.animate(this.diff,s),a.promise()}),e.when.apply(e,l.get()).done(function(){n(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),d.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(a,s,i,n){return s?e.effects.animateClass.call(this,{add:a},s,i,n):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(a,s,i,n){return arguments.length>1?e.effects.animateClass.call(this,{remove:a},s,i,n):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(a,s,i,n,r){return"boolean"==typeof s||void 0===s?i?e.effects.animateClass.call(this,s?{add:a}:{remove:a},i,n,r):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:a},s,i,n)}}(e.fn.toggleClass),switchClass:function(t,a,s,i,n){return e.effects.animateClass.call(this,{add:a,remove:t},s,i,n)}})}(),function(){function t(t,a,s,i){return e.isPlainObject(t)&&(a=t,t=t.effect),t={effect:t},null==a&&(a={}),e.isFunction(a)&&(i=a,s=null,a={}),("number"==typeof a||e.fx.speeds[a])&&(i=s,s=a,a={}),e.isFunction(s)&&(i=s,s=null),a&&e.extend(t,a),s=s||a.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=i||a.complete,t}function a(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var a=0;a<t.length;a++)null!==t[a]&&e.data(y+t[a],e[0].style[t[a]])},restore:function(e,t){var a,s;for(s=0;s<t.length;s++)null!==t[s]&&(a=e.data(y+t[s]),void 0===a&&(a=""),e.css(t[s],a))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var a,s;switch(e[0]){case"top":a=0;break;case"middle":a=.5;break;case"bottom":a=1;break;default:a=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:a}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var a={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},n=document.activeElement;try{n.id}catch(r){n=document.body}return t.wrap(s),(t[0]===n||e.contains(t[0],n))&&e(n).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(a,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){a[s]=t.css(s),isNaN(parseInt(a[s],10))&&(a[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),s.css(a).show()},removeWrapper:function(t){var a=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===a||e.contains(t[0],a))&&e(a).focus()),t},setTransition:function(t,a,s,i){return i=i||{},e.each(a,function(e,a){var n=t.cssUnit(a);n[0]>0&&(i[a]=n[0]*s+n[1])}),i}}),e.fn.extend({effect:function(){function a(t){function a(){e.isFunction(n)&&n.call(i[0]),e.isFunction(t)&&t()}var i=e(this),n=s.complete,o=s.mode;(i.is(":hidden")?"hide"===o:"show"===o)?(i[o](),a()):r.call(i[0],s,a)}var s=t.apply(this,arguments),i=s.mode,n=s.queue,r=e.effects.effect[s.effect];return e.fx.off||!r?i?this[i](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):n===!1?this.each(a):this.queue(n||"fx",a)},show:function(e){return function(s){if(a(s))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(s){if(a(s))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(s){if(a(s)||"boolean"==typeof s)return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var a=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){a.indexOf(t)>0&&(s=[parseFloat(a),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,a){t[a]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,a=4;e<((t=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,a){e.easing["easeIn"+t]=a,e.easing["easeOut"+t]=function(e){return 1-a(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?a(2*e)/2:1-a(-2*e+2)/2}})}();e.effects,e.effects.effect.blind=function(t,a){var s,i,n,r=e(this),o=/up|down|vertical/,d=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(r,t.mode||"hide"),p=t.direction||"up",u=o.test(p),m=u?"height":"width",g=u?"top":"left",h=d.test(p),v={},f="show"===c;r.parent().is(".ui-effects-wrapper")?e.effects.save(r.parent(),l):e.effects.save(r,l),r.show(),s=e.effects.createWrapper(r).css({overflow:"hidden"}),i=s[m](),n=parseFloat(s.css(g))||0,v[m]=f?i:0,h||(r.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),v[g]=f?n:i+n),f&&(s.css(m,0),h||s.css(g,n+i)),s.animate(v,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===c&&r.hide(),e.effects.restore(r,l),e.effects.removeWrapper(r),a()}})},e.effects.effect.bounce=function(t,a){var s,i,n,r=e(this),o=["position","top","bottom","left","right","height","width"],d=e.effects.setMode(r,t.mode||"effect"),l="hide"===d,c="show"===d,p=t.direction||"up",u=t.distance,m=t.times||5,g=2*m+(c||l?1:0),h=t.duration/g,v=t.easing,f="up"===p||"down"===p?"top":"left",y="up"===p||"left"===p,b=r.queue(),w=b.length;for((c||l)&&o.push("opacity"),e.effects.save(r,o),r.show(),e.effects.createWrapper(r),u||(u=r["top"===f?"outerHeight":"outerWidth"]()/3),c&&(n={opacity:1},n[f]=0,r.css("opacity",0).css(f,y?2*-u:2*u).animate(n,h,v)),l&&(u/=Math.pow(2,m-1)),n={},n[f]=0,s=0;m>s;s++)i={},i[f]=(y?"-=":"+=")+u,r.animate(i,h,v).animate(n,h,v),u=l?2*u:u/2;l&&(i={opacity:0},i[f]=(y?"-=":"+=")+u,r.animate(i,h,v)),r.queue(function(){l&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),a()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,g+1))),r.dequeue()},e.effects.effect.clip=function(t,a){var s,i,n,r=e(this),o=["position","top","bottom","left","right","height","width"],d=e.effects.setMode(r,t.mode||"hide"),l="show"===d,c=t.direction||"vertical",p="vertical"===c,u=p?"height":"width",m=p?"top":"left",g={};e.effects.save(r,o),r.show(),s=e.effects.createWrapper(r).css({overflow:"hidden"}),i="IMG"===r[0].tagName?s:r,n=i[u](),l&&(i.css(u,0),i.css(m,n/2)),g[u]=l?n:0,g[m]=l?0:n/2,i.animate(g,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),a()}})},e.effects.effect.drop=function(t,a){var s,i=e(this),n=["position","top","bottom","left","right","opacity","height","width"],r=e.effects.setMode(i,t.mode||"hide"),o="show"===r,d=t.direction||"left",l="up"===d||"down"===d?"top":"left",c="up"===d||"left"===d?"pos":"neg",p={opacity:o?1:0};e.effects.save(i,n),i.show(),e.effects.createWrapper(i),s=t.distance||i["top"===l?"outerHeight":"outerWidth"](!0)/2,o&&i.css("opacity",0).css(l,"pos"===c?-s:s),p[l]=(o?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,i.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),a()}})},e.effects.effect.explode=function(t,a){function s(){b.push(this),b.length===p*u&&i()}function i(){m.css({visibility:"visible"}),e(b).remove(),h||m.hide(),a()}var n,r,o,d,l,c,p=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=p,m=e(this),g=e.effects.setMode(m,t.mode||"hide"),h="show"===g,v=m.show().css("visibility","hidden").offset(),f=Math.ceil(m.outerWidth()/u),y=Math.ceil(m.outerHeight()/p),b=[];for(n=0;p>n;n++)for(d=v.top+n*y,c=n-(p-1)/2,r=0;u>r;r++)o=v.left+r*f,l=r-(u-1)/2,m.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*f,top:-n*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:y,left:o+(h?l*f:0),top:d+(h?c*y:0),opacity:h?0:1}).animate({left:o+(h?0:l*f),top:d+(h?0:c*y),opacity:h?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,a){var s=e(this),i=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:a})},e.effects.effect.fold=function(t,a){var s,i,n=e(this),r=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"hide"),d="show"===o,l="hide"===o,c=t.size||15,p=/([0-9]+)%/.exec(c),u=!!t.horizFirst,m=d!==u,g=m?["width","height"]:["height","width"],h=t.duration/2,v={},f={};e.effects.save(n,r),n.show(),s=e.effects.createWrapper(n).css({overflow:"hidden"}),i=m?[s.width(),s.height()]:[s.height(),s.width()],p&&(c=parseInt(p[1],10)/100*i[l?0:1]),d&&s.css(u?{height:0,width:c}:{height:c,width:0}),v[g[0]]=d?i[0]:c,f[g[1]]=d?i[1]:0,s.animate(v,h,t.easing).animate(f,h,t.easing,function(){l&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),a()})},e.effects.effect.highlight=function(t,a){var s=e(this),i=["backgroundImage","backgroundColor","opacity"],n=e.effects.setMode(s,t.mode||"show"),r={backgroundColor:s.css("backgroundColor")};"hide"===n&&(r.opacity=0),e.effects.save(s,i),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===n&&s.hide(),e.effects.restore(s,i),a()}})},e.effects.effect.size=function(t,a){var s,i,n,r=e(this),o=["position","top","bottom","left","right","width","height","overflow","opacity"],d=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],m=e.effects.setMode(r,t.mode||"effect"),g=t.restore||"effect"!==m,h=t.scale||"both",v=t.origin||["middle","center"],f=r.css("position"),y=g?o:d,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===m&&r.show(),s={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===t.mode&&"show"===m?(r.from=t.to||b,r.to=t.from||s):(r.from=t.from||("show"===m?b:s),r.to=t.to||("hide"===m?b:s)),n={from:{y:r.from.height/s.height,x:r.from.width/s.width},to:{y:r.to.height/s.height,x:r.to.width/s.width}},("box"===h||"both"===h)&&(n.from.y!==n.to.y&&(y=y.concat(p),r.from=e.effects.setTransition(r,p,n.from.y,r.from),r.to=e.effects.setTransition(r,p,n.to.y,r.to)),n.from.x!==n.to.x&&(y=y.concat(u),r.from=e.effects.setTransition(r,u,n.from.x,r.from),r.to=e.effects.setTransition(r,u,n.to.x,r.to))),("content"===h||"both"===h)&&n.from.y!==n.to.y&&(y=y.concat(c).concat(l),r.from=e.effects.setTransition(r,c,n.from.y,r.from),r.to=e.effects.setTransition(r,c,n.to.y,r.to)),e.effects.save(r,y),r.show(),e.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),v&&(i=e.effects.getBaseline(v,s),r.from.top=(s.outerHeight-r.outerHeight())*i.y,r.from.left=(s.outerWidth-r.outerWidth())*i.x,r.to.top=(s.outerHeight-r.to.outerHeight)*i.y,r.to.left=(s.outerWidth-r.to.outerWidth)*i.x),r.css(r.from),("content"===h||"both"===h)&&(p=p.concat(["marginTop","marginBottom"]).concat(c),u=u.concat(["marginLeft","marginRight"]),l=o.concat(p).concat(u),r.find("*[width]").each(function(){var a=e(this),s={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()};g&&e.effects.save(a,l),a.from={height:s.height*n.from.y,width:s.width*n.from.x,outerHeight:s.outerHeight*n.from.y,outerWidth:s.outerWidth*n.from.x},a.to={height:s.height*n.to.y,width:s.width*n.to.x,outerHeight:s.height*n.to.y,outerWidth:s.width*n.to.x},n.from.y!==n.to.y&&(a.from=e.effects.setTransition(a,p,n.from.y,a.from),a.to=e.effects.setTransition(a,p,n.to.y,a.to)),n.from.x!==n.to.x&&(a.from=e.effects.setTransition(a,u,n.from.x,a.from),a.to=e.effects.setTransition(a,u,n.to.x,a.to)),a.css(a.from),a.animate(a.to,t.duration,t.easing,function(){g&&e.effects.restore(a,l)})})),r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===m&&r.hide(),e.effects.restore(r,y),g||("static"===f?r.css({position:"relative",top:r.to.top,left:r.to.left}):e.each(["top","left"],function(e,t){r.css(t,function(t,a){var s=parseInt(a,10),i=e?r.to.left:r.to.top;return"auto"===a?i+"px":s+i+"px"})})),e.effects.removeWrapper(r),a()}})},e.effects.effect.scale=function(t,a){var s=e(this),i=e.extend(!0,{},t),n=e.effects.setMode(s,t.mode||"effect"),r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===n?0:100),o=t.direction||"both",d=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==o?r/100:1,x:"vertical"!==o?r/100:1};i.effect="size",i.queue=!1,i.complete=a,"effect"!==n&&(i.origin=d||["middle","center"],i.restore=!0),i.from=t.from||("show"===n?{height:0,width:0,outerHeight:0,outerWidth:0}:l),i.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},i.fade&&("show"===n&&(i.from.opacity=0,i.to.opacity=1),"hide"===n&&(i.from.opacity=1,i.to.opacity=0)),s.effect(i)},e.effects.effect.puff=function(t,a){var s=e(this),i=e.effects.setMode(s,t.mode||"hide"),n="hide"===i,r=parseInt(t.percent,10)||150,o=r/100,d={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:a,percent:n?r:100,from:n?d:{height:d.height*o,width:d.width*o,outerHeight:d.outerHeight*o,outerWidth:d.outerWidth*o}}),s.effect(t)},e.effects.effect.pulsate=function(t,a){var s,i=e(this),n=e.effects.setMode(i,t.mode||"show"),r="show"===n,o="hide"===n,d=r||"hide"===n,l=2*(t.times||5)+(d?1:0),c=t.duration/l,p=0,u=i.queue(),m=u.length;for((r||!i.is(":visible"))&&(i.css("opacity",0).show(),p=1),s=1;l>s;s++)i.animate({opacity:p},c,t.easing),p=1-p;i.animate({opacity:p},c,t.easing),i.queue(function(){o&&i.hide(),a()}),m>1&&u.splice.apply(u,[1,0].concat(u.splice(m,l+1))),i.dequeue()},e.effects.effect.shake=function(t,a){var s,i=e(this),n=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(i,t.mode||"effect"),o=t.direction||"left",d=t.distance||20,l=t.times||3,c=2*l+1,p=Math.round(t.duration/c),u="up"===o||"down"===o?"top":"left",m="up"===o||"left"===o,g={},h={},v={},f=i.queue(),y=f.length;for(e.effects.save(i,n),i.show(),e.effects.createWrapper(i),g[u]=(m?"-=":"+=")+d,h[u]=(m?"+=":"-=")+2*d,v[u]=(m?"-=":"+=")+2*d,i.animate(g,p,t.easing),s=1;l>s;s++)i.animate(h,p,t.easing).animate(v,p,t.easing);i.animate(h,p,t.easing).animate(g,p/2,t.easing).queue(function(){"hide"===r&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),a()}),y>1&&f.splice.apply(f,[1,0].concat(f.splice(y,c+1))),i.dequeue()},e.effects.effect.slide=function(t,a){var s,i=e(this),n=["position","top","bottom","left","right","width","height"],r=e.effects.setMode(i,t.mode||"show"),o="show"===r,d=t.direction||"left",l="up"===d||"down"===d?"top":"left",c="up"===d||"left"===d,p={};e.effects.save(i,n),i.show(),s=t.distance||i["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(i).css({overflow:"hidden"}),o&&i.css(l,c?isNaN(s)?"-"+s:-s:s),p[l]=(o?c?"+=":"-=":c?"-=":"+=")+s,i.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),a()}})},e.effects.effect.transfer=function(t,a){var s=e(this),i=e(t.to),n="fixed"===i.css("position"),r=e("body"),o=n?r.scrollTop():0,d=n?r.scrollLeft():0,l=i.offset(),c={top:l.top-o,left:l.left-d,height:i.innerHeight(),width:i.innerWidth()},p=s.offset(),u=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:p.top-o,left:p.left-d,height:s.innerHeight(),width:s.innerWidth(),position:n?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){u.remove(),a()})}}),function(){"use strict";var e=function(e,t,a,s){e.areasobj={},e.searchObj={},e.paging={},e.paging.itemPerPage=20,e.paging.currentPage=1,sessionStorage.getItem("searchMajorArea")&&(e.searchObj=JSON.parse(sessionStorage.getItem("searchMajorArea")),sessionStorage.removeItem("searchMajorArea")),sessionStorage.getItem("searchMajorAreaPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchMajorAreaPaging")),sessionStorage.removeItem("searchMajorAreaPaging")),e.edit=function(a){sessionStorage.setItem("searchMajorArea",JSON.stringify(e.searchObj)),sessionStorage.setItem("searchMajorAreaPaging",JSON.stringify(e.paging)),t.path("main/majorarea/"+a)},e.selectCity=function(t){e.selectedcity=t},e.editSublocation=function(t){e.sublocation=t},e.filterAreas=function(t){e.areas=a.filterAreasbyCity(t)},e.getAreasTypeMA=function(){e.areas={},a.get(e.searchObj,e.paging).then(function(t){console.log(e.paging),e.areas=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.getAreasTypeMA()};e.$inject=["$scope","$location","areaFactory","cityFactory"],angular.module("webApp").controller("areaController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n){function r(){e.cities={},n.get().then(function(t){e.cities=t.response})}function o(t){i.getById(t).then(function(t){e.areasobj=t.response,e.pincodes=e.areasobj.pincodes})}e.successFlag=!1,function(){r(),"new"!=t.Id?o(t.Id):e.areasobj={}}(),e.Save=function(){e.areasobj.pincodes=e.pincodes.map(function(e){return parseInt(e.text)}),e.areasobj._id?i.update(e.areasobj).then(function(){e.successFlag=!0,e.areasobj={},e.pincodes=void 0}):(e.areasobj.type="MA",i.add(e.areasobj).then(function(){e.successFlag=!0,e.areasobj={},e.pincodes=void 0}))},e.selectCity=function(){},e.editSublocation=function(t){e.sublocation=t},e.filterAreas=function(t){e.areas=i.filterAreasbyCity(t)},e.BackTolist=function(){a.go("main.majorarea")}};e.$inject=["$scope","$stateParams","$state","$location","areaFactory","cityFactory"],angular.module("webApp").controller("areaObjectController",e)}(),angular.module("webApp").factory("areaFactory",["apiCall",function(e){function t(t){var a="areas?&type=SL&area_id="+t;return e.httpGET(a)}function a(t,a){var s="areas?";return t&&(t.type?s=s+"&type="+t.type:(t.type="MA",s=s+"&type="+t.type),t.city_id&&(s=s+"&city_id="+t.city_id),t.area_id&&(s=s+"&area_id="+t.area_id),t.areasearch&&(s=s+"&areasearch="+t.areasearch)),a&&a.currentPage&&a.itemPerPage&&(s=s+"&page="+a.currentPage+"&limit="+a.itemPerPage),e.httpGET(s)}function s(t){var a="areas/"+t;return e.httpGET(a)}function i(t){return e.httpPOST("areas",t)}function n(t){return t._id?e.httpPUT("areas/"+t._id,t):void 0}function r(e,t){var a=[];
return angular.forEach(e,function(e){e.city_id._id==t&&a.push(e)}),a}function o(t){return e.httpGET("areas?type=MA&page="+t.currentPage+"&limit="+t.itemPerPage)}var d;return{get:a,getById:s,add:i,update:n,filterAreasbyCity:r,pagingResult:o,getSubLocation:t,currentPage:d}}]).filter("filterareas",["sortObj",function(){}]),function(){"use strict";var e=function(e,t,a,s,i){e.user=i,e.login=function(){s.login().then(function(t){var s=e.user.firebaseConfig;angularFire=firebase.initializeApp(s,"angularFire"),a.go(t)},function(e){alertify.alert("string"==typeof e?"Message":"Message")})},e.signUp=function(){},e.logout=function(){}};e.$inject=["$scope","$location","$state","authenticationFactory","user"],angular.module("authentication").controller("authenticationController",e)}(),function(){"use strict";var e=function(e,a,s,i,n,r,o,d,l,c,p){function u(){var e=a.defer();if(""!=i.username&&""!=i.password){var t="login";c.httpPOST(t,i,!0).then(function(t){g(t).then(function(){e.resolve(d)})},function(){})}else e.reject();return e.promise}function m(e){angular.forEach(e,function(e){var a={url:e.url,"abstract":e["abstract"],views:e.views};t.state(e.name,a)})}function g(t){var s=a.defer();if(i.authdata=t.token,i.userdata=t.userdata,i.firebaseConfig=t.firebaseConfig,delete i.password,sessionStorage.setItem("globaldata",JSON.stringify(i)),i.authdata&&(e.defaults.headers.common.Authorization="Bearer "+i.authdata,"superuser"!=i.userdata.role)){var n=i.userdata.provider_id.routes;m(n),l.loadAllMasters().then(function(){s.resolve()})}return s.promise}function h(){sessionStorage.clear(),delete i.authdata,window.location.reload(),p.path("/login")}return{login:u,logout:h}};e.$inject=["$http","$q","$window","user","$state","$templateCache","successURL","successState","optionMasterFactory","apiCall","$location","$rootScope","apiRootUrl"];var t=null,a=function(e,t){return{response:function(t){return 401===t.status&&console.log("Response 401"),t||e.when(t)},responseError:function(a){return 401===a.status&&(console.log("Response Error 401",a),t.path("/login").search("returnTo",t.path())),e.reject(a)}}};a.$inject=["$q","$location"];var s=function(e){t=e};s.$inject=["$stateProvider"],angular.module("webApp").factory("authenticationFactory",e).factory("httpAuthInterceptor",a).config(["$httpProvider",function(e){e.interceptors.push("httpAuthInterceptor")}]).config(s)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o){function d(){if(delete e.call.followupby,e.call._id||e.requeststatus.call_id){e.requeststatus.call_id&&(e.call._id=e.requeststatus.call_id);var t=r.updateCall(e.call);t.then(function(){r.currentcall=void 0,e.call={},e.requeststatus={},e.whenRequestStatus=!1})}else{var t=r.createCall(e.call);t.then(function(){r.currentcall=void 0,e.call={},e.requeststatus={},e.whenRequestStatus=!1})}}e.user=i,$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.EmailValid=/^[a-z]+[a-z0-9._]+@[a-z-]+\.[a-z.]{2,5}$/,e.datePickerPopup={},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.validTextName=/^[ A-Za-z0-9_.']*$/,e.EmailValid=/^[a-z]+[a-z0-9._]+@[a-z-]+\.[a-z.]{2,5}$/,e.validName=/^[ A-Za-z0-9_.']*$/,e.validmobilenumber=/^[0-9](?!.*(\d)\1{13})\d{9,}$/,e.validUser=/^[ A-Za-z0-9]*$/,e.validDigit=/^[0-9]*$/,e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.calldata={},e.data={},e.data.services=[],e.data.patient={},e.requeststatus={},e.service_sm={},e.showAddBtn=!0,e.salutationlist=["Mr.","Mrs","Miss.","Ms.","Dr.","Prof.","Smt."],e.temp={},e.temp.hideWeightHeight=!0,e.data.whenCall=!0,e.data.reqreceiptamount=!1,e.servicerequest={},e.data.totalreceiptamount=0,e.temp.hideDay=!1,e.temp.hideWeek=!1,e.searchObj={};var l=new Date;l=l.setHours("00"),l=new Date(l).setMinutes("00"),l=new Date(l).setSeconds("00"),l=new Date(l).setMilliseconds("000"),e.searchObj.searchDate=new Date(l),e.user.userdata.provider_id&&(e.searchObj.provider_id=e.user.userdata.provider_id._id),e.call={},e.call=r.currentcall,e.call?(e.showBranch=!1,e.disablefields=!0,e.temp.whenUpdate=!0,"servicerequest"==e.call.type&&(e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname="",e.whenServiceRequest=!0,e.data.patient=e.call.patient_id,e.data.services=e.call.services,e.data.comment=e.call.comment,e.data.area_id=e.call.area_id,e.temparea=e.call.area_id),e.temp.showSourceName="doctorreferral"==e.call.referredby||"other"==e.call.referredby?!0:!1):(e.showBranch=!0,e.disablefields=!1,e.call={},e.call.inout="incoming",e.call.type="servicerequest",e.whenServiceRequest=!0,e.call.contactnumber="",e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname=""),e.getSessionStorage=function(){e.calltypelist={_id:"55756fa6a34c6138090ad8f7",name:"calltype",displayname:"Call Type",__v:0,source:"webhcm",iseditable:!1,optionlist:[{code:"enquiry",displayname:"Enquiry",smsdisplayname:"Enquiry",_id:"5609685721eec91800b09973",dimensions:[],active:!1},{code:"generalenquiry",displayname:"General Enquiry",smsdisplayname:"General Enquiry",_id:"5609685721eec91800b09972",dimensions:[],active:!0},{code:"caregiverenquiry",displayname:"Care Giver Enquiry",smsdisplayname:"Care Giver",_id:"5609685721eec91800b09971",dimensions:[],active:!0},{code:"dentalenquiry",displayname:"Dental Enquiry",smsdisplayname:"Dental",_id:"5609685721eec91800b09970",dimensions:[],active:!0},{code:"physioenquiry",displayname:"Physio Enquiry",smsdisplayname:"Physio",_id:"5609685721eec91800b0996f",dimensions:[],active:!0},{code:"strokecareenquiry",displayname:"Stroke Care Enquiry",smsdisplayname:"Stroke Care",_id:"5609685721eec91800b0996e",dimensions:[],active:!0},{code:"dementiaenquiry",displayname:"Dementia Enquiry",smsdisplayname:"Dementia",_id:"5609685721eec91800b0996d",dimensions:[],active:!0},{code:"nursingenquiry",displayname:"Nursing Enquiry",smsdisplayname:"Nursing",_id:"5609685721eec91800b0996c",dimensions:[],active:!0},{code:"physicianenquiry",displayname:"Physician Enquiry",smsdisplayname:"Physician",_id:"5609685721eec91800b0996b",dimensions:[],active:!0},{code:"oncologyenquiry",displayname:"Oncology Enquiry",smsdisplayname:"Oncology",_id:"5609685721eec91800b0996a",dimensions:[],active:!0},{code:"feedback",displayname:"Feedback",smsdisplayname:"Feedback",_id:"5609685721eec91800b09969",dimensions:[],active:!0},{code:"servicerequest",displayname:"Service Request",smsdisplayname:"Service Request",_id:"5609685721eec91800b09968",dimensions:[],active:!0},{code:"complain",displayname:"Complain",smsdisplayname:"Complain",_id:"5609685721eec91800b09967",dimensions:[],active:!0},{code:"complaintresolution",displayname:"Complaint Resolution",smsdisplayname:"Complaint Resolution",_id:"5609685721eec91800b09966",dimensions:[],active:!0},{code:"requeststatus",displayname:"Request Status",smsdisplayname:"Request Status",_id:"5609685721eec91800b09965",dimensions:[],active:!0},{code:"others",displayname:"Others",smsdisplayname:"Others",_id:"5609685721eec91800b09964",dimensions:[],active:!0},{code:"jobenquiry",displayname:"Job enquiry",smsdisplayname:"Job",_id:"5661323523fc1a38122adae5",dimensions:[],active:!0},{code:"equipmentenquiry",displayname:"Equipment enquiry",smsdisplayname:"Equipment",_id:"5661323f23fc1a38122adae6",dimensions:[],active:!0},{code:"membership/renewalenquiry",displayname:"Membership/Renewal enquiry",smsdisplayname:"Membership/Renewal",_id:"5661324523fc1a38122adae7",dimensions:[],active:!0}],_Deleted:!1},e.relationship={_id:"5582a808e280b8f40f6a887b",name:"relationship",displayname:"Relationship",optionlist:[{code:"father",displayname:"Father",_id:"55b4a34e99af3b0e003661bb",active:!0},{code:"mother",displayname:"Mother",_id:"55b4a34e99af3b0e003661ba",active:!0},{code:"brother",displayname:"Brother",_id:"55b4a34e99af3b0e003661b9",active:!0},{code:"sister",displayname:"Sister",_id:"55b4a34e99af3b0e003661b8",active:!0},{code:"self",displayname:"Self",_id:"55b7229c6727ef0c007f6831",active:!0},{code:"son-in-law",displayname:"Son-in-law",_id:"55b7229c6727ef0c007f6830",active:!0},{code:"daughter-in-law",displayname:"Daughter-in-law",_id:"55b7229c6727ef0c007f682f",active:!0},{code:"mother-in-law",displayname:"Mother-in-law",_id:"55b7229c6727ef0c007f682e",active:!0},{code:"friend",displayname:"Friend",_id:"55b722db6727ef0c007f6834",active:!0},{code:"wife",displayname:"Wife",_id:"55b722db6727ef0c007f6833",active:!0},{code:"husband",displayname:"Husband",_id:"55b722db6727ef0c007f6832",active:!0},{code:"nhhs staff",displayname:"NHHS Staff",_id:"55b725866727ef0c007f6841",active:!0}],source:"webhcm"},e.ReferredList={_id:"558a55ca69f95aa00e919bdc",name:"referralsource",displayname:"Referral Source",optionlist:[{code:"newspaper",displayname:"Newspaper",active:!0},{code:"television",displayname:"Television",active:!0},{code:"wordofmouth",displayname:"Word Of Mouth",active:!0},{code:"web",displayname:"Web",active:!0},{code:"doctorreferral",displayname:"Doctor Referral",active:!0},{code:"internalreferral",displayname:"Internal Referral",active:!0},{code:"customerreference",displayname:"Customer Reference",active:!0},{code:"other",displayname:"Other",active:!0}],source:"webhcm"}},e.getPartners=function(){var t=o.get("",e.searchObj);t.then(function(t){e.partnerList=t.response})},e.changePartner=function(t){e.user.userdata.userinfo.partner_id=t,i.userdata.userinfo.partner_id=t,e.AreaList=e.user.userdata.userinfo.partner_id.areas,e.workinghours=e.user.userdata.userinfo.partner_id.workinghour,e.searchObj.partner_id=e.user.userdata.userinfo.partner_id._id},e.init=function(){e.call._id||e.getCalls()},e.gotoList=function(){s.go("home.calls"),e.getCalls()},e.previousDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()-1)),e.getCalls()},e.todayDate=function(){var t=new Date;t=t.setHours("00"),t=new Date(t).setMinutes("00"),t=new Date(t).setSeconds("00"),t=new Date(t).setMilliseconds("000"),e.searchObj.searchDate=new Date(t),e.getCalls()},e.nextDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()+1)),e.getCalls()},e.changeSource=function(){e.temp.showSourceName="doctorreferral"==e.call.referredby||"other"==e.call.referredby?!0:!1},e.changeinout=function(){e.hideservice="outgoing"==e.call.inout?!0:!1},e.duplicateCall=function(){e.call._id="",e.disablefields=!0,e.temp.whenUpdate=!1;var t=new Date(l);t.setDate(t.getDate()+1),e.data.services.forEach(function(e){e.startdate=new Date(t)})},e.editCall=function(){e.disablefields=!0,e.temp.whenUpdate=!1},e.getCalls=function(){e.isPaging||e.initializePaging();var t=r.getCallList(e.paging,e.searchObj);t.then(function(t){e.CallList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount}),e.isPaging=!1},e.SelectCall=function(e){r.currentcall=e},e.getCallsBySearch=function(){if(e.call.contactnumber&&e.call.contactnumber.length>=10){var t={};t.contactnumber=e.call.contactnumber;var a=r.getCallList(e.paging,t,!0);a.then(function(t){e.call.name=t.response.length>0?t.response[0].name:""})}},e.cancelCall=function(){e.data.patient={},e.data.services=[],r.currentcall=void 0,s.go(".",null,{reload:!0})},e.changeCallType=function(){"servicerequest"==e.call.type?(e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname="",e.whenServiceRequest=!0,e.whenRequestStatus=!1):"requeststatus"==e.call.type?(e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname="",e.whenRequestStatus=!0,e.whenServiceRequest=!1):(e.data.patient={},e.whenServiceRequest=!1,e.whenRequestStatus=!1),e.data.services=[]},e.SaveCall=function(){e.whenRequestStatus?e.requeststatus.client_id?(e.call.client_id=e.requeststatus.client_id,d()):alert("Please select patient"):d()},e.Save=function(){$("#progressIndicator").modal("show"),e.call.comment=e.data.comment,delete e.call.followupby;var t={};t.call=e.call,t.servicerequest=e.data;var a=r.createCall(t);a.then(function(t){t.response._id&&alert("Call Created"),e.call={},e.data={},e.patient={},e.data.patient={},e.data.services=[],r.currentcall=void 0,s.go(".",null,{reload:!0}),$("#progressIndicator").modal("hide")}),$("#progressIndicator").modal("hide")},e.updateCall=function(){$("#progressIndicator").modal("show"),e.call.patient_id=e.data.patient,e.call.services=e.data.services,delete e.call.followupby;var t=r.updateCall(e.call);t.then(function(t){t.response._id&&alert("Call Created"),e.call={},e.data={},e.patient={},e.data.patient={},e.data.services=[],r.currentcall=void 0,s.go(".",null,{reload:!0}),$("#progressIndicator").modal("hide")}),$("#progressIndicator").modal("hide")},e.addDiscount=function(){e.call.discount||(e.call.discount=0),isNaN(e.call.discount)&&(e.call.discount=0),e.data.services.forEach(function(t){t.service_id.amount=parseInt(t.service_id.org_amount)-parseInt(t.service_id.org_amount)*(parseInt(e.call.discount)/100)})},e.openPreview=function(){$("#bookAppointmentObjectView").modal("hide"),e.Save()},e.initializePaging(),e.getSessionStorage(),e.user.userdata.userinfo.partners.length?e.partnerList=e.user.userdata.userinfo.partners:e.getPartners()};e.$inject=["$scope","$q","$location","$state","user","$stateParams","callFactory","partnerFactory","$rootScope"],angular.module("webApp").controller("callController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(){var e=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm"));return e}function n(e,a,i){if(i=void 0==i?!0:i,a.searchDate){var n=new Date(a.searchDate);n=n?n.toISOString():now.toISOString()}var r=t.defer(),o="";e.currentPage&&e.itemPerPage&&(o=o+"&page="+e.currentPage+"&limit="+e.itemPerPage),n&&(o=o+"&fromdate="+n),a.searchText&&(o=o+"&field=patientname&q="+a.searchText),a.contactnumber&&(o=o+"&contactnumber="+a.contactnumber);var d="calls?"+o;return s.httpGET(d,i).then(function(e){r.resolve(e)}),r.promise}function r(e){var a=t.defer(),i=e,n="calls";return s.httpPUT(n,i,loaderTrue).then(function(e){a.resolve(e)}),a.promise}function o(e){var t=e,a="addorders";return s.httpPOST(a,t,loaderTrue)}function d(e){var a=t.defer(),i=e,n="servicerequests";return s.httpPOST(n,i,loaderTrue).then(function(e){a.resolve(e)}),a.promise}function l(e){var a=t.defer(),i="";if(e&&(e.ClientCD&&(i=i+"&ClientCD="+e.ClientCD),e.TestListArray&&(e.TestList=e.TestListArray.join(","),i=i+"&TestList="+e.TestList),e.PRICEDT)){var n=moment(e.PRICEDT).format("DD/MM/YYYY");e.PRICEDT=n,i=i+"&PRICEDT="+e.PRICEDT}var r="srlServicePrice?"+i;return s.httpGET(r,loaderTrue).then(function(e){a.resolve(e)}),a.promise}function c(e,t,a,s,i){var n=(JSON.parse(localStorage.getItem("appuser")),!1),r=0,o=0,d=[];return i.userdata.userinfo.partner_id.visitcharges.forEach(function(i){e<=i.to&&e>=i.from&&i.day.forEach(function(e){e.toLowerCase()==t&&(1==s&&(o=i.charge),a.forEach(function(e){e.service_id.postservices&&e.service_id.postservices.length&&e.service_id.postservices.forEach(function(e){d.push(e.name)})}),a.forEach(function(e){d.length&&d.forEach(function(t){t==e.service_id.name&&1==s&&(r=i.postcharge,n=!0)})}),a.forEach(function(e){e.service_id.childs&&e.service_id.childs.forEach(function(e){e.test_id.postservices&&e.test_id.postservices.length&&(r=i.postcharge,n=!0),e.test_id.childs&&e.test_id.childs.forEach(function(e){e.test_id.postservices&&e.test_id.postservices.length&&(r=i.postcharge,n=!0)})})}))})}),r+=o,n}function p(e){var t="getvisitcharge";return s.httpPUT(t,e)}function u(e,t){var a=[];return e.length&&e.forEach(function(e){e.service_id&&e.service_id.name&&t.childs&&t.childs.length&&t.childs.forEach(function(t){t.test_id&&t.test_id.name&&e.service_id.name==t.test_id.name&&a.push(e.service_id.name)})}),a}function m(e,t){var a=!0;return e.length&&e.forEach(function(e){e.service_id&&e.service_id.childs&&e.service_id.childs.length&&t.name&&e.service_id.childs.forEach(function(e){e.test_id&&e.test_id.name&&e.test_id.name==t.name&&(a=!1)})}),a}function g(e,t){var a=[];return e.length&&e.forEach(function(e){t.childs&&t.childs.length&&t.childs.forEach(function(t){t.test_id.childs&&t.test_id.childs.length&&t.test_id.childs.forEach(function(t){e.service_id&&e.service_id.name&&t.test_id&&t.test_id.name&&e.service_id.name==t.test_id.name&&a.push(e.service_id.name)})})}),a}function h(e,t){var a=!0;return e.length&&e.forEach(function(e){e.service_id&&e.service_id.childs&&e.service_id.childs.length&&e.service_id.childs.forEach(function(e){e.test_id&&e.test_id.childs&&e.test_id.childs.length&&e.test_id.childs.forEach(function(e){e.test_id&&e.test_id.name&&t.name&&e.test_id.name==t.name&&(a=!1)})})}),a}function v(){var e="partners";return s.httpGET(e)}return{getCallList:n,updateCall:r,createCall:o,createServiceRequest:d,getServicePrice:l,currentcall:f,getRemovedVisitCharges:c,getVisitChargesApi:p,testpresentinaddedprofile:u,selectedtestpresentinprofile:m,testpresentinaddedpackage:g,selectedtestpresentinpackage:h,partnerInfoApi:v,curentWaqtTime:i};var f};e.$inject=["$http","$q","$location","apiCall"],angular.module("webApp").factory("callFactory",e)}(),function(){"use strict";var e=function(e,t,a){function s(){a.paginateResult(e.paging).then(function(t){e.cities=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,function(){sessionStorage.getItem("searchCityPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchCityPaging")),sessionStorage.removeItem("searchCityPaging")),s()}(),e.get=function(){s()},e.edit=function(a){sessionStorage.setItem("searchCityPaging",JSON.stringify(e.paging)),t.path("/main/city/"+a)}};e.$inject=["$scope","$location","cityFactory"],angular.module("webApp").controller("cityController",e)}(),function(){"use strict";var e=function(e,t,a){function s(t){a.get(t).then(function(t){console.log(t),e.cityObj=t.response})}!function(){"new"!=t.Id?s(t.Id):e.cityObj={}}(),e.Save=function(){e.cityObj._id?i(e.cityObj):n(e.cityObj)};var i=function(){a.update(e.cityObj).then(function(){e.successFlag=!0,e.cityObj={}})},n=function(t){a.add(t).then(function(){e.successFlag=!0,e.cityObj={}})}};e.$inject=["$scope","$stateParams","cityFactory"],angular.module("webApp").controller("cityObjectController",e)}(),angular.module("webApp").factory("cityFactory",["apiCall",function(e){function t(t){var a="cities";return t&&(a=a+"/"+t),e.httpGET(a)}function a(t){return e.httpPOST("cities",t)}function s(t){return e.httpPUT("cities/"+t._id,t)}function i(t){var a="";return t&&t.currentPage&&t.itemPerPage&&(a=a+"&page="+t.currentPage+"&limit="+t.itemPerPage),e.httpGET("cities?"+a)}function n(t){var a="";return t&&t.currentPage&&t.itemPerPage&&(a=a+"&page="+t.currentPage+"&limit="+t.itemPerPage),e.httpGET("cities?"+a)}return{get:t,add:a,update:s,paginateResult:i,getList:n}}]),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c){function p(){e.temparea=void 0,e.addaddress._id=void 0,e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",e.address.sublocation_id=[]}function u(t){var a={};a.type="SL",a.area_id=t,i.get(a).then(function(t){e.subLocationList=t.response})}e.isAdvanceSearch=!0,e.clientcheckpoint=!1,e.clientUsercheckpoint=!1,e.user=r,$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.call={},e.newpatient={},e.newPatientList=[],e.selectedPateintObj={},e.details={},e.temp||(e.temp={}),e.address={},e.patientSearchOBJ={},e.display={},e.searchObj={},e.displayInfo={},e.searchObj.iscarddelivered=!0,e.newMemberRenewalFlag=!0,e.searchExistingPatientObj={},e.patient||(e.patient={},e.patient.registrationdate=new Date,e.patient.demography={}),e.changesublocation=function(t){t&&(e.address.sublocationid=t._id),e.addaddress.pincode=t.pincodes[0]},e.copyAdderss=function(){e.patient.demography.residentialaddress=e.address.chkAdd?e.patient.demography.servicedeliveryaddress:{}},e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.changeDeceased=function(){e.patient.demography.deceaseddate="",e.patient.demography.deceasedcomment=""},e.changeSource=function(){e.address.showSourceName="doctorreferral"==e.patient.referredby||"other"==e.patient.referredby?!0:!1},e.loadLanguages=function(a){var s=t.defer();a=a.toLowerCase();var i=e.LanguagesList.optionlist.filter(function(e){return e.displayname.toLowerCase().indexOf(a)>-1?e.code:void 0});return s.resolve(i),s.promise},e.langTagAdded=function(t){e.patient.demography.languagesknown.push(t)},e.langTagRemoved=function(t){var a=e.patient.demography.languagesknown.indexOf(t.text);e.patient.demography.languagesknown.splice(a,1)},e.getSessionStorage=function(){},e.getState=function(){},e.getCity=function(){s.paginateResult().then(function(t){e.cityList=t.response})},e.getArea=function(t){i.get(t).then(function(t){e.areaList=t.response})},e.changeCity=function(){var t={};t.city_id=e.addaddress.city_id._id,e.getArea(t)},e.enterPincode=function(){var t={};t.areasearch=e.addaddress.pincode,e.getArea(t)},e.searchPatient=function(){e.initializePaging(),e.patientsList=[],a.getPatientList(void 0,void 0,e.paging.currentPage,e.paging.itemPerPage,void 0,e.searchObj).then(function(t){e.patientsList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,e.patient_search=""})},e.savePatientdmo=function(){var t=a.updatePatient(e.patient);t.then(function(t){e.patient=t.response,$("#editaddress").modal("hide"),e.editAdd=!1,p(),n.path("/main/client")})},e.addPatient=function(){var t,a=moment().toISOString();e.addaddress.wing&&(t=e.addaddress.wing),e.addaddress.flatno&&(t=e.addaddress.wing?t+", "+e.addaddress.flatno:e.addaddress.flatno),e.addaddress.floor&&(t=e.addaddress.flatno||e.addaddress.wing?t+", FLOOR NO."+e.addaddress.floor:"FLOOR NO."+e.addaddress.floor),e.addaddress.building&&(t=e.addaddress.flatno||e.addaddress.wing||e.addaddress.floor?t+", "+e.addaddress.building:e.addaddress.building),e.addaddress.plotno&&(t=t+", PLOT NO."+e.addaddress.plotno),e.addaddress.sectorno&&(t=t+", SECTOR NO."+e.addaddress.sectorno),e.addaddress.streetname&&(t=t+", "+e.addaddress.streetname),e.addaddress.landmark&&(t=t+", "+e.addaddress.landmark);var s;e.addaddress.building&&(s=e.addaddress.building),e.addaddress.streetname&&(s=s+", "+e.addaddress.streetname);var i=(s.toUpperCase()+" ,"+e.addaddress.area_id.name.toUpperCase()+" ,"+e.addaddress.city_id.name.toUpperCase()+" ,Maharashtra, India. "+e.addaddress.pincode,{});if(e.patient.postData={},e.temp.altnumber||(e.temp.altnumber=[]),e.temp.altnumber.length){var r=[];r=e.temp.altnumber.map(function(e){return e.text})}e.patient.postData={type:"nonmember",registrationdate:a,demography:{addresses:[{area_id:e.addaddress.area_id._id,city_id:e.addaddress.city_id._id,sublocation_id:e.address.sublocationid,googleplace_id:e.address.googleplace_id,title:e.addaddress.title,wing:e.addaddress.wing,flatno:e.addaddress.flatno,building:e.addaddress.building,plotno:e.addaddress.plotno,floor:e.addaddress.floor,sectorno:e.addaddress.sectorno,streetname:e.addaddress.streetname,landmark:e.addaddress.landmark,pincode:e.addaddress.pincode,assumeddob:e.patient.demography.assumeddob,servicedeliveryaddress:"true",address:t,geolocation:i}],salutation:e.patient.demography.salutation,firstname:e.patient.demography.firstname,middlename:e.patient.demography.middlename,lastname:e.patient.demography.lastname,dob:e.patient.demography.dob.toISOString(),age:e.patient.demography.age,agetype:e.patient.demography.agetype,gender:e.patient.demography.gender,mobilenumber:e.patient.demography.mobilenumber,altnumber:r,email:e.patient.demography.email},partner_id:e.user.userdata.userinfo.partner_id._id,provider_id:e.user.userdata.provider_id._id,externalId:e.patient.externalId},o.saveNewPatientApi(e.patient.postData).then(function(){n.path("/main/dashboard")})},e.addnewaddfromExistingPateint=function(){e.existingPatient=[],e.searchExistingPatientObj={},e.newAddressArray=[],e.clientcheckpoint=!1,e.clientUsercheckpoint=!1,e.newPatientList=[],$("#addNewAddaddressFormExisting").modal("show")},e.SearchPatientByName=function(){if(e.searchExistingPatientObj.searchText||e.searchExistingPatientObj.firstname||e.searchExistingPatientObj.middlename||e.searchExistingPatientObj.lastname){e.newPatientList=[];var t={};t.currentPage=1,t.itemPerPage=20;var s={};s.searchText=e.searchExistingPatientObj.searchText,s.firstname=e.searchExistingPatientObj.firstname,s.middlename=e.searchExistingPatientObj.middlename,s.lastname=e.searchExistingPatientObj.lastname,s.partner_id=e.selectedPateintObj.partner_id._id;var i=a.getPatientList(t,s,!0);i.then(function(t){var a=t.response;a.length||(e.clientUsercheckpoint=!0),a.forEach(function(t){t._id!=e.selectedPateintObj._id?e.newPatientList.push(t):e.clientcheckpoint=!0})})}else e.newPatientList=[]},e.clearSearchData=function(){e.searchExistingPatientObj.searchText="",e.searchExistingPatientObj.firstname="",e.searchExistingPatientObj.middlename="",e.searchExistingPatientObj.lastname="",e.clientcheckpoint=!1,e.clientUsercheckpoint=!1,e.newPatientList=[]},e.selectNewPatient=function(t){e.clientUsercheckpoint=!1,e.clientcheckpoint=!1,e.newPatientList=[],e.searchExistingPatientObj={},e.existingPatient={};var s=a.getAddressByClientId(t._id);s.then(function(t){if(e.existingPatient=t.response,$,e.existingPatient.partner_id)for(var a=0,s=e.existingPatient.demography.addresses.length;s>a;)_.find(e.selectedPateintObj.demography.addresses,function(t){s>a&&e.existingPatient.demography.addresses[a]._id.toString()==t._id.toString()&&(e.existingPatient.demography.addresses.splice(a,1),s--)}),a++})},e.newAddressArray=[],e.selectedAddressCheck=function(t){var a=e.newAddressArray.indexOf(t);a>-1?e.newAddressArray.splice(a,1):e.newAddressArray.push(t)},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=s,e.addaddress={},e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={}}}else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={}}},e.checkServiceAddress=function(t,a){for(var s=0;s<e.patient.demography.addresses.length;s++)s!=a?e.patient.demography.addresses[s].servicedeliveryaddress="false":e.patient.demography.addresses[a].servicedeliveryaddress="true"},e.closeAddAddress=function(){$("#AddressObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.changesublocation=function(){e.address.sublocation_id.length&&e.address.sublocation_id.length>1&&e.address.sublocation_id.splice(0,1),e.address.sublocation_id.forEach(function(t){e.addaddress.sublocation_id=t,e.address.sublocationid=t._id,e.addaddress.pincode=t.pincodes[0]})},e.deleteClientModel=function(){$("#deleteclient").modal("show")},e.deleteClientDetail=function(){$("#deleteclient").modal("hide"),a.deleteClient(e.patient._id).then(function(){n.path("/main/client")})},e.loadSublocation=function(t){var a=e.subLocationList.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return 0==a.length&&alert("no result found"),a},e.tagRemoved=function(){e.addaddress.sublocation_id=void 0,e.address.sublocationid=void 0,e.addaddress.pincode=void 0},e.editAddressnew=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.addressarea=t.area_id._id,e.SelectArea(t),e.addaddress.sublocation_id=t.sublocation_id,e.editAdd=!0,e.address.sublocation_id=[],e.address.sublocation_id.push(e.addaddress.sublocation_id),$("#editaddress").modal("show")};var m,g=[],h={};h.coordinates=[];var v={};if(v.coordinates=[],e.addGmapAddress=function(){$("#gmapaddaddress").modal("hide");var t;e.address.wing&&(t=e.address.wing),e.address.flatno&&(t=e.address.wing?t+", "+e.address.flatno:e.address.flatno),e.address.floorno&&(t=e.address.flatno||e.address.wing?t+", FLOOR NO."+e.address.floorno:"FLOOR NO."+e.address.floorno),e.address.building&&(t=e.address.flatno||e.address.wing||e.address.floorno?t+", "+e.address.building:e.address.building),e.address.plotno&&(t=t+", PLOT NO."+e.address.plotno),e.address.sectorno&&(t=t+", SECTOR NO."+e.address.sectorno),e.address.streetname&&(t=t+", "+e.address.streetname),e.address.landmark&&(t=t+", "+e.address.landmark),e.address.selectedGmapArea?console.log("new add"):h=e.address.editgeolocation;var s={};s.area_id=e.address.selectedArea._id,s.city_id=e.address.selectedCity,s.sublocation_text=e.address.sublocation,s.googleplace_id=e.address.googleplace_id,s.title=e.address.addresstype,s.building=e.address.building,s.pincode=e.address.pincode,s.wing=e.address.wing,s.plotno=e.address.plotno,s.floor=e.address.floorno,s.streetname=e.address.streetname,s.landmark=e.address.landmark,s.flatno=e.address.flatno,s.sectorno=e.address.sectorno,s.address=t,s.servicedeliveryaddress="true",s.geolocation=h,e.address.editaddressid?e.patient.demography.addresses.forEach(function(a){a._id==e.address.editaddressid&&(a.area_id=e.address.selectedArea._id,a.city_id=e.address.selectedCity,a.sublocation_text=e.address.sublocation,a.googleplace_id=e.address.googleplace_id,a.title=e.address.addresstype,a.building=e.address.building,a.pincode=e.address.pincode,a.wing=e.address.wing,a.plotno=e.address.plotno,a.floor=e.address.floorno,a.streetname=e.address.streetname,a.landmark=e.address.landmark,a.flatno=e.address.flatno,a.sectorno=e.address.sectorno,a.address=t,a.servicedeliveryaddress="true",a.geolocation=h)}):(e.patient.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.patient.demography.addresses.push(s)),a.addNewPatientAddress(e.patient).then(function(t){e.patient.demography=t.response.demography,document.getElementById("addpatient-input").value="",e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.selectedCity=void 0,e.address.sublocation=void 0,e.address.area=void 0,e.address.googleplace_id=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.building=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.addresstype="Home",e.address.selectedGmapArea=void 0,e.address.editaddressid=void 0,h={},h.coordinates=[]})},e.clearData=function(){e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.selectedCity=void 0,e.address.sublocation=void 0,e.address.area=void 0,e.address.googleplace_id=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.building=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.addresstype="Home",e.address.selectedGmapArea=void 0,e.address.editaddressid=void 0,h={},h.coordinates=[]},e.openAddAddress=function(){function t(){e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.selectedCity=void 0,e.address.sublocation=void 0,e.address.area=void 0,e.address.googleplace_id=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.building=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.addresstype="Home",e.address.selectedGmapArea=void 0,e.address.editaddressid=void 0,h={}}e.call.fromtime=void 0,e.call.fromdate=void 0,e.address.sublocation_id=[],e.addaddress._id=void 0,e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",$("#bookAppointmentObjectView").modal("hide"),$("#gmapaddaddress").modal("show"),e.editgmapcheck=!0,l(t,200)
},e.editgmapcheck=!1,e.editgmapaddress=function(t){function a(){e.address.area=t.area_id.name,e.address.sublocation=t.sublocation_text}t?(e.editgmapcheck=!0,e.address.editgeolocation=t.geolocation,e.address.selectedArea=t.area_id,e.areaList=angular.copy(e.patient.partner_id.areas),e.address.selectedCity=t.city_id,e.address.wing=t.wing,e.address.flatno=t.flatno,e.address.floorno=t.floor,e.address.plotno=t.plotno,e.address.sectorno=t.sectorno,e.address.pincode=t.pincode,e.address.building=t.building,e.address.streetname=t.streetname,e.address.landmark=t.landmark,e.address.addresstype=t.title,e.address.editaddressid=t._id,$("#gmapaddaddress").modal("show"),l(a,200),m||l(e.openMapForAddress,1e3)):e.temppatient.demography.addresses.forEach(function(t){function a(e){for(var t=0;t<g.length;t++)g[t].setMap(e)}function s(){a(null),document.getElementById("addpatient-input").value="",e.address.area=t.area_id.name,e.address.sublocation=t.sublocation_text}"true"==t.servicedeliveryaddress&&(e.address.editgeolocation=t.geolocation,e.address.selectedArea=t.area_id,e.address.selectedCity=t.city_id,e.address.wing=t.wing,e.address.flatno=t.flatno,e.address.floorno=t.floor,e.address.plotno=t.plotno,e.address.sectorno=t.sectorno,e.address.pincode=t.pincode,e.address.building=t.building,e.address.streetname=t.streetname,e.address.landmark=t.landmark,e.address.addresstype=t.title,e.address.editaddressid=t._id,$("#gmapaddaddress").modal("show"),l(s,200),m||l(e.openMapForAddress,1e3))})},e.confirmdeleteaddress=function(t,a){e.addressDeleteIndex=a,$("#confirmdeleteaddressmodal").modal("show")},e.deleteaddress=function(){if(e.patient.demography.addresses&&e.patient.demography.addresses.length){$("#confirmdeleteaddressmodal").modal("hide"),e.patient.demography.addresses.splice(e.addressDeleteIndex,1);var t=a.updatePatient(e.patient);t.then(function(t){e.patient=t.response,delete e.addressDeleteIndex,$("#confirmdeleteaddressmodal").modal("hide")})}},e.closedeleteaddress=function(){delete e.addressDeleteIndex,$("#confirmdeleteaddressmodal").modal("hide")},e.demo={},e.newpatient={},e.editDemography=function(){if(e.temp.externalId=angular.copy(e.patient.externalId),e.newpatient.salutation=angular.copy(e.patient.demography.salutation),e.newpatient.firstname=angular.copy(e.patient.demography.firstname),e.newpatient.middlename=angular.copy(e.patient.demography.middlename),e.newpatient.lastname=angular.copy(e.patient.demography.lastname),e.newpatient.gender=angular.copy(e.patient.demography.gender),e.newpatient.dob=angular.copy(e.patient.demography.dob),e.newpatient.age=angular.copy(e.patient.demography.age),e.newpatient.assumeddob=angular.copy(e.patient.demography.assumeddob),e.newpatient.agetype=angular.copy(e.patient.demography.agetype),e.newpatient.mobilenumber=angular.copy(e.patient.demography.mobilenumber),e.newpatient.email=angular.copy(e.patient.demography.email),e.temp.altnumber=angular.copy(e.patient.demography.altnumber),e.demo.specialneeds=angular.copy(e.patient.specialneeds),sessionStorage.getItem("specialneedsList")){e.specialneedLists=[],e.specialneedLists=JSON.parse(sessionStorage.getItem("specialneedsList"));for(var t=0;t<e.specialneedLists.length;t++)if("NA"==e.specialneedLists[t].name.toUpperCase()){e.specialneedLists.splice(index,1);break}}$("#editpatientnewaaaaa").modal("show")},e.addMultipleSN=function(t){e.demo.specialneeds||(e.demo.specialneeds=[]);var a=!1;_.find(e.demo.specialneeds,function(e){e._id==t._id&&(a=!0)}),a||e.demo.specialneeds.push(t),e.temp.specialneed=""},e.removeSN=function(t,a){e.demo.specialneeds.splice(a,1)},e.cancleEditDemo=function(){e.temp.externalId="",e.newpatient.salutation="",e.newpatient.firstname="",e.newpatient.middlename="",e.newpatient.lastname="",e.newpatient.gender="",e.newpatient.dob="",e.newpatient.age="",e.newpatient.agetype="",e.newpatient.mobilenumber="",e.newpatient.email="",e.newpatient.assumeddob="",e.temp.altnumber=[],$("#editpatientnewaaaaa").modal("hide")},e.cancleEdit=function(){$("#editaddress").modal("hide"),e.editAdd=!1},e.addNewAddress=function(){var t;e.addaddress.wing&&(t=e.addaddress.wing),e.addaddress.flatno&&(t=e.addaddress.wing?t+", "+e.addaddress.flatno:e.addaddress.flatno),e.addaddress.floor&&(t=e.addaddress.flatno||e.addaddress.wing?t+", FLOOR NO."+e.addaddress.floor:"FLOOR NO."+e.addaddress.floor),e.addaddress.building&&(t=e.addaddress.flatno||e.addaddress.wing||e.addaddress.floor?t+", "+e.addaddress.building:e.addaddress.building),e.addaddress.plotno&&(t=t+", PLOT NO."+e.addaddress.plotno),e.addaddress.sectorno&&(t=t+", SECTOR NO."+e.addaddress.sectorno),e.addaddress.streetname&&(t=t+", "+e.addaddress.streetname),e.addaddress.landmark&&(t=t+", "+e.addaddress.landmark),e.addaddress.address=t,e.patient.demography.addresses.push(e.addaddress);var s=a.updatePatient(e.patient);s.then(function(t){e.patient=t.response,$("#editaddress").modal("hide"),e.editAdd=!1,p()})},e.updateDemography=function(){e.patient.externalId=e.temp.externalId,e.patient.demography.salutation=e.newpatient.salutation,e.patient.demography.firstname=e.newpatient.firstname,e.patient.demography.middlename=e.newpatient.middlename,e.patient.demography.lastname=e.newpatient.lastname,e.patient.demography.gender=e.newpatient.gender,e.patient.demography.dob=e.newpatient.dob,e.patient.demography.age=e.newpatient.age,e.patient.demography.agetype=e.newpatient.agetype,e.patient.demography.assumeddob=e.newpatient.assumeddob,e.patient.demography.mobilenumber=angular.copy(e.newpatient.mobilenumber),e.patient.demography.email=e.newpatient.email,e.demo.specialneeds||(e.demo.specialneeds=[]),e.patient.specialneeds=angular.copy(e.demo.specialneeds),e.patient.demography.altnumber=e.temp.altnumber.length?e.temp.altnumber.map(function(e){return e.text}):[];var t=a.updatePatient(e.patient);t.then(function(t){e.patient=t.response,$("#editaddress").modal("hide"),e.editAdd=!1,p(),$("#editpatientnewaaaaa").modal("hide")})},e.saveNewAddress=function(){e.existingPatient=[],e.searchExistingPatientObj={},$("#addNewAddaddressFormExisting").modal("hide"),$("#acceptingNewAddressFromExixting").modal("show")},e.update=function(){e.existingPatient=[],e.searchExistingPatientObj={},$("#acceptingNewAddressFromExixting").modal("hide"),e.newAddressArray.length&&e.newAddressArray.forEach(function(t){t.servicedeliveryaddress="false",e.patient.demography.addresses.push(t)}),e.patient.demography.addresses.forEach(function(t){if(t._id==e.addaddress._id){var a;e.addaddress.wing&&(a=e.addaddress.wing),e.addaddress.flatno&&(a=e.addaddress.wing?a+", "+e.addaddress.flatno:e.addaddress.flatno),e.addaddress.floor&&(a=e.addaddress.flatno||e.addaddress.wing?a+", FLOOR NO."+e.addaddress.floor:"FLOOR NO."+e.addaddress.floor),e.addaddress.building&&(a=e.addaddress.flatno||e.addaddress.wing||e.addaddress.floor?a+", "+e.addaddress.building:e.addaddress.building),e.addaddress.plotno&&(a=a+", PLOT NO."+e.addaddress.plotno),e.addaddress.sectorno&&(a=a+", SECTOR NO."+e.addaddress.sectorno),e.addaddress.streetname&&(a=a+", "+e.addaddress.streetname),e.addaddress.landmark&&(a=a+", "+e.addaddress.landmark),t.address=a,t.area_id=e.addaddress.area_id,t.building=e.addaddress.building,t.city_id=e.addaddress.city_id,t.flatno=e.addaddress.flatno,t.floor=e.addaddress.floor,t.landmark=e.addaddress.landmark,t.pincode=e.addaddress.pincode,t.plotno=e.addaddress.plotno,t.sectorno=e.addaddress.sectorno,t.streetname=e.addaddress.streetname,t.sublocation_id=e.addaddress.sublocation_id,t.title=e.addaddress.title,t.wing=e.addaddress.wing}});var t=a.updatePatient(e.patient);t.then(function(t){e.patient=t.response,$("#editaddress").modal("hide"),e.editAdd=!1,p(),$("#editpatientnewaaaaa").modal("hide")})},e.editAdd=!1,e.addAddressnew=function(){p(),$("#editaddress").modal("show")},e.editAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.editAdd=!0},e.deleteAddress=function(t,a){1!=e.patient.demography.addresses.length?(e.patient.demography.addresses.splice(a,1),t.servicedeliveryaddress&&(e.patient.demography.addresses[0].servicedeliveryaddress="true")):alert("not allowed")},e.editPatient=function(e){a.putPatient(e)},e.close=function(){a.putPatient(),n.path("/main/client")},e.backtolist=function(){n.path("/main/client")},e.deletePatient=function(t){a.deletePatient(t).then(function(){e.table()})},e.getPatient=function(t,s){switch(s){case"byname":e.searchObj.patientname=t;break;case"bymembershipnumber":e.searchObj.membershipnumber=t;break;case"bymembershipdisplay":e.searchObj.membershipdisplay=t}return a.getPatientList("","","","",!1,e.searchObj).then(function(t){return t.response.length>0?(e.Patients=t.response,e.Patients):(e.mgs="Patient not found",delete e.patient.primary_id,delete e.patient.primarymembershipnumber,void 0)})},e.SelectPatient=function(t){e.disablePatient=!0,e.patient.primary_id=t,e.patientname=t.demography.name,e.patient.primarymembershipnumber=t.membershipnumber,e.Patients=[],delete e.searchObj.tempPatientObjByName,delete e.searchObj.tempPatientObjByMSN,e.displayInfo={},e.displayInfo.primarypatientname="Name : "+t.demography.name+", ("+t.membershipnumber+")",$("#primarypatientsearchModel").modal("hide")},e.clearPatient=function(){e.disablePatient=!1,e.Patients=[],delete e.patient.primary_id,delete e.patient.primarymembershipnumber,e.patientname="",e.displayInfo={}},e.getSessionStorage(),e.initializePaging(),e.table=function(t){e.isPaging||e.initializePaging(),e.patientsList=[],a.getPatientList(e.paging,t,!0).then(function(t){e.patientsList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,e.patient_search=""}),e.isPaging=!1},e.init=function(){var t;c.params.Id?a.getAddressByClientId(c.params.Id).then(function(a){t=a.response,e.selectedPateintObj=a.response,t&&(e.patient=t,e.areaList=angular.copy(e.patient.partner_id.areas)),e.patient._id&&(e.patient.demography.altnumber&&(e.temp.altnumber=e.patient.demography.altnumber),e.changeSource());var s=d.get("",e.searchObj);s.then(function(a){e.partnerList=a.response;var s;e.partnerList.forEach(function(e){e._id==t.partner_id&&(s=e)}),e.changePartner(s)})}):(e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[])},e.init(),e.getPartnerArea=function(){e.address.otherArea=!1},e.addaddress={},e.addaddress.city_id={},e.addaddress.area_id={},e.SelectArea=function(t){e.address.otherArea=!1,e.address.majorarea=t,e.addaddress.area_id._id=t.area_id._id,e.addaddress.area_id.name=t.area_id.name,e.addaddress.city_id.name=t.area_id.city_id.name,e.addaddress.city_id._id=t.area_id.city_id._id,u(t.area_id._id)},e.SelectOtherArea=function(t){e.address.majorarea=t,e.addaddress.area_id._id=t._id,e.addaddress.area_id.name=t.name,e.addaddress.city_id.name=t.city_id.name,e.addaddress.city_id._id=t.city_id._id,u(t._id)},e.getAllLocation=function(){e.address.otherArea=!0,o.getOtherArea().then(function(t){e.address.otherAreaArray=t.response,e.address.otherAreaArray&&e.address.otherAreaArray.length&&e.address.otherAreaArray.forEach(function(t,a){e.areaList&&e.areaList.length&&e.areaList.forEach(function(s){t._id==s.area_id._id&&e.address.otherAreaArray.splice(a,1)})})})},e.globaldata=JSON.parse(sessionStorage.getItem("globaldata")),e.changePartner=function(t){e.call.area_id||(e.call.area_id={}),t&&(e.partnerDroppoint=t.droppoints,e.address.droppoints=t.droppoints,e.call.sampledrop=t.droppoints[0],e.partnerVisiteCharge=t.visitcharges,e.user.userdata.userinfo.partner_id=t,e.areaList=e.user.userdata.userinfo.partner_id.areas,e.slotArea=e.user.userdata.userinfo.partner_id.areas,e.workinghours=e.user.userdata.userinfo.partner_id.workinghour,e.searchObj.partner_id=e.user.userdata.userinfo.partner_id._id,e.call.partner_id=t)},e.partnerList=e.user.userdata.userinfo.partners,"partnerfrontoffice"==e.globaldata.userdata.role)e.address.partnerformtoffice=!0,e.call.partner_id=e.partnerList[0],e.changePartner(e.call.partner_id);else if("partnerteamlead"==e.globaldata.userdata.role)e.call.partner_id=e.partnerList[0],e.display.partnername=e.call.partner_id.info.name,e.changePartner(e.call.partner_id);else{var f=d.selectedPartner;e.changePartner(f)}};e.$inject=["$scope","$q","clientFactory","cityFactory","areaFactory","$location","user","orderFactory","partnerFactory","$timeout","$state"];var t=angular.module("webApp");t.controller("clientController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(e){var a="clients/"+e,i=t.defer();return s.httpGET(a).then(function(e){i.resolve(e)}),i.promise}function n(e){var t="deleteclient/"+e;return s.httpDELETE(t)}function r(e){var t="clients";return s.httpPOST(t,e)}function o(e){var t="clients/"+e._id;return s.httpPUT(t,e)}function d(){return this.selectedPatient}function l(){return this.selectedPatient={},this.selectedPatient}function c(e){this.selectedPatient=e}function p(e,a,i){var n;n=0==i?i:!0;var r=t.defer(),o="";e&&e.currentPage&&e.itemPerPage&&(o=o+"page="+e.currentPage+"&limit="+e.itemPerPage+"&"),a&&(a.searchText&&(o=o+"clientsearch="+a.searchText+"&"),a.partner_id&&(o=o+"partner_id="+a.partner_id+"&"),a.firstname&&(o=o+"firstname="+a.firstname+"&"),a.middlename&&(o=o+"middlename="+a.middlename+"&"),a.lastname&&(o=o+"lastname="+a.lastname+"&"));var d="clients?"+o;return s.httpGET(d,n).then(function(e){r.resolve(e)}),r.promise}function u(e){var a="http://164.164.87.47:8090/rhis/df/mobileapp/getPatientList?Mrno="+e+"&Mobileno=",i=t.defer();return s.httpGET(void 0,!0,a).then(function(e){i.resolve(e)}),i.promise}function m(e){var a=t.defer(),i=e,n="clients";return s.httpPOST(n,i,loaderTrue).then(function(e){a.resolve(e)}),a.promise}function g(e){var a=t.defer(),i=e,n="clients/"+e._id;return s.httpPUT(n,i,loaderTrue).then(function(e){a.resolve(e)}),a.promise}function h(e){var a=t.defer(),i=e,n="clients";return s.httpDELETE(n,i,loaderTrue).then(function(e){a.resolve(e)}),a.promise}function v(e,a){var i;i=0==a?a:!0;var n=t.defer(),r="clientsbycode/"+e;return s.httpGET(r,i).then(function(e){n.resolve(e)}),n.promise}function f(e,a){var i;i=0==a?a:!0;var n=t.defer(),r="lims/clients?q="+e;return s.httpGET(r,i).then(function(e){n.resolve(e)}),n.promise}return{getPatientList:p,getABMHPatientList:u,addPatient:m,updatePatient:g,deletePatient:h,getPatient:d,putPatient:c,getByClientCode:v,getPatientListFromLIMS:f,clearSelectedPatient:l,addNewPatientAddress:o,saveNewPatientApi:r,deleteClient:n,getAddressByClientId:i}};e.$inject=["$http","$q","$location","apiCall"],angular.module("webApp").factory("clientFactory",e)}(),function(){"use strict";var e=function(e,t,a){function s(){a.get(e.paging).then(function(t){e.display.clienttest=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}e.display.clienttest,function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,s()}(),e.edit=function(e){t.path("/main/clienttest/"+e)},e.get=function(){s()}};e.$inject=["$scope","$location","clienttestFactory"],angular.module("webApp").controller("clienttestController",e)}(),function(){"use strict";var e=function(e,t,a){function s(t){console.log(e.clienttest),a.add(t).then(function(){e.clienttest={},e.successFlag=!0,e.tags=[]})}function i(t){a.update(t).then(function(){e.clienttest={},e.successFlag=!0,e.tags=[]})}function n(t){a.getById(t).then(function(t){e.tags=t.response.alias,e.clienttest=t.response})}function r(t){a.getByName(t).then(function(t){e.display.services=t.response})}e.clienttest,function(){"new"!=t.Id?n(t.Id):e.clienttest={}}(),e.Save=function(){e.clienttest.alias=[],e.clienttest._id?e.existingService?(e.clienttest.alias[0]=e.clienttest.searchName,e.clienttest.name=e.clienttest.searchName):(e.clienttest.alias[0]=e.clienttest.name,e.clienttest.name=e.clienttest.name):e.existingService?(e.clienttest.alias.push(e.clienttest.searchName),e.clienttest.name=e.clienttest.searchName):(e.clienttest.alias.push(e.clienttest.name),e.clienttest.name=e.clienttest.name),angular.forEach(e.tags,function(t){var a=t.text;e.clienttest.alias.push(a)}),e.clienttest.type="Client",e.clienttest._id?i(e.clienttest):s(e.clienttest)},e.searchByName=function(e){r(e)},e.setServiceName=function(t){e.clienttest.searchName=t.name,e.selected=!0,e.display.services=[]},e.sample=function(){e.selected=!1,e.clienttest.searchName=null}};e.$inject=["$scope","$stateParams","clienttestFactory"],angular.module("webApp").controller("clienttestObjectController",e)}(),angular.module("webApp").factory("clienttestFactory",["apiCall",function(e){function t(t){return e.httpPOST("services",t)}function a(t){return e.httpPUT("services/"+t._id,t)}function s(t){return e.httpGET(t?"services?type=Client&page="+t.currentPage+"&limit="+t.itemPerPage:"services?type=Client")}function i(t){return e.httpGET("services/"+t)}function n(t){return e.httpGET("services?name="+t)}return{add:t,update:a,get:s,getById:i,getByName:n}}]),function(){"use strict";var e=function(e,t,a,s,i){e.searchObj={},e.display={},e.init=function(){var t=i.get();t.then(function(t){e.partnerList=t.response})},e.selectFromPartner=function(t){e.searchObj.from=t._id},e.selectToPartner=function(t){e.searchObj.to=t._id},e.getCopyPartner=function(){i.getAllCopyPartner(e.searchObj).then(function(t){t.message&&t.si&&(alert("copied successfully"),e.successFlag=!0),t.message&&!t.si&&(e.successFlag=!1,alert("not copied"))})},e.init()};e.$inject=["$scope","$location","$q","$state","partnerFactory","user"],angular.module("webApp").controller("copyPartnerController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n){e.user=s,e.datePickerPopup={},e.temp={},e.temp.PartnerList=[],e.display={},e.call={},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.searchObj={},e.searchObj.status="",e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=1};var r=new Date;r=r.setHours("00"),r=new Date(r).setMinutes("00"),r=new Date(r).setSeconds("00"),r=new Date(r).setMilliseconds("000"),e.searchObj.searchDate=new Date(r),e.previousDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()-1)),e.getDashboardDetails()},e.todayDate=function(){var t=new Date;t=t.setHours("00"),t=new Date(t).setMinutes("00"),t=new Date(t).setSeconds("00"),t=new Date(t).setMilliseconds("000"),e.searchObj.searchDate=new Date(t),e.getDashboardDetails()},e.nextDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()+1)),e.getDashboardDetails()},e.getPartners=function(){var t=n.get("",e.searchObj);t.then(function(t){e.partnerList=t.response,e.partnerList.length>0&&e.getDashboardDetails()})},e.getTodaysOrderList=function(){if(e.searchObj.searchDate){var t=a.getOrderList(e.searchObj,e.paging);t.then(function(t){e.todaysitemCount=t.itemCount})}},e.goToOrders=function(){var s=moment(e.dateForOrder).format("MM-DD-YYYY");"providerqa"!=e.user.userdata.role&&(a.fromDashboard=s),t.go("main.order")},e.getWeeksOrderList=function(){if(e.searchObj.fromdate=moment(r).startOf("week"),e.searchObj.todate=moment(r).endOf("week"),e.searchObj.fromdate&&e.searchObj.todate){var t=a.getOrderList(e.searchObj,e.paging);t.then(function(t){e.weeksitemCount=t.itemCount})}},e.getMonthsOrderList=function(){if(e.searchObj.fromdate=moment(r).startOf("month"),e.searchObj.todate=moment(r).endOf("month"),e.searchObj.fromdate&&e.searchObj.todate){var t=a.getOrderList(e.searchObj,e.paging);t.then(function(t){e.monthsitemCount=t.itemCount})}},e.getDashboardDetails=function(){if(e.searchObj.searchDate){e.dateForOrder=e.searchObj.searchDate,e.searchObj.searchDate=new Date(moment(e.searchObj.searchDate).startOf("day")),e.searchObj.searchToDate=new Date(moment(e.searchObj.searchDate).endOf("day")),e.searchObj.searchWeekDate=new Date(moment(e.searchObj.searchDate).startOf("week")),e.searchObj.searchWeekToDate=new Date(moment(e.searchObj.searchDate).endOf("week")),e.searchObj.searchMonthDate=new Date(moment(e.searchObj.searchDate).startOf("month")),e.searchObj.searchMonthToDate=new Date(moment(e.searchObj.searchDate).endOf("month"));var t=i.getDashboardDetails(e.searchObj);t.then(function(t){e.count=t.response})}},e.initializePaging(),e.user.userdata.userinfo.partners.length?"partnerfrontoffice"==e.user.userdata.role||"partnerteamlead"==e.user.userdata.role?(e.partnerList=e.user.userdata.userinfo.partners,e.call.partner_id=e.partnerList[0],e.display.partnername=e.call.partner_id.info.name,e.getDashboardDetails()):e.user.userdata.userinfo.partners.length>0&&(e.partnerList=e.user.userdata.userinfo.partners,e.getDashboardDetails()):e.getPartners(),e.pushPartner=function(t){if(e.temp.PartnerList.length){for(var a=!1,s=0;s<e.temp.PartnerList.length;s++)if(e.temp.PartnerList[s]._id==t._id){a=!0;break}0==a&&e.temp.PartnerList.push(t)}else e.temp.PartnerList.push(t);for(var i=[],s=0;s<e.temp.PartnerList.length;s++)i.push(e.temp.PartnerList[s]._id);e.searchObj.partner_id=i.join(","),e.getDashboardDetails(),e.searchObj.partner={}},e.removePartner=function(t,a){var s=[];e.temp.PartnerList.splice(a,1);for(var i=0;i<e.temp.PartnerList.length;i++)s.push(e.temp.PartnerList[i]._id);e.searchObj.partner_id=s.join(","),e.getDashboardDetails(),e.searchObj.partner={}}};e.$inject=["$scope","$state","orderFactory","user","dashboardFactory","partnerFactory"],angular.module("webApp").controller("dashboardController",e)}(),angular.module("webApp").factory("dashboardFactory",["apiCall",function(e){function t(t){var a="";return t&&(t.searchDate&&(t.searchDate=new Date(t.searchDate).toISOString(),a=a+"&fromdate="+t.searchDate),t.partner_id&&(a=a+"&partner_id="+t.partner_id)),e.httpGET("getordercount?"+a)}return{getDashboardDetails:t}}]),function(){"use strict";var e=function(e,t,a){function s(){a.paginateResult(e.paging,e.search).then(function(t){e.departmentList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}e.search={},e.department={},e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,function(){sessionStorage.getItem("searchDepartment")&&(e.search=JSON.parse(sessionStorage.getItem("searchDepartment")),sessionStorage.removeItem("searchDepartment")),sessionStorage.getItem("searchDepartmentPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchDepartmentPaging")),sessionStorage.removeItem("searchDepartmentPaging")),s()}(),e.edit=function(a){sessionStorage.setItem("searchDepartment",JSON.stringify(e.search)),sessionStorage.setItem("searchDepartmentPaging",JSON.stringify(e.paging)),t.path("/main/Department/"+a)},e.get=function(){s()}};e.$inject=["$scope","$location","departmentFactory"],angular.module("webApp").controller("departmentController",e)}(),function(){"use strict";var e=function(e,t,a){function s(t){a.getById(t).then(function(t){e.department=t.response})}function i(t){a.add(t).then(function(){e.successFlag=!0,e.department={}})}function n(t){a.update(t).then(function(){e.successFlag=!0,e.department={}})}e.department={},function(){"new"!=t.Id?s(t.Id):e.areasobj={}}(),e.Save=function(){e.department._id?n(e.department):i(e.department)}};e.$inject=["$scope","$stateParams","departmentFactory"],angular.module("webApp").controller("departmentObjectController",e)}(),angular.module("webApp").factory("departmentFactory",["apiCall",function(e){function t(){return e.httpGET("departments")}function a(t){var a="departments/"+t;return e.httpGET(a)}function s(t){return e.httpPOST("departments",t)}function i(t){return e.httpPUT("departments/"+t._id,t)}function n(t,a){var s="departments?";return t&&t.currentPage&&t.itemPerPage&&(s=s+"&page="+t.currentPage+"&limit="+t.itemPerPage),a&&a.searchText&&(s=s+"&name="+a.searchText),e.httpGET(s)}return{get:t,getById:a,add:s,update:i,paginateResult:n}}]),function(){"use strict";var e=function(e,t,a,s){function i(){s.get().then(function(t){e.citiesList=t.response})}function n(t,a,s,i){if(e.values[a._id+"-"+t._id]=e.values[t._id+"-"+a._id],e.values[a._id+"-"+t._id]>0){var n={from:t._id,to:a._id,distance:e.values[a._id+"-"+t._id],majorarea:t.parent_areas[0].area_id._id},r={to:t._id,from:a._id,distance:e.values[a._id+"-"+t._id],majorarea:t.parent_areas[0].area_id._id};if(e.values[a._id+"-"+t._id]){for(var o=0;o<s.length;o++)s[o].from==t._id&&s[o].to==a._id?(s[o].distance=n.distance,i=!1):s[o].to==t._id&&s[o].from==a._id&&(s[o].distance=n.distance,i=!1);i&&(s.push(n),s.push(r))}}}e.values={};var r=[],o=[];!function(){i()}(),e.getAreasTypeMA=function(a){a&&(t.getAreasTypeMA(a).then(function(t){e.majorareas=t.response}),e.repeatTable={})},e.setGridValues=function(a){a&&(t.getdistances(a._id).then(function(t){e.distances=t}),t.getSLbyMajorArea(a).then(function(t){e.repeatTable=t.response}),r=[],o=[])},e.saveDistance=function(){e.distances.length?d():l()},e.addDistance=function(t,a){var s=!0;e.distances.length>0?n(t,a,o,s):n(t,a,r,s)},e.getDistance=function(t,a){for(var s=0;s<e.distances.length;s++)if(t._id===e.distances[s].from&&a._id===e.distances[s].to){e.values[a._id+"-"+t._id]=e.values[t._id+"-"+a._id],e.values[a._id+"-"+t._id]=e.distances[s].distance;break}};var d=function(){var e={distances:o};t.putdistances(e).then(function(){})},l=function(){var e={distances:r};t.add(e).then(function(){})}};e.$inject=["$scope","distanceFactory","$http","cityFactory"],angular.module("webApp").controller("distanceController",e)}(),angular.module("webApp").factory("distanceFactory",["apiCall",function(e){function t(t){return e.httpGET("areas?type=MA&city_id="+t._id)}function a(t){return t?e.httpGET("areas?type=SL&area_id="+t._id):void 0}function s(t){return e.httpPOST("distances",t)}function i(t){return e.httpGET("distances?majorarea="+t)}function n(t){return e.httpPUT("distances",t)}return{getAreasTypeMA:t,getSLbyMajorArea:a,add:s,getdistances:i,putdistances:n}}]),angular.module("webApp").filter("setMinuteSecondZero",function(){return function(e){return e=new Date(e.setHours("00")),e=new Date(e.setMinutes("00")),e=new Date(e.setSeconds("00")),e=new Date(e.setMilliseconds("000"))}}),function(){"use strict";var e=function(e,t,a){function s(){a.getList(e.search,e.paging).then(function(t){e.display.hookslogs=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}!function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,s(),e.search={}}(),e.datePickerPopup={},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.get=function(){a.getList(e.search,e.paging).then(function(t){e.display.hookslogs=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.setPost=function(t){e.display.post=t.data},e.setRequest=function(t){e.display.response=t.result}};e.$inject=["$scope","$location","hookslogsFactory"],angular.module("webApp").controller("hookslogsController",e)}(),angular.module("webApp").factory("hookslogsFactory",["apiCall",function(e){function t(t,a){var s="hookslogs?";if(t&&t.date){var i=new Date(t.date).toISOString();s+="fromdate="+i}return a&&(s+="&page="+a.currentPage+"&limit="+a.itemPerPage),e.httpGET(s)}return{getList:t}}]),function(){"use strict";var e=function(e,t,a,s){e.importlogdetail={},function(){if(a.Id){if(!a.Id)return alert("ID not found"),!1;s.getDetailLog(a.Id).then(function(t){e.importlogdetail=t.response})}else t.path("/main/importlogs")}(),e.detailLog=function(t){return t?void s.getDetailLog(t).then(function(t){e.importlogdetail=t.response}):(alert("ID not found"),!1)}};e.$inject=["$scope","$location","$stateParams","importlogsFactory"],angular.module("webApp").controller("importlogObjectController",e)}(),function(){"use strict";var e=function(e,t,a,s){JSON.parse(sessionStorage.getItem("globaldata"));e.reportList=[],e.selectedOptions={};var i=new Date;i=i.setHours("00"),i=new Date(i).setMinutes("00"),i=new Date(i).setSeconds("00"),i=new Date(i).setMilliseconds("000"),e.selectedOptions.fromdate||(e.selectedOptions.fromdate=new Date(i)),e.selectedOptions.todate||(e.selectedOptions.todate=new Date(i)),e.data={},e.showhide={},e.searchObj={},e.datePickerPopup={},e.paging={},e.paging.itemPerPage=20,e.paging.currentPage=1,sessionStorage.getItem("serchImport")&&(e.selectedOptions=JSON.parse(sessionStorage.getItem("serchImport")),sessionStorage.removeItem("serchImport")),sessionStorage.getItem("serchImportPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("serchImportPaging")),sessionStorage.removeItem("serchImportPaging")),e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.minFromDate=0,e.maxFromDate=e.selectedOptions.todate,e.minToDate=e.selectedOptions.fromdate,e.maxToDate=e.selectedOptions.todate,e.$watch("selectedOptions.fromdate",function(t){e.minToDate=t}),e.$watch("selectedOptions.todate",function(t){e.maxFromDate=t}),e.getList=function(){var t={};t.fromdate=e.selectedOptions.fromdate,t.todate=e.selectedOptions.todate,s.getList(t,e.paging).then(function(t){e.impotrLogList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.getList(),e.detailLog=function(t){sessionStorage.setItem("serchImport",JSON.stringify(e.selectedOptions)),sessionStorage.setItem("serchImportPaging",JSON.stringify(e.paging)),a.path("main/importlog/"+t)},e.init()};e.$inject=["$scope","$q","$location","importlogsFactory"];var t=angular.module("webApp");t.controller("importlogsController",e)}(),angular.module("webApp").factory("importlogsFactory",["apiCall",function(e){function t(t,a){var s="importlogs?";return t&&(t.fromdate&&(s=s+"fromdate="+new Date(t.fromdate).toISOString()+"&"),t.fromdate&&(s=s+"todate="+new Date(t.todate).toISOString()+"&")),a&&a.currentPage&&a.itemPerPage&&(s=s+"&page="+a.currentPage+"&limit="+a.itemPerPage),e.httpGET(s)}function a(t){var a="importlogs/"+t;return e.httpGET(a)}return{getList:t,getDetailLog:a}}]),function(){"use strict";function e(e,t,a,s,i,n,r,o){e.name="",e.display={},e.menuOpen=0,e.user=JSON.parse(sessionStorage.getItem("globaldata")),e.init=function(){e.display=JSON.parse(sessionStorage.getItem("globaldata")),e.display.menu=n.getMenu(e.display.userdata.menu),o.getRoles().then(function(t){e.roleList=t.response,angular.forEach(e.roleList,function(t){t.name==e.display.userdata.role&&(e.display.userdata.rolelabel=t.label)})})},e.getWidth=function(){return window.innerWidth},e.toogle=function(t){var a;angular.forEach(e.display.menu,function(e){t==e._id?(a="#"+t,e.collapsed=e.collapsed?!1:!0,$(a).collapse("toggle")):(a="#"+e._id,e.collapsed&&(e.collapsed=!1,$(a).collapse("toggle")))})},e.logout=function(){i.logout()},e.getActiveClass=function(t){return e.activeTab==t?"active1":void 0},e.index=function(e){s.path("main/"+e)},e.city=function(e){console.log(e),s.path("main/"+e)},e.openNotification=function(){$("#element").popover("show")},e.dynamicPopover={templateUrl:"myPopoverTemplate.html",title:"Notifications"},e.gotoOrder=function(t){var a=angularFire.database(),i=a.ref("/"+e.user.userdata.role+"/"+t.key);i.update({read:!0,read_by:e.user.userdata._id.toString()},function(){s.path("/main/order/"+t.redirect.order_id)})},e.changePassword=function(){$("#myModalChangePassword").modal("hide");var t={};t.user_id=e.user.userdata._id.toString(),t.oldpassword=e.oldpassword,t.newpassword=e.newpassword,r.changePassword(t).then(function(e){alert("Password updated successfully !!!")})},e.init(),e.roleCommonNotification=[];var d=angularFire.database(),l=d.ref("/"+e.user.userdata.role);l.on("value",function(t){e.roleCommonNotification=[];var a,s,i=[];t.forEach(function(e){a=e.getKey(),s=e.val(),s.key=a,i.push(s)}),_.each(i,function(e){e.key==a&&(e=s)}),_.each(i,function(t){t.read||e.roleCommonNotification.push(t)}),e.count=e.roleCommonNotification.length}),t(function(){},2e3,0,!0)}angular.module("webApp").controller("MainCtrl",["$scope","$interval","$state","$location","authenticationFactory","menuFactory","userinfoFactory","rolesFactory",e])}(),function(){"use strict";var e=function(e,t,a){function s(){t.getPaginateMenus(e.paging,e.searchObj).then(function(t){e.menus=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount
})}e.menuObj={},function(){e.paging={},e.searchObj={},e.paging.currentPage=1,e.paging.itemPerPage=20,s()}(),e.save=function(){t.add(e.menuObj).then(function(){getMenus()})},e.get=function(){s()},e.edit=function(e){a.path("/main/menu/"+e._id)}};e.$inject=["$scope","menuFactory","$location"],angular.module("webApp").controller("menuController",e)}(),function(){"use strict";var e=function(e,t,a){function s(){t.getList(!0).then(function(t){e.parentmenus=t.response})}function i(a){t.getById(a).then(function(t){e.menuObj=t})}!function(){"new"!=a.Id&&i(a.Id),s()}(),e.Save=function(){e.menuObj._id?t.update(e.menuObj).then(function(){e.successFlag=!0,e.menuObj={}}):t.add(e.menuObj).then(function(){e.successFlag=!0,e.menuObj={}})}};e.$inject=["$scope","menuFactory","$stateParams"],angular.module("webApp").controller("menuObjController",e)}(),angular.module("webApp").factory("menuFactory",["apiCall",function(e){function t(t){var a="menus";return t&&(a+="?isparent=true"),e.httpGET(a)}function a(t){return e.httpPOST("menus",t)}function s(t){return e.httpPUT("menus/"+t._id,t)}function i(e){var t=e,a=[],s=[];return angular.forEach(t,function(e){e.menu_id.isParent?(e.menu_id.collapsed=!1,a.push(e.menu_id)):s.push(e.menu_id)}),angular.forEach(a,function(e){angular.forEach(s,function(t){t.parentID._id==e._id&&(void 0==e.subMenus&&(e.subMenus=[]),e.subMenus.push(t))})}),a}function n(t,a){var s="";return t&&t.currentPage&&t.itemPerPage&&(s+="&page="+t.currentPage+"&limit="+t.itemPerPage),a&&a.menutext&&(s+="&name="+a.menutext),e.httpGET("menus?"+s)}function r(t){return e.httpGET("menus/"+t)}return{getList:t,add:a,update:s,getMenu:i,getById:r,getPaginateMenus:n}}]),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l){function c(){o.getOtherArea().then(function(t){e.temp.otherAreaArray=t.response})}function p(){e.temparea=void 0,e.addaddress._id=void 0,e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark=""}function u(t){var a={};a.type="SL",a.area_id=t,i.get(a).then(function(t){e.subLocationList=t.response})}e.isAdvanceSearch=!0,e.user=r,$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.call={},e.searchExistingPatientObj={},e.details={},e.temp||(e.temp={}),e.temp.newAddressArray={},e.temp.servicedeliveryaddress=!1,e.temp.searchDisableCheck=!1,e.newpatient={},e.address={},e.patientSearchOBJ={},e.searchObj={},e.displayInfo={},e.searchObj.iscarddelivered=!0,e.newMemberRenewalFlag=!0,e.patient={},e.patient.registrationdate=new Date,e.patient.demography={},e.temp.sublocation_id||(e.temp.sublocation_id=[]),c(),e.newpatient={},e.address.addresstype="Home";var m={};m.coordinates=[],e.gmapshowhideCheck=!1,e.gampAddressCheck=!1,e.addAddressButtonCheck=!1,e.openAddAddressCheck=function(){e.showMapCheck=!0,e.addAddressButtonCheck=!1,e.gampAddressCheck=!1,e.address.searchDisableCheck=!1,e.address.area=void 0,e.address.sublocation=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.streetname=void 0,e.address.building=void 0,e.address.landmark=void 0,e.address.selectedArea={},e.address.selectedArea.city_id={},e.temp.googleplace_id=void 0,e.address.selectedArea._id=void 0,e.address.selectedArea.city_id._id=void 0,e.address.searchBar=void 0,e.address._id=void 0,e.gmapshowhideCheck=!0,d(e.reloadmap,0)},e.reloadmap=function(){e.gmapshowhideCheck=!1},e.newPatientAddressFromExistingPateint=function(){e.newPatientList=[],e.existingPatient=[],e.temp.newAddressArray={},e.gampAddressCheck=!0,e.addAddressButtonCheck=!0,e.gmapshowhideCheck=!0,e.address.area=void 0,e.address.sublocation=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.streetname=void 0,e.address.building=void 0,e.address.landmark=void 0,e.address.selectedArea={},e.address.selectedArea.city_id={},e.temp.googleplace_id=void 0,e.address.selectedArea._id=void 0,e.address.selectedArea.city_id._id=void 0,e.address.searchBar=void 0,e.address._id=void 0},e.SearchPatientByName=function(){if(e.searchExistingPatientObj.searchText||e.searchExistingPatientObj.firstname||e.searchExistingPatientObj.middlename||e.searchExistingPatientObj.lastname){e.newPatientList=[];var t={};t.currentPage=1,t.itemPerPage=20;var s={};s.searchText=e.searchExistingPatientObj.searchText,s.firstname=e.searchExistingPatientObj.firstname,s.middlename=e.searchExistingPatientObj.middlename,s.lastname=e.searchExistingPatientObj.lastname,s.partner_id=e.call.partner_id._id;var i=a.getPatientList(t,s,!0);i.then(function(t){e.newPatientList=t.response})}else e.newPatientList=[]},e.clearSearchData=function(){e.searchExistingPatientObj.searchText="",e.searchExistingPatientObj.firstname="",e.searchExistingPatientObj.middlename="",e.searchExistingPatientObj.lastname="",e.clientcheckpoint=!1,e.clientUsercheckpoint=!1,e.newPatientList=[]},e.selectNewPatient=function(t){e.clientUsercheckpoint=!1,e.clientcheckpoint=!1,e.newPatientList=[],e.temp.newAddressArray={},e.searchExistingPatientObj={},e.existingPatient={},e.addressArray=[];var s=a.getAddressByClientId(t._id);s.then(function(t){e.existingPatient=t.response,e.existingPatient.demography.addresses.forEach(function(t){t.servicedeliveryaddress=!1,t.googleplace_id&&e.addressArray.push(t)})})},e.selectedAddressCheck=function(t){e.addressArray.forEach(function(a){a._id==t._id?(a.servicedeliveryaddress=!0,e.temp.newAddressArray=angular.copy(a)):a.servicedeliveryaddress=!1})},e.saveNewAddresstoGmap=function(){e.gmapshowhideCheck=!1,e.addAddressButtonCheck=!0,e.gampAddressCheck=!0,e.address.area=e.temp.newAddressArray.area_id.name,e.address.sublocation=e.temp.newAddressArray.sublocation_text,e.address.wing=e.temp.newAddressArray.wing,e.address.flatno=e.temp.newAddressArray.flatno,e.address.floorno=e.temp.newAddressArray.floor,e.address.plotno=e.temp.newAddressArray.plotno,e.address.sectorno=e.temp.newAddressArray.sectorno,e.address.pincode=e.temp.newAddressArray.pincode,e.address.streetname=e.temp.newAddressArray.streetname,e.address.building=e.temp.newAddressArray.building,e.address.landmark=e.temp.newAddressArray.landmark,e.address.selectedArea={},e.address.selectedArea.city_id={},e.temp.googleplace_id=e.temp.newAddressArray.googleplace_id,e.address.selectedArea._id=e.temp.newAddressArray.area_id._id,e.address.selectedArea.city_id._id=e.temp.newAddressArray.city_id._id,e.address._id=e.temp.newAddressArray._id,e.temp.newAddressArray.geolocation&&(e.temp.newAddressArray.geolocation.coordinates?(e.address.geolocation=e.temp.newAddressArray.geolocation.coordinates,e.address.googleplace_id=e.temp.newAddressArray.googleplace_id):alert("No cordinates present"))},e.temp.altnumber=[],e.addGmapPatient=function(){var t;e.address.wing&&(t=e.address.wing),e.address.flatno&&(t=e.address.wing?t+", "+e.address.flatno:e.address.flatno),e.address.floorno&&(t=e.address.flatno||e.address.wing?t+", FLOOR NO."+e.address.floorno:"FLOOR NO."+e.address.floorno),e.address.building&&(t=e.address.flatno||e.address.wing||e.address.floorno?t+", "+e.address.building:e.address.building),e.address.plotno&&(t=t+", PLOT NO."+e.address.plotno),e.address.sectorno&&(t=t+", SECTOR NO."+e.address.sectorno),e.address.streetname&&(t=t+", "+e.address.streetname),e.address.landmark&&(t=t+", "+e.address.landmark),e.temp.altnumber.length&&(e.newpatient.altnumber=e.temp.altnumber.map(function(e){return e.text}));var s=moment().toISOString(),i={type:"nonmember",registrationdate:s,demography:{addresses:[{_id:e.address._id,area_id:e.address.selectedArea._id,city_id:e.address.selectedArea.city_id._id,sublocation_text:e.address.sublocation,googleplace_id:e.address.googleplace_id,title:e.address.addresstype,wing:e.address.wing,flatno:e.address.flatno,floor:e.address.floorno,building:e.address.building,plotno:e.address.plotno,sectorno:e.address.sectorno,streetname:e.address.streetname,landmark:e.address.landmark,pincode:e.address.pincode,assumeddob:e.address.assumeddob,servicedeliveryaddress:"true",address:t,geolocation:m}],salutation:e.newpatient.salutation,firstname:e.newpatient.firstname,middlename:e.newpatient.middlename,lastname:e.newpatient.lastname,dob:e.newpatient.dob.toISOString(),age:e.newpatient.age,agetype:e.newpatient.agetype,gender:e.newpatient.gender,mobilenumber:e.newpatient.mobilenumber,altnumber:e.newpatient.altnumber,email:e.newpatient.email},partner_id:e.call.partner_id._id,provider_id:e.call.partner_id.provider_id._id,externalId:e.temp.externalId};a.saveNewPatientApi(i).then(function(){n.path("/main/client")})},e.loadSublocation=function(t){var a=e.subLocationList.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return 0==a.length&&alert("no result found"),a},e.tagRemoved=function(){e.addaddress.sublocation_id=void 0,e.temp.sublocationid=void 0,e.addaddress.pincode=void 0},e.genderlist={_id:"555c3a53b08eeddc0dab01d3",name:"genders",displayname:"Genders",optionlist:[{code:"male",displayname:"Male",active:!0},{code:"female",displayname:"Female",active:!0},{code:"thirdgender",displayname:"Third Gender",active:!0}],source:"webhcm"},e.copyAdderss=function(){e.patient.demography.residentialaddress=e.temp.chkAdd?e.patient.demography.servicedeliveryaddress:{}},e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.changeDeceased=function(){e.patient.demography.deceaseddate="",e.patient.demography.deceasedcomment=""},e.changeSource=function(){e.temp.showSourceName="doctorreferral"==e.patient.referredby||"other"==e.patient.referredby?!0:!1},e.loadLanguages=function(a){var s=t.defer();a=a.toLowerCase();var i=e.LanguagesList.optionlist.filter(function(e){return e.displayname.toLowerCase().indexOf(a)>-1?e.code:void 0});return s.resolve(i),s.promise},e.langTagAdded=function(t){e.patient.demography.languagesknown.push(t)},e.langTagRemoved=function(t){var a=e.patient.demography.languagesknown.indexOf(t.text);e.patient.demography.languagesknown.splice(a,1)},e.getSessionStorage=function(){},e.getState=function(){},e.getCity=function(){s.paginateResult().then(function(t){e.cityList=t.response})},e.getArea=function(t){i.get(t).then(function(t){e.areaList=t.response})},e.changeCity=function(){var t={};t.city_id=e.addaddress.city_id._id,e.getArea(t)},e.enterPincode=function(){var t={};t.areasearch=e.addaddress.pincode,e.getArea(t)},e.searchPatient=function(){e.initializePaging(),e.patientsList=[],a.getPatientList(void 0,void 0,e.paging.currentPage,e.paging.itemPerPage,void 0,e.searchObj).then(function(t){e.patientsList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,e.patient_search=""})},e.savePatientdmo=function(){var t=a.updatePatient(e.patient);t.then(function(t){e.patient=t.response,$("#editaddress").modal("hide"),e.editAdd=!1,p(),n.path("/main/client")})},e.addPatient=function(){var t,a=moment().toISOString();e.addaddress.wing&&(t=e.addaddress.wing),e.addaddress.flatno&&(t=e.addaddress.wing?t+", "+e.addaddress.flatno:e.addaddress.flatno),e.addaddress.floor&&(t=e.addaddress.flatno||e.addaddress.wing?t+", FLOOR NO."+e.addaddress.floor:"FLOOR NO."+e.addaddress.floor),e.addaddress.building&&(t=e.addaddress.flatno||e.addaddress.wing||e.addaddress.floor?t+", "+e.addaddress.building:e.addaddress.building),e.addaddress.plotno&&(t=t+", PLOT NO."+e.addaddress.plotno),e.addaddress.sectorno&&(t=t+", SECTOR NO."+e.addaddress.sectorno),e.addaddress.streetname&&(t=t+", "+e.addaddress.streetname),e.addaddress.landmark&&(t=t+", "+e.addaddress.landmark);var s;e.addaddress.building&&(s=e.addaddress.building),e.addaddress.streetname&&(s=s+", "+e.addaddress.streetname);var i=(s.toUpperCase()+" ,"+e.addaddress.area_id.name.toUpperCase()+" ,"+e.addaddress.city_id.name.toUpperCase()+" ,Maharashtra, India. "+e.addaddress.pincode,{});if(e.patient.postData={},e.temp.altnumber||(e.temp.altnumber=[]),e.temp.altnumber.length){var r=[];r=e.temp.altnumber.map(function(e){return e.text})}e.patient.postData={type:"nonmember",registrationdate:a,demography:{addresses:[{area_id:e.addaddress.area_id._id,city_id:e.addaddress.city_id._id,sublocation_id:e.temp.sublocationid,googleplace_id:e.temp.googleplace_id,title:e.addaddress.title,wing:e.addaddress.wing,flatno:e.addaddress.flatno,building:e.addaddress.building,plotno:e.addaddress.plotno,floor:e.addaddress.floor,sectorno:e.addaddress.sectorno,streetname:e.addaddress.streetname,landmark:e.addaddress.landmark,pincode:e.addaddress.pincode,assumeddob:e.patient.demography.assumeddob,servicedeliveryaddress:"true",address:t,geolocation:i}],salutation:e.patient.demography.salutation,firstname:e.patient.demography.firstname,middlename:e.patient.demography.middlename,lastname:e.patient.demography.lastname,dob:e.patient.demography.dob.toISOString(),age:e.patient.demography.age,agetype:e.patient.demography.agetype,gender:e.patient.demography.gender,mobilenumber:e.patient.demography.mobilenumber,altnumber:r,email:e.patient.demography.email},partner_id:e.user.userdata.userinfo.partner_id._id,provider_id:e.user.userdata.provider_id._id,externalId:e.patient.externalId},o.saveNewPatientApi(e.patient.postData).then(function(){n.path("/main/dashboard")})},e.openAddAddress=function(){$("#AddPatientObjectView").modal("hide"),$("#AddressObjectView").modal("show")},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=s,e.addaddress={},e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={}}}else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={}}},e.checkServiceAddress=function(t,a){for(var s=0;s<e.patient.demography.addresses.length;s++)s!=a?e.patient.demography.addresses[s].servicedeliveryaddress="false":e.patient.demography.addresses[a].servicedeliveryaddress="true"},e.closeAddAddress=function(){$("#AddressObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.editAddressnew=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.temparea=t.area_id._id,e.SelectArea(t),e.addaddress.sublocation_id=t.sublocation_id,e.editAdd=!0,$("#editaddress").modal("show")},e.demo={},e.demo.demography={},e.editDemography=function(){e.temp.externalId=angular.copy(e.patient.externalId),e.demo.demography.salutation=angular.copy(e.patient.demography.salutation),e.demo.demography.firstname=angular.copy(e.patient.demography.firstname),e.demo.demography.middlename=angular.copy(e.patient.demography.middlename),e.demo.demography.lastname=angular.copy(e.patient.demography.lastname),e.demo.demography.gender=angular.copy(e.patient.demography.gender),e.demo.demography.dob=angular.copy(e.patient.demography.dob),e.demo.demography.age=angular.copy(e.patient.demography.age),e.demo.demography.agetype=angular.copy(e.patient.demography.agetype),e.demo.demography.mobilenumber=angular.copy(e.patient.demography.mobilenumber),e.demo.demography.email=angular.copy(e.patient.demography.email),e.temp.altnumber=angular.copy(e.patient.demography.altnumber),$("#editpatientnewaaaaa").modal("show")},e.cancleEditDemo=function(){e.temp.externalId="",e.demo.demography.salutation="",e.demo.demography.firstname="",e.demo.demography.middlename="",e.demo.demography.lastname="",e.demo.demography.gender="",e.demo.demography.dob="",e.demo.demography.age="",e.demo.demography.agetype="",e.demo.demography.mobilenumber="",e.demo.demography.email="",e.temp.altnumber=[],$("#editpatientnewaaaaa").modal("hide")},e.cancleEdit=function(){$("#editaddress").modal("hide"),e.editAdd=!1},e.addNewAddress=function(){var t;e.addaddress.wing&&(t=e.addaddress.wing),e.addaddress.flatno&&(t=e.addaddress.wing?t+", "+e.addaddress.flatno:e.addaddress.flatno),e.addaddress.floor&&(t=e.addaddress.flatno||e.addaddress.wing?t+", FLOOR NO."+e.addaddress.floor:"FLOOR NO."+e.addaddress.floor),e.addaddress.building&&(t=e.addaddress.flatno||e.addaddress.wing||e.addaddress.floor?t+", "+e.addaddress.building:e.addaddress.building),e.addaddress.plotno&&(t=t+", PLOT NO."+e.addaddress.plotno),e.addaddress.sectorno&&(t=t+", SECTOR NO."+e.addaddress.sectorno),e.addaddress.streetname&&(t=t+", "+e.addaddress.streetname),e.addaddress.landmark&&(t=t+", "+e.addaddress.landmark),e.addaddress.address=t,e.patient.demography.addresses.push(e.addaddress);var s=a.updatePatient(e.patient);s.then(function(t){e.patient=t.response,$("#editaddress").modal("hide"),e.editAdd=!1,p()})},e.updateDemography=function(){e.patient.externalId=e.demo.externalId,e.patient.demography.salutation=e.demo.demography.salutation,e.patient.demography.firstname=e.demo.demography.firstname,e.patient.demography.middlename=e.demo.demography.middlename,e.patient.demography.lastname=e.demo.demography.lastname,e.patient.demography.gender=e.demo.demography.gender,e.patient.demography.dob=e.demo.demography.dob,e.patient.demography.age=e.demo.demography.age,e.patient.demography.agetype=e.demo.demography.agetype,e.patient.demography.mobilenumber=e.demo.demography.mobilenumber,e.patient.demography.email=e.demo.demography.email,e.temp.altnumber.length&&(e.patient.demography.altnumber=e.temp.altnumber.map(function(e){return e.text}));var t=a.updatePatient(e.patient);t.then(function(t){e.patient=t.response,$("#editaddress").modal("hide"),e.editAdd=!1,p(),$("#editpatientnewaaaaa").modal("hide")})},e.update=function(){e.patient.demography.addresses.forEach(function(t){if(t._id==e.addaddress._id){var a;e.addaddress.wing&&(a=e.addaddress.wing),e.addaddress.flatno&&(a=e.addaddress.wing?a+", "+e.addaddress.flatno:e.addaddress.flatno),e.addaddress.floor&&(a=e.addaddress.flatno||e.addaddress.wing?a+", FLOOR NO."+e.addaddress.floor:"FLOOR NO."+e.addaddress.floor),e.addaddress.building&&(a=e.addaddress.flatno||e.addaddress.wing||e.addaddress.floor?a+", "+e.addaddress.building:e.addaddress.building),e.addaddress.plotno&&(a=a+", PLOT NO."+e.addaddress.plotno),e.addaddress.sectorno&&(a=a+", SECTOR NO."+e.addaddress.sectorno),e.addaddress.streetname&&(a=a+", "+e.addaddress.streetname),e.addaddress.landmark&&(a=a+", "+e.addaddress.landmark),t.address=a,t.area_id=e.addaddress.area_id,t.building=e.addaddress.building,t.city_id=e.addaddress.city_id,t.flatno=e.addaddress.flatno,t.floor=e.addaddress.floor,t.landmark=e.addaddress.landmark,t.pincode=e.addaddress.pincode,t.plotno=e.addaddress.plotno,t.sectorno=e.addaddress.sectorno,t.streetname=e.addaddress.streetname,t.sublocation_id=e.addaddress.sublocation_id,t.title=e.addaddress.title,t.wing=e.addaddress.wing}});var t=a.updatePatient(e.patient);t.then(function(t){e.patient=t.response,$("#editaddress").modal("hide"),e.editAdd=!1,p(),$("#editpatientnewaaaaa").modal("hide")})},e.editAdd=!1,e.addAddressnew=function(){p(),$("#editaddress").modal("show")},e.addAddressnew=function(){$("#addNewAddaddressFormExixting").modal("show")},e.editAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.editAdd=!0},e.deleteAddress=function(t,a){1!=e.patient.demography.addresses.length?(e.patient.demography.addresses.splice(a,1),t.servicedeliveryaddress&&(e.patient.demography.addresses[0].servicedeliveryaddress="true")):alert("not allowed")},e.editPatient=function(e){a.putPatient(e)},e.close=function(){a.putPatient(),n.path("/main/client")},e.backtolist=function(){n.path("/main/client")},e.deletePatient=function(t){a.deletePatient(t).then(function(){e.table()})},e.getPatient=function(t,s){switch(s){case"byname":e.searchObj.patientname=t;break;case"bymembershipnumber":e.searchObj.membershipnumber=t;break;case"bymembershipdisplay":e.searchObj.membershipdisplay=t}return a.getPatientList("","","","",!1,e.searchObj).then(function(t){return t.response.length>0?(e.Patients=t.response,e.Patients):(e.mgs="Patient not found",delete e.patient.primary_id,delete e.patient.primarymembershipnumber,void 0)})},e.SelectPatient=function(t){e.disablePatient=!0,e.patient.primary_id=t,e.patientname=t.demography.name,e.patient.primarymembershipnumber=t.membershipnumber,e.Patients=[],delete e.searchObj.tempPatientObjByName,delete e.searchObj.tempPatientObjByMSN,e.displayInfo={},e.displayInfo.primarypatientname="Name : "+t.demography.name+", ("+t.membershipnumber+")",$("#primarypatientsearchModel").modal("hide")},e.clearPatient=function(){e.disablePatient=!1,e.Patients=[],delete e.patient.primary_id,delete e.patient.primarymembershipnumber,e.patientname="",e.displayInfo={}},e.getSessionStorage(),e.initializePaging(),e.table=function(t){e.isPaging||e.initializePaging(),e.patientsList=[],a.getPatientList(e.paging,t,!0).then(function(t){e.patientsList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,e.patient_search=""}),e.isPaging=!1},e.edit=function(){var t=a.getPatient();t&&(e.patient=t),e.patient._id?(e.patient.demography.altnumber&&(e.temp.altnumber=e.patient.demography.altnumber),e.changeSource()):(e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[])},e.getPartnerArea=function(){e.temp.otherArea=!1},e.addaddress={},e.addaddress.city_id={},e.addaddress.area_id={},e.SelectArea=function(t){e.addaddress.sublocation_id=void 0,e.temp.sublocationid=void 0,e.addaddress.pincode=void 0,e.temp.sublocation_id=[],e.temp.otherArea=!1,e.temp.majorarea=t,e.addaddress.area_id._id=t.area_id._id,e.addaddress.area_id.name=t.area_id.name,e.addaddress.city_id.name=t.area_id.city_id.name,e.addaddress.city_id._id=t.area_id.city_id._id,u(t.area_id._id)},e.SelectOtherArea=function(t){e.addaddress.sublocation_id=void 0,e.temp.sublocationid=void 0,e.addaddress.pincode=void 0,e.temp.sublocation_id=[],e.temp.majorarea=t,e.addaddress.area_id._id=t._id,e.addaddress.area_id.name=t.name,e.addaddress.city_id.name=t.city_id.name,e.addaddress.city_id._id=t.city_id._id,u(t._id)},e.getAllLocation=function(){e.temp.otherArea=!0,o.getOtherArea().then(function(t){e.temp.otherAreaArray=t.response,e.temp.otherAreaArray&&e.temp.otherAreaArray.length&&e.temp.otherAreaArray.forEach(function(t,a){e.areaList&&e.areaList.length&&e.areaList.forEach(function(s){t._id==s.area_id._id&&e.temp.otherAreaArray.splice(a,1)})})})},e.globaldata=JSON.parse(sessionStorage.getItem("globaldata")),e.changePartner=function(t){e.address&&(e.address.area="",e.address.sublocation="",document.getElementById("addpatient-input")&&(document.getElementById("addpatient-input").value="")),e.call.area_id||(e.call.area_id={}),t&&(e.partnerDroppoint=t.droppoints,e.temp.droppoints=t.droppoints,e.call.sampledrop=t.droppoints[0],e.partnerVisiteCharge=t.visitcharges,e.user.userdata.userinfo.partner_id=t,e.areaList=e.user.userdata.userinfo.partner_id.areas,e.slotArea=e.user.userdata.userinfo.partner_id.areas,e.workinghours=e.user.userdata.userinfo.partner_id.workinghour,e.searchObj.partner_id=e.user.userdata.userinfo.partner_id._id)},e.getPartners=function(){var t=l.get("",e.searchObj);t.then(function(t){e.partnerList=t.response})},e.partnerList=e.user.userdata.userinfo.partners,"partnerfrontoffice"==e.globaldata.userdata.role||"partnerteamlead"==e.globaldata.userdata.role?(e.temp.partnerformtoffice=!0,e.call.partner_id=e.partnerList[0],e.display.partnername=e.call.partner_id.info.name,e.changePartner(e.call.partner_id)):"providerteamlead"==e.globaldata.userdata.role?e.partnerList=e.globaldata.userdata.userinfo.partners:e.getPartners()};e.$inject=["$scope","$q","clientFactory","cityFactory","areaFactory","$location","user","orderFactory","$timeout","partnerFactory"];var t=angular.module("webApp");t.controller("clientnewpatientController",e)}(),function(){"use strict";var e=function(e,t,a,s,i){function n(t){a.get().then(function(a){p=a.response,t&&d(t),e.parentOptions=a.response.filter(function(e){return e.isParent?!0:void 0}),e.selectedParentOption=a.response.filter(function(e){return e._id==t?!0:void 0}),e.selectedParentOption.length&&(e.selectedParentOption[0].childs=e.childOptions,sessionStorage.setItem(e.selectedParentOption[0].name,JSON.stringify(e.selectedParentOption[0])))})}function r(){e.opt.isattachment=e.attachments.length?!0:!1,e.opt.attachments=e.attachments,a.update(e.opt).then(function(e){n(e.parent_id),$("#optionModal").modal("hide")})}function o(){e.opt.isattachment=e.attachments.length?!0:!1,e.opt.attachments=e.attachments,a.add(e.opt).then(function(e){n(e.parent_id),$("#optionModal").modal("hide")})}function d(t){e.childOptions=[],e.childOptions=p.filter(function(e){return e.isParent||e.parent_id!=t?void 0:!0})}var l,c,p;e.currentPage=1,e.itemsPerPage=20,e.maxSize=5,function(){n()}(),e.isUpload=!1,e.attachments=[],e.missingPriority=!1,e.get=function(){e.getPaginate()},e.edit=function(t,a){"SpecialInstruction"==e.parentOptionName&&(e.isUpload=!0),e.opt=angular.copy(t),e.attachments=angular.copy(t.attachments),e.missingPriority=!1;for(var s=0;s<e.attachments.length;s++)if(!e.attachments[s].priority){e.missingPriority=!0;break}l=angular.copy(a),c=!1,$("#optionModal").modal("show")},e.saveOption=function(){e.isUpload=!1,e.opt._id?r():o()},e.optionChange=function(t){e.parentOptionName=t.name,e.parentOptionDisplayName=t.displayname,d(t._id)},e.deleteOption=function(t,a){e.activeText=t._Deleted?"Active":"Deactive",a||(e.display.optionDeleteObj=t,$("#optionDeleteModal").modal("show"))},e["delete"]=function(){$("#optionDeleteModal").modal("hide");var t=angular.copy(e.display.optionDeleteObj);t._Deleted=!0,console.log(t),a.deleteOptions(t).then(function(){location.reload()})},e.add=function(t){"SpecialInstruction"==e.parentOptionName&&(e.isUpload=!0),e.attachments=[],e.opt={parent_id:t,isEditable:!0,isParent:!1,isOption:!0},c=!0},e.chooseFile=function(){document.getElementById("file-input").click()},e.onFileSelect=function(t){e.attachments||(e.attachments=[]),e.fileData=t,e.fileData.forEach(function(t){var a={type:t.file.type,url:t.imgBase64,description:t.file.name,priority:""};e.attachments.length?e.attachments.forEach(function(t){t.url!=a.url&&e.attachments.push(a)}):e.attachments.push(a),e.attachments=_.uniqBy(e.attachments,"url"),e.missingPriority=!1;for(var s=0;s<e.attachments.length;s++)if(""==e.attachments[s].priority&&delete e.attachments[s].priority,!e.attachments[s].priority){e.missingPriority=!0;break}})},e.openfile=function(e){i.open(e,"_blank")},e.valdidatepri=function(){e.missingPriority=!1;for(var t=0;t<e.attachments.length;t++)if(""==e.attachments[t].priority&&delete e.attachments[t].priority,!e.attachments[t].priority){e.missingPriority=!0;break}},e.closemodal=function(){e.isUpload=!1},e.removeFile=function(t,a){e.attachments.splice(a,1)}};e.$inject=["$scope","$location","optionMasterFactory","partnerFactory","$window","$sce"],angular.module("webApp").controller("optionMasterController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(e,t){var a="options?isOption=true";return e&&(a=a+"&name="+e),t&&(a=a+"&active="+t),s.httpGET(a)}function n(){var e=t.defer();return i(void 0,!0).then(function(t){t.response.length&&(t.response.forEach(function(e){e.isParent&&(e.childs=[],t.response.forEach(function(t){e._id==t.parent_id&&e.childs.push(t)}),sessionStorage.setItem(e.name,JSON.stringify(e)))}),e.resolve())}),e.promise}function r(e){return s.httpPOST("options",e)}function o(e){return s.httpPUT("options/"+e._id,e)}function d(e){return s.httpDELETE("options/"+e._id,e)}return{get:i,add:r,update:o,deleteOptions:d,loadAllMasters:n}};e.$inject=["$http","$q","$location","apiCall"],angular.module("webApp").factory("optionMasterFactory",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d){function l(){if(sessionStorage.getItem("orderSerch")&&(e.searchObj=JSON.parse(sessionStorage.getItem("orderSerch")),sessionStorage.removeItem("orderSerch")),sessionStorage.getItem("orderSearchPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("orderSearchPaging")),sessionStorage.removeItem("orderSearchPaging")),e.searchObj.partner_id&&e.searchObj.partner_id&&e.paging){var t=[],a=e.searchObj.partner_id.split(",");e.partner=o.checkIfExist_New(a,e.partnerList,"_id").Obj;for(var s=0;s<e.partner.length;s++)t.push(e.partner[s]._id),e.temp.partnerList.push(e.partner[s]);var i=t.join(",");e.searchObj.partner_id=i,e.isPaging=!0}if(e.searchObj.staff_id&&e.searchObj.staff_id&&e.paging){var t=[],a=e.searchObj.staff_id.split(",");e.staff=angular.copy(o.checkIfExist_New(a,e.display.staff,"_id").Obj);for(var s=0;s<e.staff.length;s++)t.push(e.staff[s]._id),e.temp.staffList.push(e.staff[s]);var i=t.join(",");e.searchObj.staff_id=i,e.isPaging=!0}if(e.searchObj.logistic_id&&e.searchObj.logistic_id&&e.paging){var n=[],a=e.searchObj.logistic_id.split(",");e.logisticList=o.checkIfExist_New(a,e.display.logisticStaff,"_id").Obj;for(var s=0;s<e.logisticList.length;s++)n.push(e.logisticList[s]._id),e.temp.logisticList.push(e.logisticList[s]);var i=n.join(",");e.searchObj.logistic_id=i,e.isPaging=!0}if(e.searchObj.createdby_id&&e.searchObj.createdby_id&&e.paging){var n=[],a=e.searchObj.createdby_id.split(",");e.createdbyList=o.checkIfExist_New(a,e.display.createFilterUser,"_id").Obj;for(var s=0;s<e.createdbyList.length;s++)n.push(e.createdbyList[s]._id),e.temp.createdbyList.push(e.createdbyList[s]);var i=n.join(",");e.searchObj.createdby_id=i,e.isPaging=!0}(e.temp.objSat||e.temp.objSar||e.temp.objArj)&&c()}function c(){if(e.display.createFilterUser=[],e.temp.objSat&&e.temp.objSar&&e.temp.objArj?e.temp.createrUser.forEach(function(t){e.temp.partnerList.length?e.temp.partnerList.forEach(function(a){t.userinfo.partners.length?t.userinfo.partners.forEach(function(s){s._id==a._id&&e.display.createFilterUser.push(t)}):e.display.createFilterUser.push(t)}):e.display.createFilterUser.push(t)}):e.temp.objSat||e.temp.objSar||e.temp.objArj?(e.temp.objSat||e.temp.objSar||e.temp.objArj)&&(e.temp.objSat&&e.temp.createrUser.forEach(function(t){("partnerfrontoffice"==t.role||"partnerteamlead"==t.role)&&(e.temp.partnerList.length?e.temp.partnerList.forEach(function(a){t.userinfo.partners.forEach(function(s){s._id==a._id&&e.display.createFilterUser.push(t)})}):e.display.createFilterUser.push(t))}),e.temp.objSar&&e.temp.createrUser.forEach(function(t){"admin"==t.role&&e.display.createFilterUser.push(t),"providerteamlead"==t.role&&(e.temp.partnerList.length?e.temp.partnerList.forEach(function(a){t.userinfo.partners.forEach(function(s){s._id==a._id&&e.display.createFilterUser.push(t)})}):e.display.createFilterUser.push(t))}),e.temp.objArj&&e.temp.createrUser.forEach(function(t){"serviceagent"==t.role&&e.display.createFilterUser.push(t)})):e.temp.createrUser.forEach(function(t){e.temp.partnerList.length?e.temp.partnerList.forEach(function(a){t.userinfo.partners&&t.userinfo.partners.length?t.userinfo.partners.forEach(function(s){s._id==a._id&&e.display.createFilterUser.push(t)}):e.display.createFilterUser.push(t)}):e.display.createFilterUser.push(t)}),e.display.createFilterUser=_.uniqBy(e.display.createFilterUser,"_id"),e.temp.createdbyList.length){var t=[],a=[];e.searchObj.createdby_id="",e.display.createFilterUser.forEach(function(s){e.temp.createdbyList.forEach(function(e){s.username==e.username&&(t.push(s),a.push(s._id))})}),e.searchObj.createdby_id=a.join(","),e.temp.createdbyList=angular.copy(t)}}var p=[],u=[];$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.partnerList=[],e.datePickerPopup={},e.temp={},e.temp.partnerList=[],e.temp.staffList=[],e.display={},e.display.logisticStaff=[],e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0,e.searchObj.partnerlist="",e.searchObj.userlist=""
},e.searchObj={};var m;e.search={},e.searchObj.status="",e.temp.logisticList=[],e.temp.createdbyList=[],e.initializePaging=function(){sessionStorage.getItem("orderSerch")&&(e.searchObj=JSON.parse(sessionStorage.getItem("orderSerch")),sessionStorage.removeItem("orderSerch"),e.partnerList.length&&e.partnerList.forEach(function(t){t._id==e.searchObj.partner_id&&(e.searchObj.partner_id=t)})),sessionStorage.getItem("orderSearchPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("orderSearchPaging")),sessionStorage.removeItem("orderSearchPaging")),e.paging||(e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20)},e.dateInput=n.fromDashboard;var g=new Date;g=g.setHours("00"),g=new Date(g).setMinutes("00"),g=new Date(g).setSeconds("00"),g=new Date(g).setMilliseconds("000"),e.searchObj.searchDate=new Date(g),e.dateforOrder=moment(e.searchObj.searchDate).format("MM-DD-YYYY"),e.searchObj.searchDate=e.dateforOrder!=e.dateInput&&e.dateInput?moment(e.dateInput).toISOString():angular.copy(e.searchObj.searchDate),e.user=d,e.init=function(){if(e.paging||(e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20),e.searchObj.partnerlist=!0,e.searchObj.userlist=!0,sessionStorage.getItem("orderSerch")&&(e.searchObj=JSON.parse(sessionStorage.getItem("orderSerch")),sessionStorage.removeItem("orderSerch")),sessionStorage.getItem("checkpointSat")&&(e.temp.objSat=JSON.parse(sessionStorage.getItem("checkpointSat")),sessionStorage.removeItem("checkpointSat")),sessionStorage.getItem("checkpointSar")&&(e.temp.objSar=JSON.parse(sessionStorage.getItem("checkpointSar")),sessionStorage.removeItem("checkpointSar")),sessionStorage.getItem("checkpointArj")&&(e.temp.objArj=JSON.parse(sessionStorage.getItem("checkpointArj")),sessionStorage.removeItem("checkpointArj")),sessionStorage.getItem("orderSearchPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("orderSearchPaging")),sessionStorage.removeItem("orderSearchPaging")),e.searchObj.status&&(m=e.searchObj.status),e.searchObj.logstatus){var t=[];t=e.searchObj.logstatus.split(",");for(var a=0;a<t.length;a++)"Assigned"==t[a]&&(e.logstatusass=!0,p.push("Assigned")),"Received"==t[a]&&(e.logstatusrec=!0,p.push("Received")),"Reached"==t[a]&&(e.logstatusrech=!0,p.push("Reached"))}e.user.userdata.userinfo.partners.length||(e.searchObj.partnertype||(e.searchObj.partnertype="b2b"),e.getOrderList().then(function(){l()})),"providerteamlead"==e.user.userdata.role&&(e.partnerList=angular.copy(e.user.userdata.userinfo.partners),e.searchObj.city_id=e.user.userdata.profile.city_id._id,e.filterPartnerFromUser(),e.getOrderList().then(function(){l()})),"partnerteamlead"==e.user.userdata.role&&(e.partnerList=angular.copy(e.user.userdata.userinfo.partners),e.searchObj.partner=e.partnerList[0],e.searchObj.partner_id=e.partnerList[0]._id,e.display.partnername=e.searchObj.partner.info.name,e.getOrderList().then(function(){l()})),"partnerfrontoffice"==e.user.userdata.role&&(e.partnerList=angular.copy(e.user.userdata.userinfo.partners),e.searchObj.partner=e.partnerList[0],e.searchObj.partner_id=e.partnerList[0]._id,e.display.partnername=e.searchObj.partner.info.name,e.getOrderList().then(function(){l()}))},e.filterPartnerFromUser=function(){e.searchObj.partnertype||(e.searchObj.partnertype="b2b"),e.partnerList=[],e.user.userdata.userinfo.partners.forEach(function(t){"b2b"==e.searchObj.partnertype?"b2b"!=t.partnertype&&t.partnertype||e.partnerList.push(t):"b2c"==e.searchObj.partnertype&&"b2c"==t.partnertype&&e.partnerList.push(t)})},e.previousDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()-1)),e.paging.currentPage=1,e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.todayDate=function(){var t=new Date;t=t.setHours("00"),t=new Date(t).setMinutes("00"),t=new Date(t).setSeconds("00"),t=new Date(t).setMilliseconds("000"),e.searchObj.searchDate=new Date(t),e.paging.currentPage=1,e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.nextDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()+1)),e.paging.currentPage=1,e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.refreshList=function(){e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.getPartners=function(t){"test"==t&&(e.temp.partnerList=[],e.searchObj.partner_id=""),e.searchObj.partnerlist=!0,e.searchObj.userlist="",e.searchObj.partnertype||(e.searchObj.partnertype="b2b");var a=n.getOrderListNew(e.searchObj,e.paging,e.sort);a.then(function(t){if(e.partnerList=t.partners,e.partnerList||(e.partnerList=[]),e.partnerList.length>1){var a={};a.sortfield="fromtime"}e.getOrderList()})},e.sort={sortfield:"fromtime",sort:"asc"},e.selectedCls=function(t){return t==e.sort.sortfield&&"sort-"+e.sort.sort},e.changeSorting=function(t){e.sort.sortfield==t?e.sort.sort="asc"==e.sort.sort?"desc":"asc":(e.sort.sortfield=t,e.sort.sort="asc"),e.getOrderList()},e.filterOrder=function(t){if(e.searchObj.status=t,"All"==t){e.searchObj.status="",e.OrderList=[];var a=angular.copy(n.orderLiseForFilter);a.forEach(function(t){"Cancelled"!=t.status&&e.OrderList.push(t)})}else if("Open"==t){e.OrderList=[];var a=angular.copy(n.orderLiseForFilter);a.forEach(function(t){"Open"==t.status&&e.OrderList.push(t)})}else if("SampleCollected"==t){e.OrderList=[];var a=angular.copy(n.orderLiseForFilter);a.forEach(function(t){"SampleCollected"==t.status&&e.OrderList.push(t)})}else if("Cancelled"==t){e.OrderList=[];var a=angular.copy(n.orderLiseForFilter);a.forEach(function(t){"Cancelled"==t.status&&e.OrderList.push(t)})}else if("Completed"==t){e.OrderList=[];var a=angular.copy(n.orderLiseForFilter);a.forEach(function(t){"Completed"==t.status&&e.OrderList.push(t)})}else if("SampleHandover"==t){e.OrderList=[];var a=angular.copy(n.orderLiseForFilter);a.forEach(function(t){"SampleHandover"==t.status&&e.OrderList.push(t)})}e.getOrderList(t)},e.setStatus=function(t){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,e.isPaging=!0,e.searchObj.status=t,e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList(t)},e.clearLogiStatus=function(){delete e.searchObj.logstatus,e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.getOrderListcehck=function(t,a){p.length||(p=[]),"Assigned"==t&&1==a?p.push(t):"Assigned"==t&&0==a&&p.forEach(function(e,t){"Assigned"==e&&p.splice(t,1)}),"Received"==t&&1==a?p.push(t):"Received"==t&&0==a&&p.forEach(function(e,t){"Received"==e&&p.splice(t,1)}),"Reached"==t&&1==a?p.push(t):"Reached"==t&&0==a&&p.forEach(function(e,t){"Reached"==e&&p.splice(t,1)}),e.searchObj.logstatus=p.join(","),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.createdByRolescheck=function(){(e.temp.objSat||e.temp.objSar||e.temp.objArj)&&(u=[],e.temp.objSat&&(u.push("partnerfrontoffice"),u.push("partnerteamlead")),e.temp.objSar&&(u.push("admin"),u.push("providerteamlead")),e.temp.objArj&&u.push("serviceagent")),e.temp.objSat&&e.temp.objSar&&e.temp.objArj&&(u=[]),e.temp.objSat||e.temp.objSar||e.temp.objArj||(u=[],e.temp.createdbyList=[],e.searchObj.createdby_id=""),c(),e.searchObj.createdbyrole=u.join(","),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.getOrderList=function(){if(e.searchObj.partnertype||(e.searchObj.partnertype="b2b"),"partnerfrontoffice"==e.user.userdata.role||"partnerteamlead"==e.user.userdata.role){if(delete e.searchObj.partnertype,e.searchObj.searchDate){e.isPaging||e.initializePaging();var t=n.getOrderListNew(e.searchObj,e.paging,e.sort);return t.then(function(t){var a=angular.copy(t);return t.phlebo||(t.phlebo=[]),t.phlebo.length&&(e.display.staff=t.phlebo),t.createdBy||(t.createdBy=[]),t.createdBy.length&&(e.display.createFilterUser=t.createdBy,e.temp.createrUser=angular.copy(e.display.createFilterUser)),t.partners||(t.partners=[]),t.partners.length&&(e.partnerList=t.partners),t.logistics||(t.logistics=[]),t.logistics.length&&(e.display.logisticStaff=t.logistics),t.response.length>0?(e.OrderList=t.response,e.OrderList.forEach(function(e){("Unassigned"==e.status||"Recieved"==e.status||"Rejected"==e.status||"Reached"==e.status||"Accepted"==e.status)&&(e.status="Open")}),n.orderLiseForFilter=e.OrderList,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount):e.OrderList=t.response,a})}}else if(e.searchObj.searchDate){e.isPaging||e.initializePaging();var t=n.getOrderListNew(e.searchObj,e.paging,e.sort);return t.then(function(t){var a=angular.copy(t);if(t.phlebo||(t.phlebo=[]),t.phlebo.length&&(e.display.staff=t.phlebo),t.createdBy||(t.createdBy=[]),t.createdBy.length&&(e.display.createFilterUser=t.createdBy,e.temp.createrUser=angular.copy(e.display.createFilterUser)),t.partners||(t.partners=[]),t.partners.length&&(e.partnerList=t.partners),t.logistics||(t.logistics=[]),t.logistics.length&&(e.display.logisticStaff=t.logistics),t.response.length>0){e.OrderList=t.response;for(var s=[],i=0;i<e.OrderList.length;i++)e.OrderList[i].visitcomments.forEach(function(t){s=angular.copy(t.split(":")),s.forEach(function(t){t=t.trim().toUpperCase(),e.OrderList[i].tempvisitcomments||(e.OrderList[i].tempvisitcomments=[]),e.OrderList[i].tempvisitcomments.push(t)})});e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount}else e.OrderList=t.response;return a})}},e.clearSearchData=function(){e.searchObj.search="",e.searchObj.firstname="",e.searchObj.middlename="",e.searchObj.lastname="",e.getOrderList()},e.SelectOrder=function(a){"Open"!=a.status&&(a.readonly=!0),e.searchObj.partnerlist=!0,e.searchObj.userlist=!0,sessionStorage.setItem("orderSerch",JSON.stringify(e.searchObj)),sessionStorage.setItem("orderSearchPaging",JSON.stringify(e.paging)),e.temp.objSat&&sessionStorage.setItem("checkpointSat",e.temp.objSat),e.temp.objSar&&sessionStorage.setItem("checkpointSar",e.temp.objSar),e.temp.objArj&&sessionStorage.setItem("checkpointArj",e.temp.objArj),t.path("/main/order/"+a._id)},e.NewWorkPlan=function(){i.go("home.WorkPlanAdd")},e.pushPartner=function(t){if("admin"==e.user.userdata.role||"providerteamlead"==e.user.userdata.role){if(e.temp.partnerList.length){for(var a=!1,s=0;s<e.temp.partnerList.length;s++)if(e.temp.partnerList[s]._id==t._id){a=!0;break}0==a&&e.temp.partnerList.push(t)}else e.temp.partnerList.push(t);for(var i=[],s=0;s<e.temp.partnerList.length;s++)i.push(e.temp.partnerList[s]._id);e.searchObj.partner_id=i.join(","),c(),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList(),e.searchObj.partner={}}},e.removePartner=function(t,a){var s=[];if(e.temp.partnerList.splice(a,1),c(),e.temp.partnerList.length){for(var i=0;i<e.temp.partnerList.length;i++)s.push(e.temp.partnerList[i]._id);e.searchObj.partner_id=s.join(","),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()}else e.searchObj.partner_id="",e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.pushStaff=function(t){if(e.temp.staffList.length){for(var a=!1,s=0;s<e.temp.staffList.length;s++)if(e.temp.staffList[s]._id==t._id){a=!0;break}0==a&&e.temp.staffList.push(t)}else e.temp.staffList.push(t);for(var i=[],s=0;s<e.temp.staffList.length;s++)i.push(e.temp.staffList[s]._id);e.searchObj.staff_id=i.join(","),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList(),e.searchObj.staff={}},e.removeStaff=function(t,a){var s=[];if(e.temp.staffList.splice(a,1),e.temp.staffList.length){for(var i=0;i<e.temp.staffList.length;i++)s.push(e.temp.staffList[i]._id);e.searchObj.staff_id=s.join(","),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()}else e.searchObj.staff_id="",e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.pushLogistic=function(t){var a=!1;e.temp.logisticList.length||e.temp.logisticList.push(t);for(var s=0;s<e.temp.logisticList.length;s++)t._id==e.temp.logisticList[s]._id&&(a=!0);a||e.temp.logisticList.push(t);for(var i=[],s=0;s<e.temp.logisticList.length;s++)i.push(e.temp.logisticList[s]._id);e.searchObj.logistic_id=i.join(","),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList(),e.searchObj.logistic={}},e.pushCreatedby=function(t){var a=!1;e.temp.createdbyList.length||e.temp.createdbyList.push(t);for(var s=0;s<e.temp.createdbyList.length;s++)t._id==e.temp.createdbyList[s]._id&&(a=!0);a||e.temp.createdbyList.push(t);for(var i=[],s=0;s<e.temp.createdbyList.length;s++)i.push(e.temp.createdbyList[s]._id);e.searchObj.createdby_id=i.join(","),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList(),e.searchObj.createdby={}},e.removeLogistic=function(t,a){var s=[];if(e.temp.logisticList.splice(a,1),e.temp.logisticList.length){for(var i=0;i<e.temp.logisticList.length;i++)s.push(e.temp.logisticList[i]._id);e.searchObj.logistic_id=s.join(","),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()}else e.searchObj.logistic_id="",e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.removeCreatedby=function(t,a){var s=[];if(e.temp.createdbyList.splice(a,1),e.temp.createdbyList.length){for(var i=0;i<e.temp.createdbyList.length;i++)s.push(e.temp.createdbyList[i]._id);e.searchObj.createdby_id=s.join(","),e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()}else e.searchObj.createdby_id="",e.searchObj.partnerlist="",e.searchObj.userlist="",e.getOrderList()},e.init()};e.$inject=["$scope","$location","$stateParams","$q","$state","orderFactory","userinfoFactory","partnerFactory","user"],angular.module("webApp").controller("orderController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c,p,u,m,g,h,v){function f(e,t){try{return e.sort(function(e,a){var s=e[t],i=a[t];return i>s?-1:s>i?1:0})}catch(a){alert(a.toString())}}function y(t){var a={assignto:t._id};o.assignPhlebo(E,a).then(function(t){e.order=t.order,D()})}function b(){var t={action:"discountreason",updateobj:{discountupdatecomment:{discountupdatereason:e.temp.updatediscountreasonlist}}};t.updateobj.discountupdatecomment.discountupdatecomment||(t.updateobj.discountupdatecomment.discountupdatecomment=[]),e.temp.discountotherdetail&&(t.updateobj.discountupdatecomment.discountupdatecomment[0]=e.temp.discountotherdetail),o.updateobj(t,e.order._id).then(function(t){e.order.discountupdatecomment=t.response.discountupdatecomment,D()})}function w(){$("#updateTestReason").modal("hide"),e.temp.alertMessage="",e.modal.editTestModal.visitingcharges||(e.modal.editTestModal.visitingcharges=0);e.temp.testupdateotherdetail&&(e.temp.updatetestcommentlist=[],e.temp.updatetestcommentlist[0]=e.temp.testupdateotherdetail);var t={tests:e.modal.editTestModal.services,amount:e.modal.editTestModal.amount+e.modal.editTestModal.premiumAmount,reason:e.modal.editTestModal.reason,visitingcharges:e.modal.editTestModal.visitingcharges,orderjson:e.temp.orderjson,parentorder_id:e.order.parentorder_id,discount:-1*parseInt(e.temp.charges.premiumpercentontest),serviceupdatecomment:{testupdatereason:e.temp.updatetestreasonlist,testupdatecomment:e.temp.updatetestcommentlist}};o.updateOrderTest(E,t).then(function(t){e.showAlert=!0,e.alertMessage=t.message,e.order=t.order,D()})}function x(){e.temp.logCheck=!1,e.temp.timeSlots20=[];for(var t=[],a=e.order.fromtime,s=0;49>s;s++)t.push(a),a+=10;console.log(t),t.forEach(function(t){t>=e.order.fromtime&&t<=e.order.fromtime+480&&e.temp.timeSlots20.push(t)}),e.temp.lockTime=parseInt(e.temp.timeSlots20[0])+480,e.temp.logCurrentTime=60*parseInt(moment().format("HH"));var i=moment().format("MM/DD/YYYY");i=new Date(i);var n=moment(e.order.fromdate).format("MM/DD/YYYY");n=new Date(n),n.toISOString()==i.toISOString()&&e.temp.logCurrentTime>=e.temp.lockTime&&(e.temp.logCheck=!0),i>n&&(e.temp.logCheck=!0)}function k(){e.modal.editTestModal.amount=0,e.modal.editTestModal.premiumAmount=0,e.modal.editTestModal.postVisitingCharges=0,e.modal.editTestModal.services.forEach(function(t){e.modal.editTestModal.amount+=parseInt(t.price)}),e.temp.charges&&e.temp.charges.premiumpercentontest&&(e.modal.editTestModal.premiumAmount=e.modal.editTestModal.amount*parseInt(e.temp.charges.premiumpercentontest)/100)}function P(){e.temp.amount=0,e.temp.premiumAmount=0,e.order.services.forEach(function(t){e.temp.amount+=parseInt(t.price)}),e.temp.charges&&e.temp.charges.premiumpercentontest&&(e.temp.premiumAmount=e.temp.amount*parseInt(e.temp.charges.premiumpercentontest)/100)}function S(t){o.updateServiceAddress(E,t).then(function(t){t.order&&(e.order=t.order,t.order.servicedeliveryaddress&&t.order.servicedeliveryaddress.area_id&&(R=t.order.servicedeliveryaddress.area_id._id),D()),t.message&&$("#addressUpdate").modal("show")})}function O(t,a){var s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],i=s[moment(t).get("day")];e.temp.charges=l.getVisitCharges(a,i,e.order.partner_id.visitcharges)}function A(){if("partnerfrontoffice"==e.user.userdata.role||"partnerteamlead"==e.user.userdata.role){var t=[],a=angular.copy(e.order.visitcomments);a.forEach(function(e){if(e){var a=e.split(":"),s=a[0].toUpperCase().trim();"SINGLE PRICK"!=s.toUpperCase().trim()&&"DOUBLE PRICK"!=s.toUpperCase().trim()&&"RESCUE PRICK"!=s.toUpperCase().trim()&&t.push(e)}}),e.order.visitcomments=angular.copy(t)}}function C(){e.order.statuslog.forEach(function(t){"SampleCollected"==t.status&&(e.temp.completedTime=t.statustimestamp),"Completed"==t.status&&(e.temp.deliveredTime=t.statustimestamp),"SampleHandover"==t.status&&(e.temp.sampleHandoverTime=t.statustimestamp)})}function D(){e.temp.check=!1,A(),e.order.serviceupdatecomment&&(e.order.serviceupdatecomment.length&&e.order.serviceupdatecomment.forEach(function(t){e.temp.updatetestoldreasonlist.push(t.testupdatereason)}),e.order.serviceupdatecomment.testupdatecomment||(e.order.serviceupdatecomment.testupdatecomment=[]),e.order.serviceupdatecomment.testupdatecomment.length&&e.order.serviceupdatecomment.testupdatecomment.forEach(function(t){e.temp.testupdateoldotherdetail.push(t)})),e.tempPISI={},e.tempPISI=o.setPISITubes(e.order),e.tempPISI&&(e.order.patientIntruction=e.tempPISI.patientIntruction,e.order.specialIntruction=e.tempPISI.specialIntruction,e.order.tubes=e.tempPISI.tubes),e.temp.discounts=[];var t=e.order.partner_id.discounts;t.forEach(function(t){1==t.active&&e.temp.discounts.push(t)}),e.order.totalreportcharges=0;var a=0;e.order.paymentdetails.reportdeliverymode||(e.order.paymentdetails.reportdeliverymode=[]),e.order.paymentdetails.reportdeliverymode.length&&(e.order.paymentdetails.reportdeliverymode.forEach(function(e){e.charge||(e.charge=0),a+=e.charge}),e.order.totalreportcharges=Math.round(a));var s=moment(e.order.fromdate).format("MM/DD/YYYY"),i=moment(s).add(7,"day");if(s=new Date(s),s>=z){var n=moment(s).format("MM/DD/YYYY"),r=moment(z).format("MM/DD/YYYY");n==r&&e.order.fromtime>H&&(e.temp.disableppbtn=!0),s>z&&(e.temp.disableppbtn=!0)}var n=moment(s).format("MM/DD/YYYY"),r=moment(z).format("MM/DD/YYYY");if(e.temp.isTodayDate=r>n?!1:!0,e.temp.isBackDate=!1,r>n&&(e.temp.isBackDate=!0),e.temp.sevendatecheck=!0,"Completed"==e.order.status||"SampleCollected"==e.order.status){var i=new Date(i),d=new Date;d>=i&&(e.temp.sevendatecheck=!1)}void 0==e.order.paymentdetails.visitingcharges&&(e.order.paymentdetails.visitingcharges=0),e.addressCount=0,e.order.client_id.demography.addresses.forEach(function(t){t.area_id&&t.area_id.name&&(e.addressCount=e.addressCount+1)}),e.addressCount>=1&&(e.addressCount=parseInt(e.addressCount)-1),e.addDiscount(),e.order.ppExistFlag=o.cancelPPOrder(e.order.services),e.order.servicedeliveryaddress.area_id&&e.order.servicedeliveryaddress.area_id._id&&(R=e.order.servicedeliveryaddress.area_id._id),e.order.servicedeliveryaddress.city_id._id&&(F=e.order.servicedeliveryaddress.city_id._id),I=e.order.client_id._id,e.datePickerPopup={},e.datePickerPopup.minDate=new Date,O(e.order.fromdate,e.order.fromtime),P(),M(),e.temp.currentDateIndex=moment(e.order.fromdate).diff(moment().startOf("day").toISOString(),"days"),"F"==e.order.ordertype&&(e.fastingactive=!0,e.ppactive=!1,e.ppOrder=e.order.ppOrder),"PP"==e.order.ordertype&&e.order.parentorder_id&&(e.fastOrder=e.order.fastingOrder),e.order.fromtime&&x()}function T(t){e.areaList||(e.areaList=[]),o.getOrderById(t).then(function(t){e.order=t.response,e.areaList=e.order.partner_id.areas,e.order.partner_id.reportdeliverymode&&(e.temp.reportdeliverymode=e.order.partner_id.reportdeliverymode,e.temp.reportdeliverymode.length&&e.temp.reportdeliverymode.forEach(function(e){e.charge||(e.charge=0)})),D()})}function M(){e.temp.sampleinstructions=[],e.temp.patientIntructions=[],e.temp.sampletypes=[],angular.forEach(e.order.patientIntruction,function(t){e.temp.patientIntructions=j(t,e.temp.patientIntructions)}),angular.forEach(e.order.services,function(t){if(t.service_id.customerinstruction||(t.service_id.customerinstruction=""),t.service_id.specialinstruction?e.temp.sampleinstructions=j(t.service_id.specialinstruction,e.temp.sampleinstructions):t.service_id.specialinstruction="",t.service_id.sampletype){if("NA"!=t.service_id.sampletype.toUpperCase()&&""!=t.service_id.sampletype)if(0==e.temp.sampletypes.length)e.temp.sampletypes.push(t.service_id.sampletype);else{for(var a=!1,s=0;s<e.temp.sampletypes.length;s++)if(e.temp.sampletypes[s].toUpperCase()==t.service_id.sampletype.toUpperCase()){a=!0;break}a||e.temp.sampletypes.push(t.service_id.sampletype)}}else t.service_id.sampletype=""})}function j(e,t){var a=[];"NA"!=e.toUpperCase()&&""!=e&&(t=t.concat(e.toUpperCase().split(",").map(function(e){return e.trim()})));for(var s=0;s<t.length;s++)""!=t[s]&&a.push(t[s]);return t=angular.copy(a),t=_.uniq(t)}function L(e,t){return e.forEach(function(e){e.available&&e.slots.length&&e.slots.forEach(function(e){e.groupIds&&e.groupIds.length&&e.groupIds.forEach(function(a){a==t&&(e.available=!0,e.text="Open")})})}),e}var E,I,R,F,N;e.user=m,e.modal={editTestModal:{},editClientModal:{},changeAddressModal:{},addAddressModal:{},phleboModal:{},openRescheduleOrderModal:{},cancelOrderModal:{},editlogistics:{},schedulePPTestModal:{},logisticComment:{}},e.anotherarea=!1,e.newPatientList=[],e.addressfinalData=[],e.newAddressArray=[],e.checkPoint=!1,e.temp={},e.temp.updatereason=!1,e.address={},e.stringvalue=!1,e.arrayvalue=!1,e.temp.updateDiscountreason=!1,e.temp.isTodayDate=!1,e.cancelMaster=JSON.parse(sessionStorage.getItem("WebCancelReasons")),e.temp.testupdatereasons=JSON.parse(sessionStorage.getItem("EditTestReasons")),e.temp.discountupdatereasons=JSON.parse(sessionStorage.getItem("EditDiscountReasons")),e.cancelMaster=e.cancelMaster.childs;var q=JSON.parse(sessionStorage.getItem("TubeType"));!function(){q.childs=_.sortBy(q.childs,function(e){return e.priority}),e.datePickerPopup={},E=r.params.Id,T(E),e.positions=[{pos:[40.71,-74.21]},{pos:[40.72,-74.2]},{pos:[40.73,-74.19]},{pos:[40.74,-74.18]},{pos:[40.75,-74.17]},{pos:[40.76,-74.16]},{pos:[40.77,-74.15]}]}(),e.editCommentModel=function(t){if(e.modal.editCommentModal={},e.modal.editCommentModal.comment="",e.modal.buttontype=t,e.order.comments.length){var a=[],s="";e.order.comments.forEach(function(e){null!=e&&a.push(e)});var s=a.join();e.modal.editCommentModal.comment=angular.copy(s)}$("#editComment").modal("show")},e.myInterval=0;e.slides=[];e.openimage=function(t){t.attachments||(t.attachments=[]),t.attachments.length&&($("#openImageSlider").modal("show"),e.slides=t.attachments)},e.openfile=function(e){i.open(e,"_blank")},e.saveEditComment=function(){var t=[];e.modal.editCommentModal.comment&&t.push(e.modal.editCommentModal.comment);var a={comments:t};o.updateComment(a,e.order._id).then(function(t){e.order.comments=t.order.comments,$("#editComment").modal("hide")})},e.addPatient=function(){e.newdisplay={},e.order.servicedeliveryaddress.servicedeliveryaddress="true",e.newdisplay.parentPatient=e.order.client_id.demography.salutation.concat(" ").concat(e.order.client_id.demography.fullname),e.newdisplay.fromdate=e.order.fromdate,e.newdisplay.fromtime=e.order.fromtime,void 0!=e.order.ppOrder&&(e.newdisplay.fromPpdate=e.order.ppOrder.fromdate,e.newdisplay.fromPptime=e.order.ppOrder.fromtime),e.newdisplay.orderGroupId=e.order.orderGroupId,e.newdisplay.createdbyname=e.order.createdbyname,e.newdisplay.selectedArea=e.order.servicedeliveryaddress.area_id,e.newdisplay.partnerDetail=e.order.partner_id,e.newdisplay.provider_id=e.order.provider_id,e.newdisplay.paymentdetails||(e.newdisplay.paymentdetails={}),e.newdisplay.paymentdetails.reportdeliverymode=[],e.newdisplay.paymentdetails.reportdeliverymode=e.order.paymentdetails.reportdeliverymode,e.newdisplay.status=e.order.status,e.newdisplay.parentorderid=e.order.parentorder_id?e.order.parentorder_id:e.order._id,e.newdisplay.currentparent_id=e.order._id,o.parentPatientAddress=e.order.servicedeliveryaddress,o.display=e.newdisplay,r.go("main.addpatient")},e.editDropPointModel=function(){e.temp.droppointsOption=e.order.partner_id.droppoints,e.temp.droppointsOption.forEach(function(t){t._id==e.order.droppointaddress._id&&(e.temp.sampledrop=t)}),$("#updateDroppoint").modal("show")},e.saveEditDroppoint=function(){$("#updateDroppoint").modal("hide");var t={action:"droppoints",updateobj:e.temp.sampledrop};o.updateobj(t,e.order._id).then(function(t){e.order=t.response,D()})},e.removeSN=function(t){e.temp.specialneedArray.forEach(function(a,s){a._id==t._id&&e.temp.specialneedArray.splice(s,1)})},e.addMultipleSN=function(t){if(t&&t._id){var a=!0;e.temp.specialneedArray.forEach(function(s,i){"NA"==s.name.toUpperCase()&&e.temp.specialneedArray.splice(i,1),s._id==t._id&&(a=!1)}),"NA"==t.name.toUpperCase()&&(e.temp.specialneedArray=[]),a&&e.temp.specialneedArray.push(t),e.temp.specialneed=""}},e.editSpecialNeedModel=function(){v.get().then(function(t){e.temp.specialneedList=t.response,e.temp.specialneedArray=angular.copy(e.order.specialneed),$("#updateSpecialneed").modal("show")})},e.saveEditSpecialNeed=function(){$("#updateSpecialneed").modal("hide");var t={action:"specialneed",updateobj:e.temp.specialneedArray};o.updateobj(t,e.order._id).then(function(t){e.order=t.response,D()})},e.addPaymentOptions=function(t){e.temp.paymentoptionsList||(e.temp.paymentoptionsList=[]);var a=!1;_.find(e.temp.paymentoptionsList,function(e){e.toUpperCase()==t.toUpperCase()&&(a=!0)}),a||e.temp.paymentoptionsList.push(t),e.display.paymentoption=""},e.editPaymentOptionModel=function(){e.temp.paymentoptions=angular.copy(e.order.partner_id.paymentoptions),e.temp.paymentoptionsList=angular.copy(e.order.paymentdetails.paymentoptions),$("#updatePaymentOption").modal("show")},e.removePayment=function(t){e.temp.paymentoptionsList.splice(t,1)},e.saveEditPaymentOption=function(){$("#updatePaymentOption").modal("hide");var t={action:"paymentoption",updateobj:{paymentoptions:e.temp.paymentoptionsList}};o.updateobj(t,e.order._id).then(function(t){e.order=t.response,D()})},e.temp.updatediscount=[],e.addDiscountModal=function(t){e.temp.updatediscount=[],t&&(e.temp.updatediscount=angular.copy(e.order.paymentdetails.orderDiscount)),$("#updateDiscount").modal("show")},e.temp.updatetestreasonlist=[],e.addTestReasonArray=function(t){var a=!0;!e.temp.updatetestreasonlist.length&&t?e.temp.updatetestreasonlist.push(t):t&&(e.temp.updatetestreasonlist.forEach(function(e){e._id==t._id&&(a=!1)}),a&&e.temp.updatetestreasonlist.push(t)),e.temp.updatetestreasonobj=void 0},e.removeTestUpdateReason=function(t,a){e.temp.updatetestreasonlist.splice(a,1)},e.temp.updatediscountreasonlist=[],e.addDiscountReasonArray=function(t){var a=!0;!e.temp.updatediscountreasonlist.length&&t?e.temp.updatediscountreasonlist.push(t):t&&(e.temp.updatediscountreasonlist.forEach(function(e){e._id==t._id&&(a=!1)}),a&&e.temp.updatediscountreasonlist.push(t)),e.temp.updatetestreasonobj=void 0},e.removeDiscountUpdateReason=function(t,a){e.temp.updatediscountreasonlist.splice(a,1)},e.addDiscountArray=function(t){var a=!0;!e.temp.updatediscount.length&&t?e.temp.updatediscount.push(t):t&&(e.temp.updatediscount.forEach(function(e){e._id==t._id&&(a=!1)}),a&&e.temp.updatediscount.push(t)),e.temp.updatediscountobj=void 0},e.removeDiscount=function(t){var a=void 0;e.temp.updatediscount.forEach(function(e,s){t.name==e.name&&(a=s)}),e.temp.updatediscount.splice(a,1)},e.displayDescription=function(){$(".popoverData").popover(),$(".popoverOption").popover({trigger:"hover"})},e.openAssignPhleboModal=function(){u.getAreaPhleboList(R,e.order.fromdate,e.order.fromtime,N).then(function(t){e.modal.phleboModal.users=t.response.users,$("#phleboModal").modal("show");try{var a=[];if(t.response.users){for(var s=0;s<t.response.users.length;s++)if(t.response.users[s]&&t.response.users[s].orders){for(var i=0;i<t.response.users[s].orders.length;i++)a.push(t.response.users[s].orders[i]);var n=f(a,"fromtime");t.response.users[s].orders=n,a=[]}for(var s=(o.specialMasterTestPresent(e.order.services),0);s<t.response.users.length;s++)t.response.users[s]}}catch(r){alert(r.toString())}})},e.searchArea=function(t){e.modal.addAddressModal.slotareaCheck||e.modal.addAddressModal.otherareaCheck||alert("Please Select Slots Area");var a,s,i=[],n=t,r=[];try{s=parseInt(t),a=isNaN(s)?!0:!1}catch(o){a=!1}if(e.modal.addAddressModal.otherareaCheck){if(a&&t.length>3&&(i=e.modal.addAddressModal.anotherareaList.filter(function(e){return-1!==e.name.toLowerCase().indexOf(n.toLowerCase())?!0:void 0})),!a&&t.length>5&&(i=e.modal.addAddressModal.anotherareaList.filter(function(e){for(var t=0;t<e.pincodes.length;t++)if(-1!==e.pincodes[t].toLowerCase().indexOf(n.toLowerCase()))return!0})),i&&i.length)for(var d=0;d<i.length;d++)if(e.order&&e.order.partner_id&&e.order.partner_id.areas)for(var l=0;l<e.order.partner_id.areas.length;l++)if(i[d]._id.toString()==e.order.partner_id.areas[l].area_id._id.toString()&&(i.splice(d,1),0==i.length)){alert("No SlotArea Available"),e.modal.addAddressModal.otherarea.length=0,e.modal.addAddressModal.otherarea=null;break}return i}if(e.modal.addAddressModal.slotareaCheck&&e.order&&e.order.partner_id&&e.order.partner_id.areas){var c=e.order.partner_id.areas;if(e.modal.addAddressModal.slotareaCheck){if(a&&t.length>3&&(r=c.filter(function(e){return-1!==e.area_id.name.toLowerCase().indexOf(n.toLowerCase())?e.area_id:void 0})),!a&&t.length>5&&(r=c.filter(function(e){for(var t=0;t<e.area_id.pincodes.length;t++)if(-1!==e.area_id.pincodes[t].toLowerCase().indexOf(n.toLowerCase()))return!0})),r&&r.length)for(var l=0;l<r.length;l++)i.push(r[l].area_id);return i}}},e.checkValidation=function(t){try{e.modal.addAddressModal.otherarea?e.modal.addAddressModal.otherarea.length>1?(e.modal.addAddressModal.otherarea.splice(1,1),alert("Only One Area Selection Allowed"),0==e.modal.addAddressModal.otherarea.length&&e.setSublocationForOtherArea(e.modal.addAddressModal.otherarea[0])):e.setSublocationForOtherArea(e.modal.addAddressModal.otherarea[0]):(e.setSublocationForOtherArea(t),e.modal.addAddressModal.city_id=t.city_id)}catch(a){alert(a.toString())}},e.cancelAddAddress=function(){$("#btna").html("Add Another Area"),e.anotherarea=!1,$("#btna").hide(),$("#addAddressModal").hide()},e.tagRemoved=function(){e.modal.addAddressModal.otherarea&&1==e.modal.addAddressModal.otherarea.length&&e.order.servicedeliveryaddress&&e.order.servicedeliveryaddress.area_id&&e.setSublocationForOtherArea(e.order.servicedeliveryaddress.area_id)},e.setAreaSlots=function(){e.anotherarea=!0,e.modal.addAddressModal.otherarea&&e.modal.addAddressModal.otherarea.length>0&&(e.modal.addAddressModal.otherarea=[]),e.modal.addAddressModal.otherareaCheck=e.modal.addAddressModal.slotareaCheck?!1:!0},e.setOtherSlots=function(){e.anotherarea=!0,e.modal.addAddressModal.otherarea&&e.modal.addAddressModal.otherarea.length>0&&(e.modal.addAddressModal.otherarea=[]),e.modal.addAddressModal.slotareaCheck=e.modal.addAddressModal.otherareaCheck?!1:!0},e.changesublocation=function(){e.address.sublocation_id.length&&e.address.sublocation_id.length>1&&e.address.sublocation_id.splice(0,1),e.address.sublocation_id.forEach(function(t){e.modal.addAddressModal.sublocation_id=t,e.modal.addAddressModal.pincode=t.pincodes[0]})},e.loadSublocation=function(t){var a=e.address.subLocationList.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0
});return 0==a.length&&alert("no result found"),a},e.tagRemovednew=function(){e.modal.addAddressModal.sublocation_id=void 0,e.modal.addAddressModal.pincode=void 0},e.setSublocationForOtherArea=function(t){e.modal.addAddressModal.sublocation_id="",t&&o.getsublocationapi(t._id).then(function(t){e.address.subLocationList=t.response})},e.changePhleboModal=function(){u.getAreaPhleboList(R,e.order.fromdate,e.order.fromtime,N).then(function(t){e.modal.phleboModal.users=t.response.users,$("#phleboModal").modal("show")})},e.assignPhlebo=function(t){$("#phleboModal").modal("hide");var a=!1;if(t.orders)for(var s=0;s<t.orders.length;s++)if(t.orders[s].servicedeliveryaddress._id!=e.order.servicedeliveryaddress._id&&t.orders[s].fromtime==e.order.fromtime){a=!0;break}a?(e.phlebo=t,$("#confirmPhleboModal").modal("show")):y(t)},e.confirmAssignPhlebo=function(){$("#confirmPhleboModal").modal("hide"),y(e.phlebo)},e.cancleAssignPhlebo=function(){e.phlebo={},$("#confirmPhleboModal").modal("hide"),$("#phleboModal").modal("show")},e.changeaddressfromselection=function(){e.modal.changeAddressModal.addresses=angular.copy(e.order.client_id.demography.addresses),e.modal.changeAddressModal.addresses.forEach(function(t){t.servicedeliveryaddress=e.order.servicedeliveryaddress._id==t._id?"true":"false"}),$("#editAddressModal").modal("show")},e.openChangeAddressModal=function(){$("#alertAddressUpdate").modal("show")};var B={};e.openModelGamp=function(){$("#alertSlotArea").modal("hide"),$("#gmapaddaddress").modal("show")},e.newaddressConform=function(){function t(){e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.sublocation=void 0,e.address.area=void 0,e.address.googleplace_id=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.building=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.addresstype="Home",e.address.selectedGmapArea=void 0,e.address.editaddressid=void 0,B={},B.coordinates=[]}$("#gmapaddaddress").modal("show"),e.editgmapcheck=!0,t()},e.openAddAddressModal=function(){$("#alertNewAddressUpdate").modal("show")},e.openAddAddressFromExisting=function(){var t={};e.newAddressArray=[],t.orderGroupId=e.order.orderGroupId;var a=o.getGroupOrderList(t);a.then(function(t){var a=t.response;a.forEach(function(t){t.client_id.demography.addresses.forEach(function(t){e.addressfinalData.push(t._id)})}),e.addressfinalData=_.uniqBy(e.addressfinalData,"_id");for(var s=0,i=e.addressfinalData.length;i>s;){var n=!1;_.find(e.order.client_id.demography.addresses,function(t){i>s&&e.addressfinalData[s]._id.toString()==t._id.toString()&&(e.addressfinalData.splice(s,1),i--,n=!0)}),n||s++}$("#editAddressModal").modal("hide"),$("#addAddressModalforexisting").modal("show")})},e.addressAccept=function(){$("#addAddressModalforexisting").modal("hide"),$("#addingNewAddressFromExixting").modal("show")},e.selectedAddressCheck=function(t){var a=e.newAddressArray.indexOf(t);a>-1?e.newAddressArray.splice(a,1):e.newAddressArray.push(t)},e.saveClientAddress=function(){e.addressfinalData=[],e.temp.checkValue=!1,$("#addingNewAddressFromExixting").modal("hide");var t={};n.getAddressByClientId(e.order.client_id._id).then(function(a){t=a.response,t.demography.addresses||(t.demography.addresses=[]),e.newAddressArray.length&&e.newAddressArray.forEach(function(e){e.servicedeliveryaddress="false",t.demography.addresses.push(e)}),n.updatePatient(t).then(function(t){e.order.client_id._id=t.response._id,e.order.client_id.demography=t.response.demography,e.order.client_id.externalId=t.response.externalId,e.addressCount=0,e.order.client_id.demography.addresses.forEach(function(t){t.area_id&&t.area_id.name&&(e.addressCount=e.addressCount+1)}),e.addressCount>=1&&(e.addressCount=parseInt(e.addressCount)-1),e.changeaddressfromselection()})})},e.addGmapAddress=function(){$("#gmapaddaddress").modal("hide");var t;e.address.wing&&(t=e.address.wing),e.address.flatno&&(t=e.address.wing?t+", "+e.address.flatno:e.address.flatno),e.address.floorno&&(t=e.address.flatno||e.address.wing?t+", FLOOR NO."+e.address.floorno:"FLOOR NO."+e.address.floorno),e.address.building&&(t=e.address.flatno||e.address.wing||e.address.floorno?t+", "+e.address.building:e.address.building),e.address.plotno&&(t=t+", PLOT NO."+e.address.plotno),e.address.sectorno&&(t=t+", SECTOR NO."+e.address.sectorno),e.address.streetname&&(t=t+", "+e.address.streetname),e.address.landmark&&(t=t+", "+e.address.landmark),e.address.selectedGmapArea?console.log("new add"):B=e.address.editgeolocation;var a={};a.area_id=e.address.selectedArea._id,a.city_id=e.address.selectedArea.city_id?e.address.selectedArea.city_id._id:e.address.selectedCity._id;var s={address:{city_id:a.city_id,area_id:a.area_id,title:e.address.addresstype,sublocation_text:e.address.sublocation,googleplace_id:e.address.googleplace_id,pincode:e.address.pincode,plotno:e.address.plotno,floor:e.address.floorno,sectorno:e.address.sectorno,wing:e.address.wing,flatno:e.address.flatno,building:e.address.building,streetname:e.address.streetname,landmark:e.address.landmark,servicedeliveryaddress:"true",address:t,geolocation:B},client_id:e.order.client_id._id};e.order.parentorder_id&&(s.parentorder_id=e.order.parentorder_id),s.visitingcharges=0,e.address.editaddressid&&(s.address._id=e.address.editaddressid);var i=e.order._id;o.updateAddressApi(s,i).then(function(t){t.order&&(e.order=t.order,D()),t.message&&$("#addressUpdate").modal("show"),document.getElementById("addpatient-input").value="",$("#gmapaddaddress").modal("hide"),e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.sublocation=void 0,e.address.area=void 0,e.address.googleplace_id=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.building=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.addresstype="Home",e.address.selectedGmapArea=void 0,e.address.editaddressid=void 0,B={},B.coordinates=[]})},e.openEditAddressModal=function(t){function a(){e.address.sublocation=t.sublocation_text,e.address.area=t.area_id.name}e.address.editgeolocation=t.geolocation,e.address.selectedArea=t.area_id,e.address.selectedCity=t.city_id,e.address.wing=t.wing,e.address.flatno=t.flatno,e.address.floorno=t.floor,e.address.plotno=t.plotno,e.address.sectorno=t.sectorno,e.address.pincode=t.pincode,e.address.building=t.building,e.address.streetname=t.streetname,e.address.landmark=t.landmark,e.address.addresstype=t.title,e.address.editaddressid=t._id,e.address.googleplace_id=t.googleplace_id,$("#gmapaddaddress").modal("show"),e.editgmapcheck=!0,h(a,250)},e.editAddressModal=function(){"SampleCollected"==e.order.status||"SampleHandover"==e.order.status||"Completed"==e.order.status?$("#editaddressAlert").modal("show"):e.openEditAddressModal(e.order.servicedeliveryaddress)},e.onAddressClick=function(t){e.modal.changeAddressModal.addresses.forEach(function(e){e.servicedeliveryaddress=e._id==t?"true":"false"})},e.changeAddress=function(){var t={client_id:e.order.client_id._id};e.modal.changeAddressModal.addresses.forEach(function(e){"true"==e.servicedeliveryaddress&&(delete e.hashkey,t.address=e)}),$("#editAddressModal").modal("hide"),S(t)},e.saveNewAddress=function(){e.anotherarea=!1,$("#btna").html("Add Another Area");var t={client_id:e.order.client_id._id};t.address=e.modal.addAddressModal,t.address.servicedeliveryaddress="true",t.address.address="",e.modal.addAddressModal.wing&&(t.address.address+=e.modal.addAddressModal.wing.trim()+", "),e.modal.addAddressModal.flatno&&(t.address.address+=e.modal.addAddressModal.flatno.trim()+", "),e.modal.addAddressModal.floor&&(t.address.address+="Floor no. "+e.modal.addAddressModal.floor.trim()+", "),e.modal.addAddressModal.building&&(t.address.address+=e.modal.addAddressModal.building.trim()+", "),e.modal.addAddressModal.plotno&&(t.address.address+="Plot no. "+e.modal.addAddressModal.plotno.trim()+", "),e.modal.addAddressModal.sectorno&&(t.address.address+="Sector no. "+e.modal.addAddressModal.sectorno.trim()+", "),e.modal.addAddressModal.streetname&&(t.address.address+=e.modal.addAddressModal.streetname.trim()+", "),e.modal.addAddressModal.landmark&&(t.address.address+=e.modal.addAddressModal.landmark.trim()+", "),e.modal.addAddressModal.area&&(t.address.address+=e.modal.addAddressModal.area.trim()+", "),t.address.pincode=e.modal.addAddressModal.pincode,e.modal.addAddressModal.otherarea?(t.address.area_id=e.modal.addAddressModal.otherarea[0],delete e.modal.addAddressModal.otherarea):t.address.area_id=R,t.address.city_id=F,$("#addAddressModal").modal("hide"),S(t)},e.subLocationChange=function(){var t=_.find(e.address.subLocationList,function(t){return t._id==e.modal.addAddressModal.sublocation_id});t.pincodes&&t.pincodes.length&&(e.modal.addAddressModal.pincode=t.pincodes[0])},e.showComponents=function(t){var a={},s={service_id:t};a.services=angular.copy([s]),o.getUniqueTest(a).then(function(a){e.componemtModal={name:t.name,category:t.category},e.componemtModal.services=a.response,$("#showComponentsModal").modal("show")})},e.openEditTestModal=function(t){"onlyPP"==t&&(e.editOnlyPP=t,_.each(e.order.services,function(t){_.each(e.ppOrder.services,function(e){t.service_id._id==e.service_id&&(t.ispp=!0)})})),e.modal.editTestModal.services=angular.copy(e.order.services),e.modal.editTestModal.visitingcharges=e.order.paymentdetails.visitingcharges;({partner_id:e.order.partner_id._id,active:!0});k(),e.addDiscountupdated(),e.order.ppExistFlag=o.cancelPPOrder(e.order.services),$("#partnerServiceModal").modal("show")},e.discountamountupdated=0,e.discountperupdated=0;e.addDiscountupdated=function(){e.discountamountupdated=0;var t=0;void 0==e.order.paymentdetails.orderDiscount&&(e.order.paymentdetails.orderDiscount={}),void 0==e.order.paymentdetails.orderDiscount.discount&&(e.order.paymentdetails.orderDiscount.discount=0);var a=angular.copy(e.modal.editTestModal.services);a.forEach(function(a){(0==a.service_id.price.discountnotapplicable||void 0==a.service_id.price.discountnotapplicable)&&(e.discountperupdated=e.order.paymentdetails.orderDiscount.discount,t+=e.order.paymentdetails.orderDiscount.discount/100*a.service_id.price.mrp,e.discountamountupdated=Math.round(t),e.temp.discountname=angular.copy(e.order.paymentdetails.orderDiscount.name))}),void 0==e.temp.discountname&&(e.temp.discountname="NO DISCOUNT")},e.replaceServices=function(){e.modal.editTestModal.services=e.temp.fServicesAdd,k(),e.addDiscountupdated()},e.openFSecondpopup=function(){$("#addftwothreeServiceConformation").modal("show")},e.addTestTag=function(t){var a=!1;e.temp.isBackDate=!1;var s=moment(e.order.fromdate).format("MM/DD/YYYY"),i=moment().format("MM/DD/YYYY");if(i>s&&(e.temp.isBackDate=!0),e.order.addpatientcomment||(e.order.addpatientcomment={}),e.order.addpatientcomment.addpatientreasons||(e.order.addpatientcomment.addpatientreasons=[]),e.temp.isBackDate&&"Unassigned"==e.order.status&&e.modal.editTestModal.services.length&&e.order.addpatientcomment.addpatientreasons.length){var n={};n.services=angular.copy(e.modal.editTestModal.services),o.getUniqueTest(n).then(function(s){var i=[];if(i=angular.copy(s.response),i.length&&(a=o.checkPPTestInUniqe(i,t)),!a){e.temp.fServicesAdd=[];var n={};return n.serviceIds=[],n.serviceIdtoadd=t._id,e.modal.editTestModal.services.forEach(function(e){n.serviceIds.push(e.service_id._id)}),o.getSuperSetServices(n).then(function(t){t.fewExist?(t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.temp.fServicesAdd.push(a)}),t.messageSome&&!t.message?(e.addServiceConformation=t.messageSome,$("#addServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addftwoServiceConformation=t.messageSome,e.addftwothreeServiceConformation=t.message,$("#addftwoServiceConformation").modal("show"))):(t.message&&(e.coveredPPTestPopupText=t.message,$("#addffServiceConformation").modal("show")),e.modal.editTestModal.services=[],t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.modal.editTestModal.services.push(a),k(),e.addDiscountupdated()}))}),!0}})}else{var r=!0;if("Completed"!=e.order.status&&"SampleCollected"!=e.order.status&&"SampleHandover"!=e.order.status){e.temp.fServicesAdd=[];var d={};return d.serviceIds=[],d.serviceIdtoadd=t._id,e.modal.editTestModal.services.forEach(function(e){d.serviceIds.push(e.service_id._id)}),o.getSuperSetServices(d).then(function(t){t.fewExist?(t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.temp.fServicesAdd.push(a)}),t.messageSome&&!t.message?(e.addServiceConformation=t.messageSome,$("#addServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addftwoServiceConformation=t.messageSome,e.addftwothreeServiceConformation=t.message,$("#addftwoServiceConformation").modal("show"))):(t.message&&(e.coveredPPTestPopupText=t.message,$("#addffServiceConformation").modal("show")),e.modal.editTestModal.services=[],t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.modal.editTestModal.services.push(a),k(),e.addDiscountupdated()}))}),!0}var n={};if(!e.modal.editTestModal.services.length){e.temp.fServicesAdd=[];var d={};return d.serviceIds=[],d.serviceIdtoadd=t._id,e.modal.editTestModal.services.forEach(function(e){d.serviceIds.push(e.service_id._id)}),o.getSuperSetServices(d).then(function(t){t.fewExist?(t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.temp.fServicesAdd.push(a)}),t.messageSome&&!t.message?(e.addServiceConformation=t.messageSome,$("#addServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addftwoServiceConformation=t.messageSome,e.addftwothreeServiceConformation=t.message,$("#addftwoServiceConformation").modal("show"))):(t.message&&(e.coveredPPTestPopupText=t.message,$("#addffServiceConformation").modal("show")),e.modal.editTestModal.services=[],t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.modal.editTestModal.services.push(a),k(),e.addDiscountupdated()}))}),!0}n.services=angular.copy(e.modal.editTestModal.services),o.getUniqueTest(n).then(function(a){var s=[];if(s=angular.copy(a.response),s&&s.length)if(s.forEach(function(e){e&&e.postservices&&e.postservices.length&&e.postservices.forEach(function(e){t._id==e._id&&(r=!1)})}),"PROFILE"==t.category||"PACKAGES"==t.category){var i={},n={};i.services=[],n.service_id=angular.copy(t),n.price=angular.copy(t.price.mrp),i.services[0]=n,o.getUniqueTest(i).then(function(a){var s=[];s=a.response;var i=[];if(i=angular.copy(e.modal.editTestModal.services),s.forEach(function(t){t.postservices&&t.postservices.length&&t.postservices.forEach(function(t){i.forEach(function(a,s){t._id==a.service_id._id&&(e.modal.editTestModal.services.splice(s,1),$("#reomvePPModelOpen").modal("show"))})})}),r){e.temp.fServicesAdd=[];var n={};return n.serviceIds=[],n.serviceIdtoadd=t._id,e.modal.editTestModal.services.forEach(function(e){n.serviceIds.push(e.service_id._id)}),o.getSuperSetServices(n).then(function(t){t.fewExist?(t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.temp.fServicesAdd.push(a)}),t.messageSome&&!t.message?(e.addServiceConformation=t.messageSome,$("#addServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addftwoServiceConformation=t.messageSome,e.addftwothreeServiceConformation=t.message,$("#addftwoServiceConformation").modal("show"))):(t.message&&(e.coveredPPTestPopupText=t.message,$("#addffServiceConformation").modal("show")),e.modal.editTestModal.services=[],t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.modal.editTestModal.services.push(a),k(),e.addDiscountupdated()}))}),!0}})}else if(e.modal.editTestModal.services.forEach(function(a,s){t.postservices&&t.postservices.length&&t.postservices.forEach(function(t){t._id==a.service_id._id&&(e.modal.editTestModal.services.splice(s,1),$("#reomvePPModelOpen").modal("show"))})}),r){e.temp.fServicesAdd=[];var d={};return d.serviceIds=[],d.serviceIdtoadd=t._id,e.modal.editTestModal.services.forEach(function(e){d.serviceIds.push(e.service_id._id)}),o.getSuperSetServices(d).then(function(t){t.fewExist?(t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.temp.fServicesAdd.push(a)}),t.messageSome&&!t.message?(e.addServiceConformation=t.messageSome,$("#addServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addftwoServiceConformation=t.messageSome,e.addftwothreeServiceConformation=t.message,$("#addftwoServiceConformation").modal("show"))):(t.message&&(e.coveredPPTestPopupText=t.message,$("#addffServiceConformation").modal("show")),e.modal.editTestModal.services=[],t.services.forEach(function(t){var a={service_id:t,price:t.price.mrp};e.modal.editTestModal.services.push(a),k(),e.addDiscountupdated()}))}),!0}})}},e.clearInvalid=function(){e.modal.editTestModal.selectedservices||(e.modal.editTestModal.selectedservices=[]),e.modal.editTestModal.selectedservices.length=0},e.removeTest=function(t){e.modal.editTestModal.services.splice(t,1),k(),e.addDiscountupdated()},e.searchTestTags=function(t){var a={};return a.searchText=t,a.partner_id=e.order.partner_id._id,a.active=!0,d.getpartnerservices(void 0,a).then(function(e){return e.response})},e.showPPAddButton=function(t){var a=[];return t.postsample?(t.postservices.forEach(function(t){var s=_.find(e.modal.editTestModal.services,function(e){return e.service_id._id==t._id});s&&a.push(s)}),t.postservices.length==a.length?!1:!0):!1},e.addPPTest=function(t){e.temp.postCharge||(e.temp.postCharge=e.temp.charges.postcharge);var a={};e.uniqueServices=[],a.services=angular.copy(e.modal.editTestModal.services),o.getUniqueTest(a).then(function(a){e.uniqueServices=a.response,t.forEach(function(t){var a=!0;e.uniqueServices.forEach(function(s){if(s._id==t._id&&(a=!1),a){var i={service_id:t,price:t.price.mrp};e.modal.editTestModal.services.push(i)}})}),e.modal.editTestModal.services=_.uniqBy(e.modal.editTestModal.services,"service_id._id")})},e.saveEditDiscountOption=function(){if("SampleCollected"==e.order.status||"SampleHandover"==e.order.status||"Completed"==e.order.status)$("#updateDiscountReason").modal("show"),$("#updateDiscount").modal("hide"),e.order.discountupdatecomment&&(e.order.discountupdatecomment.discountupdatecomment?e.temp.discountotherdetail=angular.copy(e.order.discountupdatecomment.discountupdatecomment[0]):e.order.discountupdatecomment.discountupdatecomment=[],e.order.discountupdatecomment.discountupdatereason?e.temp.updatediscountreasonlist=angular.copy(e.order.discountupdatecomment.discountupdatereason):e.order.discountupdatecomment.discountupdatereason=[]),e.temp.updateDiscountreason=!1;else{$("#updateDiscount").modal("hide"),e.temp.updatediscount.forEach(function(e){"VISIT CHARGE"==e.discountapplicable&&(e.discountapplicable="VISIT")});var t={action:"discounts",updateobj:e.temp.updatediscount};o.updateobj(t,e.order._id).then(function(t){e.order=t.response,D()})}},e.saveEditDiscountwithReason=function(){if(e.temp.updateDiscountreason)$("#updateDiscountReason").modal("hide"),b();else{$("#updateDiscountReason").modal("hide"),e.temp.updatediscount.forEach(function(e){"VISIT CHARGE"==e.discountapplicable&&(e.discountapplicable="VISIT")});var t={action:"discounts",updateobj:e.temp.updatediscount};o.updateobj(t,e.order._id).then(function(t){e.order=t.response,D(),b()})}},e.saveEditTestwithReason=function(){if(e.temp.updatereason){e.temp.updatetestcommentlist=[],e.temp.updatetestcommentlist[0]=e.temp.testupdateotherdetail,$("#updateTestReason").modal("hide");var t={action:"testupdatereason",updateobj:{serviceupdatecomment:{testupdatecomment:e.temp.updatetestcommentlist,testupdatereason:e.temp.updatetestreasonlist}}};o.updateobj(t,e.order._id).then(function(t){e.order.serviceupdatecomment=t.response.serviceupdatecomment,D()})}else w()},e.editTestReasonUpdateModel=function(t){e.temp.updatereason=!0,e.temp.updatetestreasonlist=angular.copy(t.serviceupdatecomment.testupdatereason),e.temp.testupdateotherdetail=angular.copy(t.serviceupdatecomment.testupdatecomment[0]),$("#updateTestReason").modal("show")},e.editDiscountReasonUpdateModel=function(t){e.temp.updateDiscountreason=!0,e.temp.updatediscountreasonlist=angular.copy(t.discountupdatecomment.discountupdatereason),e.temp.discountotherdetail=angular.copy(t.discountupdatecomment.discountupdatecomment[0]),$("#updateDiscountReason").modal("show")},e.updateTest=function(){$("#partnerServiceModal").modal("hide"),e.temp.updatereason=!1,e.temp.ppFlag="Completed"!=e.order.status||"SampleCollected"!=e.order.status||"SampleHandover"!=e.order.status?o.cancelPPOrder(e.modal.editTestModal.services):!1,"Completed"==e.order.status||"SampleCollected"==e.order.status||"SampleHandover"==e.order.status?($("#updateTestReason").modal("show"),e.order.serviceupdatecomment||(e.order.serviceupdatecomment={}),e.order.serviceupdatecomment.testupdatereason||(e.order.serviceupdatecomment.testupdatereason=[]),e.order.serviceupdatecomment.testupdatecomment||(e.order.serviceupdatecomment.testupdatecomment=[]),e.temp.updatetestreasonlist=angular.copy(e.order.serviceupdatecomment.testupdatereason),e.temp.testupdateotherdetail=angular.copy(e.order.serviceupdatecomment.testupdatecomment[0])):e.temp.ppFlag&&!e.order.ppOrder?e.schedulePPTestModal():w()},e.updateOrderWithTest=function(){if(e.modal.editTestModal.services||(e.modal.editTestModal.services=[]),e.modal.editTestModal.services.length&&e.order.ppOrder){var t={},a=!1;t.services=angular.copy(e.modal.editTestModal.services),o.getUniqueTest(t).then(function(t){if(t.response.length){var s=t.response;s.forEach(function(e){e.postsample&&e.postservices&&e.postservices.length&&e.postservices.forEach(function(e){_.findIndex(s,function(t){t._id==e._id&&(a=!0)})})}),!a&&e.order.ppOrder?($("#partnerServiceModal").modal("hide"),$("#ppvisitremovemodal").modal("show")):e.updateTest()}})}else!e.modal.editTestModal.services.length&&e.order.ppOrder?($("#partnerServiceModal").modal("hide"),$("#ppvisitremovemodal").modal("show")):e.updateTest()},e.updateNewPPTest=function(){e.temp.alertMessage="",e.modal.editTestModal.visitingcharges||(e.modal.editTestModal.visitingcharges=0);var t={tests:e.modal.editTestModal.services,amount:e.modal.editTestModal.amount+e.modal.editTestModal.premiumAmount,reason:e.modal.editTestModal.reason,visitingcharges:e.modal.editTestModal.visitingcharges,orderjson:e.temp.orderjson,parentorder_id:e.order.parentorder_id,discount:-1*parseInt(e.temp.charges.premiumpercentontest)};t.ppfromdate=e.modal.schedulePPTestModal.fromdate,t.ppfromtime=e.modal.schedulePPTestModal.ppfromtime,o.updateOrderTest(E,t).then(function(t){e.showAlert=!0,e.alertMessage=t.message,e.order=t.order,D()})},e.showTable=function(t){e.temp.show=t,"log"!=t||"partnerfrontoffice"!=e.user.userdata.role&&"partnerteamlead"!=e.user.userdata.role?"attachment"==t?o.getAttachments(e.order._id).then(function(a){e.display.attachments=a.response.prescriptions,e.temp.show=t,C()}):e.temp.show=t:o.getPartnerLog(e.order.partner_id._id,e.order._id).then(function(t){e.order.log=t.response})},e.showLog=function(){e.temp.check=!0,o.getPartnerLog(e.order.partner_id._id,e.order._id).then(function(t){e.partnerlog=t.response})},e.openRescheduleOrderModal=function(){e.modal.schedulePPTestModal={},"F"==e.order.ordertype&&(e.fastingactive=!0,e.ppactive=!1,e.ppOrder=e.order.ppOrder),"PP"==e.order.ordertype&&e.order.parentorder_id&&(e.fastOrder=e.order.fastingOrder);var t={},a={};a.searchDate=new Date(new Date(moment().startOf("day"))>new Date(moment(e.order.fromdate).startOf("day"))?moment().startOf("day"):e.order.fromdate),a.area_id=e.order.servicedeliveryaddress.area_id._id,t.sortfield="fromtime",t.sort="asc",e.modal.openRescheduleOrderModal||(e.modal.openRescheduleOrderModal={}),e.modal.openRescheduleOrderModal.fromdate=new Date(new Date(moment().startOf("day"))>new Date(moment(e.order.fromdate).startOf("day"))?moment().startOf("day"):e.order.fromdate),a.partner_id=e.order.partner_id;var s={};s.partner_id=e.order.partner_id._id,s.area_id=e.order.servicedeliveryaddress.area_id._id,s.orderdate=e.modal.openRescheduleOrderModal.fromdate,s.day=moment(e.modal.openRescheduleOrderModal.fromdate).format("dddd"),s.time=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm")),s.addressid=e.order.servicedeliveryaddress._id,e.fastOrder&&(s.ppOrder=!0,s.fastingtime=e.fastOrder.fromtime,s.fastingdate=e.fastOrder.fromdate),"PP"==e.order.ordertype&&e.order.parentorder_id&&(e.datePickerPopup.minDate=new Date(e.fastOrder.fromdate)),o.availabletimeslot(s).then(function(t){e.modal.openRescheduleOrderModal.timeSlots=t.response,e.modal.openRescheduleOrderModal.selectedTime="",e.modal.openRescheduleOrderModal.timeSlots=L(e.modal.openRescheduleOrderModal.timeSlots,e.order.orderGroupId),$("#rescheduleOrderModal").modal("show")})},e.schedulePPTestModal=function(){var t={},a={};a.searchDate=new Date(new Date(moment().startOf("day"))>new Date(moment(e.order.fromdate).startOf("day"))?moment().startOf("day"):e.order.fromdate),e.minppdate=a.searchDate,a.area_id=e.order.servicedeliveryaddress.area_id._id,a.partner_id=e.order.partner_id._id,t.sortfield="fromtime",t.sort="asc",e.modal.schedulePPTestModal.fromdate=new Date(new Date(moment().startOf("day"))>new Date(moment(e.order.fromdate).startOf("day"))?moment().startOf("day"):e.order.fromdate);var s={};s.partner_id=e.order.partner_id._id,s.area_id=e.order.servicedeliveryaddress.area_id._id,s.orderdate=e.modal.schedulePPTestModal.fromdate,s.day=moment(e.modal.schedulePPTestModal.fromdate).format("dddd"),s.time=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm")),s.addressid=e.order.servicedeliveryaddress._id,e.fastOrder&&(s.ppOrder=!0,s.fastingtime=e.fastOrder.fromtime,s.fastingdate=e.fastOrder.fromdate),e.temp.ppFlag&&!e.order.ppOrder&&(s.ppOrder=!0,s.fastingtime=e.order.fromtime,s.fastingdate=e.order.fromdate),o.availabletimeslot(s).then(function(t){e.modal.schedulePPTestModal.ppfromtime="",e.modal.schedulePPTestModal.timeSlots=t.response,e.modal.schedulePPTestModal.timeSlots=L(e.modal.schedulePPTestModal.timeSlots,e.order.orderGroupId),$("#schedulePPTestModal").modal("show")})},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.getWorkingHours=function(){e.modal.schedulePPTestModal={};var t={},a={};a.searchDate=moment(e.modal.openRescheduleOrderModal.fromdate).toISOString(),a.area_id=e.order.servicedeliveryaddress.area_id._id,a.partner_id=e.order.partner_id._id,t.sortfield="fromtime",t.sort="asc";var s={};s.partner_id=e.order.partner_id._id,s.area_id=e.order.servicedeliveryaddress.area_id._id,s.orderdate=e.modal.openRescheduleOrderModal.fromdate,s.day=moment(e.modal.openRescheduleOrderModal.fromdate).format("dddd"),s.time=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm")),s.addressid=e.order.servicedeliveryaddress._id,e.fastOrder&&(s.ppOrder=!0,s.fastingtime=e.fastOrder.fromtime,s.fastingdate=e.fastOrder.fromdate),o.availabletimeslot(s).then(function(t){e.modal.openRescheduleOrderModal.selectedTime="",e.modal.openRescheduleOrderModal.timeSlots=t.response,e.modal.openRescheduleOrderModal.timeSlots=L(e.modal.openRescheduleOrderModal.timeSlots,e.order.orderGroupId)})},e.getWorkingHoursForPP=function(){var t={},a={};a.searchDate=moment(e.modal.schedulePPTestModal.fromdate).toISOString(),a.area_id=e.order.servicedeliveryaddress.area_id._id,a.partner_id=e.order.partner_id._id,t.sortfield="fromtime",t.sort="asc";var s={};s.partner_id=e.order.partner_id._id,s.area_id=e.order.servicedeliveryaddress.area_id._id,s.orderdate=e.modal.schedulePPTestModal.fromdate,s.day=moment(e.modal.schedulePPTestModal.fromdate).format("dddd"),s.time=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm")),s.addressid=e.order.servicedeliveryaddress._id,e.order&&(s.ppOrder=!0,s.fastingtime=e.order.fromtime,s.fastingdate=e.order.fromdate),o.availabletimeslot(s).then(function(t){e.modal.schedulePPTestModal.ppfromtime="",e.modal.schedulePPTestModal.timeSlots=t.response,e.modal.schedulePPTestModal.timeSlots=L(e.modal.schedulePPTestModal.timeSlots,e.order.orderGroupId),$("#schedulePPTestModal").modal("show")})},e.rescheduleTimeSelection=function(t,a,s){e.modal.schedulePPTestModal={},angular.forEach(e.modal.openRescheduleOrderModal.timeSlots,function(e){angular.forEach(e.slots,function(e){-1==e.available&&(e.available=!0,e.text="Open")})}),(e.modal.openRescheduleOrderModal.alreadySelected==s||void 0==e.modal.openRescheduleOrderModal.alreadySelected)&&(t.text=a,t.available=-1,e.modal.openRescheduleOrderModal.selectedTime=a,e.modal.openRescheduleOrderModal.alreadySelected=s);var i=a+120;if(e.ppOrder){var n={},r={};r.searchDate=e.modal.openRescheduleOrderModal.fromdate,r.area_id=e.ppOrder.servicedeliveryaddress.area_id,n.sortfield="fromtime",n.sort="asc",e.modal.schedulePPTestModal.fromdate=new Date(e.modal.openRescheduleOrderModal.fromdate),r.partner_id=e.order.partner_id;var d={};d.partner_id=e.order.partner_id._id,d.area_id=e.ppOrder.servicedeliveryaddress.area_id._id,d.orderdate=e.modal.schedulePPTestModal.fromdate,d.day=moment(e.modal.schedulePPTestModal.fromdate).format("dddd"),d.time=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm")),d.addressid=e.ppOrder.servicedeliveryaddress._id,d.ppOrder=!0,d.fastingtime=e.modal.openRescheduleOrderModal.selectedTime,d.fastingdate=e.modal.openRescheduleOrderModal.fromdate,o.availabletimeslot(d).then(function(t){e.modal.schedulePPTestModal.ppfromtime="",e.modal.schedulePPTestModal.timeSlots=t.response,e.modal.schedulePPTestModal.timeSlots=L(e.modal.schedulePPTestModal.timeSlots,e.ppOrder.orderGroupId),e.ppOrder.fromtime<i?(e.fastingactive=!1,e.ppactive=!0):(e.modal.schedulePPTestModal.ppfromtime=e.ppOrder.fromtime,e.ppactive=!0)})}},e.rescheduleTimeSelectionPP=function(t,a,s){angular.forEach(e.modal.schedulePPTestModal.timeSlots,function(e){angular.forEach(e.slots,function(e){-1==e.available&&(e.available=!0,e.text="Open")})}),(e.modal.schedulePPTestModal.alreadySelected==s||void 0==e.modal.schedulePPTestModal.alreadySelected)&&(t.text=a,t.available=-1,e.modal.schedulePPTestModal.ppfromtime=a,e.modal.schedulePPTestModal.alreadySelected=s)},e.changeOrderCancelled=function(){e.modal.schedulePPTestModal.isppordercancelled?e.modal.schedulePPTestModal.ppfromtime=60:(e.modal.schedulePPTestModal.ppfromtime="",angular.forEach(e.modal.schedulePPTestModal.timeSlots,function(e){angular.forEach(e.slots,function(e){-1==e.available&&(e.available=!0,e.text="Open")})}))},e.getWorkingHoursForPPFromFasting=function(){var t={},a={};a.searchDate=moment(e.modal.schedulePPTestModal.fromdate).toISOString(),a.area_id=e.ppOrder.servicedeliveryaddress.area_id,a.partner_id=e.order.partner_id._id,t.sortfield="fromtime",t.sort="asc";var s={};s.partner_id=e.order.partner_id._id,s.area_id=e.order.servicedeliveryaddress.area_id._id,s.orderdate=e.modal.schedulePPTestModal.fromdate,s.day=moment(e.modal.schedulePPTestModal.fromdate).format("dddd"),s.time=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm")),s.addressid=e.order.servicedeliveryaddress._id,s.ppOrder=!0,s.fastingtime=e.modal.openRescheduleOrderModal.selectedTime,s.fastingdate=e.modal.openRescheduleOrderModal.fromdate,o.availabletimeslot(s).then(function(t){e.modal.schedulePPTestModal.ppfromtime="",e.modal.schedulePPTestModal.timeSlots=t.response,e.modal.schedulePPTestModal.timeSlots=L(e.modal.schedulePPTestModal.timeSlots,e.order.orderGroupId)})},e.rescheduleOrder=function(){e.modal.openRescheduleOrderModal.selectedTime||(e.modal.openRescheduleOrderModal.selectedTime=e.order.fromtime),O(moment(e.modal.openRescheduleOrderModal.fromdate).toISOString(),e.modal.openRescheduleOrderModal.selectedTime),P();var t={fromdate:moment(e.modal.openRescheduleOrderModal.fromdate).toISOString(),fromtime:e.modal.openRescheduleOrderModal.selectedTime,amount:e.temp.amount+e.temp.premiumAmount,visitingcharges:e.order.paymentdetails.visitingcharges,reason:"Rescheduled visit",discount:-1*parseInt(e.temp.charges.premiumpercentontest)};
e.ppOrder&&e.modal.schedulePPTestModal.ppfromtime&&(t.pporder={},t.pporder._id=e.ppOrder._id,t.pporder.isppordercancelled=e.modal.schedulePPTestModal.isppordercancelled,e.modal.schedulePPTestModal.isppordercancelled?(t.pporder.fromdate="",t.pporder.fromtime=""):(t.pporder.fromdate=e.modal.schedulePPTestModal.fromdate,t.pporder.fromtime=e.modal.schedulePPTestModal.ppfromtime)),o.rescheduleOrder(e.order._id,t).then(function(t){e.order=t.order,D(),$("#rescheduleOrderModal").modal("hide")})},e.getClass=function(t){if("partnerfrontoffice"==e.user.userdata.role||"partnerteamlead"==e.user.userdata.role)switch(t){case"Unassigned":return"statusunassign";case"Open":return"statusunassign";case"Recieved":return"statusunassign";case"Reached":return"statusunassign";case"SampleCollected":return"statuscompleted";case"SampleHandover":return"statushandover";case"Completed":return"statusdelivered";case"Cancelled":return"statuscancelled";default:return o.currentWorkPlan&&"Open"==o.currentWorkPlan.status?"info":"danger"}else switch(t){case"Open":return"statusassign";case"Unassigned":return"statusunassign";case"Cancelled":return"statuscancelled";case"SampleCollected":return"statuscompleted";case"SampleDelivered":return"success";case"SampleHandover":return"statushandover";case"Completed":return"statusdelivered";case"Reached":return"statusreached";case"Recieved":return"statusreceived";case"Delivered":return"Delivered";default:return o.currentWorkPlan&&"Open"==o.currentWorkPlan.status?"info":"danger"}},e.openCancelAppointmentModal=function(t){t&&(e.cancelOnlyPP=t),"PP"!=e.order.ordertype?(e.temp.ppTestFlag=o.cancelPPOrder(e.order.services),$("#cancelOrderModal").modal("show"),e.temp.checkVisitChargeReson=!1,e.modal.cancelOrderModal={},e.modal.cancelOrderModal.reason=[]):$("#redirectToFastingOrderModal").modal("show")},e.gotoFasting=function(){$(".modal-backdrop.in").hide(),$("#redirectToFastingOrderModal").modal("hide"),t.path("/main/order/"+e.order.parentorder_id)},e.checkVisitCharge=function(t){for(var a=0;a<t.length;a++){if("VISIT CHARGE COLLECTED"==t[a].toUpperCase()){e.temp.checkVisitChargeReson=!0;break}e.temp.checkVisitChargeReson=!1}},e.addCancelReason=function(t){if(e.modal.cancelOrderModal||(e.modal.cancelOrderModal={}),e.modal.cancelOrderModal.reason||(e.modal.cancelOrderModal.reason=[]),e.temp.existCancelReson=!1,e.modal.cancelOrderModal.reason)if(e.modal.cancelOrderModal.reason.length){for(var a=0;a<e.modal.cancelOrderModal.reason.length;a++)e.modal.cancelOrderModal.reason[a].toUpperCase()==t.toUpperCase()&&(e.temp.existCancelReson=!0);e.temp.existCancelReson||e.modal.cancelOrderModal.reason.push(t)}else e.modal.cancelOrderModal.reason.push(t);e.temp.reason="",console.dir(e.modal.cancelOrderModal.reason),e.checkVisitCharge(e.modal.cancelOrderModal.reason)},e.removeCancelReason=function(t){e.modal.cancelOrderModal.reason.splice(t,1),e.checkVisitCharge(e.modal.cancelOrderModal.reason)},e.cancelOrder=function(){if(angular.forEach(e.modal.cancelOrderModal.reason,function(t,a){"VISIT CHARGE COLLECTED"==t.toUpperCase()&&(e.temp.visitChargeReason&&e.modal.cancelOrderModal.reason.push("VISIT CHARGE COLLECTED : "+e.temp.visitChargeReason),e.modal.cancelOrderModal.reason.splice(a,1))}),$("#cancelOrderModal").modal("hide"),e.temp.ppTestFlag&&(e.temp.cancelPP=e.temp.ppTestFlag),e.cancelOnlyPP){var t={reason:e.modal.cancelOrderModal.reason};o.cancelOrder(e.ppOrder._id,t).then(function(){T(E),delete e.cancelOnlyPP})}else{var t={reason:e.modal.cancelOrderModal.reason,cancelppflag:e.temp.cancelPP};o.cancelOrder(E,t).then(function(t){e.order=t.order,D(),$("#cancelOrderModal").modal("hide")})}},e.temp.ageIn=[{agein:"YEARS"},{agein:"MONTHS"},{agein:"DAYS"}],e.editClientModal=function(){e.newpatient||(e.newpatient={}),e.modal.editClientModal=void 0,e.temp.externalId=angular.copy(e.order.client_id.externalId),e.newpatient.salutation=angular.copy(e.order.client_id.demography.salutation),e.newpatient.firstname=angular.copy(e.order.client_id.demography.firstname),e.newpatient.middlename=angular.copy(e.order.client_id.demography.middlename),e.newpatient.lastname=angular.copy(e.order.client_id.demography.lastname),e.newpatient.gender=angular.copy(e.order.client_id.demography.gender),e.newpatient.dob=angular.copy(e.order.client_id.demography.dob),e.newpatient.age=angular.copy(e.order.client_id.demography.age),e.newpatient.assumeddob=angular.copy(e.order.client_id.demography.assumeddob),e.newpatient.agetype=angular.copy(e.order.client_id.demography.agetype),e.newpatient.mobilenumber=angular.copy(e.order.client_id.demography.mobilenumber),e.newpatient.email=angular.copy(e.order.client_id.demography.email),e.temp.altnumber=angular.copy(e.order.client_id.demography.altnumber),$("#editClient").modal("show")},e.saveEditClient=function(){$("#editClient").modal("hide"),e.order.client_id.demography.salutation=e.newpatient.salutation,e.order.client_id.demography.firstname=e.newpatient.firstname,e.order.client_id.demography.middlename=e.newpatient.middlename,e.order.client_id.demography.lastname=e.newpatient.lastname,e.order.client_id.demography.gender=e.newpatient.gender,e.order.client_id.demography.age=e.newpatient.age,e.order.client_id.demography.dob=e.newpatient.dob,e.order.client_id.demography.assumeddob=e.newpatient.assumeddob,e.order.client_id.demography.agetype=e.newpatient.agetype,e.order.client_id.demography.email=e.newpatient.email,e.order.client_id.demography.mobilenumber=e.newpatient.mobilenumber,e.order.client_id.externalId=e.temp.externalId,e.temp.altnumber&&e.temp.altnumber.length?(e.order.client_id.demography.altnumber=[],angular.forEach(e.temp.altnumber,function(t){e.order.client_id.demography.altnumber.push(t.text)})):e.order.client_id.demography.altnumber=[];var t={action:"demography",updateobj:{demography:e.order.client_id.demography,externalId:e.order.client_id.externalId}};o.updateobj(t,e.order._id).then(function(t){e.order=t.response,D()})},e.createPPVisit=function(){g.setParentOrder(e.order),r.go("main.newpporder")},e.getLogistic=function(t){e.checkPoint=!0,e.temp.logisticList=[],u.getAreaLogisticList(e.order.servicedeliveryaddress.area_id._id,e.modal.editlogistics.pickupdate,e.modal.editlogistics.pickuptime).then(function(a){a.response&&(a.response.users&&(e.temp.logisticList=a.response.users),"onload"==t&&$("#editlogistics").modal("show"))})},e.addLogisticModal=function(){e.modal.editlogisticsorg=angular.copy(e.order.logistic),e.modal.editlogistics=angular.copy(e.order.logistic),"DeliverToLab"==e.modal.editlogistics.delivertype?(e.modal.editlogistics.username="",$("#editlogistics").modal("show")):(x(),e.temp.logisticList=[],e.order.logistic&&e.order.logistic.pickuptime&&(e.modal.editlogistics.pickuptime=angular.copy(e.order.logistic.pickuptime.toString())),e.modal.editlogistics.pickupdate||(e.modal.editlogistics.pickupdate=new Date(e.order.fromdate)),e.order.logistic.pickupdate&&e.order.logistic.pickuptime&&e.order.servicedeliveryaddress.area_id._id&&e.order.logistic.pickuppoint?e.getLogistic("onload"):$("#editlogistics").modal("show"))},e.closeandchedcklogisticModal=function(){$("#editlogistics").modal("hide");var t=!1;"HandoverToLogistics"==e.modal.editlogistics.delivertype&&(e.modal.editlogisticsorg.pickuppoint!=e.modal.editlogistics.pickuppoint?t=!0:e.modal.editlogisticsorg.pickuptime!=e.modal.editlogistics.pickuptime?t=!0:e.modal.editlogisticsorg.pickupdate!=e.modal.editlogistics.pickupdate&&(t=!0),t&&$("#checkLogisticmodal").modal("show"))},e.reOpenlogisticModal=function(){e.temp.logisticList=[],$("#editlogistics").modal("show"),$("#checkLogisticmodal").modal("hide")},e.addLogistiCommentModal=function(){e.modal.logisticComment=angular.copy(e.order.logistic),$("#logisticCommentmodal").modal("show")},e.copyDropPoint=function(t){e.checkPoint=!1,e.temp.logisticList=[],e.modal.editlogistics.pickuppoint=1==t?angular.copy(e.order.servicedeliveryaddress.address2):""},e.addressCheck=function(){e.checkPoint=!1,e.temp.logisticList=[]},e.saveLogistics=function(t){"DeliverToLab"==e.modal.editlogistics.delivertype?(e.modal.editlogistics.username="Deliver To Lab",delete e.modal.editlogistics.pickuppoint,delete e.modal.editlogistics.pickuptime,delete e.modal.editlogistics.pickupdate,delete e.modal.editlogistics.logistic_id,delete e.modal.editlogistics.status,delete e.modal.editlogistics.patientaddress):(delete e.modal.editlogistics.username,e.modal.editlogistics.logistic_id=t._id,e.modal.editlogistics.status||(e.modal.editlogistics.status="Assigned"));var a={logistic:e.modal.editlogistics};$("#editlogistics").modal("hide"),o.updateLogistic(e.order._id,a).then(function(t){e.order=t.order,D()})},e.saveLogisticComment=function(){$("#logisticCommentmodal").modal("hide");var t={logistic:e.modal.logisticComment};o.updateLogistic(e.order._id,t).then(function(t){e.order=t.order,D()})},e.getLogUser=function(){x(),e.modal.editlogistics.pickupdate||(e.modal.editlogistics.pickupdate=new Date(e.order.fromdate)),e.modal.editlogistics.username="",e.temp.logisticList=[],"HandoverToLogistics"==e.modal.editlogistics.delivertype&&"HandoverToLogistics"==e.order.logistic.delivertype&&(e.modal.editlogistics=angular.copy(e.order.logistic))},e.openAttachment=function(t){e.temp.attachment=t,$("#openAttachmentModal").modal("show")},e.closeReschedule=function(){e.modal.schedulePPTestModal={}},e.discountamount=0,e.discountper=0;e.setDiscountClass=function(e){return e.discountrs<0||e.discount<0?"premium":e.discountrs>0||e.discount>0?"discount":void 0},e.setDiscountArrayClass=function(e){return e.discountrs<0||e.discount<0?"premium-typeahead-available-text":e.discountrs>0||e.discount>0?"discount-typeahead-available-text":void 0},e.addDiscount=function(){e.discountamount=0;if("F"==e.order.ordertype){var t=Array.isArray(e.order.paymentdetails.orderDiscount);if(!t&&e.order.paymentdetails.orderDiscount.name){var a=[];a.push(e.order.paymentdetails.orderDiscount),e.order.paymentdetails.orderDiscount=a}if(Array.isArray(e.order.paymentdetails.orderDiscount)){var s={};s=o.discountCalculation(e.order.paymentdetails.orderDiscount,void 0,e.order.paymentdetails.visitingcharges,e.order.services),e.order.paymentdetails.orderDiscount.length&&(e.temp.totalRsTest=s.totalRsTest,e.temp.totalRsVisit=s.totalRsVisit,e.temp.totalRsBoth=s.totalRsBoth,e.temp.totalPerTest=s.totalPerTest,e.temp.totalPerVisit=s.totalPerVisit,e.temp.totalperBoth=s.totalperBoth,e.discountAmountPer=s.discountAmountPer,e.vDiscountRs=s.vDiscountRs,e.vDiscountPrcent=s.vDiscountPrcent,e.vDiscountPer=s.vDiscountPer,e.discountper=s.discountper,e.tDiscountName=s.tDiscountName,e.vDiscountName=s.vDiscountName,e.order.paymentdetails.visitingcharges=s.finalVisitCharge,e.discountAmountRs=s.discountAmountRs),e.order.services=s.services,e.order.services.length&&e.order.paymentdetails.orderDiscount.length||(e.temp.totalRsTest=0,e.temp.totalRsVisit=0,e.temp.totalRsBoth=0,e.temp.totalPerTest=0,e.temp.totalPerVisit=0,e.temp.totalperBoth=0,e.discountAmountPer=0,e.vDiscountRs=0,e.vDiscountPrcent=0,e.vDiscountPer=0,e.discountper=0,e.tDiscountName=[],e.vDiscountName=[],e.discountAmountRs=0)}e.existDiscountTestPer=!1,e.order.paymentdetails.orderDiscount||(e.order.paymentdetails.orderDiscount=[]),e.order.paymentdetails.orderDiscount.length&&(e.existDiscountTestPer=o.existTestPer(e.order.paymentdetails.orderDiscount))}};var H=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm")),z=moment().format("MM/DD/YYYY");z=new Date(z),e.temp.updatetestoldreasonlist=[],e.temp.testupdateoldotherdetail=[],e.gettotalreprtcharge=function(){e.order.totalreportcharges=0;var t=0;e.order.paymentdetails.reportdeliverymode.forEach(function(a){a.charge||(a.charge=0),t+=a.charge,e.order.totalreportcharges=Math.round(t)})},e.tempreport={},e.tempreport.reportdeliverymode||(e.tempreport.reportdeliverymode=[]),e.addReportDelMode=function(t){var a=!1;if(e.temp.alredyshow=!1,_.find(e.tempreport.reportdeliverymode,function(e){e.mode==t.mode&&(a=!0)}),a)e.temp.alredyshow=a;else{var s=!1;"HARDCOPY"==t.reportdocumenttype?(_.find(e.tempreport.reportdeliverymode,function(e){"HARDCOPY"==e.reportdocumenttype&&(s=!0)}),s?$("#reportdelivery").modal("show"):e.tempreport.reportdeliverymode.push(t)):e.tempreport.reportdeliverymode.push(t)}e.display.reportdeliverymode=""},e.addReportDel=function(){$("#reportdeliverymodal").modal("show"),e.tempreport.reportdeliverymode=angular.copy(e.order.paymentdetails.reportdeliverymode)},e.savereportdelivery=function(){e.order.paymentdetails.reportdeliverymode=angular.copy(e.tempreport.reportdeliverymode);var t={action:"reportdeliverymode",updateobj:e.order.paymentdetails.reportdeliverymode};o.updateobj(t,e.order._id).then(function(){e.gettotalreprtcharge()}),$("#reportdeliverymodal").modal("hide")},e.removeReportmode=function(t){e.tempreport.reportdeliverymode.splice(t,1)},e.openPPVisit=function(){t.path("/main/order/"+e.ppOrder._id)},Array.prototype.multisplice=function(e){for(var t=0;t<e.length;t++){var a=_.findIndex(this,function(a){return a.service_id._id==e[t].service_id._id});this.splice(a,1)}},Array.prototype.joinArray=function(){for(var e=Array.apply(null,arguments),t="",a=0;a<this.length;a++)t=a?t+e+" "+this[a]:this[a];return t},e.checkpp=function(){return new Date(moment(e.modal.schedulePPTestModal.fromdate).startOf("day")).toISOString()==new Date(moment(e.order.fromdate).startOf("day")).toISOString()&&e.order.fromtime+120>e.maxtimepptest?!1:!0},e.checkpptab=function(){return new Date(moment(e.modal.schedulePPTestModal.fromdate).startOf("day")).toISOString()==new Date(moment(e.modal.openRescheduleOrderModal.fromdate).startOf("day")).toISOString()&&e.modal.openRescheduleOrderModal.selectedTime+120>e.maxtimetab?!1:!0},e.rechedulenonfastingandppcheck=function(){return e.fastOrder&&new Date(moment(e.modal.openRescheduleOrderModal.fromdate).startOf("day")).toISOString()==new Date(moment(e.fastOrder.fromdate).startOf("day")).toISOString()&&e.fastOrder.fromtime+120>e.maxtimetab?!1:!0},e.checkType=function(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"object"==typeof e?"object":isNaN(e)?void 0:"number"},Array.prototype.move=function(e,t){return this.splice(t,0,this.splice(e,1)[0]),this},e.openUnassignPhleboModal=function(){$("#unassignPhleboModal").modal("show")},e.unassignPhlebo=function(){$("#unassignPhleboModal").modal("hide");var t={action:"unassigned"};o.updateobj(t,e.order._id).then(function(t){e.order=t.response,D()})},e.cancleUnassignPhlebo=function(){$("#unassignPhleboModal").modal("hide")},e.groupSummaryModal=function(){var t={};e.displayCharge={},e.displayCharge.paymentdetails={},e.totalPriceArray=[],t.orderGroupId=e.order.orderGroupId;var a=o.getGroupOrderList(t);a.then(function(t){e.temp.tempSummary=t.response,e.temp.tempSummary.length?(("partnerfrontoffice"==e.user.userdata.role||"partnerteamlead"==e.user.userdata.role)&&e.temp.tempSummary.forEach(function(e){("Unassigned"==e.status||"Recieved"==e.status||"Rejected"==e.status||"Reached"==e.status||"Accepted"==e.status)&&(e.status="Open")}),e.displayCharge.paymentdetails.collectedVisitCharge=e.temp.tempSummary[0].paymentdetails.collectedVisitCharge,e.displayCharge.paymentdetails.visitingcharges=e.temp.tempSummary[0].paymentdetails.visitingcharges,e.displayCharge.paymentdetails.totalvisitingcharges=e.temp.tempSummary[0].paymentdetails.totalvisitingcharges,console.log(e.totalPriceArray),e.columnVCTotal=0,e.columnPriceTotal=0,e.columnDiscountPriceTotal=0,$("#groupSummaryModal").modal("show")):$("#groupOrderNotAvailable").modal("show")})},e.grpOrdersDiscount=function(t){if(t.discountTotalAmount=0,"F"==t.ordertype){var a=Array.isArray(t.paymentdetails.orderDiscount);if(!a&&t.paymentdetails.orderDiscount.name){var s=[];s.push(t.paymentdetails.orderDiscount),t.paymentdetails.orderDiscount=s}if(Array.isArray(t.paymentdetails.orderDiscount)){var i={};i=o.discountCalculation(t.paymentdetails.orderDiscount,void 0,t.paymentdetails.visitingcharges,t.services),t.discountAmountPer=i.discountAmountPer,t.paymentdetails.visitingcharges=i.finalVisitCharge,t.discountAmountRs=i.discountAmountRs,t.paymentdetails.amount=0,t.services.forEach(function(e){t.paymentdetails.amount+=e.price}),t.discountTotalAmount=parseInt(t.paymentdetails.amount)-parseInt(t.discountAmountPer)-parseInt(t.discountAmountRs),e.columnVCTotal=e.columnVCTotal+t.paymentdetails.visitingcharges}t.services=i.services}},e.priceCal=function(t){e.servicePriceTotal=0;for(var a=0;a<t.services.length;a++)e.servicePriceTotal=e.servicePriceTotal+parseInt(t.services[a].price);return e.columnPriceTotal=parseInt(e.columnPriceTotal)+parseInt(e.servicePriceTotal),e.columnDiscountPriceTotal=parseInt(e.columnDiscountPriceTotal)+parseInt(t.discountTotalAmount),e.servicePriceTotal},e.columnTotalTotal=0,e.totalAmount=function(t){return t.paymentdetails||(t.paymentdetails={},t.paymentdetails.visitingcharges=0),e.columnTotalTotal=parseInt(e.columnTotalTotal)+parseInt(t.servicePriceTotal)+parseInt(t.paymentdetails.visitingcharges),parseInt(t.discountTotalAmount)+parseInt(t.paymentdetails.visitingcharges)},e.visitChargeTotal=0,e.visitTotal=function(t){t||(t=0),e.visitChargeTotal=e.visitChargeTotal+parseInt(t)},e.openAddAddress=function(){function t(){e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.selectedCity=void 0,e.address.sublocation=void 0,e.address.area=void 0,e.address.googleplace_id=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.building=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.addresstype="Home",e.address.selectedGmapArea=void 0,e.address.editaddressid=void 0}e.address.sublocation_id=[],e.address._id=void 0,e.address.sublocation_id=void 0,e.address.title="",e.address.pincode="",e.address.wing="",e.address.flatno="",e.address.floor="",e.address.plotno="",e.address.sectorno="",e.address.building="",e.address.streetname="",e.address.landmark="",e.address.editaddressid="",$("#editAddressModal").modal("hide"),$("#gmapaddaddress").modal("show"),h(t,200)}};e.$inject=["$scope","$location","$q","areaFactory","$window","clientFactory","$state","orderFactory","partnertestFactory","partnerFactory","timeSlots","timeSlots20","userinfoFactory","user","ppOrderFactory","$timeout","specialneedFactory"],angular.module("webApp").controller("orderObjectController",e)}(),angular.module("webApp").factory("orderFactory",["apiCall",function(e){function t(e,t,a,s){var i=!0;!e.length&&t?e.push(t):t&&(e.forEach(function(e){e._id==t._id&&(i=!1)}),i&&e.push(t));var n=0,r=0,o=0,d=0,l=0,c=0,p=0,u=0,m=0,g=0,h=0,v=[],f=[];e.forEach(function(e){"VISIT CHARGE"==e.discountapplicable&&(e.discountapplicable="VISIT"),"ruppee"!=e.discounttype||"TEST"!=e.discountapplicable&&void 0!=e.discountapplicable||(n+=e.discountrs,v.push(e)),"ruppee"==e.discounttype&&"VISIT"==e.discountapplicable&&(r+=e.discountrs,f.push(e)),"ruppee"==e.discounttype&&"BOTH"==e.discountapplicable&&(o+=e.discountrs,v.push(e),f.push(e)),"percentage"!=e.discounttype&&void 0!=e.discounttype||"TEST"!=e.discountapplicable&&void 0!=e.discountapplicable||(d+=e.discount,v.push(e)),"percentage"!=e.discounttype&&void 0!=e.discounttype||"VISIT"!=e.discountapplicable||(l+=e.discount,f.push(e)),"percentage"!=e.discounttype&&void 0!=e.discounttype||"BOTH"!=e.discountapplicable||(c+=e.discount,v.push(e),f.push(e))}),a&&(u=r+o,m=l+c,g=a*m/100);var y=0,b=0,w=n+o,_=angular.copy(s);_.forEach(function(e){(0==e.service_id.price.discountnotapplicable||void 0==e.service_id.price.discountnotapplicable)&&(h=d+c,e.price||(e.price=e.service_id.price.mrp),b=e.price*h/100,y=b+y,p=Math.round(y),e.service_id.price.discountTestPrice=0!=h?e.price-b:"")}),s=_;var x={discountArray:e,totalRsTest:Math.round(n),totalRsVisit:Math.round(r),totalRsBoth:Math.round(o),totalPerTest:Math.round(d),totalPerVisit:Math.round(l),totalperBoth:Math.round(c),discountAmountPer:p,vDiscountRs:Math.round(u),vDiscountPrcent:Math.round(m),vDiscountPer:Math.round(g),discountper:Math.round(h),tDiscountName:v,vDiscountName:f,finalVisitCharge:a,discountAmountRs:Math.round(w),services:s};return x}function a(t){var a="getAllUniqueTestsFromServices";return e.httpPOST(a,t)}function s(t){var a="getSuperSetServices";return e.httpPOST(a,t)}function i(t,a){var s="updateorder/"+a;return e.httpPUT(s,t)}function n(t,a){var s="changeorderaddress/"+a;return e.httpPUT(s,t)}function r(t,a,s,i,n,r){var o="availabletimeslot?partner_id="+n+"&area_id="+i+"&day="+s+"&orderdate="+a+"&time="+t+"&addressid="+r;return e.httpGET(o)}function o(t,a,s,i,n,r,o,d,l){var c="availabletimeslot?partner_id="+t+"&area_id="+a+"&day="+s+"&orderdate="+n+"&time="+i+"&ppOrder=true&fastingtime="+o+"&fastingdate="+d+"&addressid="+l;return e.httpGET(c)}function d(t,a){var s="updateComment/"+a;return e.httpPUT(s,t)}function l(t){var a="getprescriptionbyid/"+t;return e.httpGET(a)}function c(t){var a="clients";return e.httpPOST(a,t)}function p(){var t="areas?&type=MA";return e.httpGET(t)}function u(e){if(e.length)for(var t=!1,a=0;a<e.length;a++)e[a].service_id.postservices&&e[a].service_id.postservices.length&&e[a].service_id.postservices.forEach(function(a){var s=_.findIndex(e,function(e){return e.service_id._id==a._id});s>=0&&(t=!0)}),e[a].service_id.childs&&e[a].service_id.childs.forEach(function(s){s.test_id&&s.test_id.postservices&&s.test_id.postservices.length&&s.test_id.postservices.forEach(function(s){var i=_.findIndex(e,function(e){return e.service_id&&e.service_id._id?e.service_id._id==s._id:void 0}),n=_.findIndex(e[a].service_id.childs,function(e){return e.test_id&&e.test_id._id?e.test_id._id==s._id:void 0});i>=0&&(t=!0),n>=0&&(t=!0)}),s.test_id&&s.test_id.childs&&s.test_id.childs.length&&s.test_id.childs.forEach(function(a){a.test_id&&a.test_id.postservices&&a.test_id.postservices.length&&a.test_id.postservices.forEach(function(a){var i=_.findIndex(e,function(e){return e.service_id&&e.service_id._id?e.service_id._id==a._id:void 0}),n=_.findIndex(s.test_id.childs,function(e){return e.test_id&&e.test_id._id?e.test_id._id==a._id:void 0});i>=0&&(t=!0),n>=0&&(t=!0)})})});return t}function m(e){var t=!1,a=[];if(e.length)for(var s=0;s<e.length;s++)if(e[s].service_id&&(e[s].service_id.masterservice&&e[s].service_id.masterservice.service_id&&e[s].service_id.masterservice.service_id.specialservice&&(t=!0,a.push(e[s].service_id.masterservice.service_id)),e[s].service_id.childs&&e[s].service_id.childs.length))for(var i=0;i<e[s].service_id.childs.length;i++)if(e[s].service_id.childs[i].test_id&&(e[s].service_id.childs[i].test_id.masterservice&&e[s].service_id.childs[i].test_id.masterservice.service_id&&e[s].service_id.childs[i].test_id.masterservice.service_id.specialservice&&(t=!0,a.push(e[s].service_id.childs[i].test_id.masterservice.service_id)),e[s].service_id.childs[i].test_id.childs&&e[s].service_id.childs[i].test_id.childs.length))for(var n=0;n<e[s].service_id.childs[i].test_id.childs.length;n++)e[s].service_id.childs[i].test_id.childs[n].test_id&&e[s].service_id.childs[i].test_id.childs[n].test_id.masterservice&&e[s].service_id.childs[i].test_id.childs[n].test_id.masterservice.service_id&&e[s].service_id.childs[i].test_id.childs[n].test_id.masterservice.service_id.specialservice&&(t=!0,a.push(e[s].service_id.childs[i].test_id.childs[n].test_id.masterservice.service_id));return a}function g(t,a){var s="getpporderid?ordergroupid="+t+"&client_id="+a;return e.httpGET(s)}function h(t){var a="getprescriptionbyid/"+t;return e.httpGET(a)}function v(t,a){var s="getpartnerlog?partner_id="+t+"&order_id="+a;return e.httpGET(s)}function f(e){var t=e,a=!0,s=!1,i=[];return t.forEach(function(e){e.service_id.postservices&&e.service_id.postservices.length&&e.service_id.postservices.forEach(function(e){i.push(e.name)})}),t.forEach(function(e){i.length&&i.forEach(function(t){t==e.service_id.name&&1==a&&(s=!0)})}),t.forEach(function(e){e.service_id.childs&&e.service_id.childs.forEach(function(e){e.test_id.postservices&&e.test_id.postservices.length&&(s=!0),e.test_id.childs&&e.test_id.childs.forEach(function(e){e.test_id.postservices&&e.test_id.postservices.length&&(s=!0)})})}),s}function y(){return e.httpGET("cities")}function b(t){return e.httpGET("orders/"+t)}function w(t,a,s){var i="";if(t){if(t.searchDate){t.fromdate="";var n=new Date(t.searchDate);n=n?n.toISOString():now.toISOString(),t.fromdate=n}t.fromdate&&(t.fromdate=new Date(t.fromdate).toISOString(),i=i+"&fromdate="+t.fromdate),t.todate&&(t.todate=new Date(t.todate).toISOString(),i=i+"&todate="+t.todate),t.client_id&&(i=i+"&client_id="+t.client_id),t.status&&(i=i+"&status="+t.status),t.search&&(i=i+"&clientsearch="+t.search),t.firstname&&(i=i+"&firstname="+t.firstname),t.middlename&&(i=i+"&middlename="+t.middlename),t.lastname&&(i=i+"&lastname="+t.lastname),t.partner_id&&(i=t.partner_id._id?i+"&partner_id="+t.partner_id._id:i+"&partner_id="+t.partner_id),t.area_id&&(i=i+"&area_id="+t.area_id),t.fromtime&&(i=i+"&fromtime="+t.fromtime),t.totime&&(i=i+"&totime="+t.totime),t.sublocation_id&&(i=i+"&sublocation_id="+t.sublocation_id),t.staff_id&&(i=i+"&staff_id="+t.staff_id),t.partnertype&&(i=i+"&partnertype="+t.partnertype),t.logistic_id&&(i=i+"&logistic_id="+t.logistic_id),t.logstatus&&(i=i+"&logisticstatus="+t.logstatus),t.createdby_id&&(i=i+"&createdby_id="+t.createdby_id),t.createdbyrole&&(i=i+"&createdbyrole="+t.createdbyrole),t.partnerlist&&(i=i+"&partnerlist="+t.partnerlist),t.userlist&&(i=i+"&userlist="+t.userlist)}return a&&a.currentPage&&a.itemPerPage&&(i=i+"&page="+a.currentPage+"&limit="+a.itemPerPage),s&&s.sortfield&&s.sort&&(i=i+"&sortfield="+s.sortfield+"&sort="+s.sort),e.httpGET("orders?"+i)}function x(t,a,s){var i="";if(t){if(t.searchDate){t.fromdate="";var n=new Date(t.searchDate);n=n?n.toISOString():now.toISOString(),t.fromdate=n}t.fromdate&&(t.fromdate=new Date(t.fromdate).toISOString(),i=i+"&fromdate="+t.fromdate),t.todate&&(t.todate=new Date(t.todate).toISOString(),i=i+"&todate="+t.todate),t.client_id&&(i=i+"&client_id="+t.client_id),t.city_id&&(i=i+"&city_id="+t.city_id),t.status&&(i=i+"&status="+t.status),t.search&&(i=i+"&clientsearch="+t.search),t.firstname&&(i=i+"&firstname="+t.firstname),t.middlename&&(i=i+"&middlename="+t.middlename),t.lastname&&(i=i+"&lastname="+t.lastname),t.partner_id&&(i=t.partner_id._id?i+"&partner_id="+t.partner_id._id:i+"&partner_id="+t.partner_id),t.area_id&&(i=i+"&area_id="+t.area_id),t.fromtime&&(i=i+"&fromtime="+t.fromtime),t.totime&&(i=i+"&totime="+t.totime),t.sublocation_id&&(i=i+"&sublocation_id="+t.sublocation_id),t.staff_id&&(i=i+"&staff_id="+t.staff_id),t.partnertype&&(i=i+"&partnertype="+t.partnertype),t.logistic_id&&(i=i+"&logistic_id="+t.logistic_id),t.logstatus&&(i=i+"&logisticstatus="+t.logstatus),t.createdby_id&&(i=i+"&createdby_id="+t.createdby_id),t.createdbyrole&&(i=i+"&createdbyrole="+t.createdbyrole),t.partnerlist&&(i=i+"&partnerlist="+t.partnerlist),t.userlist&&(i=i+"&userlist="+t.userlist)}return a&&a.currentPage&&a.itemPerPage&&(i=i+"&page="+a.currentPage+"&limit="+a.itemPerPage),s&&s.sortfield&&s.sort&&(i=i+"&sortfield="+s.sortfield+"&sort="+s.sort),e.httpGET("getorderlist?"+i)}function k(t,a){var s="";return t.orderGroupId&&(s=s+"&orderGroupId="+t.orderGroupId),a&&a.currentPage&&a.itemPerPage&&(s=s+"&page="+a.currentPage+"&limit="+a.itemPerPage),e.httpGET("grouporders?"+s)}function P(t){var a=t,s="orders/"+a._id;return e.httpPUT(s,a,loaderTrue)}function S(t){return e.httpGET("areas?city_id="+t)}function O(){return e.httpGET("users?role=logistic")}function A(t,a){var s="ordertestupdate/"+t;return e.httpPUT(s,a,loaderTrue)}function C(t,a){var s="changeorderaddress/"+t;return e.httpPUT(s,a,loaderTrue)}function D(t,a){var s="assignphlebo/"+t;return e.httpPUT(s,a,loaderTrue)}function T(t,a){var s="rescheduleorder/"+t;return e.httpPUT(s,a,loaderTrue)}function M(t,a){var s="cancelorder/"+t;return e.httpPUT(s,a,loaderTrue)}function j(t){return t&&t._id?e.httpPUT("updatedemography/"+t._id,t):void 0}function L(){return e.httpGET("areas?type=MA")}function E(t){var a="areas?&type=SL&area_id="+t;return e.httpGET(a)}function I(t,a){var s="updatelogistic/"+t;return e.httpPUT(s,a,loaderTrue)}function $(e,t){var a={objects:[],message:[]};return e.length&&e.forEach(function(e){t.childs&&t.childs.length&&t.childs.forEach(function(t){e.service_id&&e.service_id._id&&t.test_id&&t.test_id._id&&e.service_id._id==t.test_id._id&&(a.message.push(e.service_id.name),a.objects.push(e))})}),a}function R(e,t){var a={objects:[],message:[]};return e.length&&e.forEach(function(e){t.childs&&t.childs.length&&t.childs.forEach(function(t){t.test_id&&t.test_id.childs&&t.test_id.childs.length&&t.test_id.childs.forEach(function(t){t.test_id&&t.test_id._id&&e.service_id&&e.service_id._id&&e.service_id._id==t.test_id._id&&(a.message.push(e.service_id.name),a.objects.push(e))})})}),a}function F(e,t){var a={notPresent:!0};return e.length&&e.forEach(function(e){e.service_id&&e.service_id.childs&&e.service_id.childs.length&&e.service_id.childs.forEach(function(s){s.test_id&&s.test_id._id&&s.test_id._id==t._id&&(a.message=t.name+" is already covered in "+e.service_id.name,a.notPresent=!1)})}),a}function N(e,t){var a={notPresent:!0};return e.length&&e.forEach(function(e){e.service_id&&e.service_id.childs&&e.service_id.childs.length&&e.service_id.childs.forEach(function(s){s.test_id&&s.test_id.childs&&s.test_id.childs.length&&s.test_id.childs.forEach(function(s){s.test_id&&s.test_id._id&&s.test_id._id==t._id&&(a.message=t.name+" is already covered in "+e.service_id.name,a.notPresent=!1)})})}),a}function q(t){var a="";return t?(t.partner_id&&(a=a+"&partner_id="+t.partner_id),t.area_id&&(a=a+"&area_id="+t.area_id),t.day&&(a=a+"&day="+t.day),t.orderdate&&(t.orderdate=new Date(t.orderdate).toISOString(),a=a+"&orderdate="+t.orderdate),t.time&&(a=a+"&time="+t.time),t.ppOrder&&(a=a+"&ppOrder="+t.ppOrder),t.fastingtime&&(a=a+"&fastingtime="+t.fastingtime),t.fastingdate&&(t.fastingdate=new Date(t.fastingdate).toISOString(),a=a+"&fastingdate="+t.fastingdate),t.addressid&&(a=a+"&addressid="+t.addressid),e.httpGET("availabletimeslot?"+a)):void 0}function B(t){var a="getPPtest";return e.httpPOST(a,t)}function H(e){var t={};return e.patientIntruction||(e.patientIntruction=[]),e.specialIntruction||(e.specialIntruction=[]),e.tubes||(e.tubes=[]),angular.forEach(e.patientIntruction,function(a,s){("na"==a.trim()||"NA"==a.trim())&&e.patientIntruction.splice(s,1),t.patientIntruction=e.patientIntruction}),angular.forEach(e.specialIntruction,function(a,s){("na"==a.displayname.trim()||"NA"==a.displayname.trim())&&e.specialIntruction.splice(s,1),t.specialIntruction=e.specialIntruction}),angular.forEach(e.tubes,function(a,s){("na"==a.type.trim()||"NA"==a.type.trim())&&e.tubes.splice(s,1),t.tubes=e.tubes}),t}function z(e){var t=!1;return e.forEach(function(e){e.discountapplicable||(e.discountapplicable="TEST"),"TEST"!=e.discountapplicable.toUpperCase()&&"BOTH"!=e.discountapplicable.toUpperCase()&&void 0!=e.discountapplicable||"percentage"!=e.discounttype&&void 0!=e.discounttype||(t=!0)}),t}function W(e,t){var a=!1;return e.forEach(function(e){e&&e.postservices&&e.postservices.length&&e.postservices.forEach(function(e){t._id==e._id&&(a=!0)})}),a}return{getOrderList:w,getOrderListNew:x,updateService:P,getOrderById:b,currentWorkPlan:X,getCities:y,getSublocation:S,getLogUser:O,updateOrderTest:A,updateServiceAddress:C,assignPhlebo:D,rescheduleOrder:T,cancelOrder:M,saveClient:j,getarealist:L,getsublocationapi:E,updateLogistic:I,findFirstChildIndex:$,findSecondChildIndex:R,findSelectedTestInProfile:F,findSelectedTestInPackage:N,cancelPPOrder:u,postTestPresent:f,ppvisitavailable:g,getOtherArea:p,getAttachments:h,getPartnerLog:v,orderLiseForFilter:U,parentPatientAddress:V,display:G,saveNewPatientApi:c,getPrescription:l,updateComment:d,getTimeSlot:r,updateAddressApi:n,specialMasterTestPresent:m,getppTimeSlot:o,availabletimeslot:q,getPPTests:B,updateobj:i,setPISITubes:H,getSuperSetServices:s,getUniqueTest:a,discountCalculation:t,getGroupOrderList:k,existTestPer:z,checkPPTestInUniqe:W,fromDashboard:Y};
var U,V,Y,G,X}]),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l){e.requeststatus.status="Open",e.timeSlots=JSON.parse(l),e.tempPage={},e.initializeWorkPlanPaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.temp={},e.data={},e.initializeTransactionPaging=function(){e.data.page=1,e.data.limit=5},e.hsteps=1,e.msteps=1,e.datePickerPopup={},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.minFromDate=0,e.maxFromDate=e.requeststatus.todate,e.minToDate=e.requeststatus.fromdate,e.maxToDate=e.requeststatus.todate,e.$watch("requeststatus.fromdate",function(t){e.minToDate=t}),e.$watch("requeststatus.todate",function(t){e.maxFromDate=t}),e.mintransFromDate=0,e.maxtransFromDate=e.data.todate,e.mintransToDate=e.data.fromdate,e.maxtransToDate=e.data.todate,e.$watch("data.fromdate",function(t){e.mintransToDate=t}),e.$watch("data.todate",function(t){e.maxtransFromDate=t});var c=new Date;c=c.setHours("00"),c=new Date(c).setMinutes("00"),c=new Date(c).setSeconds("00"),c=new Date(c).setMilliseconds("000"),e.requeststatus.fromdate=new Date(c),e.requeststatus.todate=new Date(c),e.data.fromdate=new Date(c),e.data.todate=new Date(c),e.SearchPatientByName=function(){if(!e.callFrm.$valid)return alert("Please fill required fields");if(e.requeststatus.searchText.length>0){var t={};t.currentPage=1,t.itemPerPage=20;var a=n.getPatientList(t,e.requeststatus,!0);a.then(function(t){e.PatientList=t.response})}else e.PatientList=[],e.requeststatus.client_id={}},e.SelectPatient=function(t){return e.callFrm.$valid?(e.PatientList=[],e.requeststatus.searchText=t.demography.name,e.requeststatus.client_id=t._id,e.data.patient_id=t._id,e.temp.patient=t,e.getorderList("first"),void 0):alert("Please fill required fields")},e.getorderList=function(t){if(e.tempPage.isWorkPlanPaging||e.initializeWorkPlanPaging(),e.requeststatus.client_id){var a=i.getOrderList(e.requeststatus,e.paging,e.sort);a.then(function(t){e.showStatusBtns=!0,t.response.length>0?(e.orderList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount):e.orderList=t.response})}e.tempPage.isWorkPlanPaging=!1},e.previousDate=function(){var t=new Date(e.requeststatus.searchDate);e.requeststatus.searchDate=new Date(t.setDate(t.getDate()-1)),e.getorderList()},e.todayDate=function(){var t=new Date;t=t.setHours("00"),t=new Date(t).setMinutes("00"),t=new Date(t).setSeconds("00"),t=new Date(t).setMilliseconds("000"),e.requeststatus.searchDate=new Date(t),e.getorderList()},e.nextDate=function(){var t=new Date(e.requeststatus.searchDate);e.requeststatus.searchDate=new Date(t.setDate(t.getDate()+1)),e.getorderList()},e.sort={sortfield:"fromdatetime",sort:"asc"},e.selectedCls=function(t){return t==e.sort.sortfield&&"sort-"+e.sort.sort},e.changeSorting=function(t){e.sort.sortfield==t?e.sort.sort="asc"==e.sort.sort?"desc":"asc":(e.sort.sortfield=t,e.sort.sort="asc"),e.getorderList()},e.Update=function(t){e.WorkPlan=t,e.WorkPlan.CurrentStatus=angular.copy(e.WorkPlan.status),$("#confirmIndicator").modal("show"),e.Confirm=function(t){1==t?(e.WorkPlan.status="Cancelled",e.WorkPlan.logobj={},e.WorkPlan.logobj.action="statuschange",$("#confirmIndicator").modal("hide"),e.updateWorkplan(),$(".modal-backdrop").remove()):(e.WorkPlan.status=angular.copy(e.WorkPlan.CurrentStatus),$("#visitCommentBox").modal("hide"))}},e.updateWorkplan=function(){if(!e.callFrm.$valid)return alert("Please fill required fields");$("#progressIndicator").modal("show");var t=i.updateService(e.WorkPlan);t.then(function(t){t.response._id?(e.getorderList(),alert("Updated successfully"),$("#progressIndicator").modal("hide")):alert("Try again."),e.call._id||e.SaveCall(),$("#progressIndicator").modal("hide")})},e.SaveCall=function(){e.call.client_id=e.requeststatus.client_id,e.call.followupby||delete e.call.followupby;var t=r.createCall(e.call);t.then(function(t){e.call=t.response,e.requeststatus.call_id=t.response._id,alert("call saved")})},e.updateDateTimeModal=function(t){e.WorkPlan=t,e.WorkPlan.logobj={},e.WorkPlan.logobj.action="schedulechange",e.temp.fromdate=angular.copy(e.WorkPlan.fromdate),e.temp.fromtime=angular.copy(e.WorkPlan.fromtime),$("#updateDateTimeObjView").modal("show")},e.updateDatetime=function(){e.WorkPlan.fromdate=angular.copy(e.temp.fromdate),e.WorkPlan.fromtime=angular.copy(e.temp.fromtime),e.updateWorkplan(),$("#updateDateTimeObjView").modal("hide")},e.updateserviceModal=function(t){e.WorkPlan=t,e.WorkPlan.logobj={},e.WorkPlan.logobj.action="servicechange",e.temp.services=angular.copy(e.WorkPlan.services),$("#updateServiceObjView").modal("show")},e.DeleteService=function(t,a){$("#updateServiceObjView").modal("hide"),$("#visitCommentBox").modal("show"),e.ServiceTitleName=t.name,e.ConfirmComment=function(s){1==s&&(""!=e.temp.DeleteComment&&void 0!=e.temp.DeleteComment?(e.WorkPlan.comments?e.WorkPlan.comments.push("Deleted service "+t.name+": "+e.temp.DeleteComment):(e.WorkPlan.comments=[],e.WorkPlan.comments.push("Deleted service "+t.name+": "+e.temp.DeleteComment)),e.WorkPlan.services.splice(a,1),e.WorkPlan.logobj.comments=e.temp.DeleteComment,e.temp.DeleteComment="",$("#visitCommentBox").modal("hide"),e.updateWorkplan()):alert("Comment can not empty."))}},e.initializeWorkPlanPaging(),e.initializeTransactionPaging(),e.init()};e.$inject=["$scope","$location","$state","$stateParams","orderFactory","clientFactory","callFactory","user","$rootScope","timeSlots"],angular.module("webApp").controller("requeststatusController",e)}(),function(){"use strict";var e=function(e,t,a,s,i){function n(e,t){i.getOverview(o,t).then(function(e){l=e,r()})}function r(){e.TotalCount=0,e.OpenCount=0,e.CompletedCount=0,e.SampleDeliveredCount=0,e.SampleCollectedCount=0,e.SampleCollectedCount=l.order.samplecollected,e.OpenCount=l.order.open+l.order.unassigned+l.order.reached,e.CompleteCount=l.order.completed,e.TotalCount=l.order.total}var o,d,l;e.mapHeight="375px",function(){o=moment().startOf("day").toISOString(),d=moment().add(1,"days").endOf("day").toISOString(),n(o,d)}(),e.image={url:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",size:[20,32],origin:[0,0],anchor:[0,32]},e.shape={coords:[1,1,1,20,18,1,18,1],type:"poly"},e.beaches=[["Bondi Beach",-33.890542,151.274856,4],["Coogee Beach",-33.923036,151.259052,5],["Cronulla Beach",-34.028249,151.157507,3],["Manly Beach",-33.80010128657071,151.28747820854187,2],["Maroubra Beach",-33.950198,151.259302,1]],e.searchSelection=function(e){switch(e){case"week":o=moment().startOf("week").toISOString(),d=moment().endOf("week").toISOString();break;case"month":o=moment().startOf("month").toISOString(),d=moment(o).endOf("month").toISOString();break;default:o=moment().startOf("day").toISOString(),d=moment().endOf("day").toISOString()}n(o,d)}};e.$inject=["$scope","$location","$state","user","overviewFactory","partnerFactory","areaFactory","orderFactory"],angular.module("webApp").controller("overviewController",e)}(),angular.module("webApp").factory("overviewFactory",["apiCall",function(e){function t(t,a){var s="orderoverview?fromdate="+t+"&todate="+a;return e.httpGET(s)}function a(){return this.appointmentevent}function s(e){this.appointmentevent=e}return{getOverview:t,getEvent:a,setEvent:s}}]),function(){"use strict";var e=function(e,t,a,s){$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.search={},e.display.modes=[{mode:"All",value:""},{mode:"Auto",value:"Auto"},{mode:"Manual",value:"Manual"}],s.getEvent()?(e.eventbytime=s.getEvent(),e.eventbytime.time?(e.search.time=e.eventbytime.time,e.search.mode=e.eventbytime.name,e.search.count=e.eventbytime.count):(e.search.time=e.eventbytime.name,e.search.count=e.eventbytime.count),e.overvieweventlist=[],e.overvieweventlist=[{staffname:"Paresh",area:"Sakinaka",patientname:"Mira Gandhi",mode:"Auto"},{staffname:"Mitul",area:"Powai",patientname:"Akshay Rao",mode:"Manual"},{staffname:"Anil",area:"Gandhi Nagar",patientname:"Jeevan Madan",mode:"Manual"},{staffname:"Arbaz",area:"Ghatkopar",patientname:"Abhishek Jain",mode:"Auto"}]):a.go("main.overview")};e.$inject=["$scope","$location","$state","overviewFactory"],angular.module("webApp").controller("overviewlistController",e)}(),angular.module("discountFilter",[]).filter("discountfilter",function(){return function(e){var t=angular.copy(e);return void 0==t.discountapplicable&&(t.discountapplicable="TEST"),t.discountrs?("VISIT"==t.discountapplicable&&(t.discountapplicable="VISIT CHARGE"),t.discountrs<0&&(t.discountrs=Math.abs(t.discountrs)),t.name.concat(" ("+t.discountapplicable+")"," : rs."+t.discountrs)):("VISIT"==t.discountapplicable&&(t.discountapplicable="VISIT CHARGE"),t.discount<0&&(t.discount=Math.abs(t.discount)),t.name.concat(" ("+t.discountapplicable+")"," : "+t.discount+" %"))}}),function(){"use strict";var e=function(e,t,a){e.display={},e.activateModal={},e.display.cities=[],function(){e.paging||(e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20),e.search||(e.search={}),e.search.active||(e.search.active="true"),sessionStorage.getItem("searcPartnerList")&&(e.search=JSON.parse(sessionStorage.getItem("searcPartnerList")),sessionStorage.removeItem("searcPartnerList")),sessionStorage.getItem("searcPartnerListPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searcPartnerListPaging")),sessionStorage.removeItem("searcPartnerListPaging"))}(),e.getList=function(){e.search.partnertype||(e.search.partnertype="b2b"),e.search.citylist="true",a.getp(e.paging,e.search).then(function(t){e.display.partners=t.partners,e.display.cities=t.cities,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.getList(),e.edit=function(a){sessionStorage.setItem("searcPartnerList",JSON.stringify(e.search)),sessionStorage.setItem("searcPartnerListPaging",JSON.stringify(e.paging)),t.path("/main/partner/"+a)},e.setActive=function(t,a){"active"==t&&(e.activateModal.header="Active"),"deactive"==t&&(e.activateModal.header="Deactive"),e.activateModal.displayText=a,$("#activateModal1").modal("show")},e.deleteUser=function(t,s){"Active"==s?t._Deleted=!1:"Deactive"==s&&(t._Deleted=!0),a.update(t).then(function(){e.getList()})}};e.$inject=["$scope","$location","partnerFactory","cityFactory","areaFactory"],angular.module("webApp").controller("partnerController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r){function o(){if(sessionStorage.getItem("PartnerType")){e.display.type=[];var t=JSON.parse(sessionStorage.getItem("PartnerType"));e.display.type=t.childs}}function d(t){a.getById(t).then(function(t){if(e.data.partner=t.response,e.data.partner.partnertype||(e.data.partner.partnertype="b2b"),e.data.partner.info.city_id=t.response.info.city_id,e.data.partner.discounts&&e.data.partner.discounts.length)for(var s=0;s<e.data.partner.discounts.length;s++)e.data.partner.discounts[s].discountapplicable||(e.data.partner.discounts[s].discountapplicable="TEST");angular.forEach(e.data.partner.workinghour,function(e){var t=a.sortingDays(e.day);t&&(e.day=t)}),angular.forEach(e.data.partner.visitcharges,function(e){var t=a.sortingDays(e.day);t&&(e.day=t)}),m(),g=a.getMinMaxTime(e.data.partner.workinghour),e.temp.timeSlots=a.getTimeSlots(g).timeSlots})}function l(){s.get().then(function(t){e.display.cities=t.response})}function c(t,s){u(),a.add(e.data.partner).then(function(t){e.successFlag=!0,e.data.partner=t,e.reportDelivery={},s&&r.path("/main/partner")})}function p(t,s){u(),angular.forEach(e.data.partner.reportdeliverymode,function(t){"HOME"==t.mode&&e.data.partner.reportdeliverymode.splice(t,1)}),a.update(e.data.partner).then(function(t){e.data.partner=t,angular.forEach(e.data.partner.workinghour,function(e){var t=a.sortingDays(e.day);t&&(e.day=t)}),angular.forEach(e.data.partner.visitcharges,function(e){var t=a.sortingDays(e.day);t&&(e.day=t)}),e.successFlag=!0,s&&r.path("/main/partner")})}function u(){var t,s;e.data.partner.reportdeliverymode||(e.data.partner.reportdeliverymode=[]),e.reportDelivery.email?(t={},t.mode="EMAIL",t.charge=e.reportDelivery.emailCharges,t.reportdocumenttype="SOFTCOPY",s=a.checkIfExist("EMAIL",e.data.partner.reportdeliverymode,"mode"),s.found?e.data.partner.reportdeliverymode[s.index]=t:e.data.partner.reportdeliverymode.push(t)):(s=a.checkIfExist("EMAIL",e.data.partner.reportdeliverymode,"mode"),s.found&&e.data.partner.reportdeliverymode.splice(s.index,1)),e.reportDelivery.online?(t={},t.mode="ONLINE",t.charge=e.reportDelivery.onlineCharges,t.reportdocumenttype="SOFTCOPY",s=a.checkIfExist("ONLINE",e.data.partner.reportdeliverymode,"mode"),s.found?e.data.partner.reportdeliverymode[s.index]=t:e.data.partner.reportdeliverymode.push(t)):(s=a.checkIfExist("ONLINE",e.data.partner.reportdeliverymode,"mode"),s.found&&e.data.partner.reportdeliverymode.splice(s.index,1)),e.reportDelivery.counter?(t={},t.mode="COUNTER",t.charge=e.reportDelivery.counterCharges,t.reportdocumenttype="HARDCOPY",s=a.checkIfExist("COUNTER",e.data.partner.reportdeliverymode,"mode"),s.found?e.data.partner.reportdeliverymode[s.index]=t:e.data.partner.reportdeliverymode.push(t)):(s=a.checkIfExist("COUNTER",e.data.partner.reportdeliverymode,"mode"),s.found&&e.data.partner.reportdeliverymode.splice(s.index,1)),e.reportDelivery.doctordelivery?(t={},t.mode="DOCTOR DELIVERY",t.charge=e.reportDelivery.doctordeliveryCharges,t.reportdocumenttype="SOFTCOPY",s=a.checkIfExist("DOCTOR DELIVERY",e.data.partner.reportdeliverymode,"mode"),s.found?e.data.partner.reportdeliverymode[s.index]=t:e.data.partner.reportdeliverymode.push(t)):(s=a.checkIfExist("DOCTOR DELIVERY",e.data.partner.reportdeliverymode,"mode"),s.found&&e.data.partner.reportdeliverymode.splice(s.index,1)),e.reportDelivery.freehanddelivery?(t={},t.mode="FREE HAND DELIVERY",t.charge=e.reportDelivery.freehanddeliveryCharges,t.reportdocumenttype="HARDCOPY",s=a.checkIfExist("FREE HAND DELIVERY",e.data.partner.reportdeliverymode,"mode"),s.found?e.data.partner.reportdeliverymode[s.index]=t:e.data.partner.reportdeliverymode.push(t)):(s=a.checkIfExist("FREE HAND DELIVERY",e.data.partner.reportdeliverymode,"mode"),s.found&&e.data.partner.reportdeliverymode.splice(s.index,1)),e.reportDelivery.homedelivery?(t={},t.mode="HAND DELIVERY",t.reportdocumenttype="HARDCOPY",t.charge=e.reportDelivery.homedeliveryCharges,s=a.checkIfExist("HAND DELIVERY",e.data.partner.reportdeliverymode,"mode"),s.found?e.data.partner.reportdeliverymode[s.index]=t:e.data.partner.reportdeliverymode.push(t)):(s=a.checkIfExist("HAND DELIVERY",e.data.partner.reportdeliverymode,"mode"),s.found&&e.data.partner.reportdeliverymode.splice(s.index,1)),e.reportDelivery.courier?(t={},t.mode="COURIER",t.charge=e.reportDelivery.courierCharges,t.reportdocumenttype="HARDCOPY",s=a.checkIfExist("COURIER",e.data.partner.reportdeliverymode,"mode"),s.found?e.data.partner.reportdeliverymode[s.index]=t:e.data.partner.reportdeliverymode.push(t)):(s=a.checkIfExist("COURIER",e.data.partner.reportdeliverymode,"mode"),s.found&&e.data.partner.reportdeliverymode.splice(s.index,1))}function m(){angular.forEach(e.data.partner.reportdeliverymode,function(t){"EMAIL"==t.mode?(e.reportDelivery.email=!0,e.reportDelivery.emailCharges=t.charge,e.reportDelivery.reportdocumenttype="SOFTCOPY"):"ONLINE"==t.mode?(e.reportDelivery.online=!0,e.reportDelivery.onlineCharges=t.charge,e.reportDelivery.reportdocumenttype="SOFTCOPY"):"COUNTER"==t.mode?(e.reportDelivery.counter=!0,e.reportDelivery.counterCharges=t.charge,e.reportDelivery.reportdocumenttype="HARDCOPY"):"DOCTOR DELIVERY"==t.mode?(e.reportDelivery.doctordelivery=!0,e.reportDelivery.doctordeliveryCharges=t.charge,e.reportDelivery.reportdocumenttype="SOFTCOPY"):"FREE HAND DELIVERY"==t.mode?(e.reportDelivery.freehanddelivery=!0,e.reportDelivery.freehanddeliveryCharges=t.charge,e.reportDelivery.reportdocumenttype="HARDCOPY"):"HAND DELIVERY"==t.mode?(e.reportDelivery.homedelivery=!0,e.reportDelivery.homedeliveryCharges=t.charge,e.reportDelivery.reportdocumenttype="HARDCOPY"):"COURIER"==t.mode&&(e.reportDelivery.courier=!0,e.reportDelivery.courierCharges=t.charge,e.reportDelivery.reportdocumenttype="HARDCOPY")})}e.data={},e.reportDelivery={},e.temp={},e.paymentoptions={};var g,h,v,f;e.temp_day=[],e.temp_from="",e.temp_to="";!function(){o(),e.modal={discountModal:{}},e.display.timeSlots=JSON.parse(i),l(),"new"!=t.Id?d(t.Id):(e.data.partner={},e.data.partner.reportdeliverymode=[],e.data.partner.droppoints=[],e.reportDelivery={},e.data.partner.workinghour=[]),e.data.partner&&(e.data.partner._id||(e.data.partner.paymentoptions=[])),sessionStorage.getItem("PaymentOptions")&&(e.display.paymentoptions=[],e.display.paymentoptions=JSON.parse(sessionStorage.getItem("PaymentOptions")))}();e.changeDays=function(t){if(e.visitcharge.day=t,e.temp.whindex>-1)for(var a=0;a<e.visitcharges.length;a++)e.visitcharges[a].day=t},e.showVisitingCharge=!1,e.checkWHTime=function(){if(e.workinghour.from&&e.workinghour.to)if(parseInt(e.workinghour.from)>parseInt(e.workinghour.to))alert("End time should be less then Start time"),delete e.workinghour.from,delete e.workinghour.to,delete e.visitcharge.from,delete e.visitcharge.to,e.showVisitingCharge=!1;else if(e.CalMinMaxForVisitingCharge(),e.showVisitingCharge=!0,e.temp.whindex>-1)for(var t=0;t<e.visitcharges.length;t++){if(e.visitcharges[t].from<parseInt(e.workinghour.from)){$("#workinghourVisitingHourModal").modal("hide"),$("#ConfirmPopupChangeVisitChargeTime").modal("show");break}if(e.visitcharges[t].to>parseInt(e.workinghour.to)){$("#workinghourVisitingHourModal").modal("hide"),$("#ConfirmPopupChangeVisitChargeTime").modal("show");break}}},e.changeVCTimeOnWHTime=function(){$("#ConfirmPopupChangeVisitChargeTime").modal("hide"),$("#workinghourVisitingHourModal").modal("show");for(var t=0;t<e.visitcharges.length;t++)e.visitcharges[t].from<parseInt(e.workinghour.from)&&(e.visitcharges[t].from=angular.copy(parseInt(e.workinghour.from))),e.visitcharges[t].to>parseInt(e.workinghour.to)&&(e.visitcharges[t].to=angular.copy(parseInt(e.workinghour.to)))},e.checkVCTime=function(){e.visitcharge.from&&e.visitcharge.to&&parseInt(e.visitcharge.from)>parseInt(e.visitcharge.to)&&(alert("End time should be less then Start time"),e.visitcharge.from="",e.visitcharge.to="")},e.CalMinMaxForVisitingCharge=function(){var t={min:parseInt(e.workinghour.from),max:parseInt(e.workinghour.to)};e.temp.timeSlots=a.getTimeSlots(t).timeSlots},e.pushVisitCharge=function(){e.visitcharges.length||(e.visitcharges=[]),e.temp.vcindex>-1?(e.visitcharges[e.temp.vcindex]=e.visitcharge,e.temp.vcindex=void 0):e.visitcharges.push(e.visitcharge),e.visitcharge={},e.visitcharge.day=e.workinghour.day,e.visitcharge.premiumpercent=0,e.visitcharge.premiumpercentontest=0,e.visitcharge.WHindex=e.temp.whindex,e.visitcharge.WHid=e.workinghour._id},e.Save=function(t){e.data.partner._id?p(e.data.partner,t):c(e.data.partner,t)},e.addWorkingHour=function(){e.workinghour={},$("#workinghourVisitingHourModal").modal("show"),e.visitcharges=[],e.visitcharge={},e.visitcharge.premiumpercent=0,e.visitcharge.premiumpercentontest=0,e.temp.timeSlots=[],e.showVisitingCharge=!1,e.data.partner.workinghour||(e.data.partner.workinghour=[]),e.data.partner.visitcharges||(e.data.partner.visitcharges=[]),e.temp.whindex=e.data.partner.workinghour.length,e.workinghour._id=e.data.partner.workinghour.length+1,e.visitcharge.WHindex=e.temp.whindex,e.visitcharge.WHid=e.workinghour._id,e.temp.vcindex=void 0,e.temp.whindex=void 0,e.temp.new_wh=!0},e.editWorkingHour=function(t,a){e.temp.add_ModeFlag=!1,e.temp.whindex=t,e.temp.vcindex=void 0,e.visitcharge={},e.visitcharge.premiumpercent=0,e.visitcharge.premiumpercentontest=0,e.temp.timeSlots=[],e.showVisitingCharge=!0,e.visitcharge.WHindex=e.temp.whindex,e.showVisitingCharge=!0,e.workinghour=angular.copy(a),e.workinghour.from=e.workinghour.from.toString(),e.workinghour.to=e.workinghour.to.toString(),e.visitcharge.day=e.workinghour.day,e.visitcharge.WHid=e.workinghour._id,e.CalMinMaxForVisitingCharge(),e.temp.new_wh=!1;var s=_.groupBy(e.data.partner.visitcharges,function(t){return t.WHid==e.workinghour._id});e.visitcharges=angular.copy(s["true"]),e.visitcharges||(e.visitcharges=[]),e.temp_day=a.day,e.temp_from=a.from,e.temp_to=a.to,e.temp_fullday=a.fullday,$("#workinghourVisitingHourModal").modal("show")},e.deleteWorkingHour=function(t,a){e.workinghour=a,h="",$("#ConfirmPopupDeleteForWorkinHour").modal("show"),h=t},e.pushPaymentOtions=function(t){var a,s=typeof t;if(a="string"==s?JSON.parse(t):t,e.data.partner.paymentoptions.length){for(var i=!1,n=0;n<e.data.partner.paymentoptions.length;n++)if(e.data.partner.paymentoptions[n]._id==a._id){i=!0;break}0==i&&e.data.partner.paymentoptions.push(a)}else e.data.partner.paymentoptions.push(a);e.display.temppaymentOption={}},e.removePaymentOptions=function(t,a){e.data.partner.paymentoptions.splice(a,1)},e.deleteDiscount=function(t){e.data.partner.discounts.splice(t,1)},e.AddAllpaymentOption=function(){e.display.paymentoptions.childs.length&&(e.data.partner.paymentoptions=[],angular.forEach(e.display.paymentoptions.childs,function(t){e.pushPaymentOtions(t)}))},e.cancelExistingWorkingHoursSlot=function(){$("#confirmUpdateWorkinghoursModal").modal("hide")},e.saveWorkingHour=function(){$("#workinghourModal").modal("hide"),e.data.partner.workinghour.length?$("#confirmUpdateWorkinghoursModal").modal("show"):(e.visitcharge={},e.data.partner.workinghour||(e.data.partner.workinghour=[]),e.temp.add_ModeFlag?e.data.partner.workinghour.push(e.workinghour):e.workinghour._id?e.data.partner.workinghour[e.temp.whindex]=angular.copy(e.workinghour):e.temp.whindex>-1?e.data.partner.workinghour[e.temp.whindex]=angular.copy(e.workinghour):e.data.partner.workinghour.push(e.workinghour),g=a.getMinMaxTime(e.data.partner.workinghour),e.temp.timeSlots=a.getTimeSlots(g).timeSlots)},e.removeExistingWorkingHoursSlot=function(){1==e.flag&&e.data.partner.areas.forEach(function(e){e.slots.forEach(function(e){e.monday=0,e.tuesday=0,e.wednesday=0,e.thursday=0,e.friday=0,e.saturday=0,e.sunday=0})}),e.workinghour._id&&!e.temp.new_wh&&e.data.partner._id&&(e.data.partner.workinghour[e.temp.whindex]=angular.copy(e.workinghour),e.data.partner.visitcharges=_.filter(e.data.partner.visitcharges,function(t){return t.WHid!=e.workinghour._id}),e.data.partner.visitcharges=e.data.partner.visitcharges.concat(e.visitcharges),p(e.data.partner)),e.workinghour._id&&e.temp.new_wh&&e.data.partner._id&&(e.data.partner.workinghour.push(e.workinghour),e.data.partner.visitcharges=e.data.partner.visitcharges.concat(e.visitcharges),p(e.data.partner)),$("#confirmUpdateWorkinghoursModal").modal("hide")},e.saveWorkingHourVisitCharge=function(){if($("#workinghourVisitingHourModal").modal("hide"),e.data.partner._id)if(e.data.partner.workinghour.length){var t=_.difference(e.workinghour.day,e.temp_day);if(!t.length)var t=_.difference(e.temp_day,e.workinghour.day);e.flag=t.length||e.temp_from!=e.workinghour.from||e.temp_to!=e.workinghour.to||e.temp_fullday!=e.workinghour.fullday?!0:!1,$("#confirmUpdateWorkinghoursModal").modal("show")}else e.data.partner.workinghour.push(e.workinghour),e.data.partner.visitcharges=e.data.partner.visitcharges.concat(e.visitcharges),p(e.data.partner);else e.data.partner._id||(e.temp.whindex>-1&&!e.temp.new_wh?(e.data.partner.workinghour[e.temp.whindex]=e.workinghour,e.data.partner.visitcharges=_.filter(e.data.partner.visitcharges,function(t){return t.WHid!=e.workinghour._id}),e.data.partner.visitcharges=e.data.partner.visitcharges.concat(e.visitcharges)):!e.temp.whindex&&e.temp.new_wh&&(e.data.partner.workinghour.push(e.workinghour),e.data.partner.visitcharges=e.data.partner.visitcharges.concat(e.visitcharges)))},e.confirmDeleteWorkingHour=function(){e.data.partner.visitcharges=_.filter(e.data.partner.visitcharges,function(t){return t.WHid!=e.workinghour._id}),e.data.partner.workinghour.splice(h,1),e.data.partner.areas.forEach(function(e){e.slots.forEach(function(e){e.monday=0,e.tuesday=0,e.wednesday=0,e.thursday=0,e.friday=0,e.saturday=0,e.sunday=0})}),e.data.partner._id&&p(e.data.partner),$("#ConfirmPopupDeleteForWorkinHour").modal("hide")},e.addVisitCharge=function(){e.visitcharge={},e.visitcharge.premiumpercent=0,e.visitcharge.premiumpercentontest=0,e.temp.add_ModeFlag=!0,$("#visitChargeModal").modal("show")},e.editVisitCharge=function(t,a){e.visitcharge=angular.copy(a),e.temp.vcindex=t},e.saveVisitCharge=function(){console.log(e.visitcharge),e.data.partner.visitcharges||(e.data.partner.visitcharges=[]),e.temp.add_ModeFlag?e.data.partner.visitcharges.push(e.visitcharge):e.visitcharge._id?e.data.partner.visitcharges[e.temp.vcindex]=angular.copy(e.visitcharge):e.temp.vcindex>-1?e.data.partner.visitcharges[e.temp.vcindex]=angular.copy(e.visitcharge):e.data.partner.visitcharges.push(e.visitcharge),e.data.partner._id&&p(e.data.partner),e.visitcharge={},e.visitcharge.premiumpercent=0,e.visitcharge.premiumpercentontest=0,$("#visitChargeModal").modal("hide")},e.deleteVisitCharge=function(t){e.visitcharge={},e.visitcharge.premiumpercent=0,e.visitcharge.premiumpercentontest=0,e.workinghour&&e.workinghour.day&&(e.visitcharge.day=e.workinghour.day),e.temp.vcindex=void 0,v="",$("#workinghourVisitingHourModal").modal("hide"),$("#ConfirmPopupDeleteForVisitCharge").modal("show"),v=t},e.closeVCDeleteConfirmModal=function(){$("#ConfirmPopupDeleteForVisitCharge").modal("hide"),$("#workinghourVisitingHourModal").modal("show")},e.confirmDeleteVisitCharge=function(){e.visitcharges.splice(v,1),$("#ConfirmPopupDeleteForVisitCharge").modal("hide"),$("#workinghourVisitingHourModal").modal("show")},e.calculatePremium=function(){e.percentage=null;var t={person:e.visitcharge.person,charge:e.visitcharge.charge,premium:e.visitcharge.premiumpercent,calculatePremium:function(){var e=this.premium/100,t=this.charge+e*this.charge;return t}};e.percentage=t.calculatePremium()},e.paymentOptionAdd=function(){e.paymentoptions={},$("#paymentOption").modal("show")},e.savePaymentOption=function(){e.paymentoptions?void 0!=e.paymentoptions.editindex?(e.data.partner.paymentoptions[e.paymentoptions.editindex]=angular.copy(e.paymentoptions),e.paymentoptions.editindex=void 0,p(),$("#paymentOption").modal("hide")):e.data.partner&&(e.data.partner._id?(e.paymentoptions.active||(e.paymentoptions.active=!1),e.data.partner.paymentoptions.push(angular.copy(e.paymentoptions)),p()):(e.paymentoptions.active||(e.paymentoptions.active=!1),e.data.partner.paymentoptions.push(angular.copy(e.paymentoptions))),$("#paymentOption").modal("hide")):(e.data.partner&&(e.data.partner._id?(e.paymentoptions.active||(e.paymentoptions.active=!1),e.data.partner.paymentoptions.push(angular.copy(e.paymentoptions)),p()):(e.paymentoptions.active||(e.paymentoptions.active=!1),e.data.partner.paymentoptions.push(angular.copy(e.paymentoptions)))),$("#paymentOption").modal("hide"))},e.confirmDeletePaymentOptions=function(){e.paymentoptions&&void 0!=e.paymentoptions.deleteindex&&e.data.partner&&(e.data.partner._id?e.data.partner.paymentoptions.splice(e.paymentoptions.deleteindex,1):e.data.partner.paymentoptions.splice(e.paymentoptions.deleteindex,1)),$("#ConfirmPopupDeletePaymentOption").modal("hide"),p(),e.paymentoptions.deleteindex=void 0},e.deletePaymentOption=function(t,a){e.paymentoptions.deleteindex=a,$("#ConfirmPopupDeletePaymentOption").modal("show")},e.editPaymentOprion=function(t,a){console.log(a),e.paymentoptions=angular.copy(t),e.paymentoptions.editindex=a,$("#paymentOption").modal("show")},e.copyDropPoint=function(){e.copyAddress?e.data.partner.info&&e.data.partner.info.address&&e.data.partner.info.coordinates&&e.data.partner.info.coordinates.lat&&e.data.partner.info.coordinates["long"]?(e.droppoint={},e.droppoint.coordinates={},e.droppoint.copyAddress=!0,e.droppoint.address=e.data.partner.info.address,e.droppoint.coordinates.lat=parseInt(e.data.partner.info.coordinates.lat),e.droppoint.coordinates["long"]=parseInt(e.data.partner.info.coordinates["long"]),e.data.partner.droppoints.push(e.droppoint)):e.copyAddress=!1:angular.forEach(e.data.partner.droppoints,function(t,a){1==t.copyAddress&&e.data.partner.droppoints.splice(a,1)})},e.addDropPoint=function(){e.temp.add_ModeFlag=!0,e.droppoint={},e.droppoint.coordinates={},$("#dropPointModal").modal("show"),e.setNegetiveValidation()},e.editDropPoint=function(t,a){e.temp.dpindex=t,e.droppoint=angular.copy(a),e.temp.add_ModeFlag=!1,$("#dropPointModal").modal("show"),e.setNegetiveValidation()},e.saveDropPoint=function(){e.data.partner.droppoints||(e.data.partner.droppoints=[]),e.temp.add_ModeFlag?e.data.partner.droppoints.push(e.droppoint):e.droppoint._id?e.data.partner.droppoints[e.temp.dpindex]=angular.copy(e.droppoint):e.temp.dpindex>-1?e.data.partner.droppoints[e.temp.dpindex]=angular.copy(e.droppoint):e.data.partner.droppoints.push(e.droppoint),e.data.partner._id&&p(e.data.partner),$("#dropPointModal").modal("hide")},e.deleteDropPoint=function(e){f="",f=e,$("#ConfirmPopupDeleteDropPoint").modal("show")},e.confirmDeleteDropPoint=function(){e.data.partner.droppoints.splice(f,1),e.data.partner._id&&p(e.data.partner),$("#ConfirmPopupDeleteDropPoint").modal("hide")},e.fullDayClick=function(){e.workinghour.fullday?(e.workinghour.to="1380",e.workinghour.from="0"):(e.workinghour.to=void 0,e.workinghour.from=void 0),e.CalMinMaxForVisitingCharge(),e.showVisitingCharge=!0},e.perCheck=function(){e.modal.discountModal.discount>100&&(e.modal.discountModal.discount=""),e.modal.discountModal.discount<-100&&(e.modal.discountModal.discount="")},e.discountAdd=function(){y=void 0,e.modal.discountModal={},e.modal.discountModal.active=!0,$("#discountModal").modal("show")},e.saveDiscount=function(){if(e.data.partner.discounts||(e.data.partner.discounts=[]),e.modal.discountModal._id){var t=_.findIndex(e.data.partner.discounts,function(t){return t._id==e.modal.discountModal._id});e.data.partner.discounts[t]=e.modal.discountModal}else{var a=!0;e.data.partner.discounts.length&&e.data.partner.discounts.forEach(function(t,s){y==s&&(t.active=e.modal.discountModal.active,t.discount=e.modal.discountModal.discount,t.discountrs=e.modal.discountModal.discountrs,t.discounttype=e.modal.discountModal.discounttype,t.discountapplicable=e.modal.discountModal.discountapplicable,t.name=e.modal.discountModal.name,t.priority=e.modal.discountModal.priority,a=!1)}),a&&e.data.partner.discounts.push(e.modal.discountModal)}$("#discountModal").modal("hide")};var y;e.discountEdit=function(t,a){y=a,e.modal.discountModal=angular.copy(t),void 0==e.modal.discountModal.discounttype&&(e.modal.discountModal.discounttype="percentage"),$("#discountModal").modal("show")}};e.$inject=["$scope","$stateParams","partnerFactory","cityFactory","timeSlots","$rootScope","$location"],angular.module("webApp").controller("partnerObjectController",e)}(),angular.module("webApp").factory("partnerFactory",["apiCall","timeSlots","timeSlots30","user",function(e,t,a){function s(t,a){var s="partners?";return t&&t.currentPage&&t.itemPerPage&&(s=s+"&page="+t.currentPage+"&limit="+t.itemPerPage),a&&(a.provider_id&&(s=s+"&provider_id="+a.provider_id),a.name&&(s=s+"&name="+a.name),a.partnertype&&(s=s+"&partnertype="+a.partnertype),a.city_id&&(s=s+"&city_id="+a.city_id),a.active&&(s=s+"&active="+a.active)),e.httpGET(s)}function i(t,a){var s="getpartnerinfolist?";return t&&t.currentPage&&t.itemPerPage&&(s=s+"&page="+t.currentPage+"&limit="+t.itemPerPage),a&&(a.provider_id&&(s=s+"&provider_id="+a.provider_id),a.name&&(s=s+"&name="+a.name),a.partnertype&&(s=s+"&partnertype="+a.partnertype),a.city_id&&(s=s+"&city_id="+a.city_id),a.active&&(s=s+"&active="+a.active),a.citylist&&(s=s+"&citylist="+a.citylist)),e.httpGET(s)}function n(t){var a="migrate/copypartnertests?";if(t){if(t.from)var s="from="+t.from;if(t.to)var i="&to="+t.to;s&&i&&(a=a+s+i)}return e.httpGET(a)}function r(t){var a="partners/"+t;return e.httpGET(a)}function o(){}function d(t){return e.httpPOST("partners",t)}function l(t){return e.httpPUT("partners/"+t._id,t)}function c(t){return e.httpPUT("partnerarea/"+t._id,t)}function p(e,t,a){var s=a.split(".");if(1==s.length){for(var i=0;i<t.length;i++)if(t[i][a]==e[a]){t[i]=e;
break}}else if(2==s.length)for(var i=0;i<t.length;i++)if(t[i][s[0]][s[1]]==e[s[0]][s[1]]){t[i]=e;break}return t}function u(e,t,a){var s={found:!1},i=a.split(".");if(!t)return s;if(1==i.length){for(var n=t.length-1;n>=0;n--)if(e==t[n][a]){s.found=!0,s.Obj=t[n],s.index=n;break}}else if(2==i.length)for(var n=t.length-1;n>=0;n--)if(e==t[n][i[0]][i[1]]){s.found=!0,s.Obj=t[n],s.index=n;break}return s}function m(e,t,a){var s={found:!1,Obj:[]},i=a.split(".");return t?(1==i.length&&e.forEach(function(e){for(var i=t.length-1;i>=0;i--)if(e==t[i][a]){s.found=!0,s.Obj.push(t[i]),s.index=i;break}}),s):s}function g(e){var t={min:5e3,max:0};return angular.forEach(e,function(e){e.from<t.min&&(t.min=parseInt(e.from)),e.to>t.max&&(t.max=parseInt(e.to))}),t}function h(e,t){var a={min:5e3,max:0};return angular.forEach(e,function(e){angular.forEach(e.day,function(s){s==t&&(e.from<a.min&&(a.min=parseInt(e.from)),e.to>a.max&&(a.max=parseInt(e.to)))})}),a}function v(e,t,a,s){var i=h(e,t),n=f(i,e,s).timeSlots,r=[];return a?(a.forEach(function(e){for(var a=0;a<n.length;a++)if(n[a].time==e.time){var s={totalSlots:e[t.toLowerCase()]},i=parseInt(n[a].time)+30;s[n[a].time]=e[t.toLowerCase()],s[i]=e[t.toLowerCase()],r.push(s),n[a][t.toLowerCase()]=e[t.toLowerCase()];break}}),n):n}function f(e,t,a){for(var s={timeSlots:[]},i=A.length,n=0;i>n;n++)a?e.min<=parseInt(A[n].time)&&e.max>=parseInt(A[n].time)&&A[n].time>=a&&s.timeSlots.push(A[n]):e.min>e.max?(parseInt(A[n].time)>=e.min&&parseInt(A[n].time)<=1380||parseInt(A[n].time)>=0&&parseInt(A[n].time)<=e.max)&&s.timeSlots.push(A[n]):e.min<=parseInt(A[n].time)&&e.max>=parseInt(A[n].time)&&s.timeSlots.push(A[n]);return s}function y(e){for(var t={timeSlots:[]},a=C.length,s=0;a>s;s++)e.min<=parseInt(C[s].time)&&e.max>=parseInt(C[s].time)&&t.timeSlots.push(C[s]);return t}function b(e){for(var t={timeSlots:[]},a=A.length,s=0;s<e.length;s++)if(e[s].from>e[s].to)for(var i=0;a>i;i++){for(var n=0;n<=e[s].to;){if(parseInt(A[i].time)==n)if(0==t.timeSlots.length)t.timeSlots.push(A[i]);else for(var r=0;r<t.timeSlots.length;r++){var o=!1;if(parseInt(t.timeSlots[r].time)==parseInt(A[i].time)&&(o=!0),!o){t.timeSlots.push(A[i]),o=!1;break}}n+=60}for(var d=e[s].from;1380>=d;){if(parseInt(A[i].time)==d)if(0==t.timeSlots.length)t.timeSlots.push(A[i]);else for(var r=0;r<t.timeSlots.length;r++){var o=!1;if(parseInt(t.timeSlots[r].time)==parseInt(A[i].time)&&(o=!0),!o){t.timeSlots.push(A[i]),o=!1;break}}d+=60}}else for(var i=0;a>i;i++)if(e[s].from<=parseInt(A[i].time)&&e[s].to>=parseInt(A[i].time))if(0==t.timeSlots.length)t.timeSlots.push(A[i]);else for(var r=0;r<t.timeSlots.length;r++){var o=!1;if(parseInt(t.timeSlots[r].time)==parseInt(A[i].time)&&(o=!0),!o){t.timeSlots.push(A[i]),o=!1;break}}var l={};return l.timeSlots,l.timeSlots=_.uniq(t.timeSlots,function(e){return e.time}),l}function w(e,t){for(var a={timeSlots:[]},s=0;s<e.length;s++)for(var i=t.length,n=0;i>n;n++)parseInt(t[n].from)>parseInt(t[n].to)?(e[s].time>=parseInt(t[n].from)&&e[s].time<=1380||e[s].time>=0&&e[s].time<=parseInt(t[n].from))&&angular.forEach(t[n].day,function(t){switch(t){case"Monday":e[s].mondayFlag=!0;break;case"Tuesday":e[s].tuesdayFlag=!0;break;case"Wednesday":e[s].wednesdayFlag=!0;break;case"Thursday":e[s].thursdayFlag=!0;break;case"Friday":e[s].fridayFlag=!0;break;case"Saturday":e[s].saturdayFlag=!0;break;default:e[s].sundayFlag=!0}}):parseInt(t[n].from)<=e[s].time&&e[s].time<=parseInt(t[n].to)&&angular.forEach(t[n].day,function(t){switch(t){case"Monday":e[s].mondayFlag=!0;break;case"Tuesday":e[s].tuesdayFlag=!0;break;case"Wednesday":e[s].wednesdayFlag=!0;break;case"Thursday":e[s].thursdayFlag=!0;break;case"Friday":e[s].fridayFlag=!0;break;case"Saturday":e[s].saturdayFlag=!0;break;default:e[s].sundayFlag=!0}});return a.timeSlots=e,a}function x(e,t,a){var s={visitcharge:0,postcharge:0},i=JSON.parse(sessionStorage.getItem("globaldata"));return 1==i.userdata.userinfo.partners.length?i.userdata.userinfo.partners[0].visitcharges.forEach(function(a){e<=a.to&&e>=a.from&&a.day.forEach(function(e){e.toLowerCase()==t&&(s=a)})}):a.length&&a.forEach(function(a){e<=a.to&&e>=a.from&&a.day.forEach(function(e){e.toLowerCase()==t&&(s=a)})}),s}function k(e,t){var a;return e.forEach(function(e){e.area_id._id==t&&(a=e.slots)}),a}function P(e){var t=[];return angular.forEach(e,function(e){"Monday"==e&&t.push(e)}),angular.forEach(e,function(e){"Tuesday"==e&&t.push(e)}),angular.forEach(e,function(e){"Wednesday"==e&&t.push(e)}),angular.forEach(e,function(e){"Thursday"==e&&t.push(e)}),angular.forEach(e,function(e){"Friday"==e&&t.push(e)}),angular.forEach(e,function(e){"Saturday"==e&&t.push(e)}),angular.forEach(e,function(e){"Sunday"==e&&t.push(e)}),t}function S(t,a){var s="";t&&(s+="&area_id="+t.area_id._id),a&&(s+="&partner_id="+a._id);var i="partnerareaslot?"+s;return e.httpGET(i)}var O,A=JSON.parse(t),C=JSON.parse(a);return{get:s,getp:i,getById:r,add:d,update:l,updateArea:c,updateArray:p,checkIfExist:u,checkIfExist_New:m,pagingResult:o,getMinMaxTime:g,getTimeSlots:f,getAdvTimeSlots:w,getMinMaxTimeByDay:h,workingHourTimeSlot30:y,getVisitCharges:x,getPartnerAreaSlots:k,getAvailableSlotByDay:v,selectedPartner:O,sortingDays:P,getTimeSlotsByWH:b,getSlot:S,getAllCopyPartner:n}}]),angular.module("waqtFilter",[]).filter("waqt",function(){return function(e){var t=Math.floor(parseInt(e)/60),a=parseInt(e)%60;return 0==a&&(a="00"),15==a&&(a="15"),30==a&&(a="30"),45==a&&(a="45"),t>12?(t-=12,t=10>t?"0"+t+":"+a+" PM":t+":"+a+" PM"):t=12>t?10>t?"0"+t+":"+a+" AM":t+":"+a+" AM":12==t?t+":"+a+" PM":t+":"+a+" PM",t}}),function(){"use strict";var e=function(e,t,a,s){function i(){s.get(e.paging).then(function(t){e.display.patientinstructions=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}e.display.patientinstructions,e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,function(){sessionStorage.getItem("searchPIPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchPIPaging")),sessionStorage.removeItem("searchPIPaging")),i()}(),e.get=function(){i()},e.edit=function(t){sessionStorage.setItem("searchPIPaging",JSON.stringify(e.paging)),a.path("/main/instruction/"+t)}};e.$inject=["$scope","$stateParams","$location","patientinstructionFactory"],angular.module("webApp").controller("patientinstructionController",e)}(),function(){"use strict";var e=function(e,t,a){function s(t){console.log("into patientinstruction"),a.getByID(t).then(function(t){e.patientinstructionObj=t.response})}!function(){"new"!=t.Id?(console.log("init"),s(t.Id)):e.patientinstructionObj={}}(),e.Save=function(){e.patientinstructionObj._id?i(e.patientinstructionObj):n(e.patientinstructionObj)};var i=function(){a.update(e.patientinstructionObj).then(function(){e.successFlag=!0,e.patientinstructionObj={}})},n=function(t){a.add(t).then(function(){e.successFlag=!0,e.patientinstructionObj={}})}};e.$inject=["$scope","$stateParams","patientinstructionFactory"],angular.module("webApp").controller("patientinstructionObjController",e)}(),angular.module("webApp").factory("patientinstructionFactory",["apiCall",function(e){function t(t){return e.httpGET(t?"patientinstructions?page="+t.currentPage+"&limit="+t.itemPerPage:"patientinstructions")}function a(t){return console.log(t),e.httpGET("patientinstructions/"+t)}function s(t){return e.httpPOST("patientinstructions",t)}function i(t){return e.httpPUT("patientinstructions/"+t._id,t)}return{get:t,getByID:a,update:i,add:s}}]),function(){"use strict";var e=function(e,t,a){function s(){a.getOptionMaster().then(function(t){e.display.optionsList=t.response,console.log(t)})}function i(){a.updateRole(e.role).then(function(t){e.role.privileges=t.response.privileges})}var n=void 0,r=void 0;e.optionMaster={},function(){s(),e.role={},e.role.privileges=[],a.getRoleList().then(function(t){e.display.roleList=t.response,e.role.privileges=t.response.privileges})}(),e.addPrivileges=function(){n=void 0,e.role.privileges.display={},$("#addPrivilegesModal").modal("show")},e.setPrivileges=function(){e.toggle=e.role?!0:!1},e.saveprivileges=function(){var t=[];1==e.role.privileges.display.access.read&&t.push("read"),1==e.role.privileges.display.access.write&&t.push("write"),1==e.role.privileges.display.access.update&&t.push("update"),1==e.role.privileges.display.access["delete"]&&t.push("delete"),void 0!=n?(e.role.privileges.display.access=t,e.role.privileges[n]=e.role.privileges.display,n=void 0):(e.role.privileges.display.access=t,e.role.privileges.push(e.role.privileges.display)),i(e.role)},e.deletePri=function(t,a){e.deleteObj={},e.deleteObj.name=a.name,e.deleteObj.index=t,$("#deletePri").modal("show")},e.confirmDelete=function(){e.role.privileges.splice(e.deleteObj.index,1),$("#deletePri").modal("hide"),i(e.role)},e.editPrivileges=function(t,a){n=a,$("#addPrivilegesModal").modal("show"),e.role.privileges.display=angular.copy(t);for(var s=0;s<t.access.length;s++)e.role.privileges.display.access[t.access[s]]=!0},e.addOptionMaster=function(){e.optionMaster.display={},$("#addOptionMaster").modal("show")},e.saveOptionMaster=function(){e.optionMaster.display.isParent=!0,e.optionMaster.display.isEditable=!0,e.optionMaster.display.isOption=!0,e.optionMaster.display._id?a.updateMasterOption(e.optionMaster.display).then(function(e){console.log(e),s(),$("#addOptionMaster").modal("hide")}):a.addMasterOption(e.optionMaster.display).then(function(){s(),$("#addOptionMaster").modal("hide")})},e.deleteOptionMaster=function(t,a){e.deleteObj={},e.deleteObj.name=a.name,e.deleteObj.index=t,$("#deleteOptionMaster").modal("show")},e.ConfDeleteOptionMaster=function(){e.display.optionsList.splice(e.deleteObj.index,1),$("#deleteOptionMaster").modal("hide"),e.saveOptionMaster()},e.editOptionMaster=function(t,a){e.optionMaster.display=angular.copy(a),$("#addOptionMaster").modal("show"),r=t}};e.$inject=["$scope","$q","priviligesFactory","optionMasterFactory"],angular.module("webApp").controller("privilegesController",e)}(),angular.module("webApp").factory("priviligesFactory",["apiCall","$q",function(e,t){function a(){var a=t.defer(),s="roles";return e.httpGET(s,!0).then(function(e){a.resolve(e)}),a.promise}function s(a){var s=t.defer(),i=a,n="roles/"+a._id;return e.httpPUT(n,i,!0).then(function(e){s.resolve(e)}),s.promise}function i(){var a=t.defer(),s="options?isParent=true";return e.httpGET(s,!0).then(function(e){a.resolve(e)}),a.promise}function n(t){return e.httpPOST("options",t)}function r(t){return e.httpPUT("options/"+t._id,t)}return{getRoleList:a,updateRole:s,getOptionMaster:i,addMasterOption:n,updateMasterOption:r}}]),function(){"use strict";var e=function(e,t,a,s){$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.datePickerPopup={},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.searchObj={},e.searchObj.status="",e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20};var i=new Date;i=i.setHours("00"),i=new Date(i).setMinutes("00"),i=new Date(i).setSeconds("00"),i=new Date(i).setMilliseconds("000"),e.searchObj.searchDate=new Date(i),e.init=function(){e.getProviderList()},e.getProviderList=function(){e.isPaging||e.initializePaging();var t=s.getProviderList(e.searchObj,e.paging,e.sort);t.then(function(t){t.response.length>0?(e.providerList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount):e.providerList=t.response}),e.isPaging=!1},e.SelectProvider=function(e){s.currentprovider=e,a.go("main.provider-add")},e.initializePaging(),e.init()};e.$inject=["$scope","$location","$state","providerFactory"],angular.module("webApp").controller("providerController",e)}(),function(){"use strict";var e=function(e,t,a,s){e.display.routes=[],e.display.roles=[],e.display.apiconfig=[];var i=void 0,n=void 0,r=void 0;e.deleteObj={},e.loggedinuserdata=JSON.parse(sessionStorage.getItem("globaldata")),e.loggedinuserdata&&(e.searchObj={},e.searchObj.provider_id=e.loggedinuserdata.userdata.provider_id._id,s.getRole(e.searchObj.provider_id).then(function(t){e.display.roles=t.response})),void 0!=s.currentprovider?(e.provider=s.currentprovider,e.display.routes=s.currentprovider.routes,e.display.apiconfig=s.currentprovider.apiConfig,e.provider.hooks.order.active=s.currentprovider.hooks.order.active.toString(),e.provider.hooks.payment.active=s.currentprovider.hooks.payment.active.toString()):(e.provider={},e.display.routes=[]),e.saveProvider=function(){e.provider.routes=[],e.provider.apiConfig=[],e.provider.apiConfig=e.display.apiconfig,e.provider.routes=e.display.routes;var t=s.saveProvider(e.provider);t.then(function(e){alert(e.response._id?"saved successfully":"Try again.")}),e.provider={},e.display.routes=[],e.provider.routes={},e.display.apiconfig=[]},e.updateProvider=function(){e.provider.routes=[],e.provider.routes=e.display.routes,e.provider.apiConfig=[],e.provider.apiConfig=e.display.apiconfig;var t=s.updateProvider(e.provider);t.then(function(e){alert(e.response._id?"saved successfully":"Try again.")}),e.provider={},e.display.routes=[]},e.SaveRoutes=function(){if(void 0!=i?(e.display.routes[i]=e.provider.routes,i=void 0):e.display.routes.push(e.provider.routes),e.provider._id){e.provider.routes=[],e.provider.routes=e.display.routes,e.provider.apiConfig=[],e.provider.apiConfig=e.display.apiconfig;var t=s.updateProvider(e.provider);t.then(function(t){t.response._id?(alert("saved successfully"),e.provider.routes={}):alert("Try again.")})}else e.provider.routes={}},e.SaveRole=function(){if(e.search={},e.search=angular.copy(e.provider.roles),e.provider._id){var t=s.updateRoles(e.search);t.then(function(t){t.response._id&&e.loggedinuserdata&&(e.searchObj={},e.searchObj.provider_id=e.loggedinuserdata.userdata.provider_id._id,s.getRole(e.searchObj.provider_id).then(function(t){e.display.roles=t.response}))})}else e.provider.roles={};$("#roleModal").modal("hide")},e.updateRoute=function(t,a){i=a,e.provider.routes={},$("#routeModal").modal("show"),e.provider.routes=angular.copy(t)},e.updateRole=function(t,a){n=a,e.provider.roles={},$("#roleModal").modal("show"),e.provider.roles=angular.copy(t)},e.clearProvider=function(){s.currentprovider=void 0,e.provider={},e.display.routes=[],e.provider.apiconfig=[]},e.addRoutes=function(){e.provider.routes={},$("#routeModal").modal("show")},e.addRole=function(){e.provider.roles={},$("#roleModal").modal("show")},e.deleteRoute=function(t,a){e.deleteObj.name=a.name,e.deleteObj.deleteIndex=t,$("#deleteModal").modal("show")},e.finalDeleteRoute=function(){if(e.display.routes.splice(e.deleteObj.deleteIndex,1),$("#deleteModal").modal("hide"),e.deleteObj={},e.provider._id){e.provider.routes=[],e.provider.routes=e.display.routes,e.provider.apiConfig=[],e.provider.apiConfig=e.display.apiconfig;var t=s.updateProvider(e.provider);t.then(function(t){t.response._id?(alert("saved successfully"),e.provider.routes={}):alert("Try again.")})}},e.addapiConfig=function(){$("#apiConfigModal").modal("show"),e.provider.display.apiConfig={}},e.SaveApiConfig=function(){if(void 0!=r?(console.log(e.display.apiconfig),e.display.apiconfig[r]=e.provider.display.apiConfig,r=void 0):e.display.apiconfig.push(e.provider.display.apiConfig),e.provider._id){e.provider.routes=[],e.provider.routes=e.display.routes,e.provider.apiConfig=[],e.provider.apiConfig=e.display.apiconfig;var t=s.updateProvider(e.provider);t.then(function(t){t.response._id?(alert("saved successfully"),e.provider.display.apiConfig={}):alert("Try again.")})}else e.provider.routes={}},e.updateApiConfig=function(t,a){r=a,e.provider.display={},e.provider.display.apiConfig={},e.provider.display.apiConfig=angular.copy(t),$("#apiConfigModal").modal("show")},e.deleteApiConfig=function(t,a){e.deleteObj.name=a.endpoint,e.deleteObj.deleteIndex=t,$("#deleteApiConfigModal").modal("show")},e.finalDeleteApiConfig=function(){if(e.display.apiconfig.splice(e.deleteObj.deleteIndex,1),$("#deleteApiConfigModal").modal("hide"),e.deleteObj={},e.provider._id){e.provider.apiConfig=[],e.provider.apiConfig=e.display.apiconfig;var t=s.updateProvider(e.provider);t.then(function(t){t.response._id?(alert("saved successfully"),e.provider.display.apiConfig={}):alert("Try again.")})}}};e.$inject=["$scope","$location","$state","providerFactory"],angular.module("webApp").controller("providerObjectController",e)}(),angular.module("webApp").factory("providerFactory",["apiCall",function(e){function t(t,a){var s="";return t&&t.search&&(s=s+"&name="+t.search),a&&a.currentPage&&a.itemPerPage&&(s=s+"&page="+a.currentPage+"&limit="+a.itemPerPage),e.httpGET("providers?"+s)}function a(t){var a="";return t&&(a=a+"&provider_id="+t),e.httpGET("roles?"+a)}function s(t){var a=t,s="providers/"+a._id;return e.httpPUT(s,a,loaderTrue)}function i(t){var a=t,s="roles/"+a._id;return e.httpPUT(s,a,loaderTrue)}function n(t){var a=t,s="providers";return e.httpPOST(s,a,loaderTrue)}return{getProviderList:t,updateProvider:s,saveProvider:n,currentprovider:r,getRole:a,updateRoles:i};var r}]),function(){"use strict";var e=function(e,t,a,s,i){e.loggedinuserdata=JSON.parse(sessionStorage.getItem("globaldata"));var n;e.reportList=[],e.selectedOptions={},e.searchUserObj={},e.phleboList=[],e.temp={},e.display={},e.display.phlebo=[],e.display.reportlList={},e.PartnerList=[],console.dir(e.display.partner);var r=new Date;r=r.setHours("00"),r=new Date(r).setMinutes("00"),r=new Date(r).setSeconds("00"),r=new Date(r).setMilliseconds("000"),e.selectedOptions.fromdate=new Date(r),e.selectedOptions.todate=new Date(r),e.statusObj={},e.data={},e.showhide={},e.datePickerPopup={},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.minFromDate=0,e.maxFromDate=e.selectedOptions.todate,e.minToDate=e.selectedOptions.fromdate,e.maxToDate=e.selectedOptions.todate,e.$watch("selectedOptions.fromdate",function(t){e.minToDate=t}),e.$watch("selectedOptions.todate",function(t){e.maxFromDate=t}),e.init=function(){e.getList(),e.getProviders()},e.getList=function(){e.reportList="admin"==e.loggedinuserdata.userdata.role?[{reportname:"homevisitreport",name:"Home Visit Report"},{reportname:"phlebostockreport",name:"PHlebo Stock Report"},{reportname:"partnerstockreport",name:"Partner Stock Report"},{reportname:"phlebovisitcount",name:"Phlebo Visit Count Report"},{reportname:"cancelledvisitreport",name:"Cancelled Visit Report"}]:"backoffice"==e.loggedinuserdata.userdata.role?[{reportname:"phlebostockreport",name:"PHlebo Stock Report"},{reportname:"partnerstockreport",name:"Partner Stock Report"},{reportname:"phlebovisitcount",name:"Phlebo Visit Count Report"}]:[{reportname:"homevisitreport",name:"Home Visit Report"}]},e.getProviders=function(){e.loggedinuserdata&&e.loggedinuserdata.userdata&&e.loggedinuserdata.userdata.provider_id&&e.loggedinuserdata.userdata.provider_id._id?(n=e.loggedinuserdata.userdata.provider_id._id,e.loggedinuserdata.userdata.userinfo.partners.length?"partnerteamlead"==e.loggedinuserdata.userdata.role?(e.display.partner=[],e.display.partner=angular.copy(e.loggedinuserdata.userdata.userinfo.partners),console.dir(e.display.partner)):e.loggedinuserdata.userdata.userinfo.partners.length>0&&(e.display.partner=[],e.display.partner=angular.copy(e.loggedinuserdata.userdata.userinfo.partners)):e.getPartners(n)):alert("Provider Not found")},e.getPartners=function(t){var a={};a.provider_id=t;s.get(void 0,a).then(function(t){e.PartnerList=[],t.response.length>0&&(e.PartnerList=t.response)})},e.download=function(t){var s={};switch(s.reportname=e.selectedOptions.report.reportname,s.name=e.selectedOptions.report.name,"view"==t&&(s.format="json"),"down"==t&&(s.format="csv"),s.params=[],"cancelledvisitreport"==s.reportname&&(s.reportname="homevisitreport"),s.reportname){case"homevisitreport":if(s.fromdate=e.selectedOptions.fromdate,s.todate=e.selectedOptions.todate,!n)return alert("Provider id not found"),!1;s.provider_id=n,e.display.partner.length?(s.partner_id=[],e.display.partner.forEach(function(e){s.partner_id.push(e._id)}),s.partnerName=e.display.partner[0].info.name):s.partner_id=e.selectedOptions.partner_id,e.statusObj.status&&(s.status=e.statusObj.status);break;case"phlebostockreport":if(s.fromdate=e.selectedOptions.fromdate,s.todate=e.selectedOptions.todate,!n)return alert("Provider id not found"),!1;s.provider_id=n,e.display.phlebo.length&&(s.assignto=[],e.display.phlebo.forEach(function(e){s.assignto.push(e._id)}));break;case"partnerstockreport":if(s.fromdate=e.selectedOptions.fromdate,s.todate=e.selectedOptions.todate,!n)return alert("Provider id not found"),!1;s.provider_id=n,e.display.partner.length&&(s.partner_id=[],e.display.partner.forEach(function(e){s.partner_id.push(e._id)}));break;case"conciserevenuereport":s.fromdate=e.selectedOptions.fromdate,s.todate=e.selectedOptions.todate,e.selectedOptions.provider_id&&(s.provider_id=e.selectedOptions.provider_id),e.selectedOptions.partner_id&&(s.partner_id=e.selectedOptions.partner_id),e.selectedOptions.partner_id&&e.selectedOptions.partner_id.info&&e.selectedOptions.partner_id.info.name&&(s.partnerName=e.selectedOptions.partner_id.info.name);break;case"phlebovisitcount":if(s.fromdate=e.selectedOptions.fromdate,s.todate=e.selectedOptions.todate,!n)return alert("Provider id not found"),!1;s.provider_id=n,e.display.phlebo.length&&(s.assignto=[],e.display.phlebo.forEach(function(e){s.assignto.push(e._id)}))}"down"==t?a.getReport(s).then(function(e){a.reportPrint(s,e)}):"view"==t&&a.getReport(s).then(function(t){e.viewList=t})},e.selectReport=function(t){function a(){e.showhide.fromdate=!1,e.fromdate="--",e.showhide.todate=!1,e.showhide.csvformat=!1}switch(e.viewList=[],("admin"==e.loggedinuserdata.userdata.role||"backoffice"==e.loggedinuserdata.userdata.role)&&(e.display.partner=[],e.display.phlebo=[],e.phleboList=[]),a(),t.reportname){case"homevisitreport":e.showhide.fromdate=!0,e.fromdate="From date",e.showhide.todate=!0,e.showhide.csvformat=!0,e.statusObj={};break;case"conciserevenuereport":e.showhide.fromdate=!0,e.fromdate="From date",e.showhide.todate=!0,e.showhide.csvformat=!0;break;case"phlebostockreport":e.showhide.fromdate=!0,e.fromdate="From date",e.showhide.todate=!0,e.showhide.csvformat=!0;break;case"partnerstockreport":e.showhide.fromdate=!0,e.fromdate="From date",e.showhide.todate=!0,e.showhide.csvformat=!0;break;case"phlebovisitcount":e.showhide.fromdate=!0,e.fromdate="From date",e.showhide.todate=!0,e.showhide.csvformat=!0;break;case"cancelledvisitreport":e.showhide.fromdate=!0,e.fromdate="From date",e.showhide.todate=!0,e.showhide.csvformat=!0}("phlebostockreport"==t.reportname||"phlebovisitcount"==t.reportname)&&(e.searchUserObj.role="serviceagent",i.get("",e.searchUserObj).then(function(t){e.phleboList=[],e.phleboList=t.response}),e.display.partner=[]),"partnerstockreport"==t.reportname&&"backoffice"==e.loggedinuserdata.userdata.role&&(e.display.partner=[],e.display.phlebo=[]),"cancelledvisitreport"==t.reportname&&(e.statusObj.status="Cancelled")},e.pushPartner=function(t){if(e.display.partner){for(var a=!1,s=0;s<e.display.partner.length;s++)if(e.display.partner[s]._id==t._id){a=!0;break}0==a&&e.display.partner.push(t)}else e.display.partner=[],e.display.partner.push(t);e.temp.partner={}},e.removePartner=function(t){e.display.partner.splice(t,1)},e.pushPhlebo=function(t){if(e.display.phlebo){for(var a=!1,s=0;s<e.display.phlebo.length;s++)if(e.display.phlebo[s]._id==t._id){a=!0;break}0==a&&e.display.phlebo.push(t)}else e.display.phlebo=[],e.display.phlebo.push(t);e.temp.phlebo={}},e.removeRole=function(t){e.display.phlebo.splice(t,1)},e.init()};e.$inject=["$scope","$q","reportsFactory","partnerFactory","userinfoFactory"];var t=angular.module("webApp");t.controller("reportsController",e)}(),angular.module("webApp").factory("reportsFactory",["apiCall",function(e){function t(){return e.httpGET("reports")}function a(t){var a="reports",s=void 0;return"csv"==t.format&&(s=!0),e.httpPOST(a,t,!0,s)}function s(e,t){if("csv"==e.format){var a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s="";e.partnerName&&(s+=e.partnerName.toUpperCase()+"-"),e.name&&(s+=e.name);var i=URL.createObjectURL(a),n=document.createElement("a");document.body.appendChild(n),n.href=i,n.download=s+".csv",n.click(),window.URL.revokeObjectURL(i)}else alert("Format not found")}return{getList:t,getReport:a,reportPrint:s}}]),function(){"use strict";var e=function(e,t){function a(){angular.forEach(s,function(e){e.isParent?i.push(e):n.push(e)});var e,t;angular.forEach(i,function(a){for(t=n.length,e=0;t>e;e++)n[e].parentID._id==a._id&&(void 0==a.subMenus&&(a.subMenus=[]),a.subMenus.push(n[e]))})}var s=[],i=[],n=[];e.roleList=[],e.alertMSG="Do not forget to save the changes.",t.getRoles().then(function(t){e.roleList=t.response}),t.getMenus().then(function(e){s=e.response,a()}),e.selectRole=function(t){e.isModified=!1,e.roleMenus=[];var a=angular.copy(t.menus);e.roleMenus=t.menus,e.roleWiseCompleteMenu=[];var s,n,r,o=0;angular.forEach(i,function(t){if(n={},n=angular.copy(t),n.subMenus=[],n.selectedMenuLen=0,n.subMenusLen=t.subMenus?t.subMenus.length:0,angular.forEach(t.subMenus,function(e){for(r={},r=e,r.selected=!1,s=a.length-1;s>=0;s--)o=s,a[s].menu_id._id==e._id&&(a.splice(o,1),r.selected=!0,s=-1,o=0,n.selectedMenuLen++);n.subMenus.push(r)}),t.isParent&&!t.isLabel)for(s=a.length-1;s>=0;s--)o=s,a[s].menu_id==t._id&&(a.splice(o,1),n.selected=!0,s=-1,o=0,n.selectedMenuLen++);e.roleWiseCompleteMenu.push(n)})},e.selectMenu=function(t,a){t&&(a?t.selectedMenuLen++:t.selectedMenuLen--),e.isModified=!0},e.Save=function(a){e.alertMSG="To see changes, please login again.";var s={};a.menus=[];var i;angular.forEach(e.roleWiseCompleteMenu,function(e){i=!1,e.selected?(s={},s.menu_id=e._id,a.menus.push(s)):e.isLabel&&angular.forEach(e.subMenus,function(t){t.selected&&(i||(s={},s.menu_id=e._id,a.menus.push(s),i=!0),s={},s.menu_id=t._id,a.menus.push(s))})}),t.updateRole(a).then(function(){e.isModified=!1})}};e.$inject=["$scope","rolesFactory"];var t=angular.module("webApp");t.controller("rolesController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(){var e=t.defer(),a="roles";return s.httpGET(a,!0).then(function(t){e.resolve(t)}),e.promise}function n(){var e=t.defer(),a="menus";return s.httpGET(a,!0).then(function(t){e.resolve(t)}),e.promise}function r(e){var a=t.defer(),i=e,n="roles";return s.httpPOST(n,i,!0).then(function(e){a.resolve(e)}),a.promise}function o(e){var a=t.defer(),i=e,n="roles/"+e._id;return s.httpPUT(n,i,!0).then(function(e){a.resolve(e)}),a.promise}function d(e){var a=t.defer(),i=e,n="roles";return s.httpDELETE(n,i,!0).then(function(e){a.resolve(e)}),a.promise}return{getRoles:i,getMenus:n,addRole:r,updateRole:o,deleteRole:d}};e.$inject=["$http","$q","$location","apiCall"],angular.module("webApp").factory("rolesFactory",e)}(),function(){"use strict";var e=function(e,t){t.state("main",{url:"/main","abstract":!0,templateUrl:"partials/main/main.html",controller:"MainCtrl"}),e.otherwise("/main/dashboard")};e.$inject=["$urlRouterProvider","$stateProvider"],e.$inject=["$urlRouterProvider","$stateProvider"],angular.module("routes").config(e)}();var loaderTrue=!0,loaderFalse=!1;!function(){"use strict";var e=function(e){e.users=JSON.parse('[{"time":"00:00 am","events":[{"user_id":{"name":"Prashant","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"Anil","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"Anil","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"Anil","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"01:00 am","events":[{"user_id":{"name":"A","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"A","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"A","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"A","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"02:00 am","events":[{"user_id":{"name":"B","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"B","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"B","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"B","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"03:00 am","events":[{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"04:00 am","events":[{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"05:00 am","events":[{"user_id":{"name":"E","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"E","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"E","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"E","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"06:00 am","events":[{"user_id":{"name":"A","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"E","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"07:00 am","events":[{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"8:00 am","events":[{"user_id":{"name":"Anil","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"Anil","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"Anil","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"9:00 am","events":[{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"E","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"success","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"10:00 am","events":[{"user_id":{"name":"B","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"B","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"warning","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]},{"time":"11:00 am","events":[{"user_id":{"name":"A","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"D","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]},{"user_id":{"name":"C","address":"Better Life Solution,C-002, Oxford chambers, Saki vihar road, Andheri east,Mumbai - 400072","mobilenumber":"8877889988"},"status":"danger","staff_id":{"name":"Rahul singh","mobilenumber":"6677889988"},"services":[{"name":"bp checkup","price":"500"},{"name":"Dr visit","price":"200"},{"name":"blood collection","price":"488"},{"name":"Blood sugar","price":"600"}]}]}]'),e.eventInfo=function(t){e.event=t,$("#eventObjectView").modal("show")
},e.cancelObjectView=function(){$("#eventObjectView").modal("hide")}};e.$inject=["$scope","$q"],angular.module("webApp").controller("schedulerController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c,p,u,m,g,h,v,f,y){e.addaddress={},e.temp||(e.temp={}),e.user||(e.user=d),e.searchObj||(e.searchObj={}),e.sorting||(e.sorting={}),e.data||(e.data={}),e.data.services||(e.data.services=[]),e.data.patient?e.patient=e.data.patient:(e.data.patient={},e.data.patient.type="nonmember",e.data.patient.registrationdate=new Date,e.data.patient.demography={},e.data.patient.demography.residentialaddress={},e.data.patient.demography.servicedeliveryaddress={},e.data.patient.demography.addresses=[],e.patient=e.data.patient),e.service_sm={},e.service_sm.service_id={},v.getReq()&&(e.data=v.getReq(),e.data&&(e.patient=angular.copy(e.data.client_id),e.data.patient=angular.copy(e.data.client_id),e.temppatient=angular.copy(e.data.client_id))),e.datePickerPopup={},e.datePickerPopup.minDate=new Date,e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.getSessionStorage=function(){e.AddressType=JSON.parse(sessionStorage.getItem("AddressType"))},e.SearchPatientByName=function(){var t={};t.currentPage=1,t.itemPerPage=20;var a=p.getPatientList(t,e.searchObj,!0);a.then(function(t){e.PatientList=t.response}),e.searchObj={}},e.SelectPatient=function(t){e.PatientList=[],e.data.client_id=t._id,e.data.patient=t,e.patient=e.data.patient,e.temppatient=angular.copy(t)},e.showAddressMap=function(){$("#AddressObjectView").modal("hide"),$("#mapAddressObjectView").modal("show")},e.showMap=function(t){$("#bookAppointmentObjectView").modal("hide"),$("#mapObjectView").modal("show"),e.map={center:{latitude:t[1],longitude:t[0]},zoom:10},e.options={scrollwheel:!0},e.coordsUpdates=0,e.dynamicMoveCtr=0,e.marker={id:0,coords:{latitude:t[1],longitude:t[0]},options:{draggable:!0},events:{dragend:function(s){a.log("marker dragend");var i=s.getPosition().lat(),n=s.getPosition().lng();a.log(i),a.log(n),e.marker.options={draggable:!0,labelContent:"lat: "+e.marker.coords.latitude+" lon: "+e.marker.coords.longitude,labelAnchor:"100 0",labelClass:"marker-labels"},t[1]=e.marker.coords.latitude,t[0]=e.marker.coords.longitude}}},e.$watchCollection("marker.coords",function(t,a){_.isEqual(t,a)||e.coordsUpdates++}),i(function(){e.marker.coords={latitude:t[1],longitude:t[0]},e.dynamicMoveCtr++,i(function(){e.marker.coords={latitude:t[1],longitude:t[0]},e.dynamicMoveCtr++},2e3)},1e3)},e.closeMap=function(){$("#mapObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.closeMapAddress=function(){$("#mapAddressObjectView").modal("hide"),$("#AddressObjectView").modal("show")},e.SelectArea=function(t){t?(e.data.area_id=t.area_id,e.slots=t.slots,e.pincodes=t.area_id.pincodes,e.getSubLocation(t.area_id._id),e.addaddress.area_id=t.area_id,e.addaddress.city_id=t.area_id.city_id):(e.data.area_id={},e.slots=[])},e.getSubLocation=function(t){var a={};a.type="SL",a.area_id=t;var s=g.get(a);s.then(function(t){e.subLocationList=t.response})},Date.prototype.getDayName=function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e[this.getDay()]},e.getWorkingHours=function(){e.fromday=e.data.fromdate.getDayName(),e.lowerfromday=e.fromday.toLowerCase();var t=f.getMinMaxTimeByDay(e.workinghours,e.fromday);e.temp.timeSlots=f.getTimeSlots(t).timeSlots,e.searchObj.searchDate=e.data.fromdate,e.searchObj.area_id=e.data.area_id._id,e.sorting.sortfield="fromtime",e.sorting.sort="asc";var a=y.getOrderList(e.searchObj,void 0,e.sorting);a.then(function(t){e.orderList=t.response,e.returnArray=[];for(var a=0;a<e.temp.timeSlots.length;a++)for(var s=0;s<e.slots.length;s++)if(e.slotdaylength=e.slots[s][e.lowerfromday],e.temp.timeSlots[a].time==e.slots[s].time)for(var i=0;i<e.slotdaylength;i++)e.tempobj={},e.tempobj.time=e.slots[s].time,e.tempobj.day=e.lowerfromday,e.returnArray.push(e.tempobj);for(var n=0,a=0;a<e.orderList.length;a++)for(var r=n;r<e.returnArray.length;r++)if(e.orderList[a].fromtime==e.returnArray[r].time){e.returnArray[r].day==e.lowerfromday?(e.returnArray[r].orderexist=!0,n=r+1):e.returnArray[r].orderexist=!1;break}})},e.checkAvailability=function(t){for(var a=0;a<e.orderList.length;a++)if(e.orderList[a].fromtime==t.time){if(t.day==e.lowerfromday){console.log("order mtach"),t.orderexist=!0;break}}else t.orderexist=!1},e.getNumber=function(e){return e?new Array(e):void 0},e.openBookAppointment=function(t,a){a.orderexist||(e.data.fromtime=t.time,$("#bookAppointmentObjectView").modal("show"))},e.closeAppointment=function(){$("#bookAppointmentObjectView").modal("hide")},e.DoneAppointment=function(){$("#bookAppointmentObjectView").modal("hide")},e.editPatient=function(t){e.data.patient=angular.copy(t),e.data.client_id=angular.copy(t._id),e.patient=angular.copy(t),$("#bookAppointmentObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.newPatient=function(){e.PatientList=[],e.patient={},e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[],$("#bookAppointmentObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.clearPatient=function(){e.data.patient=angular.copy(e.temppatient),e.temppatient&&(e.data.client_id=angular.copy(e.temppatient._id)),e.patient=angular.copy(e.temppatient),$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.savePatient=function(){if(e.patient._id){var t=p.updatePatient(e.patient);t.then(function(t){t.response._id&&($("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.data.patient=t.response,e.patient=t.response,e.data.client_id=t.response._id,e.temppatient=angular.copy(t.response))})}else{var t=p.addPatient(e.patient);t.then(function(t){t.response._id&&($("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.data.patient=t.response,e.patient=t.response,e.data.client_id=t.response._id,e.temppatient=angular.copy(t.response))})}$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=angular.copy(s),e.data.patient.demography.addresses[e.addaddress.index]=angular.copy(s),e.temppatient&&(e.temppatient.demography.addresses[e.addaddress.index]=angular.copy(s)),e.addaddress={},e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.data.patient.demography.addresses.push(s),e.patient.demography.addresses.push(s),e.temppatient&&e.temppatient.demography.addresses.push(s),e.addaddress={}}}else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.data.patient.demography.addresses.push(s),e.patient.demography.addresses.push(s),e.temppatient&&e.temppatient.demography.addresses.push(s),e.addaddress={}}},e.checkServiceAddress=function(t,a){for(var s=0;s<e.patient.demography.addresses.length;s++)s!=a?e.patient.demography.addresses[s].servicedeliveryaddress="false":e.patient.demography.addresses[a].servicedeliveryaddress="true"},e.closeAddAddress=function(){e.addaddress={},$("#AddressObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.editAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.editAdd=!0},e.deleteAddress=function(t,a){1!=e.patient.demography.addresses.length?(e.patient.demography.addresses.splice(a,1),t.servicedeliveryaddress&&(e.patient.demography.addresses[0].servicedeliveryaddress="true")):alert("not allowed")},e.getAllServices=function(t,a){var s={};s.currentPage=1,s.itemPerPage=20;var i=u.getpartnerservices(s,a);return i.then(function(t){return e.ServiceList=t.response,e.ServiceList})},e.SelectService=function(t){e.service_sm.service_id=angular.copy(t),e.data.services.push(e.service_sm),e.service_sm={},e.service_sm.service_id={},e.data.amount=0,e.data.services.forEach(function(t){t.service_id.price.mrp&&(e.data.amount=parseInt(e.data.amount)+parseInt(t.service_id.price.mrp))}),e.ServiceList=[],e.searchObj={}};var b="";e.showDeleteModel=function(e){b=e,$("#myModal").modal("show")},e.deleteService=function(){e.data.services.splice(b,1),$("#myModal").modal("hide"),$(".modal-backdrop").remove(),e.data.services.forEach(function(t){t.service_id.price.mrp&&(e.data.amount=parseInt(e.data.amount)+parseInt(t.service_id.price.mrp))})},e.saveRequest=function(){function t(){r.go(".",null,{reload:!0})}$("#progressIndicator").modal("show");var a=h.createServiceRequest(e.data);a.then(function(){$("#progressIndicator").modal("hide"),t()})},e.cancelRequest=function(){v.delReq(),n.path("main/serviceRequest")},e.closedeletemodal=function(){$("#myModal").modal("hide")},e.getSessionStorage()};e.$inject=["$scope","$q","$log","$http","$timeout","$location","$state","$stateParams","user","timeSlots","$rootScope","clientFactory","partnertestFactory","cityFactory","areaFactory","callFactory","servicerequestFactory","partnerFactory","orderFactory"],angular.module("webApp").controller("servicerequestController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(){s.get(e.paging,e.searchObj).then(function(t){e.display.services=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}e.paging={},e.searchObj={},e.paging.currentPage=1,e.paging.itemPerPage=20,function(){sessionStorage.getItem("searchServiceInfo")&&(e.searchObj=JSON.parse(sessionStorage.getItem("searchServiceInfo")),sessionStorage.removeItem("searchServiceInfo")),sessionStorage.getItem("searchServiceInfoPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchServiceInfoPaging")),sessionStorage.removeItem("searchServiceInfoPaging")),i()}(),e.get=function(){i()},e.edit=function(a){sessionStorage.setItem("searchServiceInfo",JSON.stringify(e.searchObj)),sessionStorage.setItem("searchServiceInfoPaging",JSON.stringify(e.paging)),t.path("/main/servicesinfo/"+a)}};e.$inject=["$scope","$location","testFactory","servicesinfoFactory"],angular.module("webApp").controller("servicesinfoController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(){a.get().then(function(t){e.display.services=t.response})}function n(t){s.getById(t).then(function(t){e.display.servicesinfo=t.response,e.servicetags=t.response.services,e.relatedservicesTags=t.response.relatedservices,e.aliasTag=t.response.alias})}!function(){"new"!=t.Id?n(t.Id):e.display.servicesinfo={},i()}(),e.tinymceOptions={height:300,selector:"textarea",theme:"modern",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code","insertdatetime media nonbreaking save table contextmenu directionality","template paste textcolor colorpicker textpattern imagetools"],toolbar1:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",toolbar2:"print preview media | forecolor backcolor fontselect fontsizeselect",image_advtab:!0,templates:[{title:"Test template 1",content:"Test 1"},{title:"Test template 2",content:"Test 2"}],imagetools_toolbar:"rotateleft rotateright | flipv fliph | editimage imageoptions"},e.Save=function(){e.display.servicesinfo.alias=[],e.display.servicesinfo.services=[],e.display.servicesinfo.relatedservices=[],angular.forEach(e.aliasTag,function(t){e.display.servicesinfo.alias.push(t.text)}),angular.forEach(e.relatedservicesTags,function(t){e.display.servicesinfo.relatedservices.push(t._id)}),angular.forEach(e.servicetags,function(t){e.display.servicesinfo.services.push(t._id)}),e.display.servicesinfo._id?r(e.display.servicesinfo):o(e.display.servicesinfo)},e.searchTest=function(t){var a=e.display.services.filter(function(e){return e.name&&!e._Deleted&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a};var r=function(t){s.update(t).then(function(){e.successFlag=!0})},o=function(){s.add(e.display.servicesinfo).then(function(){e.successFlag=!0})}};e.$inject=["$scope","$stateParams","testFactory","servicesinfoFactory"],angular.module("webApp").controller("servicesinfoObjectController",e)}(),angular.module("webApp").factory("servicesinfoFactory",["apiCall",function(e){function t(t){return e.httpPOST("servicesinfo",t)}function a(t){return e.httpPUT("servicesinfo/"+t._id,t)}function s(t,a){var s="";return a&&a.testserch&&(s=s+"title="+a.testserch),t&&t.currentPage&&t.itemPerPage&&(s=s+"&page="+t.currentPage+"&limit="+t.itemPerPage),e.httpGET("servicesinfo?"+s)}function i(t){return e.httpGET("servicesinfo/"+t)}return{get:s,add:t,update:a,getById:i}}]),function(){"use strict";var e=function(e,t,a,s){function i(){a.get(e.paging).then(function(t){e.display.specialneeds=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}e.display.specialneeds,e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,function(){sessionStorage.getItem("searchSpecialneedPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchSpecialneedPaging")),sessionStorage.removeItem("searchSpecialneedPaging")),i()}(),e.get=function(){i()},e.edit=function(t){sessionStorage.setItem("searchSpecialneedPaging",JSON.stringify(e.paging)),s.path("/main/specialneed/"+t)}};e.$inject=["$scope","$stateParams","specialneedFactory","$location"],angular.module("webApp").controller("specialneedController",e)}(),function(){"use strict";var e=function(e,t,a){function s(t){a.getByID(t).then(function(t){e.specailneedObj=t.response})}!function(){"new"!=t.Id?s(t.Id):e.specailneedObj={}}(),e.Save=function(){e.specailneedObj._id?i(e.specailneedObj):n(e.specailneedObj)};var i=function(){a.update(e.specailneedObj).then(function(){e.successFlag=!0,e.specailneedObj={}})},n=function(t){a.add(t).then(function(){e.successFlag=!0,e.specailneedObj={}})}};e.$inject=["$scope","$stateParams","specialneedFactory"],angular.module("webApp").controller("specialneedObjectController",e)}(),angular.module("webApp").factory("specialneedFactory",["apiCall",function(e){function t(t){return e.httpGET(t?"specialneed?page="+t.currentPage+"&limit="+t.itemPerPage:"specialneed")}function a(t){return console.log(t),e.httpGET("specialneed/"+t)}function s(t){return e.httpPOST("specialneed",t)}function i(t){return e.httpPUT("specialneed/"+t._id,t)}return{get:t,getByID:a,add:s,update:i}}]),function(){"use strict";var e=function(e,t,a,s,i,n,r){function o(){var t=[];_.each(e.staffList[0].availableTime,function(e){var a={};a.time=parseInt(e.time),t.push(a)}),e.timeArray=_.sortBy(t,"time")}$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.searchObj={},e.searchObj.role="serviceagent",e.searchObj.day=!0,e.searchObj.evening=!1,e.modal={},e.modal.orderListModal={},e.modal.bookedOrderListModal={},e.temp={},e.temp.selectedPhlebos=[],e.temp.area=[],e.datePickerPopup={},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0};var d=new Date;d=d.setHours("00"),d=new Date(d).setMinutes("00"),d=new Date(d).setSeconds("00"),d=new Date(d).setMilliseconds("000"),e.searchObj.searchDate=new Date(d),e.getAreas=function(){var t={};t.type="MA";var a=s.get(t);a.then(function(t){e.areaList=t.response,e.areaListing=angular.copy(t.response)})},e.previousDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()-1)),e.getStaffAvailability()},e.todayDate=function(){var t=new Date;t=t.setHours("00"),t=new Date(t).setMinutes("00"),t=new Date(t).setSeconds("00"),t=new Date(t).setMilliseconds("000"),e.searchObj.searchDate=new Date(t),e.getStaffAvailability()},e.nextDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()+1)),e.getStaffAvailability()},e.getSublocationByArea=function(){if(e.searchObj.area_id){var t={};t.area_id=e.searchObj.area_id,r.getPaging("",t).then(function(t){e.subLocationList=t.response})}},e.subLocationChange=function(){e.getOrders(e.modal.orderListModal.timeObj,e.modal.orderListModal.staff)},e.getStaffAvailability=function(){e.searchObj.area_id&&e.searchObj.searchDate?i.getStaffAvailability(e.searchObj).then(function(t){e.staffList=angular.copy(t.response.users),e.AllStaffList=angular.copy(t.response.users),e.orders=t.response.orders,o(),e.temp.selectedPhlebos&&e.temp.selectedPhlebos.length&&e.changePhlebo()}):($("#alertMessage").modal("show"),e.temp.area=[],e.staffList=[],e.AllStaffList=[])},e.changeArea=function(){if(e.staffList=[],e.temp.area.length){for(var t=[],a=0;a<e.temp.area.length;a++)t.push(e.temp.area[a]._id);e.searchObj.area_id=t.join(",");var s={};_.each(e.temp.area,function(e){s[e._id]=!0}),e.areaList=_.filter(e.areaListing,function(e){return s[e._id]},e.temp.area),e.getStaffAvailability()}else e.temp.area=[],e.areaList=angular.copy(e.areaListing)},e.searchArea=function(t){var a=e.areaListing.filter(function(e){return e._id&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a.forEach(function(e){e.name=e.name}),a},e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.sort={sortfield:"fromtime",sort:"asc"},e.selectedCls=function(t){return t==e.sort.sortfield&&"sort-"+e.sort.sort},e.changeSorting=function(t){e.sort.sortfield==t?e.sort.sort="asc"==e.sort.sort?"desc":"asc":(e.sort.sortfield=t,e.sort.sort="asc"),e.getOrders(e.modal.orderListModal.timeObj,e.modal.orderListModal.staff)},e.getOrders=function(t,a){if(e.modal.orderListModal.timeObj=t,e.modal.orderListModal.staff=a,t.available){e.searchOrderObj={},e.searchOrderObj.area_id=e.searchObj.area_id,e.searchOrderObj.fromdate=e.searchObj.searchDate,e.searchOrderObj.fromtime=t.time,e.searchOrderObj.totime=parseInt(t.time)+60,e.searchOrderObj.status="Unassigned",e.searchOrderObj.sublocation_id=e.modal.orderListModal.sublocation_id;var s=n.getOrderList(e.searchOrderObj,e.paging,e.sort);s.then(function(t){e.OrderList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,e.searchOrderObj.sublocation_id||$("#orderListModal").modal("show")})}t.available||(e.modal.bookedOrderListModal.timeObj=t,e.modal.bookedOrderListModal.staff=a,e.modal.bookedOrderListModal.fromtime=t.time,e.modal.bookedOrderListModal.totime=parseInt(t.time)+60,$("#bookedOrderListModal").modal("show"))},e.closeOrderListModal=function(){e.modal.orderListModal.sublocation_id="",$("#orderListModal").modal("hide")},e.assignStaff=function(t,a){e.closeOrderListModal();var s={assignto:a._id};$("#phleboModal").modal("hide"),n.assignPhlebo(t._id,s).then(function(){e.getStaffAvailability()})},e.searchPhlebo=function(t){var a=e.AllStaffList.filter(function(e){return e._id&&-1!==e.profile.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a.forEach(function(e){e.name=e.profile.name}),a},e.changePhlebo=function(){if(e.temp.selectedPhlebos.length){var t={};_.each(e.temp.selectedPhlebos,function(e){t[e._id]=!0}),e.staffList=_.filter(e.AllStaffList,function(e){return t[e._id]},e.temp.selectedPhlebos)}else e.temp.selectedPhlebos=[],e.staffList=angular.copy(e.AllStaffList)},e.getAreas(),e.initializePaging(),e.pushArea=function(t){if(e.temp.area.length){for(var a=!1,s=0;s<e.temp.area.length;s++)if(e.temp.area[s]._id==t._id){a=!0;break}0==a&&e.temp.area.push(t)}else e.temp.area=[],e.temp.area.push(t);if(e.staffList=[],e.temp.area.length){for(var i=[],s=0;s<e.temp.area.length;s++)i.push(e.temp.area[s]._id);e.searchObj.area_id=i.join(","),e.temp.selectedPhlebos=[],e.getStaffAvailability(),e.getSublocationByArea(t)}else e.temp.area=[],e.areaList=angular.copy(e.areaListing);e.area={}},e.removeArea=function(t,a){e.temp.area.splice(a,1);for(var s=[],i=0;i<e.temp.area.length;i++)s.push(e.temp.area[i]._id);e.searchObj.area_id=s.join(","),e.temp.selectedPhlebos=[],e.getStaffAvailability(),e.getSublocationByArea(t)},e.selectAreaOK=function(){$("#alertMessage").modal("hide")}};e.$inject=["$scope","$q","$location","areaFactory","staffAvailabilityFactory","orderFactory","sublocationFactory"];var t=angular.module("webApp");t.controller("mlyStaffAvailabilityController",e)}(),angular.module("webApp").factory("staffAvailabilityFactory",["apiCall",function(e){function t(t){var a="getuserwithorder?";return t&&(t.area_id&&(a=a+"&area_id="+t.area_id),t.searchDate&&(t.searchDate=new Date(t.searchDate).toISOString(),a=a+"&date="+t.searchDate),t.day&&(a=a+"&day="+t.day),t.evening&&(a=a+"&evening="+t.evening),t.role&&(a=a+"&role="+t.role)),e.httpGET(a)}return{getStaffAvailability:t}}]),function(){"use strict";var e=function(e,t,a,s,i){function n(){i.get().then(function(t){e.cities=t.response})}function r(){a.getSublocationTypeMA().then(function(t){e.display.majorArea=t.response,sessionStorage.setItem("MajorAreaList",JSON.stringify(e.display.majorArea))})}!function(){n(),e.display={},sessionStorage.getItem("MajorAreaList")?e.display.majorArea=JSON.parse(sessionStorage.getItem("MajorAreaList")):r(),e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,e.search={},sessionStorage.getItem("searchSubLocation")&&(e.search=JSON.parse(sessionStorage.getItem("searchSubLocation")),sessionStorage.removeItem("searchSubLocation"),e.search&&e.search.area_id&&e.display.majorArea.forEach(function(t){t._id==e.search.area_id._id&&(e.majorAreaview=t)})),sessionStorage.getItem("searchSubLocationPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchSubLocationPaging")),sessionStorage.removeItem("searchSubLocationPaging"))}(),e.edit=function(a){sessionStorage.setItem("searchSubLocation",JSON.stringify(e.search)),sessionStorage.setItem("searchSubLocationPaging",JSON.stringify(e.paging)),t.path("/main/sublocation/"+a)},e.get=function(t){t&&(e.search.area_id=t),console.log(e.search),a.getPaging(e.paging,e.search).then(function(t){e.sublocations=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.get(),e.setSublocationAccordingMajorArea=function(t){a.getSublocationTypeSL(e.paging).then(function(s){console.log(s),e.sublocations=s.response;var i=a.getSLAccordingToMajorArea(t,e.sublocations);console.log(i),e.sublocations=i})}};e.$inject=["$scope","$location","sublocationFactory","areaFactory","cityFactory"],angular.module("webApp").controller("sublocationController",e)}(),function(){"use strict";var e=function(e,t,a,s,i){function n(){e.pincodeList=[],i.get().then(function(t){console.log(t),e.cities=t.response})}function r(){e.pincodeList=[];var t={};t.type="MA",s.get(t).then(function(t){console.log(t),e.areas=t.response})}function o(t){e.pincodeList=[];var a=[];return angular.forEach(e.areas,function(e){t._id==e.city_id._id&&a.push(e)}),a}function d(t){s.getById(t).then(function(t){e.sublocation=t.response,console.log(t.response),e.setArea(e.sublocation.city_id),e.area=e.sublocation.parent_areas[0].area_id,e.getPincode(),e.sublocation.pincode=t.response.pincodes[0]})}!function(){n(),r(),"new"!=t.Id?d(t.Id):e.sublocation={}}(),e.Save=function(){var t={};t=angular.copy(e.sublocation),t.type="SL",t.parent_areas=[],t.pincodes=[],t.pincodes.push(e.sublocation.pincode),delete t.pincode;var a={area_id:e.area._id};t.parent_areas.push(a),t._id?l(t):c(t)},e.getSLAreas=function(t){if(e.pincodeList=[],t){var s={};a.getSublocationTypeSL().then(function(i){s=a.getSLAccordingToMajorArea(t,i),e.AreaTypeSL=s})}},e.setArea=function(t){t?e.filteredAreas=o(t):" "},e.getPincode=function(){e.pincodeList=e.area?e.area.pincodes:[]};var l=function(t){a.update(t).then(function(){e.sublocation={},e.area={},e.successFlag=!0})},c=function(t){a.add(t).then(function(t){console.log(t),e.sublocation={},e.area={},e.successFlag=!0})},p=document.getElementById("Latitude");p.onkeydown=function(e){return e.keyCode>95&&e.keyCode<106||e.keyCode>47&&e.keyCode<58||8==e.keyCode||190==e.keyCode||46==e.keyCode||e.keyCode>36&&e.keyCode<41?void 0:!1};var u=document.getElementById("Longitude");u.onkeydown=function(e){return e.keyCode>95&&e.keyCode<106||e.keyCode>47&&e.keyCode<58||8==e.keyCode||190==e.keyCode||46==e.keyCode||e.keyCode>36&&e.keyCode<41?void 0:!1}};e.$inject=["$scope","$stateParams","sublocationFactory","areaFactory","cityFactory"],angular.module("webApp").controller("sublocationObjectController",e)}(),angular.module("webApp").factory("sublocationFactory",["apiCall",function(e){function t(t){return e.httpPOST("areas",t)}function a(){return e.httpGET("areas?type=SL")}function s(t,a){var s="areas?type=SL";return t&&(s=s+"&page="+t.currentPage+"&limit="+t.itemPerPage),a&&(a.area_id&&(s=s+"&area_id="+a.area_id._id),a.areasearch&&(s=s+"&areasearch="+a.areasearch)),e.httpGET(s)}function i(t){return e.httpPUT("areas/"+t._id,t)}function n(){return console.log("into"),e.httpGET("areas?type=MA")}function r(e,t){var a=[];return angular.forEach(t,function(t){e._id===t.parent_areas[0].area_id._id&&a.push(t)}),a}return{add:t,update:i,getSublocationTypeSL:a,getSLAccordingToMajorArea:r,getPaging:s,getSublocationTypeMA:n}}]),function(){"use strict";var e=function(e,t,a){e.areasobj={},e.searchObj={},e.paging={},e.paging.itemPerPage=20,e.paging.currentPage=1,sessionStorage.getItem("searchSuperArea")&&(e.searchObj=JSON.parse(sessionStorage.getItem("searchSuperArea")),sessionStorage.removeItem("searchSuperArea")),sessionStorage.getItem("searchSuperAreaPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchSuperAreaPaging")),sessionStorage.removeItem("searchSuperAreaPaging")),e.edit=function(a){sessionStorage.setItem("searchSuperArea",JSON.stringify(e.searchObj)),sessionStorage.setItem("searchSuperAreaPaging",JSON.stringify(e.paging)),t.path("main/superarea/"+a)},e.getAreasTypeSA=function(){e.searchObj.type="SA",a.get(e.searchObj,e.paging).then(function(t){e.areas=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.getAreasTypeSA()};e.$inject=["$scope","$location","areaFactory","cityFactory"],angular.module("webApp").controller("superAreaController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n){function r(){e.cities={},n.get().then(function(t){e.cities=t.response})}function o(t){var a={};a.type="MA",a.city_id=t,i.get(a).then(function(t){e.display.areas=t.response})}function d(t){i.getById(t).then(function(t){e.areasobj=t.response,e.temp.areas=e.areasobj.parent_areas,o(e.areasobj.city_id._id)})}e.searchObj={},e.temp={},e.temp.areas=[],e.successFlag=!1,function(){r(),"new"!=t.Id?d(t.Id):e.areasobj={}}(),e.selectCity=function(t){e.areasobj.name="",e.temp.areas=[],e.areasobj.description="",o(t._id)},e.Save=function(){var t={},a={};a.type="SA",a.city_id=e.areasobj.city_id,a.name=e.areasobj.name,a.parent_areas=e.temp.areas,a.description=e.areasobj.description,t=a,e.areasobj._id?i.update(e.areasobj).then(function(){e.successFlag=!0,e.areasobj={},e.temp.areas=[]}):i.add(t).then(function(){e.successFlag=!0,e.areasobj={},e.temp.areas=[]})},e.pushArea=function(t){if(e.temp.areas.length){for(var a=!1,s=0;s<e.temp.areas.length;s++)if(e.temp.areas[s]._id==t._id){a=!0;break}if(0==a){var i={area_id:t};e.temp.areas.push(i)}}else{var i={area_id:t};e.temp.areas.push(i)}e.display.selectedarea=[]},e.removeArea=function(t,a){e.temp.areas.splice(a,1)},e.BackTolist=function(){a.go("main.superarea")}};e.$inject=["$scope","$stateParams","$state","$location","areaFactory","cityFactory"],angular.module("webApp").controller("superareaObjectController",e)}(),function(){"use strict";var e=function(e,t,a){function s(){a.get(e.paging,e.searchObj).then(function(t){e.testList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}e.searchObj={},e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,e.activeModal={},function(){sessionStorage.getItem("searchTest")&&(e.searchObj=JSON.parse(sessionStorage.getItem("searchTest")),sessionStorage.removeItem("searchTest")),sessionStorage.getItem("searchTestPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchTestPaging")),sessionStorage.removeItem("searchTestPaging")),s()}(),e.deleteTest=function(e){$("#activeModal").modal("hide"),a.deleteTest(e,"services").then(function(){window.location.reload()})},e.setActive=function(t,a){console.log(a),"active"==t&&(e.activeModal.header="Active"),"deactive"==t&&(e.activeModal.header="Deactive"),e.activeModal.displayText=a,$("#activeModal").modal("show")},e.get=function(){s()},e.edit=function(a){sessionStorage.setItem("searchTest",JSON.stringify(e.searchObj)),sessionStorage.setItem("searchTestPaging",JSON.stringify(e.paging)),t.path("/main/test/"+a)},e.onFileSelect=function(e){a.addFile(e).then(function(){})}};e.$inject=["$scope","$location","testFactory","partnertestFactory"],angular.module("webApp").controller("testController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(){a.add(e.test).then(function(){e.test={},e.successFlag=!0})}function n(){a.put(e.test).then(function(){e.test={},e.successFlag=!0})}function r(t){a.getById(t).then(function(t){e.test=t.response})}!function(){"new"!=t.Id?r(t.Id):e.test={}}(),e.sampletypes=JSON.parse(sessionStorage.getItem("SampleType")).childs,e.special_test=function(){0==e.test.specialservice&&(e.test.method="")},e.Save=function(){e.test._id?n(e.test):i(e.test)}};e.$inject=["$scope","$stateParams","testFactory","optionMasterFactory"],angular.module("webApp").controller("testObjectController",e)}(),angular.module("webApp").factory("testFactory",["apiCall",function(e){function t(t,a){if(!t&&!a)return e.httpGET("services");var s="";return t&&t.currentPage&&t.itemPerPage&&(s=s+"&page="+t.currentPage+"&limit="+t.itemPerPage),a&&(a.servicename&&(s=s+"&name="+a.servicename),1==a.active&&(s=s+"&active="+a.active),a.specialservice&&(s=s+"&specialservice="+a.specialservice)),e.httpGET("services?"+s)}function a(t){return e.httpGET("services?&name="+t)}function s(t){return e.httpGET("services/"+t)}function i(t){return e.httpPOST("services",t)}function n(t){return e.httpPUT("services/"+t._id,t)}function r(t){return e.httpFilePost("imports",t,null,"file")}function o(t,a){return e.httpDELETE(a+"/"+t._id)}return{get:t,getById:s,add:i,put:n,addFile:r,deleteTest:o,getmasterServices:a}}]),function(){"use strict";var e=function(e,t,a){function s(){if(sessionStorage.getItem("TubeType")){var t=JSON.parse(sessionStorage.getItem("TubeType"));e.display.type=t.childs}if(sessionStorage.getItem("TubeCompany")){e.display.company=[];var a=JSON.parse(sessionStorage.getItem("TubeCompany"));e.display.company=a.childs}if(sessionStorage.getItem("TubeColor")){e.display.color=[];var s=JSON.parse(sessionStorage.getItem("TubeColor"));e.display.color=s.childs}if(sessionStorage.getItem("TubeSize")){e.display.size=[];var i=JSON.parse(sessionStorage.getItem("TubeSize"));e.display.size=i.childs}}e.search={},e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,function(){sessionStorage.getItem("searchTube")&&(e.search=JSON.parse(sessionStorage.getItem("searchTube")),sessionStorage.removeItem("searchTube")),sessionStorage.getItem("searchTubePaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchTubePaging")),sessionStorage.removeItem("searchTubePaging")),s()}(),e.getSortTubes=function(){var t="";e.search.company&&(t+="&company="+e.search.company),e.search.type&&(t+="&type="+e.search.type),e.search.size&&(t+="&size="+e.search.size),e.search.color&&(t+="&color="+e.search.color),a.getsortTubes(e.paging,t).then(function(t){e.tubelist=[],e.tubelist=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.edit=function(a){sessionStorage.setItem("searchTube",JSON.stringify(e.search)),sessionStorage.setItem("searchTubePaging",JSON.stringify(e.paging)),t.path("/main/tube/"+a)},e.addFile=function(t){a.addFile(t).then(function(){e.getSortTubes()})},e.deleteTube=function(e){e._Deleted=!0,a.deleteTube(e).then(function(e){console.log(e),location.reload()})},e.getSortTubes()};e.$inject=["$scope","$location","tubeFactory"],angular.module("webApp").controller("tubeController",e)
}(),function(){"use strict";var e=function(e,t,a,s){function i(t){a.update(t).then(function(t){t?e.tube={}:"",e.successFlag=!0})}function n(t){a.add(t).then(function(){e.tube={},e.successFlag=!0})}function r(t){a.getById(t).then(function(t){e.tube=t.response})}function o(){s.get(void 0,!0).then(function(t){t.response.forEach(function(e){e.isParent?d.push(e):l.push(e)}),e.types=[],e.companies=[],e.colors=[],e.sizes=[],d.forEach(function(t){l.forEach(function(a){if(a.parent_id==t._id)switch(t.name){case"TubeType":e.types.push(a);break;case"TubeCompany":e.companies.push(a);break;case"TubeColor":e.colors.push(a);break;case"TubeSize":e.sizes.push(a)}})})})}var d=[],l=[];!function(){"new"!=t.Id?r(t.Id):e.tube={},o()}(),e.colorChange=function(){e.tube.color.code=e.tube.color.code},e.Save=function(){e.tube._id?i(e.tube):n(e.tube)}};e.$inject=["$scope","$stateParams","tubeFactory","optionMasterFactory","partnerFactory"],angular.module("webApp").controller("tubeObjectController",e)}(),angular.module("webApp").factory("tubeFactory",["apiCall",function(e){function t(t){return e.httpPOST("tubes",t)}function a(t,a){var s="";return t&&t.currentPage&&t.itemPerPage&&(s+="&page="+t.currentPage+"&limit="+t.itemPerPage),a&&a.searchtube&&(s+="&searchtube="+a.searchtube),e.httpGET("tubes?"+s)}function s(t){return e.httpGET("tubes/"+t)}function i(t){return e.httpPUT("tubes/"+t._id,t)}function n(t){return e.httpFilePost("imports/tubes",t,null,"file")}function r(t){return e.httpDELETE("tubes/"+t._id,t)}function o(t,a){return e.httpGET(t?"tubes?"+a+"&page="+t.currentPage+"&limit="+t.itemPerPage:"tubes")}return{add:t,get:a,getById:s,update:i,addFile:n,deleteTube:r,getsortTubes:o}}]),function(){"use strict";var e=function(e,t,a,s,i){e.searchObj={},e.display={},e.display.area=[],e.display.phlebo=[],e.display.logis=[],e.data=[],e.finalData=[],e.logisticsData=[],e.searchObj.area=[],e.searchObj.phlebo=[],e.searchObj.logis=[];var n=new Date;e.searchObj.fromDate=moment(n).startOf("day"),e.searchObj.toDate=moment(n).startOf("day"),e.searchObj.fromDate=new Date(e.searchObj.fromDate),e.searchObj.toDate=new Date(e.searchObj.toDate),e.datePickerPopup={},e.changeCity=function(){if(e.searchObj.city){e.searchObj.area=[],e.display.area=[],e.searchObj.phlebo=[],e.searchObj.logis=[],e.display.phlebo=[],e.display.logis=[];var s={};s.city_id=e.searchObj.city;var i=t.get(s);i.then(function(t){e.areaList=t.response}),s.from_date=e.searchObj.fromDate.toISOString(),s.to_date=e.searchObj.toDate.toISOString(),a.getAttendance(s).then(function(t){var a=angular.copy(t.response.usersAttendance);a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),e.data=angular.copy(a),e.finalData=[],e.logisticsData=[];for(var s=0;s<e.data.length;s++)"serviceagent"==e.data[s].role?e.finalData.push(e.data[s]):"logistic"==e.data[s].role&&e.logisticsData.push(e.data[s])})}},e.getCity=function(){e.userinfo=JSON.parse(sessionStorage.getItem("globaldata")),"providerteamlead"==e.userinfo.userdata.role?(e.searchObj.city=e.userinfo.userdata.profile.city_id._id,e.searchObj.cityname=e.userinfo.userdata.profile.city_id.name,e.changeCity()):i.get().then(function(t){e.cities=t.response})},e.getCity(),e.getAreas=function(){var a={};a.type="MA";var s=t.get(a);s.then(function(t){e.areaList=t.response})},e.openDatePicker=function(t,a){e.searchObj.city?(t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0):$("#selectCity").modal("show")},e.headerDisplay=function(){e.headersFormats={month:"MMMM YYYY",day:"D [-] ddd"}},e.headerDisplay(),e.getOrderList=function(){var t={};if(e.searchObj.fromDate&&e.searchObj.toDate&&e.searchObj.city){if(e.diff=moment(e.searchObj.toDate).diff(moment(e.searchObj.fromDate),"day"),t.from_date=e.searchObj.fromDate.toISOString(),t.to_date=e.searchObj.toDate.toISOString(),t.city_id=e.searchObj.city,e.display.area.length){for(var s=[],i=0;i<e.display.area.length;i++)s.push(e.display.area[i]._id);t.area_ids=s.join(",")}if(e.display.phlebo.length){for(var n=[],i=0;i<e.display.phlebo.length;i++)n.push(e.display.phlebo[i].id);t.user_ids=n.join(",")}a.getAttendance(t).then(function(t){e.data1=t.response.usersAttendance;var a=e.data1;a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),e.data=a,e.finalData=[],e.logisticsData=[];for(var s=0;s<e.data.length;s++)"serviceagent"==e.data[s].role?e.finalData.push(e.data[s]):"logistic"==e.data[s].role&&e.logisticsData.push(e.data[s])})}},e.loadArea=function(t){var a=e.areaList.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return 0==a.length&&alert("no result found"),a},e.changeArea=function(){var t={};if(e.searchObj.phlebo=[],e.searchObj.logis=[],e.display.phlebo=[],e.display.logis=[],e.display.area.length){for(var s=[],i=0;i<e.display.area.length;i++)s.push(e.display.area[i]._id);t.area_ids=s.join(","),t.from_date=e.searchObj.fromDate.toISOString(),t.to_date=e.searchObj.toDate.toISOString(),t.city_id=e.searchObj.city,a.getAttendance(t).then(function(t){e.data1=t.response.usersAttendance;var a=e.data1;a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),e.data=a,e.finalData=[],e.logisticsData=[];for(var s=0;s<e.data.length;s++)"serviceagent"==e.data[s].role?e.finalData.push(e.data[s]):"logistic"==e.data[s].role&&e.logisticsData.push(e.data[s])})}else e.display.area=[],e.changeCity()},e.pushArea=function(t){if(e.display.area.length){for(var a=!1,s=0;s<e.display.area.length;s++)if(e.display.area[s]._id==t._id){a=!0;break}0==a&&e.display.area.push(t)}else e.display.area=[],e.display.area.push(t);e.changeArea()},e.removeArea=function(t,s){var i={};if(e.searchObj.phlebo=[],e.searchObj.logis=[],e.display.phlebo=[],e.display.logis=[],e.display.area.splice(s,1),e.display.area.length){for(var n=[],r=0;r<e.display.area.length;r++)n.push(e.display.area[r]._id);i.area_ids=n.join(","),i.from_date=e.searchObj.fromDate.toISOString(),i.to_date=e.searchObj.toDate.toISOString(),i.city_id=e.searchObj.city,a.getAttendance(i).then(function(t){e.data1=t.response.usersAttendance;var a=e.data1;a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),e.data=a,e.finalData=[],e.logisticsData=[];for(var s=0;s<e.data.length;s++)"serviceagent"==e.data[s].role?e.finalData.push(e.data[s]):"logistic"==e.data[s].role&&e.logisticsData.push(e.data[s])})}else e.searchObj.area={},e.display.area=[],e.changeCity()},e.pushPhlebo=function(t){if(e.searchObj.phlebo="",e.display.phlebo.length){for(var a=!1,s=0;s<e.display.phlebo.length;s++)if(e.display.phlebo[s].id==t.id){a=!0;break}0==a&&e.display.phlebo.push(t)}else e.display.phlebo=[],e.display.phlebo.push(t);e.changePhlebo()},e.pushLogistics=function(t){if(e.searchObj.logis="",e.display.logis.length){for(var a=!1,s=0;s<e.display.logis.length;s++)if(e.display.logis[s].id==t.id){a=!0;break}0==a&&e.display.logis.push(t)}else e.display.logis=[],e.display.logis.push(t);e.changePhlebo()},e.changePhlebo=function(t,s,i){var n={};"rm_phlebo"==i&&e.display.phlebo.splice(s,1),"rm_logis"==i&&e.display.logis.splice(s,1);var r=[];if(e.display.phlebo.length)for(var o=0;o<e.display.phlebo.length;o++)r.push(e.display.phlebo[o].id);if(e.display.logis.length)for(var o=0;o<e.display.logis.length;o++)r.push(e.display.logis[o].id);n.user_ids=r.join(","),e.display.phlebo.length||e.display.logis.length?(n.from_date=e.searchObj.fromDate.toISOString(),n.to_date=e.searchObj.toDate.toISOString(),n.city_id=e.searchObj.city,a.getAttendance(n).then(function(t){e.data1=t.response.usersAttendance;var a=e.data1;a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),e.data=a})):(e.display.phlebo=[],e.display.logis=[],e.display.area.length?e.changeArea():e.changeCity())},e.closeModal=function(){$("#selectCity").modal("hide")}};e.$inject=["$scope","areaFactory","userattendanceFactory","$location","cityFactory"],angular.module("webApp").controller("userattendController",e)}(),angular.module("webApp").factory("userattendanceFactory",["apiCall",function(e){function t(t){var a="getUsersAttendance?";return t?(t.from_date&&(a=a+"&from_date="+t.from_date),t.to_date&&(a=a+"&to_date="+t.to_date),t.city_id&&(a=a+"&city_id="+t.city_id),t.area_ids&&(a=a+"&areas="+t.area_ids),t.user_ids&&(a=a+"&users="+t.user_ids),e.httpGET(a)):void 0}return{getAttendance:t}}]),function(){"use strict";var e=function(e,t,a,s,i,n,r,o){function d(a){t.add(a).then(function(){e.successFlag=!0})}function l(a){t.update(a).then(function(){e.successFlag=!0})}e.display.users=[],e.display.user={},e.display.user.profile={},e.display.user.availability={},e.display.user.userinfo={},e.display.partners={},e.display.cities={},e.activeModal={},function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,e.searchObj={},e.searchObj.active="true",e.searchObj.onloadlist="true",e.searchObj.onPhleboSelection="false",e.searchObj.onLogisticSelection="false",sessionStorage.getItem("searchuserinfo")&&(e.searchObj=JSON.parse(sessionStorage.getItem("searchuserinfo")),sessionStorage.removeItem("searchuserinfo")),sessionStorage.getItem("paginguserinfo")&&(e.paging=JSON.parse(sessionStorage.getItem("paginguserinfo")),sessionStorage.removeItem("paginguserinfo"))}(),e.edit=function(t){console.log("id called"),e.searchObj&&sessionStorage.setItem("searchuserinfo",JSON.stringify(e.searchObj)),sessionStorage.setItem("paginguserinfo",JSON.stringify(e.paging)),o.path("/main/user/"+t)},e.save=function(){e.display.user._id?l(e.display.user):d(e.display.user)},e.getRoleLabel=function(t){var a=_.find(e.display.roles,function(e){return e.name==t});return a?a.label:void 0},e.edituser=function(t){$("#timingModal").modal("show"),e.display.user=t},e.clear=function(){e.display.user={}},e.timing=function(){$("#timingModal").collapse("show")},e.closemodal=function(){$("#timingModal").collapse("hide")},e.saveTiming=function(){$("#timingModal").collapse("hide")},e.get=function(){t.getu(e.paging,e.searchObj).then(function(t){t&&(t.users&&(e.display.users=t.users),t.cities&&(e.display.cities=t.cities),t.roles&&(e.display.roles=t.roles),t.partners&&(e.display.partners=t.partners),t.specialneeds&&(e.display.spclNeeds=t.specialneeds),t.services&&(e.display.spclTests=t.services),t.areas&&(e.display.areas=t.areas)),e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.get(),e.changeRole=function(){"serviceagent"!=e.searchObj.role?(e.searchObj.specialneeds="",e.searchObj.specialtests=""):(e.searchObj.onPhleboSelection="true",e.searchObj.onLogisticSelection="false",e.searchObj.onloadlist="false"),"logistic"==e.searchObj.role&&(e.searchObj.onLogisticSelection="true",e.searchObj.onPhleboSelection="false",e.searchObj.onloadlist="false"),"logistic"!=e.searchObj.role&&"serviceagent"!=e.searchObj.role&&(e.searchObj.onLogisticSelection="false",e.searchObj.onPhleboSelection="false",e.searchObj.onloadlist="false"),"partnerteamlead"!=e.searchObj.role&&"partnerfrontoffice"!=e.searchObj.role&&"providerteamlead"!=e.searchObj.role&&(e.searchObj.partner_id=""),"serviceagent"!=e.searchObj.role&&"logistic"!=e.searchObj.role&&(e.searchObj.area_id=""),e.get()},e.changeCity=function(){e.searchObj.onPhleboSelection="true"==e.searchObj.onPhleboSelection?"true":"false",e.searchObj.onLogisticSelection="true"==e.searchObj.onLogisticSelection?"true":"false",e.searchObj.onloadlist="false",e.get()},e.changeStatus=function(){e.searchObj.onPhleboSelection="true"==e.searchObj.onPhleboSelection?"true":"false",e.searchObj.onLogisticSelection="true"==e.searchObj.onLogisticSelection?"true":"false",e.searchObj.onloadlist="false",e.get()},e.nextPageData=function(){e.searchObj.onloadlist="false",e.get()},e.setActive=function(t,a){"active"==t&&(e.activeModal.header="Active"),"deactive"==t&&(e.activeModal.header="Deactive"),e.activeModal.displayText=a,$("#activeModal").modal("show")},e.deleteUser=function(a,s){"Active"==s?a._Deleted=!1:"Deactive"==s&&(a._Deleted=!0),t.update(a).then(function(){e.get()})}};e.$inject=["$scope","userinfoFactory","cityFactory","partnerFactory","testFactory","areaFactory","specialneedFactory","$location"],angular.module("webApp").controller("userinfoController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o){function d(){t.get().then(function(t){e.display.users=t.response})}function l(a){t.add(a).then(function(){e.display.user={},e.successFlag=!0})}function c(a){t.update(a).then(function(){e.display.user={},e.successFlag=!0})}function p(){s.get().then(function(t){e.display.partners=t.response})}function u(){a.get().then(function(t){e.display.cities=t.response})}function m(){var t={};t.type="MA",t.city_id=e.tempaddress.city_id._id,i.get(t).then(function(t){e.display.areas=t.response})}function g(){t.getRole().then(function(t){e.display.roles=t.response})}function h(t){e.temp.getPartnerListCityWise=[],e.display.partners.length&&(angular.forEach(e.display.partners,function(a){a.info.city_id._id==t&&e.temp.getPartnerListCityWise.push(a)}),e.display.partners=_.uniq(e.temp.getPartnerListCityWise,function(e){return e._id}))}function v(a){t.getById(a).then(function(t){e.display.user=t.response,e.display.specialtest=e.display.user.profile.specialtestlist,e.display.specialneed=e.display.user.profile.specialneedlist,e.tempaddress.location=e.display.user.profile.location,e.tempaddress.address1=e.display.user.profile.address1,e.tempaddress.city_id=e.display.user.profile.city_id,e.tempaddress.pincode=e.display.user.profile.pincode,e.setCheckIfAllTestSelected("specialneed"),e.setCheckIfAllTestSelected("specialtest"),h(e.display.user.profile.city_id._id),m()})}function f(){o.get().then(function(t){e.display.specialneeds=t.response})}function y(){t.getservice(!0).then(function(t){e.display.specialtests=t.response})}e.display.partners=[],e.display.specialneeds,e.display.specialtests,e.temp={},e.temp.slotsmatches=[],e.tempaddress={},e.display.user={},e.display.user.availability={},e.display.user.userinfo={},e.display.user.userinfo.partners=[],e.display.user.availability.morningareas=[],e.display.user.availability.eveningareas=[],e.display.selectMorning=!1,e.display.selectEvening=!1,e.display.resetpassword=!1,function(){d(),p(),u(),g(),f(),y(),"new"!=r.Id?v(r.Id):(e.display.users={},e.display.user={},e.display.user.profile={},e.display.user.availability={},e.display.user.userinfo={},e.display.user.userinfo.partners=[],e.display.user.availability.morningareas=[],e.display.user.availability.eveningareas=[],e.display.SpecialNeed=!1,e.display.SpecialTest=!1)}(),e.getpartnerlist=function(t){e.temp.getPartnerListCityWise=[],s.get().then(function(a){e.display.partners=a.response,e.display.partners.length&&(angular.forEach(e.display.partners,function(a){a.info.city_id._id==t._id&&e.temp.getPartnerListCityWise.push(a)}),e.display.partners=angular.copy(e.temp.getPartnerListCityWise),e.display.partners=_.uniq(e.display.partners,function(e){return e._id}))})},e.changeCity=function(){e.temp.partnerlistCityWise=[],e.tempaddress.location="",e.tempaddress.address1="",e.tempaddress.pincode="",e.display.user.userinfo.partners.length&&angular.forEach(e.display.user.userinfo.partners,function(t){angular.forEach(t.areas,function(a){a.area_id.city_id._id==t.info.city_id._id&&e.temp.partnerlistCityWise.push(t)})})},e.opened=function(e,t){console.log("Opened group with offset: "+t)},e.$watch("groups",function(e){angular.forEach(e,function(e,t){e.open&&console.log("Opened group with idx: "+t)})},!0),e.updateAdress=function(t){if(e.display.user.availability.morningareas.length){var a=[];a=e.display.user.availability.morningareas,e.display.user.availability.morningareas=[],angular.forEach(a,function(a){a.city_id.name==t.city_id.name&&e.display.user.availability.morningareas.push(a)})}if(e.display.user.availability.eveningareas.length){var s=[];s=e.display.user.availability.eveningareas,e.display.user.availability.eveningareas=[],angular.forEach(s,function(a){a.city_id.name==t.city_id.name&&e.display.user.availability.eveningareas.push(a)})}e.temp.partnerlistCityWise&&(e.display.user.userinfo.partners=angular.copy(e.temp.partnerlistCityWise)),e.display.user.profile=angular.copy(t),e.changeCity(t.city_id),e.getpartnerlist(t.city_id),m(),e.display.user.userinfo.partners=[],e.display.user.userinfo.partner_id="",e.display.selectall=!1,e.display.selectMorning=!1,e.display.selectEvening=!1,$("#addressModal").modal("hide")},e.searchPartner=function(t){var a=e.display.partners.filter(function(e){return e.info.name&&-1!==e.info.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.searcharea=function(t){var a=[],s=e.display.areas.filter(function(e){return e.name&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return angular.forEach(s,function(t){t.city_id.name==e.display.user.profile.city_id.name&&a.push(t)}),a},e.searchSpecialNeed=function(t){var a=e.display.specialneeds.filter(function(e){return e.name&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.setAllSpecialNeed=function(t){e.display.user.profile.specialneedlist=1==t?angular.copy(e.display.specialneeds):[]},e.searchSpecialTest=function(t){var a=e.display.specialtests.filter(function(e){return e.specialservice&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.setAllSpecialTest=function(t){e.display.user.profile.specialtestlist=1==t?angular.copy(e.display.specialtests):[]},e.setFalse=function(t){"specialneed"==t&&e.display.specialneed.length<e.display.specialneeds.length&&(e.display.setAllSpecialNeed=!1),"specailtest"==t&&e.display.specialtest.length<e.display.specialtests.length&&(e.display.setAllSpecaiTest=!1)},e.addTag=function(t){"specailtest"==t&&(e.display.setAllSpecaiTest=e.display.specialtests.length==e.display.specialtest.length?!0:!1),"specialneed"==t&&(e.display.setAllSpecialNeed=e.display.specialneeds.length==e.display.specialneed.length?!0:!1)},e.setCheckIfAllTestSelected=function(t){"specialtest"==t&&(e.display.user.profile.specialtestlist.length||(e.display.user.profile.specialtestlist=[]),e.display.SpecialTest=e.display.user.profile.specialtestlist.length==e.display.specialtests.length?!0:!1),"specialneed"==t&&(e.display.user.profile.specialneedlist.length||(e.display.user.profile.specialneedlist=[]),e.display.SpecialNeed=e.display.user.profile.specialneedlist.length==e.display.specialneeds.length?!0:!1)},e.save=function(){"serviceagent"==e.display.user.role&&(e.display.user.userinfo.partners=[]),"logistic"==e.display.user.role&&(e.display.user.userinfo.partners=[]),e.display.user._id?c(e.display.user):l(e.display.user)},e.clear=function(){e.display.user={}},e.timing=function(){$("#timingModal").collapse("show")},e.closemodal=function(){$("#timingModal").collapse("hide")},e.saveTiming=function(){$("#timingModal").collapse("hide")},e.config=function(){$("#configModal").modal("show")},e.saveConfig=function(){$("#configModal").modal("hide")},e.address=function(t){e.tempaddress=angular.copy(t),$("#addressModal").modal("show")},e.pushPartner=function(t){if("partnerfrontoffice"==e.display.user.role||"partnerteamlead"==e.display.user.role){var a=JSON.parse(t);e.display.user.userinfo.partners||(e.display.user.userinfo.partners=[]),e.display.user.userinfo.partners[0]=a}else{var a=JSON.parse(t);if(e.display.user.userinfo.partners.length){for(var s=!1,i=0;i<e.display.user.userinfo.partners.length;i++)if(e.display.user.userinfo.partners[i]._id==a._id){s=!0;break}0==s&&e.display.user.userinfo.partners.push(a)}else e.display.user.userinfo.partners.push(a)}e.display.user.userinfo.partner_id={}},e.selectALLPartner=function(t){1==t&&(e.display.partners||(e.display.partners=[]),e.display.partners.length&&(e.display.user.userinfo.partners=[],e.display.user.userinfo.partners=angular.copy(e.display.partners))),0==t&&(e.display.user.userinfo.partners=[])},e.removePartner=function(t,a){e.display.user.userinfo.partners.splice(a,1)},e.CheckRole=function(t){t&&(e.display.user.userinfo.partners=[],e.display.user.userinfo.partner_id={},e.display.user.availability.morningareas=[],e.display.user.availability.eveningareas=[],e.display.user.profile.specialneedlist=[],e.display.user.profile.specialtestlist=[],e.display.user.availability.day=!1,e.display.user.availability.evening=!1,e.display.user.profile.specialneed=!1,e.display.user.profile.specialtest=!1,e.display.selectMorning=!1,e.display.selectEvening=!1,e.display.SpecialNeed=!1,e.display.SpecialTest=!1,e.display.user.availability.sixthirty=!1,e.display.user.availability.sundayleave=!1)},e.pushMorningArea=function(t){if(e.display.user.availability.morningareas.length){for(var a=!1,s=0;s<e.display.user.availability.morningareas.length;s++)if(e.display.user.availability.morningareas[s]._id==t._id){a=!0;break}0==a&&e.display.user.availability.morningareas.push(t)}else e.display.user.availability.morningareas.push(t);e.display.user.availability.morningarea=[]},e.removeMorningArea=function(t,a){e.display.user.availability.morningareas.splice(a,1)},e.selectAllAreaMorning=function(t){1==t?e.showAreasMorning():e.display.user.availability.morningareas=[]},e.pushEveningArea=function(t){if(e.display.user.availability.eveningareas.length){for(var a=!1,s=0;s<e.display.user.availability.eveningareas.length;s++)if(e.display.user.availability.eveningareas[s]._id==t._id){a=!0;break}0==a&&e.display.user.availability.eveningareas.push(t)}else e.display.user.availability.eveningareas.push(t);e.display.user.availability.eveningarea={}},e.removeEveningArea=function(t,a){e.display.user.availability.eveningareas.splice(a,1)},e.selectAllAreaEvening=function(t){1==t?e.showAreasEvening():e.display.user.availability.eveningareas=[]},e.showAreasMorning=function(){e.display.user.availability.morningareas=[];var t=[];angular.forEach(e.display.partners,function(e){for(var a=0;a<e.areas.length;a++)t.push(e.areas[a].area_id)}),t=_.uniqBy(t,"_id"),e.display.user.availability.morningareas=t},e.showAreasEvening=function(){e.display.user.availability.eveningareas=[];var t=[],a=[];angular.forEach(e.display.partners,function(e){for(var a=0;a<e.areas.length;a++)t.push(e.areas[a].area_id)}),a=_.uniqBy(t,"_id"),e.display.user.availability.eveningareas=a},e.pushSpclNeed=function(t){if(e.display.user.profile.specialneedlist.length){for(var a=!1,s=0;s<e.display.user.profile.specialneedlist.length;s++)if(e.display.user.profile.specialneedlist[s]._id==t._id){a=!0;break}0==a&&e.display.user.profile.specialneedlist.push(t)}else e.display.user.profile.specialneedlist.push(t);e.display.specialneed=[]},e.removeSpclNeed=function(t,a){e.display.user.profile.specialneedlist.splice(a,1)},e.pushSpclTest=function(t){if(e.display.user.profile.specialtestlist.length){for(var a=!1,s=0;s<e.display.user.profile.specialtestlist.length;s++)if(e.display.user.profile.specialtestlist[s]._id==t._id){a=!0;break}0==a&&e.display.user.profile.specialtestlist.push(t)}else e.display.user.profile.specialtestlist.push(t);e.display.specialtest=[]},e.removeSpclTest=function(t,a){e.display.user.profile.specialtestlist.splice(a,1)},e.confirmResetPassword=function(){1==e.display.resetpassword&&(e.display.changepassword=!1,$("#confirmResetPasswordModal").modal("show"))},e.ResetPassword=function(){t.resetPassword(e.display.user._id).then(function(){$("#callCreated").modal("show")}),$("#confirmResetPasswordModal").modal("hide"),e.display.resetpassword=!1},e.cancelResetPassword=function(){$("#confirmResetPasswordModal").modal("hide"),e.display.resetpassword=!1},e.callcreated=function(){$("#callCreated").modal("hide")}};e.$inject=["$scope","userinfoFactory","cityFactory","partnerFactory","areaFactory","$location","$stateParams","specialneedFactory","testFactory","user"],angular.module("webApp").controller("userinfoObjectController",e)}(),angular.module("webApp").factory("userinfoFactory",["apiCall",function(e){function t(t){return e.httpPOST("users",t)}function a(t,a){var s="users?";return t&&t.currentPage&&t.itemPerPage&&(s=s+"&page="+t.currentPage+"&limit="+t.itemPerPage),a&&(a.partner_id&&(s=s+"&partner_id="+a.partner_id),a.area_id&&(s=s+"&area_id="+a.area_id),a.areas&&(s=s+"&areas="+a.areas),a.role&&(s=s+"&role="+a.role),a.roles&&(s=s+"&roles="+a.roles),a.fromdate&&(s=s+"&fromdate="+a.fromdate),a.fromtime&&(s=s+"&fromtime="+a.fromtime),a.searchText&&(s=s+"&usersearch="+a.searchText),a.city_id&&(s=s+"&city_id="+a.city_id),a.specialneeds&&(s=s+"&specialneeds="+a.specialneeds),a.specialtests&&(s=s+"&specialtests="+a.specialtests),void 0!=a.active&&(s=s+"&active="+a.active),a.onloadlist&&(s=s+"&onloadlist="+a.onloadlist),a.onLogisticSelection&&(s=s+"&onLogisticSelection="+a.onLogisticSelection),a.onPhleboSelection&&(s=s+"&onPhleboSelection="+a.onPhleboSelection)),e.httpGET(s)}function s(t,a){var s="getuserinfolist?";return t&&t.currentPage&&t.itemPerPage&&(s=s+"&page="+t.currentPage+"&limit="+t.itemPerPage),a&&(a.partner_id&&(s=s+"&partner_id="+a.partner_id),a.area_id&&(s=s+"&area_id="+a.area_id),a.areas&&(s=s+"&areas="+a.areas),a.role&&(s=s+"&role="+a.role),a.roles&&(s=s+"&roles="+a.roles),a.fromdate&&(s=s+"&fromdate="+a.fromdate),a.fromtime&&(s=s+"&fromtime="+a.fromtime),a.searchText&&(s=s+"&usersearch="+a.searchText),a.city_id&&(s=s+"&city_id="+a.city_id),a.specialneeds&&(s=s+"&specialneeds="+a.specialneeds),a.specialtests&&(s=s+"&specialtests="+a.specialtests),void 0!=a.active&&(s=s+"&active="+a.active),a.onloadlist&&(s=s+"&onloadlist="+a.onloadlist),a.onLogisticSelection&&(s=s+"&onLogisticSelection="+a.onLogisticSelection),a.onPhleboSelection&&(s=s+"&onPhleboSelection="+a.onPhleboSelection)),e.httpGET(s)}function i(t){return e.httpPUT("users/"+t._id,t)}function n(t){return e.httpPUT("changePassword/"+t.user_id,t)}function r(){return e.httpGET("roles?columns=true")}function o(t){return e.httpGET("users/"+t)}function d(t){return e.httpGET("services?specialservice="+t)}function l(t){var a="availableusers?";return t&&(t.pincode&&(a=a+"&pincode="+t.pincode),t.area_id&&(a=a+"&area_id="+t.area_id),t.fromdate&&(t.fromdate=new Date(t.fromdate).toISOString(),a=a+"&fromdate="+t.fromdate),t.role&&(a=a+"&role="+t.role)),e.httpGET(a)}function c(t,a,s,i){var n={area_id:t,date:a,time:s,sublocation_id:i};return e.httpPOST("userbyarea",n)}function p(t,a,s){var i={area_id:t,date:a,time:s};return e.httpPOST("logisticuserbyarea",i)}function u(t){return e.httpGET("resetpassword/"+t)}return{add:t,get:a,getu:s,update:i,getRole:r,getById:o,getservice:d,getavailablestaff:l,getAreaPhleboList:c,resetPassword:u,changePassword:n,getAreaLogisticList:p}}]),function(){"use strict";var e=function(e,t,a,s,i){e.searchObj={},e.temp={},e.roleList=[],e.roleLists=[],e.display={},e.display.setAllRoles,e.display.setAllUsers,e.display.setAllAreas,e.display.roles=[],e.display.users=[],e.display.areas=[],e.phlebos=[],e.phlebo,e.getCities=function(){i.get().then(function(t){e.cities=t.response,e.display.cities=angular.copy(e.cities)})},e.getCities(),e.getRoles=function(){a.getRoles().then(function(t){for(var a=0;a<t.response.length;a++)if("admin"==t.response[a].name){t.response[a].label="Admin";break}e.roleList=angular.copy(t.response),e.roleLists=angular.copy(e.roleList)})},e.changeCity=function(){e.display.cities&&(e.display.setAllRoles=!1,e.display.roles=[],e.display.setAllUsers=!1,e.display.users=[],e.display.setAllAreas=!1,e.display.areas=[],e.tempNote=!1,e.notification="",e.searchObj.city_id=e.display.cities._id,e.getRoles(),e.getAreas(),e.filterUser())},e.filterUser=function(){s.get("",e.searchObj).then(function(t){e.users=t.response,e.display.getUser=angular.copy(e.users),e.phlebos=e.users,e.display.users=angular.copy(e.display.getUser),e.areaWisePhlebo()})},e.setAllRoles=function(t){e.display.users=[],e.display.setAllUsers=!1,e.tempNote=!1,e.notification="",e.display.areas=[],e.display.setAllAreas=!1;var a=[];if(1==t){e.display.roles=angular.copy(e.roleLists);for(var s=0;s<e.display.roles.length;s++)a.push(e.display.roles[s].name);e.searchObj.roles=a.join(","),e.filterUser(),e.checkPhlebo()}else e.display.roles=[]},e.searchRoles=function(t){var a=e.roleLists.filter(function(e){return e.label&&-1!==e.label.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.changeRole=function(){if(e.display.setAllUsers=!1,e.display.users=[],e.display.setAllAreas=!1,e.display.areas=[],e.tempNote=!1,e.notification="",e.display.roles.length){e.checkPhlebo();for(var t=[],a=0;a<e.display.roles.length;a++)t.push(e.display.roles[a].name);e.searchObj.roles=t.join(",");var s={};_.each(e.display.roles,function(e){s[e._id]=!0}),e.roleList=_.filter(e.roleLists,function(e){return s[e._id]},e.display.roles),e.filterUser()}else e.display.roles=[],e.roleList=angular.copy(e.roleLists)},e.checkPhlebo=function(){for(var t=0;t<e.display.roles.length;t++){if("Phlebotomist"==e.display.roles[t].label){e.phlebo=!0;break}e.phlebo=!1}},e.setAllUsers=function(t){e.tempNote=!1,e.notification="",1==t?(e.areaWisePhlebo(),e.display.users=angular.copy(e.display.getUser)):e.display.users=[]},e.searchUser=function(t){var a=e.display.getUser.filter(function(e){return e._id&&-1!==e.profile.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a.forEach(function(e){e.name=e.profile.name}),a},e.changeUser=function(){if(e.display.users.length){var t={};_.each(e.display.users,function(e){t[e._id]=!0}),e.users=_.filter(e.display.getUser,function(e){return t[e._id]},e.display.users)}else e.display.users=[],e.users=angular.copy(e.display.getUser)},e.getAreas=function(){var a={};a.type="MA",a.city_id=e.display.cities._id;var s=t.get(a);s.then(function(t){e.areaList=t.response,e.areas=angular.copy(e.areaList)})},e.searchArea=function(t){var a=e.areas.filter(function(e){return e._id&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a.forEach(function(e){e.name=e.name}),a},e.changeArea=function(){e.display.users=[],e.display.setAllUsers=!1,e.tempNote=!1,e.notification="",e.filterUser()},e.areaWisePhlebo=function(){if(e.display.areas.length){var t=[],a=[];e.phlebos.forEach(function(s){if("serviceagent"==s.role)for(var i=0;i<s.availability.morningareas.length;i++)a=_.find(e.display.areas,function(e){return e._id==s.availability.morningareas[i]._id&&t.push(s),e._id==s.availability.morningareas[i]._id});else t.push(s)});var s=_.uniq(t);e.display.getUser=s,e.display.users=e.display.getUser}},e.selectNotiy=function(t){e.tempNote=!0,e.notification=t},e.send=function(){$("#msgsent").modal("show")},e.msgSent=function(){$("#msgsent").modal("hide")},e.reset=function(){e.display.cities._id="",e.tempNote=!1,e.searchObj={},e.display.roles=[],e.display.areas=[],e.display.users=[]},e.pushRole=function(t){if(e.display.roles.length){for(var a=!1,s=0;s<e.display.roles.length;s++)if(e.display.roles[s]._id==t._id){a=!0;break}0==a&&e.display.roles.push(t)}else e.display.roles=[],e.display.roles.push(t);e.changeRole(),e.temp.role={}},e.removeRole=function(t,a){if(e.display.roles.splice(a,1),e.display.roles.length){e.checkPhlebo();for(var s=[],i=0;i<e.display.roles.length;i++)s.push(e.display.roles[i].name);e.searchObj.roles=s.join(",");var n={};_.each(e.display.roles,function(e){n[e._id]=!0}),e.roleList=_.filter(e.roleLists,function(e){return n[e._id]},e.display.roles),e.filterUser()}else e.display.roles=[],e.roleList=angular.copy(e.roleLists)},e.pushArea=function(t){if(e.display.areas.length){for(var a=!1,s=0;s<e.display.areas.length;s++)if(e.display.areas[s]._id==t._id){a=!0;break}0==a&&e.display.areas.push(t)}else e.display.areas=[],e.display.areas.push(t);e.changeArea(),e.temp.area={}},e.removeArea=function(t,a){e.area={},e.display.areas.splice(a,1),e.changeArea()},e.setAllAreas=function(t){e.tempNote=!1,e.notification="",1==t?(e.display.areas=angular.copy(e.areas),e.filterUser(),e.checkPhlebo()):(e.filterUser(),e.display.areas=[])}};e.$inject=["$scope","areaFactory","rolesFactory","userinfoFactory","cityFactory","$location"],angular.module("webApp").controller("userNotificationController",e)
}(),function(){"use strict";var e=function(e,t,a,s,i,n,r){function o(){if(e.display.roles.length){var t=[];e.allUser.forEach(function(a){e.display.roles.forEach(function(e){a.role==e.name&&t.push(a)})}),e.finalData=angular.copy(t),e.data=angular.copy(t)}if(e.display.area.length){var a=[],s=[];t.forEach(function(t){if("serviceagent"==t.role||"logistic"==t.role){if(t.availability.morningareas.length)for(var i=0;i<t.availability.morningareas.length;i++)s=_.find(e.display.area,function(e){if(e._id==t.availability.morningareas[i]._id){var s=!1;a.forEach(function(e){e.id==t.id&&(s=!0)}),s||a.push(t)}return e._id==t.availability.morningareas[i]._id});if(t.availability.eveningareas.length)for(var i=0;i<t.availability.eveningareas.length;i++)s=_.find(e.display.area,function(e){if(e._id==t.availability.eveningareas[i]._id){var s=!1;a.forEach(function(e){e.id==t.id&&(s=!0)}),s||a.push(t)}return e._id==t.availability.eveningareas[i]._id})}else a.push(t)}),e.finalData=angular.copy(a),e.data=angular.copy(a)}}e.searchObj={},e.display={},e.temp={},e.searchObject={},e.display.area=[],e.display.phlebo=[],e.data=[],e.allUser=[],e.display.roles=[],e.finalData=[],e.searchObj.area=[],e.searchObj.phlebo=[];var d=new Date,l=moment(moment(d).startOf("month")).add(15,"d");e.searchObj.from_date=l;var c=moment(moment(moment(d).startOf("month")).add(1,"M")).add(14,"d");e.searchObj.to_date=c,e.searchObject.from_date=new Date(e.searchObj.from_date),e.searchObject.to_date=new Date(e.searchObj.to_date),e.datePickerPopup={},e.getRoles=function(){r.getRoles().then(function(t){for(var a=0;a<t.response.length;a++)if("admin"==t.response[a].name){t.response[a].label="Admin";break}e.roleList=angular.copy(t.response),e.roleLists=angular.copy(e.roleList)})},e.changeCity=function(){if(e.searchObj.city){e.searchObj.area=[],e.display.area=[];var t={};e.searchObj.phlebo=[],e.display.phlebo=[],e.searchObject.city_id=e.searchObj.city,t.city_id=e.searchObj.city;var a=s.get(t);a.then(function(t){e.areaList=t.response,e.getResult(),e.getRoles()})}},e.changeRole=function(){if(e.searchObject.user_ids="",e.display.phlebo=[],e.checkPointArea=!1,e.display.roles.length){e.checkPhlebo();for(var t=[],a=0;a<e.display.roles.length;a++)"serviceagent"==e.display.roles[a].name||"logistic"==e.display.roles[a].name?e.checkPointArea=!0:(e.display.area=[],e.searchObject.area_ids=""),t.push(e.display.roles[a].name);e.searchObject.roles=t.join(",");var s={};_.each(e.display.roles,function(e){s[e._id]=!0}),e.roleList=_.filter(e.roleLists,function(e){return s[e._id]},e.display.roles),o()}else e.display.roles=[],e.roleList=angular.copy(e.roleLists)},e.pushRole=function(t){if(e.display.roles.length){for(var a=!1,s=0;s<e.display.roles.length;s++)if(e.display.roles[s]._id==t._id){a=!0;break}0==a&&e.display.roles.push(t)}else e.display.roles=[],e.display.roles.push(t);e.changeRole(),e.temp.role={}},e.checkPhlebo=function(){for(var t=0;t<e.display.roles.length;t++){if("serviceagent"==e.display.roles[t].name||"logistic"==e.display.roles[t].name){e.phlebo=!0,e.checkPointArea=!0;break}e.phlebo=!1}e.phlebo||(e.searchObject.area_ids="",e.display.area=[])},e.removeRole=function(t,a){if(("serviceagent"==t.name||"logistic"==t.name)&&(e.checkPointArea=!1,e.display.area=[],e.searchObject.area_ids="",e.searchObject.user_ids="",e.display.phlebo=[]),e.searchObject.user_ids="",e.display.phlebo=[],e.display.roles.splice(a,1),e.display.roles.length){e.checkPhlebo();for(var s=[],i=0;i<e.display.roles.length;i++)s.push(e.display.roles[i].name);e.searchObject.roles=s.join(",");var n={};_.each(e.display.roles,function(e){n[e._id]=!0}),e.roleList=_.filter(e.roleLists,function(e){return n[e._id]},e.display.roles),o()}else e.searchObject.roles="",e.display.roles=[],e.roleList=angular.copy(e.roleLists),e.finalData=angular.copy(e.allUser),e.data=angular.copy(e.allUser)},e.getCity=function(){e.userinfo=JSON.parse(sessionStorage.getItem("globaldata")),"providerteamlead"==e.userinfo.userdata.role?(e.searchObj.city=e.userinfo.userdata.profile.city_id._id,e.searchObj.cityname=e.userinfo.userdata.profile.city_id.name,e.changeCity()):n.get().then(function(t){e.cities=t.response})},e.getCity(),e.openDatePicker=function(t,a){e.searchObj.city?(t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0):$("#selectCity").modal("show")},e.getOrderList=function(){if(e.searchObject.from_date&&e.searchObject.to_date&&e.searchObject.city_id){if(e.diff=moment(e.searchObject.to_date).diff(moment(e.searchObject.from_date),"day"),e.display.area.length){for(var t=[],s=0;s<e.display.area.length;s++)t.push(e.display.area[s]._id);e.searchObject.area_ids=t.join(",")}if(e.display.phlebo.length){for(var i=[],s=0;s<e.display.phlebo.length;s++)i.push(e.display.phlebo[s].id);e.searchObject.user_ids=i.join(",")}a.getWORequests(e.searchObject).then(function(t){e.data1=t.response.usersRequest;var a=e.data1;a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),e.data=a,e.finalData=angular.copy(e.data)})}},e.changeArea=function(){if(e.searchObj.phlebo=[],e.searchObject.user_ids="",e.display.phlebo=[],e.display.area.length){for(var t=[],a=0;a<e.display.area.length;a++)t.push(e.display.area[a]._id);e.searchObject.area_ids=t.join(","),o()}else e.display.area=[],e.changeCity()},e.changePhlebo=function(){if(e.display.phlebo.length){for(var t=[],s=0;s<e.display.phlebo.length;s++)t.push(e.display.phlebo[s].id);e.searchObject.user_ids=t.join(","),a.getWORequests(e.searchObject).then(function(t){e.data1=t.response.usersRequest;var a=e.data1;a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),e.data=a})}else e.searchObject.user_ids="",e.display.phlebo=[],e.display.area.length?e.changeArea():e.changeCity()},e.pushArea=function(t){if(e.display.area.length){for(var a=!1,s=0;s<e.display.area.length;s++)if(e.display.area[s]._id==t._id){a=!0;break}0==a&&e.display.area.push(t)}else e.display.area=[],e.display.area.push(t);e.changeArea(),e.searchObj.area={}},e.removeArea=function(t,a){if(e.searchObj.phlebo=[],e.searchObject.user_ids="",e.display.phlebo=[],e.display.area.splice(a,1),e.display.area.length){for(var s=[],i=0;i<e.display.area.length;i++)s.push(e.display.area[i]._id);e.searchObject.area_ids=s.join(","),o()}else e.searchObject.area_ids="",e.searchObj.area={},e.display.area=[],e.finalData=angular.copy(e.allUser),e.data=angular.copy(e.allUser)},e.pushPhlebo=function(t){if(e.display.phlebo.length){for(var a=!1,s=0;s<e.display.phlebo.length;s++)if(e.display.phlebo[s].id==t.id){a=!0;break}0==a&&e.display.phlebo.push(t)}else e.display.phlebo=[],e.display.phlebo.push(t);e.changePhlebo(),e.searchObj.phlebo={}},e.removePhlebo=function(t,s){if(e.display.phlebo.splice(s,1),e.display.phlebo.length){for(var i=[],n=0;n<e.display.phlebo.length;n++)i.push(e.display.phlebo[n].id);e.searchObject.user_ids=i.join(","),a.getWORequests(e.searchObject).then(function(t){e.data1=t.response.usersRequest;var a=e.data1;a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),e.data=a})}else e.display.phlebo=[],e.searchObject.user_ids="",e.display.area.length?e.changeArea():e.changeCity()},e.getResult=function(){a.getWORequests(e.searchObject).then(function(t){e.finalData=t.response.usersRequest;var a=e.finalData;a.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0}),e.data=angular.copy(a),e.allUser=angular.copy(e.data)})},e.closeModal=function(){$("#selectCity").modal("hide")}};e.$inject=["$scope","$q","woRequestFactory","areaFactory","$location","cityFactory","rolesFactory"],angular.module("webApp").controller("weekoffController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d){e.searchObjWo={},e.searchObjUser={},e.searchObj={},e.display={},e.display.users=[],e.temp={},e.temp.otherReason="";new Date;if(e.searchObjWo.fromdate=new Date(moment().startOf("month").add(15,"days")),e.searchObjWo.todate=new Date(moment().startOf("month").add(1,"months").add(14,"days").endOf("day")),e.user=d,e.display.areadiv=[],e.display.userdiv=[],e.initpaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.initpaging(),sessionStorage.getItem("WeakoffCancelReasons")){var l=JSON.parse(sessionStorage.getItem("WeakoffCancelReasons"));e.display.rejectReasons=l.childs}e.datePickerPopup={},e.openDatePicker=function(t,a){e.minDate=Date.now(),t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.edit=function(t){sessionStorage.setItem("weekOffDetail",JSON.stringify(e.searchObjWo)),sessionStorage.setItem("weekOffUserDetail",JSON.stringify(e.searchObjUser)),sessionStorage.setItem("pagingwo",JSON.stringify(e.paging)),r.path("/main/worequest/"+t)},e.get=function(){e.getResult()},e.getStatusResult=function(a){e.initpaging(),e.searchObjWo.status=a,e.searchObjWo.status?t.getUser(e.searchObjWo,e.paging).then(function(t){e.display.users=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount}):e.getResult()},e.getTypeResult=function(a){e.initpaging(),e.searchObjWo.leavetype=a,e.searchObjWo.leavetype?t.getUser(e.searchObjWo,e.paging).then(function(t){e.display.users=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount}):e.getResult()},e.changeStatus=function(a){e.tempObj.reason=[],"accept"==a&&(e.display.weekOffRequest.status="accepted"),"reject"==a&&(e.tempObj.logobj="Others"==e.display.rejectReason.displayname?{reason_id:e.display.rejectReason._id,reasontext:e.display.rejectReason.displayname,otherreasontext:e.temp.otherReason}:{reason_id:e.display.rejectReason._id,reasontext:e.display.rejectReason.displayname},e.tempObj.status="rejected"),t.add(e.tempObj).then(function(){e.initpaging(),e.getResult(),$("#AddAcceptedStatus").modal("hide"),$("#RejectedStatus").modal("hide")})},e.selectReason=function(t){e.display.rejectReason=t,e.exist=!1,"Others"==t.displayname&&(e.exist=!0)},e.callPopUp=function(t,a){e.exist=!1,e.temp.rejectReason="",e.temp.otherReason="",e.tempObj={},e.tempObj=t,delete e.display.rejectReason,"accept"==a&&$("#AddAcceptedStatus").modal("show"),"reject"==a&&(e.display.rejectReason="",$("#RejectedStatus").modal("show"))},e.getRole=function(t){e.display.checkRmArea||(e.display.userdiv=[],e.display.areadiv=[],e.searchObjWo.user_id="",e.searchObjUser.user_id="",e.searchObjWo.area_id="",e.searchObjUser.areas="",e.display.checkRmArea=""),"rm"==t&&(e.display.userdiv=[],e.display.areadiv=[],e.searchObjWo.user_id="",e.searchObjUser.user_id="",e.searchObjWo.area_id="",e.searchObjUser.areas=""),e.searchObjWo.role=e.searchObj.role,e.searchObjUser.role=e.searchObj.role,i.get(void 0,e.searchObjUser).then(function(t){if(e.display.dropDownUsers=t.response,e.display.userdiv.length){var a=[];e.display.dropDownUsers.forEach(function(t){e.display.userdiv.forEach(function(e){t.profile.name==e.profile.name&&a.push(t)})}),e.display.userdiv=[],e.display.userdiv=a;for(var s=[],i=0;i<e.display.userdiv.length;i++)s.push(e.display.userdiv[i]._id);e.searchObjUser.user_id=s.join(","),e.searchObjWo.user_id=s.join(",")}else{var n=[];e.searchObjUser.user_id&&(n=e.searchObjUser.user_id.split(",")),e.display.dropDownUsers||(e.display.dropDownUsers=[]),e.display.dropDownUsers.length&&e.display.dropDownUsers.forEach(function(t){n.forEach(function(a){a==t._id&&e.display.userdiv.push(t)})})}e.getResult()})},e.getAreas=function(t){e.display.checkpointArea||(e.display.userdiv=[],e.display.areadiv=[],e.searchObjWo.user_id="",e.searchObjUser.user_id="",e.searchObjWo.area_id="",e.searchObjUser.areas="",e.display.checkpointArea=""),"rm"==t&&(e.display.userdiv=[],e.display.areadiv=[],e.searchObjWo.user_id="",e.searchObjUser.user_id="",e.searchObjWo.area_id="",e.searchObjUser.areas=""),e.searchObjWo.city_id=e.searchObj.city_id,e.searchObjUser.city_id=e.searchObj.city_id;var a={};a.type="MA",a.city_id=e.searchObj.city_id,s.get(a).then(function(t){if(e.display.areas=t.response,"serviceagent"==e.searchObj.role&&!e.display.areadiv.length){var a=[];e.searchObjWo.area_id&&(a=e.searchObjWo.area_id.split(",")),e.display.areas.length&&e.display.areas.forEach(function(t){a.forEach(function(a){a==t._id&&e.display.areadiv.push(t)})})}e.getRole()})},e.getResult=function(){e.searchObjWo.area_id||(e.searchObjWo.area_id=[]),e.searchObjWo.area_id.length||delete e.searchObjWo.area_id,e.searchObjUser.areas||(e.searchObjUser.areas=[]),e.searchObjUser.areas.length||delete e.searchObjWo.areas,e.searchObjWo.user_id||(e.searchObjWo.user_id=[]),e.searchObjWo.user_id.length||delete e.searchObjWo.user_id,t.getUser(e.searchObjWo,e.paging).then(function(t){e.display.users=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.initweekoff=function(){sessionStorage.getItem("weekOffDetail")&&(e.searchObjWo=JSON.parse(sessionStorage.getItem("weekOffDetail")),sessionStorage.removeItem("weekOffDetail"),e.searchObj.city_id=e.searchObjWo.city_id,e.searchObjWo.leavetype=e.searchObjWo.leavetype,e.searchObjWo.status=e.searchObjWo.status,e.searchObjWo.fromdate=new Date(e.searchObjWo.fromdate),e.searchObjWo.todate=new Date(e.searchObjWo.todate),e.searchObj.role=e.searchObjWo.role,e.display.checkpointArea="value"),sessionStorage.getItem("weekOffUserDetail")&&(e.searchObjUser=JSON.parse(sessionStorage.getItem("weekOffUserDetail")),sessionStorage.removeItem("weekOffUserDetail"),e.searchObj.role=e.searchObjUser.role,e.searchObj.city_id=e.searchObjUser.city_id,e.display.checkpointArea="value"),sessionStorage.getItem("pagingwo")&&(e.paging=JSON.parse(sessionStorage.getItem("pagingwo")),sessionStorage.removeItem("pagingwo")),a.getRoles().then(function(t){e.display.roles=t.response,n.get().then(function(t){e.display.cities=t.response,e.getAreas()})})},e.pushArea=function(t){if(e.display.areadiv.length){for(var a=!1,s=0;s<e.display.areadiv.length;s++)if(e.display.areadiv[s]._id==t._id){a=!0;break}0==a&&e.display.areadiv.push(t)}else e.display.areadiv.push(t);for(var i=[],s=0;s<e.display.areadiv.length;s++)i.push(e.display.areadiv[s]._id);e.searchObjWo.area_id=i.join(","),e.searchObjUser.areas=i.join(","),e.display.checkRmArea="value",e.getRole(),e.temp.area={}},e.removeArea=function(t,a){if(e.display.areadiv.splice(a,1),e.display.areadiv.length){for(var s=[],i=0;i<e.display.areadiv.length;i++)s.push(e.display.areadiv[i]._id);e.searchObjWo.area_id=s.join(","),e.searchObjUser.areas=s.join(","),e.getRole()}else e.searchObjWo.area_id=[],e.getRole()},e.pushUser=function(t){if(e.display.userdiv.length){for(var a=!1,s=0;s<e.display.userdiv.length;s++)if(e.display.userdiv[s]._id==t._id){a=!0;break}0==a&&e.display.userdiv.push(t)}else e.display.userdiv.push(t);for(var i=[],s=0;s<e.display.userdiv.length;s++)i.push(e.display.userdiv[s]._id);e.searchObjUser.user_id=i.join(","),e.searchObjWo.user_id=i.join(","),e.initpaging(),e.getResult(),e.temp.user={}},e.removeUser=function(t,a){if(e.display.userdiv.splice(a,1),e.display.userdiv.length){for(var s=[],i=0;i<e.display.userdiv.length;i++)s.push(e.display.userdiv[i]._id);e.searchObjWo.user_id=s.join(","),delete e.searchObj.user_id,e.initpaging(),e.getResult()}else e.searchObjWo.user_id=[],e.initpaging(),e.getResult()},e.checkClass=function(e){return"accepted"==e.status&&"admin"==e.createdbyrole?"blue":"accepted"==e.status&&"admin"!=e.createdbyrole?"green":"rejected"==e.status?"red":"open"==e.status&&"weekoff"==e.leavetype?"pink":"open"==e.status&&"leave"==e.leavetype?"yellow":"reopen"==e.status&&"leave"==e.leavetype&&"admin"==e.createdbyrole?"yellow":"reopen"==e.status&&"weekoff"==e.leavetype&&"admin"==e.createdbyrole?"pink":"reopen"==e.status&&"leave"==e.leavetype&&"admin"!=e.createdbyrole?"yellow":"reopen"==e.status&&"weekoff"==e.leavetype&&"admin"!=e.createdbyrole?"pink":void 0},e.initweekoff()};e.$inject=["$scope","woRequestFactory","rolesFactory","areaFactory","userinfoFactory","cityFactory","$location","$filter","user"],angular.module("webApp").controller("woRequestController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l){function c(t){r.getById(t).then(function(t){e.display.tempweekOffRequest=angular.copy(t.response),e.display.weekOffRequest=t.response,e.temp.users=[e.display.weekOffRequest.user_id],e.display.users=[e.display.weekOffRequest.user_id],e.phlebos=[e.display.weekOffRequest.user_id],e.temp.user=e.display.weekOffRequest.user_id,e.display.weekOffRequest.user_id=[e.display.weekOffRequest.user_id._id],e.display.weekOffRequest.leavetype||(e.display.weekOffRequest.leavetype="weekoff",document.getElementById("weekoff").checked=!0),"weekoff"==e.display.weekOffRequest.leavetype&&(document.getElementById("weekoff").checked=!0),"leave"==e.display.weekOffRequest.leavetype&&(document.getElementById("leave").checked=!0),e.display.weekOffRequest.requesttime&&(e.display.weekOffRequest.requesttime=e.display.weekOffRequest.requesttime.toString()),e.display.weekOffRequest.requesttotime&&(e.display.weekOffRequest.requesttotime=e.display.weekOffRequest.requesttotime.toString())})}if(e.searchObj={},e.user=t,e.successFlag=!1,e.display.userlist=[],e.display.weekOffRequest={},e.display.weekOffRequest.user_id=[],e.temp={},e.temp.users=[],e.datePickerPopup={},e.display.weekOffRequest.leavetype="weekoff",document.getElementById("weekoff").checked=!0,e.display.weekOffRequest.requesttype="fullday",document.getElementById("fullday").checked=!0,e.roleList=[],e.roleLists=[],e.phlebos=[],e.phlebo,e.display.roles=[],e.display.users=[],e.display.areas=[],e.display.timeSlots=JSON.parse(o),e.display.editReason={},sessionStorage.getItem("WeakoffCancelReasons")){var p=JSON.parse(sessionStorage.getItem("WeakoffCancelReasons"));e.display.rejectReasons=p.childs}e.selectReason=function(t){e.display.rejectReason=t,e.exist=!1,"Others"==t.displayname&&(e.exist=!0)},e.selectReasonEdit=function(t){e.exist=!1,e.display.editReason=t,t.displayname&&"Others"==t.displayname&&(e.exist=!0)},e.changeStatus=function(t){$("#RejectedStatus").modal("hide"),"accept"==t&&(e.display.weekOffRequest.status="accepted"),"reject"==t&&(e.display.weekOffRequest=angular.copy(e.display.tempweekOffRequest),e.display.weekOffRequest.logobj="Others"==e.display.rejectReason.displayname?{reason_id:e.display.rejectReason._id,reasontext:e.display.rejectReason.displayname,otherreasontext:e.temp.otherReason}:{reason_id:e.display.rejectReason._id,reasontext:e.display.rejectReason.displayname},e.display.weekOffRequest.status="rejected"),r.add(e.display.weekOffRequest).then(function(t){e.successFlag=!0,e.display.weekOffRequest=t.response,e.display.tempweekOffRequest=angular.copy(t.response),e.display.weekOffRequest.requesttime=e.display.weekOffRequest.requesttime.toString(),e.display.weekOffRequest.requesttotime=e.display.weekOffRequest.requesttotime.toString()})},"new"!=a.Id&&(e.display.weekOffRequest._id=a.Id),e.getCities=function(){e.display.weekOffRequest._id||l.get().then(function(t){e.cities=t.response,e.display.cities=angular.copy(e.cities)})},e.getRoles=function(){i.getRoles().then(function(t){for(var a=0;a<t.response.length;a++)if("admin"==t.response[a].name){t.response[a].label="Admin";break}e.roleList=angular.copy(t.response),e.roleLists=angular.copy(e.roleList)})},e.changeCity=function(){e.display.cities&&(e.display.setAllRoles=!1,e.display.roles=[],e.display.setAllUsers=!1,e.display.users=[],e.display.setAllAreas=!1,e.display.areas=[],e.tempNote=!1,e.notification="",e.searchObj.city_id=e.display.cities._id,e.getRoles(),e.getAreas())},e.changeRole=function(){if(e.display.setAllUsers=!1,e.display.users=[],e.display.setAllAreas=!1,e.display.roles.length){e.checkPhlebo();for(var t=[],a=0;a<e.display.roles.length;a++)t.push(e.display.roles[a].name);e.searchObj.roles=t.join(",");var s={};_.each(e.display.roles,function(e){s[e._id]=!0}),e.roleList=_.filter(e.roleLists,function(e){return s[e._id]},e.display.roles),e.init()}else e.display.roles=[],e.roleList=angular.copy(e.roleLists)},e.pushRole=function(t){if(e.display.roles.length){for(var a=!1,s=0;s<e.display.roles.length;s++)if(e.display.roles[s]._id==t._id){a=!0;break}0==a&&e.display.roles.push(t)}else e.display.roles=[],e.display.roles.push(t);e.changeRole(),e.temp.role={}},e.checkPhlebo=function(){for(var t=0;t<e.display.roles.length;t++){if("serviceagent"==e.display.roles[t].name||"logistic"==e.display.roles[t].name){e.phlebo=!0;break}e.phlebo=!1}e.phlebo||(e.display.areas=[])},e.removeRole=function(t,a){if(e.display.roles.splice(a,1),e.display.roles.length){e.checkPhlebo();for(var s=[],i=0;i<e.display.roles.length;i++)s.push(e.display.roles[i].name);e.searchObj.roles=s.join(",");var n={};_.each(e.display.roles,function(e){n[e._id]=!0}),e.roleList=_.filter(e.roleLists,function(e){return n[e._id]},e.display.roles),e.init()}else e.display.roles=[],e.temp.users=[],e.searchObj.roles,e.display.areas=[],e.roleList=angular.copy(e.roleLists)},e.changeArea=function(){e.display.users=[],e.filterUser()},e.pushArea=function(t){if(e.display.areas.length){for(var a=!1,s=0;s<e.display.areas.length;s++)if(e.display.areas[s]._id==t._id){a=!0;break}0==a&&e.display.areas.push(t)}else e.display.areas=[],e.display.areas.push(t);e.changeArea(),e.temp.area={}},e.removeArea=function(t,a){e.area={},e.display.areas.splice(a,1),e.changeArea()},e.getAreas=function(){var t={};t.type="MA",t.city_id=e.display.cities._id;var a=n.get(t);a.then(function(t){e.areaList=t.response,e.areas=angular.copy(e.areaList)})},e.areaWisePhlebo=function(){if(e.display.areas.length){var t=[],a=[];e.phlebos.forEach(function(s){if("serviceagent"==s.role||"logistic"==s.role){if(s.availability.morningareas.length)for(var i=0;i<s.availability.morningareas.length;i++)a=_.find(e.display.areas,function(e){return e._id==s.availability.morningareas[i]._id&&t.push(s),e._id==s.availability.morningareas[i]._id});if(s.availability.eveningareas.length)for(var i=0;i<s.availability.eveningareas.length;i++)a=_.find(e.display.areas,function(e){return e._id==s.availability.eveningareas[i]._id&&t.push(s),e._id==s.availability.eveningareas[i]._id})}else t.push(s)});var s=_.uniq(t);if(e.display.getUser=s,e.display.users=e.display.getUser,e.temp.users.length){var i=[];e.display.users.forEach(function(t){e.temp.users.forEach(function(e){t.profile.name==e.profile.name&&i.push(t)})}),e.temp.users=[],e.temp.users=i}}},e.weekoffChange=function(){e.display.weekOffRequest.leavereason=""},e.filterUser=function(){if(e.display.getUser=angular.copy(e.users),e.phlebos=e.users,e.display.users=angular.copy(e.display.getUser),"admin"!=e.user.userdata.role&&e.display.users.forEach(function(t){t._id==e.user.userdata._id&&(e.display.users=[t],e.temp.users=[t],e.temp.user=t,e.display.weekOffRequest.user_id=[t._id])}),e.temp.users.length){var t=[];e.display.users.forEach(function(a){e.temp.users.forEach(function(e){a.profile.name==e.profile.name&&t.push(a)})}),e.temp.users=[],e.temp.users=t}e.areaWisePhlebo();var a=[];e.temp.users.forEach(function(e){a.push(e._id)}),e.display.weekOffRequest.user_id=a},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.requestTypeChange=function(t){delete e.display.weekOffRequest.requesttime,delete e.display.weekOffRequest.requesttotime,e.display.weekOffRequest.requesttype=e.display.weekOffRequest.requesttype?t:"fullday"},e.checkHDTime=function(){e.display.weekOffRequest.requesttime&&e.display.weekOffRequest.requesttotime&&parseInt(e.display.weekOffRequest.requesttime)>parseInt(e.display.weekOffRequest.requesttotime)&&(alert("End time should be less then Start time"),delete e.display.weekOffRequest.requesttime,delete e.display.weekOffRequest.requesttotime)},e.$watch("display.weekOffRequest.leavetype",function(){"leave"==e.display.weekOffRequest.leavetype?(e.minFromDate=Date.now(),e.maxFromDate=e.display.weekOffRequest.requesttodate,e.minToDate=e.display.weekOffRequest.requestdate,e.$watch("display.weekOffRequest.requestdate",function(t){e.minToDate=t}),e.$watch("display.weekOffRequest.requesttodate",function(t){e.maxFromDate=t})):(e.minFromDate=Date.now(),e.maxFromDate=0)}),e.Save=function(){$("#updateReasonModal").modal("hide"),e.display.weekOffRequest.status||(e.display.weekOffRequest.status="open"),e.display.weekOffRequest.type="requested",e.display.weekOffRequest.requestdate=new Date(moment(e.display.weekOffRequest.requestdate).startOf("day")).toISOString(),e.display.weekOffRequest.requesttodate=new Date(moment(e.display.weekOffRequest.requesttodate).endOf("day")).toISOString(),"weekoff"==e.display.weekOffRequest.leavetype&&(e.display.weekOffRequest.requesttodate=new Date(moment(e.display.weekOffRequest.requestdate).endOf("day")).toISOString()),e.display.weekOffRequest.logobj=e.display.weekOffRequest._id?"Others"==e.display.editReason.displayname?{reason_id:e.display.editReason._id,reasontext:e.display.editReason.displayname,otherreasontext:e.temp.otherEditReason}:{reason_id:e.display.editReason._id,reasontext:e.display.editReason.displayname}:{reasontext:"new request created"},r.add(e.display.weekOffRequest).then(function(t){e.temp.response=t.response,e.temp.message=t.message,e.temp.errormessage=t.errormessage,e.successFlag=!0,e.temp.message.length&&(e.display.weekOffRequest.user_id.length==e.temp.message.length&&(e.successFlag=!1),$("#errorWOMessage").modal("show")),e.temp.errormessage.length&&(e.successFlag=!1,e.temp.message=angular.copy(e.temp.errormessage),$("#errorWOMessage").modal("show")),e.display.weekOffRequest._id&&(e.display.weekOffRequest=t.response,e.display.tempweekOffRequest=angular.copy(t.response),e.display.weekOffRequest.requesttime=e.display.weekOffRequest.requesttime.toString(),e.display.weekOffRequest.requesttotime=e.display.weekOffRequest.requesttotime.toString())})},e.cancelLeave=function(){e.exist=!1,e.temp.rejectReason="",e.temp.otherReason="",delete e.display.rejectReason,$("#RejectedStatus").modal("show")},e.updateModal=function(){e.exist=!1,e.temp.editReason="",e.temp.otherEditReason="",$("#updateReasonModal").modal("show")},e.pushUser=function(t){if(e.temp.users.length){for(var a=!1,s=0;s<e.temp.users.length;s++)if(e.temp.users[s]._id==t._id){a=!0;break}0==a&&(e.temp.users.push(t),e.display.weekOffRequest.user_id.push(t._id))}else e.temp.users.push(t),e.display.weekOffRequest.user_id.push(t._id);e.temp.user=""},e.removeUser=function(t){if(e.display.weekOffRequest.user_id||(e.display.weekOffRequest.user_id=[]),e.temp.users.splice(t,1),e.temp.users.length){for(var a=[],s=0;s<e.temp.users;s++)a.push(e.temp.users[s]._id);e.display.weekOffRequest.user_id=a.join(",")}else e.display.weekOffRequest.user_id=[]},e.setAllAreas=function(t){1==t?(e.display.areas=angular.copy(e.areas),e.changeArea()):(e.changeArea(),e.display.areas=[])},e.init=function(){s.get("",e.searchObj).then(function(t){e.users=t.response,e.filterUser()})},e.display.weekOffRequest._id?c(a.Id):(e.getCities(),e.init())};e.$inject=["$scope","user","$stateParams","userinfoFactory","rolesFactory","areaFactory","woRequestFactory","timeSlots","$filter","cityFactory"],angular.module("webApp").controller("weeOffRequestObjectController",e)}(),angular.module("webApp").factory("woRequestFactory",["apiCall",function(e){function t(t,a){var s="worequests?";if(a&&a.currentPage&&a.itemPerPage&&(s=s+"&page="+a.currentPage+"&limit="+a.itemPerPage),t){if(t.status&&(s=s+"&status="+t.status),t.leavetype&&(s=s+"&leavetype="+t.leavetype),t.fromdate){var i=t.fromdate.toISOString();s=s+"&fromdate="+i}if(t.todate){var n=t.todate.toISOString();s=s+"&todate="+n}return t.name&&(s=s+"&name="+t.name),t.city_id&&(s=s+"&city_id="+t.city_id),t.role&&(s=s+"&role="+t.role),t.area_id&&(s=s+"&area_id="+t.area_id),t.user_id&&(s=s+"&user_id="+t.user_id),e.httpGET(s)}}function a(t){return t._id?t._id?e.httpPOST("worequests/"+t._id,t):void 0:e.httpPOST("worequests",t)}function s(t){return e.httpGET("worequests/"+t)}function i(t){return e.httpPUT("worequests/"+t._id,t)}function n(t){return e.httpPOST("addWOList",t)}function r(t){return e.httpGET("weekoff/"+t)}function o(t){var a="getWORequests?";if(t){if(t.from_date){var s=t.from_date.toISOString();a=a+"&from_date="+s}if(t.to_date){var s=t.to_date.toISOString();a=a+"&to_date="+s}t.city_id&&(a=a+"&city_id="+t.city_id),t.roles&&(a=a+"&role="+t.roles),t.area_ids&&(a=a+"&areas="+t.area_ids),t.user_ids&&(a=a+"&users="+t.user_ids)}return e.httpGET(a)}return{getUser:t,add:a,getById:s,update:i,getWOList:r,addWOList:n,getWORequests:o}}]),angular.module("webApp").filter("trustAsHTML",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),function(){"use strict";var e=function(e,t,a,s,i){function n(){s.get(e.paging,e.searchObj).then(function(t){e.display.calls=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}function r(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20}!function(){e.searchObj={},r(),n(),e.hidePagingValue=!0}(),e.get=function(){n()},e.calltypelist={_id:"55756fa6a34c6138090ad8f7",name:"calltype",displayname:"Call Type",__v:0,source:"webhcm",iseditable:!1,optionlist:[{code:"all",displayname:"All",smsdisplayname:"All",_id:"5609685721eec91800b09951",dimensions:[],active:!0},{code:"enquiry",displayname:"Enquiry",smsdisplayname:"Enquiry",_id:"5609685721eec91800b09973",dimensions:[],active:!1},{code:"generalenquiry",displayname:"General Enquiry",smsdisplayname:"General Enquiry",_id:"5609685721eec91800b09972",dimensions:[],active:!0},{code:"caregiverenquiry",displayname:"Care Giver Enquiry",smsdisplayname:"Care Giver",_id:"5609685721eec91800b09971",dimensions:[],active:!0},{code:"dentalenquiry",displayname:"Dental Enquiry",smsdisplayname:"Dental",_id:"5609685721eec91800b09970",dimensions:[],active:!0},{code:"physioenquiry",displayname:"Physio Enquiry",smsdisplayname:"Physio",_id:"5609685721eec91800b0996f",dimensions:[],active:!0},{code:"strokecareenquiry",displayname:"Stroke Care Enquiry",smsdisplayname:"Stroke Care",_id:"5609685721eec91800b0996e",dimensions:[],active:!0},{code:"dementiaenquiry",displayname:"Dementia Enquiry",smsdisplayname:"Dementia",_id:"5609685721eec91800b0996d",dimensions:[],active:!0},{code:"nursingenquiry",displayname:"Nursing Enquiry",smsdisplayname:"Nursing",_id:"5609685721eec91800b0996c",dimensions:[],active:!0},{code:"physicianenquiry",displayname:"Physician Enquiry",smsdisplayname:"Physician",_id:"5609685721eec91800b0996b",dimensions:[],active:!0},{code:"oncologyenquiry",displayname:"Oncology Enquiry",smsdisplayname:"Oncology",_id:"5609685721eec91800b0996a",dimensions:[],active:!0},{code:"feedback",displayname:"Feedback",smsdisplayname:"Feedback",_id:"5609685721eec91800b09969",dimensions:[],active:!0},{code:"servicerequest",displayname:"Service Request",smsdisplayname:"Service Request",_id:"5609685721eec91800b09968",dimensions:[],active:!0},{code:"complain",displayname:"Complain",smsdisplayname:"Complain",_id:"5609685721eec91800b09967",dimensions:[],active:!0},{code:"complaintresolution",displayname:"Complaint Resolution",smsdisplayname:"Complaint Resolution",_id:"5609685721eec91800b09966",dimensions:[],active:!0},{code:"requeststatus",displayname:"Request Status",smsdisplayname:"Request Status",_id:"5609685721eec91800b09965",dimensions:[],active:!0},{code:"others",displayname:"Others",smsdisplayname:"Others",_id:"5609685721eec91800b09964",dimensions:[],active:!0},{code:"jobenquiry",displayname:"Job enquiry",smsdisplayname:"Job",_id:"5661323523fc1a38122adae5",dimensions:[],active:!0},{code:"equipmentenquiry",displayname:"Equipment enquiry",smsdisplayname:"Equipment",_id:"5661323f23fc1a38122adae6",dimensions:[],active:!0},{code:"membership/renewalenquiry",displayname:"Membership/Renewal enquiry",smsdisplayname:"Membership/Renewal",_id:"5661324523fc1a38122adae7",dimensions:[],active:!0}],_Deleted:!1},e.SelectCall=function(e){i.currentcall=e,a.go("main.call-add")}};e.$inject=["$scope","$location","$state","calllistFactory","callFactory"],angular.module("webApp").controller("calllistController",e)}(),angular.module("webApp").factory("calllistFactory",["apiCall",function(e){function t(t,a){var s="";
return t&&(s=s+"page="+t.currentPage+"&limit="+t.itemPerPage+"&"),a&&(a.searchText&&(s=s+"name="+a.searchText+"&"),a.calltype&&(s=s+"type="+a.calltype+"&")),e.httpGET("calls?"+s)}function a(t,a){return e.httpGET("calls?"+t+"="+a)}return{get:t,getByType:a}}]),angular.module("daypicker",[]).directive("ngDaypicker",function(){return{restrict:"E",scope:{dModel:"=",dActive:"=",onSelect:"&"},templateUrl:"partials/directives/daypicker/daypicker.html",controller:["$scope",function(e){function t(t){for(var a=0;a<e.dModel.length;a++)if(t==e.dModel[a]){e.dModel.splice(a,1);break}}function a(t){t||(t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]),e.mondayActive=!1,e.tuesdayActive=!1,e.wednesdayActive=!1,e.thursdayActive=!1,e.fridayActive=!1,e.saturdayActive=!1,e.sundayActive=!1,angular.forEach(t,function(t){switch(t){case"Monday":e.mondayActive=!0;break;case"Tuesday":e.tuesdayActive=!0;break;case"Wednesday":e.wednesdayActive=!0;break;case"Thursday":e.thursdayActive=!0;break;case"Friday":e.fridayActive=!0;break;case"Saturday":e.saturdayActive=!0;break;default:e.sundayActive=!0}})}e.dayClick=function(a,s){e.dModel||(e.dModel=[]),"mon"==a&&(s?(e.monday=!1,t("Monday")):(e.monday=!0,e.dModel.push("Monday"))),"tue"==a&&(s?(e.tuesday=!1,t("Tuesday")):(e.tuesday=!0,e.dModel.push("Tuesday"))),"wed"==a&&(s?(e.wednesday=!1,t("Wednesday")):(e.wednesday=!0,e.dModel.push("Wednesday"))),"thu"==a&&(s?(e.thursday=!1,t("Thursday")):(e.thursday=!0,e.dModel.push("Thursday"))),"fri"==a&&(s?(e.friday=!1,t("Friday")):(e.friday=!0,e.dModel.push("Friday"))),"sat"==a&&(s?(e.saturday=!1,t("Saturday")):(e.saturday=!0,e.dModel.push("Saturday"))),"sun"==a&&(s?(e.sunday=!1,t("Sunday")):(e.sunday=!0,e.dModel.push("Sunday"))),e.onSelect({item:e.dModel})},e.setDay=function(t){t||(t=[]),e.monday=!1,e.tuesday=!1,e.wednesday=!1,e.thursday=!1,e.friday=!1,e.saturday=!1,e.sunday=!1,angular.forEach(t,function(t){switch(t){case"Monday":e.monday=!0;break;case"Tuesday":e.tuesday=!0;break;case"Wednesday":e.wednesday=!0;break;case"Thursday":e.thursday=!0;break;case"Friday":e.friday=!0;break;case"Saturday":e.saturday=!0;break;default:e.sunday=!0}})},e.$watch("dModel",function(t){e.setDay(t)}),e.$watch("dActive",function(e){a(e)})}],link:function(){}}}),angular.module("webApp").factory("deleteFactory",["apiCall",function(e){function t(t,a){return console.log(t),e.httpDELETE(a+"/"+t)}return{deleteRecord:t}}]),angular.module("delete",[]).directive("ngDelete",["deleteFactory",function(){return{restrict:"E",scope:{name:"=",target:"="},templateUrl:"partials/directives/delete/delete.html",controller:["$scope","$http","$location",function(e){e["delete"]=function(){console.log(e.name),console.log(e.target)}}],link:function(e,t){$(t).on("click",function(){name=e.name,target=e.target})}}}]),angular.module("demoGraphy",[]).directive("ngDemography",function(){return{restrict:"E",scope:{newpatient:"=",temp:"="},templateUrl:"partials/directives/demography/demography.html",controller:["$scope","clientFactory",function(e,t){function a(e){var t=/^[a-z]+[a-z0-9._]+@[a-z-]+\.[a-z.]{2,5}$/;return t.test(e)?!0:!1}function s(){if(sessionStorage.getItem("Salutations")){e.display.Salutations=[];var t=JSON.parse(sessionStorage.getItem("Salutations"));e.display.Salutations=t.childs}}e.temp||(e.temp={}),e.display||(e.display={}),e.newpatient||(e.newpatient={}),e.datePickerPopup={},e.selectedPateintObj={},e.validTextName=/^[ A-Za-z0-9_.']*$/,e.validName=/^[ A-Za-z_.']*$/,e.validmobilenumber=/^[0-9](?!.*(\d)\1{13})\d{9,}$/,e.validUser=/^[ A-Za-z0-9]*$/,e.validDigit=/^[0-9]*$/,e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.temp.validEmail=!0,e.validateEmail=function(){if(e.newpatient.email.length){for(var t=e.newpatient.email.split(","),s=0;s<t.length;s++)if(!a(t[s].trim()))return e.temp.validEmail&&(e.temp.validEmail=!1),!1;return e.temp.validEmail=!0,!0}e.temp.validEmail=!0},s(),e.temp.ageIn=[{agein:"YEARS"},{agein:"MONTHS"},{agein:"DAYS"}],e.changeTitle=function(){"MR"==e.newpatient.salutation.toUpperCase()||"MR."==e.newpatient.salutation.toUpperCase()||"FATHER"==e.newpatient.salutation.toUpperCase()||"FATHER."==e.newpatient.salutation.toUpperCase()||"BABA"==e.newpatient.salutation.toUpperCase()||"BABA."==e.newpatient.salutation.toUpperCase()||"BABA OF"==e.newpatient.salutation.toUpperCase()||"BABA OF."==e.newpatient.salutation.toUpperCase()||"MASTER"==e.newpatient.salutation.toUpperCase()?(e.newpatient.gender="third gender"!=e.newpatient.gender?"male":"third gender",e.disableGenderMale=!1,e.disableGenderFemale=!0,e.disableGenderOther=!1):"MRS"==e.newpatient.salutation.toUpperCase()||"MRS."==e.newpatient.salutation.toUpperCase()||"MISS"==e.newpatient.salutation.toUpperCase()||"MISS."==e.newpatient.salutation.toUpperCase()||"MS"==e.newpatient.salutation.toUpperCase()||"MS."==e.newpatient.salutation.toUpperCase()||"BABY"==e.newpatient.salutation.toUpperCase()||"BABY."==e.newpatient.salutation.toUpperCase()||"BABY OF"==e.newpatient.salutation.toUpperCase()||"BABY OF."==e.newpatient.salutation.toUpperCase()||"SISTER"==e.newpatient.salutation.toUpperCase()||"SISTER."==e.newpatient.salutation.toUpperCase()?(e.newpatient.gender="third gender"!=e.newpatient.gender?"female":"third gender",e.disableGenderMale=!0,e.disableGenderFemale=!1,e.disableGenderOther=!1):(e.newpatient.gender,e.disableGenderMale=!1,e.disableGenderFemale=!1,e.disableGenderOther=!1)},e.newpatient.salutation&&e.changeTitle(),e.getDevDob=function(){if(e.newpatient.agetype||(e.newpatient.agetype="YEARS"),"MONTHS"==e.newpatient.agetype)if(e.newpatient.age>11)e.newpatient.age="",alert("MONTHS SHOULD BE LESS THAN 12");else{var t=moment().subtract(e.newpatient.age,"months");e.newpatient.dob=new Date(t)}else if("DAYS"==e.newpatient.agetype)if(e.newpatient.age>30)e.newpatient.age="",alert("DAYS SHOULD BE LESS THAN 31");else{var t=moment().subtract(e.newpatient.age,"days");e.newpatient.dob=new Date(t)}else{var t=moment().subtract(e.newpatient.age,"years");e.newpatient.dob=new Date(t)}e.newpatient.assumeddob=!0};var i=new Date;i=moment(i).startOf("day"),i=new Date(i),e.getDavAge=function(t){if(e.newpatient.dob>=i)alert("PLEASE SELECT VALID DOB"),e.newpatient.dob="";else{if(void 0==t&&(t=e.newpatient.dob),"MONTHS"==e.newpatient.agetype){t=moment(t).format("YYYY-MM-DD");var a=moment().diff(t,"months");if(0>=a){e.newpatient.agetype="DAYS",t=moment(t).format("YYYY-MM-DD");var a=moment().diff(t,"days");e.newpatient.age=a}else e.newpatient.age=a;if(a>=12){e.newpatient.agetype="YEARS",t=moment(t).format("YYYY-MM-DD");var a=moment().diff(t,"years");e.newpatient.age=a}}else if("DAYS"==e.newpatient.agetype){t=moment(t).format("YYYY-MM-DD");var a=moment().diff(t,"days");if(e.newpatient.age=a,a>=30){e.newpatient.agetype="MONTHS",t=moment(t).format("YYYY-MM-DD");var a=moment().diff(t,"months");if(e.newpatient.age=a,a>=12){e.newpatient.agetype="YEARS",t=moment(t).format("YYYY-MM-DD");var a=moment().diff(t,"years");e.newpatient.age=a}}}else{t=moment(t).format("YYYY-MM-DD");var a=moment().diff(t,"years");if(0>=a)if(e.newpatient.agetype="MONTHS",t=moment(t).format("YYYY-MM-DD"),a=moment().diff(t,"months"),0>=a){e.newpatient.agetype="DAYS",t=moment(t).format("YYYY-MM-DD");var a=moment().diff(t,"days");e.newpatient.age=a}else e.newpatient.age=a;else e.newpatient.age=a}e.newpatient.assumeddob=!1}},e.searchPatientByExternalId=function(){e.temp.externalId.length<9||t.getABMHPatientList(e.temp.externalId).then(function(e){console.log(e)})}}]}}),function(){"use strict";angular.module("fileupload",[]).directive("appFilereader",["$q",function(e){var t=Array.prototype.slice;return{restrict:"A",require:"?ngModel",link:function(a,s,i,n){n&&(n.$render=function(){},s.bind("change",function(a){function s(t){var a,s=e.defer(),n=new FileReader;return n.onload=function(e){a=i(t),a.path=URL.createObjectURL(t);var n={};n.imgBase64=e.target.result,n.file=a,s.resolve(n)},n.onerror=function(e){s.reject(e)},n.readAsDataURL(t),s.promise}function i(e){var t={};for(var a in e){var s=e[a];console.log(a),console.log(s),t[a]=s}return t}var r=a.target;r.value&&(r.disabled=!0,e.all(t.call(r.files,0).map(s)).then(function(e){n.$setViewValue(r.multiple?e:e.length?e[0]:null),r.value=null,r.disabled=!1}))}))}}}])}(),angular.module("gmapAddress",[]).directive("ngGmapAddress",function(){return{restrict:"E",scope:{address:"=",areaList:"=areaList",order:"=order"},templateUrl:"partials/directives/gmapaddress/gmapaddress.html",controller:["$scope","$timeout",function(e,t){function a(){var t=new google.maps.Geocoder;t.geocode({placeId:e.address.googleplace_id},function(t,a){if("OK"===a&&t[0]){{var n=document.getElementById("addpatient-input");new google.maps.places.SearchBox(n)}s=[],s.forEach(function(e){e.setMap(null)}),e.address.searchDisableCheck=!0,e.address.searchBar=t[0].formatted_address;var r=t[0].geometry.location,o=new google.maps.Marker({map:i,title:e.address.sublocation_text,position:{lat:parseFloat(r.lat()),lng:parseFloat(r.lng())}});i.setCenter({lat:parseFloat(r.lat()),lng:parseFloat(r.lng())}),i.setZoom(13),s.push(o)}})}e.address||(e.address={}),e.call||(e.call={}),e.areaList||(e.areaList=[]);var s=[],i=void 0,n={};n.coordinates||(n.coordinates=[]);var r={};e.AddressType=JSON.parse(sessionStorage.getItem("AddressType")),r.coordinates=[],e.areaList,e.address.searchDisableCheck=!1,e.onPincodeChange=function(){if(e.address.pincode)if(e.address.pincode)if(e.order){if(e.order._id){var t={};e.order.partner_id.areas.forEach(function(a){a.area_id.pincodes.forEach(function(s){s==e.address.pincode&&(t=a.area_id,e.address.sublocation=a.area_id.name,e.address.googleplace_id="ChIJWQFzypu4wjsRhBa2GylxC9o")})}),e.order.addpatientcomment||(e.order.addpatientcomment={}),e.order.addpatientcomment.addpatientreasons||(e.order.addpatientcomment.addpatientreasons=[]),"SampleCollected"==e.order.status||"SampleHandover"==e.order.status||"Completed"==e.order.status||e.order.addpatientcomment.addpatientreasons.length&&e.temp.isBackDate?existingArea._id==t._id?(e.address.area=t.name,e.address.selectedArea=t):($("#gmapaddaddress").modal("hide"),e.address.selectedFromAreaname=angular.copy(existingArea.name),$("#alertSlotArea").modal("show"),noChange=!0,e.address=angular.copy(existingAddress),document.getElementById("addpatient-input").value=""):(e.address.area=t.name,e.address.selectedArea=t),void 0==e.address.area&&(alert("We are not serving on this area"),e.address=angular.copy(existingAddress),document.getElementById("addpatient-input").value="")}}else e.areaList.forEach(function(t){t.area_id.pincodes.forEach(function(a){a==e.address.pincode&&(e.address.area=t.area_id.name,e.address.selectedArea=t.area_id,e.address.selectedCity=t.area_id.city_id._id,e.address.sublocation=t.area_id.name,e.address.googleplace_id="ChIJWQFzypu4wjsRhBa2GylxC9o")})}),console.log(e.address),void 0==e.address.area&&(alert("We are not serving on this area"),e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.sublocation=void 0,document.getElementById("addpatient-input").value="");else alert("Please select landmark"),e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.sublocation=void 0,document.getElementById("addpatient-input").value=""},e.openMapForNewPatient=function(){i=new google.maps.Map(document.getElementById("addpatientmap"),{center:{lat:19.119126,lng:72.890775},zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP});var n=document.getElementById("addpatient-input"),o=new google.maps.places.SearchBox(n);i.controls[google.maps.ControlPosition.TOP_LEFT].push(n),i.addListener("bounds_changed",function(){o.setBounds(i.getBounds())}),s.forEach(function(e){e.setMap(null)}),o.addListener("places_changed",function(){var t={},a={};e.address.selectedArea&&(t=angular.copy(e.address.selectedArea),a=angular.copy(e.address)),e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.sublocation=void 0,s.forEach(function(e){e.setMap(null)});var n=o.getPlaces(),d=void 0,l=[];e.call.formadd=n[0].formatted_address,l=e.call.formadd.split(",");var c=!0;l&&l.length&&l.forEach(function(e){e.trim()==n[0].name.trim()&&(c=!1)}),c&&(n[0].formatted_address=n[0].name+", "+n[0].formatted_address),e.address.selectedGmapArea=n,e.address.selectedGmapArea.length&&(d=e.address.selectedGmapArea[0].place_id),e.address.googleplace_id=d,e.address.selectedGmapArea=e.address.selectedGmapArea,e.address.selectedGmapArea.forEach(function(t){t.address_components&&t.address_components.length&&t.address_components.forEach(function(t){t.types&&t.types.length&&t.types.forEach(function(a){"postal_code"==a&&(e.address.pincode=t.short_name,e.address.sublocation=e.address.selectedGmapArea[0].formatted_address)})})});var p=angular.copy(e.address.selectedGmapArea[0].geometry.location);if(p.lng=angular.copy(p.lng()),p.lat=angular.copy(p.lat()),r.coordinates.push(p.lng.toString()),r.coordinates.push(p.lat.toString()),e.address.pincode)if(e.order){if(e.order._id){var u={};e.order.partner_id.areas.forEach(function(t){t.area_id.pincodes.forEach(function(a){a==e.address.pincode&&(u=t.area_id)})}),e.order.addpatientcomment||(e.order.addpatientcomment={}),e.order.addpatientcomment.addpatientreasons||(e.order.addpatientcomment.addpatientreasons=[]),"SampleCollected"==e.order.status||"SampleHandover"==e.order.status||"Completed"==e.order.status||e.order.addpatientcomment.addpatientreasons.length&&e.temp.isBackDate?t._id==u._id?(e.address.area=u.name,e.address.selectedArea=u):($("#gmapaddaddress").modal("hide"),e.address.selectedFromAreaname=angular.copy(t.name),$("#alertSlotArea").modal("show"),noChange=!0,e.address=angular.copy(a),document.getElementById("addpatient-input").value=""):(e.address.area=u.name,e.address.selectedArea=u),void 0==e.address.area&&(alert("We are not serving on this area"),e.address=angular.copy(a),document.getElementById("addpatient-input").value="")}}else e.areaList.forEach(function(t){t.area_id.pincodes.forEach(function(a){a==e.address.pincode&&(e.address.area=t.area_id.name,e.address.selectedArea=t.area_id,e.address.selectedCity=t.area_id.city_id._id)})}),void 0==e.address.area&&(alert("We are not serving on this area"),e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.sublocation=void 0,document.getElementById("addpatient-input").value="");else alert("Please select landmark"),e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.sublocation=void 0,document.getElementById("addpatient-input").value="";if(e.address.selectedArea){s.forEach(function(e){e.setMap(null)}),s=[];var m=new google.maps.LatLngBounds;n.forEach(function(e){return e.geometry?(s.push(new google.maps.Marker({map:i,title:e.name,position:e.geometry.location})),void(e.geometry.viewport?m.union(e.geometry.viewport):m.extend(e.geometry.location))):void console.log("Returned place contains no geometry")}),i.fitBounds(m)}d||(alert("We are not serving on this area"),document.getElementById("addpatient-input").value=""),0==n.length}),e.address.area&&e.address.geolocation&&t(a(),2e3)},i||t(e.openMapForNewPatient,1e3)}]}}),function(e){function t(e){return"[object Array]"===Object.prototype.toString.call(e)}var a,s=e.Tick.prototype,n=e.Axis.prototype,r=e.Chart.prototype,o=e.Legend.prototype,d=e.Series.prototype,l=e.seriesTypes.column&&e.seriesTypes.column.prototype,c=e.seriesTypes.bar&&e.seriesTypes.bar.prototype,p=e.seriesTypes.pie&&e.seriesTypes.pie.prototype,u=e.seriesTypes.bubble&&e.seriesTypes.bubble.prototype,m=e.PlotLineOrBand&&e.PlotLineOrBand.prototype,g=d.animate,h=l.animate,v=c.animate,f=p.animate,y=e.Chart.prototype.reAnimate=function(){var e=this;Highcharts.each(e.series,function(t){var a=t.options.animation,s=t.clipBox||e.clipBox,i=["_sharedClip",a.duration,a.easing,s.height].join(","),n=e[i],r=e[i+"m"];if(!n)return void e.redraw();switch(n&&n.attr({width:0}),r&&r.attr({width:0}),t.type){case"pie":t.animate=f;break;case"column":t.animate=h;break;case"bar":t.animate=v;break;default:t.animate=g}t.animate(!0),t.isDirty=!0}),e.redraw()};e.Chart.prototype.callbacks.push(function(e){var t=e.customEvent.resetAxisEvents,a=e.renderer.forExport,s=e.series,i=s.length,n=e.xAxis,r=e.yAxis,o=0;if(a)return!1;for(t(n,"xAxis",e),t(r,"yAxis",e);i>o;o++)s[o].update({animation:{enabled:!0},customEvents:{series:s[o].options.events,point:s[o].options.point.events},events:{click:null},point:{events:{click:null}}},!1);e.xAxis[0].isDirty=!0,y.call(e)});var b=e.Chart.prototype.customEvent=function(s,n){b.add=function(t,s,i){for(var n in s)!function(n){s.hasOwnProperty(n)&&t&&(t[n]&&t[n]!==a||e.addEvent(t.element,n,function(){return i.textStr&&(i.value=i.textStr),s[n].call(i),!1}),t[n]=!0)}(n)},e.Chart.prototype.customEvent.resetAxisEvents=function(t,s,i){for(var n,r,o,d,l,c=t.length,p=i.userOptions,u=0,m=0,g=!1;c>u;u++){if(s&&(l=e.splat(p[s]),o=l[u]&&l[u].plotLines,d=l[u]&&l[u].plotBands),o!==a){for(r=o.length,m=0;r>m;m++){var h=o[m].events;h&&(o[m].customEvents=h,o[m].events=null)}g=!0}if(d!==a){for(n=d.length,m=0;n>m;m++){var h=d[m].events;h&&(d[m].customEvents=h,d[m].events=null)}g=!0}g&&i.yAxis[u].update({plotLines:o,plotBands:d},!1)}},e.wrap(s,n,function(s){function r(e){c.push(e.label)}var o,d,l,c,p,u,m,g=s.apply(this,Array.prototype.slice.call(arguments,1));switch(n){case"addLabel":if(p=this.parent,l=this.axis.options.labels.events,c=[this.label],p)for(var h=this;h;){if(t(h))for(m=h.length,i=0;i<m;i++)r(h[i]);else r(h);h=h.parent}break;case"setTitle":o=this.options.title.events,d=this.title;break;case"drawDataLabels":o=this.dataLabelsGroup?this.options.dataLabels.events:null,d=this.dataLabelsGroup?this.dataLabelsGroup:null;break;case"render":this.axisTitle&&(o=this.options.title.events,d=this.axisTitle),(this.options.value||this.options.from)&&(o=this.options.customEvents,d=this.svgElem),this.options.stackLabels&&(o=this.options.stackLabels.events,d=this.stackTotalGroup,l=this.options.stackLabels.events,c=this.stacks);break;case"drawPoints":u=this.options,o=u.customEvents?u.customEvents.series:u,d=this.group,l=u.customEvents?u.customEvents.point:u.point.events,c=this.points;break;case"renderItem":o=this.options.itemEvents,d=this.group}if(o||l){if(l){var m=c.length;for(j=0;j<m;j++){var v=e.pick(c[j].graphic,c[j]);v&&v!==a&&b.add(v,l,c[j])}}b.add(d,o,this)}return g})};b(s,"addLabel"),b(n,"render"),b(d,"drawPoints"),b(d,"drawDataLabels"),b(r,"setTitle"),b(o,"renderItem"),m&&b(m,"render"),u&&(b(u,"drawPoints"),b(u,"drawDataLabels")),l&&(b(l,"drawDataLabels"),b(l,"drawPoints")),p&&(b(p,"drawDataLabels"),b(p,"drawPoints"))}(Highcharts),angular.module("webApp").factory("importFactory",["apiCall",function(e){function t(t,a){return e.httpFilePost("imports/"+a,t,null,"file")}return{addFile:t}}]),angular.module("import",[]).directive("ngImport",["importFactory",function(e){return{restrict:"E",scope:{ngModel:"="},templateUrl:"partials/directives/import/import.html",controller:["$scope","$http","$location",function(t){t.result={},t.init=function(e){t.result={},t.type=e,t.subtype=void 0,t.setType=t.type},t.saveFile=function(a){var s=void 0;s=t.type,t.subtype&&(s=t.subtype),e.addFile(a,s).then(function(e){t.result=e,t.result.done=1})},t.close=function(){t.result={}}}],link:function(e,t,a){e.init(a.type)}}}]),angular.module("aurbano.multiselect",[]).directive("multiselect",["$compile","$templateCache",function(e,t){"use strict";return{restrict:"E",scope:{msModel:"=",msOptions:"=",msConfig:"=",msChange:"&"},controller:["$scope",function(e){e.config=e.msConfig,"undefined"==typeof e.config&&(e.config={}),"undefined"==typeof e.config.itemTemplate&&(e.config.itemTemplate=function(e){return e}),"undefined"==typeof e.config.labelTemplate&&(e.config.labelTemplate=function(e){return e}),"undefined"==typeof e.config.modelFormat&&(e.config.modelFormat=function(e){return e}),e.$watch("msOptions",function(){t()}),(null===e.msModel||"undefined"==typeof e.msModel)&&(e.msModel=[]),(null===e.msOptions||"undefined"==typeof e.msOptions)&&(e.msOptions=[]),e.multiselect={filter:"",filtered:[],options:e.msOptions,displayDropdown:!0,deleteSelected:function(a){var s=angular.copy(e.msModel);e.msModel.splice(a,1),e.msChange({newVal:e.msModel,oldVal:s}),t()},selectElement:function(a){var s=angular.copy(e.msModel);console.log("selectElement"),e.msModel.push(e.multiselect.filtered[a]),e.msChange({newVal:e.msModel,oldVal:s}),console.log(e.msChange),e.multiselect.filter="",t()},focusFilter:function(){e.multiselect.currentElement=0,e.config.hideOnBlur&&(e.multiselect.displayDropdown=!0)},blurFilter:function(){e.multiselect.currentElement=null,e.config.hideOnBlur&&(e.multiselect.displayDropdown=!1)},currentElement:null},e.config.hideOnBlur&&(e.multiselect.displayDropdown=!1);var t=function(){return null===e.msModel?void(e.multiselect.options=e.msOptions):void(e.multiselect.options=e.msOptions.filter(function(t){return 0==e.msModel.indexOf(t)&&(console.log(e.msModel.indexOf(t)),console.log(t)),e.msModel.indexOf(t)<0}))}}],link:function(a,s,i){if(!i.templateUrl){var n='<div class="multiselect">    <div class="multiselect-labels">         <span class="label label-default multiselect-labels-lg" ng-repeat="element in msModel">             <span ng-bind-html="config.labelTemplate(element)"></span>             <a href="" ng-click="$event.preventDefault(); multiselect.deleteSelected($index)" title="Remove element">                 <i class="fa fa-times"></i>             </a>          </span>    </div>    <input ng-show="multiselect.options.length > 0" placeholder="'+i.placeholder+'" type="text" class="form-control" ng-model="multiselect.filter" ng-focus="multiselect.focusFilter()" ng-blur="multiselect.blurFilter()" />    <div ng-show="msModel.length < multiselect.options.length && multiselect.options.length === 0 && !multiselect.options.$resolved"><em>Loading...</em></div>    <ul class="dropdown-menu" role="menu" ng-show="multiselect.displayDropdown && multiselect.options.length > 0 && multiselect.filter.length > 2">      <li ng-repeat="element in multiselect.filtered = (multiselect.options | filter:multiselect.filter) track by $index" role="presentation" ng-class="{active: $index == multiselect.currentElement}">        <a href="" role="menuitem" ng-click="$event.preventDefault(); multiselect.selectElement($index)" ng-bind-html="config.itemTemplate(element)"></a>      </li>    </ul></div>',r='<script type="text/ng-template" id="ng-multiselect-view.html">'+n+"</script";e(r)(a),s.after(r),t.put("ng-multiselect-view.html",n)}a.attrs=i,s.on("keydown",function(e){var t=e.keyCode||e.which;switch(t){case 40:a.$apply(function(){a.multiselect.currentElement++,a.multiselect.currentElement>=a.multiselect.filtered.length&&(a.multiselect.currentElement=0)});break;case 38:a.$apply(function(){a.multiselect.currentElement--,a.multiselect.currentElement<0&&(a.multiselect.currentElement=a.multiselect.filtered.length-1)});break;case 13:a.$apply(function(){a.multiselect.selectElement(a.multiselect.currentElement)});break;default:a.$apply(function(){a.multiselect.currentElement=0})}})},template:function(e,t){var a=t.templateUrl||"ng-multiselect-view.html";return"<div ng-include=\"'"+a+"'\"></div>"}}}]),angular.module("ngAutocomplete",[]).directive("ngAutocomplete",function(){return{require:"ngModel",scope:{ngModel:"=",options:"=?",details:"=?"},link:function(e,t,a,s){var i,n=!1,r=function(){i={},e.options&&(n=e.options.watchEnter!==!0?!1:!0,e.options.types?(i.types=[],i.types.push(e.options.types),e.gPlace.setTypes(i.types)):e.gPlace.setTypes([]),e.options.bounds?(i.bounds=e.options.bounds,e.gPlace.setBounds(i.bounds)):e.gPlace.setBounds(null),e.options.country?(i.componentRestrictions={country:e.options.country},e.gPlace.setComponentRestrictions(i.componentRestrictions)):e.gPlace.setComponentRestrictions(null))};void 0==e.gPlace&&(e.gPlace=new google.maps.places.Autocomplete(t[0],{})),google.maps.event.addListener(e.gPlace,"place_changed",function(){var a=e.gPlace.getPlace();void 0!==a&&(void 0!==a.address_components?e.$apply(function(){e.details=a,s.$setViewValue(t.val())}):n&&o(a))});var o=function(a){var i=new google.maps.places.AutocompleteService;a.name.length>0&&i.getPlacePredictions({input:a.name,offset:a.name.length},function(a){if(null==a||0==a.length)e.$apply(function(){e.details=null});else{var i=new google.maps.places.PlacesService(t[0]);i.getDetails({reference:a[0].reference},function(a,i){i==google.maps.GeocoderStatus.OK&&e.$apply(function(){s.$setViewValue(a.formatted_address),t.val(a.formatted_address),e.details=a;t.on("focusout",function(){t.val(a.formatted_address),t.unbind("focusout")})})})}})};s.$render=function(){var e=s.$viewValue;t.val(e)},e.watchOptions=function(){return e.options},e.$watch(e.watchOptions,function(){r()},!0)}}}),function(){"use strict";var e=function(e,t){e.parentOrder=t.getParentOrder(),console.log("newPPOrderController"),console.log(e.parentOrder),$(".modal-backdrop").remove()};e.$inject=["$scope","ppOrderFactory"],angular.module("webApp").controller("newPPOrderController",e)}(),angular.module("webApp").factory("ppOrderFactory",["apiCall",function(){function e(){return a}function t(e){a=e}return{getParentOrder:e,setParentOrder:t};var a}]),function(){"use strict";var e=function(e,t,a,s){function i(){t.get().then(function(t){if(e.display.partners=angular.copy(t.response),e.partner||(e.partner={}),e.partner._id)for(var a=0;a<e.display.partners.length;a++)e.display.partners[a]._id==e.partner._id&&(e.partner=e.display.partners[a],e.tabIndex>-1&&e.partner.areas[e.tabIndex]||(e.tabIndex=0),e.partner.areas.length&&e.areaChange(e.partner.areas[e.tabIndex]))})}function n(t,a,s){for(var i=0;i<e.temp.timeSlots.length;i++)if(e.temp.timeSlots[i].time==a){switch(t){case"Monday":e.temp.timeSlots[i].monday=s;break;case"Tuesday":e.temp.timeSlots[i].tuesday=s;break;case"Wednesday":e.temp.timeSlots[i].wednesday=s;break;case"Thursday":e.temp.timeSlots[i].thursday=s;break;case"Friday":e.temp.timeSlots[i].friday=s;break;case"Saturday":e.temp.timeSlots[i].saturday=s;break;default:e.temp.timeSlots[i].sunday=s}i=e.temp.timeSlots.length}}function r(t,a){for(var s=0;s<e.temp.timeSlots.length;s++)if(e.temp.timeSlots[s].time==t){e.temp.timeSlots[s]=o(e.temp.rowDay,t,a,e.temp.timeSlots[s]);break}}function o(e,t,a,s){var i={};return s?i=s:(i.monday=0,i.tuesday=0,i.wednesday=0,i.thursday=0,i.friday=0,i.saturday=0,i.sunday=0),i.time=t,angular.forEach(e,function(e){switch(e){case"Monday":i.monday=parseInt(a);break;case"Tuesday":i.tuesday=parseInt(a);break;case"Wednesday":i.wednesday=parseInt(a);break;case"Thursday":i.thursday=parseInt(a);break;case"Friday":i.friday=parseInt(a);break;case"Saturday":i.saturday=parseInt(a);break;default:i.sunday=parseInt(a)}}),i}function d(){var t={};t.type="MA",s.get(t).then(function(t){e.temp.areas=t.response})}function l(t){e.temp.activeDays=[],e.temp.timeSlots[t].mondayFlag&&e.temp.activeDays.push("Monday"),e.temp.timeSlots[t].tuesdayFlag&&e.temp.activeDays.push("Tuesday"),e.temp.timeSlots[t].wednesdayFlag&&e.temp.activeDays.push("Wednesday"),e.temp.timeSlots[t].thursdayFlag&&e.temp.activeDays.push("Thursday"),e.temp.timeSlots[t].fridayFlag&&e.temp.activeDays.push("Friday"),e.temp.timeSlots[t].saturdayFlag&&e.temp.activeDays.push("Saturday"),e.temp.timeSlots[t].sundayFlag&&e.temp.activeDays.push("Sunday")}var c,p=[];!function(){e.temp={},e.display={},e.data={},e.temp={timeSlots:[]},i(),d()}(),e.searchArea=function(t){var a=e.display.areas.filter(function(e){return e.name&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.setAreaAndTime=function(a,i){e.tempTabActive=!1,c=t.getMinMaxTime(i),p=angular.copy(t.getTimeSlotsByWH(i).timeSlots),p=angular.copy(t.getAdvTimeSlots(p,i).timeSlots),e.display.areas=s.filterAreasbyCity(e.temp.areas,a)},e.saveNewArea=function(){angular.forEach(e.display.areas,function(){var a={area_id:e.data.area};t.checkIfExist(e.data.area._id,e.partner.areas,"area_id._id").found||e.partner.areas.push(a)}),t.updateArea(e.partner).then(function(t){i(),e.partner=t,$("#addAddresstModal").modal("hide")}),console.log(e.partner)},e.areaChange=function(a){t.getSlot(a,e.partner).then(function(t){e.temp.selected_area_id=a.area_id._id;angular.copy(a);e.temp.timeSlots=t.response,e.tempTabActive=!0;for(var s=0;s<e.partner.areas.length;s++)e.partner.areas[s].area_id._id==a.area_id._id?(e.partner.areas[s].tabActive=!0,e.tabIndex=s):e.partner.areas[s].tabActive=!1})},e.addAreaModel=function(t){e.temp.partner=t,$("#addAreaModel").modal("show")},e.rowModal=function(t,a){l(t),e.display.time=a,e.temp.rowDay=void 0,e.temp.rowSlot="",$("#rowSlotModel").modal("show")},e.columnModal=function(a){e.display.day=a;var s=t.getMinMaxTimeByDay(e.partner.workinghour,a);e.dayTimeSlots=angular.copy(t.getTimeSlots(s,e.partner.workinghour).timeSlots),e.temp.fromtime="",e.temp.totime="",e.temp.columnSlot="",$("#columnSlotModel").modal("show")},e.cellModal=function(t,a,s){e.display.day=t,e.display.time=a,e.temp.cellSlot=s,$("#cellSlotModel").modal("show")},e.changeSlotTime=function(){e.temp.fromtime==e.temp.totime&&(alert("fromtime and totime cannot be same "),e.temp.fromtime="",e.temp.totime="")},e.saveRowSlot=function(a,s){var n=!1;1>s&&(s=void 0);for(var d,l=0;l<e.partner.areas.length;l++)if(e.partner.areas[l].area_id._id==e.temp.selected_area_id){d=e.partner.areas[l];for(var c=0;c<e.partner.areas[l].slots.length;c++)e.partner.areas[l].slots[c].time==a&&(e.partner.areas[l].slots[c]=o(e.temp.rowDay,a,s,e.partner.areas[l].slots[c]),n=!0,c=e.partner.areas[l].slots.length);n||(e.partner.areas[l].slots.push(o(e.temp.rowDay,a,s,e.partner.areas[l].slots[c])),n=!1),l=e.partner.areas.length}t.updateArea(e.partner).then(function(t){r(a,s),i(),e.partner=t,e.temp.rowDay=void 0,e.temp.rowSlot="",$("#rowSlotModel").modal("hide")})},e.saveCellSlot=function(a,s,r){1>r&&(r=void 0);for(var d=!1,l=0;l<e.partner.areas.length;l++)if(e.partner.areas[l].area_id._id==e.temp.selected_area_id){for(var c=0;c<e.partner.areas[l].slots.length;c++)if(e.partner.areas[l].slots[c].time==s){var p=[];p.push(a),e.partner.areas[l].slots[c]=o(p,s,r,e.partner.areas[l].slots[c]),d=!0,c=e.partner.areas[l].slots.length}if(!d){var p=[];p.push(a),e.partner.areas[l].slots.push(o(p,s,r,e.partner.areas[l].slots[c])),d=!1}l=e.partner.areas.length}t.updateArea(e.partner).then(function(t){$("#cellSlotModel").modal("hide"),i(),e.partner=t,e.temp.cellSlot="",n(a,s,r)})},e.saveColumnSlot=function(a,s){1>s&&(s=void 0);for(var n,r=0;r<e.partner.areas.length;r++)if(e.partner.areas[r].area_id._id==e.temp.selected_area_id){n=e.partner.areas[r];var d=parseInt(JSON.parse(e.temp.fromtime).time),l=parseInt(JSON.parse(e.temp.totime).time),c=!1,p=[];p.push(a);var u;if(l-d>0){u=(l-d)/60;for(var m=0;u>=m;m++){for(var g=0;g<e.partner.areas[r].slots.length;g++)e.partner.areas[r].slots[g].time==d&&(e.partner.areas[r].slots[g]=o(p,d,s,e.partner.areas[r].slots[g]),g=e.partner.areas[r].slots.length,c=!0);c||e.partner.areas[r].slots.push(o(p,d,s,e.partner.areas[r].slots[g])),d+=60,c=!1}}else if(0>l-d){u=(l-d)/60+24;for(var h=0;l>=h;){for(var g=0;g<e.partner.areas[r].slots.length;g++)e.partner.areas[r].slots[g].time==h&&(e.partner.areas[r].slots[g]=o(p,h,s,e.partner.areas[r].slots[g]),g=e.partner.areas[r].slots.length,c=!0);c||e.partner.areas[r].slots.push(o(p,h,s,e.partner.areas[r].slots[g])),h+=60,c=!1}for(var v=d;1380>=v;){for(var g=0;g<e.partner.areas[r].slots.length;g++)e.partner.areas[r].slots[g].time==v&&(e.partner.areas[r].slots[g]=o(p,v,s,e.partner.areas[r].slots[g]),g=e.partner.areas[r].slots.length,c=!0);c||e.partner.areas[r].slots.push(o(p,v,s,e.partner.areas[r].slots[g])),v+=60,c=!1}}else u=0;r=e.partner.areas.length}t.updateArea(e.partner).then(function(a){t.getSlot(n,a).then(function(t){e.temp.selected_area_id=n.area_id._id;angular.copy(n);e.temp.timeSlots=t.response,i(),e.partner=a,e.temp.fromtime="",e.temp.totime="",e.temp.columnSlot="",$("#columnSlotModel").modal("hide")})})},e.removeArea=function(t,a){e.removedArea=t,e.removedAreaIndex=a,$("#removeAreaModal").modal("hide"),$("#confirmRemoveAreaModal").modal("show")
},e.removeExistingArea=function(){$("#confirmRemoveAreaModal").modal("hide"),e.partner.areas.splice(e.removedAreaIndex,1),t.updateArea(e.partner).then(function(t){i(),e.partner=t})},e.cancleRemoveArea=function(){$("#removeAreaModal").modal("show"),$("#confirmRemoveAreaModal").modal("hide")}};e.$inject=["$scope","partnerFactory","cityFactory","areaFactory"],angular.module("partner").controller("partnerAreaController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c){function p(){o.get().then(function(t){e.display.departments=t.response})}function u(){var t={};t.active=!0,t.specialservice=!0,r.get("",t).then(function(t){e.display.masterSpecialServices=t.response})}function m(){n.get().then(function(t){e.display.patientInstructions=t})}function g(){d.get().then(function(t){if(e.display.partners=t.response,e.search.partner_id&&e.paging){var a=[],s=e.search.partner_id.split(",");e.partner=d.checkIfExist_New(s,e.display.partners,"_id").Obj;for(var i=0;i<e.partner.length;i++)a.push(e.partner[i]._id),e.temp.PartnerList.push(e.partner[i]);e.temp.PartnerList=_.uniqBy(e.temp.PartnerList,"_id");var n=a.join(",");e.search.partner_id=n,e.temp.isPaging=!0,e.getlist()}})}function h(){l.get().then(function(t){e.display.tubes=t.response})}function v(){r.get().then(function(t){e.display.services=t})}e.search={},e.temp={},e.temp.PartnerList=[],e.search.selectall=!1;!function(){e.search={},e.search.category="TEST",e.activeModal={},e.display.partnerpackages=[],e.display.partnertests=[],e.display.partnerprofiles=[],e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,u(),m(),p(),g(),h(),v(),e.display.sampletypes=JSON.parse(sessionStorage.getItem("SampleType")).childs,sessionStorage.getItem("ServiceCategory")&&(e.display.ServiceCategory=JSON.parse(sessionStorage.getItem("ServiceCategory")).childs),sessionStorage.getItem("SpecialInstruction")&&(e.display.specialInstructions=JSON.parse(sessionStorage.getItem("SpecialInstruction")).childs),sessionStorage.getItem("searchPartnerTest")&&(e.search=JSON.parse(sessionStorage.getItem("searchPartnerTest")),sessionStorage.removeItem("searchPartnerTest")),sessionStorage.getItem("searchPartnerTestPaging")&&(e.paging=JSON.parse(sessionStorage.getItem("searchPartnerTestPaging")),sessionStorage.removeItem("searchPartnerTestPaging"))}();e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.changeCategory=function(){"TEST"!=e.search.category&&(e.search.department_id="",e.search.tube_id="",e.search.sampletype=""),e.getlist()},e.showComponents=function(t){var a={},s={service_id:t};a.services=angular.copy([s]),c.getUniqueTest(a).then(function(a){e.componemtModal={name:t.name,category:t.category},e.componemtModal.services=a.response,$("#showComponentsModal").modal("show")})},e.getlist=function(){e.search.partner_id?(e.temp.isPaging||e.initializePaging(),i.sortTest(e.paging,e.search).then(function(t){switch(e.search.category){case"PACKAGES":e.display.partnerpackages=t.response,e.display.partnertests=[],e.display.partnerprofiles=[];break;case"PROFILE":e.display.partnerprofiles=t.response,e.display.partnerpackages=[],e.display.partnertests=[];break;default:e.display.partnertests=t.response,e.display.partnerprofiles=[],e.display.partnerpackages=[]}e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount}),e.temp.isPaging=!1):(e.display.partnerpackages=[],e.display.partnertests=[],e.display.partnerprofiles=[])},e.edit=function(a,s){sessionStorage.setItem("searchPartnerTest",JSON.stringify(e.search)),sessionStorage.setItem("searchPartnerTestPaging",JSON.stringify(e.paging)),t.path(s?"/main/qapartnertest/"+a:"/main/partnertest/"+a)},e.setActive=function(t,a){"active"==t&&(e.activeModal.header="Active"),"deactive"==t&&(e.activeModal.header="Deactive"),"delete"==t&&(e.activeModal.header="Delete"),e.activeModal.displayText=a,$("#activeModal").modal("show")},e.deleteTest=function(t,a){sessionStorage.setItem("searchPartnerTest",JSON.stringify(e.search)),sessionStorage.setItem("searchPartnerTestPaging",JSON.stringify(e.paging)),i.deleteTest(t,a).then(function(a){if(e.display.partnertests.length)for(var s=0;s<e.display.partnertests.length;s++)t._id==e.display.partnertests[s]._id&&(e.display.partnertests[s]=a.response,g());if(e.display.partnerpackages.length)for(var s=0;s<e.display.partnerpackages.length;s++)t._id==e.display.partnerpackages[s]._id&&(e.display.partnerpackages[s]=a.response,g());if(e.display.partnerprofiles.length)for(var s=0;s<e.display.partnerprofiles.length;s++)t._id==e.display.partnerprofiles[s]._id&&(e.display.partnerprofiles[s]=a.response,g())})},e.pushPartner=function(t){if(e.temp.PartnerList.length){for(var a=!1,s=0;s<e.temp.PartnerList.length;s++)if(e.temp.PartnerList[s]._id==t._id){a=!0;break}0==a&&e.temp.PartnerList.push(t)}else e.temp.PartnerList.push(t);for(var i=[],s=0;s<e.temp.PartnerList.length;s++)i.push(e.temp.PartnerList[s]._id);e.search.partner_id=i.join(","),e.getlist(),e.partner={}},e.removePartner=function(t,a){var s=[];if(e.temp.PartnerList.splice(a,1),e.temp.PartnerList.length){for(var i=0;i<e.temp.PartnerList.length;i++)s.push(e.temp.PartnerList[i]._id);e.search.partner_id=s.join(","),e.getlist()}else e.search.active="",e.search.service_id="",e.search.text="",e.search.partner_id="",e.search.department_id="",e.search.sampletype="",e.search.tube_id="",e.search.si="",e.search.pi="",e.search.category="TEST",e.getlist()},e.selectALLPartner=function(t){if(1==t){e.display.partners||(e.temp.PartnerList=[]),e.display.partners.length&&(e.temp.PartnerList=[],e.temp.PartnerList=angular.copy(e.display.partners));for(var a=[],s=0;s<e.temp.PartnerList.length;s++)a.push(e.temp.PartnerList[s]._id);e.search.partner_id=a.join(","),e.getlist(),e.partner={}}0==t&&(e.temp.PartnerList=[],e.search.active="",e.search.service_id="",e.search.text="",e.search.partner_id="",e.search.department_id="",e.search.sampletype="",e.search.tube_id="",e.search.si="",e.search.pi="",e.display.partnerpackages=[],e.display.partnertests=[],e.display.partnerprofiles=[])}};e.$inject=["$scope","$location","$rootScope","$sce","partnertestFactory","patientinstructionFactory","testFactory","departmentFactory","partnerFactory","tubeFactory","orderFactory","$state"],angular.module("webApp").controller("partnerTestController",e)}(),angular.module("webApp").factory("partnertestFactory",["apiCall",function(e){function t(t){return e.httpPOST("partnerservices",t)}function a(t,a){var s="partnerservices?";return t&&(s=s+"&partner_id="+t),a&&(s=s+"&page="+a.currentPage+"&limit="+a.itemPerPage),e.httpGET(s)}function s(t,a){var s="";a.active=!0,t&&t.currentPage&&t.itemPerPage&&(s=s+"page="+t.currentPage+"&limit="+t.itemPerPage+"&"),a&&(a.servicename&&(s=s+"name="+a.servicename+"&"),a.partner_id&&(s=s+"partner_id="+a.partner_id+"&"),a.category&&(s=s+"category="+a.category+"&"),a.searchText&&(s=s+"name="+a.searchText+"&"),void 0!=a.active&&(s=s+"active="+a.active+"&"));var i="partnerservices?"+s;return e.httpGET(i)}function i(t){return e.httpPUT("partnerservices/"+t._id,t)}function n(t){return e.httpGET("partnerservices/"+t)}function r(t){var a="partnerservices?";return t.partner_id&&(a+="&partner_id="+t.partner_id),t.category&&("PROFILE"==t.category&&(a+="&category=TEST"),"TEST"==t.category&&(a+="&category=TEST")),e.httpGET(a)}function o(t,a){var s="partnerservices?";return t&&(s+="&page="+t.currentPage+"&limit="+t.itemPerPage),a.text&&(s+="&name="+a.text),a.category&&(s+="&category="+a.category),a.partner_id&&(s+="&partner_id="+a.partner_id),a.department_id&&(s+="&department_id="+a.department_id),a.tube_id&&(s+="&tube_id="+a.tube_id),a.sampletype&&(s+="&sampletype="+a.sampletype),a.active&&(s+="&active="+a.active),a.service_id&&(s+="&service_id="+a.service_id),a.si&&(s+="&si="+a.si),a.pi&&(s+="&ci="+a.pi),e.httpGET(s)}function d(t,a,s){var i="partnerservices?";return s&&(i+="&name="+s),a&&(i+="&partner_id="+a),t&&(i+="&page="+t.currentPage+"&limit="+t.itemPerPage),e.httpGET(i)}function l(t,a){var s="";return s="Delete"==a?s+"deletepartnerservices/"+t._id:s+"partnerservices/"+t._id,e.httpDELETE(s)}function c(t){var a="partnerservices?postsample=false&category=TEST";return t.active=!0,t&&(t.servicename&&(a+="&name="+t.servicename),t.partner_id&&(a+="&partner_id="+t.partner_id),t.active&&(a+="&active="+t.active)),e.httpGET(a)}function p(e){var t={},a={},s=[],i=[];e.forEach(function(e){if(e.test_id||(e.test_id={}),e.test_id.customerinstruction||(e.test_id.customerinstruction=""),"fasting"==e.test_id.customerinstructiontype){if(""!=e.test_id.customerinstruction){var t=e.test_id.customerinstruction.toUpperCase();s.push(t)}}else if(""!=e.test_id.customerinstruction){var a=e.test_id.customerinstruction.toUpperCase();i.push(a)}});var n=_.uniq(s,function(e){return e});t.customerinstruction=n.join(",\n"),t.customerinstructiontype="fasting";var r=_.uniq(i,function(e){return e});return a.customerinstruction=r.join(",\n"),a.customerinstructiontype="random",t.customerinstruction?t:a}function u(e){var t=[],a={};e.forEach(function(e){if(e.test_id.specialinstruction||(e.test_id.specialinstruction=""),""!=e.test_id.specialinstruction){var a=e.test_id.specialinstruction.toUpperCase();t.push(a)}});var s=_.uniq(t,function(e){return e});return a.specialinstruction=s.join(","),a}function m(t){return e.httpPOST("getcustomerinstructions",t)}function g(t){return e.httpPOST("getSuperSetServices",t)}return{add:t,get:a,update:i,getByID:n,getpartnerservices:s,getParterTest:r,sortTest:o,getPaginate:d,deleteTest:l,getPostsampleFalse:c,getFastingPatientIns:p,getSI:u,getcustomerinstructions:m,getSuperSetServices:g}}]),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c,p,u,m,g,h,v){function f(t){if(e.display.partnertest.childs=t,e.tempPiInstruction=[],e.temppiIns=[],e.profileInstruction=[],e.packpro=[],e.packtest=[],angular.forEach(e.display.partnertest.childs,function(e){void 0==e.customerinstructiontype&&(e.customerinstructiontype="random"),e.test_id&&e.test_id.childs.length&&angular.forEach(e.test_id.childs,function(e){void 0==e.customerinstructiontype&&(e.customerinstructiontype="random")})}),"PROFILE"==e.display.partnertest.category){if(e.display.partnertest.childs.length){var a=c.getFastingPatientIns(e.display.partnertest.childs);e.tempPiInstruction=a.customerinstruction.split(",\n"),e.profileInstruction=_.uniq(e.tempPiInstruction,function(e){return e}),e.piModal.customerinstruction=e.profileInstruction.join(",\n"),e.display.partnertest.customerinstruction=angular.copy(e.piModal.customerinstruction),e.display.partnertest.customerinstructiontype=a.customerinstructiontype}}else if("PACKAGES"==e.display.partnertest.category){var s="",i="",n="",r="";n="random",s="random";var o=c.getFastingPatientIns(e.display.partnertest.childs);i=o.customerinstruction,s=o.customerinstructiontype,angular.forEach(e.display.partnertest.childs,function(e){if(e.test_id.childs&&e.test_id.childs.length){var t=c.getFastingPatientIns(e.test_id.childs);r=t.customerinstruction,n=t.customerinstructiontype}}),"random"==s&&"random"==n&&(e.packpro=i.split(",\n"),e.packtest=r.split(",\n"),e.tempInst=e.packpro.concat(e.packtest),e.tempPiInstruction=_.uniq(e.tempInst,function(e){return e}),e.piModal.customerinstruction=e.tempPiInstruction.join(",\n"),e.display.partnertest.customerinstruction=angular.copy(e.piModal.customerinstruction),e.display.partnertest.customerinstructiontype="random"),"fasting"==s&&"fasting"==n&&(e.packpro=i.split(",\n"),e.packtest=r.split(",\n"),e.tempInst=e.packpro.concat(e.packtest),e.tempPiInstruction=_.uniq(e.tempInst,function(e){return e}),e.piModal.customerinstruction=e.tempPiInstruction.join(",\n"),e.display.partnertest.customerinstruction=angular.copy(e.piModal.customerinstruction),e.display.partnertest.customerinstructiontype="fasting"),"random"==s&&"fasting"==n&&(e.packtest=r.split(",\n"),e.tempPiInstruction=_.uniq(e.packtest,function(e){return e}),e.piModal.customerinstruction=e.tempPiInstruction.join(",\n"),e.display.partnertest.customerinstruction=angular.copy(e.piModal.customerinstruction),e.display.partnertest.customerinstructiontype="fasting"),"fasting"==s&&"random"==n&&(e.packpro=i.split(",\n"),e.tempPiInstruction=_.uniq(e.packpro,function(e){return e}),e.piModal.customerinstruction=e.tempPiInstruction.join(",\n"),e.display.partnertest.customerinstruction=angular.copy(e.piModal.customerinstruction),e.display.partnertest.customerinstructiontype="fasting")}else if("TEST"==e.display.partnertest.category){e.tempPiInstruction=e.display.partnertest.customerinstruction.split(",\n");for(var d=0;d<e.tempPiInstruction.length;d++)""!=e.tempPiInstruction[d]&&e.temppiIns.push(e.tempPiInstruction[d]);e.temppiIns=_.uniq(e.temppiIns,function(e){return e}),angular.forEach(e.temppiIns,function(){e.piModal.customerinstruction=e.temppiIns.join(",\n")})}}function y(t){if(e.display.partnertest.childs=t,e.specialIns=[],e.tempspclIns=[],"TEST"==e.display.partnertest.category){var a=e.display.partnertest.specialinstruction.replace(/[\n]/g,"");e.spclIns=a.split(",\n");for(var s=0;s<e.spclIns.length;s++)""!=e.spclIns[s]&&e.tempspclIns.push(e.spclIns[s]);e.specialIns=_.uniq(e.tempspclIns,function(e){return e}),e.specialIns.length&&(e.siModal.specialinstruction=e.specialIns.join(",\n"),e.display.partnertest.specialinstruction=e.specialIns.join(","))}if("PROFILE"==e.display.partnertest.category&&e.display.partnertest.childs.length){var i=c.getSI(e.display.partnertest.childs),a=i.specialinstruction.replace(/[\n]/g,"");e.spclIns=a.split(","),e.specialIns=_.uniq(e.spclIns,function(e){return e}),e.siModal.specialinstruction=e.specialIns.join(",\n"),e.display.partnertest.specialinstruction=e.specialIns.join(",")}if("PACKAGES"==e.display.partnertest.category){var n="",r="";e.packpro=[],e.packtest=[];var o=c.getSI(e.display.partnertest.childs),a=o.specialinstruction.replace(/[\n]/g,"");n=a,angular.forEach(e.display.partnertest.childs,function(e){if(e.test_id.childs&&e.test_id.childs.length){var t=c.getSI(e.test_id.childs),a=t.specialinstruction.replace(/[\n]/g,"");r=a}}),e.packpro=n.split(","),e.packtest=r.split(","),e.spclIns=e.packpro.concat(e.packtest),e.specialIns=_.uniq(e.spclIns,function(e){return e}),e.siModal.specialinstruction=e.specialIns.join(",\n"),e.display.partnertest.specialinstruction=e.specialIns.join(",")}}function b(t){var a=s.defer(),i={};return i.category="TEST",i.partner_id=e.partner._id,i.servicename=t,c.getPostsampleFalse(i).then(function(s){if(e.display.postSampleServices=s.response,e.display.postSampleServices){var i=e.display.postSampleServices.filter(function(e){return e.name&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return console.dir(e.display.postSampleServices),i.length&&i.forEach(function(t,a){t._id==e.display.partnertest._id&&i.splice(a,1)}),console.dir(i),a.resolve(i)}return i=[],alert("No Test Available"),a.resolve(i)}),a.promise}function w(t,a){if(e.display.partnertest.childs)for(var s=0;s<e.display.partnertest.childs.length;s++)if(e.display.partnertest.childs[s][t]&&e.display.partnertest.childs[s][t]._id==a._id)return!0}function x(t){var a,i=s.defer(),n={};return e.display.partnertest.category&&(n.category="PACKAGES"==e.display.partnertest.category?null:"TEST"),n.partner_id=e.partner._id,n.servicename=t,c.getpartnerservices(null,n).then(function(s){return s?(e.partnertest=s.response,a=e.partnertest.filter(function(e){if(e.code&&e.name){if(-1!==e.code.toLowerCase().indexOf(t.toLowerCase()))return!0;if(-1!==e.name.toLowerCase().indexOf(t.toLowerCase()))return!0}}),a.length&&a.forEach(function(t,s){t._id==e.display.partnertest._id&&a.splice(s,1)}),i.resolve(a)):(a=[],alert("No Test Available"),i.resolve(a))}),i.promise}function k(){l.get().then(function(t){e.display.specailneed=t.response})}function P(){if(sessionStorage.getItem("ServiceCategory")){e.display.ServiceCategory=[];var t=JSON.parse(sessionStorage.getItem("ServiceCategory"));e.display.ServiceCategory=t.childs}}function S(){u.get().then(function(t){e.display.departments=t.response})}function O(a){c.getByID(a).then(function(a){e.display.partnertest=a.response,e.sampletypes.forEach(function(t){e.display.partnertest.sampletype&&t.displayname.toLowerCase()==e.display.partnertest.sampletype.toLowerCase()&&(e.display.partnertest.sampletype=t.displayname)}),e.display.partnertest.price||(e.display.partnertest.price={}),e.aliasTag=a.response.alias,e.postsampleServices=a.response.postservices,e.partner=e.display.partnertest.partner_id,t.partner_id=a.response.partner_id._id,e.setDescription()})}function A(){h.get().then(function(t){e.display.tubes=t.response})}function C(e){"PROFILE"==e.category?e.masterservice={}:"TEST"==e.category&&(e.childs=[]),c.update(e).then(function(){})}function D(t){"PROFILE"==t.category?t.masterservice={}:"TEST"==t.category&&(t.childs=[]),c.add(t).then(function(){e.successFlag=!0,e.display.partnertest={},e.partner=void 0})}function T(){m.get().then(function(t){e.display.partners=t.response})}function M(){d.get().then(function(t){e.display.patientinstruction=t,e.display.SpecailInstruction=[];var a=JSON.parse(sessionStorage.getItem("SpecialInstruction"));e.display.SpecailInstruction=a.childs})}e.temp={},e.temp.services=[],e.postsampleServices=[];var j;e.temp.searchTubeLis=[],e.tempPiInstruction=[],e.spclIns=[],e.priceModal={},e.priceModal.price={},e.piModal={},e.flag,e.tempSERVICES=[],e.currentService={},e.siModal={},e.display.partnertest={},e.display.partnertest.price={},e.display.partnertest.childs=[],e.temp.specialIN=[],e.sampletypes=JSON.parse(sessionStorage.getItem("SampleType")).childs,function(){if(P(),S(),T(),sessionStorage.getItem("SpecialInstruction")){var t=JSON.parse(sessionStorage.getItem("SpecialInstruction"));e.display.SpecailInstruction=t.childs}e.display.patientinstruction={},e.display.clienttests={},e.display.clienttests.filter={},e.display.postSampleServices={},e.display.child={},A(),M(),"new"!=r.Id?(O(r.Id),e.partner={},e.partner._id=r.Id):(e.display.partnertest.masterservice={},e.display.partnertest.masterservice.tubes=[]),k()}(),e.searchPostsampleServices=function(e){var t=b(e);return t},e.clearPostTest=function(){e.postsampleServices.length&&(e.postsampleServices=[])},e.setOptions=function(t){e.display.child.test_id&&(e.display.child.department_id=e.display.child.test_id.masterservice.department_id,e.display.child.tubes=e.display.child.test_id.masterservice.tubes);var a=!1,s=!1;e.temp.add_ModeFlag?(e.display.child.test_id&&(a=w("test_id",e.display.child.test_id)),a&&(alert("Test Already Present"),$("#componentAddModal").modal("hide")),e.display.child.service_id&&(s=w("service_id",e.display.child.service_id),s&&(alert("Service Already Present"),$("#componentAddModal").modal("hide")))):("service"==t&&e.display.child.service_id&&(s=w("service_id",e.display.child.service_id),s&&(alert("Service Already Present"),$("#componentAddModal").modal("hide"))),"test"==t&&(e.display.child.test_id&&(a=w("test_id",e.display.child.test_id)),a&&(alert("Test Already Present"),$("#componentAddModal").modal("hide"))))},e.editComponent=function(t,a){$("#componentAddModal").modal("show"),e.display.child=angular.copy(t),e.display.child.service_id&&(e.temp.idBeforeEdit=angular.copy(e.display.child.service_id._id),e.display.service_id=angular.copy(e.display.child.service_id._id)),e.temp.selectedIndex=a,e.temp.add_ModeFlag=!1},e.addComponent=function(){e.remove={},$("#componentAddModal").modal("show"),e.temp.services=[],e.display.partnertest.childs||(e.display.partnertest.childs=[]),e.display.partnertest.childs.forEach(function(t){if(t.test_id._id){var a=angular.copy(t.test_id);e.temp.services.push(a)}})},e.showComponents=function(t){var a={},s={service_id:t};a.services=angular.copy([s]),g.getUniqueTest(a).then(function(a){e.componemtModal={name:t.name,category:t.category},e.componemtModal.services=a.response,$("#showComponentsModal").modal("show")})},e.showPPAddButton=function(t){var a=[];return t&&t.postsample?(t.postservices.forEach(function(t){var s=_.find(e.display.partnertest.childs,function(e){return e.test_id._id==t._id});s&&a.push(s)}),t.postservices.length==a.length?!1:!0):!1},e.addPPTest=function(t){var a=angular.copy(e.display.partnertest.childs),s=[],i={};e.uniqueServices=[];for(var n=0;n<a.length;n++){var r={};r.service_id=a[n].test_id,s.push(r)}i.services=s,g.getUniqueTest(i).then(function(a){e.uniqueServices=a.response,t.forEach(function(t){var a=!0;e.uniqueServices.forEach(function(s){if(s._id==t._id&&(a=!1),a){var i={};i.test_id=t,e.display.partnertest.childs.push(i)}})}),e.display.partnertest.childs=_.uniqBy(e.display.partnertest.childs,"test_id._id")})},e.saveComponent=function(){e.display.partnertest.childs=[],e.temp.services.forEach(function(t){var a={test_id:t};e.display.partnertest.childs.push(a)}),e.display.partnertest.childs.length&&(f(e.display.partnertest.childs),y(e.display.partnertest.childs)),$("#componentAddModal").modal("hide"),e.boolExist=!0,e.display.partnertest.partner_id&&C(e.display.partnertest)},e.checkTestCat=function(){return"TEST"==e.display.partnertest.category?e.display.partnertest.masterservice.department_id&&e.display.partnertest.masterservice.tubes.length?!1:!0:!1},e.checkProPackCat=function(){return"PROFILE"==e.display.partnertest.category||"PACKAGES"==e.display.partnertest.category?e.display.partnertest.childs.length?!1:!0:!1},e.setMasterTest=function(t){e.display.partnertest.childs=[],e.partner?("PROFILE"==t||"PACKAGES"==t)&&(e.display.partnertest.masterservice.service_id=null,e.display.partnertest.masterservice.department_id=null,e.display.partnertest.masterservice.tubes=null,e.display.partnertest.postsample=null,e.postsampleServices=[]):(alert("Select Partner"),e.display.partnertest.category=null)},e.Save=function(t){e.display.partnertest.alias=[],e.display.partnertest.postservices=[],angular.forEach(e.aliasTag,function(t){var a=t.text;e.display.partnertest.alias.push(e.display.partnertest._id?a:a)}),angular.forEach(e.postsampleServices,function(t){e.display.partnertest.postservices.push(t._id)}),e.display.partnertest._id?(C(e.display.partnertest),e.display.partnertest={},e.aliasTag=[],e.temp.patientinstruction=null,e.display.partnertest.customerinstruction=null,e.temp.specialinstruction=null,e.display.partnertest.specialinstruction=null,e.display.partnertest.description=null):(e.display.partnertest.partner_id=e.partner._id,D(e.display.partnertest),e.display.partnertest={},e.aliasTag=[],e.temp.patientinstruction=null,e.display.partnertest.customerinstruction=null,e.temp.specialinstruction=null,e.display.partnertest.specialinstruction=null,e.display.partnertest.description=null),a.go("qa"==t?"main.qanewpartnertest":"main.newpartnertest"),M(),e.successFlag=!0},e.deleteComponent=function(e){j=e,$("#ConfirmPopupDeleteDropPoint").modal("show")},e.confirmDeleteComponent=function(){e.display.partnertest.childs.splice(j,1),e.display.partnertest._id&&C(e.display.partnertest),$("#ConfirmPopupDeleteDropPoint").modal("hide")},e.setPartner=function(e){getPartnerTest(e)},e.checkPrice=function(){if(e.display.partnertest)try{return(e.display.partnertest.price.mrp||e.display.partnertest.price.mrp>=0)&&(e.display.partnertest.price.selling||e.display.partnertest.price.selling>=0)?!1:!0}catch(t){}},e.showPriceModal=function(t){"qa"==t?$("#qapriceModal").modal("show"):$("#priceModal").modal("show"),e.priceModal.price=angular.copy(e.display.partnertest.price)},e.savePrice=function(t){"qa"==t?$("#qapriceModal").modal("hide"):$("#priceModal").modal("hide"),e.display.partnertest.price=angular.copy(e.priceModal.price),e.display.partnertest._id&&C(e.display.partnertest)},e.showPiModal=function(t){if(e.display.partnertest.childs.length){if("PROFILE"==e.display.partnertest.category||"PACKAGES"==e.display.partnertest.category){var a={};a.service_id={},a.service_id._id=e.display.partnertest._id,a.service_id.category=e.display.partnertest.category,a.service_id.childs=e.display.partnertest.childs,a.service_id.partner_id=e.partner;var s=[];s.push(a);var i={};i.services=s,c.getcustomerinstructions(i).then(function(a){e.display.partnertest.customerinstructionarray=a.patientInstructions,"qa"==t?$("#qapiModal").modal("show"):$("#piModal").modal("show")})}}else{"qa"==t?$("#qapiModal").modal("show"):$("#piModal").modal("show"),e.display.partnertest.customerinstructions||(e.display.partnertest.customerinstructions=[]),e.piModal.customerinstructions=angular.copy(e.display.partnertest.customerinstructions),e.temp.piids=[];for(var n=0;n<e.display.patientinstruction.length;n++)for(var r=0;r<e.piModal.customerinstructions.length;r++)e.display.patientinstruction[n]._id==e.piModal.customerinstructions[r]&&e.temp.piids.push(e.display.patientinstruction[n])}if(delete e.temp.patientinstruction,e.temppiIns=[],e.piModal.customerinstructiontype||(e.piModal.customerinstructiontype="random"),e.display.partnertest.customerinstruction){var o=[],d=angular.copy(e.display.partnertest.customerinstruction);o=d.split(",\n");for(var r=0;r<o.length;r++)""!=o[r]&&e.temppiIns.push(o[r]);e.piModal.customerinstruction=e.temppiIns.join(",\n"),e.tempPiInstruction=angular.copy(e.temppiIns)}e.display.partnertest.customerinstructiontype&&(e.piModal.customerinstructiontype=angular.copy(e.display.partnertest.customerinstructiontype)),e.display.partnertest._id||"TEST"!=e.display.partnertest.category||e.display.partnertest.customerinstruction||(delete e.temp.patientinstruction,e.piModal.customerinstruction="",e.tempPiInstruction=[])},e.savePI_old=function(){e.display.partnertest.customerinstruction=angular.copy(e.piModal.customerinstruction),e.display.partnertest.customerinstructiontype=angular.copy(e.piModal.customerinstructiontype),e.display.partnertest._id&&C(e.display.partnertest),$("#piModal").modal("hide")},e.savePI=function(){e.display.partnertest.customerinstructions=angular.copy(e.piModal.customerinstructions),e.display.partnertest.customerinstructiontype=angular.copy(e.piModal.customerinstructiontype),e.display.partnertest._id&&C(e.display.partnertest),$("#piModal").modal("hide")},e.clearDataPI_old=function(){null!=e.piModal.customerinstruction&&(delete e.temp.patientinstruction,e.piModal.customerinstruction="",e.tempPiInstruction=[])},e.clearDataPI=function(){e.piModal.customerinstructions=[],e.temp.piids=[],e.temp.patientinstruction=""},e.showSiModal=function(t){if(e.display.partnertest.childs.length){if("PROFILE"==e.display.partnertest.category||"PACKAGES"==e.display.partnertest.category){var a={};a.service_id={},a.service_id._id=e.display.partnertest._id,a.service_id.category=e.display.partnertest.category,a.service_id.childs=e.display.partnertest.childs,a.service_id.partner_id=e.partner;var s=[];s.push(a);var i={};i.services=s,c.getcustomerinstructions(i).then(function(a){e.display.partnertest.specialinstructionarray=a.specialInstructions,"qa"==t?$("#qasiModal").modal("show"):$("#siModal").modal("show")})}}else{"qa"==t?$("#qasiModal").modal("show"):$("#siModal").modal("show"),e.display.partnertest.specialinstructions||(e.display.partnertest.specialinstructions=[]),e.siModal.specialinstructions=angular.copy(e.display.partnertest.specialinstructions),e.temp.siids=[];for(var n=0;n<e.display.SpecailInstruction.length;n++)for(var r=0;r<e.siModal.specialinstructions.length;r++)e.display.SpecailInstruction[n]._id==e.siModal.specialinstructions[r]&&e.temp.siids.push(e.display.SpecailInstruction[n])}if(e.temp.specialinstruction="",e.display.partnertest.specialinstruction){var o=[];e.splIns=[];var d=angular.copy(e.display.partnertest.specialinstruction),l=d.replace(/[\n]/g,"");o=l.split(",");for(var r=0;r<o.length;r++)""!=o[r]&&e.splIns.push(o[r]);e.siModal.specialinstruction=e.splIns.join(",\n"),e.spclIns=angular.copy(e.splIns)}e.display.partnertest._id||"TEST"!=e.display.partnertest.category||e.display.partnertest.specialinstruction||(e.temp.specialinstruction="",e.siModal.specialinstruction="",e.spclIns=[])},e.saveSI_old=function(){var t=angular.copy(e.siModal.specialinstruction),a="",a=t.replace(/[\n]/g,"");e.display.partnertest.specialinstruction=angular.copy(a),e.display.partnertest._id&&C(e.display.partnertest),$("#siModal").modal("hide")},e.saveSI=function(){e.display.partnertest.specialinstructions=angular.copy(e.siModal.specialinstructions),e.display.partnertest._id&&C(e.display.partnertest),$("#siModal").modal("hide")},e.clearDataSI_old=function(){null!=e.siModal.specialinstruction&&(e.temp.specialinstruction="",e.siModal.specialinstruction="",e.spclIns=[])},e.clearDataSI=function(){e.siModal.specialinstructions=[],e.temp.siids=[],e.temp.specialinstruction=""},e.saveDesc=function(){e.display.partnertest._id&&C(e.display.partnertest),$("#descModal").modal("hide")},e.searchTube=function(t){var a=e.display.tubes.filter(function(e){if(e.type&&e.company){if(-1!==e.type.toLowerCase().indexOf(t.toLowerCase()))return!0;if(-1!==e.company.toLowerCase().indexOf(t.toLowerCase()))return!0}});return e.temp.searchTubeList=a,a},e.addTubes=function(t){e.display.partnertest.masterservice||(e.display.partnertest.masterservice={}),e.display.partnertest.masterservice.tubes||(e.display.partnertest.masterservice.tubes=[]),e.display.partnertest.masterservice.tubes.push(t),e.temp.searchTubeList=[],e.temp.serchtubeText=""},e.removetubes=function(t,a){e.display.partnertest.masterservice.tubes.splice(a,1)},e.searchMasterService=function(t){p.getmasterServices(t).then(function(t){e.temp.searchmasterserviceslist=t.response})},e.addmasterservices=function(t){e.display.partnertest.masterservice||(e.display.partnertest.masterservice={}),e.display.partnertest.masterservice.service_id||(e.display.partnertest.masterservice.service_id={}),e.display.partnertest.masterservice.service_id=t._id,e.temp.searchmasterserviceslist=[],e.temp.services=" ",e.display.partnertest.masterservice.service_id=t},e.removeMasterService=function(){delete e.display.partnertest.masterservice.service_id},e.searchTest=function(t){e.boolExist=!0;var a=x(t);return a},e.onAddingService=function(t){e.currentService=t,e.temp.category=t.category;var a={},s={};a.serviceIdtoadd=t._id,a.serviceIds=[];for(var i=0;i<e.temp.services.length;i++)a.serviceIds.push(e.temp.services[i]._id);var n={};n=a,c.getSuperSetServices(n).then(function(t){s=t,0==s.fewExist&&(e.flag=s.fewExist,e.temp.services=s.services,e.message=s.message,e.message?v(function(){$("#testExistsOK").modal("show")},500):v(function(){},500)),1==s.fewExist&&(e.flag=s.fewExist,e.temp.services.splice(e.temp.services.length-1,1),e.message=s.message,e.messageSome=s.messageSome,e.tempSERVICES=s.services,v(function(){$("#testExistsYES").modal("show")},500))})},e.setPatientInstructionText_old=function(t){e.temppiIns=[];var a=t.description.toUpperCase();e.tempPiInstruction.push(a);for(var s=0;s<e.tempPiInstruction.length;s++)""!=e.tempPiInstruction[s]&&e.temppiIns.push(e.tempPiInstruction[s]);e.tempPi=_.uniq(e.temppiIns,function(e){return e}),angular.forEach(e.tempPi,function(){e.piModal.customerinstruction=e.tempPi.join(",\n")})},e.setPatientInstructionText=function(t){var a=_.findIndex(e.piModal.customerinstructions,function(e){return e==t._id});0>a?e.piModal.customerinstructions.push(t._id):(e.temp.patientinstruction="",alert("Instruction already added")),e.temp.piids=[];for(var s=0;s<e.display.patientinstruction.length;s++)for(var i=0;i<e.piModal.customerinstructions.length;i++)e.display.patientinstruction[s]._id==e.piModal.customerinstructions[i]&&e.temp.piids.push(e.display.patientinstruction[s])},e.setDescription=function(){e.display.partnertest.masterservice.service_id&&(e.display.partnertest.description=e.display.partnertest.masterservice.service_id.description,e.display.sampletype=e.display.partnertest.masterservice.service_id.description)},e.setComponentSampleType=function(){angular.forEach(e.display.services,function(t){e.display.service_id==t._id&&(e.display.componentSampltetype=t.sampletype)})},e.setSpecailNeddDescription_old=function(t){e.tempsplIns=[];t.toUpperCase();e.spclIns.push(t);for(var a=0;a<e.spclIns.length;a++)""!=e.spclIns[a]&&e.tempsplIns.push(e.spclIns[a]);e.splIns=_.uniq(e.tempsplIns,function(e){return e
}),angular.forEach(e.splIns,function(){e.siModal.specialinstruction=e.splIns.join(",\n")})},e.siModal.specialinstructions=[],e.setSpecailNeddDescription=function(t){var a=_.findIndex(e.siModal.specialinstructions,function(e){return e==t._id});0>a?e.siModal.specialinstructions.push(t._id):(e.temp.specialinstruction="",alert("Instruction already added")),e.temp.siids=[];for(var s=0;s<e.display.SpecailInstruction.length;s++)for(var i=0;i<e.siModal.specialinstructions.length;i++)e.display.SpecailInstruction[s]._id==e.siModal.specialinstructions[i]&&e.temp.siids.push(e.display.SpecailInstruction[s])},e.partnertest=function(){e.partner._id&&c.getParterTest(e.partner._id).then(function(t){e.partnertest=t.response})},e.testExists=function(){$("#testExistsOK").modal("hide"),$("#componentAddModal").modal("show")},e.addService=function(){e.temp.services=e.tempSERVICES,$("#testExistsYES").modal("hide"),e.message?$("#testExistsOK").modal("show"):$("#componentAddModal").modal("show")},e.cancelService=function(){$("#testExistsYES").modal("hide"),$("#componentAddModal").modal("show")}};e.$inject=["$scope","$rootScope","$state","$q","$http","clienttestFactory","$stateParams","$sce","patientinstructionFactory","specialneedFactory","partnertestFactory","testFactory","departmentFactory","partnerFactory","orderFactory","tubeFactory","$timeout"],angular.module("webApp").controller("partnertestObjController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(){s.get(e.paging).then(function(t){console.log(t),e.display.servicerequests=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,console.log(t)})}!function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,i()}(),e.get=function(){i()},e.selectServiceRequest=function(e){console.log(e),s.putReq(e),a.go("main.serviceRequestAdd")}};e.$inject=["$scope","$location","$state","servicerequestFactory"],angular.module("webApp").controller("servicerequestlistController",e)}(),angular.module("webApp").factory("servicerequestFactory",["apiCall",function(e){function t(){return this.selectedRequest}function a(e){this.selectedRequest=e}function s(){this.selectedRequest=void 0}function i(t){return e.httpGET(t?"servicerequests?page="+t.currentPage+"&limit="+t.itemPerPage:"servicerequests")}return{getReq:t,putReq:a,delReq:s,get:i}}]),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c,p,u,m,g,h,v,f){function y(){if(e.call._id||e.requeststatus.call_id){e.requeststatus.call_id&&(e.call._id=e.requeststatus.call_id);var t=o.updateCall(e.call);t.then(function(){o.currentcall=void 0,e.call={},e.requeststatus={},e.whenRequestStatus=!1})}else{var t=o.createCall(e.call);t.then(function(){o.currentcall=void 0,e.call={},e.requeststatus={},e.whenRequestStatus=!1})}}$('[data-toggle="tooltip"]').tooltip(),e.user=n,e.patient={},e.validDigit=/^[0-9]*$/,e.addaddress={},$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.datePickerPopup={},e.datePickerPopup.minDate=new Date,e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.validTextName=/^[ A-Za-z0-9_.']*$/,e.EmailValid=/^[a-z]+[a-z0-9._]+@[a-z-]+\.[a-z.]{2,5}$/,e.validName=/^[ A-Za-z0-9_.']*$/,e.validmobilenumber=/^[0-9](?!.*(\d)\1{13})\d{9,}$/,e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.requeststatus={},e.showAddBtn=!0,e.temp={},e.temp.services=[],e.servicerequest={},e.temp.hideDay=!1,e.temp.hideWeek=!1,e.searchObj={},e.searchPatientObj={},e.searchServiceObj={},e.searchPriceObj={},e.searchPriceObj.TestListArray=[],e.service_sm={},e.service_sm.service_id={};var b=new Date;b=b.setHours("00"),b=new Date(b).setMinutes("00"),b=new Date(b).setSeconds("00"),b=new Date(b).setMilliseconds("000"),e.searchObj.searchDate=new Date(b),e.user.userdata.provider_id&&(e.searchObj.provider_id=e.user.userdata.provider_id._id),e.timeSlots=JSON.parse(h),e.timeSlots30=JSON.parse(v),e.timeSlots15=JSON.parse(f),e.call={},e.call.inout="incoming",e.call.type="servicerequest",e.call.client_id={},e.call.client_id.demography={},e.call.client_id.demography.residentialaddress={},e.call.client_id.demography.servicedeliveryaddress={},e.call.client_id.demography.addresses=[],e.call.services=[],e.call.paymentdetails={},e.getNumber=function(e){return e?new Array(e):void 0},e.getSessionStorage=function(){e.AddressType=JSON.parse(sessionStorage.getItem("AddressType")),e.calltypelist={_id:"55756fa6a34c6138090ad8f7",name:"calltype",displayname:"Call Type",__v:0,source:"webhcm",iseditable:!1,optionlist:[{code:"enquiry",displayname:"Enquiry",smsdisplayname:"Enquiry",_id:"5609685721eec91800b09973",dimensions:[],active:!1},{code:"generalenquiry",displayname:"General Enquiry",smsdisplayname:"General Enquiry",_id:"5609685721eec91800b09972",dimensions:[],active:!0},{code:"caregiverenquiry",displayname:"Care Giver Enquiry",smsdisplayname:"Care Giver",_id:"5609685721eec91800b09971",dimensions:[],active:!0},{code:"dentalenquiry",displayname:"Dental Enquiry",smsdisplayname:"Dental",_id:"5609685721eec91800b09970",dimensions:[],active:!0},{code:"physioenquiry",displayname:"Physio Enquiry",smsdisplayname:"Physio",_id:"5609685721eec91800b0996f",dimensions:[],active:!0},{code:"strokecareenquiry",displayname:"Stroke Care Enquiry",smsdisplayname:"Stroke Care",_id:"5609685721eec91800b0996e",dimensions:[],active:!0},{code:"dementiaenquiry",displayname:"Dementia Enquiry",smsdisplayname:"Dementia",_id:"5609685721eec91800b0996d",dimensions:[],active:!0},{code:"nursingenquiry",displayname:"Nursing Enquiry",smsdisplayname:"Nursing",_id:"5609685721eec91800b0996c",dimensions:[],active:!0},{code:"physicianenquiry",displayname:"Physician Enquiry",smsdisplayname:"Physician",_id:"5609685721eec91800b0996b",dimensions:[],active:!0},{code:"oncologyenquiry",displayname:"Oncology Enquiry",smsdisplayname:"Oncology",_id:"5609685721eec91800b0996a",dimensions:[],active:!0},{code:"feedback",displayname:"Feedback",smsdisplayname:"Feedback",_id:"5609685721eec91800b09969",dimensions:[],active:!0},{code:"servicerequest",displayname:"Service Request",smsdisplayname:"Service Request",_id:"5609685721eec91800b09968",dimensions:[],active:!0},{code:"complain",displayname:"Complain",smsdisplayname:"Complain",_id:"5609685721eec91800b09967",dimensions:[],active:!0},{code:"complaintresolution",displayname:"Complaint Resolution",smsdisplayname:"Complaint Resolution",_id:"5609685721eec91800b09966",dimensions:[],active:!0},{code:"requeststatus",displayname:"Request Status",smsdisplayname:"Request Status",_id:"5609685721eec91800b09965",dimensions:[],active:!0},{code:"others",displayname:"Others",smsdisplayname:"Others",_id:"5609685721eec91800b09964",dimensions:[],active:!0},{code:"jobenquiry",displayname:"Job enquiry",smsdisplayname:"Job",_id:"5661323523fc1a38122adae5",dimensions:[],active:!0},{code:"equipmentenquiry",displayname:"Equipment enquiry",smsdisplayname:"Equipment",_id:"5661323f23fc1a38122adae6",dimensions:[],active:!0},{code:"membership/renewalenquiry",displayname:"Membership/Renewal enquiry",smsdisplayname:"Membership/Renewal",_id:"5661324523fc1a38122adae7",dimensions:[],active:!0}],_Deleted:!1},e.relationship={_id:"5582a808e280b8f40f6a887b",name:"relationship",displayname:"Relationship",optionlist:[{code:"father",displayname:"Father",_id:"55b4a34e99af3b0e003661bb",active:!0},{code:"mother",displayname:"Mother",_id:"55b4a34e99af3b0e003661ba",active:!0},{code:"brother",displayname:"Brother",_id:"55b4a34e99af3b0e003661b9",active:!0},{code:"sister",displayname:"Sister",_id:"55b4a34e99af3b0e003661b8",active:!0},{code:"self",displayname:"Self",_id:"55b7229c6727ef0c007f6831",active:!0},{code:"son-in-law",displayname:"Son-in-law",_id:"55b7229c6727ef0c007f6830",active:!0},{code:"daughter-in-law",displayname:"Daughter-in-law",_id:"55b7229c6727ef0c007f682f",active:!0},{code:"mother-in-law",displayname:"Mother-in-law",_id:"55b7229c6727ef0c007f682e",active:!0},{code:"friend",displayname:"Friend",_id:"55b722db6727ef0c007f6834",active:!0},{code:"wife",displayname:"Wife",_id:"55b722db6727ef0c007f6833",active:!0},{code:"husband",displayname:"Husband",_id:"55b722db6727ef0c007f6832",active:!0},{code:"nhhs staff",displayname:"NHHS Staff",_id:"55b725866727ef0c007f6841",active:!0}],source:"webhcm"},e.ReferredList={_id:"558a55ca69f95aa00e919bdc",name:"referralsource",displayname:"Referral Source",optionlist:[{code:"newspaper",displayname:"Newspaper",active:!0},{code:"television",displayname:"Television",active:!0},{code:"wordofmouth",displayname:"Word Of Mouth",active:!0},{code:"web",displayname:"Web",active:!0},{code:"doctorreferral",displayname:"Doctor Referral",active:!0},{code:"internalreferral",displayname:"Internal Referral",active:!0},{code:"customerreference",displayname:"Customer Reference",active:!0},{code:"other",displayname:"Other",active:!0}],source:"webhcm"}},e.newPatient=function(){e.PatientList=[],e.patient={},e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[],e.patient.demography.agetype="years",$("#AddPatientObjectView").modal("show")},e.SearchPatientByName=function(){function t(e){var t={externalId:void 0,clientcode:e.PTNT_CD,demography:{salutation:e.PTNT_TITTLE,firstname:e.FIRST_NAME,lastname:e.LAST_NAME,assumeddob:"Y"==e.ACTUAL_DOB_FLAG?!1:!0,dob:moment(e.DOB).toDate(),email:e.EMAIL_ID?e.EMAIL_ID.toLowerCase():"",fullname:e.FIRST_NAME+" "+e.LAST_NAME,age:moment().diff(moment(e.DOB),"years"),agetype:"years",gender:"M"==e.GENDER?"male":"F"==e.GENDER?"female":"thirdgender",mobilenumber:e.MOBILE_NO},extra:{CITY:e.CITY,ADDRESS1:e.ADDRESS1,ADDRESS2:e.ADDRESS2,STATE:e.STATE,COUNTRY:e.COUNTRY,ZIP:e.ZIP}};return t}if(e.searchPatientObj&&e.searchPatientObj.searchText&&e.searchPatientObj.searchText.length>=3){var a=e.searchPatientObj.searchText.toUpperCase(),s=d.getPatientListFromLIMS(a,!0);s.then(function(a){var s=JSON.parse(a);return"200"!=s.code?(alert("Not Found"),e.PatientList=[]):void(e.PatientList=s.ptntdetails.map(t))})}},e.SelectPatient=function(t){var a=d.getByClientCode(t.clientcode,!0);a.then(function(a){if(a){e.PatientList=[],e.call.client_id=angular.copy(a),e.patient=e.call.client_id,e.temppatient=angular.copy(a),e.call.name=angular.copy(e.patient.demography.fullname),e.call.contactnumber=angular.copy(e.patient.demography.fullname),e.call.email=angular.copy(e.patient.demography.email);for(var s=0;s<e.patient.demography.addresses.length;s++)"true"==e.patient.demography.addresses[s].servicedeliveryaddress&&(e.call.servicedeliveryaddress=e.patient.demography.addresses[s],e.call.city_id=angular.copy(e.patient.demography.addresses[s].city_id),e.call.area_id=angular.copy(e.patient.demography.addresses[s].area_id),e.call.pincode=angular.copy(e.patient.demography.addresses[s].pincode),e.pincodes=e.call.area_id.pincodes,e.tempcity=angular.copy(e.patient.demography.addresses[s].city_id),e.temparea=angular.copy(e.patient.demography.addresses[s].area_id),e.call.fromdate="",e.availableStaff=[]);e.searchPatientObj={}}else{if(e.PatientList=[],e.patient={},e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.clientcode=t.clientcode,e.patient.demography=t.demography,e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[],e.patient.extra=t.extra,t.extra.CITY){var i=_.find(e.cityList,function(e){return e.name.toUpperCase()==t.extra.CITY.toUpperCase()});e.tempaddcity=angular.copy(i),e.selectAddCity(i),e.getAddArea(e.tempaddcity._id)}$("#AddPatientObjectView").modal("show")}})},e.openAddAddress=function(){$("#AddressObjectViewForOrder").modal("show")},e.editPatient=function(t){e.call.client_id=angular.copy(t),e.call.client_id.demography.weight=parseInt(e.call.client_id.demography.weight),e.call.client_id.demography.height=parseInt(e.call.client_id.demography.height),e.patient=angular.copy(t),$("#AddPatientObjectView").modal("show")},e.checkServiceAddress=function(t,a){e.call.servicedeliveryaddress=t;for(var s=0;s<e.temppatient.demography.addresses.length;s++)s!=a?(e.temppatient.demography.addresses[s].servicedeliveryaddress="false",e.patient.demography.addresses[s].servicedeliveryaddress="false"):(e.temppatient.demography.addresses[a].servicedeliveryaddress="true",e.patient.demography.addresses[s].servicedeliveryaddress="true",e.call.city_id=angular.copy(e.temppatient.demography.addresses[s].city_id),e.call.area_id=angular.copy(e.temppatient.demography.addresses[s].area_id),e.call.pincode=angular.copy(e.temppatient.demography.addresses[s].pincode),e.pincodes=e.call.area_id.pincodes,e.tempcity=angular.copy(e.temppatient.demography.addresses[s].city_id),e.temparea=angular.copy(e.temppatient.demography.addresses[s].area_id),e.call.fromdate="",e.availableStaff=[])},e.clearPatient=function(){e.temppatient?(e.call.client_id=angular.copy(e.temppatient),e.patient=angular.copy(e.temppatient)):e.patient={},$("#AddPatientObjectView").modal("hide")},e.savePatient=function(){if(e.addaddress.address="",e.addaddress.wing&&(e.addaddress.address+=e.addaddress.wing.trim()+", "),e.addaddress.flatno&&(e.addaddress.address+=e.addaddress.flatno.trim()+", "),e.addaddress.building&&(e.addaddress.address+=e.addaddress.building.trim()+", "),e.addaddress.plotno&&(e.addaddress.address+="Plot no. "+e.addaddress.plotno.trim()+","),e.addaddress.sectorno&&(e.addaddress.address+="Sector no. "+e.addaddress.sectorno.trim()+","),e.addaddress.streetname&&(e.addaddress.address+=e.addaddress.streetname.trim()+", "),e.addaddress.landmark&&(e.addaddress.address+=e.addaddress.landmark.trim()+", "),e.patient._id){var t=d.updatePatient(e.patient);t.then(function(t){if(t.response._id){e.call.client_id=t.response,e.patient=t.response,e.temppatient=angular.copy(t.response);for(var a=0;a<e.patient.demography.addresses.length;a++)"true"==e.patient.demography.addresses[a].servicedeliveryaddress&&(e.call.servicedeliveryaddress=e.patient.demography.addresses[a],e.call.city_id=angular.copy(e.patient.demography.addresses[a].city_id),e.call.area_id=angular.copy(e.patient.demography.addresses[a].area_id),e.call.pincode=angular.copy(e.patient.demography.addresses[a].pincode),e.pincodes=e.call.area_id.pincodes,e.tempcity=angular.copy(e.patient.demography.addresses[a].city_id),e.temparea=angular.copy(e.patient.demography.addresses[a].area_id),e.call.fromdate="",e.availableStaff=[])}})}else{e.addAddress();var t=d.addPatient(e.patient);t.then(function(t){if(t.response._id){e.call.client_id=t.response,e.patient=t.response,e.temppatient=angular.copy(t.response);for(var a=0;a<e.patient.demography.addresses.length;a++)"true"==e.patient.demography.addresses[a].servicedeliveryaddress&&(e.call.servicedeliveryaddress=e.patient.demography.addresses[a],e.call.city_id=angular.copy(e.patient.demography.addresses[a].city_id),e.call.area_id=angular.copy(e.patient.demography.addresses[a].area_id),e.call.pincode=angular.copy(e.patient.demography.addresses[a].pincode),e.pincodes=e.call.area_id.pincodes,e.tempcity=angular.copy(e.patient.demography.addresses[a].city_id),e.temparea=angular.copy(e.patient.demography.addresses[a].area_id),e.call.fromdate="",e.availableStaff=[])}})}$("#AddPatientObjectView").modal("hide")},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=angular.copy(s),e.addaddress={},e.tempaddcity="",e.tempaddarea="",e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={},e.tempaddcity="",e.tempaddarea=""}}else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={},e.tempaddcity="",e.tempaddarea=""}},e.addAddressForOrder=function(){if(e.addaddress.address="",e.addaddress.wing&&(e.addaddress.address+=e.addaddress.wing.trim()+", "),e.addaddress.flatno&&(e.addaddress.address+=e.addaddress.flatno.trim()+", "),e.addaddress.building&&(e.addaddress.address+=e.addaddress.building.trim()+", "),e.addaddress.plotno&&(e.addaddress.address+="Plot no. "+e.addaddress.plotno.trim()+", "),e.addaddress.sectorno&&(e.addaddress.address+="Sector no. "+e.addaddress.sectorno.trim()+", "),e.addaddress.streetname&&(e.addaddress.address+=e.addaddress.streetname.trim()+", "),e.addaddress.landmark&&(e.addaddress.address+=e.addaddress.landmark.trim()+", "),e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);if(delete s.index,e.call.client_id.demography.addresses[e.addaddress.index]=angular.copy(s),e.temppatient&&(e.temppatient.demography.addresses[e.addaddress.index]=angular.copy(s)),e.editAdd=!1,s._id)for(var a=0;a<e.patient.demography.addresses.length;a++)e.patient.demography.addresses[a]._id==s._id&&(e.patient.demography.addresses[a]=s);break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.call.client_id.demography.addresses.push(s),e.temppatient&&e.temppatient.demography.addresses.push(s)}}else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.call.client_id.demography.addresses.push(s),e.temppatient&&e.temppatient.demography.addresses.push(s)}e.call.city_id=angular.copy(s.city_id),e.call.area_id=angular.copy(s.area_id),e.call.pincode=angular.copy(s.pincode),e.pincodes=angular.copy(e.call.area_id.pincodes),e.tempcity=angular.copy(s.city_id),e.temparea=angular.copy(s.area_id),e.call.fromdate="",e.availableStaff=[],e.call.servicedeliveryaddress=angular.copy(s),e.addaddress={},e.tempaddcity="",e.tempaddarea="",e.savePatient(),$("#AddressObjectViewForOrder").modal("hide"),$("#AddressObjectView").modal("hide")},e.closeAddAddress=function(){e.editAdd=!1,e.addaddress={},$("#AddressObjectViewForOrder").modal("hide"),$("#AddressObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.closeAddAddressForOrder=function(){e.editAdd=!1,e.addaddress={},e.tempaddcity={},e.tempaddarea={},$("#AddressObjectViewForOrder").modal("hide"),$("#AddressObjectView").modal("hide")},e.editServiceAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.tempaddcity=angular.copy(e.addaddress.city_id),e.getAddArea(e.tempaddcity._id),e.tempaddarea=angular.copy(e.addaddress.area_id),e.editAdd=!0,$("#AddressObjectViewForOrder").modal("show")},e.deleteServiceAddress=function(t,a){1!=e.temppatient.demography.addresses.length?(e.temppatient.demography.addresses.splice(a,1),e.call.client_id.demography.addresses.splice(a,1),"true"==t.servicedeliveryaddress&&(e.temppatient.demography.addresses[0].servicedeliveryaddress="true")):alert("not allowed")},e.editAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.tempaddcity=angular.copy(e.addaddress.city_id),e.tempaddarea=angular.copy(e.addaddress.area_id),e.editAdd=!0},e.deleteAddress=function(t,a){1!=e.patient.demography.addresses.length?(e.patient.demography.addresses.splice(a,1),t.servicedeliveryaddress&&(e.patient.demography.addresses[0].servicedeliveryaddress="true")):alert("not allowed")},e.getCities=function(){var t=c.getList();t.then(function(t){e.cityList=t.response})},e.changePartner=function(t){e.temp.services=[],e.call.services=[],e.call.paymentdetails.amount=0,e.searchPriceObj.TestListArray=[],t?(e.call.partner_id=t,e.searchServiceObj.partner_id=e.call.partner_id._id,e.searchPriceObj.ClientCD=e.call.partner_id.externalId):(e.call.partner_id=t,e.searchServiceObj.partner_id="")},e.selectAddCity=function(t){t?(e.addaddress.city_id=t,e.getAddArea(t._id)):e.addaddress.city_id={}},e.getAddArea=function(t){var a={};a.city_id=t;var s=p.get(a);s.then(function(t){e.areaList=t.response})},e.selectAddArea=function(t){t?(e.addaddress.area_id=t,e.pincodes=t.pincodes,e.getSubLocation(t._id)):e.addaddress.area_id={}},e.getSubLocation=function(t){var a={};a.type="SL",a.area_id=t;var s=p.get(a);s.then(function(t){e.subLocationList=t.response})},e.selectCity=function(t){t?(e.call.city_id=t,e.getArea(t._id)):e.call.city_id={}},e.getArea=function(t){var a={};a.city_id=t;var s=p.get(a);s.then(function(t){e.areaList=t.response})},e.selectArea=function(t){t?(e.call.area_id=t,e.pincodes=t.pincodes,e.getServiceAgents(t._id)):e.call.area_id={}},e.getServiceAgents=function(t){if(e.call.area_id._id&&e.call.fromdate){var a={};a.area_id=t,a.role="serviceagent",a.fromdate=e.call.fromdate,a.fromtime=e.call.fromtime;var s=u.get(void 0,a);s.then(function(t){e.agentList=t.response})}},Date.prototype.getDayName=function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e[this.getDay()]},e.getAgentPartner=function(){if(e.availableStaff=[],e.call.area_id._id&&e.call.fromdate){var t={};t.area_id=e.call.area_id._id,t.pincode=e.call.pincode,t.role="serviceagent",t.fromdate=e.call.fromdate;var a=u.getavailablestaff(t);a.then(function(t){e.availableStaff=t.response,angular.forEach(e.availableStaff,function(t){e.fromday=e.call.fromdate.getDayName(),e.lowerfromday=e.fromday.toLowerCase();var a=l.getMinMaxTimeByDay(t.workinghour,e.fromday);t.timeSlots=angular.copy(l.getTimeSlots(a).timeSlots),angular.forEach(t.timeSlots,function(e){e.count=0,e.areas=[],e.orders=[]}),angular.forEach(t.orders,function(e){e.fromtime&&angular.forEach(t.timeSlots,function(t){(e.fromtime==t.time||e.fromtime==parseInt(t.time)+15||e.fromtime==parseInt(t.time)+30||e.fromtime==parseInt(t.time)+45)&&(t.count++,t.orders.push(e),t.areas.length?angular.forEach(t.areas,function(a){a!=e.area_id.name&&t.areas.push(e.area_id.name)}):t.areas.push(e.area_id.name))})})})})}},e.selectAgentPartner=function(t,a){if(t&&a){for(var s=0;s<t.timeSlots.length;s++)if(t.timeSlots[s].time==a){e.orders=t.timeSlots[s].orders,e.tempTimeSlot=[];for(var i=angular.copy(t.timeSlots[s]),n=0;3>=n;n++){i.time=0==n?parseInt(i.time):parseInt(i.time)+15;for(var r=!1,o=0;o<t.orders.length;o++){var d=parseInt(t.orders[o].fromtime);if(d<parseInt(i.time)&&d-parseInt(i.time)>-45){r=!0;break}if(d>parseInt(i.time)&&d-parseInt(i.time)<45){r=!0;break}if(d==parseInt(i.time)){r=!0;break}}r||e.tempTimeSlot.push(JSON.parse(JSON.stringify(i)))}e.call.status="Open",e.call.assignto=t,e.call.assignby=e.user.userdata._id,e.partners=t.partners,e.call.comment="",$("#ServicesObjectView").modal("show");break}}else e.call.status="Unassigned",delete e.call.assignto,delete e.call.assignby,e.partners=[],delete e.call.partner_id,e.call.comment="",e.call.fromtime="",e.call.totime="",e.call.services=[],e.searchServiceObj.partner_id="",e.searchServiceObj.servicename="",$("#ServicesObjectView").modal("show")},e.getAllServices=function(t,a){console.log(t);var s={};s.currentPage=1,s.itemPerPage=20,a.active=!0,a.servicename=t;var i=g.get(s,a);return i.then(function(t){return e.ServiceList=[],e.ServiceList=t.response,e.ServiceList})},e.SelectService=function(t){e.temp.savebtndisable=!0,e.call.services||(e.call.services=[]);{var a=e.call.services.indexOf(t);e.call.services.splice(a,1)}e.service_sm={_id:t._id},e.service_sm.service_id=angular.copy(t),e.searchPriceObj.TestListArray=[],e.call.services.push(e.service_sm),e.call.services.forEach(function(t){e.searchPriceObj.TestListArray.push(t.service_id.externalId)}),e.service_sm={},e.service_sm.service_id={},e.ServiceList=[],e.searchServiceObj={},"Unassigned"!=e.call.status&&e.calculatePrice()},e.serviceTagRemoved=function(){e.searchPriceObj.TestListArray=[],e.call.services.forEach(function(t){e.searchPriceObj.TestListArray.push(t.service_id.externalId)}),e.call.services.length?"Unassigned"!=e.call.status&&e.calculatePrice():(e.call.paymentdetails.amount=0,e.temp.savebtndisable=!0)},e.calculatePrice=function(){e.searchPriceObj.PRICEDT=e.call.fromdate;var t=o.getServicePrice(e.searchPriceObj);t.then(function(t){if(t.Message)e.temp.savebtndisable=!0,e.temp.services=[],e.call.services=[],e.searchPriceObj.TestListArray=[],e.call.paymentdetails.amount=0,alert("Please select partner/partner with code");else{var a=JSON.parse(t);if("error"!=a.status){var s=a.MRPList.split(",");e.call.paymentdetails.amount=0,s.forEach(function(t){e.call.paymentdetails.amount+=parseInt(t)});for(var i=0;i<s.length;i++)e.call.services[i].price=s[i];e.temp.savebtndisable=!1}else e.temp.savebtndisable=!0,e.temp.services=[],e.call.services=[],e.searchPriceObj.TestListArray=[],e.call.paymentdetails.amount=0,alert(a.data)}})},e.closeServicesObject=function(){delete e.call.status,delete e.call.assignto,delete e.call.assignby,e.partners=[],delete e.call.partner_id,e.call.comment="",e.call.fromtime="",e.call.totime="",e.call.services=[],e.temp.services=[],e.searchServiceObj.partner_id="",e.searchServiceObj.servicename="",$("#ServicesObjectView").modal("hide")},e.closeForceServicesObject=function(){$("#ForceStaffObjView").modal("hide")};var w="";e.showDeleteModel=function(e){w=e,$("#myModal").modal("show")},e.deleteService=function(){e.call.services.splice(w,1),$("#myModal").modal("hide"),$(".modal-backdrop").remove(),e.call.services.forEach(function(t){t.price&&(e.call.paymentdetails.amount=parseInt(e.call.paymentdetails.amount)+parseInt(t.price))})},e.closedeletemodal=function(){$("#myModal").modal("hide")},e.selectAgent=function(t){t?(e.call.assignto=t,e.partnerList=e.call.assignto.userinfo.partners):e.call.assignto={}},e.cancelCall=function(){i.go(".",null,{reload:!0})},e.SaveCall=function(){e.whenRequestStatus?e.requeststatus.client_id?(e.call.client_id=e.requeststatus.client_id,y()):alert("Please select patient"):y()},e.Save=function(){$("#ServicesObjectView").modal("hide"),$("#progressIndicator").modal("show");var t={};t.call=e.call,e.servicerequest.client_id=e.call.client_id,e.servicerequest.orderId=e.call.orderId,e.servicerequest.partner_id=e.call.partner_id,e.servicerequest.area_id=e.call.area_id,e.servicerequest.servicedeliveryaddress=e.call.servicedeliveryaddress,e.servicerequest.masterservices=e.call.services,e.servicerequest.comment=e.call.comment,e.servicerequest.fromdate=e.call.fromdate,e.servicerequest.todate=e.call.todate,e.servicerequest.fromtime=e.call.fromtime,e.servicerequest.totime=e.call.totime,e.servicerequest.assignto=e.call.assignto,e.servicerequest.assignby=e.call.assignby,e.servicerequest.status=e.call.status,e.servicerequest.paymentdetails=e.call.paymentdetails,e.servicerequest.paymentdetails.amount=e.call.paymentdetails.amount,e.servicerequest.paymentdetails.paid=e.call.paymentdetails.paid,t.servicerequest=e.servicerequest;var a=o.createCall(t);a.then(function(e){$(".modal-backdrop").remove(),e.response._id&&alert("Call Created"),i.go(".",null,{reload:!0}),$("#progressIndicator").modal("hide")})},e.updateCall=function(){$("#progressIndicator").modal("show"),e.call.patient_id=e.data.patient,e.call.services=e.data.services;var t=o.updateCall(e.call);t.then(function(t){t.response._id&&alert("Call Created"),e.call={},e.data={},e.patient={},e.data.patient={},e.data.services=[],o.currentcall=void 0,i.go(".",null,{reload:!0}),$("#progressIndicator").modal("hide")}),$("#progressIndicator").modal("hide")},e.getTDClass=function(e,t){for(var a=0;a<e.timeSlots.length;a++){if(e.timeSlots[a].time==t&&0==e.timeSlots[a].count)return"info";if(e.timeSlots[a].time==t&&0!=e.timeSlots[a].count)return"danger"}},e.getStaffAvbl=function(e,t){for(var a=0;a<e.timeSlots.length;a++)if(e.timeSlots[a].time==t&&0==e.timeSlots[a].count)return!0},e.initializePaging(),e.getSessionStorage(),e.getCities()};e.$inject=["$scope","$q","$http","$location","$state","user","$stateParams","callFactory","clientFactory","partnerFactory","cityFactory","areaFactory","userinfoFactory","partnertestFactory","testFactory","timeSlots","timeSlots30","timeSlots15","$rootScope"],angular.module("webApp").controller("srlcallController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n){e.isAdvanceSearch=!0,$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.datePickerPopup={},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.details={},e.temp||(e.temp={}),e.patientSearchOBJ={},e.EmailValid=/^[a-z]+[a-z0-9._]+@[a-z-]+\.[a-z.]{2,5}$/,e.validName=/^[ A-Za-z_.']*$/,e.validmobilenumber=/^[0-9](?!.*(\d)\1{13})\d{9,}$/,e.Clientvalidmobilenumber=/^(?=.*[0-9])[- +()0-9]+$/,e.validUser=/^[ A-Za-z0-9]*$/,e.validDigit=/^[0-9]*$/,e.validNameWithHyphen=/^[a-zA-Z0-9!$* \t\r\n\-]*$/,e.searchObj={},e.displayInfo={},e.searchObj.iscarddelivered=!0,e.newMemberRenewalFlag=!0,e.patient||(e.patient={},e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.agetype="years"),e.copyAdderss=function(){e.patient.demography.residentialaddress=e.temp.chkAdd?e.patient.demography.servicedeliveryaddress:{}},e.ageCalculator=function(t){e.patient.demography.assumeddob=!1;var a="";if(t){var s=new Date,i=new Date(t);a=s.getFullYear()-i.getFullYear();var n=s.getMonth()-i.getMonth();e.patient.demography.age=a,(0>n||0===n&&s.getDate()<i.getDate())&&a--}else e.patient.demography.age=a;return a},e.DOBCalculate=function(){if(e.patient.demography.age){var t=moment().subtract(e.patient.demography.age,e.patient.demography.agetype);"years"==e.patient.demography.agetype&&(t=t.startOf("year")),"months"==e.patient.demography.agetype&&(t=t.startOf("month")),e.patient.demography.dob=new Date(t),e.patient.demography.assumeddob=!0}else e.patient.demography.dob="",e.patient.demography.assumeddob=!1},e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.changeDeceased=function(){e.patient.demography.deceaseddate="",e.patient.demography.deceasedcomment=""},e.changeTitle=function(){e.patient.demography.gender="Mr."==e.patient.demography.salutation?"male":"Mrs."==e.patient.demography.salutation||"Miss"==e.patient.demography.salutation||"Ms."==e.patient.demography.salutation?"female":""},e.changeSource=function(){e.temp.showSourceName="doctorreferral"==e.patient.referredby||"other"==e.patient.referredby?!0:!1},e.loadLanguages=function(a){var s=t.defer();a=a.toLowerCase();var i=e.LanguagesList.optionlist.filter(function(e){return e.displayname.toLowerCase().indexOf(a)>-1?e.code:void 0});return s.resolve(i),s.promise},e.langTagAdded=function(t){e.patient.demography.languagesknown.push(t)},e.langTagRemoved=function(t){var a=e.patient.demography.languagesknown.indexOf(t.text);e.patient.demography.languagesknown.splice(a,1)},e.getSessionStorage=function(){e.patienttypelist={_id:"5559febbdb4da0841655631d",name:"patienttype",displayname:"Patient Type",optionlist:[{code:"member",displayname:"Member",active:!0},{code:"nonmember",displayname:"Non-Member",active:!0},{code:"institutemember",displayname:"Institute Member",active:!0}],source:"webhcm"},e.genderlist={_id:"555c3a53b08eeddc0dab01d3",name:"genders",displayname:"Genders",optionlist:[{code:"male",displayname:"Male",active:!0},{code:"female",displayname:"Female",active:!0},{code:"thirdgender",displayname:"Third Gender",active:!0}],source:"webhcm"},e.bloodgrouplist={_id:"555c3a24b08eeddc0dab01d1",name:"bloodgroups",displayname:"Blood Groups",optionlist:[{code:"O+",displayname:"O +",active:!0},{code:"O-",displayname:"O -",active:!0},{code:"A+",displayname:"A +",active:!0},{code:"A-",displayname:"A -",active:!0},{code:"B+",displayname:"B +",active:!0},{code:"B-",displayname:"B -",active:!0},{code:"AB+",displayname:"AB +",active:!0},{code:"AB-",displayname:"AB -",active:!0},{code:"notknown",displayname:"Not Known",active:!0}],source:"webhcm"},e.salutationlist={_id:"555c3a3eb08eeddc0dab01d2",name:"salutations",displayname:"Salutations",optionlist:[{code:"Mr.",displayname:"Mr.",active:!0},{code:"Mrs.",displayname:"Mrs.",active:!0},{code:"Miss",displayname:"Miss",active:!0},{code:"Ms.",displayname:"Ms.",active:!0},{code:"Dr.",displayname:"Dr.",active:!0},{code:"Prof.",displayname:"Prof.",active:!0},{code:"baby",displayname:"Baby",active:!0},{code:"col",displayname:"Col",active:!0}],source:"webhcm"},e.LanguagesList={_id:"555c715fb08eeddc0dab01d4",name:"languageknown",displayname:"Language Known",__v:1,source:"webhcm",iseditable:!1,optionlist:[{code:"english",displayname:"English",_id:"55bd1a0655d8f10c00e94239",dimensions:[],active:!0},{code:"hindi",displayname:"Hindi",_id:"55bd1a0655d8f10c00e9423a",dimensions:[],active:!0},{code:"bengali",displayname:"Bengali",_id:"55bd1a0655d8f10c00e9423b",dimensions:[],active:!0},{code:"telugu",displayname:"Telugu",_id:"55bd1a0655d8f10c00e9423c",dimensions:[],active:!0},{code:"marathi",displayname:"Marathi",_id:"55bd1a0655d8f10c00e9423d",dimensions:[],active:!0},{code:"tamil",displayname:"Tamil",_id:"55bd1a0655d8f10c00e9423e",dimensions:[],active:!0},{code:"urdu",displayname:"Urdu",_id:"55bd1a0655d8f10c00e9423f",dimensions:[],active:!0},{code:"gujarati",displayname:"Gujarati",_id:"55bd1a0655d8f10c00e94240",dimensions:[],active:!0},{code:"kannada",displayname:"Kannada",_id:"55bd1a0655d8f10c00e94241",dimensions:[],active:!0},{code:"malayalam",displayname:"Malayalam",_id:"55bd1a0655d8f10c00e94242",dimensions:[],active:!0},{code:"oriya",displayname:"Oriya",_id:"55bd1a0655d8f10c00e94243",dimensions:[],active:!0},{code:"punjabi",displayname:"Punjabi",_id:"55bd1a0655d8f10c00e94244",dimensions:[],active:!0},{code:"assamese",displayname:"Assamese",_id:"55bd1a0655d8f10c00e94245",dimensions:[],active:!0},{code:"maithili",displayname:"Maithili",_id:"55bd1a0655d8f10c00e94246",dimensions:[],active:!0},{code:"bhili/bhilodi",displayname:"Bhili/Bhilodi",_id:"55bd1a0655d8f10c00e94247",dimensions:[],active:!0},{code:"santali",displayname:"Santali",_id:"55bd1a0655d8f10c00e94248",dimensions:[],active:!0},{code:"kashmiri",displayname:"Kashmiri",_id:"55bd1a0655d8f10c00e94249",dimensions:[],active:!0},{code:"nepali",displayname:"Nepali",_id:"55bd1a0655d8f10c00e9424a",dimensions:[],active:!0},{code:"gondi",displayname:"Gondi",_id:"55bd1a0655d8f10c00e9424b",dimensions:[],active:!0},{code:"sindhi",displayname:"Sindhi",_id:"55bd1a0655d8f10c00e9424c",dimensions:[],active:!0},{code:"konkani",displayname:"Konkani",_id:"55bd1a0655d8f10c00e9424d",dimensions:[],active:!0},{code:"dogri",displayname:"Dogri",_id:"55bd1a0655d8f10c00e9424e",dimensions:[],active:!0},{code:"khandeshi",displayname:"Khandeshi",_id:"55bd1a0655d8f10c00e9424f",dimensions:[],active:!0},{code:"kurukh",displayname:"Kurukh",_id:"55bd1a0655d8f10c00e94250",dimensions:[],active:!0},{code:"tulu",displayname:"Tulu",_id:"55bd1a0655d8f10c00e94251",dimensions:[],active:!0},{code:"meitei/manipuri",displayname:"Meitei/Manipuri",_id:"55bd1a0655d8f10c00e94252",dimensions:[],active:!0},{code:"bodo",displayname:"Bodo",_id:"55bd1a0655d8f10c00e94253",dimensions:[],active:!0},{code:"khasi",displayname:"Khasi",_id:"55bd1a0655d8f10c00e94254",dimensions:[],active:!0},{code:"mundari",displayname:"Mundari",_id:"55bd1a0655d8f10c00e94255",dimensions:[],active:!0},{code:"ho",displayname:"Ho",_id:"55bd1a0655d8f10c00e94256",dimensions:[],active:!0},{code:"chhattisgarhi",displayname:"Chhattisgarhi",_id:"55bd1a0655d8f10c00e94257",dimensions:[],active:!0},{code:"rajasthani",displayname:"Rajasthani",_id:"55bd1a0655d8f10c00e94258",dimensions:[],active:!0},{code:"magadh/magahi",displayname:"Magadh/Magahi",_id:"55bd1a0655d8f10c00e94259",dimensions:[],active:!0},{code:"haryanvi",displayname:"Haryanvi",_id:"55bd1a0655d8f10c00e9425a",dimensions:[],active:!0},{code:"marwari",displayname:"Marwari",_id:"55bd1a0655d8f10c00e9425b",dimensions:[],active:!0},{code:"malvi",displayname:"Malvi",_id:"55bd1a0655d8f10c00e9425c",dimensions:[],active:!0},{code:"mewari",displayname:"Mewari",_id:"55bd1a0655d8f10c00e9425d",dimensions:[],active:!0},{code:"khorth/khotta",displayname:"Khorth/Khotta",_id:"55bd1a0655d8f10c00e9425e",dimensions:[],active:!0},{code:"bundeli/bundelkhan",displayname:"Bundeli/Bundelkhan",_id:"55bd1a0655d8f10c00e9425f",dimensions:[],active:!0},{code:"bagheli/baghelkhan",displayname:"Bagheli/Baghelkhan",_id:"55bd1a0655d8f10c00e94260",dimensions:[],active:!0},{code:"pahari",displayname:"Pahari",_id:"55bd1a0655d8f10c00e94261",dimensions:[],active:!0},{code:"laman/lambadi",displayname:"Laman/Lambadi",_id:"55bd1a0655d8f10c00e94262",dimensions:[],active:!0},{code:"awadhi",displayname:"Awadhi",_id:"55bd1a0655d8f10c00e94263",dimensions:[],active:!0},{code:"harauti",displayname:"Harauti",_id:"55bd1a0655d8f10c00e94264",dimensions:[],active:!0},{code:"garhwali",displayname:"Garhwali",_id:"55bd1a0655d8f10c00e94265",dimensions:[],active:!0},{code:"nimadi",displayname:"Nimadi",_id:"55bd1a0655d8f10c00e94266",dimensions:[],active:!0},{code:"sadan/sadri",displayname:"Sadan/Sadri",_id:"55bd1a0655d8f10c00e94267",dimensions:[],active:!0},{code:"kumauni",displayname:"Kumauni",_id:"55bd1a0655d8f10c00e94268",dimensions:[],active:!0},{code:"dhundhari",displayname:"Dhundhari",_id:"55bd1a0655d8f10c00e94269",dimensions:[],active:!0},{code:"surgujia",displayname:"Surgujia",_id:"55bd1a0655d8f10c00e9426a",dimensions:[],active:!0},{code:"bagri rajasthani",displayname:"Bagri Rajasthani",_id:"55bd1a0655d8f10c00e9426b",dimensions:[],active:!0},{code:"banjari",displayname:"Banjari",_id:"55bd1a0655d8f10c00e9426c",dimensions:[],active:!0},{code:"nagpuria (varhadi)",displayname:"Nagpuria (Varhadi)",_id:"55bd1a0655d8f10c00e9426d",dimensions:[],active:!0},{code:"surajpuri",displayname:"Surajpuri",_id:"55bd1a0655d8f10c00e9426e",dimensions:[],active:!0},{code:"kangri",displayname:"Kangri",_id:"55bd1a0655d8f10c00e9426f",dimensions:[],active:!0},{code:"bhojpuri",displayname:"Bhojpuri",_id:"55bd1a0655d8f10c00e94270",dimensions:[],active:!0}],_Deleted:!1},e.relationship={_id:"5582a808e280b8f40f6a887b",name:"relationship",displayname:"Relationship",optionlist:[{code:"father",displayname:"Father",_id:"55b4a34e99af3b0e003661bb",active:!0},{code:"mother",displayname:"Mother",_id:"55b4a34e99af3b0e003661ba",active:!0},{code:"brother",displayname:"Brother",_id:"55b4a34e99af3b0e003661b9",active:!0},{code:"sister",displayname:"Sister",_id:"55b4a34e99af3b0e003661b8",active:!0},{code:"self",displayname:"Self",_id:"55b7229c6727ef0c007f6831",active:!0},{code:"son-in-law",displayname:"Son-in-law",_id:"55b7229c6727ef0c007f6830",active:!0},{code:"daughter-in-law",displayname:"Daughter-in-law",_id:"55b7229c6727ef0c007f682f",active:!0},{code:"mother-in-law",displayname:"Mother-in-law",_id:"55b7229c6727ef0c007f682e",active:!0},{code:"friend",displayname:"Friend",_id:"55b722db6727ef0c007f6834",active:!0},{code:"wife",displayname:"Wife",_id:"55b722db6727ef0c007f6833",active:!0},{code:"husband",displayname:"Husband",_id:"55b722db6727ef0c007f6832",active:!0},{code:"nhhs staff",displayname:"NHHS Staff",_id:"55b725866727ef0c007f6841",active:!0}],source:"webhcm"},e.ReferredList={_id:"558a55ca69f95aa00e919bdc",name:"referralsource",displayname:"Referral Source",optionlist:[{code:"newspaper",displayname:"Newspaper",active:!0},{code:"television",displayname:"Television",active:!0},{code:"wordofmouth",displayname:"Word Of Mouth",active:!0},{code:"web",displayname:"Web",active:!0},{code:"doctorreferral",displayname:"Doctor Referral",active:!0},{code:"internalreferral",displayname:"Internal Referral",active:!0},{code:"customerreference",displayname:"Customer Reference",active:!0},{code:"other",displayname:"Other",active:!0}],source:"webhcm"}
},e.getState=function(){e.stateList=[{name:"Maharashtra",code:"maharashtra"},{name:"Gujarat",code:"gujarat"}]},e.getCity=function(){s.paginateResult().then(function(t){e.cityList=t.response})},e.getArea=function(t){i.get(t).then(function(t){e.areaList=t.response})},e.changeCity=function(){var t={};t.city_id=e.addaddress.city_id._id,e.getArea(t)},e.enterPincode=function(){var t={};t.areasearch=e.addaddress.pincode,e.getArea(t)},e.searchPatient=function(){e.initializePaging(),e.patientsList=[],a.getPatientList(void 0,void 0,e.paging.currentPage,e.paging.itemPerPage,void 0,e.searchObj).then(function(t){e.patientsList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,e.patient_search=""})},e.addPatient=function(){e.patient._id?a.updatePatient(e.patient).then(function(){n.path("/main/client")}):a.addPatient(e.patient).then(function(){n.path("/main/client")})},e.openAddAddress=function(){$("#AddPatientObjectView").modal("hide"),$("#AddressObjectView").modal("show")},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=s,e.addaddress={},e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={}}}else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={}}},e.checkServiceAddress=function(t,a){for(var s=0;s<e.patient.demography.addresses.length;s++)s!=a?e.patient.demography.addresses[s].servicedeliveryaddress="false":e.patient.demography.addresses[a].servicedeliveryaddress="true"},e.closeAddAddress=function(){$("#AddressObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.editAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.editAdd=!0},e.deleteAddress=function(t,a){1!=e.patient.demography.addresses.length?(e.patient.demography.addresses.splice(a,1),t.servicedeliveryaddress&&(e.patient.demography.addresses[0].servicedeliveryaddress="true")):alert("not allowed")},e.editPatient=function(e){a.putPatient(e)},e.close=function(){a.putPatient(),n.path("/main/client")},e.deletePatient=function(t){a.deletePatient(t).then(function(){e.table()})},e.getPatient=function(t,s){switch(s){case"byname":e.searchObj.patientname=t;break;case"bymembershipnumber":e.searchObj.membershipnumber=t;break;case"bymembershipdisplay":e.searchObj.membershipdisplay=t}return a.getPatientList("","","","",!1,e.searchObj).then(function(t){return t.response.length>0?(e.Patients=t.response,e.Patients):(e.mgs="Patient not found",delete e.patient.primary_id,delete e.patient.primarymembershipnumber,void 0)})},e.SelectPatient=function(t){e.disablePatient=!0,e.patient.primary_id=t,e.patientname=t.demography.name,e.patient.primarymembershipnumber=t.membershipnumber,e.Patients=[],delete e.searchObj.tempPatientObjByName,delete e.searchObj.tempPatientObjByMSN,e.displayInfo={},e.displayInfo.primarypatientname="Name : "+t.demography.name+", ("+t.membershipnumber+")",$("#primarypatientsearchModel").modal("hide")},e.clearPatient=function(){e.disablePatient=!1,e.Patients=[],delete e.patient.primary_id,delete e.patient.primarymembershipnumber,e.patientname="",e.displayInfo={}},e.getSessionStorage(),e.initializePaging(),e.table=function(t){e.isPaging||e.initializePaging(),e.patientsList=[],a.getPatientList(e.paging,t,!0).then(function(t){e.patientsList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,e.patient_search=""}),e.isPaging=!1},e.edit=function(){var t=a.getPatient();t&&(e.patient=t),e.patient._id?e.changeSource():(e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[])}};e.$inject=["$scope","$q","clientFactory","cityFactory","areaFactory","$location"];var t=angular.module("webApp");t.controller("srlclientController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n){$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.datePickerPopup={},e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.searchObj={},e.searchObj.status="",e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20};var r=new Date;r=r.setHours("00"),r=new Date(r).setMinutes("00"),r=new Date(r).setSeconds("00"),r=new Date(r).setMilliseconds("000"),e.searchObj.searchDate=new Date(r),e.user=n,e.init=function(){e.getOrderList(),e.user.userdata.userinfo.partners.length?(e.partnerList=e.user.userdata.userinfo.partners,console.log(e.partnerList),1==e.user.userdata.userinfo.partners.length&&(e.searchObj.partner_id=e.user.userdata.userinfo.partners[0]._id)):e.getPartners()},e.previousDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()-1)),e.getOrderList()},e.todayDate=function(){var t=new Date;t=t.setHours("00"),t=new Date(t).setMinutes("00"),t=new Date(t).setSeconds("00"),t=new Date(t).setMilliseconds("000"),e.searchObj.searchDate=new Date(t),e.getOrderList()},e.nextDate=function(){var t=new Date(e.searchObj.searchDate);e.searchObj.searchDate=new Date(t.setDate(t.getDate()+1)),e.getOrderList()},e.getPartners=function(){var t=i.get("",e.searchObj);t.then(function(t){e.partnerList=t.response})},e.sort={sortfield:"fromtime",sort:"asc"},e.selectedCls=function(t){return t==e.sort.sortfield&&"sort-"+e.sort.sort},e.changeSorting=function(t){e.sort.sortfield==t?e.sort.sort="asc"==e.sort.sort?"desc":"asc":(e.sort.sortfield=t,e.sort.sort="asc"),e.getOrderList()},e.getOrderList=function(){if(e.searchObj.searchDate){e.isPaging||e.initializePaging();var t=s.getOrderList(e.searchObj,e.paging,e.sort);t.then(function(t){t.response.length>0?(e.OrderList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount):e.OrderList=t.response}),e.isPaging=!1}},e.SelectOrder=function(e){"Open"!=e.status&&(e.readonly=!0),s.currentWorkPlan=e,a.go("main.vieworder")},e.NewWorkPlan=function(){a.go("home.WorkPlanAdd")},e.initializePaging(),e.init()};e.$inject=["$scope","$location","$state","orderFactory","partnerFactory","user"],angular.module("webApp").controller("srlorderController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c,p,u,m,g){if(e.order={},void 0!=i.currentWorkPlan?e.order=i.currentWorkPlan:s.go("main.order"),e.order.paymentdetails||(e.order.paymentdetails={}),e.totalofdiscounttest=0,e.totalofnondiscounttest=0,e.orignalpriceamount=0,"Completed"==e.order.status&&e.order.paymentdetails.discount){var h=parseInt(100)-e.order.paymentdetails.discount;e.order.masterservices.forEach(function(t){if(0==t.service_id.discountnotapplicable){var a=parseInt(100)*parseInt(t.price)/parseInt(h);t.orignaltestprice=a,e.orignalpriceamount+=t.price,e.totalofdiscounttest=e.totalofdiscounttest+t.orignaltestprice}else t.orignaltestprice=t.price,e.totalofnondiscounttest=e.totalofnondiscounttest+t.orignaltestprice,e.orignalpriceamount+=t.price}),e.order.orignalpricetotalcompeted=e.totalofdiscounttest+e.totalofnondiscounttest}e.order.logobj={},e.temp={},e.temp.savebtndisable=!0,e.tempservices=[],e.addaddress={},e.user=g,e.searchuser={},e.searchPriceObj={},e.searchPriceObj.TestListArray=[],e.searchPriceUnObj={},e.searchPriceUnObj.TestListArray=[],e.order.partner_id&&(e.workinghours=e.order.partner_id.workinghour),e.timeSlots=JSON.parse(p),e.getSessionStorage=function(){e.AddressType=JSON.parse(sessionStorage.getItem("AddressType")),e.AppointmentCancelMaster=JSON.parse(sessionStorage.getItem("AppointmentCancelMaster"))},e.changeCancelReason=function(t){"OTHERS"!=t?(e.order.statuscomment=angular.copy(t),e.tempreason=""):(e.tempreason=angular.copy(t),e.order.statuscomment="")},Date.prototype.getDayName=function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e[this.getDay()]},e.datePickerPopup={},e.datePickerPopup.minDate=new Date,e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.Update=function(){$("#confirmIndicator").modal("show"),e.Confirm=function(t){e.order.CurrentStatus=angular.copy(e.order.status),1==t?(e.order.status=angular.copy(e.temp.status),e.order.logobj.comments=angular.copy(e.order.statuscomment),e.order.logobj.action="statuschange",e.order.assignto=null,e.order.assignby=null,$("#confirmIndicator").modal("hide"),e.updateWorkplan().then(function(){$(".modal-backdrop").remove(),a.path("/main/order")})):(e.order.status=angular.copy(e.order.CurrentStatus),$("#confirmIndicator").modal("hide"))}},e.updateWorkplan=function(){var a=t.defer();$("#progressIndicator").modal("show");var s=i.updateService(e.order);return s.then(function(t){t.response._id?(alert("Updated successfully"),e.order=t.response,e.order.logobj={},e.order.statuscomment="",$("#progressIndicator").modal("hide")):alert("Try again."),$("#progressIndicator").modal("hide"),a.resolve(t.response)}),a.promise},e.updateDateTimeModal=function(){if(e.order.logobj.action="schedulechange",e.temp.fromdate=angular.copy(e.order.fromdate),e.temp.fromtime=angular.copy(e.order.fromtime),e.temp.fromdate=new Date(e.temp.fromdate),e.fromday=e.temp.fromdate.getDayName(),e.lowerfromday=e.fromday.toLowerCase(),e.workinghours){var t=c.getMinMaxTimeByDay(e.workinghours,e.fromday);e.temp.timeSlots=c.getTimeSlots(t).timeSlots}else e.temp.timeSlots=JSON.parse(p);$("#updateDateTimeObjView").modal("show")},e.updateDatetime=function(){e.order.fromdate=angular.copy(e.temp.fromdate),e.order.fromtime=angular.copy(e.temp.fromtime),$("#updateDateTimeObjView").modal("hide"),e.updateWorkplan().then(function(){e.temp={},e.order.logobj={}})},e.getAgentPartner=function(){var a=t.defer();if(e.availableStaff=[],e.order.servicedeliveryaddress.area_id._id&&e.temp.fromdate){var s={};s.area_id=e.order.servicedeliveryaddress.area_id._id,s.pincode=e.order.servicedeliveryaddress.pincode,s.role="serviceagent",e.temp.fromdate=new Date(e.temp.fromdate),s.fromdate=angular.copy(e.temp.fromdate);var i=m.getavailablestaff(s);i.then(function(t){e.availableStaff=t.response,angular.forEach(e.availableStaff,function(t){e.fromday=e.temp.fromdate.getDayName(),e.lowerfromday=e.fromday.toLowerCase();var a=c.getMinMaxTimeByDay(t.workinghour,e.fromday);t.timeSlots=angular.copy(c.getTimeSlots(a).timeSlots),angular.forEach(t.timeSlots,function(e){e.count=0,e.areas=[],e.orders=[]}),angular.forEach(t.orders,function(e){e.fromtime&&angular.forEach(t.timeSlots,function(t){(e.fromtime==t.time||e.fromtime==parseInt(t.time)+15||e.fromtime==parseInt(t.time)+30||e.fromtime==parseInt(t.time)+45)&&(t.count++,t.orders.push(e),t.areas.length?angular.forEach(t.areas,function(a){a!=e.area_id.name&&t.areas.push(e.area_id.name)}):t.areas.push(e.area_id.name))})})}),a.resolve()})}return a.promise},e.getTDClass=function(e,t){for(var a=0;a<e.timeSlots.length;a++){if(e.timeSlots[a].time==t&&0==e.timeSlots[a].count)return"info";if(e.timeSlots[a].time==t&&0!=e.timeSlots[a].count)return"danger"}},e.getNumber=function(e){return e?new Array(e):void 0},e.selectAgentPartner=function(t,a){if(t&&a){for(var s=0;s<t.timeSlots.length;s++)if(t.timeSlots[s].time==a){e.orders=t.timeSlots[s].orders,e.tempTimeSlot=[];for(var i=angular.copy(t.timeSlots[s]),n=0;3>=n;n++){i.time=0==n?parseInt(i.time):parseInt(i.time)+15;for(var r=!1,o=0;o<t.orders.length;o++){var d=parseInt(t.orders[o].fromtime);if(e.updatefromtime!=d){if(d<parseInt(i.time)&&d-parseInt(i.time)>-45){r=!0;break}if(d>parseInt(i.time)&&d-parseInt(i.time)<45){r=!0;break}if(d==parseInt(i.time)){r=!0;break}}}r||e.tempTimeSlot.push(JSON.parse(JSON.stringify(i)))}e.order.logobj.action="staffchange",e.temp.status="Open",e.temp.assignto=angular.copy(t),e.temp.assignby=angular.copy(e.user.userdata._id),e.partners=t.partners,e.temp.fromdate=angular.copy(e.temp.fromdate),$("#updateStaffObjView").modal("hide"),$("#ServicesObjectView").modal("show");break}}else e.order.logobj={},e.temp.status="Unassigned",delete e.temp.assignto,delete e.temp.assignby,e.partners=[],delete e.temp.partner_id,e.temp.fromtime="",e.temp.totime="",e.temp.services=[],$("#updateStaffObjView").modal("hide"),$("#ServicesObjectView").modal("show")},e.closeServicesObject=function(){e.temp={},e.order.logobj={},$("#ServicesObjectView").modal("hide"),$("#updateStaffObjView").modal("show")},e.closeForceServicesObject=function(){$("#ForceStaffObjView").modal("hide"),$("#updateStaffObjView").modal("show")},e.updateStaffModal=function(){e.order.logobj.action="staffchange",e.temp.status=angular.copy(e.order.status),e.temp.assignto=angular.copy(e.order.assignto),e.temp.assignby=angular.copy(e.order.assignby),e.temp.fromdate=angular.copy(e.order.fromdate),e.updatefromtime=angular.copy(e.order.fromtime),e.getAgentPartner().then(function(){$("#updateStaffObjView").modal("show")})},e.updateStaff=function(){e.order.assignto=angular.copy(e.temp.assignto),e.order.assignby=angular.copy(e.temp.assignby),e.order.fromdate=angular.copy(e.temp.fromdate),e.order.fromtime=angular.copy(e.temp.fromtime),e.order.partner_id=angular.copy(e.temp.partner_id),"Unassigned"==e.order.status?(e.searchPriceUnObj.TestListArray=[],e.order.masterservices.forEach(function(t){e.searchPriceUnObj.TestListArray.push(t.service_id.externalId)}),e.calculatePriceUnassigned().then(function(){e.order.status=angular.copy(e.temp.status),$("#updateStaffObjView").modal("hide"),$("#ServicesObjectView").modal("hide"),e.updateWorkplan().then(function(){e.temp={},e.order.logobj={}})})):(e.order.status=angular.copy(e.temp.status),$("#updateStaffObjView").modal("hide"),$("#ServicesObjectView").modal("hide"),e.updateWorkplan().then(function(){e.temp={},e.order.logobj={}}))},e.updateserviceModal=function(){e.order.logobj.action="servicechange",e.temp.services=angular.copy(e.order.masterservices),e.temp.services.forEach(function(t){e.searchPriceObj.TestListArray.push(t.service_id.externalId)}),$("#updateServiceObjView").modal("show")},e.DeleteService=function(t,a){$("#updateServiceObjView").modal("hide"),$("#visitCommentBox").modal("show"),e.ServiceTitleName=t.service_id.name,e.ConfirmComment=function(s){1==s&&(""!=e.DeleteComment&&void 0!=e.DeleteComment?(e.order.masterservices.splice(a,1),e.RecalculateAmount(),e.order.logobj.comments="Deleted service "+t.service_id.name+": "+e.DeleteComment,e.DeleteComment="",$("#visitCommentBox").modal("hide"),e.updateWorkplan().then(function(){e.temp={},e.order.logobj={},e.updateserviceModal()})):alert("Comment can not empty."))}},e.addserviceModal=function(){$("#updateServiceObjView").modal("hide"),e.order.logobj.action="servicechange",e.temp.services=angular.copy(e.order.masterservices),$("#addServiceObjView").modal("show")},e.getAllServices=function(t){var a={};a.currentPage=1,a.itemPerPage=20,t.active=!0,t||(t={},t.active=!0),e.order.partner_id&&(t.partner_id=e.order.partner_id._id);var s=n.get(a,t);s.then(function(t){e.ServiceList=t.response,e.ServiceList})},e.getAllServicesTag=function(t,a){var s={};s.currentPage=1,s.itemPerPage=20,a||(a={},a.active=!0,a.servicename=t),a.active=!0,a.servicename=t,e.order.partner_id&&(a.partner_id=e.order.partner_id._id);var i=n.get(s,a);return i.then(function(t){return e.ServiceList=t.response,e.ServiceList})},e.displaynewservices=[],e.SelectService=function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.displaynewservices.push(e.service_sm),e.ServiceList=[],e.searchObj={},e.searchPriceObj.TestListArray.push(t.externalId),"Unassigned"!=e.order.status&&e.calculatePrice()},e.SelectServiceTag=function(t){e.temp.savebtndisable=!0,e.temp.services||(e.temp.services=[]);{var a=e.temp.services.indexOf(t);e.temp.services.splice(a,1)}e.service_sm={_id:t._id},e.service_sm.service_id=angular.copy(t),e.searchPriceObj.TestListArray=[],e.temp.services.push(e.service_sm),e.temp.services.forEach(function(t){e.searchPriceObj.TestListArray.push(t.service_id.externalId)}),e.service_sm={},e.service_sm.service_id={},e.ServiceList=[],e.searchObj={},"Unassigned"!=e.order.status&&e.calculatePriceTag()},e.serviceTagRemoved=function(){e.searchPriceObj.TestListArray=[],e.temp.services.forEach(function(t){e.searchPriceObj.TestListArray.push(t.service_id.externalId)}),$("#myModal").modal("hide"),$(".modal-backdrop").remove(),e.temp.services.length?"Unassigned"!=e.order.status&&e.calculatePriceTag():(e.order.paymentdetails.amount=0,e.temp.savebtndisable=!0)},e.calculatePriceTag=function(){e.searchPriceObj.PRICEDT=e.order.fromdate,e.order.partner_id&&(e.searchPriceObj.ClientCD=e.order.partner_id.externalId);var t=r.getServicePrice(e.searchPriceObj);t.then(function(t){if(t.Message)e.temp.savebtndisable=!0,e.temp.services=[],e.temp.services=[],e.searchPriceObj.TestListArray=[],e.order.paymentdetails.amount=0,alert("Please select partner/partner with code");else{var a=JSON.parse(t);if("error"!=a.status){e.order.paymentdetails.amount=0;var s=a.MRPList.split(",");s.forEach(function(t){e.order.paymentdetails.amount+=parseInt(t)});for(var i=0;i<s.length;i++)e.temp.services[i].price=s[i];e.temp.savebtndisable=!1}else e.temp.savebtndisable=!0,e.temp.services=[],e.temp.services=[],e.searchPriceObj.TestListArray=[],e.order.paymentdetails.amount=0,alert(a.data)}})},e.addServiceTag=function(){e.temp.savebtndisable=!0,e.order.masterservices=angular.copy(e.temp.services),$("#updateServiceObjView").modal("hide"),e.updateWorkplan().then(function(){})},e.calculatePriceTagUn=function(){var a=t.defer();e.searchPriceUnObj.PRICEDT=e.order.fromdate,e.order.partner_id&&(e.searchPriceUnObj.ClientCD=e.order.partner_id.externalId);var s=r.getServicePrice(e.searchPriceUnObj);return s.then(function(t){if(t.Message)alert("Please select partner/partner with code");else{var s=JSON.parse(t);if("error"!=s.status){var i=s.MRPList.split(",");e.order.paymentdetails.amount=0,i.forEach(function(t){e.order.paymentdetails.amount+=parseInt(t)});for(var n=0;n<i.length;n++)e.order.masterservices[n].price=i[n];a.resolve(t.response)}else alert(s.data)}}),a.promise},e.calculatePrice=function(){e.searchPriceObj.PRICEDT=e.order.fromdate,e.order.partner_id&&(e.searchPriceObj.ClientCD=e.order.partner_id.externalId);var t=r.getServicePrice(e.searchPriceObj);t.then(function(t){if(t.Message)e.temp.savebtndisable=!0,e.temp.services=[],e.displaynewservices=[],e.searchPriceObj.TestListArray=[],alert("Please select partner/partner with code");else{var a=JSON.parse(t);if("error"!=a.status){for(var s=a.MRPList.split(","),i=0;i<s.length;i++)e.displaynewservices[i].price=s[i];e.temp.savebtndisable=!1}else e.temp.savebtndisable=!0,e.temp.services=[],e.displaynewservices=[],e.searchPriceObj.TestListArray=[],alert(a.data)}})},e.calculatePriceUnassigned=function(){var a=t.defer();$("#addServiceObjView").modal("hide"),e.searchPriceUnObj.PRICEDT=e.order.fromdate,e.order.partner_id&&(e.searchPriceUnObj.ClientCD=e.order.partner_id.externalId);var s=r.getServicePrice(e.searchPriceUnObj);return s.then(function(t){if(t.Message)alert("Please select partner/partner with code");else{var s=JSON.parse(t);if("error"!=s.status){var i=s.MRPList.split(",");e.order.paymentdetails.amount=0,i.forEach(function(t){e.order.paymentdetails.amount+=parseInt(t)});for(var n=0;n<i.length;n++)e.order.masterservices[n].price=i[n];a.resolve(t.response)}else alert(s.data)}}),a.promise},e.addService=function(){e.temp.savebtndisable=!0,e.temp.services=e.temp.services.concat(e.displaynewservices),e.order.masterservices=angular.copy(e.temp.services),"Unassigned"!=e.order.status&&(e.order.paymentdetails.amount=0,e.order.masterservices.forEach(function(t){t.service_id.price&&(t.price=angular.copy(t.service_id.price),e.order.paymentdetails.amount=parseInt(e.order.paymentdetails.amount)+parseInt(t.price))})),e.updateWorkplan().then(function(){e.updateserviceModal(),e.displaynewservices=[]})},e.removeService=function(t,a){e.displaynewservices.splice(a,1),e.searchPriceObj.TestListArray.splice(a,1),e.displaynewservices.length||(e.temp.savebtndisable=!0,e.displaynewservices=[],e.searchPriceObj.TestListArray=[])},e.getAllUnassignedServices=function(t,a){var s={};s.currentPage=1,s.itemPerPage=20;var i={};i.servicename=t,a.partner_id&&(i.partner_id=a.partner_id._id);var r=n.get(s,i);return r.then(function(t){return e.ServiceList=t.response,e.ServiceList})},e.SelectUnassignedService=function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.services=[],e.temp.services.push(e.service_sm),e.ServiceList=[],e.temp.servicename=""},e.removeUnassignedService=function(t,a){e.temp.services.splice(a,1)},e.RecalculateAmount=function(){e.order.paymentdetails.amount=0,e.order.masterservices.forEach(function(t){t.price&&(e.order.paymentdetails.amount=parseInt(e.order.paymentdetails.amount)+parseInt(t.price))})},e.updatebranchModal=function(){e.order.logobj.action="branchchange",$("#updateBranchObjView").modal("show")},e.updateBranch=function(){$("#updateBranchObjView").modal("hide"),e.order.branch_id=angular.copy(e.temp.branch_id),e.updateWorkplan().then(function(){e.temp={},e.order.logobj={},$(".modal-backdrop").remove(),a.path("/home/order")})},e.updateremarksModal=function(){e.order.logobj.action="remarkchange",e.temp.visitcomments=angular.copy(e.order.visitcomments),$("#updateRemarksObjView").modal("show")},e.updateRemarks=function(){$("#updateRemarksObjView").modal("hide"),e.order.comments.push("Remark : "+e.temp.visitcomments),e.order.logobj.comments=angular.copy(e.temp.visitcomments),e.updateWorkplan().then(function(){e.temp={},e.order.logobj={}})},e.showAddresses=function(){$("#patientAddressesObj").modal("show")},e.openAddAddress=function(){e.tempaddcity=void 0,e.tempaddarea=void 0,$("#patientAddressesObj").modal("hide"),$("#AddressObjectViewForOrder").modal("show")},e.editServiceAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.tempaddcity=angular.copy(e.addaddress.city_id),e.getAddArea(e.tempaddcity._id),e.tempaddarea=angular.copy(e.addaddress.area_id),e.pincodes=angular.copy(e.addaddress.area_id.pincodes),e.editAdd=!0,$("#patientAddressesObj").modal("hide"),$("#AddressObjectViewForOrder").modal("show")},e.checkServiceAddress=function(t,a){t.servicedeliveryaddress="true",e.order.servicedeliveryaddress=t,e.order.area_id=t.area_id;for(var s=0;s<e.order.client_id.demography.addresses.length;s++)s!=a?e.order.client_id.demography.addresses[s].servicedeliveryaddress="false":e.order.client_id.demography.addresses[a].servicedeliveryaddress="true";$("#patientAddressesObj").modal("hide"),e.updatePatient().then(function(t){e.order.logobj.action="addresschange",e.order.logobj.comments="Address changed",e.order.client_id=t,e.order.status="Unassigned",e.order.assignto=null,e.order.assignby=null,e.order.partner_id=null;for(var a=0;a<e.order.masterservices.length;a++)delete e.order.masterservices[a].price;e.order.paymentdetails.amount=0,e.updateWorkplan().then(function(){e.order.logobj={},e.editAdd=!1,e.addaddress={},e.tempaddcity=void 0,e.tempaddarea=void 0})})},e.addAddressForOrder=function(){if(e.addaddress.address="",e.addaddress.wing&&(e.addaddress.address+=e.addaddress.wing.trim()+", "),e.addaddress.flatno&&(e.addaddress.address+=e.addaddress.flatno.trim()+", "),e.addaddress.building&&(e.addaddress.address+=e.addaddress.building.trim()+", "),e.addaddress.plotno&&(e.addaddress.address+="Plot no. "+e.addaddress.plotno.trim()+", "),e.addaddress.sectorno&&(e.addaddress.address+="Sector no. "+e.addaddress.sectorno.trim()+", "),e.addaddress.streetname&&(e.addaddress.address+=e.addaddress.streetname.trim()+", "),e.addaddress.landmark&&(e.addaddress.address+=e.addaddress.landmark.trim()+", "),e.addaddress.servicedeliveryaddress="true",1==e.editAdd){e.order.logobj.comments="Address updated";for(var t=0;t<e.order.client_id.demography.addresses.length;t++)e.order.client_id.demography.addresses[t]._id==e.addaddress._id?e.order.client_id.demography.addresses[t]=angular.copy(e.addaddress):e.order.client_id.demography.addresses[t].servicedeliveryaddress="false"}else{e.order.logobj.comments="Address added";for(var t=0;t<e.order.client_id.demography.addresses.length;t++)e.order.client_id.demography.addresses[t].servicedeliveryaddress="false";e.order.client_id.demography.addresses.push(e.addaddress)}$("#AddressObjectViewForOrder").modal("hide"),e.updatePatient().then(function(t){e.order.client_id=t,e.order.logobj.action="addresschange";for(var a=0;a<e.order.client_id.demography.addresses.length;a++)"true"==e.order.client_id.demography.addresses[a].servicedeliveryaddress&&(e.order.servicedeliveryaddress=e.order.client_id.demography.addresses[a],e.order.area_id=e.order.client_id.demography.addresses[a].area_id);e.order.status="Unassigned",e.order.assignto=null,e.order.assignby=null,e.order.partner_id=null;for(var a=0;a<e.order.masterservices.length;a++)delete e.order.masterservices[a].price;e.order.paymentdetails.amount=0,e.updateWorkplan().then(function(){e.order.logobj={},e.editAdd=!1,e.addaddress={},e.tempaddcity=void 0,e.tempaddarea=void 0})})},e.deleteServiceAddress=function(t,a){1!=e.order.client_id.demography.addresses.length?(e.order.client_id.demography.addresses.splice(a,1),"true"==t.servicedeliveryaddress&&(e.order.client_id.demography.addresses[0].servicedeliveryaddress="true",e.order.servicedeliveryaddress=e.order.client_id.demography.addresses[0],e.order.area_id=e.order.client_id.demography.addresses[0].area_id),$("#patientAddressesObj").modal("hide"),e.updatePatient().then(function(t){e.order.logobj.action="addresschange",e.order.logobj.comments="Address deleted",e.order.client_id=t,e.order.status="Unassigned",e.order.assignto=null,e.order.assignby=null,e.order.partner_id=null;for(var a=0;a<e.order.masterservices.length;a++)delete e.order.masterservices[a].price;e.order.paymentdetails.amount=0,e.updateWorkplan().then(function(){e.order.logobj={},e.editAdd=!1,e.addaddress={},e.tempaddcity=void 0,e.tempaddarea=void 0})})):alert("not allowed")},e.updatePatient=function(){var a=t.defer(),s=o.updatePatient(e.order.client_id);return s.then(function(t){t.response._id&&(e.order.client_id=t.response),a.resolve(t.response)}),a.promise},e.closeAddAddressForOrder=function(){e.editAdd=!1,e.addaddress={},e.tempaddcity="",e.tempaddarea="",$("#AddressObjectViewForOrder").modal("hide"),$("#patientAddressesObj").modal("show")},e.getCities=function(){var t=d.getList();t.then(function(t){e.cityList=t.response})},e.selectAddCity=function(t){t?(e.addaddress.city_id=t,e.getAddArea(t._id)):e.addaddress.city_id={}},e.getAddArea=function(t){var a={};a.city_id=t;var s=l.get(a);s.then(function(t){e.areaList=t.response})},e.selectAddArea=function(t){t?(e.addaddress.area_id=t,e.pincodes=t.pincodes,e.getSubLocation(t._id)):e.addaddress.area_id={}},e.getSubLocation=function(t){var a={};a.type="SL",a.area_id=t;var s=l.get(a);s.then(function(t){e.subLocationList=t.response})},e.getSessionStorage(),e.getCities(),e.getAddArea(),e.getSubLocation(),console.log(e.order)};e.$inject=["$scope","$q","$location","$state","orderFactory","testFactory","callFactory","clientFactory","cityFactory","areaFactory","partnerFactory","timeSlots","timeSlots30","userinfoFactory","user"],angular.module("webApp").controller("srlorderObjectController",e)}(),function(){"use strict";var e=function(e,t,a){function s(){a.get(e.paging,e.searchObj).then(function(t){e.display.partners=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}!function(){e.searchObj={},e.display={},e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,s()}();e.edit=function(e){t.path("/main/partner/"+e)},e.get=function(){s()}};e.$inject=["$scope","$location","partnerFactory"],angular.module("webApp").controller("srlpartnerController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d){function l(){e.display.type=[];var t=JSON.parse(sessionStorage.getItem("PartnerType"));e.display.type=t.childs}function c(t){s.getById(t).then(function(t){console.log(t),e.data.partner=t.response,e.tempareas=[],e.updateTrue=!0,e.changeCity(e.data.partner.info.city_id._id),angular.forEach(e.data.partner.areas,function(t){e.tempareas.push(t.area_id)}),h(),v=s.getMinMaxTime(e.data.partner.workinghour),e.temp.timeSlots=s.getTimeSlots(v).timeSlots})}function p(){i.get().then(function(t){e.display.cities=t.response})}function u(){g(),e.data.partner.areas=[],angular.forEach(e.tempareas,function(t){var a={};a.area_id=t,e.data.partner.areas.push(a)}),s.add(e.data.partner).then(function(){e.successFlag=!0,e.data.partner={},e.reportDelivery={}})}function m(){console.log(e.data.partner),g(),e.data.partner.areas=[],angular.forEach(e.tempareas,function(t){var a={};a.area_id=t,e.data.partner.areas.push(a)}),s.update(e.data.partner).then(function(t){console.log(t),e.successFlag=!0})}function g(){var t,a;e.data.partner.reportdeliverymode||(e.data.partner.reportdeliverymode=[]),e.reportDelivery.email?(t={},t.mode="EMAIL",t.charge=e.reportDelivery.emailCharges,a=s.checkIfExist("EMAIL",e.data.partner.reportdeliverymode,"mode"),a.found?e.data.partner.reportdeliverymode[a.index]=t:e.data.partner.reportdeliverymode.push(t)):(a=s.checkIfExist("EMAIL",e.data.partner.reportdeliverymode,"mode"),a.found&&e.data.partner.reportdeliverymode.splice(a.index,1)),e.reportDelivery.homedelivery?(t={},t.mode="HOME",t.charge=e.reportDelivery.homedeliveryCharges,a=s.checkIfExist("HOME",e.data.partner.reportdeliverymode,"mode"),a.found?e.data.partner.reportdeliverymode[a.index]=t:e.data.partner.reportdeliverymode.push(t)):(a=s.checkIfExist("HOME",e.data.partner.reportdeliverymode,"mode"),a.found&&e.data.partner.reportdeliverymode.splice(a.index,1)),e.reportDelivery.courier?(t={},t.mode="COURIER",t.charge=e.reportDelivery.courierCharges,a=s.checkIfExist("COURIER",e.data.partner.reportdeliverymode,"mode"),a.found?e.data.partner.reportdeliverymode[a.index]=t:e.data.partner.reportdeliverymode.push(t)):(a=s.checkIfExist("COURIER",e.data.partner.reportdeliverymode,"mode"),a.found&&e.data.partner.reportdeliverymode.splice(a.index,1))}function h(){angular.forEach(e.data.partner.reportdeliverymode,function(t){"EMAIL"==t.mode?(e.reportDelivery.email=!0,e.reportDelivery.emailCharges=t.charge):"HOME"==t.mode?(e.reportDelivery.homedelivery=!0,e.reportDelivery.homedeliveryCharges=t.charge):"COURIER"==t.mode&&(e.reportDelivery.courier=!0,e.reportDelivery.courierCharges=t.charge)})}e.data={},e.reportDelivery={},e.temp={};var v,f,y,b;d.getMap().then(function(t){e.map=t,e.marker=t.markers[0]});!function(){l(),e.display.timeSlots=JSON.parse(r),p(),"new"!=t.Id?c(t.Id):(e.data.partner={},e.data.partner.areas=[],e.data.partner.reportdeliverymode=[],e.reportDelivery={})}();e.Save=function(){e.data.partner._id?m(e.data.partner):u(e.data.partner)},e.addWorkingHour=function(){e.workinghour={},e.temp.add_ModeFlag=!0,$("#workinghourModal").modal("show")},e.editWorkingHour=function(t,a){e.temp.add_ModeFlag=!1,e.temp.whindex=t,e.workinghour=angular.copy(a),$("#workinghourModal").modal("show")},e.deleteWorkingHour=function(e){f="",$("#ConfirmPopupDeleteForWorkinHour").modal("show"),f=e},e.saveWorkingHour=function(){e.visitcharge={},e.data.partner.workinghour||(e.data.partner.workinghour=[]),e.temp.add_ModeFlag?e.data.partner.workinghour.push(e.workinghour):e.workinghour._id?e.data.partner.workinghour[e.temp.whindex]=angular.copy(e.workinghour):e.temp.whindex>-1?e.data.partner.workinghour[e.temp.whindex]=angular.copy(e.workinghour):e.data.partner.workinghour.push(e.workinghour),e.data.partner._id&&m(e.data.partner),v=s.getMinMaxTime(e.data.partner.workinghour),e.temp.timeSlots=s.getTimeSlots(v).timeSlots,$("#workinghourModal").modal("hide")},e.confirmDeleteWorkingHour=function(){e.data.partner.workinghour.splice(f,1),e.data.partner._id&&m(e.data.partner),$("#ConfirmPopupDeleteForWorkinHour").modal("hide")},e.addVisitCharge=function(){e.visitcharge={},e.temp.add_ModeFlag=!0,$("#visitChargeModal").modal("show")},e.editVisitCharge=function(t,a){e.visitcharge=angular.copy(a),e.temp.vcindex=t,e.temp.add_ModeFlag=!1,$("#visitChargeModal").modal("show")
},e.saveVisitCharge=function(){e.data.partner.visitcharges||(e.data.partner.visitcharges=[]),e.temp.add_ModeFlag?e.data.partner.visitcharges.push(e.visitcharge):e.visitcharge._id?e.data.partner.visitcharges[e.temp.vcindex]=angular.copy(e.visitcharge):e.temp.vcindex>-1?e.data.partner.visitcharges[e.temp.vcindex]=angular.copy(e.visitcharge):e.data.partner.visitcharges.push(e.visitcharge),e.data.partner._id&&m(e.data.partner),$("#visitChargeModal").modal("hide")},e.deleteVisitCharge=function(e){y="",$("#ConfirmPopupDeleteForVisitCharge").modal("show"),y=e},e.confirmDeleteVisitCharge=function(){e.data.partner.visitcharges.splice(y,1),e.data.partner._id&&m(e.data.partner),$("#ConfirmPopupDeleteForVisitCharge").modal("hide")},e.calculatePremium=function(){e.percentage=null;var t={person:e.visitcharge.person,charge:e.visitcharge.charge,premium:e.visitcharge.premiumpercent,calculatePremium:function(){var e=this.premium/100,t=this.charge+e*this.charge;return t}};e.percentage=t.calculatePremium()},e.addDropPoint=function(){e.temp.add_ModeFlag=!0,e.droppoint={},e.droppoint.coordinates={},$("#dropPointModal").modal("show")},e.editDropPoint=function(t,a){e.temp.dpindex=t,e.droppoint=angular.copy(a),e.temp.add_ModeFlag=!1,$("#dropPointModal").modal("show")},e.saveDropPoint=function(){e.data.partner.droppoints||(e.data.partner.droppoints=[]),e.temp.add_ModeFlag?e.data.partner.droppoints.push(e.droppoint):e.droppoint._id?e.data.partner.droppoints[e.temp.dpindex]=angular.copy(e.droppoint):e.temp.dpindex>-1?e.data.partner.droppoints[e.temp.dpindex]=angular.copy(e.droppoint):e.data.partner.droppoints.push(e.droppoint),e.data.partner._id&&m(e.data.partner),$("#dropPointModal").modal("hide")},e.deleteDropPoint=function(e){b="",$("#ConfirmPopupDeleteDropPoint").modal("show"),y=e},e.confirmDeleteDropPoint=function(){e.data.partner.droppoints.splice(b,1),e.data.partner._id&&m(e.data.partner),$("#ConfirmPopupDeleteDropPoint").modal("hide")},e.fullDayClick=function(){e.workinghour.fullday?(e.workinghour.to="1380",e.workinghour.from="0"):(e.workinghour.to=void 0,e.workinghour.from=void 0)},e.changeCity=function(t){e.updateTrue||(e.tempareas=[],e.data.partner.areas=[]),t&&e.getArea(t)},e.getArea=function(t){var a={};a.city_id=t;var s=n.get(a);s.then(function(t){e.areaList=t.response})},e.searcharea=function(t){var a=e.areaList.filter(function(e){return e.name&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.areaTagAdded=function(){},e.areaTagRemoved=function(){},e.clickMap=function(t){e.marker.setPosition(t.latLng)},e.addLocation=function(){$("#locationModal").modal("show"),a(function(){google.maps.event.trigger(e.map,"resize"),e.coordinates&&e.coordinates.length&&e.map.setCenter({lat:e.coordinates[1],lng:e.coordinates[0]})},500)},e.searchPlace=function(t){var t=this.getPlace();e.map.setPosition(t.geometry.location),e.map.setCenter(t.geometry.location)},e.saveLocation=function(){e.coordinates||(e.coordinates=[0,0]),e.coordinates[1]=e.marker.position.lng,e.coordinates[0]=e.marker.position.lat,$("#locationModal").modal("hide")}};e.$inject=["$scope","$stateParams","$timeout","partnerFactory","cityFactory","areaFactory","timeSlots","$rootScope","NgMap"],angular.module("webApp").controller("srlpartnerObjectController",e)}(),function(){"use strict";var e=function(e,t,a){!function(){e.searchObj={},e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,e.activeModal={}}(),e.setActive=function(t,a){"active"==t&&(e.activeModal.header="Active"),"deactive"==t&&(e.activeModal.header="Deactive"),e.activeModal.displayText=a.name,e.activeModal.delObj=a,$("#activeModal").modal("show")},e.deleteTest=function(t){$("#activeModal").modal("hide"),a.deleteTest(t,"services").then(function(){e.get()})},e.edit=function(e){t.path("/main/test/"+e)},e.onFileSelect=function(e){a.addFile(e).then(function(){})},e.get=function(){a.get(e.paging,e.searchObj).then(function(t){e.testList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})},e.get()};e.$inject=["$scope","$location","testFactory","partnertestFactory"],angular.module("webApp").controller("srltestController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(){a.add(e.test).then(function(){e.test={},e.successFlag=!0})}function n(){a.put(e.test).then(function(){e.test={},e.successFlag=!0})}function r(t){a.getById(t).then(function(t){e.test=t.response})}function o(){s.get().then(function(t){t.response.forEach(function(e){e.isParent?d.push(e):l.push(e)}),e.sampletypes=[],d.forEach(function(t){l.forEach(function(a){if(a.parent_id==t._id)switch(t.name){case"SampleType":e.sampletypes.push(a)}})})})}var d=[],l=[];!function(){"new"!=t.Id?r(t.Id):e.test={},o()}(),e.Save=function(){e.test._id?n(e.test):i(e.test)}};e.$inject=["$scope","$stateParams","testFactory","optionMasterFactory"],angular.module("webApp").controller("srltestObjectController",e)}(),function(){"use strict";var e=function(e,t,a){function s(){a.get(e.paging,e.searchObj).then(function(t){e.tubelist=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}function i(){var t=JSON.parse(sessionStorage.getItem("TubeType"));e.display.type=t.childs,e.display.company=[];var a=JSON.parse(sessionStorage.getItem("TubeCompany"));e.display.company=a.childs,e.display.color=[];var s=JSON.parse(sessionStorage.getItem("TubeColor"));e.display.color=s.childs,e.display.size=[];var i=JSON.parse(sessionStorage.getItem("TubeSize"));e.display.size=i.childs}!function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,s(),i()}(),e.edit=function(e){t.path("/main/tube/"+e)},e.addFile=function(e){a.addFile(e).then(function(){s()})},e.get=function(){s()},e.deleteTube=function(e){e._Deleted=!0,a.deleteTube(e).then(function(e){console.log(e),location.reload()})},e.getSortTubes=function(){var t="";e.search.company&&(t+="&company="+e.search.company),e.search.type&&(t+="&type="+e.search.type),e.search.size&&(t+="&size="+e.search.size),e.search.color&&(t+="&color="+e.search.color),a.getsortTubes(e.paging,t).then(function(t){e.tubelist=[],e.tubelist=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}};e.$inject=["$scope","$location","tubeFactory"],angular.module("webApp").controller("srltubeController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(t){a.update(t).then(function(t){t?e.tube={}:"",e.successFlag=!0})}function n(t){a.add(t).then(function(){e.tube={},e.successFlag=!0})}function r(t){a.getById(t).then(function(t){e.tube=t.response})}function o(){s.get().then(function(t){t.response.forEach(function(e){e.isParent?d.push(e):l.push(e)}),e.types=[],e.companies=[],e.colors=[],e.sizes=[],d.forEach(function(t){l.forEach(function(a){if(a.parent_id==t._id)switch(t.name){case"TubeType":e.types.push(a);break;case"TubeCompany":e.companies.push(a);break;case"TubeColor":e.colors.push(a);break;case"TubeSize":e.sizes.push(a)}})})})}var d=[],l=[];!function(){"new"!=t.Id?r(t.Id):e.tube={},o()}(),e.colorChange=function(){e.tube.color.code=e.tube.color.code},e.Save=function(){e.tube._id?i(e.tube):n(e.tube)}};e.$inject=["$scope","$stateParams","tubeFactory","optionMasterFactory","partnerFactory"],angular.module("webApp").controller("srltubeObjectController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r){function o(){t.get(e.paging,e.searchObj).then(function(t){e.display.users=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}function d(a){t.add(a).then(function(){e.successFlag=!0})}function l(a){t.update(a).then(function(){e.successFlag=!0,c()})}function c(){s.get().then(function(t){e.display.partners=t.response})}function p(){a.get().then(function(t){e.display.cities=t})}function u(){i.get().then(function(t){e.display.areas=t.response})}function m(){t.getRole().then(function(t){e.display.roles=t.response})}e.display.users,e.display.user={},e.display.user.profile={},e.display.user.availability={},e.display.user.userinfo={},e.display.partners={},function(){e.paging={},e.activeModal={},e.paging.currentPage=1,e.paging.itemPerPage=20,o(),c(),p(),m(),u()}(),e.edit=function(e){console.log("id called"),r.path("/main/user/"+e)},e.save=function(){e.display.user._id?l(e.display.user):d(e.display.user)},e.edituser=function(t){$("#timingModal").modal("show"),e.display.user=t},e.get=function(){o()},e.clear=function(){e.display.user={}},e.timing=function(){$("#timingModal").collapse("show")},e.closemodal=function(){$("#timingModal").collapse("hide")},e.saveTiming=function(){$("#timingModal").collapse("hide")},e.setActive=function(t,a){"active"==t&&(e.activeModal.header="Active"),"deactive"==t&&(e.activeModal.header="Deactive"),e.activeModal.displayText=a.profile.name,e.activeModal.deleteObj=a,$("#activeModal").modal("show")},e.deleteTest=function(t){$("#activeModal").modal("hide"),n.deleteTest(t,"users").then(function(){e.get()})}};e.$inject=["$scope","userinfoFactory","cityFactory","partnerFactory","areaFactory","testFactory","$location"],angular.module("webApp").controller("srluserinfoController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d){function l(){t.get().then(function(t){e.display.users=t.response})}function c(a){t.add(a).then(function(){e.display.user={},e.successFlag=!0})}function p(a){t.update(a).then(function(){e.display.user={},e.successFlag=!0})}function u(){s.get().then(function(t){e.display.partners=t.response})}function m(){a.get().then(function(t){e.display.cities=t.response})}function g(){var t={};t.type="MA",i.get(t).then(function(t){e.display.areas=t.response})}function h(){t.getRole().then(function(t){e.display.roles=t.response})}function v(a){t.getById(a).then(function(t){e.display.user=t.response,e.display.specialtest=e.display.user.profile.specialtestlist,e.display.specialneed=e.display.user.profile.specialneedlist,e.setCheckIfAllTestSelected("specialneed"),e.setCheckIfAllTestSelected("specailtest")})}function f(){o.get().then(function(t){e.display.specialneeds=t.response})}function y(){t.getservice(!0).then(function(t){e.display.specialtests=t.response})}e.display.partners=[],e.display.specialneeds,e.display.specialtests,e.temp={},e.display.timeSlots=JSON.parse(d),function(){l(),u(),m(),h(),g(),f(),y(),"new"!=r.Id?v(r.Id):(e.display.users={},e.display.user={},e.display.user.profile={},e.display.user.availability={},e.display.user.userinfo={},e.display.user.userinfo.partners=[],e.display.user.availability.morningareas=[],e.display.user.availability.eveningareas=[],e.display.setAllSpecialNeed=!1,e.display.setAllSpecaiTest=!1,e.display.user.profile.rating=1)}();var b,w;e.searchPartner=function(t){var a=e.display.partners.filter(function(e){return e.info.name&&-1!==e.info.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.getSessionStorage=function(){e.PhleboType=JSON.parse(sessionStorage.getItem("PhleboType")),e.PhleboExpertise=JSON.parse(sessionStorage.getItem("PhleboExpertise"))},e.searcharea=function(t){var a=e.display.areas.filter(function(e){return e.name&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.searchSpecialNeed=function(t){var a=e.display.specialneeds.filter(function(e){return e.name&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.setAllSpecialNeed=function(){e.display.specialneed=e.display.setAllSpecialNeed?angular.copy(e.display.specialneeds):[]},e.searchSpecialTest=function(t){console.log(t);var a=e.display.specialtests.filter(function(e){return e.specialservice&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return a},e.setAllSpecailTest=function(){e.display.setAllSpecaiTest?e.display.specialtest=angular.copy(e.display.specialtests):(e.display.specialtest=[],e.display.setAllSpecaiTest=!1)},e.setFalse=function(t){"specialneed"==t&&e.display.specialneed.length<e.display.specialneeds.length&&(e.display.setAllSpecialNeed=!1),"specailtest"==t&&e.display.specialtest.length<e.display.specialtests.length&&(e.display.setAllSpecaiTest=!1)},e.addTag=function(t){"specailtest"==t&&(e.display.setAllSpecaiTest=e.display.specialtests.length==e.display.specialtest.length?!0:!1),"specialneed"==t&&(e.display.setAllSpecialNeed=e.display.specialneeds.length==e.display.specialneed.length?!0:!1)},e.setCheckIfAllTestSelected=function(t){"specailtest"==t&&e.display.specialtests&&(e.display.setAllSpecaiTest=e.display.specialtests.length==e.display.specialtest.length?!0:!1),"specialneed"==t&&e.display.specialneeds&&(e.display.setAllSpecialNeed=e.display.specialneeds.length==e.display.specialneed.length?!0:!1)},e.save=function(){e.display.user.profile.specialneedlist=[],e.display.user.profile.specialtestlist=[],angular.forEach(e.display.specialneed,function(t){e.display.user.profile.specialneedlist.push(t._id)}),angular.forEach(e.display.specialtest,function(t){e.display.user.profile.specialtestlist.push(t._id)}),e.display.user._id?p(e.display.user):c(e.display.user)},e.clear=function(){e.display.user={}},e.timing=function(){$("#timingModal").collapse("show")},e.closemodal=function(){$("#timingModal").collapse("hide")},e.saveTiming=function(){$("#timingModal").collapse("hide")},e.config=function(){$("#configModal").modal("show")},e.saveConfig=function(){$("#configModal").modal("hide")},e.address=function(){$("#addressModal").modal("show")},e.pushPartner=function(t){var a=JSON.parse(t);if(e.display.user.userinfo.partners.length){for(var s=!1,i=0;i<e.display.user.userinfo.partners.length;i++)if(e.display.user.userinfo.partners[i]._id==a._id){s=!0;break}0==s&&e.display.user.userinfo.partners.push(a)}else e.display.user.userinfo.partners.push(a);e.display.user.userinfo.partner_id={}},e.removePartner=function(t,a){e.display.user.userinfo.partners.splice(a,1)},e.CheckRole=function(t){"providerfrontoffice"==t&&(e.display.user.userinfo.partners=[],e.display.user.userinfo.partner_id={})},e.pushMorningArea=function(t){if(e.display.user.availability.morningareas.length){for(var a=!1,s=0;s<e.display.user.availability.morningareas.length;s++)if(e.display.user.availability.morningareas[s]._id==t._id){a=!0;break}0==a&&e.display.user.availability.morningareas.push(t)}else e.display.user.availability.morningareas.push(t);e.display.user.availability.morningarea={}},e.removeMorningArea=function(t,a){e.display.user.availability.morningareas.splice(a,1)},e.pushEveningArea=function(t){if(e.display.user.availability.eveningareas.length){for(var a=!1,s=0;s<e.display.user.availability.eveningareas.length;s++)if(e.display.user.availability.eveningareas[s]._id==t._id){a=!0;break}0==a&&e.display.user.availability.eveningareas.push(t)}else e.display.user.availability.eveningareas.push(t);e.display.user.availability.eveningarea={}},e.removeEveningArea=function(t,a){e.display.user.availability.eveningareas.splice(a,1)},e.addWorkingHour=function(){e.workinghour={},e.temp.add_ModeFlag=!0,$("#workinghourModal").modal("show")},e.editWorkingHour=function(t,a){e.temp.add_ModeFlag=!1,e.temp.whindex=t,e.workinghour=angular.copy(a),$("#workinghourModal").modal("show")},e.deleteWorkingHour=function(e){w="",$("#ConfirmPopupDeleteForWorkinHour").modal("show"),w=e},e.saveWorkingHour=function(){e.display.user.workinghour||(e.display.user.workinghour=[]),e.temp.add_ModeFlag?e.display.user.workinghour.push(e.workinghour):e.workinghour._id?e.display.user.workinghour[e.temp.whindex]=angular.copy(e.workinghour):e.temp.whindex>-1?e.display.user.workinghour[e.temp.whindex]=angular.copy(e.workinghour):e.display.user.workinghour.push(e.workinghour),e.display.user._id&&p(e.display.user),b=s.getMinMaxTime(e.display.user.workinghour),e.temp.timeSlots=s.getTimeSlots(b).timeSlots,$("#workinghourModal").modal("hide")},e.confirmDeleteWorkingHour=function(){e.display.user.workinghour.splice(w,1),e.display.user._id&&p(e.display.user),$("#ConfirmPopupDeleteForWorkinHour").modal("hide")},e.getSessionStorage()};e.$inject=["$scope","userinfoFactory","cityFactory","partnerFactory","areaFactory","$location","$stateParams","specialneedFactory","timeSlots","timeSlots30","testFactory"],angular.module("webApp").controller("srluserinfoObjectController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c,p,u,m,g){function h(){l.getOtherArea().then(function(t){e.temp.otherAreaArray=t.response,e.temp.otherAreaArray&&e.temp.otherAreaArray.length&&e.temp.otherAreaArray.forEach(function(t,a){e.areaList&&e.areaList.length&&e.areaList.forEach(function(s){t._id==s.area_id._id&&e.temp.otherAreaArray.splice(a,1)})})})}function v(t){var a={};a.type="SL",a.area_id=t,d.get(a).then(function(t){e.subLocationList=t.response})}function f(t){if(e.temp.singleAddress=!1,e.temp.addressApiCallCheck=!0,e.call.servicedeliveryaddress={},e.temp.parentorder_id){if(t.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.parentAddress=angular.copy(e.temp.parentAddress),e.call.servicedeliveryaddress=e.parentAddress,t.demography.addresses.forEach(function(t){t._id==e.parentAddress._id&&(t.servicedeliveryaddress="true",e.temp.addressApiCallCheck=!1)}),e.temp.addressApiCallCheck||(e.call.client_id=angular.copy(t),e.call.patient=t,e.patient=e.call.patient,e.temppatient=angular.copy(t),e.temp.otherAddress=[],e.pincodes.forEach(function(t){e.temppatient.demography.addresses.forEach(function(a){if(t.trim()==a.pincode.trim()&&a.area_id._id==e.call.area_id._id){var s=angular.copy(a);e.temp.otherAddress.push(s)}})})),e.temp.addressApiCallCheck){e.parentAddress.servicedeliveryaddress="true",t.demography.addresses.push(e.parentAddress);var a=c.updatePatient(t);a.then(function(t){t.response._id&&(e.call.patient=t.response,e.patient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.temp.otherAddress=[],e.pincodes.forEach(function(t){e.temppatient.demography.addresses.forEach(function(a){if(t.trim()==a.pincode.trim()&&a.area_id._id==e.call.area_id._id){var s=angular.copy(a);e.temp.otherAddress.push(s)}})}))})}}else e.temp.otherAddress=[],e.pincodes.forEach(function(t){e.temppatient.demography.addresses.forEach(function(a){if(a.servicedeliveryaddress="false",t.trim()==a.pincode.trim()&&a.area_id._id==e.call.area_id._id){var s=angular.copy(a);e.temp.otherAddress.push(s)}})}),1==e.temp.otherAddress.length&&(e.temp.singleAddress=!0,e.temp.otherAddress[0].servicedeliveryaddress="true",e.temppatient.demography.addresses.forEach(function(t){e.temp.otherAddress.forEach(function(e){e._id==t._id&&(t.servicedeliveryaddress="true")})}),e.call.servicedeliveryaddress=e.temp.otherAddress[0],e.call.client_id=angular.copy(e.temppatient),e.call.patient=e.temppatient,e.patient=e.call.patient,e.temppatient=angular.copy(e.temppatient))}function y(){e.temp.applyvisitcharge=!0;var t=l.cancelPPOrder(e.call.services);e.temp.ppavailable=t;var a=[];e.call.services.forEach(function(e){a.push(e.service_id._id)});var s={ordergroupid:e.temp.orderGroupId,action:"add",ordertype:"F",pptestflage:t,fromtime:e.call.fromtime,servicedeliveryaddress_id:e.call.servicedeliveryaddress._id,partner_id:e.user.userdata.userinfo.partner_id._id,services:a};r.getVisitChargesApi(s).then(function(t){e.finalVisitCharge=t.response.totalVisitCharges,S=t.response.ppTests}),e.call.testamount=0;for(var i=0;i<e.call.services.length;i++)e.call.testamount+=e.call.services[i].service_id.price.mrp;e.user.userdata.userinfo.partner_id.visitcharges.forEach(function(t){e.call.fromtime<=t.to&&e.call.fromtime>=t.from&&t.day.forEach(function(a){a.toLowerCase()==e.lowerfromday&&(e.temp.premiumchargesper=t.premiumpercentontest,e.temp.premiumcharge=t.premiumpercentontest/100*e.call.testamount)})}),void 0==e.temp.premiumcharge&&(e.temp.premiumcharge=0)}function b(){g.get().then(function(t){e.specialneedList=t.response,e.specialneedList.forEach(function(t){"NA"==t.description.toUpperCase()&&(e.call.specialneed=t)})})}e.user=i,$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.EmailValid=/^[a-z]+[a-z0-9._]+@[a-z-]+\.[a-z.]{2,5}$/,e.datePickerPopup={},e.display={},e.datePickerPopup.minDate=new Date,e.AddressType=JSON.parse(sessionStorage.getItem("AddressType")),e.globaldata=JSON.parse(sessionStorage.getItem("globaldata")),e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.validTextName=/^[ A-Za-z0-9_.']*$/,e.EmailValid=/^[a-z]+[a-z0-9._]+@[a-z-]+\.[a-z.]{2,5}$/,e.validName=/^[ A-Za-z0-9_.']*$/,e.validmobilenumber=/^[0-9](?!.*(\d)\1{13})\d{9,}$/,e.validUser=/^[ A-Za-z0-9]*$/,e.validDigit=/^[0-9]*$/,e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.showpopup=function(){$("#dialog-confirm").dialog({resizable:!1,height:200,modal:!0,buttons:{Ok:function(){$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})};var w=new Date;w=w.setHours("00"),w=new Date(w).setMinutes("00"),w=new Date(w).setSeconds("00"),w=new Date(w).setMilliseconds("000"),e.searchObj={},e.searchObj.searchDate=new Date(w),e.searchPatientObj={},e.user.userdata.provider_id&&(e.searchObj.provider_id=e.user.userdata.provider_id._id),e.service_sm={},e.servicerequest={},e.patient={},e.disablefields=!1,e.call={},e.call.inout="incoming",e.call.type="servicerequest",e.call.services=[],e.addaddress={},e.temp={},e.temp.ppavailable=!1,e.sorting={},e.patient||(e.patient={}),e.patient.demography||(e.patient.demography={}),e.getPartners=function(){var t=o.get("",e.searchObj);t.then(function(t){e.partnerList=t.response})},e.changePartner=function(t){if(t.paymentoptions&&(e.temp.paymentoptions=t.paymentoptions),e.call.area_id||(e.call.area_id={}),e.call.area_id._id){if(e.changePartnerModal(),t){e.partnerDroppoint=t.droppoints,e.temp.droppoints=t.droppoints,e.temp.discounts=[];var a=t.discounts;a.forEach(function(t){1==t.active&&e.temp.discounts.push(t)}),e.call.sampledrop=t.droppoints[0],e.partnerVisiteCharge=t.visitcharges,e.user.userdata.userinfo.partner_id=t,e.areaList=e.user.userdata.userinfo.partner_id.areas,e.slotArea=e.user.userdata.userinfo.partner_id.areas,e.workinghours=e.user.userdata.userinfo.partner_id.workinghour,e.searchObj.partner_id=e.user.userdata.userinfo.partner_id._id}}else if(t){e.partnerDroppoint=t.droppoints,e.temp.droppoints=t.droppoints,e.temp.discounts=[];var a=t.discounts;a.forEach(function(t){1==t.active&&e.temp.discounts.push(t)}),e.call.sampledrop=t.droppoints[0],e.partnerVisiteCharge=t.visitcharges,e.user.userdata.userinfo.partner_id=t,e.areaList=e.user.userdata.userinfo.partner_id.areas,e.slotArea=e.user.userdata.userinfo.partner_id.areas,e.workinghours=e.user.userdata.userinfo.partner_id.workinghour,e.searchObj.partner_id=e.user.userdata.userinfo.partner_id._id,e.changePartnerModal()}},e.changePartnerModal=function(){e.temp.temparea=void 0,e.call.area_id={},e.slots=[],e.pincodes=[],e.temp.otherAddress=[],e.call.fromdate=void 0,e.call.fromtime=void 0,e.temppatient=void 0,e.call.services=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.temp.selectaddress=!0,e.call.servicedeliveryaddress={},e.temp.temparea=void 0},e.SelectOtherArea=function(t){e.call.fromdate?$("#dialog-confirm").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){e.temp.temparea=void 0,e.call.area_id={},e.slots=[],e.pincodes=[],e.temp.otherAddress=[],e.call.fromdate=void 0,e.call.fromtime=void 0,e.temppatient=void 0,e.call.services=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.temp.selectaddress=!0,e.call.servicedeliveryaddress={},t?(e.call.area_id=t,e.pincodes=t.pincodes,v(t._id),e.addaddress.area_id=t,e.addaddress.city_id=t.city_id):(e.call.area_id={},e.slots=[],e.pincodes=[]),$(this).dialog("close")}}}):t?(e.call.area_id=t,e.pincodes=t.pincodes,v(t._id),e.addaddress.area_id=t,e.addaddress.city_id=t.city_id):(e.call.area_id={},e.slots=[],e.pincodes=[])},e.SelectArea=function(t){e.temp.otherArea=!1,e.call.fromdate?$("#dialog-confirm").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){e.temp.temparea=void 0,e.call.area_id={},e.slots=[],e.pincodes=[],e.temp.otherAddress=[],e.call.fromdate=void 0,e.call.fromtime=void 0,e.temppatient=void 0,e.call.services=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.temp.selectaddress=!0,e.call.servicedeliveryaddress={},t?(e.call.area_id=t.area_id,e.slots=t.slots,e.pincodes=t.area_id.pincodes,v(t.area_id._id),e.addaddress.area_id=t.area_id,e.addaddress.city_id=t.area_id.city_id):(e.call.area_id={},e.slots=[],e.pincodes=[]),$(this).dialog("close")}}}):t?(e.call.area_id=t.area_id,e.slots=t.slots,e.pincodes=t.area_id.pincodes,v(t.area_id._id),e.addaddress.area_id=t.area_id,e.addaddress.city_id=t.area_id.city_id):(e.call.area_id={},e.slots=[],e.pincodes=[])},e.getPartnerArea=function(){e.temp.otherArea=!1,e.call.area_id._id=void 0,e.call.fromdate&&(e.temp.temparea=void 0,e.call.area_id={},e.slots=[],e.pincodes=[],e.temp.otherAddress=[],e.call.fromdate=void 0,e.call.fromtime=void 0,e.temppatient=void 0,e.call.services=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.temp.selectaddress=!0,e.call.servicedeliveryaddress={})},e.getAllLocation=function(){e.temp.otherArea=!0,e.call.area_id._id=void 0,e.call.fromdate?$("#dialog-confirm").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){e.temp.temparea=void 0,e.call.area_id={},e.slots=[],e.pincodes=[],e.temp.otherAddress=[],e.call.fromdate=void 0,e.call.fromtime=void 0,e.temppatient=void 0,e.call.services=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.temp.selectaddress=!0,e.call.servicedeliveryaddress={},h(),$(this).dialog("close")}}}):h()},e.otherarea=function(){$("#otherarea").modal("show")},Date.prototype.getDayName=function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e[this.getDay()]},e.selectTimeSlot=function(){e.call.fromtime=void 0,e.temp.otherArea?e.getOtherSlotWorkingHours():e.getWorkingHours()};var x,k;e.getOtherSlotWorkingHours=function(){if("partnerfrontoffice"==e.globaldata.userdata.role){if(parseInt(moment().format("mm"))<=15)var t=60*parseInt(moment().format("HH"))+90;else if(parseInt(moment().format("mm"))>=16&&parseInt(moment().format("mm"))<=45)var t=60*parseInt(moment().format("HH"))+120;else if(parseInt(moment().format("mm"))>=46)var t=60*parseInt(moment().format("HH"))+150}else if(parseInt(moment().format("mm"))<=30)var t=60*parseInt(moment().format("HH"))+60;else var t=60*parseInt(moment().format("HH"))+90;e.display.convrtdate=new Date(e.call.fromdate),e.display.currentDateCheckData=new Date(e.call.fromdate);var a=(JSON.parse(localStorage.getItem("appuser")),e.display.convrtdate);e.getDay=a,e.fromday=e.getDay.getDayName(),e.lowerfromday=e.fromday,e.lowerfromday=e.lowerfromday.toLowerCase(),e.display.selectedDateDay=e.fromday,e.user.userdata.userinfo.partner_id.workinghour.forEach(function(t){t.day.forEach(function(a){a.toLowerCase()==e.fromday.toLowerCase()&&(x=t.from,k=t.to)})}),e.maxtimepp=k;var s=new Date;s=moment(s).format("YYYY-MM-DD"),s=new Date(s),e.display.currentDateCheckData=moment(e.display.currentDateCheckData).format("YYYY-MM-DD"),e.display.currentDateCheckData=new Date(e.display.currentDateCheckData),s.toString()==e.display.currentDateCheckData.toString()&&t>=x&&(x=t),e.temp.othertimeSlotss=[];for(var i=30,n=x-i;k+(60-i)>n;n+=i)n+i<=e.maxtimepp&&e.temp.othertimeSlotss.push({time:n+i});e.call.otherfromtime=e.temp.othertimeSlotss[0].time,e.call.fromtime=e.temp.othertimeSlotss[0].time},e.getOtherSlotWorkingHourspp=function(){var t=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm"))+60;e.display.convrtdate=new Date(e.call.fromdate),e.display.currentDateCheckData=new Date(e.call.fromdate);var a=(JSON.parse(localStorage.getItem("appuser")),e.display.convrtdate);e.getDay=a,e.fromday=e.getDay.getDayName(),e.lowerfromday=e.fromday,e.lowerfromday=e.lowerfromday.toLowerCase(),e.display.selectedDateDay=e.fromday,e.user.userdata.userinfo.partner_id.workinghour.forEach(function(t){t.day.forEach(function(a){a.toLowerCase()==e.fromday.toLowerCase()&&(x=t.from,k=t.to)})}),e.maxtimeppother=k;var s=new Date;s=moment(s).format("YYYY-MM-DD"),s=new Date(s),e.display.currentDateCheckData=moment(e.display.currentDateCheckData).format("YYYY-MM-DD"),e.display.currentDateCheckData=new Date(e.display.currentDateCheckData),s.toString()==e.display.currentDateCheckData.toString()&&t>=x&&(x=t),x=parseInt(e.call.fromtime)+120,e.temp.othertimeSlotsspp=[];for(var i=30,n=x-i;k+(60-i)>n;n+=i)n+i<=e.maxtimeppother&&e.temp.othertimeSlotsspp.push({time:n+i});e.temp.othertimeSlotsspp.length&&(e.call.fromtimepp=e.temp.othertimeSlotsspp[0].time)},e.checktime=function(e,t){return e>=t?!0:void 0};var P;e.getWorkingHours=function(){e.selecteddate=moment(e.call.fromdate).format("DD-MM-YYYY"),e.compareDate=moment(new Date).format("DD-MM-YYYY");var t=parseInt(moment().format("mm"));if("partnerfrontoffice"==e.globaldata.userdata.role){if(t>15)var a=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm"))+60;else var a=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm"))+30;e.cutOffTimeForSelectedTimeSlot=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm"))+75}else{if(parseInt(moment().format("mm"))<30)var a=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm"))+30;else var a=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm"));if(0==parseInt(moment().format("mm")))var a=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm"));e.cutOffTimeForSelectedTimeSlot=60*parseInt(moment().format("HH"))+parseInt(moment().format("mm"))+30}e.temppatient=void 0,e.call.services=[],e.temp.ppavailable=!1,e.temp.otherAddress=[],e.call.remark=void 0,e.temp.selectaddress=!0,e.call.servicedeliveryaddress={},P=moment(e.call.fromdate).diff(moment().startOf("day").toISOString(),"days"),e.fromday=e.call.fromdate.getDayName(),e.lowerfromday=e.fromday.toLowerCase();var s=o.getMinMaxTimeByDay(e.workinghours,e.fromday);e.maxtime=s.max,0!=P&&(a=s.min);var i=o.getPartnerAreaSlots(e.user.userdata.userinfo.partner_id.areas,e.call.area_id._id);e.temp.timeSlots=o.getAvailableSlotByDay(e.user.userdata.userinfo.partner_id.workinghour,e.fromday,i,a),e.searchObj.searchDate=e.call.fromdate,e.searchObj.area_id=e.call.area_id._id,e.sorting.sortfield="fromtime",e.sorting.sort="asc";var n=l.getOrderList(e.searchObj,void 0,e.sorting);n.then(function(t){function a(e){_.each(e,function(e,t){0==t&&(e.firstpatientslot=!0),s.push(e)})}e.orderList=t.response;var s=[],i=_.groupBy(e.orderList,function(e){return[e.orderGroupId,e.fromtime].sort()});_.each(i,a),void 0!=s&&(e.orderList=s),e.temp.timeSlots.forEach(function(t){t.slots=[],t.subSlots=[];for(var a=t[e.lowerfromday],s={count:0,times:[]},i=0;2>i;i++)e.maxtime>=parseInt(t.time)+30*i&&t.subSlots.push(parseInt(t.time)+30*i);a||(a=0);for(var n=0;n<e.orderList.length;n++)e.orderList[n].fromtime!=t.time&&e.orderList[n].fromtime!=parseInt(t.time)+30||"Cancelled"==e.orderList[n].status||1!=e.orderList[n].firstpatientslot||(s.count++,s.times.push(e.orderList[n].fromtime));for(var r=0;a>r;r++){var o={available:!0,appTime:"Open"};s.count&&(o.available=!1,o.appTime=s.times[s.count-1],s.times.splice(s.count-1,1),s.count--),t.slots.push(o)}}),$("#slotModal").modal("show")})},e.getppWorkingHours=function(){if(parseInt(e.call.fromtime)%60==0)var t=parseInt(e.call.fromtime)+120;else var t=parseInt(e.call.fromtime)+60;e.temp.pptimecheck=parseInt(e.call.fromtime)+120,P=moment(e.call.fromdate).diff(moment().startOf("day").toISOString(),"days"),e.fromday=e.call.fromdate.getDayName(),e.lowerfromday=e.fromday.toLowerCase();var a=o.getMinMaxTimeByDay(e.workinghours,e.fromday);e.maxtimeregpp=a.max;var s=o.getPartnerAreaSlots(e.user.userdata.userinfo.partner_id.areas,e.call.area_id._id);e.temp.timeppSlotss=o.getAvailableSlotByDay(e.user.userdata.userinfo.partner_id.workinghour,e.fromday,s,t),e.searchObj.searchDate=e.call.fromdate,e.searchObj.area_id=e.call.area_id._id,e.sorting.sortfield="fromtime",e.sorting.sort="asc";var i=l.getOrderList(e.searchObj,void 0,e.sorting);i.then(function(t){function a(e){_.each(e,function(e,t){0==t&&(e.firstpatientslot=!0),s.push(e)})}e.orderList=t.response;var s=[],i=_.groupBy(e.orderList,function(e){return[e.orderGroupId,e.fromtime].sort()
});_.each(i,a),void 0!=s&&(e.orderList=s),e.temp.timeppSlotss.forEach(function(t){t.slots=[],t.subSlots=[];for(var a=t[e.lowerfromday],s={count:0,times:[]},i=0;2>i;i++)e.maxtime>=parseInt(t.time)+30*i&&t.subSlots.push(parseInt(t.time)+30*i);a||(a=0);for(var n=0;n<e.orderList.length;n++)e.orderList[n].fromtime!=t.time&&e.orderList[n].fromtime!=parseInt(t.time)+30||"Cancelled"==e.orderList[n].status||1!=e.orderList[n].firstpatientslot||(s.count++,s.times.push(e.orderList[n].fromtime));for(var r=0;a>r;r++){var o={available:!0,appTime:"Open"};s.count&&(o.available=!1,o.appTime=s.times[s.count-1],s.times.splice(s.count-1,1),s.count--),t.slots.push(o)}}),$("#ppslotModal").modal("show")})},e.deleteServiceAddress=function(t,a){1!=e.temppatient.demography.addresses.length?(e.temppatient.demography.addresses.splice(a,1),e.call.client_id.demography.addresses.splice(a,1),"true"==t.servicedeliveryaddress&&(e.temppatient.demography.addresses[0].servicedeliveryaddress="true")):$("#NOT-ALLOWED").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}})},e.dynamicPopover={content:"Hello, World!",templateUrl:"myPopoverTemplate.html",title:"Title",html:!0},e.changeTime=function(t){t<=e.maxtime&&(e.call.fromtime=t,$("#slotModal").modal("hide"))},e.openBookAppointment=function(t,a){if(!a.orderexist){e.temp.timeSlotss=[];for(var s=30,i=parseInt(t.time)-s;i<parseInt(t.time)+(60-s);i+=s)e.temp.timeSlotss.push({time:i+s})}},e.changeppTime=function(t){if(t<=e.maxtimeregpp){e.call.frompptime=t,$("#ppslotModal").modal("hide");var a=[];S.forEach(function(e){var t={};t.service_id=e,t.price=0,a.push(t)}),C.pporder={},C.pporder.paymentdetails={},C.pporder.fromtime=e.call.frompptime,C.pporder.services=a,C.pporder.fromdate=e.call.fromdate.toISOString(),C.pporder.servicedeliveryaddress=e.call.servicedeliveryaddress,C.pporder.paymentdetails.amount=0,C.pporder.paymentdetails.discount=0,C.pporder.paymentdetails.paymentoption=e.call.paymentoption.displayname,r.createCall(C).then(e.temp.saveppandexit?function(e){$(".modal-backdrop").remove(),e.order._id&&$("#Call-Created").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){s.go("main.order"),$(this).dialog("close")}}}),$("#progressIndicator").modal("hide")}:function(t){$(".modal-backdrop").remove(),t.order._id&&$("#Call-Created").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}}),e.PatientList=[],e.call.services=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.PatientList=[],e.temp.otherAddress=[],e.temp.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.temp.ppavailable=!1,e.call.discount={},e.specialneedList.forEach(function(t){"NA"==t.description.toUpperCase()&&(e.call.specialneed=t)}),e.temp.parentorder_id||(e.temp.parentorder_id=t.order._id),e.temp.orderGroupId||(e.temp.orderGroupId=t.order.orderGroupId),e.temp.parentAddress||(e.temp.parentAddress=e.call.servicedeliveryaddress),$("#progressIndicator").modal("hide")})}},e.openppBookAppointment=function(t,a){if(!a.orderexist){e.temp.timeppSlotssdown=[];for(var s=30,i=parseInt(t.time)-s;i<parseInt(t.time)+(60-s);i+=s)e.temp.timeppSlotssdown.push({time:i+s})}},e.SearchPatientByName=function(){if(0==e.searchPatientObj.searchText.length)e.PatientList=[];else{e.PatientList=[];var t={};t.currentPage=1,t.itemPerPage=20,e.searchObj.searchText=e.searchPatientObj.searchText;var a=c.getPatientList(t,e.searchObj,!0);a.then(function(t){e.PatientList=t.response,e.PatientList.length||$("#Patient-Exist").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}})}),e.searchObj.searchText=""}},e.SelectPatient=function(t){e.searchPatientObj.searchText="",e.call.services.length?$("#dialog-confirm").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){e.PatientList=[],e.call.services=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.PatientList=[],e.temp.otherAddress=[],e.temp.selectaddress=!0,e.call.client_id=angular.copy(t),e.call.patient=t,e.patient=e.call.patient,e.temppatient=angular.copy(t),f(t),e.temp.parentorder_id||e.temp.singleAddress||$("#addressselection").modal("show"),$(this).dialog("close")}}}):(e.PatientList=[],e.call.client_id=angular.copy(t),e.call.patient=t,e.patient=e.call.patient,e.temppatient=angular.copy(t),f(t),e.temp.parentorder_id||e.temp.singleAddress||$("#addressselection").modal("show"))},e.editPatient=function(t){e.temp.altnumber=[],e.call.patient=angular.copy(t),e.call.client_id=angular.copy(t),e.patient=angular.copy(t),e.patient.demography.altnumber.length&&(e.temp.altnumber=e.patient.demography.altnumber),e.temp.showonlypatientupdate=!0,$("#bookAppointmentObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.newPatient=function(){e.searchPatientObj.searchText="",e.addaddress.sublocation_id=void 0,e.temp.sublocationid=void 0,e.addaddress.pincode=void 0,e.temp.sublocation_id=[],e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",e.PatientList=[],e.call.services=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.PatientList=[],e.temp.otherAddress=[],e.temp.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.PatientList=[],e.patient={},e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[],e.patient.demography.agetype="YEARS",e.patient.demography.altnumber=[],$("#AddPatientObjectView").modal("show"),e.temp.altnumber.length&&delete e.temp.altnumber},e.addAddressForOrder=function(){if(e.addaddress.address="",e.addaddress.wing&&(e.addaddress.address+=e.addaddress.wing.trim()+", "),e.addaddress.flatno&&(e.addaddress.address+=e.addaddress.flatno.trim()+", "),e.addaddress.floor&&(e.addaddress.address+="Floor no. "+e.addaddress.floor.trim()+", "),e.addaddress.building&&(e.addaddress.address+=e.addaddress.building.trim()+", "),e.addaddress.plotno&&(e.addaddress.address+="Plot no. "+e.addaddress.plotno.trim()+", "),e.addaddress.sectorno&&(e.addaddress.address+="Sector no. "+e.addaddress.sectorno.trim()+", "),e.addaddress.streetname&&(e.addaddress.address+=e.addaddress.streetname.trim()+", "),e.addaddress.landmark&&(e.addaddress.address+=e.addaddress.landmark.trim()+", "),e.addaddress.area&&(e.addaddress.address+=e.addaddress.area.trim()+", "),e.patient.demography.addresses.length){e.patient.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.addaddress.servicedeliveryaddress="true";var t=angular.copy(e.addaddress),a=!0;e.patient.demography.addresses.forEach(function(t){t._id==e.addaddress._id&&(a=!1,t.title=e.addaddress.title,t.city_id=e.addaddress.city_id,t.pincode=e.addaddress.pincode,t.address=e.addaddress.address,t.wing=e.addaddress.wing,t.flatno=e.addaddress.flatno,t.floor=e.addaddress.floor,t.building=e.addaddress.building,t.plotno=e.addaddress.plotno,t.sectorno=e.addaddress.sectorno,t.streetname=e.addaddress.streetname,t.landmark=e.addaddress.landmark,t.sublocation_id=e.addaddress.sublocation_id,t.servicedeliveryaddress="true")}),a&&e.patient.demography.addresses.push(t)}else{e.addaddress.servicedeliveryaddress="true";var t=angular.copy(e.addaddress);e.call.client_id.demography.addresses.push(t),e.temppatient&&e.temppatient.demography.addresses.push(t)}e.call.city_id=angular.copy(t.city_id),e.call.area_id=angular.copy(t.area_id),e.call.pincode=angular.copy(t.pincode),e.pincodes=angular.copy(e.call.area_id.pincodes),e.call.servicedeliveryaddress=angular.copy(t),e.savePatient(),$("#AddressObjectViewForOrder").modal("hide"),$("#AddressObjectView").modal("hide")},e.savePatient=function(){if(e.addaddress.address="",e.addaddress.wing&&(e.addaddress.address+=e.addaddress.wing.trim()+", "),e.addaddress.flatno&&(e.addaddress.address+=e.addaddress.flatno.trim()+", "),e.addaddress.floor&&(e.addaddress.address+="Floor no. "+e.addaddress.floor.trim()+", "),e.addaddress.building&&(e.addaddress.address+=e.addaddress.building.trim()+", "),e.addaddress.plotno&&(e.addaddress.address+="Plot no. "+e.addaddress.plotno.trim()+", "),e.addaddress.sectorno&&(e.addaddress.address+="Sector no. "+e.addaddress.sectorno.trim()+", "),e.addaddress.streetname&&(e.addaddress.address+=e.addaddress.streetname.trim()+", "),e.addaddress.landmark&&(e.addaddress.address+=e.addaddress.landmark.trim()+", "),e.addaddress.area&&(e.addaddress.address+=e.addaddress.area.trim()+", "),e.temp.altnumber.length&&(e.patient.demography.altnumber=e.temp.altnumber.map(function(e){return e.text})),e.patient._id){var t=c.updatePatient(e.patient);t.then(function(t){t.response._id&&($("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.call.patient=t.response,e.patient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.temp.otherAddress=[],e.pincodes.forEach(function(t){e.temppatient.demography.addresses.forEach(function(a){if(t.trim()==a.pincode.trim()&&a.area_id._id==e.call.area_id._id){var s=angular.copy(a);e.temp.otherAddress.push(s)}})}),e.temp.otherAddress.forEach(function(t){"true"==t.servicedeliveryaddress&&(e.call.servicedeliveryaddress=t)}))})}else{e.patient.partner_id=e.call.partner_id,e.addAddress();var t=c.addPatient(e.patient);t.then(function(t){t.response._id&&($("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.call.patient=t.response,e.patient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.temp.otherAddress=[],e.pincodes.forEach(function(t){e.temppatient.demography.addresses.forEach(function(a){if(t.trim()==a.pincode.trim()&&a.area_id._id==e.call.area_id._id){var s=angular.copy(a);e.temp.otherAddress.push(s)}})}),e.temp.otherAddress.forEach(function(t){"true"==t.servicedeliveryaddress&&(e.call.servicedeliveryaddress=t)}))})}$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.openAddAddress=function(){e.temp.sublocation_id=[],e.addaddress._id=void 0,e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",$("#bookAppointmentObjectView").modal("hide"),$("#AddressObjectViewForOrder").modal("show")},e.closeAddAddressForOrder=function(){e.editAdd=!1,e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",$("#AddressObjectViewForOrder").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.changesublocation=function(t){t&&(e.addaddress.pincode=t.pincodes[0])},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=angular.copy(s),e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s)}}else if(e.temp.parentAddress)e.patient.demography.addresses=[],e.patient.demography.addresses.push(e.temp.parentAddress),e.call.servicedeliveryaddress=e.temp.parentAddress;else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s)}},e.otherAddSelection=function(){e.temp.otherAddress=[],e.pincodes.forEach(function(t){e.temppatient.demography.addresses.forEach(function(a){if(t.trim()==a.pincode.trim()&&a.area_id._id==e.call.area_id._id){var s=angular.copy(a);e.temp.otherAddress.push(s)}})}),$("#addressselection").modal("show")},e.temp.selectaddress=!0,e.checkServiceAddress=function(t){e.temp.selectaddress=!1,e.temp.otherAddress.forEach(function(e){e.servicedeliveryaddress=e._id==t._id?"true":"false"})},e.updatedServiceAdd=function(){e.temppatient.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.temppatient.demography.addresses.forEach(function(t){e.temp.otherAddress.forEach(function(a){"true"==a.servicedeliveryaddress&&t._id==a._id&&(t.servicedeliveryaddress="true",e.call.servicedeliveryaddress=angular.copy(t))})})},e.temp.sublocation_id=[],e.editServiceAddress=function(t,a){t?(t.index=a,e.addaddress=angular.copy(t)):e.temppatient.demography.addresses.forEach(function(t,a){"true"==t.servicedeliveryaddress&&(t.index=a,e.addaddress=angular.copy(t))}),e.temp.sublocation_id=[],e.temp.sublocation_id.push(e.addaddress.sublocation_id),e.editAdd=!0,$("#addressselection").modal("hide"),$("#bookAppointmentObjectView").modal("hide"),$("#AddressObjectViewForOrder").modal("show")},e.changesublocation=function(){e.temp.sublocation_id.length&&e.temp.sublocation_id.length>1&&e.temp.sublocation_id.splice(0,1),e.temp.sublocation_id.forEach(function(t){e.addaddress.sublocation_id=t,e.temp.sublocationid=t._id,e.addaddress.pincode=t.pincodes[0]})},e.loadSublocation=function(t){var a=e.subLocationList.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return 0==a.length&&alert("no result found"),a},e.tagRemoved=function(){e.addaddress.sublocation_id=void 0,e.temp.sublocationid=void 0,e.addaddress.pincode=void 0},e.clearPatient=function(){e.call.patient=angular.copy(e.temppatient),e.temppatient&&(e.call.client_id=angular.copy(e.temppatient)),e.patient=angular.copy(e.temppatient),$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.closeAppointment=function(){$("#bookAppointmentObjectView").modal("hide")},e.getAllServices=function(t){var a={};a.currentPage=1,a.itemPerPage=100,t.active=!0,u.getpartnerservices(a,t).then(function(t){e.ServiceList=t.response,e.ServiceList.length||$("#Test-Exist").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}})})},e.setPrice=function(){e.call.amount=0;for(var t=0;t<e.call.services.length;t++)e.call.amount+=0==t?e.call.services[t].service_id.price.mrp+e.finalVisitCharge:e.call.services[t].service_id.price.mrp};var S;e.showPPAddButton=function(t){var a=[];return t.postsample?(t.postservices.forEach(function(t){var s=_.find(e.call.services,function(e){return e.service_id._id==t._id});s&&a.push(s)}),t.postservices.length==a.length?!1:!0):!1},e.addPPTest=function(t){t.forEach(function(t){var a={};a.service_id=t,e.call.services.push(a)}),y(),e.addDiscount()},e.discountamount=0,e.discountper=0,e.temp.discountname="NO DISCOUNT";var O=0;e.addDiscount=function(){e.discountamount=0;var t=0;void 0==e.call.discount&&(e.call.discount={}),void 0==e.call.discount.discount&&(e.call.discount.discount=0);var a=angular.copy(e.call.services);a.forEach(function(a){0==a.service_id.price.discountnotapplicable&&(e.discountper=e.call.discount.discount,t+=a.service_id.price.mrp*e.call.discount.discount/100,e.discountamount=Math.round(t),e.temp.discountname=angular.copy(e.call.discount.name),O=a.service_id.price.mrp*e.call.discount.discount/100,a.service_id.price.discountTestPrice=0!=e.discountper?a.service_id.price.mrp-O:"")}),e.call.services=angular.copy(a),void 0==e.temp.discountname&&(e.temp.discountname="NO DISCOUNT")},e.SelectService=function(t){var a=!0;e.call.services.forEach(function(e){e.service_id._id==t._id&&($("#TestAlready-Exist").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}}),a=!1)}),t.postservices.length&&(t.showpplabel=!0);var s=[];if(s=r.testpresentinaddedprofile(e.call.services,t),s.length>0){var i=void 0;s.forEach(function(t){e.call.services.forEach(function(a,s){a.service_id.name==t&&(i=void 0==i?t:i+","+t,e.call.services.splice(s,1))})}),$("#profile-Exist").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}})}var n=void 0;n=r.selectedtestpresentinprofile(e.call.services,t);var o=[];if(o=r.testpresentinaddedpackage(e.call.services,t),o.length>0){var d=void 0;o.forEach(function(t){e.call.services.forEach(function(a,s){a.service_id.name==t&&(d=void 0==d?t:d+","+t,e.call.services.splice(s,1))})}),$("#package-Exist").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}})}var l=!0;l=r.selectedtestpresentinpackage(e.call.services,t),a&&n&&l&&(e.service_sm={},e.service_sm.service_id=angular.copy(t),e.call.services.push(e.service_sm),y(),e.addDiscount()),e.service_sm={},e.service_sm.service_id={},e.call.amount=0,e.ServiceList=[],e.searchObj.servicename=""};var A="";e.showDeleteModel=function(e){A=e,$("#delServiceModal").modal("show")},e.closedeletemodal=function(){$("#delServiceModal").modal("hide")},e.deleteService=function(){e.call.services.splice(A,1),y(),e.addDiscount(),$("#delServiceModal").modal("hide"),$(".modal-backdrop").remove()},e.changeinout=function(){e.hideservice="outgoing"==e.call.inout?!0:!1},e.cancelCall=function(){e.call.patient={},e.call.services=[],r.currentcall=void 0,s.go("main.order")},e.changeCallType=function(){"servicerequest"==e.call.type?(e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname="",e.whenServiceRequest=!0,e.whenRequestStatus=!1):"requeststatus"==e.call.type?(e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname="",e.whenRequestStatus=!0,e.whenServiceRequest=!1):(e.call.patient={},e.whenServiceRequest=!1,e.whenRequestStatus=!1),e.call.services=[]},e.getOtherSlotWorkingHourspopup=function(){e.getOtherSlotWorkingHourspp(),$("#selectpptime").modal("show")},e.otherPPvisit=function(){var t=[];S.forEach(function(e){var a={};a.service_id=e,a.price=0,t.push(a)}),C.pporder={},C.pporder.paymentdetails={},C.pporder.fromtime=e.call.fromtimepp,C.pporder.services=t,C.pporder.fromdate=e.call.fromdate.toISOString(),C.pporder.servicedeliveryaddress=e.call.servicedeliveryaddress,C.pporder.paymentdetails.amount=0,C.pporder.paymentdetails.discount=0,C.pporder.paymentdetails.paymentoption=e.call.paymentoption.displayname,r.createCall(C).then(e.temp.saveppandexit?function(e){$("#selectpptime").modal("hide"),$(".modal-backdrop").remove(),e.order._id&&$("#Call-Created").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){s.go("main.order"),$(this).dialog("close")}}})}:function(t){$("#selectpptime").modal("hide"),$(".modal-backdrop").remove(),t.order._id&&$("#Call-Created").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}}),e.PatientList=[],e.call.services=[],e.call.remark=void 0,e.PatientList=[],e.temp.otherAddress=[],e.temp.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.temp.ppavailable=!1,e.call.discount={},e.specialneedList.forEach(function(t){"NA"==t.description.toUpperCase()&&(e.call.specialneed=t)}),e.temp.parentorder_id||(e.temp.parentorder_id=t.order._id),e.temp.orderGroupId||(e.temp.orderGroupId=t.order.orderGroupId),e.temp.parentAddress||(e.temp.parentAddress=e.call.servicedeliveryaddress)})},e.closeOtherPPmodel=function(){$(".modal-backdrop").remove()};var C={};e.saveOrder=function(t){$("#progressIndicator").modal("show");var a=[];e.call.services.forEach(function(e){var t={};t.service_id=e.service_id._id,t.price=e.service_id.price.mrp,a.push(t)}),e.temp.premiumchargesper||(e.temp.premiumchargesper=0),C={source:"WEB",provider_id:e.searchObj.provider_id,client_id:e.call.client_id._id,partner_id:e.call.partner_id._id,fromdate:e.call.fromdate.toISOString(),todate:e.call.todate.toISOString(),status:"Unassigned",specialneed:e.call.specialneed,services:a,servicedeliveryaddress:e.call.servicedeliveryaddress,paymentdetails:{amount:e.temp.premiumcharge+e.call.testamount,discount:-1*e.temp.premiumchargesper,paymentoption:e.call.paymentoption.displayname,orderDiscount:e.call.discount},droppointaddress:e.call.sampledrop,comment:e.call.remark,createdbyname:e.call.createdby,area_id:e.call.area_id._id,fromtime:e.call.fromtime,ordertype:"F"},e.temp.orderGroupId&&(C.orderGroupId=e.temp.orderGroupId),e.temp.parentorder_id&&(C.parentorder_id=e.temp.parentorder_id),"saveExit"==t&&r.createCall(C).then(function(e){$(".modal-backdrop").remove(),e.order._id&&$("#Call-Created").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){s.go("main.order"),$(this).dialog("close")}}}),$("#progressIndicator").modal("hide")}),"saveAddppexit"==t&&(e.temp.pppostvisitcheck=!1,e.temp.disableforaddpatientcheck=!1,e.temp.ppvistparentid?($("#progressIndicator").modal("hide"),$("#addpp-test").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}})):(e.temp.saveppandexit=!0,e.temp.otherArea?e.getOtherSlotWorkingHourspopup():e.getppWorkingHours())),"saveAddpp"==t&&(e.temp.pppostvisitcheck=!1,e.temp.disableforaddpatientcheck=!1,e.temp.ppvistparentid?($("#progressIndicator").modal("hide"),$("#addpp-test").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}})):(e.temp.saveppandexit=!1,e.temp.otherArea?e.getOtherSlotWorkingHourspopup():e.getppWorkingHours())),"addPatient"==t&&r.createCall(C).then(function(t){$(".modal-backdrop").remove(),t.order._id&&$("#Call-Created").dialog({resizable:!1,height:150,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}}),e.PatientList=[],e.call.services=[],e.call.remark=void 0,e.PatientList=[],e.temp.otherAddress=[],e.temp.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.call.discount={},e.specialneedList.forEach(function(t){"NA"==t.description.toUpperCase()&&(e.call.specialneed=t)}),e.temp.orderGroupId||(e.temp.orderGroupId=t.order.orderGroupId),e.temp.parentorder_id||(e.temp.parentorder_id=t.order._id),e.temp.parentAddress||(e.temp.parentAddress=e.call.servicedeliveryaddress),$("#progressIndicator").modal("hide")})};JSON.parse(sessionStorage.getItem("globaldata"));e.initializePaging(),b(),e.user.userdata.userinfo.partners.length?e.partnerList=e.user.userdata.userinfo.partners:e.getPartners(),"partnerfrontoffice"==e.globaldata.userdata.role?(e.temp.partnerformtoffice=!0,e.call.partner_id=e.partnerList[0],e.changePartner(e.call.partner_id)):e.getPartners(),e.check=function(){return e.call.fromtime+120>e.maxtimeregpp?!1:!0}};e.$inject=["$scope","$q","$location","$state","user","$stateParams","callFactory","partnerFactory","areaFactory","orderFactory","clientFactory","cityFactory","partnertestFactory","$rootScope","specialneedFactory"],angular.module("webApp").controller("mlycallController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c,p,u,m,g,h){function v(){var t=r.curentWaqtTime();e.fromday=e.call.fromdate.getDayName(),e.lowerfromday=e.fromday.toLowerCase();var a=e.call.fromdate.toISOString();l.getTimeSlot(t,a,e.lowerfromday,e.call.servicedeliveryaddress.area_id._id,e.call.partner_id._id,e.call.servicedeliveryaddress._id).then(function(t){e.temp.timeSlots=t.response,$("#slotModal").modal("show")})}function f(t){if(e.address.singleAddress=!1,e.address.addressApiCallCheck=!0,e.call.servicedeliveryaddress={},e.temp.parentorder_id){if(t.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.parentAddress=angular.copy(e.address.parentAddress),e.call.servicedeliveryaddress=e.parentAddress,t.demography.addresses.forEach(function(t){t._id==e.parentAddress._id&&(t.servicedeliveryaddress="true",e.address.addressApiCallCheck=!1)}),e.address.addressApiCallCheck||(e.call.client_id=angular.copy(t),e.call.patient=t,e.patient=e.call.patient,e.newpatient=e.call.patient,e.temppatient=angular.copy(t),e.address.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.address.otherAddress.push(a)})),e.address.addressApiCallCheck){e.parentAddress.servicedeliveryaddress="true",t.demography.addresses.push(e.parentAddress);var a=c.updatePatient(t);a.then(function(t){t.response._id&&(e.call.patient=t.response,e.patient=t.response,e.newpatient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.address.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.address.otherAddress.push(a)}))})}}else e.address.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){t.servicedeliveryaddress="false";var a=angular.copy(t);e.address.otherAddress.push(a)}),1==e.address.otherAddress.length&&(e.address.singleAddress=!0,e.address.otherAddress[0].servicedeliveryaddress="true",e.temppatient.demography.addresses.forEach(function(t){e.address.otherAddress.forEach(function(e){e._id==t._id&&(t.servicedeliveryaddress="true")})}),e.call.servicedeliveryaddress=e.address.otherAddress[0],e.call.client_id=angular.copy(e.temppatient),e.call.patient=e.temppatient,e.patient=e.call.patient,e.newpatient=e.call.patient,e.temppatient=angular.copy(e.temppatient))}function y(t){e.addressCount=0,t.demography.addresses.forEach(function(t){t.area_id&&t.area_id.name&&(e.addressCount=e.addressCount+1)})}function b(){e.temp.externalId=void 0,e.address.selectedArea=void 0,e.address.selectedCity=void 0,e.address.sublocation=void 0,e.address.addresstype="Home",e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.building=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.pincode=void 0,e.address.assumeddob=void 0,D={},D.coordinates=[],e.address.area=void 0,e.newpatient.salutation=void 0,e.newpatient.firstname=void 0,e.newpatient.middlename=void 0,e.newpatient.lastname=void 0,e.newpatient.dob=void 0,e.newpatient.age=void 0,e.newpatient.agetype=void 0,e.newpatient.gender=void 0,e.newpatient.mobilenumber="",e.temp.altnumber=[],e.newpatient.email=void 0}function w(){e.temp.applyvisitcharge=!0;var t=l.cancelPPOrder(e.call.services);e.temp.ppavailable=t;var a=[];e.call.services.forEach(function(e){a.push(e.service_id._id)});var s={ordergroupid:e.temp.orderGroupId,action:"add",ordertype:"F",pptestflage:t,fromtime:e.call.fromtime,servicedeliveryaddress_id:e.call.servicedeliveryaddress._id,partner_id:e.user.userdata.userinfo.partner_id._id,services:a,fromdate:e.call.fromdate,ppfromdate:e.call.fromppdate,ppfromtime:e.call.frompptime};r.getVisitChargesApi(s).then(function(t){e.finalVisitCharge=parseInt(t.response.totalVisitCharges),e.addDiscount()});var i={};e.uniqueServices=[],i.services=angular.copy(e.call.services),T=[],l.getUniqueTest(i).then(function(t){e.uniqueServices=t.response,e.uniqueServices.forEach(function(t){t.postsample&&t.postservices.forEach(function(t){var a=_.findIndex(e.uniqueServices,function(e){return e._id==t._id});a>=0&&T.push(t._id)})}),T=_.uniqBy(T)}),e.call.services=_.uniqBy(e.call.services,"service_id._id"),e.call.testamount=0;for(var n=0;n<e.call.services.length;n++)e.call.testamount+=e.call.services[n].service_id.price.mrp;e.temp.premiumchargesper=0,e.temp.premiumcharge=0,e.user.userdata.userinfo.partner_id.visitcharges.forEach(function(t){e.call.fromtime<=t.to&&e.call.fromtime>=t.from&&t.day.forEach(function(a){a.toLowerCase()==e.lowerfromday&&(e.temp.premiumchargesper=t.premiumpercentontest,e.temp.premiumcharge=t.premiumpercentontest/100*e.call.testamount)})}),void 0==e.temp.premiumcharge&&(e.temp.premiumcharge=0)}function x(){e.temp.totalRsTest=0,e.temp.totalRsVisit=0,e.temp.totalRsBoth=0,e.temp.totalPerTest=0,e.temp.totalPerVisit=0,e.temp.totalperBoth=0,e.discountAmountPer=0,e.vDiscountRs=0,e.vDiscountPrcent=0,e.vDiscountPer=0,e.discountper=0,e.tDiscountName=[],e.vDiscountName=[],e.call.discount=[],e.discountAmountRs=0}function k(){var t=[];T.forEach(function(e){var a={};a.service_id=e,a.price=0,t.push(a)}),j.pporder={},j.pporder.paymentdetails={},j.pporder.fromtime=e.call.frompptime,j.pporder.services=t,j.pporder.fromdate=e.call.fromppdate.toISOString(),j.pporder.servicedeliveryaddress=e.call.servicedeliveryaddress,j.pporder.paymentdetails.amount=0,j.pporder.paymentdetails.discount=0,j.pporder.paymentdetails.paymentoptions=e.call.paymentoptions,e.temp.saveppandexit?r.createCall(j).then(function(t){delete e.saveBtnDisable,$(".modal-backdrop").remove(),t.order._id&&$("#callCreated").modal("show"),$("#progressIndicator").modal("hide")},function(){delete e.saveBtnDisable}):r.createCall(j).then(function(t){delete e.saveBtnDisable,$(".modal-backdrop").remove(),t.order._id&&$("#addpatientcallCreated").modal("show"),e.call.fromppdate=void 0,e.PatientList=[],e.call.services=[],e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,T=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.PatientList=[],e.address.otherAddress=[],e.address.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.temp.ppavailable=!1,e.call.discount=[],e.call.paymentoptions=[],e.call.specialNeedList=[],x(),e.temp.parentorder_id||(e.temp.parentorder_id=t.order._id),e.temp.orderGroupId||(e.temp.orderGroupId=t.order.orderGroupId),e.address.parentAddress||(e.address.parentAddress=e.call.servicedeliveryaddress),$("#progressIndicator").modal("hide")},function(){delete e.saveBtnDisable})}function P(){g.get().then(function(t){e.specialneedList=t.response})}var S;e.user=i,$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.datePickerPopup={},e.display={},e.temp={},e.clientcheckpoint=!1,e.clientUsercheckpoint=!1,e.temp.searchDisableCheck=!1,e.showGmapAddPatient=!1,e.newAddressArray=[],e.searchExistingPatientObj={},e.newpatient={},e.newPatientList=[],e.datePickerPopup.minDate=new Date,e.AddressType=JSON.parse(sessionStorage.getItem("AddressType")),e.iframeHeight=$(window).height(),e.globaldata=JSON.parse(sessionStorage.getItem("globaldata")),e.copyTestFromHistory=!1,e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.openSlotSummary=function(){$("#slotsummary").modal("show")},e.refreshSlotSummary=function(){e.temp.currentTime=moment().format("hh:mm a"),e.getSummaryTimeSlot()},e.clearValue=function(){e.temp.currentTime=void 0,e.temp.summaryArea_id=void 0,e.temp.summaryfromdate=void 0,e.temp.summarytimeSlots=[]},e.getSummaryTimeSlot=function(){if(e.temp.summarytimeSlots=[],e.temp.summaryfromdate&&e.temp.summaryArea_id){e.temp.currentTime=moment().format("hh:mm a");var t=r.curentWaqtTime(),a=e.temp.summaryfromdate.getDayName(),s=a.toLowerCase(),i=e.temp.summaryfromdate.toISOString();l.getTimeSlot(t,i,s,e.temp.summaryArea_id,e.call.partner_id._id).then(function(t){e.temp.summarytimeSlots=t.response})}},e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.showpopup=function(){$("#dialog-confirm").dialog({resizable:!1,height:200,modal:!0,buttons:{Ok:function(){$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})},e.clearData=function(){e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.selectedCity=void 0,e.address.sublocation=void 0,e.address.area=void 0,e.address.googleplace_id=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.building=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.addresstype="Home",e.address.selectedGmapArea=void 0,e.address.editaddressid=void 0,O={},O.coordinates=[]};var O={};O.coordinates=[],e.saveNewAddress=function(){e.existingPatient=[],e.searchExistingPatientObj={},e.clientUsercheckpoint=!1,$("#addingNewAddaddressFormExisting").modal("hide"),$("#acceptingNewAddressFromExixting").modal("show")},e.saveClientAddress=function(){e.addressfinalData=[],$("#acceptingNewAddressFromExixting").modal("hide");var t={};c.getAddressByClientId(e.temp.selectedPateintObj._id).then(function(a){t=a.response,t.demography.addresses||(t.demography.addresses=[]),1==t.demography.addresses.length&&"false"==t.demography.addresses[0].servicedeliveryaddress&&(t.demography.addresses[0].servicedeliveryaddress="true"),e.newAddressArray.length&&e.newAddressArray.forEach(function(e){e.servicedeliveryaddress="false",t.demography.addresses.push(e)
}),c.updatePatient(t).then(function(t){e.temp.selectedPateintObj._id=t.response._id,e.temp.selectedPateintObj.demography=t.response.demography,e.temp.selectedPateintObj.externalId=t.response.externalId,e.call.patient=t.response,e.patient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.address.otherAddress=[];var a=!1;if(e.temppatient.demography.addresses.forEach(function(t){var s=angular.copy(t);"true"==t.servicedeliveryaddress&&(a=!0),e.address.otherAddress.push(s)}),a||(e.call.servicedeliveryaddress={}),1==e.address.otherAddress.length)e.address.otherAddress.forEach(function(t){"false"==t.servicedeliveryaddress&&(t.servicedeliveryaddress="true"),e.updatedServiceAdd()});else{if(!e.call.servicedeliveryaddress._id){var s=[];e.address.otherAddress.forEach(function(e){e.servicedeliveryaddress="false",s.push(e)}),e.address.otherAddress=angular.copy(s)}e.address.otherAddress.length&&$("#addressselection").modal("show"),e.addressCount=0,e.address.otherAddress.forEach(function(t){t.area_id&&t.area_id.name&&(e.addressCount=e.addressCount+1)}),e.addressCount>=1&&(e.addressCount=parseInt(e.addressCount))}}),e.newAddressArray=[]})},e.addGmapAddress=function(){$("#gmapaddaddress").modal("hide");var t;e.address.wing&&(t=e.address.wing),e.address.flatno&&(t=e.address.wing?t+", "+e.address.flatno:e.address.flatno),e.address.floorno&&(t=e.address.flatno||e.address.wing?t+", FLOOR NO."+e.address.floorno:"FLOOR NO."+e.address.floorno),e.address.building&&(t=e.address.flatno||e.address.wing||e.address.floorno?t+", "+e.address.building:e.address.building),e.address.plotno&&(t=t+", PLOT NO."+e.address.plotno),e.address.sectorno&&(t=t+", SECTOR NO."+e.address.sectorno),e.address.streetname&&(t=t+", "+e.address.streetname),e.address.landmark&&(t=t+", "+e.address.landmark),e.address.selectedGmapArea?console.log("new add"):O=e.address.editgeolocation;var a={};a.area_id=e.address.selectedArea._id,a.city_id=e.address.selectedCity,a.sublocation_text=e.address.sublocation,a.googleplace_id=e.address.googleplace_id,a.title=e.address.addresstype,a.building=e.address.building,a.pincode=e.address.pincode,a.wing=e.address.wing,a.plotno=e.address.plotno,a.floor=e.address.floorno,a.streetname=e.address.streetname,a.landmark=e.address.landmark,a.flatno=e.address.flatno,a.sectorno=e.address.sectorno,a.address=t,a.servicedeliveryaddress="true",a.geolocation=O,e.address.editaddressid?(e.temppatient.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.temppatient.demography.addresses.forEach(function(a){a._id==e.address.editaddressid&&(a.area_id=e.address.selectedArea._id,a.city_id=e.address.selectedCity,a.sublocation_text=e.address.sublocation,a.googleplace_id=e.address.googleplace_id,a.title=e.address.addresstype,a.building=e.address.building,a.pincode=e.address.pincode,a.wing=e.address.wing,a.plotno=e.address.plotno,a.floor=e.address.floorno,a.streetname=e.address.streetname,a.landmark=e.address.landmark,a.flatno=e.address.flatno,a.sectorno=e.address.sectorno,a.address=t,a.servicedeliveryaddress="true",a.geolocation=O,a.googleplace_id=e.address.googleplace_id)})):(e.temppatient.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.temppatient.demography.addresses.push(a)),e.address.otherAddress=[],c.addNewPatientAddress(e.temppatient).then(function(t){e.temppatient.demography=t.response.demography,y(e.temppatient),e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.address.otherAddress.push(a)}),e.temppatient.demography.addresses.forEach(function(t){"true"==t.servicedeliveryaddress&&(e.call.servicedeliveryaddress=t)}),document.getElementById("addpatient-input").value="",e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.selectedCity=void 0,e.address.sublocation=void 0,e.address.area=void 0,e.address.googleplace_id=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.building=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.addresstype=void 0,e.address.selectedGmapArea=void 0,e.address.editaddressid=void 0,O={},O.coordinates=[]})};var A=new Date;A=A.setHours("00"),A=new Date(A).setMinutes("00"),A=new Date(A).setSeconds("00"),A=new Date(A).setMilliseconds("000"),e.searchObj={},e.searchObj.searchDate=new Date(A),e.searchPatientObj={},e.user.userdata.provider_id&&(e.searchObj.provider_id=e.user.userdata.provider_id._id),e.service_sm={},e.servicerequest={},e.patient={},e.newpatient={},e.disablefields=!1,e.call={},e.call.specialNeedList=[],e.specialneedList=[],e.call.inout="incoming",e.call.type="servicerequest",e.call.services=[],e.call.fromppdate=void 0,e.call.frompptime=void 0,T=[],e.addaddress={},e.temp={},e.address||(e.address={}),e.address.addresstype="Home",e.temp.ppavailable=!1,e.sorting={},e.patient||(e.patient={}),e.patient.demography||(e.patient.demography={}),e.getPartners=function(t){"test"==t&&e.changePartnerModal(),e.searchObj.partnertype||(e.searchObj.partnertype="b2b"),o.get("",e.searchObj).then(function(t){e.partnerList=t.response,"partnerfrontoffice"==e.globaldata.userdata.role&&(e.temp.partnerformtoffice=!0,e.call.partner_id=e.partnerList[0],e.changePartner(e.call.partner_id)),"partnerteamlead"==e.globaldata.userdata.role&&(e.call.partner_id=e.partnerList[0],e.changePartner(e.call.partner_id),e.display.partnername=e.call.partner_id.info.name)})},e.getTimeSlot=function(){e.call.fromtime=void 0,e.address.partnerArea=!1,e.call.services=[],x(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,T=[],v()};var S,C=[],C=[],D={};D.coordinates=[],e.changePartner=function(t){if(e.PatientList=[],e.showAddPatientBtn=!1,t.paymentoptions&&(e.temp.paymentoptions=t.paymentoptions),t.reportdeliverymode&&(e.temp.reportdeliverymode=t.reportdeliverymode,e.temp.reportdeliverymode.length&&e.temp.reportdeliverymode.forEach(function(e){e.charge||(e.charge=0)})),e.call.area_id||(e.call.area_id={}),e.call.area_id._id){if(e.changePartnerModal(),t){e.partnerDroppoint=t.droppoints,e.temp.droppoints=t.droppoints,e.temp.discounts=[];var a=t.discounts;a.forEach(function(t){1==t.active&&e.temp.discounts.push(t)}),e.call.sampledrop=t.droppoints[0],e.partnerVisiteCharge=t.visitcharges,e.user.userdata.userinfo.partner_id=t,e.areaList=e.user.userdata.userinfo.partner_id.areas,e.slotArea=e.user.userdata.userinfo.partner_id.areas,e.workinghours=e.user.userdata.userinfo.partner_id.workinghour,e.searchObj.partner_id=e.user.userdata.userinfo.partner_id._id}}else if(t){e.partnerDroppoint=t.droppoints,e.temp.droppoints=t.droppoints,e.temp.discounts=[];var a=t.discounts;a.forEach(function(t){1==t.active&&e.temp.discounts.push(t)}),e.call.sampledrop=t.droppoints[0],e.partnerVisiteCharge=t.visitcharges,e.user.userdata.userinfo.partner_id=t,e.areaList=e.user.userdata.userinfo.partner_id.areas,e.slotArea=e.user.userdata.userinfo.partner_id.areas,e.workinghours=e.user.userdata.userinfo.partner_id.workinghour,e.searchObj.partner_id=e.user.userdata.userinfo.partner_id._id,e.changePartnerModal()}},e.changePartnerModal=function(){e.call.paymentoptions=[],e.call.specialNeedList=[],e.call.discount=[],e.call.discountobj=void 0,e.call.fromppdate=void 0,e.call.frompptime=void 0,e.address.temparea=void 0,e.call.area_id={},e.slots=[],e.pincodes=[],e.address.otherAddress=[],e.call.fromdate=void 0,e.call.fromtime=void 0,e.temppatient=void 0,e.call.services=[],x(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,T=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.address.selectaddress=!0,e.call.servicedeliveryaddress={},e.address.temparea=void 0},e.getPartnerArea=function(){e.address.otherArea=!1,e.call.area_id._id=void 0,e.call.fromdate&&(e.address.temparea=void 0,e.call.area_id={},e.slots=[],e.pincodes=[],e.address.otherAddress=[],e.call.fromdate=void 0,e.call.fromtime=void 0,e.temppatient=void 0,e.call.services=[],x(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,T=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.address.selectaddress=!0,e.call.servicedeliveryaddress={})},e.otherarea=function(){$("#otherarea").modal("show")},Date.prototype.getDayName=function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e[this.getDay()]};e.checktime=function(e,t){return e>=t?!0:void 0};e.SearchPatientByName=function(){if(e.showAddPatientBtn=!1,e.searchPatientObj.searchText||e.searchPatientObj.firstname||e.searchPatientObj.middlename||e.searchPatientObj.lastname){e.PatientList=[];var t={};t.currentPage=1,t.itemPerPage=20,e.searchObj.searchText=e.searchPatientObj.searchText,e.searchObj.firstname=e.searchPatientObj.firstname,e.searchObj.middlename=e.searchPatientObj.middlename,e.searchObj.lastname=e.searchPatientObj.lastname;var a=c.getPatientList(t,e.searchObj,!0);a.then(function(t){e.PatientList=t.response,e.showAddPatientBtn=!0}),e.searchObj.searchText=""}else e.PatientList=[]},e.clearSearchData=function(){e.searchPatientObj.searchText="",e.searchPatientObj.firstname="",e.searchPatientObj.middlename="",e.searchPatientObj.lastname="",e.PatientList=[],e.showAddPatientBtn=!1},e.gitVisitHistory=function(){if($("#visitHistory").modal("show"),e.oneCheckOrder=!1,e.patient.allOrder||(e.patient.allOrder=[]),e.patient.allOrder.length)for(var t=0;t<e.patient.allOrder.length;t++)e.patient.allOrder[t].checked&&delete e.patient.allOrder[t].checked},e.SelectPatient=function(t){e.showAddPatientBtn=!1,c.getAddressByClientId(t._id).then(function(a){t=a.response,e.temp.selectedPateintObj=angular.copy(t),e.call.specialNeedList=[],e.call.specialNeedList=t.specialneeds&&t.specialneeds.length?t.specialneeds:[];var s=[];t.demography.addresses.forEach(function(e){e.area_id&&e.area_id.name&&s.push(e)}),t.demography.addresses=s,y(t),e.searchPatientObj={},e.call.services.length?(e.call.fromppdate=void 0,e.call.frompptime=void 0,e.PatientList=[],e.call.services=[],x(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,T=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.PatientList=[],e.address.otherAddress=[],e.address.selectaddress=!0,e.call.client_id=angular.copy(t),e.call.patient=t,e.patient=e.call.patient,e.newpatient=e.call.patient,e.temppatient=angular.copy(t),f(t),e.temp.parentorder_id||e.address.singleAddress||$("#addressselection").modal("show")):(e.PatientList=[],e.call.client_id=angular.copy(t),e.call.patient=t,e.patient=e.call.patient,e.newpatient=e.call.patient,e.temppatient=angular.copy(t),f(t),e.temp.parentorder_id||e.address.singleAddress||$("#addressselection").modal("show"))})},e.editPatient=function(t){e.temp.altnumber=[],e.call.patient=angular.copy(t),e.call.client_id=angular.copy(t),e.patient=angular.copy(t),e.newpatient=angular.copy(t.demography),e.temp.externalId=t.externalId,e.patient.demography.altnumber.length&&(e.temp.altnumber=e.patient.demography.altnumber),e.temp.showonlypatientupdate=!0,$("#bookAppointmentObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.gettotalreprtcharge=function(){e.totalreportcharge=0;var t=0;e.call.paymentdetails.reportdeliverymode.forEach(function(a){a.charge||(a.charge=0),t+=a.charge,e.totalreportcharge=Math.round(t)})},e.addReportDelMode=function(t){e.call.paymentdetails||(e.call.paymentdetails={}),e.call.paymentdetails.reportdeliverymode||(e.call.paymentdetails.reportdeliverymode=[]);var a=!1;if(e.temp.alredyshow=!1,_.find(e.call.paymentdetails.reportdeliverymode,function(e){e.mode==t.mode&&(a=!0)}),a)e.temp.alredyshow=a;else{var s=!1;"HARDCOPY"==t.reportdocumenttype?(_.find(e.call.paymentdetails.reportdeliverymode,function(e){"HARDCOPY"==e.reportdocumenttype&&(s=!0)}),s?$("#reportdelivery").modal("show"):e.call.paymentdetails.reportdeliverymode.push(t)):e.call.paymentdetails.reportdeliverymode.push(t)}e.display.reportdeliverymode="",e.gettotalreprtcharge()},e.removeReportmode=function(t){e.call.paymentdetails.reportdeliverymode.splice(t,1),e.temp.alredyshow=!1,e.gettotalreprtcharge()},e.addPaymentOptions=function(t){e.call.paymentoptions||(e.call.paymentoptions=[]);var a=!1;_.find(e.call.paymentoptions,function(e){e.toUpperCase()==t.toUpperCase()&&(a=!0)}),a||e.call.paymentoptions.push(t),e.display.paymentoption=""},e.removePaymentOptions=function(t){e.call.paymentoptions.splice(t,1)},e.addGmapChildPatient=function(){$("#addnewpatientmodal").modal("hide");var t=moment().toISOString(),a=e.address.parentAddress;e.temp.altnumber||(e.temp.altnumber=[]),e.temp.altnumber.length&&(e.newpatient.altnumber=e.temp.altnumber.map(function(e){return e.text}));var s={type:"nonmember",registrationdate:t,demography:{addresses:[{_id:a._id,area_id:a.area_id._id,city_id:a.city_id._id,sublocation_text:a.sublocation_text,title:a.title,wing:a.wing,flatno:a.flatno,floor:a.floor,building:a.building,plotno:a.plotno,sectorno:a.sectorno,streetname:a.streetname,landmark:a.landmark,pincode:a.pincode,assumeddob:a.assumeddob,servicedeliveryaddress:"true",address:a.address,geolocation:a.geolocation}],salutation:e.newpatient.salutation,firstname:e.newpatient.firstname,middlename:e.newpatient.middlename,lastname:e.newpatient.lastname,dob:e.newpatient.dob.toISOString(),age:e.newpatient.age,agetype:e.newpatient.agetype,gender:e.newpatient.gender,mobilenumber:e.newpatient.mobilenumber,altnumber:e.newpatient.altnumber,email:e.newpatient.email},partner_id:e.call.partner_id._id,provider_id:e.call.partner_id.provider_id._id,externalId:e.temp.externalId};c.saveNewPatientApi(s).then(function(t){e.call.patient=t.response,e.patient=t.response,e.newpatient=angular.copy(t.response),e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.temp.parentorder_id||(document.getElementById("addpatient-input").value=""),b()})},e.addGmapPatient=function(){$("#addnewpatientmodal").modal("hide");var t;e.address.wing&&(t=e.address.wing),e.address.flatno&&(t=e.address.wing?t+", "+e.address.flatno:e.address.flatno),e.address.floorno&&(t=e.address.flatno||e.address.wing?t+", FLOOR NO."+e.address.floorno:"FLOOR NO."+e.address.floorno),e.address.building&&(t=e.address.flatno||e.address.wing||e.address.floorno?t+", "+e.address.building:e.address.building),e.address.plotno&&(t=t+", PLOT NO."+e.address.plotno),e.address.sectorno&&(t=t+", SECTOR NO."+e.address.sectorno),e.address.streetname&&(t=t+", "+e.address.streetname),e.address.landmark&&(t=t+", "+e.address.landmark),e.temp.altnumber||(e.temp.altnumber=[]),e.temp.altnumber.length&&(e.newpatient.altnumber=e.temp.altnumber.map(function(e){return e.text}));var a=moment().toISOString(),s={type:"nonmember",registrationdate:a,demography:{addresses:[{_id:e.address._id,area_id:e.address.selectedArea._id,city_id:e.address.selectedCity,sublocation_text:e.address.sublocation,title:e.address.addresstype,wing:e.address.wing,flatno:e.address.flatno,floor:e.address.floorno,building:e.address.building,plotno:e.address.plotno,sectorno:e.address.sectorno,streetname:e.address.streetname,landmark:e.address.landmark,pincode:e.address.pincode,assumeddob:e.address.assumeddob,servicedeliveryaddress:"true",address:t,geolocation:D,googleplace_id:e.address.googleplace_id}],salutation:e.newpatient.salutation,firstname:e.newpatient.firstname,middlename:e.newpatient.middlename,lastname:e.newpatient.lastname,dob:e.newpatient.dob.toISOString(),age:e.newpatient.age,agetype:e.newpatient.agetype,gender:e.newpatient.gender,mobilenumber:e.newpatient.mobilenumber,altnumber:e.newpatient.altnumber,email:e.newpatient.email},partner_id:e.call.partner_id._id,provider_id:e.call.partner_id.provider_id._id,externalId:e.temp.externalId};c.saveNewPatientApi(s).then(function(t){e.call.patient=t.response,e.patient=t.response,e.newpatient=angular.copy(t.response),e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.temp.selectedPateintObj=angular.copy(t.response),e.address.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.address.otherAddress.push(a)}),e.address.otherAddress.forEach(function(t){"true"==t.servicedeliveryaddress&&(e.call.servicedeliveryaddress=t)}),e.temp.parentorder_id||(document.getElementById("addpatient-input").value=""),y(e.patient),b()})},e.closeNewPatientmodal=function(){b(),$("#addnewpatientmodal").modal("hide")},e.newPatient=function(){e.newpatient={},e.temp.externalId="",e.showAddPatientBtn=!1,e.searchPatientObj={},e.addaddress.sublocation_id=void 0,e.address.sublocationid=void 0,e.address.googleplace_id=void 0,e.addaddress.pincode=void 0,e.address.sublocation_id=[],e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",e.PatientList=[],e.call.fromppdate=void 0,e.call.frompptime=void 0,e.call.services=[],x(),e.call.fromppdate=void 0,e.call.frompptime=void 0,T=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.PatientList=[],e.address.otherAddress=[],e.address.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.PatientList=[],e.patient={},e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[],e.patient.demography.agetype="YEARS",e.patient.demography.altnumber=[],$("#addnewpatientmodal").modal("show"),e.gmapshowhideCheck=!1,e.temp.parentorder_id?e.showGmapAddPatient=!0:e.showMapCheck=!0,e.temp.altnumber||(e.temp.altnumber=[]),e.temp.altnumber.length&&delete e.temp.altnumber},e.gmapshowhideCheck=!1,e.gampAddressCheck=!1,e.addAddressButtonCheck=!1,e.openAddAddressCheck=function(){e.address.searchDisableCheck=!1,e.showMapCheck=!0,e.addAddressButtonCheck=!1,e.gampAddressCheck=!1,e.gmapshowhideCheck=!0,e.address.area=void 0,e.address.sublocation=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.streetname=void 0,e.address.building=void 0,e.address.landmark=void 0,e.address.selectedArea={},e.address.selectedArea.city_id={},e.address.googleplace_id=void 0,e.address.selectedArea._id=void 0,e.address.selectedArea.city_id._id=void 0,e.address.searchBar=void 0,e.address._id=void 0,h(e.reloadmap,0)},e.reloadmap=function(){e.gmapshowhideCheck=!1},e.newPatientAddressFromExistingPateint=function(){e.newPatientList=[],e.existingPatient=[],e.address.newAddressArray={},e.gampAddressCheck=!0,e.gmapshowhideCheck=!0,e.addAddressButtonCheck=!0,e.address.area=void 0,e.address.sublocation=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.streetname=void 0,e.address.building=void 0,e.address.landmark=void 0,e.address.selectedArea={},e.address.selectedArea.city_id={},e.address.googleplace_id=void 0,e.address.selectedArea._id=void 0,e.address.selectedArea.city_id._id=void 0,e.address.searchBar=void 0,e.address._id=void 0},e.SearchPatientfromExisting=function(){if(e.searchExistingPatientObj.searchText||e.searchExistingPatientObj.firstname||e.searchExistingPatientObj.middlename||e.searchExistingPatientObj.lastname){e.newPatientList=[];var t={};t.currentPage=1,t.itemPerPage=20;var a={};a.searchText=e.searchExistingPatientObj.searchText,a.firstname=e.searchExistingPatientObj.firstname,a.middlename=e.searchExistingPatientObj.middlename,a.lastname=e.searchExistingPatientObj.lastname,a.partner_id=e.call.partner_id._id;var s=c.getPatientList(t,a,!0);s.then(function(t){e.newPatientList=t.response})}else e.newPatientList=[]},e.clearSearchDataFromExisting=function(){e.searchExistingPatientObj.searchText="",e.searchExistingPatientObj.firstname="",e.searchExistingPatientObj.middlename="",e.searchExistingPatientObj.lastname="",e.clientcheckpoint=!1,e.clientUsercheckpoint=!1,e.newPatientList=[]},e.selectNewPatientData=function(t){e.clientUsercheckpoint=!1,e.clientcheckpoint=!1,e.newPatientList=[],e.address.newAddressArray={},e.searchExistingPatientObj={},e.existingPatient={},e.addressArray=[];var a=c.getAddressByClientId(t._id);a.then(function(t){e.existingPatient=t.response,e.existingPatient.demography.addresses.forEach(function(t){t.servicedeliveryaddress=!1,t.googleplace_id&&e.addressArray.push(t)})})},e.selectedAddressCheckpoint=function(t){e.addressArray.forEach(function(a){a._id==t._id?(a.servicedeliveryaddress=!0,e.address.newAddressArray=angular.copy(a)):a.servicedeliveryaddress=!1})},e.openMapForAddressadd=function(){e.address.area=e.address.newAddressArray.area_id.name,e.address.sublocation=e.address.newAddressArray.sublocation_text,e.address.wing=e.address.newAddressArray.wing,e.address.flatno=e.address.newAddressArray.flatno,e.address.floorno=e.address.newAddressArray.floor,e.address.plotno=e.address.newAddressArray.plotno,e.address.sectorno=e.address.newAddressArray.sectorno,e.address.pincode=e.address.newAddressArray.pincode,e.address.streetname=e.address.newAddressArray.streetname,e.address.building=e.address.newAddressArray.building,e.address.landmark=e.address.newAddressArray.landmark,e.address.selectedArea={},e.address.selectedCity={},e.address.googleplace_id=e.address.newAddressArray.googleplace_id,e.address.selectedArea._id=e.address.newAddressArray.area_id._id,e.address.selectedCity=e.address.newAddressArray.city_id._id,e.address._id=e.address.newAddressArray._id,e.address.newAddressArray&&e.address.newAddressArray.geolocation&&(e.address.newAddressArray.geolocation.coordinates?(e.address.geolocation=e.address.newAddressArray.geolocation.coordinates,e.address.googleplace_id=e.address.newAddressArray.googleplace_id):alert("No cordinates present"))},e.saveNewAddresstoGmap=function(){e.gmapshowhideCheck=!1,e.addAddressButtonCheck=!0,e.gampAddressCheck=!0,h(e.openMapForAddressadd,1e3)},e.addAddressForOrder=function(){if(e.addaddress.address="",e.addaddress.wing&&(e.addaddress.address+=e.addaddress.wing.trim()+", "),e.addaddress.flatno&&(e.addaddress.address+=e.addaddress.flatno.trim()+", "),e.addaddress.floor&&(e.addaddress.address+="Floor no. "+e.addaddress.floor.trim()+", "),e.addaddress.building&&(e.addaddress.address+=e.addaddress.building.trim()+", "),e.addaddress.plotno&&(e.addaddress.address+="Plot no. "+e.addaddress.plotno.trim()+", "),e.addaddress.sectorno&&(e.addaddress.address+="Sector no. "+e.addaddress.sectorno.trim()+", "),e.addaddress.streetname&&(e.addaddress.address+=e.addaddress.streetname.trim()+", "),e.addaddress.landmark&&(e.addaddress.address+=e.addaddress.landmark.trim()+", "),e.addaddress.area&&(e.addaddress.address+=e.addaddress.area.trim()+", "),e.patient.demography.addresses.length){e.patient.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.addaddress.servicedeliveryaddress="true";var t=angular.copy(e.addaddress),a=!0;e.patient.demography.addresses.forEach(function(t){t._id==e.addaddress._id&&(a=!1,t.title=e.addaddress.title,t.city_id=e.addaddress.city_id,t.pincode=e.addaddress.pincode,t.address=e.addaddress.address,t.wing=e.addaddress.wing,t.flatno=e.addaddress.flatno,t.floor=e.addaddress.floor,t.building=e.addaddress.building,t.plotno=e.addaddress.plotno,t.sectorno=e.addaddress.sectorno,t.streetname=e.addaddress.streetname,t.landmark=e.addaddress.landmark,t.sublocation_id=e.addaddress.sublocation_id,t.servicedeliveryaddress="true")}),a&&e.patient.demography.addresses.push(t)}else{e.addaddress.servicedeliveryaddress="true";var t=angular.copy(e.addaddress);e.call.client_id.demography.addresses.push(t),e.temppatient&&e.temppatient.demography.addresses.push(t)}e.call.city_id=angular.copy(t.city_id),e.call.area_id=angular.copy(t.area_id),e.call.pincode=angular.copy(t.pincode),e.pincodes=angular.copy(e.call.area_id.pincodes),e.call.servicedeliveryaddress=angular.copy(t),e.savePatient(),$("#AddressObjectViewForOrder").modal("hide"),$("#AddressObjectView").modal("hide")},e.savePatient=function(){if(e.addaddress.address="",e.addaddress.wing&&(e.addaddress.address+=e.addaddress.wing.trim()+", "),e.addaddress.flatno&&(e.addaddress.address+=e.addaddress.flatno.trim()+", "),e.addaddress.floor&&(e.addaddress.address+="Floor no. "+e.addaddress.floor.trim()+", "),e.addaddress.building&&(e.addaddress.address+=e.addaddress.building.trim()+", "),e.addaddress.plotno&&(e.addaddress.address+="Plot no. "+e.addaddress.plotno.trim()+", "),e.addaddress.sectorno&&(e.addaddress.address+="Sector no. "+e.addaddress.sectorno.trim()+", "),e.addaddress.streetname&&(e.addaddress.address+=e.addaddress.streetname.trim()+", "),e.addaddress.landmark&&(e.addaddress.address+=e.addaddress.landmark.trim()+", "),e.addaddress.area&&(e.addaddress.address+=e.addaddress.area.trim()+", "),e.patient.demography.altnumber=e.temp.altnumber.length?e.temp.altnumber.map(function(e){return e.text}):[],e.patient._id){e.patient.demography=angular.copy(e.newpatient),e.patient.demography.altnumber=angular.copy(e.temp.altnumber.map(function(e){return e.text})),e.patient.externalId=angular.copy(e.temp.externalId);var t=c.updatePatient(e.patient);t.then(function(t){t.response._id&&($("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.call.patient=t.response,e.patient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.address.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.address.otherAddress.push(a)}),e.address.otherAddress.forEach(function(t){"true"==t.servicedeliveryaddress&&(e.call.servicedeliveryaddress=t)}))})}else{e.patient.partner_id=e.call.partner_id,e.addAddress();var t=c.addPatient(e.patient);t.then(function(t){t.response._id&&($("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.call.patient=t.response,e.patient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.address.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.address.otherAddress.push(a)}),e.address.otherAddress.forEach(function(t){"true"==t.servicedeliveryaddress&&(e.call.servicedeliveryaddress=t)}))})}$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.openAddAddress=function(){function t(){e.address.pincode=void 0,e.address.area=void 0,e.address.selectedArea=void 0,e.address.selectedCity=void 0,e.address.sublocation=void 0,e.address.area=void 0,e.address.googleplace_id=void 0,e.address.wing=void 0,e.address.flatno=void 0,e.address.floorno=void 0,e.address.plotno=void 0,e.address.sectorno=void 0,e.address.pincode=void 0,e.address.building=void 0,e.address.streetname=void 0,e.address.landmark=void 0,e.address.addresstype="Home",e.address.selectedGmapArea=void 0,e.address.editaddressid=void 0,e.address.searchBar=void 0,O={}}e.call.fromtime=void 0,e.call.fromdate=void 0,e.address.sublocation_id=[],e.addaddress._id=void 0,e.address.searchDisableCheck=!1,e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",e.address.editaddressid="",$("#bookAppointmentObjectView").modal("hide"),$("#gmapaddaddress").modal("show"),e.editgmapcheck=!0,h(t,200)},e.addingNewAddress=function(){e.existingPatient=[],e.newPatientList=[],e.newAddressArray=[],e.searchExistingPatientObj={},e.clientcheckpoint=!1,$("#addingNewAddaddressFormExisting").modal("show")},e.SearchPatientByNameFromExisting=function(){if(e.searchExistingPatientObj.searchText||e.searchExistingPatientObj.firstname||e.searchExistingPatientObj.middlename||e.searchExistingPatientObj.lastname){e.newPatientList=[];var t={};t.currentPage=1,t.itemPerPage=20;var a={};a.searchText=e.searchExistingPatientObj.searchText,a.firstname=e.searchExistingPatientObj.firstname,a.middlename=e.searchExistingPatientObj.middlename,a.lastname=e.searchExistingPatientObj.lastname,a.partner_id=e.temp.selectedPateintObj.partner_id._id;var s=c.getPatientList(t,a,!0);s.then(function(t){var a=t.response;a.length||(e.clientUsercheckpoint=!0),a.forEach(function(t){t._id!=e.temp.selectedPateintObj._id?e.newPatientList.push(t):e.clientcheckpoint=!0})})}else e.newPatientList=[]},e.clearSearchDataFromExisting=function(){e.searchExistingPatientObj.searchText="",e.searchExistingPatientObj.firstname="",e.searchExistingPatientObj.middlename="",e.searchExistingPatientObj.lastname="",e.clientcheckpoint=!1,e.clientUsercheckpoint=!1,e.newPatientList=[]},e.selectNewPatient=function(t){e.newPatientList=[],e.clientcheckpoint=!1,e.clientUsercheckpoint=!1,e.existingPatient={},e.searchExistingPatientObj={};var a=c.getAddressByClientId(t._id);a.then(function(t){if(e.existingPatient=t.response,e.existingPatient.partner_id)for(var a=0,s=e.existingPatient.demography.addresses.length;s>a;)_.find(e.temp.selectedPateintObj.demography.addresses,function(t){s>a&&e.existingPatient.demography.addresses[a]._id.toString()==t._id.toString()&&(e.existingPatient.demography.addresses.splice(a,1),s--)}),a++})},e.selectedAddressCheck=function(t){var a=e.newAddressArray.indexOf(t);a>-1?e.newAddressArray.splice(a,1):e.newAddressArray.push(t)},e.closeAddAddressForOrder=function(){e.editAdd=!1,e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",$("#AddressObjectViewForOrder").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=angular.copy(s),e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s)}}else if(e.address.parentAddress)e.patient.demography.addresses=[],e.patient.demography.addresses.push(e.address.parentAddress),e.call.servicedeliveryaddress=e.address.parentAddress;else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s)}},e.otherAddSelection=function(){e.call.fromtime=void 0,e.call.fromdate=void 0,e.address.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.address.otherAddress.push(a)}),$("#addressselection").modal("show")},e.address.selectaddress=!0,e.checkServiceAddress=function(t){e.address.selectaddress=!1,e.address.otherAddress.forEach(function(e){e.servicedeliveryaddress=e._id==t._id?"true":"false"})},e.updatedServiceAdd=function(){e.temppatient.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.temppatient.demography.addresses.forEach(function(t){e.address.otherAddress.forEach(function(a){"true"==a.servicedeliveryaddress&&t._id==a._id&&(t.servicedeliveryaddress="true",e.call.servicedeliveryaddress=angular.copy(t))})});var t=c.updatePatient(e.temppatient);t.then(function(t){t.response._id&&(e.call.patient=t.response,e.patient=t.response,e.newpatient=angular.copy(t.response),e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response))})},e.address.sublocation_id=[],e.editgmapcheck=!1,e.editServiceAddress=function(t){function a(e){for(var t=0;t<C.length;t++)C[t].setMap(e)}function s(){a(null),document.getElementById("addpatient-input").value="",e.address.area=t.area_id.name,e.address.sublocation=t.sublocation_text}e.editgmapcheck=!0,e.call.fromdate=void 0,e.call.fromtime=void 0,t?(e.address.editgeolocation=t.geolocation,e.address.selectedArea=t.area_id,e.address.selectedCity=t.city_id,e.address.wing=t.wing,e.address.flatno=t.flatno,e.address.floorno=t.floor,e.address.plotno=t.plotno,e.address.sectorno=t.sectorno,e.address.pincode=t.pincode,e.address.building=t.building,e.address.streetname=t.streetname,e.address.landmark=t.landmark,e.address.addresstype=t.title,e.address.editaddressid=t._id,$("#gmapaddaddress").modal("show"),h(s,200),S||h(e.openMapForAddress,1e3)):e.temppatient.demography.addresses.forEach(function(t){function a(e){for(var t=0;t<C.length;t++)C[t].setMap(e)
}function s(){a(null),document.getElementById("addpatient-input").value="",e.address.area=t.area_id.name,e.address.sublocation=t.sublocation_text}"true"==t.servicedeliveryaddress&&(e.address.editgeolocation=t.geolocation,e.address.selectedArea=t.area_id,e.address.selectedCity=t.city_id,e.address.wing=t.wing,e.address.flatno=t.flatno,e.address.floorno=t.floor,e.address.plotno=t.plotno,e.address.sectorno=t.sectorno,e.address.pincode=t.pincode,e.address.building=t.building,e.address.streetname=t.streetname,e.address.landmark=t.landmark,e.address.addresstype=t.title,e.address.editaddressid=t._id,e.address.googleplace_id=t.googleplace_id,$("#gmapaddaddress").modal("show"),h(s,200),S||h(e.openMapForAddress,1e3))}),e.editAdd=!0,$("#addressselection").modal("hide"),$("#bookAppointmentObjectView").modal("hide")},e.clearPatient=function(){e.call.patient=angular.copy(e.temppatient),e.temppatient&&(e.call.client_id=angular.copy(e.temppatient)),e.patient=angular.copy(e.temppatient),e.newpatient=angular.copy(e.temppatient),$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.closeAppointment=function(){$("#bookAppointmentObjectView").modal("hide")},e.getAllServices=function(t){var a={};a.currentPage=1,a.itemPerPage=100,u.getpartnerservices(a,t).then(function(t){e.ServiceList=t.response,e.ServiceList.length||$("#testNotAvailable").modal("show")})},e.setPrice=function(){e.call.amount=0;for(var t=0;t<e.call.services.length;t++)e.call.amount+=0==t?e.call.services[t].service_id.price.mrp+e.finalVisitCharge:e.call.services[t].service_id.price.mrp};var T;e.showPPAddButton=function(t){var a=[];return t.postsample?(t.postservices.forEach(function(t){var s=_.find(e.call.services,function(e){return e.service_id._id==t._id});s&&a.push(s)}),t.postservices.length==a.length?!1:!0):!1},e.addPPTest=function(t){var a={};e.uniqueServices=[],a.services=angular.copy(e.call.services),l.getUniqueTest(a).then(function(a){e.uniqueServices=a.response,e.call.frompptime?(t.forEach(function(t){var a=!0;e.uniqueServices.forEach(function(s){if(s._id==t._id&&(a=!1),a){var i={};i.service_id=t,e.call.services.push(i)}})}),w(),e.call.services=_.uniqBy(e.call.services,"service_id._id")):(e.pushppservice=t,e.call.fromppdate=e.call.fromdate,e.getppWorkingHours())})},e.removeDiscount=function(t){var a=void 0;e.call.discount.forEach(function(e,s){t.name==e.name&&(a=s)}),e.call.discount.splice(a,1),e.addDiscount()},e.discountamount=0,e.discountper=0,e.temp.discountname="NO DISCOUNT";e.call.discount=[],e.setDiscountClass=function(e){return e.discountrs<0||e.discount<0?"premium":e.discountrs>0||e.discount>0?"discount":void 0},e.setDiscountArrayClass=function(e){return e.discountrs<0||e.discount<0?"premium-typeahead-available-text":e.discountrs>0||e.discount>0?"discount-typeahead-available-text":void 0},e.addDiscount=function(t){var a={};a=l.discountCalculation(e.call.discount,t,e.finalVisitCharge,e.call.services),e.call.discount.length&&(e.call.discount=a.discountArray,e.temp.totalRsTest=a.totalRsTest,e.temp.totalRsVisit=a.totalRsVisit,e.temp.totalRsBoth=a.totalRsBoth,e.temp.totalPerTest=a.totalPerTest,e.temp.totalPerVisit=a.totalPerVisit,e.temp.totalperBoth=a.totalperBoth,e.discountAmountPer=a.discountAmountPer,e.vDiscountRs=a.vDiscountRs,e.vDiscountPrcent=a.vDiscountPrcent,e.vDiscountPer=a.vDiscountPer,e.discountper=a.discountper,e.tDiscountName=a.tDiscountName,e.vDiscountName=a.vDiscountName,e.finalVisitCharge=a.finalVisitCharge,e.discountAmountRs=a.discountAmountRs),e.call.services=a.services,e.call.services.length&&e.call.discount.length||x(),e.existDiscountTestPer=!1,e.call.discount||(e.call.discount=[]),e.call.discount.length&&(e.existDiscountTestPer=l.existTestPer(e.call.discount)),e.call.discountobj=void 0},e.getppWorkingHours=function(t){t&&(e.call.frompptime=void 0),e.temp.timeppSlotss=[];var a=(e.call.fromppdate.toISOString(),r.curentWaqtTime());e.fromday=e.call.fromdate.getDayName(),e.lowerfromday=moment(e.call.fromppdate).format("dddd"),e.lowerfromday=e.lowerfromday.toLowerCase();var s=e.call.fromppdate.toISOString(),i=!0,n=e.call.fromdate.toISOString(),o=e.call.fromtime;l.getppTimeSlot(e.call.partner_id._id,e.call.servicedeliveryaddress.area_id._id,e.lowerfromday,a,s,i,o,n,e.call.servicedeliveryaddress._id).then(function(t){e.temp.timeppSlotss=t.response,e.temp.timeppSlotss.forEach(function(t){t.available&&t.slots.length&&t.slots.forEach(function(t){t.groupIds&&t.groupIds.length&&t.groupIds.forEach(function(a){a==e.temp.orderGroupId&&(t.available=!0,t.text="Open")})})}),$("#ppslotModal").modal("show")})},e.dynamicPopover={content:"Hello, World!",templateUrl:"myPopoverTemplate.html",title:"Title",html:!0},e.changeTime=function(t){e.call.fromtime=t,$("#slotModal").modal("hide")},e.changeppTime=function(t){var a=!0;if(e.pushppservice||(e.pushppservice=[]),e.tempSelectedService||(e.tempSelectedService={}),e.call.frompptime||e.pushppservice.length&&(e.pushppservice.forEach(function(t){var s=!0;a=!1,e.uniqueServices.forEach(function(a){if(a._id==t._id&&(s=!1),s){var i={};i.service_id=t,e.call.services.push(i)}})}),e.call.services=_.uniqBy(e.call.services,"service_id._id")),!e.pushppservice.length&&!e.call.frompptime&&e.tempSelectedService._id&&a)if(e.ppYesFlag&&e.copyTestFromHistory);else if(e.ppYesFlag&&e.tempSelectedService){var s={};s=angular.copy(e.tempSelectedService),e.service_sm={},e.service_sm.service_id=angular.copy(s),e.call.services.push(e.service_sm)}else e.call.services=e.temp.ppServicesAdd;e.tempSelectedService={},e.pushppservice=[],e.uniqueServices=[],e.call.frompptime=t,w(),$("#ppslotModal").modal("hide")},e.replaceServices=function(){e.call.services=e.temp.fServicesAdd,w()},e.goToPPTestAdd=function(){e.getppWorkingHours()},e.openSecondpopup=function(){$("#addPPtwothreeServiceConformation").modal("show")},e.openFSecondpopup=function(){$("#addftwothreeServiceConformation").modal("show")},e.SelectService=function(t){e.temp.ppServicesAdd=[],e.temp.fServicesAdd=[],e.tempSelectedService={},e.tempSelectedService=angular.copy(t),e.tempCoveredTest={},e.tempCoveredTest.service_id=angular.copy(t),e.service_sm={},e.service_sm.service_id=angular.copy(t);var a=angular.copy(e.call.services);a.push(e.service_sm);var s=l.cancelPPOrder(a);if(s&&!e.call.frompptime){e.ppYesFlag=!0,e.pushppservice=[],e.call.fromppdate=e.call.fromdate;var i={};i.serviceIds=[],i.serviceIdtoadd=t._id,e.call.services.forEach(function(e){i.serviceIds.push(e.service_id._id)}),l.getSuperSetServices(i).then(function(t){t.fewExist?(t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.ppServicesAdd.push(e.service_sm)}),e.ppYesFlag=!1,t.messageSome&&!t.message?(e.coveredTestPPPopupText=t.messageSome,$("#addPPServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addPPtwoServiceConformation=t.messageSome,e.addPPtwothreeServiceConformation=t.message,$("#addPPtwoServiceConformation").modal("show"))):(t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.ppServicesAdd.push(e.service_sm)}),e.ppYesFlag=!1,t.message?(e.coveredTestElsePPPopupText=t.message,$("#addPPElseServiceConformation").modal("show")):e.getppWorkingHours())})}else{var i={};i.serviceIds=[],i.serviceIdtoadd=t._id,e.call.services.forEach(function(e){i.serviceIds.push(e.service_id._id)}),l.getSuperSetServices(i).then(function(t){t.fewExist?(t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.fServicesAdd.push(e.service_sm)}),t.messageSome&&!t.message?(e.addServiceConformation=t.messageSome,$("#addServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addftwoServiceConformation=t.messageSome,e.addftwothreeServiceConformation=t.message,$("#addftwoServiceConformation").modal("show"))):(t.message&&(e.coveredPPTestPopupText=t.message,$("#addffServiceConformation").modal("show")),e.call.services=[],t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.call.services.push(e.service_sm)}),w())})}e.service_sm={},e.service_sm.service_id={},e.call.amount=0,e.ServiceList=[],e.searchObj.servicename=""},e.showComponents=function(t){var a={},s={service_id:t};a.services=angular.copy([s]),l.getUniqueTest(a).then(function(a){e.componemtModal={name:t.name,category:t.category},e.componemtModal.services=a.response,$("#showComponentsModal").modal("show")})};var M="";e.showDeleteModel=function(e){M=e,$("#delServiceModal").modal("show")},e.closedeletemodal=function(){$("#delServiceModal").modal("hide")},e.deleteService=function(){e.call.services.splice(M,1);var t=l.cancelPPOrder(e.call.services);t||(e.call.fromppdate=void 0,e.call.frompptime=void 0),w(),$("#delServiceModal").modal("hide")},e.changeinout=function(){e.hideservice="outgoing"==e.call.inout?!0:!1},e.cancelCall=function(){e.call.patient={},e.call.services=[],x(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,T=[],r.currentcall=void 0,s.go("main.order")},e.changeCallType=function(){"servicerequest"==e.call.type?(e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname="",e.whenServiceRequest=!0,e.whenRequestStatus=!1):"requeststatus"==e.call.type?(e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname="",e.whenRequestStatus=!0,e.whenServiceRequest=!1):(e.call.patient={},e.whenServiceRequest=!1,e.whenRequestStatus=!1),e.call.services=[],x(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,T=[]},e.closeOtherPPmodel=function(){$(".modal-backdrop").remove()},e.callcreated=function(){$(".modal-backdrop").remove(),$("#callCreated").modal("hide"),s.go("main.order")};var j={};e.saveOrder=function(t){e.saveBtnDisable=!0,$("#progressIndicator").modal("show");var a=[];e.call.services.forEach(function(e){var t={};t.service_id=e.service_id._id,t.price=e.service_id.price.mrp,a.push(t)}),e.temp.premiumchargesper||(e.temp.premiumchargesper=0),e.call.discount.forEach(function(e){"VISIT CHARGE"==e.discountapplicable&&(e.discountapplicable="VISIT")}),j={source:"WEB",provider_id:e.searchObj.provider_id,client_id:e.call.client_id._id,partner_id:e.call.partner_id._id,fromdate:e.call.fromdate.toISOString(),todate:e.call.todate.toISOString(),status:"Unassigned",specialneed:e.call.specialNeedList,services:a,servicedeliveryaddress:e.call.servicedeliveryaddress,paymentdetails:{amount:e.temp.premiumcharge+e.call.testamount,discount:-1*e.temp.premiumchargesper,paymentoptions:e.call.paymentoptions,orderDiscount:e.call.discount},droppointaddress:e.call.sampledrop,comment:e.call.remark,area_id:e.call.servicedeliveryaddress.area_id._id,fromtime:e.call.fromtime,ordertype:"F"},e.call.paymentdetails||(e.call.paymentdetails={}),e.call.paymentdetails.reportdeliverymode?j.paymentdetails.reportdeliverymode=a.length?e.call.paymentdetails.reportdeliverymode:[]:e.call.paymentdetails.reportdeliverymode=[],e.temp.orderGroupId&&(j.orderGroupId=e.temp.orderGroupId),e.temp.parentorder_id&&(j.parentorder_id=e.temp.parentorder_id),e.temp.parentPatient||(e.temp.parentPatient=e.temppatient.demography.salutation.concat(" ").concat(e.temppatient.demography.fullname)),"saveExit"==t&&r.createCall(j).then(function(t){delete e.saveBtnDisable,$(".modal-backdrop").remove(),t.order._id&&$("#callCreated").modal("show")},function(){delete e.saveBtnDisable}),"saveAddppexit"==t&&(e.temp.pppostvisitcheck=!1,e.temp.disableforaddpatientcheck=!1,e.temp.ppvistparentid||(e.temp.saveppandexit=!0,k())),"saveAddpp"==t&&(e.temp.pppostvisitcheck=!1,e.temp.disableforaddpatientcheck=!1,e.temp.ppvistparentid||(e.temp.saveppandexit=!1,e.temp.ppppptime||(e.temp.ppppptime=parseInt(e.call.frompptime),e.temp.fromppdate=e.call.fromppdate.toISOString()),k())),"addPatient"==t&&r.createCall(j).then(function(t){delete e.saveBtnDisable,$(".modal-backdrop").remove(),t.order._id&&$("#addpatientcallCreated").modal("show"),e.PatientList=[],e.call.services=[],e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,T=[],e.call.remark=void 0,e.call.paymentoptions=[],e.PatientList=[],e.address.otherAddress=[],e.address.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.call.discount=[],e.call.specialNeedList=[],x(),e.temp.orderGroupId||(e.temp.orderGroupId=t.order.orderGroupId),e.temp.parentorder_id||(e.temp.parentorder_id=t.order._id),e.address.parentAddress||(e.address.parentAddress=e.call.servicedeliveryaddress),$("#progressIndicator").modal("hide")},function(){delete e.saveBtnDisable})},e.removeSN=function(t){e.call.specialNeedList.forEach(function(a,s){a._id==t._id&&e.call.specialNeedList.splice(s,1)})},e.addMultipleSN=function(t){var a=!0;e.call.specialNeedList.forEach(function(s,i){"NA"==s.name.toUpperCase()&&e.call.specialNeedList.splice(i,1),s._id==t._id&&(a=!1)}),"NA"==t.name.toUpperCase()&&(e.call.specialNeedList=[]),a&&e.call.specialNeedList.push(t),e.call.specialneed=""};JSON.parse(sessionStorage.getItem("globaldata"));e.initializePaging(),P(),e.searchObj.partnertype="b2b",e.getPartners(),e.check=function(){return e.call.fromtime+120>e.maxtimeregpp?!1:!0},e.temp.ageIn=[{agein:"YEARS"},{agein:"MONTHS"},{agein:"DAYS"}],e.oneCheckOrder=!1,e.checkServices=function(t,a,s){a.checked=s,e.oneCheckOrder=!1;for(var i=0;i<e.patient.allOrder.length;i++)a._id!=e.patient.allOrder[i]._id&&(e.patient.allOrder[i].checked=!1);for(var i=0;i<e.patient.allOrder.length;i++)1==e.patient.allOrder[i].checked&&(e.patient.allOrder[i].services||(e.patient.allOrder[i].services=[]),e.patient.allOrder[i].services.length&&(e.oneCheckOrder=!0))},e.coyTestModal=function(){$("#copyTestMsg").modal("show")},e.coyTest=function(){e.copyTestFromHistory=!1;for(var t=[],a=0;a<e.patient.allOrder.length;a++)1==e.patient.allOrder[a].checked&&e.patient.allOrder[a].services.length&&e.patient.allOrder[a].services.forEach(function(e){t.push(e)});e.call.services=[],e.call.services=angular.copy(t);var s=l.cancelPPOrder(e.call.services);s&&!e.call.frompptime&&(e.ppYesFlag=!0,e.copyTestFromHistory=!0,e.call.fromppdate=e.call.fromdate,e.getppWorkingHours()),s||(e.ppYesFlag=!1,e.copyTestFromHistory=!1,e.call.fromppdate=void 0,e.call.frompptime=void 0,w())}};e.$inject=["$scope","$q","$location","$state","user","$stateParams","callFactory","partnerFactory","areaFactory","orderFactory","clientFactory","cityFactory","partnertestFactory","$rootScope","specialneedFactory","$timeout"],angular.module("webApp").controller("mlygmapcallController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c,p,u,m,g){function h(t){if(e.showAddPatientBtn=!1,e.temp.singleAddress=!1,e.temp.addressApiCallCheck=!0,e.call.servicedeliveryaddress={},e.temp.parentorder_id){if(t.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.parentAddress=angular.copy(e.temp.parentAddress),e.call.servicedeliveryaddress=e.parentAddress,t.demography.addresses.forEach(function(t){t._id==e.parentAddress._id&&(t.servicedeliveryaddress="true",e.temp.addressApiCallCheck=!1)}),e.temp.addressApiCallCheck||(e.call.client_id=angular.copy(t),e.call.patient=t,e.patient=e.call.patient,e.temppatient=angular.copy(t),e.temp.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.temp.otherAddress.push(a)})),e.temp.addressApiCallCheck){e.parentAddress.servicedeliveryaddress="true",t.demography.addresses.push(e.parentAddress);var a=c.updatePatient(t);a.then(function(t){t.response._id&&(e.call.patient=t.response,e.patient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.temp.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.temp.otherAddress.push(a)}))})}}else e.temp.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){t.servicedeliveryaddress="false";var a=angular.copy(t);e.temp.otherAddress.push(a)}),1==e.temp.otherAddress.length&&(e.temp.singleAddress=!0,e.temp.otherAddress[0].servicedeliveryaddress="true",e.temppatient.demography.addresses.forEach(function(t){e.temp.otherAddress.forEach(function(e){e._id==t._id&&(t.servicedeliveryaddress="true")})}),e.call.servicedeliveryaddress=e.temp.otherAddress[0],e.call.client_id=angular.copy(e.temppatient),e.call.patient=e.temppatient,e.patient=e.call.patient,e.temppatient=angular.copy(e.temppatient))}function v(){e.temp.applyvisitcharge=!0;var t=l.cancelPPOrder(e.call.services);e.temp.ppavailable=t;var a=[];e.call.services.forEach(function(e){a.push(e.service_id._id)});var s={ordergroupid:e.temp.orderGroupId,action:"add",ordertype:"F",pptestflage:t,fromtime:e.call.fromtime,servicedeliveryaddress_id:e.call.servicedeliveryaddress._id,partner_id:e.temp.partnerDetail._id,services:a,fromdate:e.call.fromdate,ppfromdate:e.call.fromppdate,ppfromtime:e.call.frompptime};r.getVisitChargesApi(s).then(function(t){e.finalVisitCharge=t.response.totalVisitCharges,e.addDiscount()});var i={};e.uniqueServices=[],i.services=angular.copy(e.call.services),M=[],l.getUniqueTest(i).then(function(t){e.uniqueServices=t.response,e.uniqueServices.forEach(function(t){t.postsample&&t.postservices.forEach(function(t){var a=_.findIndex(e.uniqueServices,function(e){return e._id==t._id});a>=0&&M.push(t._id)})}),M=_.uniqBy(M)}),e.call.testamount=0;for(var n=0;n<e.call.services.length;n++)e.call.testamount+=e.call.services[n].service_id.price.mrp;e.temp.premiumchargesper=0,e.temp.premiumcharge=0,e.temp.partnerDetail.visitcharges.forEach(function(t){e.call.fromtime<=t.to&&e.call.fromtime>=t.from&&t.day.forEach(function(a){a.toLowerCase()==e.lowerfromday&&(e.temp.premiumchargesper=t.premiumpercentontest,e.temp.premiumcharge=t.premiumpercentontest/100*e.call.testamount)})}),void 0==e.temp.premiumcharge&&(e.temp.premiumcharge=0)}function f(){e.temp.totalRsTest=0,e.temp.totalRsVisit=0,e.temp.totalRsBoth=0,e.temp.totalPerTest=0,e.temp.totalPerVisit=0,e.temp.totalperBoth=0,e.discountAmountPer=0,e.vDiscountRs=0,e.vDiscountPrcent=0,e.vDiscountPer=0,e.discountper=0,e.tDiscountName=[],e.vDiscountName=[],e.call.discount=[],e.discountAmountRs=0}function y(){var t=[];M.forEach(function(e){var a={};a.service_id=e,a.price=0,t.push(a)}),L.pporder={},L.pporder.paymentdetails={},L.pporder.fromtime=e.call.frompptime,L.pporder.services=t,L.pporder.fromdate=e.call.fromppdate,L.pporder.servicedeliveryaddress=e.call.servicedeliveryaddress,L.pporder.paymentdetails.amount=0,L.pporder.paymentdetails.discount=0,L.pporder.paymentdetails.paymentoptions=e.call.paymentoptions,r.createCall(L).then(e.temp.saveppandexit?function(e){$(".modal-backdrop").remove(),e.order._id&&$("#callCreated").modal("show"),$("#progressIndicator").modal("hide")}:function(t){$(".modal-backdrop").remove(),t.order._id&&$("#addpatientcallCreated").modal("show"),e.call.fromppdate=void 0,e.PatientList=[],e.call.services=[],f(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,M=[],e.call.paymentoptions=[],e.temp.ppavailable=!1,e.call.remark=void 0,e.PatientList=[],e.temp.otherAddress=[],e.temp.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.temp.ppavailable=!1,e.call.discount=[],e.call.specialNeedList=[],e.temp.parentorder_id||(e.temp.parentorder_id=t.order._id),e.temp.orderGroupId||(e.temp.orderGroupId=t.order.orderGroupId),e.temp.parentAddress||(e.temp.parentAddress=e.call.servicedeliveryaddress),$("#progressIndicator").modal("hide")})}function b(){g.get().then(function(t){e.specialneedList=t.response})}e.user=i,$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.datePickerPopup={},e.display={},e.newpatient={},e.addPatientReasons=[],e.datePickerPopup.minDate=new Date,w={},e.AddressType=JSON.parse(sessionStorage.getItem("AddressType"));var w=JSON.parse(sessionStorage.getItem("AddPatientReasons"));w.childs||(w.childs=[]),e.addPatientReasons=w.childs,e.globaldata=JSON.parse(sessionStorage.getItem("globaldata")),e.copyTestFromHistory=!1,e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20},e.showpopup=function(){$("#dialog-confirm").dialog({resizable:!1,height:200,modal:!0,buttons:{Ok:function(){$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})};var x=new Date;x=x.setHours("00"),x=new Date(x).setMinutes("00"),x=new Date(x).setSeconds("00"),x=new Date(x).setMilliseconds("000"),e.searchObj={},e.searchObj.searchDate=new Date(x),e.searchPatientObj={},e.user.userdata.provider_id&&(e.searchObj.provider_id=e.user.userdata.provider_id._id),e.service_sm={},e.servicerequest={},e.patient={},e.disablefields=!1,e.call={},e.call.specialNeedList=[],e.specialneedList=[],e.call.inout="incoming",e.call.type="servicerequest",e.call.services=[],e.call.fromppdate=void 0,e.call.frompptime=void 0,M=[],e.addaddress={},e.temp={},e.temp.altnumber||(e.temp.altnumber=[]),e.temp.ppavailable=!1,e.sorting={},e.patient||(e.patient={}),e.patient.demography||(e.patient.demography={}),e.patient.demography.agetype="YEARS",e.addpatientObj=l.display,e.call.createdby=e.addpatientObj.createdbyname,"Completed"==e.addpatientObj.status?e.storestatus=e.addpatientObj.status:e.addpatientObj.status="",e.temp.parentPatient=e.addpatientObj.parentPatient,e.parentPatientAddress=l.parentPatientAddress,e.call.selectedArea=e.parentPatientAddress.area_id,e.call.fromdate=e.addpatientObj.fromdate,e.call.fromPpdate=e.addpatientObj.fromPpdate,e.call.fromPptime=e.addpatientObj.fromPptime,e.call.fromdate=new Date(e.call.fromdate),e.call.fromtime=e.addpatientObj.fromtime,e.temp.orderGroupId=e.addpatientObj.orderGroupId,e.temp.currentparent_id=e.addpatientObj.currentparent_id,e.temp.parentorder_id=e.addpatientObj.parentorderid,e.temp.parentAddress=e.parentPatientAddress,e.pincodes=e.parentPatientAddress.area_id.pincodes,e.temp.selectedArea=e.addpatientObj.selectedArea,e.temp.partnerDetail=e.addpatientObj.partnerDetail,e.call.partner_id=e.temp.partnerDetail,e.temp.isBackDate=!1;var k=moment(e.call.fromdate).format("MM/DD/YYYY");k=new Date(k);var P=moment().format("MM/DD/YYYY");if(P=new Date(P),k>=P)var S=moment(k).format("MM/DD/YYYY"),O=moment(P).format("MM/DD/YYYY");var S=moment(k).format("MM/DD/YYYY"),O=moment(P).format("MM/DD/YYYY");O>S&&(e.temp.isBackDate=!0),e.call.partner_id.reportdeliverymode||(e.call.partner_id.reportdeliverymode=[]),e.call.partner_id.reportdeliverymode&&e.call.partner_id.reportdeliverymode.length&&(e.temp.reportdeliverymode=e.call.partner_id.reportdeliverymode,e.temp.reportdeliverymode.length&&e.temp.reportdeliverymode.forEach(function(e){e.charge||(e.charge=0)})),e.call.paymentdetails||(e.call.paymentdetails={}),e.call.paymentdetails.reportdeliverymode=[],e.call.paymentdetails.reportdeliverymode=e.addpatientObj.paymentdetails.reportdeliverymode,console.dir(e.call.paymentdetails.reportdeliverymode);var A=e.temp.partnerDetail;e.temp.paymentOptions=A.paymentoptions,e.workinghours=e.addpatientObj.partnerDetail.workinghour;var C=e.temp.partnerDetail.discounts;e.temp.discounts=[],C.forEach(function(t){1==t.active&&e.temp.discounts.push(t)}),e.temp.provider_id=e.addpatientObj.provider_id,e.temp.partnerAreaList=e.temp.partnerDetail.areas,e.temp.droppoints=e.temp.partnerDetail.droppoints,e.call.sampledrop=e.temp.droppoints[0],e.temp.partnerAreaList.forEach(function(t){t.area_id._id==e.temp.selectedArea._id&&(e.slots=t.slots,e.temp.sameAreacheckforppvisit=!0)}),e.gettotalreprtcharge=function(){e.totalreportcharge=0;var t=0;e.call.paymentdetails.reportdeliverymode.forEach(function(a){a.charge||(a.charge=0),t+=a.charge,e.totalreportcharge=Math.round(t)})},e.gettotalreprtcharge(),e.addReportDelMode=function(t){e.call.paymentdetails||(e.call.paymentdetails={}),e.call.paymentdetails.reportdeliverymode||(e.call.paymentdetails.reportdeliverymode=[]);var a=!1;if(e.temp.alredyshow=!1,_.find(e.call.paymentdetails.reportdeliverymode,function(e){e.mode==t.mode&&(a=!0)}),a)e.temp.alredyshow=a;else{var s=!1;"HARDCOPY"==t.reportdocumenttype?(_.find(e.call.paymentdetails.reportdeliverymode,function(e){"HARDCOPY"==e.reportdocumenttype&&(s=!0)}),s?$("#reportdelivery").modal("show"):e.call.paymentdetails.reportdeliverymode.push(t)):e.call.paymentdetails.reportdeliverymode.push(t)}e.display.reportdeliverymode="",e.gettotalreprtcharge()},e.removeReportmode=function(t){e.call.paymentdetails.reportdeliverymode.splice(t,1),e.temp.alredyshow=!1,e.gettotalreprtcharge()},e.getPartners=function(){var t=o.get("",e.searchObj);t.then(function(t){e.partnerList=t.response})},e.changeEditTitle=function(){"MR"==e.patient.demography.salutation.toUpperCase()||"MR."==e.patient.demography.salutation.toUpperCase()||"FATHER"==e.patient.demography.salutation.toUpperCase()||"FATHER."==e.patient.demography.salutation.toUpperCase()||"BABA"==e.patient.demography.salutation.toUpperCase()||"BABA."==e.patient.demography.salutation.toUpperCase()||"BABA OF"==e.patient.demography.salutation.toUpperCase()||"BABA OF."==e.patient.demography.salutation.toUpperCase()||"MASTER"==e.patient.demography.salutation.toUpperCase()?(e.patient.demography.gender="third gender"!=e.patient.demography.gender?"male":"third gender",e.disableGenderMale=!1,e.disableGenderFemale=!0,e.disableGenderOther=!1):"MRS"==e.patient.demography.salutation.toUpperCase()||"MRS."==e.patient.demography.salutation.toUpperCase()||"MISS"==e.patient.demography.salutation.toUpperCase()||"MISS."==e.patient.demography.salutation.toUpperCase()||"MS"==e.patient.demography.salutation.toUpperCase()||"MS."==e.patient.demography.salutation.toUpperCase()||"BABY"==e.patient.demography.salutation.toUpperCase()||"BABY."==e.patient.demography.salutation.toUpperCase()||"BABY OF"==e.patient.demography.salutation.toUpperCase()||"BABY OF."==e.patient.demography.salutation.toUpperCase()||"SISTER"==e.patient.demography.salutation.toUpperCase()||"SISTER."==e.patient.demography.salutation.toUpperCase()?(e.patient.demography.gender="third gender"!=e.patient.demography.gender?"female":"third gender",e.disableGenderMale=!0,e.disableGenderFemale=!1,e.disableGenderOther=!1):(e.display.gender="",e.disableGenderMale=!1,e.disableGenderFemale=!1,e.disableGenderOther=!1)},e.changePartner=function(t){e.call.area_id||(e.call.area_id={}),e.call.area_id._id?(e.changePartnerModal(),t&&(e.partnerDroppoint=t.droppoints,e.temp.droppoints=t.droppoints,e.call.sampledrop=t.droppoints[0],e.partnerVisiteCharge=t.visitcharges,e.user.userdata.userinfo.partner_id=t,e.areaList=e.user.userdata.userinfo.partner_id.areas,e.slotArea=e.user.userdata.userinfo.partner_id.areas,e.workinghours=e.user.userdata.userinfo.partner_id.workinghour,e.searchObj.partner_id=e.user.userdata.userinfo.partner_id._id)):t&&(e.partnerDroppoint=t.droppoints,e.temp.droppoints=t.droppoints,e.call.sampledrop=t.droppoints[0],e.partnerVisiteCharge=t.visitcharges,e.user.userdata.userinfo.partner_id=t,e.areaList=e.user.userdata.userinfo.partner_id.areas,e.slotArea=e.user.userdata.userinfo.partner_id.areas,e.workinghours=e.user.userdata.userinfo.partner_id.workinghour,e.searchObj.partner_id=e.user.userdata.userinfo.partner_id._id)},e.changePartnerModal=function(){e.temparea={},e.call.area_id={},e.slots=[],e.pincodes=[],e.temp.otherAddress=[],e.call.fromdate=void 0,e.call.fromtime=void 0,e.temppatient=void 0,e.call.services=[],f(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,M=[],e.call.remark=void 0,e.temp.selectaddress=!0,e.call.servicedeliveryaddress={}},e.otherarea=function(){$("#otherarea").modal("show")},Date.prototype.getDayName=function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e[this.getDay()]};60*(parseInt(moment().format("HH"))+2);e.display.convrtdate=new Date(e.call.fromdate);var D=e.display.convrtdate;e.getDay=D,e.fromday=e.getDay.getDayName(),e.lowerfromday=e.fromday,e.lowerfromday=e.lowerfromday.toLowerCase();e.SearchPatientByName=function(){if(e.showAddPatientBtn=!1,e.searchPatientObj.searchText||e.searchPatientObj.firstname||e.searchPatientObj.middlename||e.searchPatientObj.lastname){e.PatientList=[];var t={};t.currentPage=1,t.itemPerPage=20,e.searchObj.searchText=e.searchPatientObj.searchText,e.searchObj.firstname=e.searchPatientObj.firstname,e.searchObj.middlename=e.searchPatientObj.middlename,e.searchObj.lastname=e.searchPatientObj.lastname,e.searchObj.partner_id=e.temp.partnerDetail._id;var a=c.getPatientList(t,e.searchObj,!0);a.then(function(t){e.PatientList=t.response,e.showAddPatientBtn=!0}),e.searchObj.searchText=""}else e.PatientList=[]},e.clearSearchData=function(){e.searchPatientObj.searchText="",e.searchPatientObj.firstname="",e.searchPatientObj.middlename="",e.searchPatientObj.lastname="",e.PatientList=[],e.showAddPatientBtn=!1},e.gitVisitHistory=function(){if($("#visitHistory").modal("show"),e.oneCheckOrder=!1,e.patient.allOrder||(e.patient.allOrder=[]),e.patient.allOrder.length)for(var t=0;t<e.patient.allOrder.length;t++)e.patient.allOrder[t].checked&&delete e.patient.allOrder[t].checked},e.SelectPatient=function(t){c.getAddressByClientId(t._id).then(function(a){t=a.response,e.call.specialNeedList=[],e.call.specialNeedList=t.specialneeds&&t.specialneeds.length?t.specialneeds:[];var s=[];t.demography.addresses.forEach(function(e){e.area_id&&e.area_id.name&&s.push(e)}),t.demography.addresses=s,e.searchPatientObj={},e.call.services.length?(e.PatientList=[],e.call.services=[],f(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,M=[],e.call.remark=void 0,e.PatientList=[],e.temp.otherAddress=[],e.temp.selectaddress=!0,e.call.client_id=angular.copy(t),e.call.patient=t,e.patient=e.call.patient,e.temppatient=angular.copy(t),h(t),e.temp.parentorder_id||e.temp.singleAddress||$("#addressselection").modal("show")):(e.PatientList=[],e.call.client_id=angular.copy(t),e.call.patient=t,e.patient=e.call.patient,e.temppatient=angular.copy(t),h(t),e.temp.parentorder_id||e.temp.singleAddress||$("#addressselection").modal("show"))})},e.editPatient=function(t){e.newpatient=angular.copy(t.demography),e.temp.externalId=angular.copy(t.externalId),e.temp.fromAddPatient=!0,e.temp.altnumber=[],e.call.patient=angular.copy(t),e.call.client_id=angular.copy(t),e.patient=angular.copy(t),e.patient.demography.altnumber.length&&(e.temp.altnumber=e.patient.demography.altnumber),e.patient.demography.salutation&&e.changeEditTitle(),$("#bookAppointmentObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.changeTitle=function(){"MR"==e.newpatient.salutation.toUpperCase()||"MR."==e.newpatient.salutation.toUpperCase()||"FATHER"==e.newpatient.salutation.toUpperCase()||"FATHER."==e.newpatient.salutation.toUpperCase()||"BABA"==e.newpatient.salutation.toUpperCase()||"BABA."==e.newpatient.salutation.toUpperCase()||"BABA OF"==e.newpatient.salutation.toUpperCase()||"BABA OF."==e.newpatient.salutation.toUpperCase()||"MASTER"==e.newpatient.salutation.toUpperCase()?(e.newpatient.gender="male",e.disableGenderMale=!1,e.disableGenderFemale=!0,e.disableGenderOther=!1):"MRS"==e.newpatient.salutation.toUpperCase()||"MRS."==e.newpatient.salutation.toUpperCase()||"MISS"==e.newpatient.salutation.toUpperCase()||"MISS."==e.newpatient.salutation.toUpperCase()||"MS"==e.newpatient.salutation.toUpperCase()||"MS."==e.newpatient.salutation.toUpperCase()||"BABY"==e.newpatient.salutation.toUpperCase()||"BABY."==e.newpatient.salutation.toUpperCase()||"BABY OF"==e.newpatient.salutation.toUpperCase()||"BABY OF."==e.newpatient.salutation.toUpperCase()||"SISTER"==e.newpatient.salutation.toUpperCase()||"SISTER."==e.newpatient.salutation.toUpperCase()?(e.newpatient.gender="female",e.disableGenderMale=!0,e.disableGenderFemale=!1,e.disableGenderOther=!1):(e.newpatient.gender="",e.disableGenderMale=!1,e.disableGenderFemale=!1,e.disableGenderOther=!1)};var T=new Date;T=moment(T).startOf("day"),T=new Date(T),e.newPatient=function(){e.newpatient={},e.temp.externalId="",e.searchPatientObj={},e.showAddPatientBtn=!1,e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",e.temp.altnumber=[],e.PatientList=[],e.call.services=[],f(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,M=[],e.call.remark=void 0,e.PatientList=[],e.temp.otherAddress=[],e.temp.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.PatientList=[],e.patient={},e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[],e.patient.demography.agetype="YEARS",$("#AddPatientObjectView").modal("show")
},e.addAddressForOrder=function(){if(e.addaddress.address="",e.addaddress.wing&&(e.addaddress.address+=e.addaddress.wing.trim()+", "),e.addaddress.flatno&&(e.addaddress.address+=e.addaddress.flatno.trim()+", "),e.addaddress.floor&&(e.addaddress.address+="Floor no. "+e.addaddress.floor.trim()+", "),e.addaddress.building&&(e.addaddress.address+=e.addaddress.building.trim()+", "),e.addaddress.plotno&&(e.addaddress.address+="Plot no. "+e.addaddress.plotno.trim()+", "),e.addaddress.sectorno&&(e.addaddress.address+="Sector no. "+e.addaddress.sectorno.trim()+", "),e.addaddress.streetname&&(e.addaddress.address+=e.addaddress.streetname.trim()+", "),e.addaddress.landmark&&(e.addaddress.address+=e.addaddress.landmark.trim()+", "),e.addaddress.area&&(e.addaddress.address+=e.addaddress.area.trim()+", "),e.patient.demography.addresses.length){e.patient.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.addaddress.servicedeliveryaddress="true";var t=angular.copy(e.addaddress),a=!0;e.patient.demography.addresses.forEach(function(t){t._id==e.addaddress._id&&(a=!1,t.title=e.addaddress.title,t.city_id=e.addaddress.city_id,t.pincode=e.addaddress.pincode,t.address=e.addaddress.address,t.wing=e.addaddress.wing,t.flatno=e.addaddress.flatno,t.floor=e.addaddress.floor,t.building=e.addaddress.building,t.plotno=e.addaddress.plotno,t.sectorno=e.addaddress.sectorno,t.streetname=e.addaddress.streetname,t.landmark=e.addaddress.landmark,t.sublocation_id=e.addaddress.sublocation_id,t.servicedeliveryaddress="true")}),a&&e.patient.demography.addresses.push(t)}else{e.addaddress.servicedeliveryaddress="true";var t=angular.copy(e.addaddress);e.call.client_id.demography.addresses.push(t),e.temppatient&&e.temppatient.demography.addresses.push(t)}e.call.city_id=angular.copy(t.city_id),e.call.area_id=angular.copy(t.area_id),e.call.pincode=angular.copy(t.pincode),e.pincodes=angular.copy(e.call.area_id.pincodes),e.call.servicedeliveryaddress=angular.copy(t),e.savePatient(),$("#AddressObjectViewForOrder").modal("hide"),$("#AddressObjectView").modal("hide")},e.savePatient=function(){if(e.addaddress.address="",e.addaddress.wing&&(e.addaddress.address+=e.addaddress.wing.trim()+", "),e.addaddress.flatno&&(e.addaddress.address+=e.addaddress.flatno.trim()+", "),e.addaddress.floor&&(e.addaddress.address+="Floor no. "+e.addaddress.floor.trim()+", "),e.addaddress.building&&(e.addaddress.address+=e.addaddress.building.trim()+", "),e.addaddress.plotno&&(e.addaddress.address+="Plot no. "+e.addaddress.plotno.trim()+", "),e.addaddress.sectorno&&(e.addaddress.address+="Sector no. "+e.addaddress.sectorno.trim()+", "),e.addaddress.streetname&&(e.addaddress.address+=e.addaddress.streetname.trim()+", "),e.addaddress.landmark&&(e.addaddress.address+=e.addaddress.landmark.trim()+", "),e.addaddress.area&&(e.addaddress.address+=e.addaddress.area.trim()+", "),e.patient.demography.altnumber=e.temp.altnumber.length?angular.copy(e.temp.altnumber.map(function(e){return e.text})):[],e.patient._id){e.patient.demography=angular.copy(e.newpatient),e.patient.externalId=angular.copy(e.temp.externalId),e.patient.demography.altnumber=angular.copy(e.temp.altnumber.map(function(e){return e.text}));var t=c.updatePatient(e.patient);t.then(function(t){t.response._id&&($("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.call.patient=t.response,e.patient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.temp.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.temp.otherAddress.push(a)}),e.temp.otherAddress.forEach(function(t){"true"==t.servicedeliveryaddress&&(e.call.servicedeliveryaddress=t)}))})}else{e.patient.partner_id=e.temp.partnerDetail,e.addAddress(),e.patient.externalId=angular.copy(e.temp.externalId),e.temp.altnumber.length&&(e.patient.demography.altnumber=angular.copy(e.temp.altnumber.map(function(e){return e.text})));var t=c.addPatient(e.patient);t.then(function(t){t.response._id&&($("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.call.patient=t.response,e.patient=t.response,e.call.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response),e.temp.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.temp.otherAddress.push(a)}),e.temp.otherAddress.forEach(function(t){"true"==t.servicedeliveryaddress&&(e.call.servicedeliveryaddress=t)}))})}$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.openAddAddress=function(){e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",$("#bookAppointmentObjectView").modal("hide"),$("#AddressObjectViewForOrder").modal("show")},e.openAddAddress=function(){$("#addNewAddaddressFormExixting").modal("hide"),$("#AddressObjectViewForOrder").modal("show")},e.closeAddAddressForOrder=function(){e.editAdd=!1,e.addaddress.sublocation_id=void 0,e.addaddress.title="",e.addaddress.pincode="",e.addaddress.wing="",e.addaddress.flatno="",e.addaddress.floor="",e.addaddress.plotno="",e.addaddress.sectorno="",e.addaddress.building="",e.addaddress.streetname="",e.addaddress.landmark="",$("#AddressObjectViewForOrder").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.changesublocation=function(t){t&&(e.addaddress.pincode=t.pincodes[0])},e.addDemoDetail=function(){e.patient.demography.salutation=e.newpatient.salutation,e.patient.demography.firstname=e.newpatient.firstname,e.patient.demography.middlename=e.newpatient.middlename,e.patient.demography.lastname=e.newpatient.lastname,e.patient.demography.dob=e.newpatient.dob.toISOString(),e.patient.demography.age=e.newpatient.age,e.patient.demography.agetype=e.newpatient.agetype,e.patient.demography.gender=e.newpatient.gender,e.patient.demography.mobilenumber=e.newpatient.mobilenumber,e.patient.demography.altnumber=e.temp.altnumber,e.patient.demography.email=e.newpatient.email},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=angular.copy(s),e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s)}}else if(e.temp.parentAddress)e.patient.demography.addresses=[],e.patient.demography.addresses.push(e.temp.parentAddress),e.addDemoDetail(),e.call.servicedeliveryaddress=e.temp.parentAddress;else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addDemoDetail()}},e.otherAddSelection=function(){e.temp.otherAddress=[],e.temppatient.demography.addresses.forEach(function(t){var a=angular.copy(t);e.temp.otherAddress.push(a)}),$("#addressselection").modal("show")},e.temp.selectaddress=!0,e.checkServiceAddress=function(t){e.temp.selectaddress=!1,e.temp.otherAddress.forEach(function(e){e.servicedeliveryaddress=e._id==t._id?"true":"false"})},e.updatedServiceAdd=function(){e.temppatient.demography.addresses.forEach(function(e){e.servicedeliveryaddress="false"}),e.temppatient.demography.addresses.forEach(function(t){e.temp.otherAddress.forEach(function(a){"true"==a.servicedeliveryaddress&&t._id==a._id&&(e.call.servicedeliveryaddress=angular.copy(t),t.servicedeliveryaddress="true")})})},e.editServiceAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.editAdd=!0,$("#addressselection").modal("hide"),$("#bookAppointmentObjectView").modal("hide"),$("#AddressObjectViewForOrder").modal("show")},e.clearPatient=function(){e.call.patient=angular.copy(e.temppatient),e.temppatient&&(e.call.client_id=angular.copy(e.temppatient)),e.patient=angular.copy(e.temppatient),$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.closeAppointment=function(){$("#bookAppointmentObjectView").modal("hide")},e.getAllServices=function(t){var a={};a.currentPage=1,a.itemPerPage=100,t.partner_id=e.temp.partnerDetail._id,u.getpartnerservices(a,t).then(function(t){e.ServiceList=t.response,e.ServiceList.length||$("#testNotAvailable").modal("show")})},e.setPrice=function(){e.call.amount=0;for(var t=0;t<e.call.services.length;t++)e.call.amount+=0==t?e.call.services[t].service_id.price.mrp+e.finalVisitCharge:e.call.services[t].service_id.price.mrp};var M;e.showPPAddButton=function(t){var a=[];return t.postsample?(t.postservices.forEach(function(t){var s=_.find(e.call.services,function(e){return e.service_id._id==t._id});s&&a.push(s)}),t.postservices.length==a.length?!1:!0):!1},e.addPPTest=function(t){var a={};e.uniqueServices=[],a.services=angular.copy(e.call.services),l.getUniqueTest(a).then(function(a){e.uniqueServices=a.response,e.call.frompptime?(t.forEach(function(t){var a=!0;e.uniqueServices.forEach(function(s){if(s._id==t._id&&(a=!1),a){var i={};i.service_id=t,e.call.services.push(i)}})}),v(),e.call.services=_.uniqBy(e.call.services,"service_id._id")):(e.pushppservice=t,e.call.fromppdate=e.call.fromdate,e.getppWorkingHours())})},e.removeDiscount=function(t){var a=void 0;e.call.discount.forEach(function(e,s){t.name==e.name&&(a=s)}),e.call.discount.splice(a,1),e.addDiscount()},e.discountamount=0,e.discountper=0,e.temp.discountname="NO DISCOUNT";e.call.discount=[],e.setDiscountClass=function(e){return e.discountrs<0||e.discount<0?"premium":e.discountrs>0||e.discount>0?"discount":void 0},e.setDiscountArrayClass=function(e){return e.discountrs<0||e.discount<0?"premium-typeahead-available-text":e.discountrs>0||e.discount>0?"discount-typeahead-available-text":void 0},e.addDiscount=function(t){var a={};a=l.discountCalculation(e.call.discount,t,e.finalVisitCharge,e.call.services),e.call.discount.length&&(e.call.discount=a.discountArray,e.temp.totalRsTest=a.totalRsTest,e.temp.totalRsVisit=a.totalRsVisit,e.temp.totalRsBoth=a.totalRsBoth,e.temp.totalPerTest=a.totalPerTest,e.temp.totalPerVisit=a.totalPerVisit,e.temp.totalperBoth=a.totalperBoth,e.discountAmountPer=a.discountAmountPer,e.vDiscountRs=a.vDiscountRs,e.vDiscountPrcent=a.vDiscountPrcent,e.vDiscountPer=a.vDiscountPer,e.discountper=a.discountper,e.tDiscountName=a.tDiscountName,e.vDiscountName=a.vDiscountName,e.finalVisitCharge=a.finalVisitCharge,e.discountAmountRs=a.discountAmountRs),e.call.services=a.services,e.call.services.length&&e.call.discount.length||f(),e.existDiscountTestPer=!1,e.call.discount||(e.call.discount=[]),e.call.discount.length&&(e.existDiscountTestPer=l.existTestPer(e.call.discount)),e.call.discountobj=void 0},e.getppWorkingHours=function(t){t&&(e.call.frompptime=void 0),e.temp.timeppSlotss=[];var a=(e.call.fromppdate.toISOString(),r.curentWaqtTime());e.fromday=e.call.fromdate.getDayName(),e.lowerfromday=moment(e.call.fromppdate).format("dddd"),e.lowerfromday=e.lowerfromday.toLowerCase();var s=e.call.fromppdate.toISOString(),i=!0,n=e.call.fromdate.toISOString(),o=e.call.fromtime;l.getppTimeSlot(e.temp.partnerDetail._id,e.call.servicedeliveryaddress.area_id._id,e.lowerfromday,a,s,i,o,n,e.call.servicedeliveryaddress._id).then(function(t){e.temp.timeppSlotss=t.response,e.temp.timeppSlotss.forEach(function(t){t.slots.length&&t.slots.forEach(function(t){t.groupIds&&t.groupIds.length&&t.groupIds.forEach(function(a){a==e.temp.orderGroupId&&(t.available=!0,t.text="Open")})})}),$("#ppslotModal").modal("show")})},e.changeppTime=function(t){var a=!0;if(e.pushppservice||(e.pushppservice=[]),e.tempSelectedService||(e.tempSelectedService={}),e.call.frompptime||e.pushppservice.length&&(e.pushppservice.forEach(function(t){var s=!0;a=!1,e.uniqueServices.forEach(function(a){if(a._id==t._id&&(s=!1),s){var i={};i.service_id=t,e.call.services.push(i)}})}),e.call.services=_.uniqBy(e.call.services,"service_id._id")),!e.pushppservice.length&&!e.call.frompptime&&e.tempSelectedService._id&&a)if(e.ppYesFlag&&e.copyTestFromHistory);else if(e.ppYesFlag&&e.tempSelectedService){var s={};s=angular.copy(e.tempSelectedService),e.service_sm={},e.service_sm.service_id=angular.copy(s),e.call.services.push(e.service_sm)}else e.call.services=e.temp.ppServicesAdd;e.tempSelectedService={},e.pushppservice=[],e.uniqueServices=[],e.call.frompptime=t,v(),$("#ppslotModal").modal("hide")},e.replaceServices=function(){e.call.services=e.temp.fServicesAdd,v()},e.goToPPTestAdd=function(){e.getppWorkingHours()},e.openSecondpopup=function(){$("#addPPtwothreeServiceConformation").modal("show")},e.openFSecondpopup=function(){$("#addftwothreeServiceConformation").modal("show")},e.SelectService=function(t){e.temp.ppServicesAdd=[],e.temp.fServicesAdd=[],e.tempSelectedService={},e.tempSelectedService=angular.copy(t),e.tempCoveredTest={},e.tempCoveredTest.service_id=angular.copy(t),e.service_sm={},e.service_sm.service_id=angular.copy(t);var a=angular.copy(e.call.services);a.push(e.service_sm);var s=!1;if(O>S&&(e.temp.isBackDate=!0),e.temp.isBackDate&&e.call.services.length){var i={};i.services=angular.copy(e.call.services),l.getUniqueTest(i).then(function(i){var n=[];if(n=angular.copy(i.response),n.length&&(s=l.checkPPTestInUniqe(n,t)),s)e.ServiceList=[],e.searchObj.servicename="";else{var r=l.cancelPPOrder(a);if(r&&!e.call.frompptime){e.ppYesFlag=!0,e.pushppservice=[],e.call.fromppdate=e.call.fromdate;var o={};o.serviceIds=[],o.serviceIdtoadd=t._id,e.call.services.forEach(function(e){o.serviceIds.push(e.service_id._id)}),l.getSuperSetServices(o).then(function(t){t.fewExist?(t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.ppServicesAdd.push(e.service_sm)}),e.ppYesFlag=!1,t.messageSome&&!t.message?(e.coveredTestPPPopupText=t.messageSome,$("#addPPServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addPPtwoServiceConformation=t.messageSome,e.addPPtwothreeServiceConformation=t.message,$("#addPPtwoServiceConformation").modal("show"))):(t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.ppServicesAdd.push(e.service_sm)}),e.ppYesFlag=!1,t.message?(e.coveredTestElsePPPopupText=t.message,$("#addPPElseServiceConformation").modal("show")):e.getppWorkingHours())})}else{var o={};o.serviceIds=[],o.serviceIdtoadd=t._id,e.call.services.forEach(function(e){o.serviceIds.push(e.service_id._id)}),l.getSuperSetServices(o).then(function(t){t.fewExist?(t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.fServicesAdd.push(e.service_sm)}),t.messageSome&&!t.message?(e.addServiceConformation=t.messageSome,$("#addServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addftwoServiceConformation=t.messageSome,e.addftwothreeServiceConformation=t.message,$("#addftwoServiceConformation").modal("show"))):(t.message&&(e.coveredPPTestPopupText=t.message,$("#addffServiceConformation").modal("show")),e.call.services=[],t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.call.services.push(e.service_sm)}),v())})}e.service_sm={},e.service_sm.service_id={},e.call.amount=0,e.ServiceList=[],e.searchObj.servicename=""}})}else{var n=l.cancelPPOrder(a);if(n&&!e.call.frompptime){e.ppYesFlag=!0,e.pushppservice=[],e.call.fromppdate=e.call.fromdate;var r={};r.serviceIds=[],r.serviceIdtoadd=t._id,e.call.services.forEach(function(e){r.serviceIds.push(e.service_id._id)}),l.getSuperSetServices(r).then(function(t){t.fewExist?(t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.ppServicesAdd.push(e.service_sm)}),e.ppYesFlag=!1,t.messageSome&&!t.message?(e.coveredTestPPPopupText=t.messageSome,$("#addPPServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addPPtwoServiceConformation=t.messageSome,e.addPPtwothreeServiceConformation=t.message,$("#addPPtwoServiceConformation").modal("show"))):(t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.ppServicesAdd.push(e.service_sm)}),e.ppYesFlag=!1,t.message?(e.coveredTestElsePPPopupText=t.message,$("#addPPElseServiceConformation").modal("show")):e.getppWorkingHours())})}else{var r={};r.serviceIds=[],r.serviceIdtoadd=t._id,e.call.services.forEach(function(e){r.serviceIds.push(e.service_id._id)}),l.getSuperSetServices(r).then(function(t){t.fewExist?(t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.temp.fServicesAdd.push(e.service_sm)}),t.messageSome&&!t.message?(e.addServiceConformation=t.messageSome,$("#addServiceConformation").modal("show")):t.messageSome&&t.message&&(e.addftwoServiceConformation=t.messageSome,e.addftwothreeServiceConformation=t.message,$("#addftwoServiceConformation").modal("show"))):(t.message&&(e.coveredPPTestPopupText=t.message,$("#addffServiceConformation").modal("show")),e.call.services=[],t.services.forEach(function(t){e.service_sm={},e.service_sm.service_id=angular.copy(t),e.call.services.push(e.service_sm)}),v())})}e.service_sm={},e.service_sm.service_id={},e.call.amount=0,e.ServiceList=[],e.searchObj.servicename=""}},e.showComponents=function(t){var a={},s={service_id:t};a.services=angular.copy([s]),l.getUniqueTest(a).then(function(a){e.componemtModal={name:t.name,category:t.category},e.componemtModal.services=a.response,$("#showComponentsModal").modal("show")})};var j="";e.showDeleteModel=function(e){j=e,$("#delServiceModal").modal("show")},e.closedeletemodal=function(){$("#delServiceModal").modal("hide")},e.deleteService=function(){e.call.services.splice(j,1);var t=l.cancelPPOrder(e.call.services);t||(e.call.fromppdate=void 0,e.call.frompptime=void 0),v(),$("#delServiceModal").modal("hide"),$(".modal-backdrop").remove()},e.changeinout=function(){e.hideservice="outgoing"==e.call.inout?!0:!1},e.cancelCall=function(){e.call.patient={},e.call.services=[],f(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,M=[],r.currentcall=void 0,s.go("main.order")},e.changeCallType=function(){"servicerequest"==e.call.type?(e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname="",e.whenServiceRequest=!0,e.whenRequestStatus=!1):"requeststatus"==e.call.type?(e.call.followupby={},e.call.followupby.profile={},e.call.followupby.profile.firstname="",e.whenRequestStatus=!0,e.whenServiceRequest=!1):(e.call.patient={},e.whenServiceRequest=!1,e.whenRequestStatus=!1),e.call.services=[],f(),e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,M=[]},e.getOtherSlotWorkingHourspopup=function(){e.getOtherSlotWorkingHourspp(),$("#selectpptime").modal("show")},e.closeOtherPPmodel=function(){$(".modal-backdrop").remove()},e.callcreated=function(){$(".modal-backdrop").remove(),$("#callCreated").modal("hide"),s.go("main.order")};var L={};e.saveOrder=function(t){$("#progressIndicator").modal("show");var a=[];e.call.services.forEach(function(e){var t={};t.service_id=e.service_id._id,t.price=e.service_id.price.mrp,a.push(t)}),e.temp.premiumchargesper||(e.temp.premiumchargesper=0),e.call.discount.forEach(function(e){"VISIT CHARGE"==e.discountapplicable&&(e.discountapplicable="VISIT")}),L={source:"WEB",provider_id:e.temp.provider_id,client_id:e.call.client_id._id,partner_id:e.temp.partnerDetail._id,fromdate:e.call.fromdate.toISOString(),todate:e.call.fromdate.toISOString(),status:"Unassigned",specialneed:e.call.specialNeedList,services:a,servicedeliveryaddress:e.call.servicedeliveryaddress,paymentdetails:{amount:e.call.amount,discount:-1*e.temp.premiumchargesper,paymentoptions:e.call.paymentoptions,orderDiscount:e.call.discount},droppointaddress:e.call.sampledrop,comment:e.call.remark,createdbyname:e.call.createdby,area_id:e.call.servicedeliveryaddress.area_id._id,fromtime:e.call.fromtime,ordertype:"F"},e.temp.orderGroupId&&(L.orderGroupId=e.temp.orderGroupId),e.temp.currentparent_id&&(L.currentparent_id=e.temp.currentparent_id),e.temp.parentorder_id&&(L.parentorder_id=e.temp.parentorder_id),e.call.paymentdetails||(e.call.paymentdetails={}),e.call.paymentdetails.reportdeliverymode?L.paymentdetails.reportdeliverymode=a.length?e.call.paymentdetails.reportdeliverymode:[]:e.call.paymentdetails.reportdeliverymode=[],L.addpatientcomment||(L.addpatientcomment={}),e.call.reasonsForAddPt||(e.call.reasonsForAddPt=[]),e.call.reasonsForAddPt.length&&(L.addpatientcomment.addpatientreasons=e.call.reasonsForAddPt),e.call.addPTOtherRes&&(L.addpatientcomment.addpatientothercomment=[],L.addpatientcomment.addpatientothercomment[0]=e.call.addPTOtherRes),"saveExit"==t&&r.createCall(L).then(function(e){$(".modal-backdrop").remove(),e.order._id&&$("#callCreated").modal("show"),$("#progressIndicator").modal("hide")}),"saveAddppexit"==t&&(e.temp.pppostvisitcheck=!1,e.temp.disableforaddpatientcheck=!1,e.temp.ppvistparentid||(e.temp.saveppandexit=!0,y())),"saveAddpp"==t&&(e.temp.pppostvisitcheck=!1,e.temp.disableforaddpatientcheck=!1,e.temp.ppvistparentid||(e.temp.saveppandexit=!1,e.call.fromPptime||(e.call.fromPptime=parseInt(e.call.frompptime),e.call.fromPpdate=e.call.fromppdate.toISOString()),y())),"addPatient"==t&&r.createCall(L).then(function(t){$(".modal-backdrop").remove(),t.order._id&&$("#addpatientcallCreated").modal("show"),e.PatientList=[],e.call.services=[],e.call.services=[],e.call.fromppdate=void 0,e.call.frompptime=void 0,e.temp.ppavailable=!1,M=[],e.call.remark=void 0,e.PatientList=[],e.temp.otherAddress=[],e.temp.selectaddress=!0,e.call.client_id={},e.call.patient={},e.patient={},e.temppatient={},e.call.discount=[],e.call.specialNeedList=[],e.call.paymentoptions=[],f(),e.temp.orderGroupId||(e.temp.orderGroupId=t.order.orderGroupId),e.temp.parentorder_id||(e.temp.parentorder_id=t.order._id),e.temp.parentAddress||(e.temp.parentAddress=e.call.servicedeliveryaddress),$("#progressIndicator").modal("hide")})},e.removeSN=function(t){e.call.specialNeedList.forEach(function(a,s){a._id==t._id&&e.call.specialNeedList.splice(s,1)}),!e.call.specialNeedList.length},e.addMultipleSN=function(t){var a=!0;e.call.specialNeedList.forEach(function(s,i){"NA"==s.name.toUpperCase()&&e.call.specialNeedList.splice(i,1),s._id==t._id&&(a=!1)}),"NA"==t.name.toUpperCase()&&(e.call.specialNeedList=[]),a&&e.call.specialNeedList.push(t),e.call.specialneed=""};JSON.parse(sessionStorage.getItem("globaldata"));e.initializePaging(),b(),e.user.userdata.userinfo.partners.length?e.partnerList=e.user.userdata.userinfo.partners:e.getPartners(),"partnerfrontoffice"==e.globaldata.userdata.role&&(e.temp.partnerformtoffice=!0,e.call.partner_id=e.partnerList[0],e.changePartner(e.call.partner_id)),e.addPaymentOptions=function(t){e.call.paymentoptions||(e.call.paymentoptions=[]);var a=!1;_.find(e.call.paymentoptions,function(e){e.toUpperCase()==t.toUpperCase()&&(a=!0)}),a||e.call.paymentoptions.push(t),e.display.paymentoption=""},e.removePaymentOptions=function(t){e.call.paymentoptions.splice(t,1)},e.addPTReasonOptions=function(t){e.call.reasonsForAddPt||(e.call.reasonsForAddPt=[]);var a=!1;_.find(e.call.reasonsForAddPt,function(e){e._id==t._id&&(a=!0)}),a||e.call.reasonsForAddPt.push(t),e.display.addPTReason=""},e.removeaddPtRemove=function(t){e.call.reasonsForAddPt.splice(t,1)},e.oneCheckOrder=!1,e.checkServices=function(t,a,s){a.checked=s,e.oneCheckOrder=!1;for(var i=0;i<e.patient.allOrder.length;i++)a._id!=e.patient.allOrder[i]._id&&(e.patient.allOrder[i].checked=!1);for(var i=0;i<e.patient.allOrder.length;i++)1==e.patient.allOrder[i].checked&&(e.patient.allOrder[i].services||(e.patient.allOrder[i].services=[]),e.patient.allOrder[i].services.length&&(e.oneCheckOrder=!0))},e.coyTestModal=function(){$("#copyTestMsg").modal("show")},e.coyTest=function(){e.copyTestFromHistory=!1;for(var t=[],a=0;a<e.patient.allOrder.length;a++)1==e.patient.allOrder[a].checked&&e.patient.allOrder[a].services.length&&e.patient.allOrder[a].services.forEach(function(e){t.push(e)});e.call.services=[],e.call.services=angular.copy(t);var s=l.cancelPPOrder(e.call.services);s&&!e.call.frompptime&&(e.copyTestFromHistory=!0,e.ppYesFlag=!0,e.call.fromppdate=e.call.fromdate,e.getppWorkingHours()),s||(e.ppYesFlag=!1,e.copyTestFromHistory=!1,e.call.fromppdate=void 0,e.call.frompptime=void 0,v())}};e.$inject=["$scope","$q","$location","$state","user","$stateParams","callFactory","partnerFactory","areaFactory","orderFactory","clientFactory","cityFactory","partnertestFactory","$rootScope","specialneedFactory"],angular.module("webApp").controller("addPatientController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d){function l(){if(e.paging||(e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=25),e.searchObj.partner_id&&e.searchObj.partner_id&&e.paging){var t=[],a=e.searchObj.partner_id.split(",");e.partner=d.checkIfExist_New(a,e.partnerList,"_id").Obj;for(var s=0;s<e.partner.length;s++)t.push(e.partner[s]._id),e.temp.partnerList.push(e.partner[s]);var i=t.join(",");e.searchObj.partner_id=i,e.isPaging=!0,e.table(e.searchObj)}}function c(){e.display.specialneeds||(e.display.specialneeds=[]),s.get().then(function(t){t.response.length&&(t.response.forEach(function(t){"NA"!=t.name.toUpperCase()&&e.display.specialneeds.push(t)}),sessionStorage.setItem("specialneedsList",JSON.stringify(e.display.specialneeds)))})}if(e.user=o,e.isAdvanceSearch=!0,$("#progressIndicator").modal("show"),$("#progressIndicator").modal("hide"),e.temp||(e.temp={}),e.display={},e.temp.partnerList=[],e.searchObj={},e.call={},sessionStorage.getItem("specialneedsList")||c(),e.details={},e.call={},e.patientSearchOBJ={},e.displayInfo={},e.searchObj.iscarddelivered=!0,e.newMemberRenewalFlag=!0,e.patient||(e.patient={},e.patient.registrationdate=new Date,e.patient.demography={}),e.patient||(e.patient={}),e.patient.demography||(e.patient.demography={}),e.temp.altnumber&&e.temp.altnumber.length){var p=[];p=e.temp.altnumber.map(function(e){return e.text})}e.copyAdderss=function(){e.patient.demography.residentialaddress=e.temp.chkAdd?e.patient.demography.servicedeliveryaddress:{}},e.changesublocation=function(){e.temp.sublocation_id.length&&e.temp.sublocation_id.length>1&&e.temp.sublocation_id.splice(0,1),e.temp.sublocation_id.forEach(function(t){e.addaddress.sublocation_id=t,e.temp.sublocationid=t._id,e.addaddress.pincode=t.pincodes[0]})},e.loadSublocation=function(t){var a=e.subLocationList.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())?!0:void 0});return 0==a.length&&alert("no result found"),a},e.tagRemoved=function(){e.addaddress.sublocation_id=void 0,e.temp.sublocationid=void 0,e.addaddress.pincode=void 0},e.initializePaging=function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=25},e.changeDeceased=function(){e.patient.demography.deceaseddate="",e.patient.demography.deceasedcomment=""},e.changeSource=function(){e.temp.showSourceName="doctorreferral"==e.patient.referredby||"other"==e.patient.referredby?!0:!1},e.loadLanguages=function(a){var s=t.defer();a=a.toLowerCase();var i=e.LanguagesList.optionlist.filter(function(e){return e.displayname.toLowerCase().indexOf(a)>-1?e.code:void 0});return s.resolve(i),s.promise},e.langTagAdded=function(t){e.patient.demography.languagesknown.push(t)},e.langTagRemoved=function(t){var a=e.patient.demography.languagesknown.indexOf(t.text);e.patient.demography.languagesknown.splice(a,1)},e.getSessionStorage=function(){e.patienttypelist={_id:"5559febbdb4da0841655631d",name:"patienttype",displayname:"Patient Type",optionlist:[{code:"member",displayname:"Member",active:!0},{code:"nonmember",displayname:"Non-Member",active:!0},{code:"institutemember",displayname:"Institute Member",active:!0}],source:"webhcm"},e.genderlist={_id:"555c3a53b08eeddc0dab01d3",name:"genders",displayname:"Genders",optionlist:[{code:"male",displayname:"Male",active:!0},{code:"female",displayname:"Female",active:!0},{code:"thirdgender",displayname:"Third Gender",active:!0}],source:"webhcm"},e.bloodgrouplist={_id:"555c3a24b08eeddc0dab01d1",name:"bloodgroups",displayname:"Blood Groups",optionlist:[{code:"O+",displayname:"O +",active:!0},{code:"O-",displayname:"O -",active:!0},{code:"A+",displayname:"A +",active:!0},{code:"A-",displayname:"A -",active:!0},{code:"B+",displayname:"B +",active:!0},{code:"B-",displayname:"B -",active:!0},{code:"AB+",displayname:"AB +",active:!0},{code:"AB-",displayname:"AB -",active:!0},{code:"notknown",displayname:"Not Known",active:!0}],source:"webhcm"},e.salutationlist={_id:"555c3a3eb08eeddc0dab01d2",name:"salutations",displayname:"Salutations",optionlist:[{code:"Mr.",displayname:"Mr.",active:!0},{code:"Mrs.",displayname:"Mrs.",active:!0},{code:"Miss",displayname:"Miss",active:!0},{code:"Ms.",displayname:"Ms.",active:!0},{code:"Dr.",displayname:"Dr.",active:!0},{code:"Prof.",displayname:"Prof.",active:!0},{code:"baby",displayname:"Baby",active:!0},{code:"col",displayname:"Col",active:!0}],source:"webhcm"},e.LanguagesList={_id:"555c715fb08eeddc0dab01d4",name:"languageknown",displayname:"Language Known",__v:1,source:"webhcm",iseditable:!1,optionlist:[{code:"english",displayname:"English",_id:"55bd1a0655d8f10c00e94239",dimensions:[],active:!0},{code:"hindi",displayname:"Hindi",_id:"55bd1a0655d8f10c00e9423a",dimensions:[],active:!0},{code:"bengali",displayname:"Bengali",_id:"55bd1a0655d8f10c00e9423b",dimensions:[],active:!0},{code:"telugu",displayname:"Telugu",_id:"55bd1a0655d8f10c00e9423c",dimensions:[],active:!0},{code:"marathi",displayname:"Marathi",_id:"55bd1a0655d8f10c00e9423d",dimensions:[],active:!0},{code:"tamil",displayname:"Tamil",_id:"55bd1a0655d8f10c00e9423e",dimensions:[],active:!0},{code:"urdu",displayname:"Urdu",_id:"55bd1a0655d8f10c00e9423f",dimensions:[],active:!0},{code:"gujarati",displayname:"Gujarati",_id:"55bd1a0655d8f10c00e94240",dimensions:[],active:!0},{code:"kannada",displayname:"Kannada",_id:"55bd1a0655d8f10c00e94241",dimensions:[],active:!0},{code:"malayalam",displayname:"Malayalam",_id:"55bd1a0655d8f10c00e94242",dimensions:[],active:!0},{code:"oriya",displayname:"Oriya",_id:"55bd1a0655d8f10c00e94243",dimensions:[],active:!0},{code:"punjabi",displayname:"Punjabi",_id:"55bd1a0655d8f10c00e94244",dimensions:[],active:!0},{code:"assamese",displayname:"Assamese",_id:"55bd1a0655d8f10c00e94245",dimensions:[],active:!0},{code:"maithili",displayname:"Maithili",_id:"55bd1a0655d8f10c00e94246",dimensions:[],active:!0},{code:"bhili/bhilodi",displayname:"Bhili/Bhilodi",_id:"55bd1a0655d8f10c00e94247",dimensions:[],active:!0},{code:"santali",displayname:"Santali",_id:"55bd1a0655d8f10c00e94248",dimensions:[],active:!0},{code:"kashmiri",displayname:"Kashmiri",_id:"55bd1a0655d8f10c00e94249",dimensions:[],active:!0},{code:"nepali",displayname:"Nepali",_id:"55bd1a0655d8f10c00e9424a",dimensions:[],active:!0},{code:"gondi",displayname:"Gondi",_id:"55bd1a0655d8f10c00e9424b",dimensions:[],active:!0},{code:"sindhi",displayname:"Sindhi",_id:"55bd1a0655d8f10c00e9424c",dimensions:[],active:!0},{code:"konkani",displayname:"Konkani",_id:"55bd1a0655d8f10c00e9424d",dimensions:[],active:!0},{code:"dogri",displayname:"Dogri",_id:"55bd1a0655d8f10c00e9424e",dimensions:[],active:!0},{code:"khandeshi",displayname:"Khandeshi",_id:"55bd1a0655d8f10c00e9424f",dimensions:[],active:!0},{code:"kurukh",displayname:"Kurukh",_id:"55bd1a0655d8f10c00e94250",dimensions:[],active:!0},{code:"tulu",displayname:"Tulu",_id:"55bd1a0655d8f10c00e94251",dimensions:[],active:!0},{code:"meitei/manipuri",displayname:"Meitei/Manipuri",_id:"55bd1a0655d8f10c00e94252",dimensions:[],active:!0},{code:"bodo",displayname:"Bodo",_id:"55bd1a0655d8f10c00e94253",dimensions:[],active:!0},{code:"khasi",displayname:"Khasi",_id:"55bd1a0655d8f10c00e94254",dimensions:[],active:!0},{code:"mundari",displayname:"Mundari",_id:"55bd1a0655d8f10c00e94255",dimensions:[],active:!0},{code:"ho",displayname:"Ho",_id:"55bd1a0655d8f10c00e94256",dimensions:[],active:!0},{code:"chhattisgarhi",displayname:"Chhattisgarhi",_id:"55bd1a0655d8f10c00e94257",dimensions:[],active:!0},{code:"rajasthani",displayname:"Rajasthani",_id:"55bd1a0655d8f10c00e94258",dimensions:[],active:!0},{code:"magadh/magahi",displayname:"Magadh/Magahi",_id:"55bd1a0655d8f10c00e94259",dimensions:[],active:!0},{code:"haryanvi",displayname:"Haryanvi",_id:"55bd1a0655d8f10c00e9425a",dimensions:[],active:!0},{code:"marwari",displayname:"Marwari",_id:"55bd1a0655d8f10c00e9425b",dimensions:[],active:!0},{code:"malvi",displayname:"Malvi",_id:"55bd1a0655d8f10c00e9425c",dimensions:[],active:!0},{code:"mewari",displayname:"Mewari",_id:"55bd1a0655d8f10c00e9425d",dimensions:[],active:!0},{code:"khorth/khotta",displayname:"Khorth/Khotta",_id:"55bd1a0655d8f10c00e9425e",dimensions:[],active:!0},{code:"bundeli/bundelkhan",displayname:"Bundeli/Bundelkhan",_id:"55bd1a0655d8f10c00e9425f",dimensions:[],active:!0},{code:"bagheli/baghelkhan",displayname:"Bagheli/Baghelkhan",_id:"55bd1a0655d8f10c00e94260",dimensions:[],active:!0},{code:"pahari",displayname:"Pahari",_id:"55bd1a0655d8f10c00e94261",dimensions:[],active:!0},{code:"laman/lambadi",displayname:"Laman/Lambadi",_id:"55bd1a0655d8f10c00e94262",dimensions:[],active:!0},{code:"awadhi",displayname:"Awadhi",_id:"55bd1a0655d8f10c00e94263",dimensions:[],active:!0},{code:"harauti",displayname:"Harauti",_id:"55bd1a0655d8f10c00e94264",dimensions:[],active:!0},{code:"garhwali",displayname:"Garhwali",_id:"55bd1a0655d8f10c00e94265",dimensions:[],active:!0},{code:"nimadi",displayname:"Nimadi",_id:"55bd1a0655d8f10c00e94266",dimensions:[],active:!0},{code:"sadan/sadri",displayname:"Sadan/Sadri",_id:"55bd1a0655d8f10c00e94267",dimensions:[],active:!0},{code:"kumauni",displayname:"Kumauni",_id:"55bd1a0655d8f10c00e94268",dimensions:[],active:!0},{code:"dhundhari",displayname:"Dhundhari",_id:"55bd1a0655d8f10c00e94269",dimensions:[],active:!0},{code:"surgujia",displayname:"Surgujia",_id:"55bd1a0655d8f10c00e9426a",dimensions:[],active:!0},{code:"bagri rajasthani",displayname:"Bagri Rajasthani",_id:"55bd1a0655d8f10c00e9426b",dimensions:[],active:!0},{code:"banjari",displayname:"Banjari",_id:"55bd1a0655d8f10c00e9426c",dimensions:[],active:!0},{code:"nagpuria (varhadi)",displayname:"Nagpuria (Varhadi)",_id:"55bd1a0655d8f10c00e9426d",dimensions:[],active:!0},{code:"surajpuri",displayname:"Surajpuri",_id:"55bd1a0655d8f10c00e9426e",dimensions:[],active:!0},{code:"kangri",displayname:"Kangri",_id:"55bd1a0655d8f10c00e9426f",dimensions:[],active:!0},{code:"bhojpuri",displayname:"Bhojpuri",_id:"55bd1a0655d8f10c00e94270",dimensions:[],active:!0}],_Deleted:!1},e.relationship={_id:"5582a808e280b8f40f6a887b",name:"relationship",displayname:"Relationship",optionlist:[{code:"father",displayname:"Father",_id:"55b4a34e99af3b0e003661bb",active:!0},{code:"mother",displayname:"Mother",_id:"55b4a34e99af3b0e003661ba",active:!0},{code:"brother",displayname:"Brother",_id:"55b4a34e99af3b0e003661b9",active:!0},{code:"sister",displayname:"Sister",_id:"55b4a34e99af3b0e003661b8",active:!0},{code:"self",displayname:"Self",_id:"55b7229c6727ef0c007f6831",active:!0},{code:"son-in-law",displayname:"Son-in-law",_id:"55b7229c6727ef0c007f6830",active:!0},{code:"daughter-in-law",displayname:"Daughter-in-law",_id:"55b7229c6727ef0c007f682f",active:!0},{code:"mother-in-law",displayname:"Mother-in-law",_id:"55b7229c6727ef0c007f682e",active:!0},{code:"friend",displayname:"Friend",_id:"55b722db6727ef0c007f6834",active:!0},{code:"wife",displayname:"Wife",_id:"55b722db6727ef0c007f6833",active:!0},{code:"husband",displayname:"Husband",_id:"55b722db6727ef0c007f6832",active:!0},{code:"nhhs staff",displayname:"NHHS Staff",_id:"55b725866727ef0c007f6841",active:!0}],source:"webhcm"},e.ReferredList={_id:"558a55ca69f95aa00e919bdc",name:"referralsource",displayname:"Referral Source",optionlist:[{code:"newspaper",displayname:"Newspaper",active:!0},{code:"television",displayname:"Television",active:!0},{code:"wordofmouth",displayname:"Word Of Mouth",active:!0},{code:"web",displayname:"Web",active:!0},{code:"doctorreferral",displayname:"Doctor Referral",active:!0},{code:"internalreferral",displayname:"Internal Referral",active:!0},{code:"customerreference",displayname:"Customer Reference",active:!0},{code:"other",displayname:"Other",active:!0}],source:"webhcm"}
},e.getState=function(){e.stateList=[{name:"Maharashtra",code:"maharashtra"},{name:"Gujarat",code:"gujarat"}]},e.getCity=function(){i.paginateResult().then(function(t){e.cityList=t.response})},e.getArea=function(t){n.get(t).then(function(t){e.areaList=t.response})},e.changeCity=function(){var t={};t.city_id=e.addaddress.city_id._id,e.getArea(t)},e.enterPincode=function(){var t={};t.areasearch=e.addaddress.pincode,e.getArea(t)},e.addPatient=function(){e.patient.demography.altnumber=p,e.patient._id?a.updatePatient(e.patient).then(function(){r.path("/main/client")}):a.addPatient(e.patient).then(function(){r.path("/main/client")})},e.openAddAddress=function(){$("#AddPatientObjectView").modal("hide"),$("#AddressObjectView").modal("show")},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=s,e.addaddress={},e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={}}}else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s),e.addaddress={}}},e.checkServiceAddress=function(t,a){for(var s=0;s<e.patient.demography.addresses.length;s++)s!=a?e.patient.demography.addresses[s].servicedeliveryaddress="false":e.patient.demography.addresses[a].servicedeliveryaddress="true"},e.closeAddAddress=function(){$("#AddressObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.editAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.editAdd=!0},e.deleteAddress=function(t,a){1!=e.patient.demography.addresses.length?(e.patient.demography.addresses.splice(a,1),t.servicedeliveryaddress&&(e.patient.demography.addresses[0].servicedeliveryaddress="true")):alert("not allowed")},e.editPatient=function(t){sessionStorage.setItem("searchpatient",JSON.stringify(e.searchObj)),sessionStorage.setItem("searchpartner",JSON.stringify(e.call)),sessionStorage.setItem("pagingPatientList",JSON.stringify(e.paging)),r.path("/main/client-update/"+t._id)},e.close=function(){a.putPatient(),r.path("/main/client")},e.deletePatient=function(t){a.deletePatient(t).then(function(){e.table()})},e.getPatient=function(t,s){switch(s){case"byname":e.searchObj.patientname=t;break;case"bymembershipnumber":e.searchObj.membershipnumber=t;break;case"bymembershipdisplay":e.searchObj.membershipdisplay=t}return a.getPatientList("","","","",!1,e.searchObj).then(function(t){return t.response.length>0?(e.Patients=t.response,e.Patients):(e.mgs="Patient not found",delete e.patient.primary_id,delete e.patient.primarymembershipnumber,void 0)})},e.SelectPatient=function(t){e.disablePatient=!0,e.patient.primary_id=t,e.patientname=t.demography.name,e.patient.primarymembershipnumber=t.membershipnumber,e.Patients=[],delete e.searchObj.tempPatientObjByName,delete e.searchObj.tempPatientObjByMSN,e.displayInfo={},e.displayInfo.primarypatientname="Name : "+t.demography.name+", ("+t.membershipnumber+")",$("#primarypatientsearchModel").modal("hide")},e.clearPatient=function(){e.disablePatient=!1,e.Patients=[],delete e.patient.primary_id,delete e.patient.primarymembershipnumber,e.patientname="",e.displayInfo={}},e.getSessionStorage(),e.table=function(t){e.isPaging||e.initializePaging(),e.searchObj=t,e.patientsList=[],a.getPatientList(e.paging,e.searchObj,!0).then(function(t){e.patientsList=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,e.patient_search=""}),e.isPaging=!1},e.clearSearchData=function(){e.searchObj.searchText="",e.searchObj.firstname="",e.searchObj.middlename="",e.searchObj.lastname="",e.table(e.searchObj)},e.edit=function(){var t=a.getPatient();t&&(e.patient=t),e.patient._id?(e.patient.demography.altnumber&&(e.temp.altnumber=e.patient.demography.altnumber),e.changeSource()):(e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[])},e.temp.ageIn=[{agein:"YEARS"},{agein:"MONTHS"},{agein:"DAYS"}],e.getPartners=function(t){sessionStorage.getItem("searchpatient")&&(e.searchObj=JSON.parse(sessionStorage.getItem("searchpatient")),sessionStorage.removeItem("searchpatient")),sessionStorage.getItem("searchpartner")&&(e.call=JSON.parse(sessionStorage.getItem("searchpartner")),sessionStorage.removeItem("searchpartner")),sessionStorage.getItem("pagingPatientList")&&(e.paging=JSON.parse(sessionStorage.getItem("pagingPatientList")),sessionStorage.removeItem("pagingPatientList")),t&&(e.temp.partnerList=[],e.patientsList=[]),e.searchObj.partnertype||(e.searchObj.partnertype="b2b");var a=d.get("",e.searchObj);a.then(function(a){e.partnerList=a.response,"partnerfrontoffice"==e.user.userdata.role&&(e.call.partner_id=e.partnerList[0],e.display.partnername=e.call.partner_id.info.name,e.searchObj.partner_id=e.call.partner_id._id,e.table(e.searchObj)),"partnerteamlead"==e.user.userdata.role&&(e.call.partner_id=e.partnerList[0],e.display.partnername=e.call.partner_id.info.name,e.searchObj.partner_id=e.call.partner_id._id,e.table(e.searchObj)),t||l()})},e.changePartner=function(t){if(e.searchObj.partnertype||(e.searchObj.partnertype="b2b"),t){if(e.temp.partnerList.length){for(var a=!1,s=0;s<e.temp.partnerList.length;s++)if(e.temp.partnerList[s]._id==t._id){a=!0;break}0==a&&e.temp.partnerList.push(t)}else e.temp.partnerList.push(t);for(var i=[],s=0;s<e.temp.partnerList.length;s++)i.push(e.temp.partnerList[s]._id);e.searchObj.partner_id=i.join(","),d.selectedPartner=t,e.table(e.searchObj)}else e.patientsList=[],e.temp.partnerList=[];e.call.partner_id={}},e.removePartner=function(t,a){var s=[];if(e.temp.partnerList.splice(a,1),e.temp.partnerList.length){for(var i=0;i<e.temp.partnerList.length;i++)s.push(e.temp.partnerList[i]._id);e.searchObj.partner_id=s.join(","),d.selectedPartner=t,e.table(e.searchObj)}else e.initializePaging(),e.patientsList=[]},e.searchObj.partnertype="b2b",e.getPartners()};e.$inject=["$scope","$q","clientFactory","specialneedFactory","cityFactory","areaFactory","$location","user","partnerFactory","$state"];var t=angular.module("webApp");t.controller("mlyclientController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l){function c(){var e="checkApiContainer";return l.httpGET(e)}function p(){var e="checkOrderContainer";return l.httpGET(e)}function u(){var e="checkGroupOrderContainer";return l.httpGET(e)}function m(){var e="checkReportContainer";return l.httpGET(e)}function g(){var e="checkSDContainer";return l.httpGET(e)}function h(){var e="checkSCContainer";return l.httpGET(e)}return{getApiStatus:c,getOrderStatus:p,getGroupOrdersStatus:u,getReportStatus:m,getSDStatus:g,getSCStatus:h}};e.$inject=["$http","$q","$window","user","$state","$templateCache","successURL","successState","optionMasterFactory","apiCall","$location","$rootScope","apiRootUrl"];var t=null,a=function(e){t=e};a.$inject=["$stateProvider"],angular.module("webApp").factory("containerFactory",e).config(a)}(),function(){"use strict";var e=function(e,t,a,s){function i(){s.getApiStatus().then(function(t){e.status1=t}),s.getOrderStatus().then(function(t){e.status2=t}),s.getGroupOrdersStatus().then(function(t){e.status3=t}),s.getReportStatus().then(function(t){e.status4=t}),s.getSDStatus().then(function(t){e.status5=t}),s.getSCStatus().then(function(t){e.status6=t})}!function(){i()}()};e.$inject=["$scope","$location","$state","containerFactory"],angular.module("webApp").controller("containerStatusController",e)}(),function(){"use strict";var e=function(e,t,a,s,i,n,r,o,d,l,c,p,u,m,g,h,v,f,y){e.addaddress={},e.temp||(e.temp={}),e.user||(e.user=d),e.searchObj||(e.searchObj={}),e.sorting||(e.sorting={}),e.data||(e.data={}),e.data.services||(e.data.services=[]),e.data.patient?e.patient=e.data.patient:(e.data.patient={},e.data.patient.type="nonmember",e.data.patient.registrationdate=new Date,e.data.patient.demography={},e.data.patient.demography.residentialaddress={},e.data.patient.demography.servicedeliveryaddress={},e.data.patient.demography.addresses=[],e.patient=e.data.patient),e.service_sm={},e.service_sm.service_id={},v.getReq()&&(e.data=v.getReq(),e.data&&(e.patient=angular.copy(e.data.client_id),e.data.patient=angular.copy(e.data.client_id),e.temppatient=angular.copy(e.data.client_id))),e.datePickerPopup={},e.datePickerPopup.minDate=new Date,e.openDatePicker=function(t,a){t.preventDefault(),t.stopPropagation(),e.datePickerPopup[a]=!0},e.getSessionStorage=function(){e.AddressType=JSON.parse(sessionStorage.getItem("AddressType"))},e.SearchPatientByName=function(){var t={};t.currentPage=1,t.itemPerPage=20;var a=p.getPatientList(t,e.searchObj,!0);a.then(function(t){e.PatientList=t.response}),e.searchObj={}},e.SelectPatient=function(t){e.PatientList=[],e.data.client_id=angular.copy(t),e.data.patient=t,e.patient=e.data.patient,e.temppatient=angular.copy(t);for(var a=0;a<e.patient.demography.addresses.length;a++)"true"==e.patient.demography.addresses[a].servicedeliveryaddress&&(e.data.servicedeliveryaddress=e.patient.demography.addresses[a])},e.showAddressMap=function(){$("#AddressObjectView").modal("hide"),$("#mapAddressObjectView").modal("show")},e.showMap=function(t){$("#bookAppointmentObjectView").modal("hide"),$("#mapObjectView").modal("show"),e.map={center:{latitude:t[1],longitude:t[0]},zoom:10},e.options={scrollwheel:!0},e.coordsUpdates=0,e.dynamicMoveCtr=0,e.marker={id:0,coords:{latitude:t[1],longitude:t[0]},options:{draggable:!0},events:{dragend:function(s){a.log("marker dragend");var i=s.getPosition().lat(),n=s.getPosition().lng();a.log(i),a.log(n),e.marker.options={draggable:!0,labelContent:"lat: "+e.marker.coords.latitude+" lon: "+e.marker.coords.longitude,labelAnchor:"100 0",labelClass:"marker-labels"},t[1]=e.marker.coords.latitude,t[0]=e.marker.coords.longitude}}},e.$watchCollection("marker.coords",function(t,a){_.isEqual(t,a)||e.coordsUpdates++}),i(function(){e.marker.coords={latitude:t[1],longitude:t[0]},e.dynamicMoveCtr++,i(function(){e.marker.coords={latitude:t[1],longitude:t[0]},e.dynamicMoveCtr++},2e3)},1e3)},e.closeMap=function(){$("#mapObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.closeMapAddress=function(){$("#mapAddressObjectView").modal("hide"),$("#AddressObjectView").modal("show")},e.SelectArea=function(t){t?(e.data.area_id=t.area_id,e.slots=t.slots,e.pincodes=t.area_id.pincodes,e.getSubLocation(t.area_id._id),e.addaddress.area_id=t.area_id,e.addaddress.city_id=t.area_id.city_id):(e.data.area_id={},e.slots=[])},e.getSubLocation=function(t){var a={};a.type="SL",a.area_id=t;var s=g.get(a);s.then(function(t){e.subLocationList=t.response})},Date.prototype.getDayName=function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e[this.getDay()]},e.getWorkingHours=function(){e.fromday=e.data.fromdate.getDayName(),e.lowerfromday=e.fromday.toLowerCase();var t=f.getMinMaxTimeByDay(e.workinghours,e.fromday);e.temp.timeSlots=f.getTimeSlots(t).timeSlots,e.searchObj.searchDate=e.data.fromdate,e.searchObj.area_id=e.data.area_id._id,e.sorting.sortfield="fromtime",e.sorting.sort="asc";var a=y.getOrderList(e.searchObj,void 0,e.sorting);a.then(function(t){e.orderList=t.response,e.returnArray=[];for(var a=0;a<e.temp.timeSlots.length;a++)for(var s=0;s<e.slots.length;s++)if(e.slotdaylength=e.slots[s][e.lowerfromday],e.temp.timeSlots[a].time==e.slots[s].time)for(var i=0;i<e.slotdaylength;i++)e.tempobj={},e.tempobj.time=e.slots[s].time,e.tempobj.day=e.lowerfromday,e.returnArray.push(e.tempobj);for(var n=0,a=0;a<e.orderList.length;a++)for(var r=n;r<e.returnArray.length;r++)if(e.orderList[a].fromtime==e.returnArray[r].time){e.returnArray[r].day==e.lowerfromday?(e.returnArray[r].orderexist=!0,n=r+1):e.returnArray[r].orderexist=!1;break}})},e.checkAvailability=function(t){for(var a=0;a<e.orderList.length;a++)if(e.orderList[a].fromtime==t.time){if(t.day==e.lowerfromday){console.log("order mtach"),t.orderexist=!0;break}}else t.orderexist=!1},e.getNumber=function(e){return e?new Array(e):void 0},e.openBookAppointment=function(t,a){a.orderexist||(e.data.fromtime=t.time,$("#bookAppointmentObjectView").modal("show"))},e.closeAppointment=function(){$("#bookAppointmentObjectView").modal("hide")},e.DoneAppointment=function(){$("#bookAppointmentObjectView").modal("hide")},e.editPatient=function(t){e.data.patient=angular.copy(t),e.data.client_id=angular.copy(t),e.patient=angular.copy(t),$("#bookAppointmentObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.newPatient=function(){e.PatientList=[],e.patient={},e.patient.type="nonmember",e.patient.registrationdate=new Date,e.patient.demography={},e.patient.demography.residentialaddress={},e.patient.demography.servicedeliveryaddress={},e.patient.demography.addresses=[],$("#bookAppointmentObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.clearPatient=function(){e.data.patient=angular.copy(e.temppatient),e.temppatient&&(e.data.client_id=angular.copy(e.temppatient)),e.patient=angular.copy(e.temppatient),$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.savePatient=function(){if(e.patient._id){var t=p.updatePatient(e.patient);t.then(function(t){if(t.response._id){$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.data.patient=t.response,e.patient=t.response,e.data.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response);for(var a=0;a<e.patient.demography.addresses.length;a++)"true"==e.patient.demography.addresses[a].servicedeliveryaddress&&(e.data.servicedeliveryaddress=e.patient.demography.addresses[a])}})}else{var t=p.addPatient(e.patient);t.then(function(t){if(t.response._id){$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show"),e.data.patient=t.response,e.patient=t.response,e.data.client_id=angular.copy(t.response),e.temppatient=angular.copy(t.response);for(var a=0;a<e.patient.demography.addresses.length;a++)"true"==e.patient.demography.addresses[a].servicedeliveryaddress&&(e.data.servicedeliveryaddress=e.patient.demography.addresses[a])}})}$("#AddPatientObjectView").modal("hide"),$("#bookAppointmentObjectView").modal("show")},e.openAddAddress=function(){$("#AddressObjectViewForOrder").modal("show")},e.addAddressForOrder=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.data.patient.demography.addresses[e.addaddress.index]=angular.copy(s),e.temppatient&&(e.temppatient.demography.addresses[e.addaddress.index]=angular.copy(s)),e.data.client_id.demography.addresses[e.addaddress.index]=angular.copy(s),e.data.servicedeliveryaddress=angular.copy(s),e.addaddress={},e.tempaddcity="",e.tempaddarea="",e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.data.patient.demography.addresses.push(s),e.data.client_id.demography.addresses.push(s),e.temppatient&&e.temppatient.demography.addresses.push(s),e.data.servicedeliveryaddress=angular.copy(s),e.addaddress={},e.tempaddcity="",e.tempaddarea=""}$("#AddressObjectViewForOrder").modal("hide"),$("#AddressObjectView").modal("hide")}else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.data.patient.demography.addresses.push(s),e.data.client_id.demography.addresses.push(s),e.temppatient&&e.temppatient.demography.addresses.push(s),e.data.servicedeliveryaddress=angular.copy(s),e.addaddress={},e.tempaddcity="",e.tempaddarea=""}},e.closeAddAddressForOrder=function(){e.addaddress={},$("#AddressObjectViewForOrder").modal("hide"),$("#AddressObjectView").modal("hide")},e.editServiceAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.editAdd=!0,$("#AddressObjectViewForOrder").modal("show")},e.deleteServiceAddress=function(t,a){1!=e.temppatient.demography.addresses.length?(e.temppatient.demography.addresses.splice(a,1),e.data.client_id.demography.addresses.splice(a,1),t.servicedeliveryaddress&&(e.temppatient.demography.addresses[0].servicedeliveryaddress="true")):alert("not allowed")},e.addAddress=function(){if(e.patient.demography.addresses.length){for(var t=!1,a=0;a<e.patient.demography.addresses.length;a++)if(e.editAdd){t=!0;var s=angular.copy(e.addaddress);delete s.index,e.patient.demography.addresses[e.addaddress.index]=angular.copy(s);var i=angular.copy(e.addaddress.area_id),n=angular.copy(e.addaddress.city_id);e.addaddress={},e.addaddress.city_id=n,e.addaddress.area_id=i,e.editAdd=!1;break}if(0==t){e.addaddress.servicedeliveryaddress="false";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s);var i=angular.copy(e.addaddress.area_id),n=angular.copy(e.addaddress.city_id);e.addaddress={},e.addaddress.city_id=n,e.addaddress.area_id=i}}else{e.addaddress.servicedeliveryaddress="true";var s=angular.copy(e.addaddress);e.patient.demography.addresses.push(s);var i=angular.copy(e.addaddress.area_id),n=angular.copy(e.addaddress.city_id);e.addaddress={},e.addaddress.city_id=n,e.addaddress.area_id=i}$("#AddressObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.checkServiceAddress=function(t,a){e.data.servicedeliveryaddress=t;for(var s=0;s<e.temppatient.demography.addresses.length;s++)s!=a?e.temppatient.demography.addresses[s].servicedeliveryaddress="false":e.temppatient.demography.addresses[a].servicedeliveryaddress="true"},e.closeAddAddress=function(){e.addaddress={},$("#AddressObjectView").modal("hide"),$("#AddPatientObjectView").modal("show")},e.editAddress=function(t,a){t.index=a,e.addaddress=angular.copy(t),e.editAdd=!0},e.deleteAddress=function(t,a){1!=e.patient.demography.addresses.length?(e.patient.demography.addresses.splice(a,1),t.servicedeliveryaddress&&(e.patient.demography.addresses[0].servicedeliveryaddress="true")):alert("not allowed")},e.getAllServices=function(t,a){var s={};s.currentPage=1,s.itemPerPage=20;var i=u.getpartnerservices(s,a);return i.then(function(t){return e.ServiceList=t.response,e.ServiceList})},e.SelectService=function(t){alert("DFgdfg"),e.service_sm.service_id=angular.copy(t),e.data.services.push(e.service_sm),e.service_sm={},e.service_sm.service_id={},e.data.amount=0,e.data.services.forEach(function(t){t.service_id.price.mrp&&(e.data.amount=parseInt(e.data.amount)+parseInt(t.service_id.price.mrp))}),e.ServiceList=[],e.searchObj={},e.setPrice(t)},e.setPrice=function(t){e.totalPrice,console.log(t)};var b="";e.showDeleteModel=function(e){b=e,$("#myModal").modal("show")},e.deleteService=function(){e.data.services.splice(b,1),$("#myModal").modal("hide"),$(".modal-backdrop").remove(),e.data.services.forEach(function(t){t.service_id.price.mrp&&(e.data.amount=parseInt(e.data.amount)+parseInt(t.service_id.price.mrp))})},e.saveRequest=function(){function t(){r.go(".",null,{reload:!0})}$("#progressIndicator").modal("show");var a=h.createServiceRequest(e.data);a.then(function(){$("#progressIndicator").modal("hide"),t()})},e.cancelRequest=function(){v.delReq(),n.path("main/serviceRequest")},e.closedeletemodal=function(){$("#myModal").modal("hide")},e.getSessionStorage()};e.$inject=["$scope","$q","$log","$http","$timeout","$location","$state","$stateParams","user","timeSlots","$rootScope","clientFactory","partnertestFactory","cityFactory","areaFactory","callFactory","servicerequestFactory","partnerFactory","orderFactory"],angular.module("webApp").controller("mlyservicerequestController",e)}(),function(){"use strict";var e=function(e,t,a,s,i){function n(){s.get(e.paging,e.searchObj).then(function(t){e.display.calls=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount})}function r(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20}!function(){e.searchObj={},r(),n(),e.hidePagingValue=!0}(),e.get=function(){n()},e.calltypelist={_id:"55756fa6a34c6138090ad8f7",name:"calltype",displayname:"Call Type",__v:0,source:"webhcm",iseditable:!1,optionlist:[{code:"all",displayname:"All",smsdisplayname:"All",_id:"5609685721eec91800b09951",dimensions:[],active:!0},{code:"enquiry",displayname:"Enquiry",smsdisplayname:"Enquiry",_id:"5609685721eec91800b09973",dimensions:[],active:!1},{code:"generalenquiry",displayname:"General Enquiry",smsdisplayname:"General Enquiry",_id:"5609685721eec91800b09972",dimensions:[],active:!0},{code:"caregiverenquiry",displayname:"Care Giver Enquiry",smsdisplayname:"Care Giver",_id:"5609685721eec91800b09971",dimensions:[],active:!0},{code:"dentalenquiry",displayname:"Dental Enquiry",smsdisplayname:"Dental",_id:"5609685721eec91800b09970",dimensions:[],active:!0},{code:"physioenquiry",displayname:"Physio Enquiry",smsdisplayname:"Physio",_id:"5609685721eec91800b0996f",dimensions:[],active:!0},{code:"strokecareenquiry",displayname:"Stroke Care Enquiry",smsdisplayname:"Stroke Care",_id:"5609685721eec91800b0996e",dimensions:[],active:!0},{code:"dementiaenquiry",displayname:"Dementia Enquiry",smsdisplayname:"Dementia",_id:"5609685721eec91800b0996d",dimensions:[],active:!0},{code:"nursingenquiry",displayname:"Nursing Enquiry",smsdisplayname:"Nursing",_id:"5609685721eec91800b0996c",dimensions:[],active:!0},{code:"physicianenquiry",displayname:"Physician Enquiry",smsdisplayname:"Physician",_id:"5609685721eec91800b0996b",dimensions:[],active:!0},{code:"oncologyenquiry",displayname:"Oncology Enquiry",smsdisplayname:"Oncology",_id:"5609685721eec91800b0996a",dimensions:[],active:!0},{code:"feedback",displayname:"Feedback",smsdisplayname:"Feedback",_id:"5609685721eec91800b09969",dimensions:[],active:!0},{code:"servicerequest",displayname:"Service Request",smsdisplayname:"Service Request",_id:"5609685721eec91800b09968",dimensions:[],active:!0},{code:"complain",displayname:"Complain",smsdisplayname:"Complain",_id:"5609685721eec91800b09967",dimensions:[],active:!0},{code:"complaintresolution",displayname:"Complaint Resolution",smsdisplayname:"Complaint Resolution",_id:"5609685721eec91800b09966",dimensions:[],active:!0},{code:"requeststatus",displayname:"Request Status",smsdisplayname:"Request Status",_id:"5609685721eec91800b09965",dimensions:[],active:!0},{code:"others",displayname:"Others",smsdisplayname:"Others",_id:"5609685721eec91800b09964",dimensions:[],active:!0},{code:"jobenquiry",displayname:"Job enquiry",smsdisplayname:"Job",_id:"5661323523fc1a38122adae5",dimensions:[],active:!0},{code:"equipmentenquiry",displayname:"Equipment enquiry",smsdisplayname:"Equipment",_id:"5661323f23fc1a38122adae6",dimensions:[],active:!0},{code:"membership/renewalenquiry",displayname:"Membership/Renewal enquiry",smsdisplayname:"Membership/Renewal",_id:"5661324523fc1a38122adae7",dimensions:[],active:!0}],_Deleted:!1},e.SelectCall=function(e){i.currentcall=e,a.go("main.call-add")}};e.$inject=["$scope","$location","$state","calllistFactory","callFactory"],angular.module("webApp").controller("mlycalllistController",e)}(),function(){"use strict";var e=function(e,t,a,s){function i(){s.get(e.paging).then(function(t){console.log(t),e.display.servicerequests=t.response,e.paging.itemCount=t.itemCount,e.paging.pageCount=t.pageCount,console.log(t)})}!function(){e.paging={},e.paging.currentPage=1,e.paging.itemPerPage=20,i()}(),e.get=function(){i()},e.selectServiceRequest=function(e){console.log(e),s.putReq(e),a.go("main.serviceRequestAdd")}};e.$inject=["$scope","$location","$state","servicerequestFactory"],angular.module("webApp").controller("mlyservicerequestlistController",e)}(),angular.module("webApp").run(["$templateCache",function(e){e.put("partials/call/call-add.html",'<div class="row panelmainDiv"><div class="col-sm-12 panelheaderDiv"><div class="pull-right input-group input-group-sm" style=margin-right:5px; ng-hide=temp.whenUpdate><a style=margin-right:5px; ng-click=cancelCall() class="btn btn-sm btn-default pull-right">Cancel</a> &nbsp;</div><div class="pull-right input-group input-group-sm" style=margin-right:5px; ng-show=temp.whenUpdate><a ui-sref=main.calls ng-click=cancelCall() style=margin-right:5px; class="btn btn-sm btn-default pull-right">Cancel</a> &nbsp;</div><h4 ng-hide=call._id>New Call</h4><h4 ng-show=call._id>View Call</h4></div><div class="col-sm-12 panelbodyDiv"><div class=row><div class=col-lg-12><div class="panel panel-default"><div class=panel-body><div ng-form=callFrm><div class=row><div class=col-md-6><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': callFrm.callcontact.$invalid }"><span class=input-group-addon><strong>Mobile</strong></span> <input name=callcontact type=text ng-model=call.contactnumber placeholder="Enter mobile number" class="form-control input-sm" maxlength=10 minlength=10 ng-pattern=validmobilenumber required ng-disabled=disablefields ng-change=getCallsBySearch()></div></div><div class=col-md-6><div class=form-group ng-class="{ \'has-error\': callFrm.callname.$invalid }"><div class="dropdown input-group input-group-sm"><span class=input-group-addon><strong>Name</strong></span> <input name=callname type=text ng-model=call.name placeholder="Caller name" class="form-control input-sm" ng-pattern=validName required ng-disabled=disablefields></div></div></div></div><div class=row><!-  ########-Call Type-############### --><!-  ########-Call Type-############### --></div><div class=row><div class=col-md-6><div class="form-group input-group" ng-class="{ \'has-error\': callFrm.callemail.$invalid }"><span class="input-group-addon input-sm"><strong>Email Id</strong></span> <input type=text name=callemail ng-model=call.email placeholder="Caller email id" class="form-control input-sm" ng-disabled=disablefields ng-pattern=EmailValid></div></div></div><div class=row ng-hide=whenServiceRequest><div class=col-md-12><div class="form-group input-group" ng-class="{ \'has-error\': callFrm.callcomment.$invalid }"><span class="input-group-addon input-sm"><strong>Remarks</strong></span> <textarea name=callcomment msd-elastic ng-model=call.comment placeholder="Enter comment" class="form-control input-sm" ng-disabled=disablefields></textarea></div></div></div></div><div class=row><div class=col-md-6><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': callFrm.callpartner.$invalid }"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partnerList track by partner._id" ng-model=call.partner_id class="form-control input-sm" placeholder=Partner ng-change=changePartner(call.partner_id) ng-disabled=disablefields><option value>--Select--</option></select></div></div></div><div class=row ng-if=whenServiceRequest><div class=col-md-12><div ng-form=workplanFrm><div ng-controller=servicerequestController ng-include src="\'partials/servicerequest/servicerequest-include.html\'"></div></div></div></div><div class=row ng-if=whenRequestStatus><div class=col-md-12><div ng-controller=requeststatusController ng-include src="\'partials/order/requeststatus-include.html\'"></div></div></div></div></div></div></div></div></div>'),e.put("partials/area/area.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Major Area <small><sup><a href=#/main/majorarea/new class="btn btn-link btn-xs">New</a> <a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm pull-right" placeholder=search style=margin-top:25px ng-model=searchObj.areasearch ng-change=getAreasTypeMA()></div><div class=table-responsive style="word-break: break-word;"><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th width=10%>No</th><th width=35%>Name</th><th width=35%>Pincode</th><th width=20%>City</th></tr></thead><tbody><tr ng-repeat="obj in areas" ng-click=edit(obj._id)><td>{{$index+1}}</td><td>{{obj.name}}</td><td>{{obj.pincodes.join(\',\')}}</td><td>{{obj.city_id.name}}</td></tr></tbody></table></div><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=getAreasTypeMA()></pagination></div></div><ng-import type=majorarea></ng-import>'),e.put("partials/area/area.object.html",'<div><h2>Major area<small><sup><a ng-click=BackTolist() class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=areasForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{ \'has-error\': areasForm.City.$invalid }"><label for=selectCity class="col-sm-offset-1 col-sm-2 control-label">City</label><div class=col-sm-6><select class=form-control id=selectCity name=City ng-model=areasobj.city_id ng-options="selectedcity as selectedcity.name for selectedcity in cities | orderBy:\'name\' track by selectedcity._id" ng-change=selectCity(areasobj.city_id) required></select></div></div><div class=form-group ng-class="{ \'has-error\': areasForm.name.$invalid }"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input type=text id=inputName class=form-control name=name ng-model=areasobj.name required></div></div><div class=form-group><label for=inputPincode class="col-sm-offset-1 col-sm-2 control-label">Pincode</label><div class=col-sm-6><tags-input ng-model=pincodes name=Pincode text=tube type=number min-length=6 max-length=6 placeholder="enter pincode(s)" onkeypress="if (isNaN( String.fromCharCode(event.keyCode) )) return false;"></tags-input></div></div><div class=form-group><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Description</label><div class=col-sm-6><textarea type msd-elastic class=form-control id=inputDescription name=description ng-model=areasobj.description></textarea></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-3"><div class=checkbox><label><input type=checkbox class=form name ng-model=areasobj.otherArea ng-change=clearPostTest() value> <strong>Other Area</strong></label></div></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=areasForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/authentication/login.html",'<div id=wallpapper ng-controller=authenticationController><div class=logo></div><form><div class=login-block><center><img ng-src=images/Saarathi.png style="width: 100%;height: 100px;object-fit: contain;"><br><br></center><input type=text value placeholder=Username id=username ng-model=user.username class=normal> <input type=password value placeholder=Password id=password ng-model=user.password class=normal> <button type=submit ng-click=login()>Login</button></div></form></div>'),e.put("partials/client/acceptAddNewAddress.modal.html",'<div class="modal fade" id=acceptingNewAddressFromExixting tabindex=-1 role=dialog aria-labelledby=acceptingNewAddressFromExixting><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><div class=modal-body><div class=row><div class=col-sm-12><div class="alert alert-success">Are you sure, you want to add address against patient?</div></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=update()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div></div>'),e.put("partials/client/client-add.html",'<div class="row panelmainDiv"><div class="col-lg-12 panelheaderDiv"><div class=col-lg-6><h4>Edit Patient<small><sup><a type=button ng-click=backtolist() class="btn btn-link btn-xs">Back to list</a></sup></small></h4></div></div><div class="col-lg-12 panelbodyDiv paneldetailbodyDiv"><div class=row><div class=col-lg-12><div class="panel panel-default"><div class=panel-body><div ng-form=patientFrm><div class=panel-body><div class=row><div class="col-md-10 col-md-offset-1"><div><div class="panel panel-default"><div class=list-group-item style="border: none;"><span class=pull-right><span ng-click=editDemography()><center><i style="font-size: 20px;" class="glyphicon glyphicon-pencil pointer"></i>&nbsp;edit client details<br>& special needs</center></span> &nbsp;&nbsp;</span><div ng-if=patient.demography.fullname style=margin-bottom:0px><strong><i class="glyphicon glyphicon-user"></i> {{patient.demography.salutation}}&nbsp;{{patient.demography.fullname | uppercase}}</strong><div class=badge ng-if=patient.externalId>UHID: {{patient.externalId}}</div><span ng-if=patient.clientcode><span class="label label-success">{{patient.clientcode}}</span></span><br><p style=margin:0px><span ng-if=patient.demography.gender><span ng-if="patient.demography.gender == \'male\'">Male</span> <span ng-if="patient.demography.gender == \'female\'">Female</span> <span ng-if="patient.demography.gender == \'third gender\'">Third Gender</span> / {{patient.demography.age}} {{patient.demography.agetype}}</span></p><p style=margin:0px ng-if=patient.demography.mobilenumber><span><i class="glyphicon glyphicon-phone"></i></span> {{patient.demography.mobilenumber}}</p><p style=margin:0px ng-if=patient.demography.altnumber.length><i class="glyphicon glyphicon-phone-alt"></i> <span ng-repeat="obj in patient.demography.altnumber track by $index">{{obj}}{{$last?\'\':\',\'}}&nbsp;</span></p><p style="margin:0px;text-transform: lowercase !important;" ng-if=patient.demography.email><i class="glyphicon glyphicon-envelope"></i> {{patient.demography.email | lowercase}}</p><br><div style=margin-bottom:0px ng-if=patient.specialneeds.length><strong>Special Needs</strong><p style=margin:0px><ul style="padding-left: 16px;margin-bottom: 0px;"><li ng-repeat="sn in patient.specialneeds | orderBy: \'name\'">{{sn.name}}</li></ul></p></div><p class=pull-right style=margin:0px; ng-if=patient.user_id.profile.name><b>created by:</b> {{patient.user_id.profile.name}}, on {{patient.registrationdate | date:\'dd-MMM-yyyy\'}} at {{patient.registrationdate | date:\'hh:mma\'}}</p></div><br></div></div></div></div></div><div class=row><div class="col-md-10 col-md-offset-1"><div><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;" ng-repeat="tempaddress in patient.demography.addresses track by $index"><span class=pull-right><span ng-click=editgmapaddress(tempaddress,$index)><i class="glyphicon glyphicon-pencil pointer"></i></span> &nbsp;&nbsp; <span ng-if="user.userdata.role == \'admin\' && patient._id" ng-click=confirmdeleteaddress(tempaddress,$index)><i class="glyphicon glyphicon-trash pointer"></i></span> &nbsp;&nbsp;</span> <strong>{{tempaddress.title}}</strong><br>{{tempaddress.address2}}<br><div><b>Landmark:</b> {{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b> {{tempaddress.area_id.name}}</div></div><center><div style="margin-bottom: 7px;margin-top: 7px;"><button type=button class="btn btn-primary" ng-click=openAddAddress()>ADD NEW ADDRESS 1</button> <button type=button class="btn btn-primary" ng-click=addnewaddfromExistingPateint()>ADD ADDRESS FROM EXISTING PATIENT</button></div></center></div></div></div></div><center ng-if="user.userdata.role == \'admin\' && patient._id" style=margin:5px;><button type=button class="btn btn-danger" ng-click=deleteClientModel()><i class="glyphicon glyphicon-trash"></i> &nbsp; Delete client</button></center><div class=row ng-if=patient.allOrder.length><div class="col-md-10 col-md-offset-1"><div ng-if=patient._id><div class="panel panel-default" style="padding: 5px 15px;"><h4><center>Visit history</center></h4><div ng-include="\'partials/client/patientVisitHistory.html\'"></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="modal fade" id=deleteclient tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Are you sure you want to delete this patient ?</h4><h4>This will remove patient orders, Address and demography detail.</h4><button data-dismiss=modal ng-click=deleteClientDetail() style=width:130px class="btn btn-primary">Ok</button> <button data-dismiss=modal style=width:130px class="btn btn-primary">cancel</button></center></div></div></div></div></div></div><div ng-include="\'partials/client/newAddaddressFormExisting.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/gmapaddaddress.modal.html\'"></div><div class="modal fade" id=editpatientnewaaaaa tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header style=height:60px><button class="btn btn-default pull-right" style=margin:5px ng-disabled="patientFrm.$invalid || !newpatient.salutation || !newpatient.firstname || !newpatient.lastname || !newpatient.gender || !newpatient.dob || !newpatient.age || !newpatient.agetype || !newpatient.mobilenumber || !temp.validEmail" ng-click=updateDemography()>Update</button> <button class="btn btn-default pull-right" style=margin:5px ng-click=cancleEditDemo()>Cancel</button></div><div class=modal-body><form name=patientFrm><ng-demography newpatient=newpatient temp=temp></ng-demography></form><div class=row><div class=col-md-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>SPECIAL NEEDS</strong></span><select name=area ng-model=temp.specialneed class=form-control ng-options="sp as sp.name for sp in specialneedLists" ng-change=addMultipleSN(temp.specialneed)><option ng-selected=true value>--SELECT SPECIAL NEED--</option></select></div></div></div><div class=row ng-if=demo.specialneeds.length><div class=col-md-12><div class="alert alert-info" role=alert><span ng-repeat="SN in demo.specialneeds"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{SN.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeSN(SN,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div></div></div><div ng-include="\'partials/client/acceptAddNewAddress.modal.html\'"></div><div class="modal fade" id=confirmdeleteaddressmodal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header style=height:60px>Confirm delete address</div><div class=modal-body><div class=row><div class=col-md-12>Are you sure you want to delete address?</div><div class="col-md-12 pull-right"><button class="btn btn-primary" style=margin:5px ng-click=deleteaddress()>Yes</button> <button class="btn btn-default" style=margin:5px ng-click=closedeleteaddress()>No</button></div></div></div></div></div></div>'),e.put("partials/client/client-include-add.html",'<div class=row><div class=col-md-12><div class=row ng-if="globaldata.userdata.role != \'partnerteamlead\'"><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.partner_id }"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partnerList | orderBy:\'info.name\' track by partner._id" ng-model=call.partner_id class="form-control input-sm" placeholder=Partner ng-change=changePartner(call.partner_id) ng-disabled="temp.parentorder_id || temp.partnerformtoffice"><option value>--Select--</option></select></div></div></div><div class=row ng-if="globaldata.userdata.role == \'partnerteamlead\'"><div class=col-md-12><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Partner</strong></span> <input name=Partner type=text placeholder=Partner class=form-control disabled ng-model=display.partnername></div></div></div><form name=patientFrm><ng-demography newpatient=newpatient temp=temp></ng-demography></form><center><div style="margin-bottom: 20px;margin-top: 7px;"><button type=button class="btn btn-primary" ng-class="(addAddressButtonCheck==false )?\'setActice\':\'setDeactice\'" ng-click=openAddAddressCheck()>ADD NEW ADDRESS 2</button> <button type=button class="btn btn-primary" ng-class="(gampAddressCheck==false)?\'setDeactice\':\'setActice\'" ng-hide=!call.partner_id ng-click=newPatientAddressFromExistingPateint()>ADD ADDRESS FROM EXISTING PATIENT</button></div></center><ng-gmap-address address=address></ng-gmap-address><div class=row ng-show=gmapshowhideCheck><div class=col-md-12><div class=modal-content><div class=modal-header><button style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-disabled=!temp.newAddressArray._id ng-click=saveNewAddresstoGmap()>Add</button><h4 class=modal-title>Add address</h4></div><div class=modal-body><div class=row><div class=col-md-10><div class=col-md-9 style="padding-left: 0px;"><div class="input-group input-group-sm pull-right"><span class=input-group-addon><strong>Existing Patient</strong></span> <input placeholder="first name (min. 3)" ng-model=searchExistingPatientObj.firstname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 40%;" type=text ng-minlength=3> <input placeholder="middle name" ng-model=searchExistingPatientObj.middlename class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1> <input placeholder=surname ng-model=searchExistingPatientObj.lastname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1></div></div><div class=col-md-3 style="padding-left: 0px;padding-right: 0px;"><input type=text style="margin-bottom: 0px;" ng-model=searchExistingPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() placeholder="UHID / MOB NO / ALT NO" class="form-group form-control input-sm"></div><table class="table table-responsive searchtable" style=width:100%;position:inherit><tbody><tr ng-repeat="Patient in newPatientList"><td ng-click=selectNewPatient(Patient) class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span> <span ng-repeat="altNo in Patient.demography.altnumber">,{{altNo}}</span></td></tr></tbody></table></div><div class=col-md-2 style="padding-left: 0px;padding-right: 0px;" ng-if="searchExistingPatientObj.lastname || searchExistingPatientObj.firstname || searchExistingPatientObj.middlename || searchExistingPatientObj.searchText"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchData() style=color:black;><b>clear data</b></a></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;"><strong><i class="glyphicon glyphicon-user">&nbsp;</i>{{existingPatient.demography.salutation}}&nbsp; {{existingPatient.demography.fullname}},</strong> <span class=badge ng-if=existingPatient.externalId><strong>UHID:</strong>{{existingPatient.externalId}}&nbsp;</span> <span>{{existingPatient.demography.age}} {{existingPatient.demography.agetype}}, {{existingPatient.demography.gender}}, <strong><i class="glyphicon glyphicon-phone"></i></strong> {{existingPatient.demography.mobilenumber}}</span> <span ng-repeat="altNo in existingPatient.demography.altnumber">,{{altNo}}</span></div></div></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;border-bottom: 2px solid #b3aeae;" ng-repeat="tempaddress in addressArray track by $index" ng-if=existingPatient.demography.addresses.length ng-click=selectedAddressCheck(tempaddress,$index) ng-class="(tempaddress.servicedeliveryaddress == true)?\'setAddColor\':\'\'"><div><strong>{{tempaddress.title}}</strong><br>{{tempaddress.address2}}<br><div><b>Landmark:</b> {{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b> {{tempaddress.area_id.name}}</div></div></div><div ng-if=!existingPatient.demography.addresses.length><span><center style=color:red;>NO ADDRESS AVAILABLE</center></span></div></div></div></div></div></div></div></div></div></div>'),e.put("partials/client/clients.html",""),e.put("partials/client/copyTestMsg.modal.html",'<div class="modal fade" id=copyTestMsg tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;z-index: 1052;" data-backdrop=static data-keyboard=false title=Alert><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><center>All PREVIOUSLY SELECTED TESTS(IF ANY), WILL BE REPLACED BY THE TESTS THAT ARE COPIED FROM PATIENT\'S VISIT HISTORY.<br><br>AFTER YOU HAVE COPIED THE TESTS, YOU CAN SEARCH FOR MORE TESTS ACROSS THE CURRENT VISIT.</center></h4><div></div></div></div></div><div class=modal-footer><span style=pull-right><button class="btn btn-primary" style=margin:5px data-dismiss=modal ng-click=coyTest()>Copy</button> <button data-dismiss=modal aria-label=Close class="btn btn-defult" ">Cancel</button></span></div></div></div></div>'),e.put("partials/client/newAddaddressFormExisting.modal.html",'<div class="modal fade" id=addNewAddaddressFormExisting role=dialog style=overflow-y:scroll><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-disabled=!newAddressArray.length ng-click=saveNewAddress()>Save</button><h4 class=modal-title>Add address</h4></div><div class=modal-body><div class=row><div class=col-md-10><div class=col-md-9 style="padding-left: 0px;"><div class="input-group input-group-sm pull-right"><span class=input-group-addon><strong>Existing Patient</strong></span> <input placeholder="first name (min. 3)" ng-model=searchExistingPatientObj.firstname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 40%;" type=text ng-minlength=3> <input placeholder="middle name" ng-model=searchExistingPatientObj.middlename class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1> <input placeholder=surname ng-model=searchExistingPatientObj.lastname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1></div></div><div class=col-md-3 style="padding-left: 0px;padding-right: 0px;"><input type=text style="margin-bottom: 0px;" ng-model=searchExistingPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() placeholder="UHID / MOB NO / ALT NO" class="form-group form-control input-sm"></div><table class="table table-responsive searchtable" style=width:100%;position:inherit><tbody><tr ng-repeat="Patient in newPatientList"><td ng-click=selectNewPatient(Patient) class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span> <span ng-repeat="altNo in Patient.demography.altnumber">,{{altNo}}</span></td></tr><tr ng-if=!newPatientList.length><td ng-if=clientcheckpoint><center style=color:red;>Patient not found</center></td></tr><tr ng-if="!newPatientListdata.length && !newPatientList.length"><td ng-if=clientUsercheckpoint><center style=color:red;>Patient not found</center></td></tr></tbody></table></div><div class=col-md-2 style="padding-left: 0px;padding-right: 0px;" ng-if="searchExistingPatientObj.lastname || searchExistingPatientObj.firstname || searchExistingPatientObj.middlename || searchExistingPatientObj.searchText"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchData() style=color:black;><b>clear data</b></a></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;"><div><strong><i class="glyphicon glyphicon-user"></i> {{existingPatient.demography.fullname}}</strong></div></div></div></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;border-bottom: 2px solid #b3aeae;" ng-repeat="tempaddress in existingPatient.demography.addresses track by $index" ng-if=existingPatient.demography.addresses.length><span class=pull-right><input type=checkbox name=selectedAddress[] value={{tempaddress}} ng-checked="newAddressArray.indexOf(tempaddress) > -1" id=$index ng-click=selectedAddressCheck(tempaddress)></span> <strong>{{tempaddress.title}}</strong><br>{{tempaddress.address2}}<br><div><b>Landmark:</b> {{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b> {{tempaddress.area_id.name}}</div></div><div ng-if=!existingPatient.demography.addresses.length><span><center style=color:red;>NO ADDRESS AVAILABLE</center></span></div></div></div></div></div></div></div></div>'),e.put("partials/client/patientAddress.html",""),e.put("partials/client/patientVisitHistory.html","<div class=row><div class=col-ms-12 style=padding:12px><div class=\"alert alert-info\" role=alert ng-repeat=\"list in patient.allOrder\" ng-if=list.servicedeliveryaddress.address2 ng-click=checkServices($index,list,true) ng-class=\"{'selectedOrderVisit':list.checked}\"><span><div><b>Date:&nbsp;{{list.fromdate | date:'dd-MMM-yyyy'}}</b>&nbsp;&nbsp;<b>Time:&nbsp;{{list.fromtime | waqt}}</b></div><div ng-if=\"list.assignto.profile.name && (user.userdata.role != 'partnerfrontoffice' && user.userdata.role != 'partnerteamlead')\"><b>Phlebo : {{list.assignto.profile.name}}</b></div><div ng-if=list.services.length><b>Test:</b> <span ng-repeat=\"service in list.services\"><span ng-if=service.service_id.name>{{service.service_id.name}}{{$last?'':','}}</span></span></div><div><b>Address:</b> {{list.servicedeliveryaddress.address2}}</div><div><b>Landmark:</b> {{list.servicedeliveryaddress.landmark}}</div><div><b>Slot Area:</b> {{list.servicedeliveryaddress.area_id.name}}</div><small class=orderviewsmall ng-repeat=\"logObj in list.log track by $index\"><span ng-if=\"$index == 0\"><b>created by:</b> {{logObj.updatedby.profile.name}}, on {{logObj.updateddatetime | date:'dd-MMM-yyyy'}} at {{logObj.updateddatetime | date:'hh:mma'}}</span></small></span></div></div></div>"),e.put("partials/city/city.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>City<small><sup><a href=#/main/city/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=search placeholder=Search style=margin-top:25px></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th data-field="City Name">No</th><th data-field="City Name">Code</th><th data-field="City Code">Name</th></tr></thead><tbody><tr ng-repeat="city in cities | filter:search" ng-click=edit(city._id)><td class="col-lg-2 col-md-2 col-sm-2 col-xs-2">{{$index+1}}</td><td class="col-lg-4 col-md-4 col-sm-4 col-xs-4">{{city.shortname}}</td><td class="col-lg-6 col-md-6 col-sm-6 col-xs-6">{{city.name}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div>'),e.put("partials/city/city.object.html",'<div><h2>City<small><sup><a href=#/main/city class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=cityForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{ \'has-error\': cityForm.Shortname.$invalid }"><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Shortname</label><div class=col-sm-6><input type=text id=inputName class=form-control name=Shortname ng-model=cityObj.shortname required></div></div><div class=form-group ng-class="{ \'has-error\': cityForm.name.$invalid }"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input type=text id=inputName class=form-control name=name ng-model=cityObj.name required></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=cityForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/clienttest/clienttest.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Client test <small><sup><a href=#/main/clienttest/new class="btn btn-link btn-xs">New</a></sup></small></h2><div class=container style=float:left></div></div></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px;margin-top:5px;><input type=text class="form-control input-sm" ng-model=search placeholder=Search style=margin-top:25px></div><table class="table table-bordered table-hover" style="background-color: white;table-layout: fixed;word-wrap: break-word;"><thead><tr><th class="col-lg-1 col-md-1 col-sm-1 col-xs-1">No</th><th class="col-lg-5 col-md-5 col-sm-5 col-xs-5">Name</th><th class="col-lg-6 col-md-6 col-sm-6 col-xs-6">Description</th></tr></thead><tbody><tr ng-repeat="test in display.clienttest | filter:search" ng-click=edit(test._id) ng-class="{\'success\' : test.specialservice}"><td>{{$index+1}}</td><td>{{test.name}}</td><td>{{test.description}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div><ng-import type=tests></ng-import>'),e.put("partials/clienttest/clienttest.object.html",'<div><h2>Client test <small><sup><a href=#/main/clienttest class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=departentForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label"><input type=checkbox name value ng-model=existingService ng-click="clienttest.searchName = null; clienttest.name = null"> Existing Service &nbsp;</label><div class=col-sm-6 ng-show=existingService><div class=row><div class=col-sm-><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Existing Service</strong></span> <input id=search-input type=text ng-model=clienttest.searchName ng-disabled=selected class=form-control><table class="table table-responsive searchtable"><tbody><tr ng-repeat="service in display.services" ng-click=setServiceName(service)><td class=pointer><span><span>{{service.name}}</span></span>&nbsp;</td></tr></tbody></table><span ng-if=selected class="input-group-addon pointer" ng-click=sample()><i class="glyphicon glyphicon-remove"></i></span> <span class="input-group-addon pointer" ng-click=searchByName(clienttest.searchName)><i class="glyphicon glyphicon-search"></i> Search</span></div></div></div></div></div><div class=form-group ng-hide=existingService><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input type=text class=form-control id=inputDescription name=description ng-model=clienttest.name></div></div><div class=form-group><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Description</label><div class=col-sm-6><textarea msd-elastic type class=form-control id=inputDescription name=description ng-model=clienttest.description></textarea></div></div><div class=form-group><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Alais</label><div class=col-sm-6><tags-input ng-model=tags add-from-autocomplete-only=false replace-spaces-with-dashes=false><auto-complete min-length=1 template=my-custom-template></auto-complete></tags-input></div></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=departentForm.$invalid>Save</button></div></div></div></form><script type=text/ng-template id=my-custom-template><div class="right-panel"> <h1 style=" font-size: 15px!important "> {{name}} </h1> </div></script>'),e.put("partials/dashboard/dashboard.html",'<div><h2><span>Dashboard</span></h2></div><div class="panel panel-default" style="background-color: #F4F3FB;border: none;"><div class=panel-body><div class=row><div class=col-md-3><div class="input-group form-group"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObj.searchDate is-open=datePickerPopup.dp_searchDate close-text=Close ng-change=getDashboardDetails() ng-click="openDatePicker($event,\'dp_searchDate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span> <span class=input-group-btn><button class="btn btn-default btn-sm" ng-click="paging.currentPage=1;getOrderList()" type=button><i class="glyphicon glyphicon-search"></i></button></span></div></div><div class=col-md-3><div class=form-group><button class="btn btn-default btn-sm" ng-click=previousDate() type=button><i class="glyphicon glyphicon-chevron-left" style=color:#555></i></button> <button class="btn btn-sm btn-primary" ng-click=todayDate() type=button>Today</button> <button class="btn btn-default btn-sm" ng-click=nextDate() type=button><i class="glyphicon glyphicon-chevron-right" style=color:#555></i></button></div></div></div><span ng-hide="user.userdata.role == \'partnerteamlead\' || user.userdata.role == \'partnerfrontoffice\'"><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partnerList | orderBy:\'info.name\'" ng-model=searchObj.partner class="form-control input-sm" placeholder=Partner ng-change=pushPartner(searchObj.partner); ng-disabled="user.userdata.role == \'partnerfrontoffice\'"><option value>All partners</option></select></div></div></div><div class=row ng-if=temp.PartnerList.length><div class=col-md-12><div class="alert alert-info" role=alert><span ng-repeat="multiPartner in temp.PartnerList"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{multiPartner.info.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePartner(multiPartner,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></span><div class=row ng-if="user.userdata.role == \'partnerteamlead\' || user.userdata.role == \'partnerfrontoffice\'"><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Partner</strong></span> <input name=Partner type=text placeholder=Partner class=form-control disabled ng-model=display.partnername></div></div></div><div class=row><div class=col-md-4 style=cursor:pointer ng-click=goToOrders()><div class=thumbnail style=text-align:center><b>Date</b><div><b>{{searchObj.searchDate | date:\'dd-MMM-yyyy\'}}</b></div><div class="row row-center"><div class="col-md-6 col-sm-6 col-xs-6"><div class=caption style=color:#5ab85c><h2>{{count.todaysorder.exceptCancelledTotal}}</h2><div class=badge style="background-color: #464242; font-size: 17px">Visits</div><br></div></div><div class="col-md-6 col-sm-6 col-xs-6"><div class=caption style=color:#87b1f9><h2>{{count.todaysorder.exceptCancelledAndPPClientTotal}}</h2><div class=badge style="background-color: #464242; font-size: 17px">Patients</div><br></div></div></div></div></div><div class=col-md-4><div class=thumbnail style=text-align:center><b>Week</b><div><b>{{searchObj.searchWeekDate | date:\'dd-MMM-yyyy\'}}</b> to <b>{{searchObj.searchWeekToDate | date:\'dd-MMM-yyyy\'}}</b></div><div class=row><div class="col-md-6 col-sm-6 col-xs-6"><div class=caption style=color:#5ab85c><h2>{{count.weeklyorders.exceptCancelledTotal}}</h2><div class=badge style="font-size: 14px">Visits</div><br></div></div><div class="col-md-6 col-sm-6 col-xs-6"><div class=caption style=color:#87b1f9><h2>{{count.weeklyorders.exceptCancelledAndPPClientTotal}}</h2><div class=badge style="font-size: 14px">Patients</div><br></div></div></div></div></div><div class=col-md-4><div class=thumbnail style=text-align:center><b>Month</b><div><b>{{searchObj.searchMonthDate | date:\'MMMM\'}}</b></div><div class=row><div class="col-md-6 col-sm-6 col-xs-6"><div class=caption style=color:#5ab85c><h2>{{count.monthlyorders.exceptCancelledTotal}}</h2><div class=badge style="font-size: 14px">Visits</div><br></div></div><div class="col-md-6 col-sm-6 col-xs-6"><div class=caption style=color:#87b1f9><h2>{{count.monthlyorders.exceptCancelledAndPPClientTotal}}</h2><div class=badge style="font-size: 14px">Patients</div><br></div></div></div></div></div></div></div></div>'),e.put("partials/distance/distance.html",'<div><div class="col-lg-8 col-md-8 col-sm-8 col-xs-6" style=padding-left:0px><h2>Distance</h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><select class="form-control input-sm" name=area ng-model=cityObj ng-options="city as city.name for city in citiesList | orderBy:\'name\'" ng-change=getAreasTypeMA(cityObj) style=margin-top:25px;><option value>--Select city--</option></select></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><select class="form-control input-sm" name=area ng-model=mojorarea ng-options="mojorarea as mojorarea.name for mojorarea in majorareas | orderBy:\'name\'" ng-change=setGridValues(mojorarea) style=margin-top:25px;><option value>--Select majorarea--</option></select></div></div><div><div class=row ng-show=mojorarea><div class=col-lg-12><div class="panel panel-default"><div class=panel-body><table id=tabelview class="distance-table table table-bordered"><thead><tr><th>{{key}}</th><th ng-repeat="(key, value) in repeatTable">{{value.name}}</th></tr></thead><tbody><tr ng-repeat="r1 in repeatTable"><td>{{r1.name}}</td><td ng-repeat="r2 in repeatTable"><span ng-if="r2._id==r1._id">0</span> <span ng-if="r2._id!=r1._id"><div class="input-group input-group-sm" ng-class="{\'has-error\':distanceFrom.distance.$invalid}"><span ng-init="txtid = r1._id +\'-\'+ r2._id"></span> <input id=txtid class=form-control type=number ng-model="values[r1._id + \'-\' + r2._id]" name=distance ng-init=getDistance(r1,r2) ng-blur=addDistance(r1,r2) required></div></span></td></tr></tbody></table><input id=save type=button name=Save class="btn btn-primary" value=Save ng-disabled=distanceFrom.$invalid ng-click=saveDistance(distanceFrom)></div></div></div></div></div>'),e.put("partials/copypartner/copyPartner.html",'<div class=row><div class="col-lg-7 col-md-7 col-sm-7 col-xs-7" style=padding-left:0px><h2>Copy Partner Test</h2></div></div><div class=row><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': callFrm.callpartner.$invalid }"><span class=input-group-addon><strong>From Partner</strong></span><select ng-options="partner as partner.info.name for partner in partnerList | orderBy:\'info.name\' track by partner._id" ng-model=frompartner class="form-control input-sm" placeholder="From Partner" ng-change=selectFromPartner(frompartner)><option value>---select partner---</option></select></div></div></div><div class=row ng-if=frompartner><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': callFrm.callpartner.$invalid }"><span class=input-group-addon><strong>To Partner</strong></span><select ng-options="partner as partner.info.name for partner in partnerList | orderBy:\'info.name\' track by partner._id" ng-model=topartner class="form-control input-sm" placeholder="To Partner" ng-change=selectToPartner(topartner)><option value>---select partner---</option></select></div></div></div><div class=row><div class=col-md-12><center><button class="btn btn-sm btn-primary" ng-disabled="!frompartner && !topartner" ng-click=getCopyPartner()>copy</button></center></div></div></div></div></div>'),e.put("partials/department/department.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Department<small><sup><a href=#/main/Department/new class="btn btn-link btn-xs">New</a> <a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=search.searchText placeholder=Search style=margin-top:25px ng-change=get()></div><table class="table table-bordered" style="background-color: white;"><thead><tr><th class="col-lg-1 col-md-1 col-sm-1 col-xs-1">No</th><th class="col-lg-5 col-md-5 col-sm-5 col-xs-5">Name</th><th class="col-lg-6 col-md-6 col-sm-6 col-xs-6">Description</th></tr></thead><tbody><tr ng-repeat="department in departmentList" ng-click=edit(department._id)><td>{{$index+1}}</td><td>{{department.name}}</td><td>{{department.description}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div><ng-import type=departments></ng-import></div>'),e.put("partials/department/department.object.html",'<div><h2>Department<small><sup><a href=#/main/Department class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=departentForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{ \'has-error\': departentForm.name.$invalid }"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input type=text id=inputName class=form-control name=name ng-model=department.name required></div></div><div class=form-group><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Description</label><div class=col-sm-6><textarea msd-elastic type class=form-control id=inputDescription name=description ng-model=department.description></textarea></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=departentForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/main/main.html",'<div ng-controller=MainCtrl><nav class="navbar navbar-default navbar-static-top" style="margin-bottom: 0px"><div class=container-fluid><div class=navbar-header style="width: 100%;"><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1 aria-expanded=false><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><div class=navbar-brand style="color:#F88017; padding-top:5px;"><img ng-src=images/{{user.userdata.provider_id.logo}} height=45px></div><ul class="nav navbar-nav"><li class=dropdown ng-repeat="mainMenu in display.menu"><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false>{{mainMenu.name | uppercase}} <span class=caret></span></a><ul class=dropdown-menu><li ng-repeat-start="submenu in mainMenu.subMenus"><a href=javascript:void(0); ng-click=index(submenu.url)>{{submenu.name | uppercase}}</a></li><li role=separator class=divider ng-repeat-end ng-hide="mainMenu.subMenus.length==$index+1"></li></ul></li></ul><ul class="nav navbar-nav"><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false><button class="btn btn-default btn-lg btn-link" style="padding: 0px 16px 0px 16px"><img style="vertical-align: middle;" src=images/notifications.svg></button> <span class="badge badge-notify" ng-if=count>{{count}}</span></a><ul class=dropdown-menu style="height: auto;max-height: 250px;overflow-x: hidden;"><li ng-repeat-start="noti in roleCommonNotification"><a><span>{{noti.message}} <span ng-if=noti.redirect.order_id><button ng-click=gotoOrder(noti)>goto</button></span> <span ng-if=noti.redirect.staff_id><button>goto</button></span></span></a></li><li role=separator class=divider ng-repeat-end ng-hide="mainMenu.subMenus.length==$index+1"></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href=javascript:void(0);><small>{{display.userdata.profile.name}}</small> <small>| {{display.userdata.rolelabel}}</small></a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false><button class="btn btn-default btn-lg btn-link" style="padding: 0px 16px 0px 16px"><i class="glyphicon glyphicon-user"></i></button></a><ul class=dropdown-menu style="height: auto;max-height: 250px;overflow-x: hidden;"><li><a href=javascript:void(0); data-toggle=modal data-target=#myModalLogout><span>Logout</span></a></li><li role=separator class=divider></li><li><a href=javascript:void(0); data-toggle=modal data-target=#myModalChangePassword><span>Change Password</span></a></li></ul></li></ul></div></div></nav><div style=padding-top:0px><div class=container><div ui-view=menuContent></div></div></div></div><div class="modal fade" id=myModalLogout tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title id=myModalLabel><b>Logout</b></h4></div><div class=modal-body>Are you sure you want to logout ?</div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Cancel</button> <button type=button class="btn btn-primary" ng-click=logout()>Logout</button></div></div></div></div><div class="modal fade" id=myModalChangePassword tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title id=myModalLabel><b>Change Password</b></h4></div><div class=modal-body><form name=changePassFrm><div class=row><div class="col-md-12 form-group">Are you sure you want to change password ?</div></div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': changePassFrm.oldpwd.$invalid }"><span class=input-group-addon><strong>Old Password</strong></span> <input type=password name=oldpwd ng-model=oldpassword class="form-control input-sm" required></div></div></div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': changePassFrm.newpass.$invalid }"><span class=input-group-addon><strong>New Password</strong></span> <input type=password name=newpass ng-model=newpassword class="form-control input-sm" required></div></div></div></form></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Cancel</button> <button type=button class="btn btn-primary" ng-disabled=changePassFrm.$invalid ng-click=changePassword()>Change</button></div></div></div></div><script type=text/ng-template id=myPopoverTemplate.html><!-- <div>{{dynamicPopover.content}}</div> --> <table class="table table-hover" style="background-color: white;"> <!-- <thead> <tr> <th>No</th> <th>Code</th> <th>Name</th> </tr> </thead> --> <tbody> <tr ng-repeat="noti in roleCommonNotification"> <td>{{noti.message}}</td> <td> <span ng-if="noti.redirect.order_id"><button ng-click="gotoOrder(noti)">goto</button></span> <span ng-if="noti.redirect.staff_id"><button>goto</button></span> </td> </tr> </tbody> </table> <!-- <div class="row" ng-repeat="noti in roleCommonNotification"> <div class="col-md-10"> {{noti.message}} </div> <div class="col-md-2"> </div> </div> --></script>'),e.put("partials/main/mainbackuphtml.html",'<div ng-controller=MainCtrl><nav class="navbar navbar-default navbar-fixed-top"><div class=container-fluid><div class=navbar-header><a href=#menu-toggle class="btn btn-default sidebar_toggle_but" id=menu-toggle><span class="glyphicon glyphicon-align-justify" aria-hidden=true></span></a> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1 aria-expanded=false><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=#><img src=images/logo.png alt="My Lab Yogi" height=50></a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1 style=height:60px><ul class="nav navbar-nav navbar-right"><li><a href=#>Link</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false><span class="glyphicon glyphicon-cog" aria-hidden=true></span> <span class=caret></span></a><ul class=dropdown-menu><li><a href=#>Notification 1</a></li><li><a href=#>Notification 2</a></li><li><a href=#>Notification 3</a></li></ul></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false><span class="glyphicon glyphicon-bell" aria-hidden=true></span> <span class=caret></span></a><ul class=dropdown-menu><div class="panel panel-default"><div class=panel-body>Panel content</div><div class=panel-footer>Panel footer</div></div></ul></li><li class=dropdown><a href=# class="dropdown-toggle a_user_photo" data-toggle=dropdown role=button aria-haspopup=true aria-expanded=false><img src=images/profile_user.jpg alt=username class="img-circle user_photo"><span class=caret></span> User Name</a><ul class=dropdown-menu><li><a href=#>Manage Profile</a></li><li><a href=#>Other Setting</a></li><li><a href=#>Edit Privacy</a></li><li role=separator class=divider></li><li><a href=#>Logout</a></li></ul></li></ul></div></div></nav><div id=wrapper><div id=sidebar-wrapper><nav class=sidebar-nav><ul class=metismenu id=menu><li class=active><a href=# aria-expanded=false>Users<span class="glyphicon arrow"></span></a><ul aria-expanded=false><li class=sidebar-list ng-repeat="obj in display.menu"><a class=ancoreTagPointer ng-click=index(obj)>{{obj.menu_id.name}}</a></li></ul></li></ul></nav></div><div ui-view=menuContent></div></div></div>'),e.put("partials/importlogs/importlog.object.html",'<div><h2>Import Detail<small><sup><a href=#/main/importlogs class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal><div class="panel panel-default"><div class=panel-body><div class="col-lg-12 col-md-12 col-sm-12 nopadding addpanel"><div class=row><div class=col-lg-12><table class="table table-bordered" style=background-color:white;width:100%><thead><tr><th>#</th><th>Error</th></tr></thead><tbody><tr ng-repeat="error in importlogdetail.error track by $index"><td>{{$index + 1}}</td><td>{{error.message}}</td></tr></tbody></table></div></div><div class=row><div class=col-lg-12><table class="table table-bordered" style=background-color:white;width:100%><thead><tr><th>#</th><th colspan="{{importlogdetail.data[0].length + 1}}">Data</th></tr></thead><tbody><tr ng-repeat="data in importlogdetail.data track by $index"><td>{{$index + 1}}</td><td ng-repeat="dataObj in data track by $index">{{dataObj}}</td></tr></tbody></table></div></div></div></div></div></form>'),e.put("partials/importlogs/importlogs.html",'<div class="row panelmainDiv" data-ng-init=loadOptions()><div class="col-md-12 panelheaderDiv"><h4>Import logs</h4></div><div class="col-md-12 panelbodyDiv"><div class="panel panel-default"><div class=panel-body><div class=row><div class=col-md-6><div class="input-group form-group"><div class="input-group-addon input-sm">From date</div><input type=text name=fromdate class="form-control input-sm" datepicker-popup min-date=minFromDate max-date=maxFromDate ng-model=selectedOptions.fromdate is-open=datePickerPopup.dp_fromdate close-text=Close ng-change=getList() ng-click="openDatePicker($event,\'dp_fromdate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fromdate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-6><div class="input-group form-group"><div class="input-group-addon input-sm">To date</div><input type=text name=todate class="form-control input-sm" datepicker-popup min-date=minToDate max-date=maxToDate ng-model=selectedOptions.todate is-open=datePickerPopup.dp_todate close-text=Close ng-change=getList() ng-click="openDatePicker($event,\'dp_todate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_todate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=row><div class=col-md-12><table class="table table-bordered" style=background-color:white;width:100% ng-show=impotrLogList.length><thead><tr><th>Collection name</th><th>Date</th><th>File name</th><th>User name</th><th>Status</th><th>Result Count</th></tr></thead><tbody><tr ng-repeat="impotrLog in impotrLogList track by $index" ng-click=detailLog(impotrLog._id)><td>{{impotrLog.collectionname}}</td><td>{{impotrLog.datetime | date:\'dd/MM/yyyy @ hh:mm:ss a\'}}</td><td>{{impotrLog.file}}</td><td>{{impotrLog.user_id.profile.name}}</td><td>{{impotrLog.status}}</td><td><span ng-show="impotrLog.datasize >= 0">Total Row: {{impotrLog.datasize}}<br></span> <span ng-show="impotrLog.errorsize >= 0">Error: {{impotrLog.errorsize}}<br></span> <span ng-show="impotrLog.datasize >= 0 && impotrLog.errorsize >= 0">Success: {{impotrLog.datasize - impotrLog.errorsize}}</span></td></tr></tbody></table><div class=row ng-show=impotrLogList.length><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=getList()></pagination></div></div></div></div></div></div></div></div>'),e.put("partials/hookslogs/hookslogs.html",'<div><div class="col-lg-6 col-md-6 col-sm-6 col-xs-4" style=padding-left:0px><h2>Hooks logs</h2></div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-6" style=padding-right:0px></div><div class="col-lg-2 col-md-8 col-xs-12" style=padding-top:10px><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromdate }"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=search.date is-open=datePickerPopup.dp_fd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_fd\')" ng-change=get()> <span class=input-group-btn></span> <span class=input-group-addon><span ng-click=get()><i class="glyphicon glyphicon-refresh pointer"></i></span></span></div></div></div><table class="table table-bordered table-hover" style="background-color: white;font-size:10px"><thead><tr><th style=width:50px>No</th><th style=width:50px>Date</th><th style=width:50px>Method</th><th style=width:50px>Url</th><th style=width:50px>Response</th></tr></thead><tbody><tr ng-repeat="obj in display.hookslogs"><td style=width:50px>{{$index+1}}</td><td style=width:50px>{{obj.datetime | date}}</td><td style=width:50px>{{obj.method}}</td><td style=width:50px>{{obj.url}}</td><td style=width:50px><button type=button class="btn btn-sm btn-success" ng-click=setPost(obj) data-toggle=modal data-target=#post>Post</button> <button type=button class="btn btn-sm btn-success" ng-click=setRequest(obj) data-toggle=modal data-target=#response>Response</button></td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div><div id=post class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Post Json</h4></div><div class=modal-body><pre>\n                    {{display.post | json}}\n                    \n                </pre></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><div id=response class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Response Json</h4></div><div class=modal-body><pre>\n          {{display.response | json}}\n      </pre></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div>'),e.put("partials/optionmaster/option.modal.html",'<div class="modal fade" id=optionModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class=modal-title id=myModalLabel>Option</h4></div><div class=modal-body><form name=optionForm><div class="row form-group"><div class=col-md-3><strong class=pull-right>Option for</strong></div><div class=col-md-6>{{parentOptionDisplayName}}</div></div><div class="row form-group" ng-class="{ \'has-error\': optionForm.displayname.$invalid }"><div class=col-md-3><strong class=pull-right>Display name</strong></div><div class=col-md-6><input type=text class=form-control ng-model=opt.displayname name=displayname required></div></div><div class="row form-group" ng-if=isUpload><div class=col-md-3><strong class=pull-right>Upload</strong></div><div class=col-md-6><div class="form-group has-feedback"><div class=input-group style="width: 100%;"><input name=file type=file ng-model=selectedfiles app-filereader accept=image/* class=form-control ng-change=onFileSelect(selectedfiles) multiple></div></div><div ng-bind-html=filePreview></div><img src={{fileData.imgBase64}}><table class="table table-striped table-hover table-condensed" style="background-color: white;margin-top:15px;" ng-if=attachments.length><thead><tr><th style=width:40%><center>IMAGE</center></th><th style=width:40%><center>prority<center></center></center></th><th style=width:20%><center>REMOVE<center></center></center></th></tr></thead><tbody><tr ng-repeat="data in attachments"><td><center><img src={{data.url}} height=50 width=50 ng-click=openfile(data.url) target=_blank></center></td><td><center><input type=number id=priority style="width: 40%;" class=form-control name=priority ng-model=data.priority value=1 min=1 ng-change=valdidatepri()></center></td><td><center><span class="glyphicon glyphicon-remove" style=color:maroon ng-click=removeFile(data,$index)></span></center></td></tr></tbody></table></div></div><div class="row form-group" ng-class="{ \'has-error\': optionForm.priority.$invalid }" ng-if="parentOptionName == \'PhleboType\' || parentOptionName == \'TubeType\' || parentOptionName == \'VisitRemarks\' || parentOptionName == \'WebCancelReasons\' || parentOptionName == \'PhleboCancelReasons(BeforeReach)\' || parentOptionName == \'PhleboCancelReasons(AfterReach)\'"><div class=col-md-3><strong class=pull-right>Priority</strong></div><div class=col-md-6><input type=number id=priority class=form-control name=priority ng-model=opt.priority required value=1 min=1></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveOption() class="btn btn-primary" ng-disabled="optionForm.$invalid || missingPriority">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/optionmaster/optionDelete.modal.html",'<div class="modal fade" id=optionDeleteModal tabindex=-1 role=dialog aria-labelledby=optionModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=optionModalLabel>{{activeText}}</h4></div><div class=modal-body>Are you sure, you want to {{activeText}} record {{display.optionDeleteObj.displayname}}</div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=delete() class="btn btn-primary" ng-disabled=optionForm.$invalid>Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/optionmaster/optionMaster.html",'<div><h2>Option master <small><sup><a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2></div><form class=form-horizontal name=optionForm><div class="panel panel-default"><div class=panel-body><div class=form-group><label for=selectCity class="col-sm-offset-1 col-sm-2 control-label">Dropdown</label><div class=col-sm-6><select class=form-control id=selectOption name=option ng-model=optionObj ng-options="option as option.displayname for option in parentOptions | orderBy:\'displayname\' track by option._id" ng-change=optionChange(optionObj) required><option value>-- select value --</option></select></div></div><div class="col-sm-offset-2 col-sm-7" ng-show=optionObj><div class="panel panel-default"><div class=panel-heading><strong>Options</strong> <small><sup><a data-toggle=modal data-target=#optionModal ng-click=add(optionObj._id) class="btn btn-link btn-xs">Add</a></sup></small></div><table class="table table-bordered table-hover" style="background-color: white;" ng-show=childOptions.length><thead><tr><th>#</th><th>Display name</th><th ng-show="optionObj.name == \'PhleboType\'">Priority</th><th ng-show="optionObj.name == \'TubeType\'">Priority</th><th ng-show="optionObj.name == \'VisitRemarks\'">Priority</th><th ng-show="optionObj.name == \'WebCancelReasons\'">Priority</th><th ng-show="optionObj.name == \'PhleboCancelReasons(BeforeReach)\'">Priority</th><th ng-show="optionObj.name == \'PhleboCancelReasons(AfterReach)\'">Priority</th><th>Delete</th></tr></thead><tbody><tr ng-repeat="obj in childOptions.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))" ng-class="{\'danger\' : obj._Deleted }"><td><span ng-click=edit(obj,$index)>{{$index+1}}</span></td><td><span ng-click=edit(obj,$index)>{{obj.displayname}} <span ng-if=obj.attachments.length class=pull-right><span class="glyphicon glyphicon-paperclip"></span></span></span></td><td ng-show="optionObj.name == \'PhleboType\'">{{obj.priority}}</td><td ng-show="optionObj.name == \'TubeType\'">{{obj.priority}}</td><td ng-show="optionObj.name == \'VisitRemarks\'">{{obj.priority}}</td><td ng-show="optionObj.name == \'WebCancelReasons\'">{{obj.priority}}</td><td ng-show="optionObj.name == \'PhleboCancelReasons(BeforeReach)\'">{{obj.priority}}</td><td ng-show="optionObj.name == \'PhleboCancelReasons(AfterReach)\'">{{obj.priority}}</td><td ng-click=deleteOption(obj,false)><span class="glyphicon glyphicon-remove" ng-if=!obj._Deleted style=color:maroon></span> <span class="glyphicon glyphicon-plus" ng-if=obj._Deleted style=color:green></span></td></tr></tbody></table><br><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:20px total-items=childOptions.length ng-model=currentPage boundary-links=true rotate=false max-size=maxSize items-per-page=itemsPerPage></pagination></div></div></div></div></div></form><div ng-include="\'partials/optionmaster/option.modal.html\'"></div><div ng-include="\'partials/optionmaster/optionDelete.modal.html\'"></div><ng-import type=optionmasters></ng-import>'),e.put("partials/menu/menu.html",'<div class=row ng-controller=menuController><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Menu<small><sup><a href=#/main/menu/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model-options="{ debounce: 1000 }" ng-change=get() ng-model=searchObj.menutext placeholder=Search style=margin-top:25px></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th data-field="Menu No">No</th><th data-field="Menu Name">Name</th><th data-field="Menu URL">Url</th></tr></thead><tbody><tr ng-repeat="menu in menus | filter:search" ng-click=edit(menu)><td>{{$index+1}}</td><td>{{menu.name}}</td><td>{{menu.url}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div>'),e.put("partials/menu/menu.object.html",'<div><h2>Menu<small><sup><a href=#/main/menu class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=menuform><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input type=text class=form-control ng-model=menuObj.name></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-2"><div class=checkbox><label><input type=checkbox ng-model=menuObj.isParent ng-change=parentChecked(menuObj.isParent)> <strong>Main menu</strong></label></div></div><div class=col-sm-4><select ng-show=!menuObj.isParent class=form-control name=city ng-model=menuObj.parentID ng-options="selectedmenu._id as selectedmenu.name for selectedmenu in parentmenus track by selectedmenu._id" ng-change=menuChange(menuObj) required><option value>--select main menu--</option></select></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-2"><div class=checkbox><label><input type=checkbox ng-model=menuObj.isLabel> <strong>Only label</strong></label></div></div><div class=col-sm-4><input ng-show=!menuObj.isLabel type=text class=form-control ng-model=menuObj.url placeholder="URL eg: partner" aria-describedby=sizing-addon2></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=cityForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/order/newpporder.object.html",'<div><h2>New PP order<small><sup><a href=#/main/order class="btn btn-link btn-xs">back to list</a></sup></small></h2><div class="alert alert-warning alert-dismissible" role=alert ng-show=showAlert><button type=button class=close data-dismiss=alert aria-label=Close><span aria-hidden=true>&times;</span></button> <strong></strong> {{alertMessage}}</div></div>'),e.put("partials/order/order.html",'<div class=row><div class="col-lg-11 col-md-11 col-sm-11 col-xs-11"><div class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style="padding-top:10px;padding-left: 0px;"><h3>Appointments</h3></div><div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding-right:0px; padding-top:25px"><div class="input-group input-group-sm"><input placeholder="first name (min. 3)" ng-model-options="{ debounce: 1000 }" ng-change="paging.currentPage=1;getOrderList()" ng-minlength=3 ng-model=searchObj.firstname class=form-control style="width: 34%;" type=text> <input placeholder="middle name" ng-model-options="{ debounce: 1000 }" ng-change="paging.currentPage=1;getOrderList()" ng-minlength=1 ng-model=searchObj.middlename class=form-control style="width: 33%;" type=text> <input placeholder=surname ng-model-options="{ debounce: 1000 }" ng-change="paging.currentPage=1;getOrderList()" ng-model=searchObj.lastname class=form-control style="width: 33%;" type=text ng-minlength=1></div></div><div class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style="padding-right:0px; padding-top:25px"><input type=text ng-model-options="{ debounce: 1000 }" ng-model=searchObj.search class="form-group form-control input-sm" placeholder="UHID / MOB NO / ALT NO" ng-change="paging.currentPage=1;getOrderList()"></div></div><div class="col-lg-1 col-md-1 col-sm-1 col-xs-1"><div class="col-lg-2 col-md-2 col-sm-2 col-xs-2" style="padding-right:0px; padding-top:25px" ng-if="searchObj.lastname || searchObj.firstname || searchObj.middlename || searchObj.search"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchData() style=color:black;><b>clear<br>data</b></a></div></div></div><div class=row><div class="panel panel-default"><div class=panel-body><div class=row><div class=col-md-3><div class="input-group form-group"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObj.searchDate is-open=datePickerPopup.dp_searchDate close-text=Close ng-change="paging.currentPage=1;getOrderList()" ng-click="openDatePicker($event,\'dp_searchDate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span> <span class=input-group-btn><button class="btn btn-default btn-sm" ng-click="paging.currentPage=1;refreshList()" type=button><i class="glyphicon glyphicon-refresh"></i></button></span></div></div><div class=col-md-2><div class=form-group><button class="btn btn-default btn-sm" ng-click=previousDate() type=button><i class="glyphicon glyphicon-chevron-left" style=color:#555></i></button> <button class="btn btn-sm btn-primary" ng-click=todayDate() type=button>Today</button> <button class="btn btn-default btn-sm" ng-click=nextDate() type=button><i class="glyphicon glyphicon-chevron-right" style=color:#555></i></button></div></div><div class="col-md-4 col-lg-4"><div class=row style=margin-bottom:20px; ng-if="(user.userdata.role == \'admin\'||user.userdata.role == \'providerteamlead\') && !temp.parentorder_id"><label class=col-md-2 style="width:initial;margin-top: 6px;"><strong>partner type</strong></label> <label class=radio-inline style="margin-top: 6px;"><strong><input name=partnerType type=radio ng-model=searchObj.partnertype id=b2b value=b2b ng-click="paging.currentPage=1;getPartners(\'test\')" checked>&nbsp;&nbsp;b2b</strong></label> <label class=radio-inline style="margin-top: 6px;"><strong><input name=partnerType type=radio ng-model=searchObj.partnertype id=b2c value=b2c ng-click="paging.currentPage=1;getPartners(\'test\')">&nbsp;&nbsp;b2c</strong></label></div></div></div><span ng-hide="user.userdata.role == \'partnerteamlead\' || user.userdata.role == \'partnerfrontoffice\'"><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': callFrm.callpartner.$invalid }"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partnerList | orderBy:\'info.name\' track by partner._id" ng-disabled="user.userdata.role == \'partnerfrontoffice\'" ng-model=searchObj.partner class="form-control input-sm" placeholder=Partner ng-change="paging.currentPage=1;pushPartner(searchObj.partner)"><option value>All partners</option></select></div></div></div><div class=row ng-if=temp.partnerList.length><div class=col-md-12><div class="alert alert-info" role=alert><span ng-repeat="multiPartner in temp.partnerList"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{multiPartner.info.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click="paging.currentPage=1;removePartner(multiPartner,$index)"></i></span>&nbsp;&nbsp;</span></div></div></div></span><div class=row ng-if="user.userdata.role == \'partnerteamlead\' || user.userdata.role == \'partnerfrontoffice\'"><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Partner</strong></span> <input name=Partner type=text placeholder=Partner class=form-control disabled ng-model=display.partnername></div></div></div><div class=row ng-if="user.userdata.role == \'admin\' || user.userdata.role == \'providerteamlead\'"><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': callFrm.callpartner.$invalid }"><span class=input-group-addon><strong>Phlebo</strong></span><select name=callstaff ng-options="staff as staff.profile.name for staff in display.staff | orderBy:\'profile.name\' track by staff._id" ng-model=searchObj.staff class="form-control input-sm" placeholder=Staff ng-change="paging.currentPage=1;pushStaff(searchObj.staff)"><option value>All phlebos</option></select></div></div></div><div class=row ng-if=temp.staffList.length><div class=col-md-12><div class="alert alert-info" role=alert><span ng-repeat="multistaff in temp.staffList"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{multistaff.profile.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeStaff(multistaff,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="user.userdata.role == \'admin\' || user.userdata.role == \'providerteamlead\'"><div class=col-md-8><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': callFrm.callpartner.$invalid }"><span class=input-group-addon><strong>Logistics</strong></span><select name=callstaff ng-options="staff as staff.profile.name for staff in display.logisticStaff | orderBy:\'profile.name\' track by staff._id" ng-model=searchObj.logistic class="form-control input-sm" placeholder=Logistic ng-change=pushLogistic(searchObj.logistic)><option value>All Logistics</option></select></div></div><div class=col-md-4><label style="margin-top: 6px;margin-left:13%;"><strong><input name=logstatusass type=checkbox ng-model=logstatusass value=Assigned id=Assigned ng-click="paging.currentPage=1;getOrderListcehck(\'Assigned\',logstatusass)">&nbsp;Assigned</strong></label>&nbsp;&nbsp;&nbsp; <label style="margin-top: 6px;"><strong><input name=logstatusrec type=checkbox ng-model=logstatusrec value=Received id=Received ng-click="paging.currentPage=1;getOrderListcehck(\'Received\',logstatusrec)">&nbsp;Received</strong></label>&nbsp;&nbsp;&nbsp; <label style="margin-top: 6px;"><strong><input name=logstatusrech type=checkbox ng-model=logstatusrech value=Reached id=Reached ng-click="paging.currentPage=1;getOrderListcehck(\'Reached\',logstatusrech)">&nbsp;Reached</strong></label></div></div><div class=row ng-if="temp.logisticList.length && (user.userdata.role == \'admin\' || user.userdata.role == \'providerteamlead\')"><div class=col-md-9><div class="alert alert-info" role=alert><span ng-repeat="multilog in temp.logisticList track by $index"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{multilog.profile.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeLogistic(multilog,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="user.userdata.role == \'admin\' || user.userdata.role == \'providerteamlead\'"><div class=col-md-8><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': callFrm.callpartner.$invalid }"><span class=input-group-addon><strong>Created by</strong></span><select name=callstaff ng-options="staff as staff.profile.name for staff in display.createFilterUser | orderBy:\'profile.name\' track by staff._id" ng-model=searchObj.createdby class="form-control input-sm" placeholder="Created by" ng-change=pushCreatedby(searchObj.createdby)><option value>All Created by</option></select></div></div><div class=col-md-4><label style="margin-top: 6px;margin-left:14%;"><strong><input name=objSat type=checkbox ng-model=temp.objSat ng-click="paging.currentPage=1;createdByRolescheck()">&nbsp;SATYUKI</strong></label>&nbsp;&nbsp;&nbsp; <label style="margin-top: 6px;"><strong><input name=objSar type=checkbox ng-model=temp.objSar ng-click="paging.currentPage=1;createdByRolescheck()">&nbsp;SAARATHI</strong></label>&nbsp;&nbsp;&nbsp; <label style="margin-top: 6px;"><strong><input name=objArj type=checkbox ng-model=temp.objArj ng-click="paging.currentPage=1;createdByRolescheck()">&nbsp;ARJUNA</strong></label></div></div><div class=row ng-if="temp.createdbyList.length && (user.userdata.role == \'admin\' || user.userdata.role == \'providerteamlead\')"><div class=col-md-9><div class="alert alert-info" role=alert><span ng-repeat="multilog in temp.createdbyList track by $index"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{multilog.profile.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeCreatedby(multilog,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="!(user.userdata.role ==\'partnerfrontoffice\' ||user.userdata.role == \'partnerteamlead\')"><div class=col-md-12><div class=form-group><span class="label pointer" ng-class="(searchObj.status == \'\')?\'buttonactive active\':\'\'" style="color: #999;background-color: #fff;" ng-click="setStatus(\'\')">All</span> <span class="label pointer bg-danger statusunassign" ng-class="(searchObj.status == \'Unassigned\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'Unassigned\')">UNASSIGNED</span> <span class="label pointer statusassign" ng-class="(searchObj.status == \'Open\')?\'buttonactive\':\'\'" ng-click="setStatus(\'Open\')">ASSIGNED</span> <span class="label pointer statusreceived" style ng-class="(searchObj.status == \'Recieved\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'Recieved\')">Received</span> <span class="label pointer statusreached" ng-class="(searchObj.status == \'Reached\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'Reached\')">Reached</span> <span ng-class="(searchObj.status == \'SampleCollected\')?\'buttonactive\':\'\'" class="label pointer statuscompleted" ng-click="setStatus(\'SampleCollected\')">COMPLETED</span> <span class="label pointer statushandover" style ng-class="(searchObj.status == \'SampleHandover\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'SampleHandover\')">En Route</span> <span class="label pointer statusdelivered" style ng-class="(searchObj.status == \'Completed\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'Completed\')">DELIVERED</span> <span class="label pointer statuscancelled" ng-class="(searchObj.status == \'Cancelled\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'Cancelled\')">CANCELLED</span></div></div></div><div class=row ng-if="user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\'"><div class=col-md-12><div class=form-group><span class="label pointer" ng-class="(searchObj.status == \'\')?\'buttonactive active\':\'\'" style="color: #999;" ng-click="setStatus(\'\')">All</span> <span class="label pointer bg-danger statusunassign" ng-class="(searchObj.status == \'Unassigned,Open,Recieved,Reached\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'Unassigned,Open,Recieved,Reached\')">OPEN</span> <span ng-class="(searchObj.status == \'SampleCollected\')?\'buttonactive\':\'\'" class="label pointer statuscompleted" ng-click="setStatus(\'SampleCollected\')">COMPLETED</span> <span class="label pointer statushandover" style ng-class="(searchObj.status == \'SampleHandover\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'SampleHandover\')">En Route</span> <span class="label pointer statusdelivered" ng-class="(searchObj.status == \'Completed\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'Completed\')">DELIVERED</span> <span class="label pointer statuscancelled" ng-class="(searchObj.status == \'Cancelled\')?\'buttonactive active\':\'\'" ng-click="setStatus(\'Cancelled\')">CANCELLED</span></div></div></div><div class=table-responsive ng-show="OrderList.length > 0"><table class="table table-bordered table-condensed"><thead><tr><th width=30%><center>Client Details</center></th><th width=15%><center>Tests</center></th><th width=7% ng-click="changeSorting(\'fromdatetime\')" ng-class="selectedCls(\'fromdatetime\')"><center>Time</center></th><th width=30%><center>Area</center></th></tr></thead><tbody ng-if="!(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')"><tr ng-repeat="Order in OrderList | filter: search" ng-class="{\'statuscompleted\' : Order.status == \'SampleCollected\',\'statusunassign\' : Order.status == \'Unassigned\', \'statusassign\' : Order.status == \'Open\' , \'statusreceived\' : Order.status == \'Recieved\', \'statusreached\' : Order.status == \'Reached\', \'statuscancelled\' : Order.status == \'Cancelled\', \'statusdelivered\' : Order.status == \'Completed\', \'statushandover\' : Order.status == \'SampleHandover\' }" ng-click=SelectOrder(Order) data-href class=link-color><td><span ng-if="Order.client_id.type==\'institutemember\'" class=badge>I</span><div class=badge ng-if=Order.client_id.externalId>UHID: {{::Order.client_id.externalId}}</div><div><strong style=font-size:16px>{{::Order.client_id.demography.salutation}}&nbsp; {{::Order.client_id.demography.firstname}} {{::Order.client_id.demography.middlename}} {{::Order.client_id.demography.lastname}}</strong>&nbsp; <small><sub style="font-size: 90%;">{{::Order.client_id.demography.gender}}/ {{::Order.client_id.demography.age}} {{::Order.client_id.demography.agetype}}</sub></small>&nbsp; <sup ng-if="Order.ordertype==\'PP\'"><small style=color:#0000FF;font-size:11px;><b>({{::Order.ordertype}})</b></small></sup></div><div><b>MOB.NO:</b><small>{{Order.client_id.demography.mobilenumber}} <span ng-if=Order.client_id.demography.altnumber.length>/ {{Order.client_id.demography.altnumber[0]}}</span></small></div><div><small ng-if=Order.servicedeliveryaddress.address2>{{::Order.servicedeliveryaddress.address2}}</small><div><b>Landmark:</b>{{::Order.servicedeliveryaddress.landmark}}</div></div></td><td><div style="max-height: 100px;height: auto;overflow-y: auto;display: block;"><span ng-repeat="OrderService in Order.services"><small>{{::OrderService.service_id.name}}{{$last?\'\':\',\'}} &nbsp;</small></span></div></td><td class=line-break><center><strong style=font-size:16px>{{::Order.fromtime | waqt }}</strong><div ng-show=Order.servicetime ng-class="Order.status == \'Cancelled\'?\'servicetimecolorcancel\':\'servicetimecolor\'">({{::Order.servicetime | date:\'h:mma\' }})</div><br><div class=badge ng-if="user.userdata.role != \'partnerfrontoffice\'" style=font-size:14px>{{Order.partner_id.info.acronym}}</div></center></td><td class=line-break><div ng-if="(Order.addpatientcomment.addpatientreasons.length || Order.discountupdatecomment.discountupdatereason.length || Order.serviceupdatecomment.testupdatereason.length) && (user.userdata.role == \'admin\' || user.userdata.role == \'providerteamlead\')"><span style="float: right;margin-left: 3px;font-size: 17px;margin-top: 2px;"><span class="glyphicon glyphicon-star" style=color:#777;></span></span></div><div style=margin-right:5px; ng-if="Order.tempvisitcomments.length && (user.userdata.role == \'admin\' || user.userdata.role == \'providerteamlead\')" ng-repeat="objCheck in Order.tempvisitcomments"><span style=float:right;><span class=badge style=margin-left:2px; ng-if="objCheck==\'DOUBLE PRICK\'">DP</span> <span class=badge ng-if="objCheck==\'RESCUE PRICK\'">RP</span></span></div><div style=margin-top:3px;clear:both; ng-if=Order.servicedeliveryaddress.area_id.name>Slot Area: {{::Order.servicedeliveryaddress.area_id.name}}</div><div ng-if=Order.assignto.profile.name><strong style="color: #555;">PHLEBO:</strong> <strong style=font-size:16px>{{::Order.assignto.profile.name}}</strong> <sub style="font-size: 90%;">{{::Order.assignto.profile.mobilenumber}}</sub></div><div ng-if="Order.logistic.patientaddress != true" ng-show=Order.logistic.logistic_id.profile.name><strong style="color: #555;">LOGISTICS:</strong> <strong style=font-size:16px>{{::Order.logistic.logistic_id.profile.name}}</strong> <sub style="font-size: 90%;">{{::Order.logistic.logistic_id.profile.mobilenumber}}</sub> at <b style=font-size:16px>{{Order.logistic.pickuptime | waqt}}</b><br>at {{::Order.logistic.pickuppoint}}</div><div ng-if="Order.logistic.patientaddress == true" ng-show=Order.logistic.logistic_id.profile.name><strong style="color: #555;">LOGISTICS:</strong> <strong style=font-size:16px>{{::Order.logistic.logistic_id.profile.name}}</strong> <sub style="font-size: 90%;">{{::Order.logistic.logistic_id.profile.mobilenumber}}</sub> at <b style=font-size:16px>{{Order.logistic.pickuptime | waqt}}</b><br>at Patient\'s Address</div><div><small><sub style="color: #555;font-size: 90%;"><b>CREATED BY:</b></sub><sub ng-repeat="logObj in Order.log track by $index" ng-if="$index == 0" style="font-size: 90%;">{{::logObj.updatedby.profile.name}}</sub></small></div></td></tr></tbody><tbody ng-if="user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\'"><tr ng-repeat="Order in OrderList | filter: search" ng-class="{\'statusunassign\' : Order.status == \'Open\' ,\'statuscancelled\' : Order.status == \'Cancelled\', \'statuscompleted\' : Order.status == \'SampleCollected\',\'statusdelivered\' : Order.status == \'Completed\' , \'statushandover\' : Order.status == \'SampleHandover\'}" ng-click=SelectOrder(Order) data-href class=link-color><td><span ng-if="Order.client_id.type==\'institutemember\'" class=badge>I</span><div class=badge ng-if=Order.client_id.externalId>UHID: {{::Order.client_id.externalId}}</div><div><strong style=font-size:16px>{{::Order.client_id.demography.salutation}}&nbsp; {{::Order.client_id.demography.firstname}} {{::Order.client_id.demography.middlename}} {{::Order.client_id.demography.lastname}}</strong>&nbsp; <small><sub style="font-size: 90%;">{{::Order.client_id.demography.gender}}/ {{::Order.client_id.demography.age}} {{::Order.client_id.demography.agetype}}</sub></small>&nbsp; <sup ng-if="Order.ordertype==\'PP\'"><small style=color:#0000FF;font-size:11px;><b>({{::Order.ordertype}})</b></small></sup></div><div><b>MOB.NO:</b><small>{{Order.client_id.demography.mobilenumber}} <span ng-if=Order.client_id.demography.altnumber.length>/ {{Order.client_id.demography.altnumber[0]}}</span></small></div><div><small ng-if=Order.servicedeliveryaddress.address2>{{::Order.servicedeliveryaddress.address2}}</small><div><b>Landmark:</b>{{::Order.servicedeliveryaddress.landmark}}</div></div></td><td><div style="max-height: 100px;height: auto;overflow-y: auto;display: block;"><span ng-repeat="OrderService in Order.services"><small>{{::OrderService.service_id.name}}{{$last?\'\':\',\'}} &nbsp;</small></span></div></td><td class=line-break><center><strong style=font-size:16px>{{::Order.fromtime | waqt }}</strong><div ng-show=Order.servicetime ng-class="Order.status == \'Cancelled\'?\'servicetimecolorcancel\':\'servicetimecolor\'">({{::Order.servicetime | date:\'h:mma\' }})</div></center></td><td class=line-break><div style=margin-top:3px ng-if=Order.servicedeliveryaddress.area_id.name>Slot Area: {{::Order.servicedeliveryaddress.area_id.name}}</div></td></tr></tbody></table><pagination class="pull-right pagination-sm" style=margin-right:5px; total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="isPaging=true;getOrderList()"></pagination></div><div ng-show="OrderList.length == 0"><div class="alert alert-warning" role=alert><strong>No orders</strong></div></div></div></div></div>'),e.put("partials/order/order.object.html",'<div><h2>VISIT summary<small><sup><a href=#/main/order class="btn btn-link btn-xs">back to list</a></sup></small></h2><div class="alert alert-warning alert-dismissible" role=alert ng-show=showAlert><button type=button class=close data-dismiss=alert aria-label=Close><span aria-hidden=true>&times;</span></button> <strong></strong> {{alertMessage}}</div></div><div class=row><div class=col-md-12><div class=table-responsive><table class="table table-bordered table-condensed"><tbody style=background-color:white;><tr ng-class=getClass(order.status)><td colspan=3><center><h4 ng-if="!(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')"><span ng-if="order.status == \'Unassigned\'">Unassigned</span> <span ng-if="order.status == \'Open\'">Assigned</span> <span ng-if="order.status == \'Recieved\'">Received</span> <span ng-if="order.status == \'Reached\'">Reached</span> <span ng-if="order.status == \'SampleCollected\'">COMPLETED</span> <span ng-if="order.status == \'SampleHandover\'">En Route</span> <span ng-if="order.status == \'Completed\'">DELIVERED</span> <span ng-if="order.status == \'Cancelled\'">Cancelled</span> <span ng-if="order.status != \'Cancelled\' && order.status != \'Completed\' && temp.isTodayDate"><button class="btn btn-sm btn-primary pull-right" style="padding: 5px 30px;margin-top:-5px" ng-click=addPatient()>Add Patient</button></span> <span ng-if="order.status == \'Completed\'"><button class="btn btn-sm btn-primary pull-right" style="padding: 5px 30px;margin-top:-5px" ng-click=addPatient()>Add Patient</button></span></h4><h4 ng-if="user.userdata.role == \'partnerfrontoffice\'|| user.userdata.role == \'partnerteamlead\'"><span ng-show="order.status == \'Unassigned\' || order.status == \'Recieved\' || order.status == \'Reached\'|| order.status == \'Reached\' || order.status == \'Open\'">Open</span> <span ng-show="order.status == \'SampleCollected\'">COMPLETED</span> <span ng-show="order.status == \'SampleHandover\'">En Route</span> <span ng-show="order.status == \'Completed\'">DELIVERED</span> <span ng-show="order.status == \'Cancelled\'">Cancelled</span> <span ng-if="order.ordertype == \'F\' && temp.disableppbtn"><button ng-show="order.status == \'Unassigned\' || order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Reached\' || order.status == \'Open\'" class="btn btn-sm btn-primary pull-right" style="padding: 5px 30px;margin-top:-5px" ng-click=addPatient()>Add Patient</button></span></h4></center></td></tr><tr><td><small><h4 style=margin-top:0px;margin-bottom:0px;>partner</h4></small></td><td><h4 class=orderview style=margin-top:0px;margin-bottom:0px;>{{::order.partner_id.info.name}}</h4></td></tr><tr><td><h4 style=margin-top:0px;margin-bottom:0px;>Client</h4></td><td class=line-break><span ng-if=order.client_id.demography.fullname><h4 class=orderview style=margin-top:0px;margin-bottom:0px;>{{order.client_id.demography.salutation}} {{order.client_id.demography.firstname}} {{order.client_id.demography.middlename}} {{order.client_id.demography.lastname}} <span class=badge ng-if=order.client_id.externalId>UHID: {{order.client_id.externalId}}</span></h4></span> <span ng-show=order.client_id.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span><br ng-if=order.client_id.demography.externalId><small class=orderviewsmall>{{order.client_id.demography.age}} {{order.client_id.demography.agetype}} / {{order.client_id.demography.gender}}</small><br ng-if=order.client_id.demography.email><abbr title=Email ng-if=order.client_id.demography.email>Email:</abbr> <small class=orderviewsmall ng-if=order.client_id.demography.email>{{order.client_id.demography.email}}</small><br ng-if=order.client_id.demography.mobilenumber><abbr title=Mobile ng-if=order.client_id.demography.mobilenumber>M:</abbr> <small class=orderviewsmall ng-if=order.client_id.demography.mobilenumber>{{order.client_id.demography.mobilenumber}}</small><br ng-if=order.client_id.demography.altnumber.length><abbr title=Mobile ng-if=order.client_id.demography.altnumber.length>Alt M:</abbr> <span ng-if=order.client_id.demography.altnumber ng-repeat="value in order.client_id.demography.altnumber"><span class=success style=margin-right:5px;>{{value}}</span></span> <span ng-if="user.userdata.role == \'partnerfrontoffice\'"><button type=button ng-hide="(order.status == \'Cancelled\')" class="btn btn-sm btn-link pull-right" ng-click=editClientModal()><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Client</button></span> <span ng-if="user.userdata.role != \'partnerfrontoffice\'"><button type=button class="btn btn-sm btn-link pull-right" ng-click=editClientModal()><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Client</button></span></td></tr><tr><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Address</h4></small></td><td><address class=line-break style="margin-bottom: 0px;"><strong class=orderview>{{order.servicedeliveryaddress.title}}</strong><br>{{order.servicedeliveryaddress.address2}}<div><b>Landmark:</b>{{order.servicedeliveryaddress.landmark}}</div><div style=margin-top:3px ng-if=order.servicedeliveryaddress.area_id.name><b>Slot Area:</b>{{order.servicedeliveryaddress.area_id.name}}</div></address><button type=button ng-if="addressCount >= 1" class="btn btn-link btn-sm pull-right" ng-click=openChangeAddressModal() style=margin-top:-15px; ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\' || (order.addpatientcomment.addpatientreasons.length && temp.isBackDate)"><i class="glyphicon glyphicon-list"></i>&nbsp;{{addressCount}} more address&nbsp;</button> <button type=button class="btn btn-link btn-sm pull-right" ng-click=editAddressModal(order.servicedeliveryaddress) style=margin-top:-15px; ng-if="(((user.userdata.role == \'admin\' || user.userdata.role == \'providerteamlead\') && (order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\')) || (order.status == \'Unassigned\' || order.status == \'Recieved\' || order.status == \'Reached\'|| order.status == \'Reached\' || order.status == \'Open\' || (order.addpatientcomment.addpatientreasons.length && temp.isBackDate) ))"><i class="glyphicon glyphicon-pencil"></i>&nbsp;edit Address&nbsp;</button> <button type=button ng-if="addressCount <= 1 && order.client_id.demography.addresses.length <= 1" class="btn btn-link btn-sm pull-right" ng-click=openAddAddressModal() style=margin-top:-15px; ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\' || (order.addpatientcomment.addpatientreasons.length && temp.isBackDate)"><i class="glyphicon glyphicon-plus"></i>&nbsp;add address&nbsp;{{}}</button><br><button type=button ng-if="order.client_id.demography.addresses.length <= 1" ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\' || (order.addpatientcomment.addpatientreasons.length && temp.isBackDate)" class="btn btn-link btn-sm pull-right" ng-click=openAddAddressFromExisting() style=margin-top:-15px;><i class="glyphicon glyphicon-plus"></i>&nbsp;ADD ADDRESS FROM GROUP PATIENTS ADDRESS</button><div ng-if="!order.servicedeliveryaddress.area_id.name && order._id"><b style="color:red;display: inline-block;">This pincode does not belongs to any of the partner area.</b></div></td></tr><tr><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Visit time</h4></small></td><td><h4 class=orderview style=margin-top:0px;margin-bottom:0px;><b>{{order.fromdate | date:\'dd-MMM-yyyy\'}}</b>&nbsp;at&nbsp;<b>{{order.fromtime | waqt}}</b></h4><small class=orderviewsmall ng-repeat="logObj in order.log track by $index"><span ng-if="$index == 0">created by: {{logObj.updatedby.profile.name}}, at {{order.createdatetime | date:\'dd-MMM-yyyy hh:mma\'}}</span></small> <button type=button class="btn btn-link btn-sm pull-right" ng-click=openCancelAppointmentModal() style=margin-top:-15px;color:lightcoral; ng-show="(order.status != \'Cancelled\') && (user.userdata.role==\'admin\' || user.userdata.role==\'providerteamlead\')"><i class="glyphicon glyphicon-remove"></i>&nbsp;cancel visit&nbsp;</button> <button type=button class="btn btn-link btn-sm pull-right" ng-click=openCancelAppointmentModal() style=margin-top:-15px;color:lightcoral; ng-show="!(order.status == \'Cancelled\' || order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\') && !(user.userdata.role==\'admin\' || user.userdata.role==\'providerteamlead\' )"><i class="glyphicon glyphicon-remove"></i>&nbsp;cancel visit&nbsp;</button> <span ng-if=order.servicedeliveryaddress.area_id.name><button type=button class="btn btn-link btn-sm pull-right" ng-click=openRescheduleOrderModal() style=margin-top:-15px; ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\' || (order.addpatientcomment.addpatientreasons.length && temp.isBackDate)"><i class="glyphicon glyphicon-calendar"></i>&nbsp;reschedule&nbsp;</button></span></td></tr><tr ng-show="order.status==\'Completed\'"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Delivered time</h4></small></td><td><h4 class=orderview style=margin-top:0px;margin-bottom:0px;><b>{{order.servicetime | date:\'dd-MMM-yyyy\'}}</b>&nbsp;at&nbsp;<b>{{order.servicetime | date:\'h:mma\'}}</b></h4></td></tr><tr ng-if="!(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\') && order.status != \'Cancelled\' && order.servicedeliveryaddress.area_id.name" ng-hide="temp.isBackDate && order.addpatientcomment.addpatientreasons.length"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>assigned to</h4></small></td><td><span ng-if=order.assignto class=orderview><b>{{order.assignto.profile.name}}</b><br><small>mob: {{order.assignto.profile.mobilenumber}}</small><br><sub class=orderviewsmall><strong>assigned by:</strong>{{order.assignby.profile.name}}</sub></span> <span ng-if=!order.assignto><button type=button class="btn btn-sm btn-link" ng-click=openAssignPhleboModal() ng-if="user.userdata.role == \'providerteamlead\' || user.userdata.role == \'admin\'" ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\'"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Assign phlebo</button></span> <span ng-if=order.assignto><button type=button class="btn btn-sm btn-link pull-right" style=color:lightcoral; ng-click=openUnassignPhleboModal() ng-if="user.userdata.role == \'providerteamlead\' || user.userdata.role == \'admin\'" ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\'"><i class="glyphicon glyphicon-remove"></i>&nbsp; Unassign phlebo</button></span> <span ng-if=order.assignto><button type=button class="btn btn-sm btn-link pull-right" ng-click=openAssignPhleboModal() ng-if="user.userdata.role == \'providerteamlead\' || user.userdata.role == \'admin\'" ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\'"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Change phlebo</button></span></td></tr><tr ng-if="!(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\') && order.status == \'Cancelled\' && order.assignto.profile.name"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>assigned to</h4></small></td><td><span ng-if=order.assignto class=orderview><b>{{order.assignto.profile.name}}</b> <sub>{{order.assignto.profile.mobilenumber}}</sub><br><sub><strong>assigned by:</strong>{{order.assignby.profile.name}}</sub></span> <span ng-if=!order.assignto><button type=button class="btn btn-sm btn-link" ng-click=openAssignPhleboModal() ng-if="user.userdata.role == \'providerteamlead\' || user.userdata.role == \'admin\'" ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\'"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Assign phlebo</button></span> <span ng-if=order.assignto><button type=button class="btn btn-sm btn-link pull-right" ng-click=openAssignPhleboModal() ng-if="user.userdata.role == \'providerteamlead\' || user.userdata.role == \'admin\'" ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\'"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Change phlebo</button></span></td></tr><tr ng-if="!(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\') && order.logistic.delivertype && order.assignto._id"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>sample delivery</h4></small></td><td><span class=orderview ng-if="order.logistic && order.logistic.delivertype == \'HandoverToLogistics\'">Meet <strong>{{order.logistic.logistic_id.profile.name}}</strong> at <strong>{{order.logistic.pickupdate | date:\'dd-MMM-yyyy\'}}</strong>&nbsp;at&nbsp;<strong>{{order.logistic.pickuptime | waqt}}</strong> at <strong>{{order.logistic.pickuppoint}}</strong> And Handover the sample</span> <span class=orderview ng-if="order.logistic && order.logistic.delivertype != \'HandoverToLogistics\'">{{order.logistic.username}}</span> <span ng-if=order.servicedeliveryaddress.area_id.name><span ng-if="(order.status != \'Completed\' || order.status != \'Cancelled\') && order.assignto.profile.name"><span ng-if=!order.logistic><button type=button class="btn btn-sm btn-link" ng-click=addLogisticModal() ng-hide="order.status == \'Cancelled\'" ng-if="user.userdata.role == \'providerteamlead\' || user.userdata.role == \'admin\'"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Assign logistic</button></span> <span ng-if="order.logistic && order.assignto.profile.name" ng-hide="order.status == \'Cancelled\'"><button type=button class="btn btn-sm btn-link pull-right" ng-click=addLogisticModal() ng-if="user.userdata.role == \'providerteamlead\' || user.userdata.role == \'admin\'"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Change logistics</button></span></span></span></td></tr><tr ng-if="order.assignto && order.logistic.remark"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Phlebo Delivery Remarks</h4></small></td><td class="line-break orderview"><pre>{{order.logistic.remark}}</pre></td></tr><tr ng-if=order.logistic.logisticremark.length><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Logistics Delivery Remarks</h4></small></td><td class="line-break orderview"><div ng-repeat="visit in order.logistic.logisticremark"><pre>{{visit}}{{$last?"":","}}</pre></div></td></tr><tr ng-if="order.logistic.actualpickuppoint && !(user.userdata.role == \'partnerteamlead\' || user.userdata.role == \'partnerfrontoffice\')"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>LO pick up point</h4></small></td><td class="line-break orderview"><span>{{order.logistic.actualpickuppoint}}</span></td></tr><tr><td><small><h4 style=margin-top:0px;margin-bottom:0px;>droppoint</h4></small></td><td class="line-break orderview" ng-if="(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')">{{order.droppointaddress.address}} <button type=button ng-if="order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\'" class="btn btn-sm btn-link pull-right" ng-click=editDropPointModel()><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Droppoint</button></td><td class="line-break orderview" ng-if="!(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')">{{order.droppointaddress.address}} <button type=button ng-if="order.status != \'Cancelled\'" class="btn btn-sm btn-link pull-right" ng-click=editDropPointModel()><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Droppoint</button></td></tr><tr ng-if=order.specialneed.length><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Special need</h4></small></td><td class=orderview><ul style="padding-left: 16px;margin-bottom: 0px;"><li ng-repeat="sn in order.specialneed | orderBy: \'name\'">{{sn.name}}{{$last?"":","}}</li></ul><button type=button ng-if="order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\' || order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\'" class="btn btn-sm btn-link pull-right" ng-click=editSpecialNeedModel()><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Special Need</button></td></tr><tr ng-if="!order.specialneed.length && (order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\' || order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\')"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Special need</h4></small></td><td class=orderview ng-if=!order.specialneed.length><button ng-if="order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\' || order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\'" type=button class="btn btn-sm btn-link" ng-click=editSpecialNeedModel()><i class="glyphicon glyphicon-plus"></i>&nbsp; Add Special Need</button></td></tr><tr><td><small><h4 style=margin-top:0px;margin-bottom:0px;>tests</h4></small></td><td style=padding:0px;><table style="cursor: auto;" class="table table-bordered table-condensed" ng-if=order.services.length><tr><th class=orderview width=75%>Test Name</th><th class=orderview width=25%>Amount</th></tr><tr ng-repeat="service in order.services"><td><span class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}">{{service.service_id.name}}</span> <a ng-if=service.service_id.description class=popoverOption ng-mouseover=displayDescription() href data-content={{service.service_id.description}} rel=popover data-placement=top><i class="glyphicon glyphicon-list-alt"></i></a><br><span ng-repeat="test in service.service_id.childs"><small style=font-size:13px; ng-if="test.test_id.category==\'TEST\'">{{test.test_id.name}}</small><u style=color:blue;font-size:13px class=pointer ng-if="test.test_id.category!=\'TEST\'" ng-click=showComponents(test.test_id)>{{test.test_id.name}}</u>{{$last?\'\':\',\'}}&nbsp;</span></td><td><small class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}"><span ng-if="(service.service_id.price.discountTestPrice || service.service_id.price.discountTestPrice==0) && existDiscountTestPer">Rs. {{service.service_id.price.discountTestPrice}}&nbsp;&nbsp;</span> <span ng-class="{\'orignalprice\':(service.service_id.price.discountTestPrice || service.service_id.price.discountTestPrice==0) && existDiscountTestPer}">Rs. {{service.price}}</span></small></td></tr><tr><td><small class=pull-right>Test Charge</small></td><td><small class=orderviewsmall>Rs. {{temp.amount | number:0}}</small></td></tr><tr ng-if="order.ordertype == \'F\' && tDiscountName.length"><td><small class=pull-right>Test Discount & Premium ( <b ng-repeat="name in tDiscountName" style=font-size:13px;><span ng-class=setDiscountClass(name)>{{name.name}} : <span ng-if="name.discounttype == \'ruppee\'">RS. <span ng-if="name.discountrs < 0">{{name.discountrs * -1}}</span> <span ng-if="name.discountrs > 0">{{name.discountrs}}</span></span> <span ng-if="name.discounttype == \'percentage\' || name.discounttype == undefined"><span ng-if="name.discount < 0">{{name.discount * -1}}</span> <span ng-if="name.discount > 0">{{name.discount}}</span> %</span></span>{{$last?\'\':\' ; \'}}</b> ):</small></td><td><small class=orderviewsmall>Rs. <span ng-if="discountAmountPer + discountAmountRs >= 0">{{discountAmountPer + discountAmountRs | number:0}}</span> <span ng-if="discountAmountPer + discountAmountRs < 0">{{(discountAmountPer + discountAmountRs) * -1 | number:0}}</span></small></td></tr><tr ng-if="order.ordertype == \'F\' && tDiscountName.length"><td><small class=pull-right>TEST CHARGES AFTER DISCOUNT & Premium:</small></td><td><small class=orderviewsmall>Rs. {{temp.amount - discountAmountPer - discountAmountRs | number:0}}</small></td></tr><tr ng-if="order.ordertype == \'F\' && order.paymentdetails.discount != 0"><td><small class=pull-right>Extra charge <b span style=font-size:11px;>({{order.paymentdetails.discount * -1}}%)</b></small></td><td><small class=orderviewsmall>Rs. {{temp.premiumAmount | number:0}}</small></td></tr><tr><td><small class=pull-right>Visit Charge</small></td><td><small class=orderviewsmall>Rs. {{order.paymentdetails.visitingcharges | number:0}}</small></td></tr><tr ng-if=vDiscountName.length><td><small class=pull-right>Visit Discount & Premium ( <b ng-repeat="name in vDiscountName" style=font-size:13px;><span ng-class=setDiscountClass(name)>{{name.name}} : <span ng-if="name.discounttype == \'ruppee\'">RS. <span ng-if="name.discountrs < 0">{{name.discountrs * -1}}</span> <span ng-if="name.discountrs > 0">{{name.discountrs}}</span></span> <span ng-if="name.discounttype == \'percentage\' || name.discounttype == undefined"><span ng-if="name.discount < 0">{{name.discount * -1}}</span> <span ng-if="name.discount > 0">{{name.discount}}</span> %</span></span>{{$last?\'\':\' ; \'}}</b>):</small></td><td><small class=orderviewsmall>Rs. <span ng-if="vDiscountRs + vDiscountPer >= 0">{{vDiscountRs + vDiscountPer | number:0}}</span> <span ng-if="vDiscountRs + vDiscountPer < 0">{{(vDiscountRs + vDiscountPer) * -1 | number:0}}</span></small></td></tr><tr ng-if=order.paymentdetails.reportdeliverymode.length><td><small class=pull-right>Report Delivery Charge&nbsp;</small></td><td><p ng-repeat="obj in order.paymentdetails.reportdeliverymode"><small class=orderviewsmall>Rs.&nbsp;{{obj.charge}} &nbsp;&nbsp;<span style=font-size:12px>{{obj.mode}}</span></small></p></td></tr><tr><td><small class="pull-right testview">Total Charge</small></td><td ng-if="order.ordertype == \'F\'"><small class=testview>Rs. {{temp.amount + order.paymentdetails.visitingcharges + temp.premiumAmount + order.totalreportcharges - discountAmountRs - discountAmountPer - vDiscountRs - vDiscountPer | number:0}}</small></td><td ng-if="order.ordertype == \'PP\'"><small class=testview>Rs. {{temp.amount + order.totalreportcharges + order.paymentdetails.visitingcharges | number:0}}</small></td></tr></table><p style=margin-bottom:0px><span ng-if=order.services.length><div ng-if="order.ordertype == \'F\' && (tDiscountName || vDiscountName) && order.paymentdetails.orderDiscount.length"><button type=button ng-if="(order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\' || order.status == \'SampleCollected\'|| order.status == \'Completed\' || order.status == \'SampleHandover\' ) && !(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')" class="btn btn-sm btn-link pull-right" ng-click="addDiscountModal(edit = \'true\')"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit DISCOUNTS & Premium</button></div><div ng-if="order.ordertype == \'F\' && (tDiscountName || vDiscountName) && order.paymentdetails.orderDiscount.length"><button type=button ng-if="(order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\' ) && (user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')" class="btn btn-sm btn-link pull-right" ng-click="addDiscountModal(edit = \'true\')"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit DISCOUNTS & Premium</button></div><div ng-if="order.ordertype == \'F\' && !order.paymentdetails.orderDiscount.length && temp.discounts.length && order.services.length"><button type=button ng-if="(order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\' || order.status == \'SampleCollected\'|| order.status == \'Completed\' || order.status == \'SampleHandover\' ) && !(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')" class="btn btn-sm btn-link pull-right" ng-click=addDiscountModal()><i class="glyphicon glyphicon-plus"></i>&nbsp; Add DISCOUNTS & Premium</button></div><div ng-if="order.ordertype == \'F\' && !order.paymentdetails.orderDiscount.length && temp.discounts.length && order.services.length"><button type=button ng-if="(order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\') && (user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')" class="btn btn-sm btn-link pull-right" ng-click=addDiscountModal()><i class="glyphicon glyphicon-plus"></i>&nbsp; Add DISCOUNTS & Premium</button></div><span ng-if="order.servicedeliveryaddress.area_id.name && order.services.length && (user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')"><button type=button class="btn btn-sm btn-link pull-right" ng-click=openEditTestModal() ng-hide="(order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\' || order.ordertype == \'PP\')"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Tests</button></span> <span ng-if="order.servicedeliveryaddress.area_id.name && order.services.length && !(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')"><button type=button class="btn btn-sm btn-link pull-right" ng-click=openEditTestModal() ng-hide="(order.status == \'Cancelled\' || order.ordertype == \'PP\')"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Tests</button></span> <span ng-if=order.services.length><button type=button ng-if="(order.ordertype==\'F\') && (order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\') && (user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')" class="btn btn-sm btn-link pull-right" ng-click=addReportDel()><span ng-if=!order.paymentdetails.reportdeliverymode.length><i class="glyphicon glyphicon-plus"></i>&nbsp; Add Report Delivery Mode</span> <span ng-if=order.paymentdetails.reportdeliverymode.length><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Report Delivery Mode</span></button> <button type=button ng-if="(order.ordertype==\'F\') && (order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\'|| order.status == \'SampleCollected\'|| order.status == \'Completed\' || order.status == \'SampleHandover\' ) && !(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')" class="btn btn-sm btn-link pull-right" ng-click=addReportDel()><span ng-if=!order.paymentdetails.reportdeliverymode.length><i class="glyphicon glyphicon-plus"></i>&nbsp; Add Report Delivery Mode</span> <span ng-if=order.paymentdetails.reportdeliverymode.length><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Report Delivery Mode</span></button></span> <button type=button class="btn btn-sm btn-link pull-right" ng-click=openPPVisit() ng-if=ppOrder><i class="glyphicon glyphicon-chevron-right"></i>&nbsp; GoTo PP visit</button> <button type=button class="btn btn-sm btn-link pull-right" ng-click=gotoFasting() ng-if="order.ordertype == \'PP\'"><i class="glyphicon glyphicon-chevron-right"></i>&nbsp; GoTo Fasting visit</button></span></p><span ng-if="user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\'"><button type=button class="btn btn-sm btn-link" ng-click=openEditTestModal() ng-hide="order.status == \'Completed\' || order.status == \'SampleCollected\' || order.status == \'SampleHandover\' || order.status == \'Cancelled\' || order.ordertype == \'PP\'" ng-if=!order.services.length><i class="glyphicon glyphicon-plus"></i>&nbsp; Add Tests</button></span> <span ng-if="user.userdata.role != \'partnerfrontoffice\' && user.userdata.role != \'partnerteamlead\'"><button type=button class="btn btn-sm btn-link" ng-click=openEditTestModal() ng-hide="order.status == \'Cancelled\' || order.ordertype == \'PP\'" ng-if=!order.services.length><i class="glyphicon glyphicon-plus"></i>&nbsp; Add Tests</button></span></td></tr><tr ng-if="order.serviceupdatecomment.testupdatereason.length && user.userdata.role != \'partnerfrontoffice\' && user.userdata.role != \'partnerteamlead\'"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Test Update reason</h4></small></td><td class="line-break orderview"><ul style="padding-left: 15px;"><li ng-repeat="reson in order.serviceupdatecomment.testupdatereason track by $index">{{reson.displayname}}</li></ul><span ng-repeat="reson in order.serviceupdatecomment.testupdatecomment track by $index">{{reson}}{{$last?"":","}}</span> <button type=button class="btn btn-sm btn-link pull-right" ng-click=editTestReasonUpdateModel(order) ng-if="order.status!=\'Cancelled\'"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit reason</button></td></tr><tr ng-if="order.serviceupdatecomment.testupdatereason.length && (user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Test Update reason</h4></small></td><td class="line-break orderview"><ul style="padding-left: 15px;"><li ng-repeat="reson in order.serviceupdatecomment.testupdatereason track by $index">{{reson.displayname}}</li></ul><span ng-repeat="reson in order.serviceupdatecomment.testupdatecomment track by $index">{{reson}}{{$last?"":","}}</span></td></tr><tr ng-if="order.discountupdatecomment.discountupdatereason.length && user.userdata.role != \'partnerfrontoffice\' && user.userdata.role != \'partnerteamlead\'"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Discount Update reason</h4></small></td><td class="line-break orderview"><ul style="padding-left: 15px;"><li ng-repeat="reson in order.discountupdatecomment.discountupdatereason track by $index">{{reson.displayname}}</li></ul><span ng-repeat="reson in order.discountupdatecomment.discountupdatecomment track by $index">{{reson}}{{$last?"":","}}</span> <button type=button class="btn btn-sm btn-link pull-right" ng-click=editDiscountReasonUpdateModel(order) ng-if="order.status!=\'Cancelled\'"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit reason</button></td></tr><tr ng-if="order.discountupdatecomment.discountupdatereason.length && (user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Discount Update reason</h4></small></td><td class="line-break orderview"><ul style="padding-left: 15px;"><li ng-repeat="reson in order.discountupdatecomment.discountupdatereason track by $index">{{reson.displayname}}</li></ul><span ng-repeat="reson in order.discountupdatecomment.discountupdatecomment track by $index">{{reson}}{{$last?"":","}}</span></td></tr><tr><td><small><h4 style=margin-top:0px;margin-bottom:0px;>payment</h4></small></td><td class=orderview><ul style="padding-left: 16px;margin-bottom: 0px;"><li ng-repeat="po in order.paymentdetails.paymentoptions">{{po}}{{$last?"":","}}</li></ul><button type=button class="btn btn-sm btn-link pull-right" ng-click=groupSummaryModal()><i class="glyphicon glyphicon-pencil"></i>&nbsp; View Group Summary</button> <span ng-if="!(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')"><button type=button ng-if="order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\' || order.status == \'SampleCollected\' || order.status == \'Completed\' || order.status == \'SampleHandover\'" class="btn btn-sm btn-link pull-right" ng-click=editPaymentOptionModel()><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Payment</button></span> <span ng-if="(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')"><button type=button ng-if="order.status == \'Recieved\' || order.status == \'Reached\' || order.status == \'Unassigned\'|| order.status == \'Open\'" class="btn btn-sm btn-link pull-right" ng-click=editPaymentOptionModel()><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Payment</button></span></td></tr><tr ng-if=order.tubes.length><td><small><h4 style=margin-top:0px;margin-bottom:0px;>tubes</h4></small></td><td><span ng-repeat="tube in order.tubes" class=badge style="margin-right:5px;margin-bottom: 5px"><h3 style=margin-top:5px;margin-bottom:5px;>{{tube.count}}</h3>{{tube.company}}-{{tube.type}}-{{tube.size}}ML</span></td></tr><tr ng-if="order.pendingtubes.length && ( order.status == \'SampleCollected\' || order.status == \'Completed\' || order.status == \'SampleHandover\' ) && order.ordertype == \'F\'"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Pending tubes</h4></small></td><td><span ng-repeat="tube in order.pendingtubes" class=badge style="margin-right:5px;margin-bottom: 5px"><h3 style=margin-top:5px;margin-bottom:5px;>{{tube.count}}</h3>{{tube.company}}-{{tube.type}}-{{tube.size}}ML</span></td></tr><tr ng-if=temp.sampletypes.length><td><small><h4 style=margin-top:0px;margin-bottom:0px;>sample types</h4></small></td><td><small class=orderview>{{temp.sampletypes.join(\',\')}}</small></td></tr><tr ng-if=order.specialIntruction.length><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Phlebo instructions</h4></small></td><td class=orderview><ul style="padding-left: 16px;margin-bottom: 0px;"><li ng-repeat="sample in order.specialIntruction" style="margin-bottom: 5px;" ng-click=openimage(sample)><span class=showhyperlink style="text-align: center" ng-if=sample.attachments.length popover="Click for sample Forms" popover-trigger=mouseenter popover-placement=right>{{sample.displayname}}</span><span ng-if=!sample.attachments.length>{{sample.displayname}}</span> {{$last?"":","}}</li></ul></td></tr><tr ng-if=order.patientIntruction.length><td><small><h4 style=margin-top:0px;margin-bottom:0px;>patient instructions</h4></small></td><td class=orderview><ul style="padding-left: 16px;margin-bottom: 0px;"><li ng-repeat="ci in order.patientIntruction">{{ci}}{{$last?"":","}}</li></ul></td></tr><tr ng-if=order.addpatientcomment.addpatientreasons.length><td><small><h4 style=margin-top:0px;margin-bottom:0px;>"add patient" reason</h4></small></td><td class="line-break orderview"><ul style="padding-left: 15px;"><li ng-repeat="reson in order.addpatientcomment.addpatientreasons track by $index">{{reson.displayname}}</li></ul><span ng-if=order.addpatientcomment.addpatientothercomment style=white-space:pre-line; ng-repeat="reson in order.addpatientcomment.addpatientothercomment track by $index">{{reson}}{{$last?"":","}}</span></td></tr><tr ng-if="order.comments.length && order.comments[0] != \'null\'"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>comments for phlebo</h4></small></td><td class="line-break orderview"><div ng-repeat="comm in order.comments track by $index"><p style=white-space:pre-line; ng-if=comm>{{comm}}{{$last?"":","}}</p></div><button type=button class="btn btn-sm btn-link pull-right" ng-click="editCommentModel(\'edit\')"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit Phlebo comments</button></td></tr><tr ng-if=!order.comments.length><td><small><h4 style=margin-top:0px;margin-bottom:0px;>comments for phlebo</h4></small></td><td class="line-break orderview"><div ng-repeat="comm in order.comments track by $index"><p style=white-space:pre-line; ng-if=comm>{{comm}}{{$last?"":","}}</p></div><button type=button class="btn btn-sm btn-link" ng-click="editCommentModel(\'add\')"><i class="glyphicon glyphicon-plus"></i>&nbsp; Add Phlebo comments</button></td></tr><tr ng-if="!order.logistic.logisticcomments && order.logistic.logistic_id && !(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')" ng-hide="order.status == \'Cancelled\'"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>comments for Lo</h4></small></td><td class="line-break orderview"><button type=button class="btn btn-sm btn-link" ng-click="modal.act = \'add\';addLogistiCommentModal()" ng-if="order.status != \'Cancelled\'"><i class="glyphicon glyphicon-plus"></i>&nbsp; Add LO comments</button></td></tr><tr ng-if="order.logistic.logisticcomments && order.logistic.logistic_id && !(user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\')" ng-hide="order.status == \'Cancelled\'"><td><small><h4 style=margin-top:0px;margin-bottom:0px;>comments for Lo</h4></small></td><td class="line-break orderview"><p style=white-space:pre-line;>{{order.logistic.logisticcomments}}</p><button type=button ng-if="order.status != \'Cancelled\'" class="btn btn-sm btn-link pull-right" ng-click="modal.act = \'edit\';addLogistiCommentModal()"><i class="glyphicon glyphicon-pencil"></i>&nbsp; Edit LO comments</button></td></tr><tr ng-if=order.visitcomments.length><td><small><h4 style=margin-top:0px;margin-bottom:0px;>Phlebo remarks</h4></small></td><td class=orderview><div ng-repeat="visit in order.visitcomments">{{visit}}{{$last?"":","}}</div></td></tr></tbody></table></div></div></div><div class=row ng-if="user.userdata.role == \'providerteamlead\' || user.userdata.role == \'admin\'"><div class=col-md-12 style="margin-bottom: 20px;"><center><div class=btn-group role=group aria-label=...><button type=button class="btn btn-warning" ng-click="showTable(\'log\')">Log</button> <button type=button class="btn btn-warning" ng-click="showTable(\'statusLog\')">Status log</button> <button type=button class="btn btn-warning" ng-click="showTable(\'attachment\')">attachments</button></div></center></div></div><div class=row ng-if="user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\'"><div class=col-md-12 style="margin-bottom: 20px;"><center><div class=btn-group role=group aria-label=...><button type=button class="btn btn-warning" ng-click=showLog()>Log</button> <button type=button class="btn btn-warning" ng-click="showTable(\'attachment\')">attachments</button></div></center></div></div><div class=row><div class=col-md-12><div class=table-responsive ng-if=temp.check><table class="table table-bordered table-condensed"><tbody style=background-color:white><tr><td colspan=3 class=active>Log</td></tr><tr ng-repeat-start="logObj in partnerlog track by $index"><td><div ng-if=logObj.new.length data-toggle=collapse data-target=#{{$index}} class="glyphicon glyphicon-plus-sign" ng-click=viewDetails(logObj)></div></td><td><small>{{logObj.comments}}<small></small></small></td><td><small>{{logObj.updateddatetime | date:\'dd-MMM-yyyy hh:mm a\'}}<br><strong>Updated by:</strong>{{logObj.updatedby.profile.name}}</small></td></tr><tr ng-repeat-end id={{$index}} class=collapse style=background-color:#eee;><td colspan=3><div class=table-responsive><table class="table table-bordered table-condensed" style=padding-bottom:0px><thead><tr><th style=padding-left:30px>fields</th><th style=padding-left:30px>old</th><th style=padding-left:30px>new</th></tr></thead><tbody><tr ng-repeat="(indexKey, keyObj) in logObj.old" ng-hide="(keyObj.key == \'fullname\' || keyObj.key == \'languagesknown\' || keyObj.key == \'addresses\' )"><td style=padding-left:30px ng-hide="(keyObj.key == \'assumeddob\' || keyObj.key == \'areaid\' || keyObj.key == \'_id\' || keyObj.key == \'status\' || keyObj.key == \'logistic_id\'|| keyObj.key == \'patientaddress\')"><span><b>{{keyObj.key}}</b></span></td><td style=padding-left:30px ng-repeat="(indexOld, oldObj) in logObj.old" ng-if="indexKey == indexOld && !(oldObj.key == \'assumeddob\' || oldObj.key == \'areaid\' || oldObj.key == \'_id\' || oldObj.key == \'status\' || oldObj.key == \'logistic_id\'|| oldObj.key == \'patientaddress\')"><span ng-if="checkType(oldObj.value) == \'object\'">{{oldObj.value}}</span> <span ng-if="checkType(oldObj.value) == \'string\' && (oldObj.key != \'dob\' && oldObj.key != \'pick up time\' && oldObj.key != \'from date\' && oldObj.key != \'from time\' && oldObj.key != \'pick up date\' && oldObj.key != \'deliver type\')">{{oldObj.value}}</span> <span ng-if="checkType(oldObj.value) == \'string\' && oldObj.key == \'deliver type\'"><span ng-if="oldObj.value==\'DeliverToLab\'">Deliver to lab</span> <span ng-if="oldObj.value==\'HandoverToLogistics\'">Handover to logistics</span></span> <span ng-if="checkType(oldObj.value) == \'string\' && (oldObj.key == \'dob\' || oldObj.key == \'from date\' || oldObj.key == \'pick up date\')">{{oldObj.value | date:\'dd-MMM-yyyy\'}}</span> <span ng-if="checkType(oldObj.value) == \'string\' && (oldObj.key == \'pick up time\' || oldObj.key == \'from time\')">{{oldObj.value | waqt}}</span> <span ng-if="checkType(oldObj.value) == \'number\' && oldObj.key == \'from time\'">{{oldObj.value | waqt}}</span> <span ng-if="checkType(oldObj.value) == \'number\' && oldObj.key == \'age\'">{{oldObj.value}}</span> <span ng-if="checkType(oldObj.value) == \'array\'"><ol class=list_view style=padding-left:0px><li ng-repeat="objchild in oldObj.value"><span ng-if="checkType(objchild) == \'string\'">{{objchild}}</span> <span ng-if="checkType(objchild) == \'object\'"><span ng-if="oldObj.key == \'services\'">{{objchild.service_id.name}}</span> <span ng-if="oldObj.key == \'discount\' && objchild.discounttype == \'percentage\'">{{objchild.name}}: <span ng-if="objchild.discount < 0">{{objchild.discount * -1}} %</span> <span ng-if="objchild.discount > 0">{{objchild.discount}} %</span></span> <span ng-if="oldObj.key == \'discount\' && objchild.discounttype == \'ruppee\'">{{objchild.name}}: <span ng-if="objchild.discountrs < 0">{{objchild.discountrs * -1}} rs</span> <span ng-if="objchild.discountrs > 0">{{objchild.discountrs}} rs</span></span> <span ng-if="oldObj.key == \'discount\' && !objchild.discounttype">{{objchild.name}}: <span ng-if="objchild.discount < 0">{{objchild.discount * -1}} %</span> <span ng-if="objchild.discount > 0">{{objchild.discount}} %</span></span> <span ng-if="oldObj.key == \'special need\'">{{objchild.name}}</span></span></li></ol></span> <span ng-if="oldObj.value.length == 0 || !oldObj.value">None</span></td><td style=padding-left:30px ng-repeat="(indexNew, newObj) in logObj.new" ng-if="indexNew == indexKey && !(newObj.key == \'assumeddob\' || newObj.key == \'areaid\' || newObj.key == \'_id\' || newObj.key == \'logistic_id\'|| newObj.key == \'status\' || newObj.key == \'patientaddress\')"><span ng-if="checkType(newObj.value) == \'object\'">{{newObj.value}}</span> <span ng-if="checkType(newObj.value) == \'string\' && (newObj.key != \'dob\' && newObj.key != \'pick up time\' && newObj.key != \'from date\' && newObj.key != \'from time\' && newObj.key != \'pick up date\' && newObj.key != \'deliver type\')">{{newObj.value}}</span> <span ng-if="checkType(newObj.value) == \'string\' && newObj.key == \'deliver type\'"><span ng-if="newObj.value==\'DeliverToLab\'">Deliver to lab</span> <span ng-if="newObj.value==\'HandoverToLogistics\'">Handover to logistics</span></span> <span ng-if="checkType(newObj.value) == \'string\' && (newObj.key == \'dob\' || newObj.key == \'from date\' || newObj.key == \'pick up date\')">{{newObj.value | date:\'dd-MMM-yyyy\'}}</span> <span ng-if="checkType(newObj.value) == \'string\' && (newObj.key == \'pick up time\' || newObj.key == \'from time\')">{{newObj.value | waqt}}</span> <span ng-if="checkType(newObj.value) == \'number\' && newObj.key == \'from time\'">{{newObj.value | waqt}}</span> <span ng-if="checkType(newObj.value) == \'number\' && newObj.key != \'age\'">{{newObj.value | waqt}}</span> <span ng-if="checkType(newObj.value) == \'number\' && newObj.key == \'age\'">{{newObj.value}}</span> <span ng-if="checkType(newObj.value) == \'array\'"><ol class=list_view style=padding-left:0px><li ng-repeat="objchild in newObj.value"><span ng-if="checkType(objchild) == \'string\'">{{objchild}}</span> <span ng-if="checkType(objchild) == \'object\'"><span ng-if="newObj.key == \'services\'">{{objchild.service_id.name}}</span> <span ng-if="newObj.key == \'discount\' && objchild.discounttype == \'percentage\'">{{objchild.name}}: <span ng-if="objchild.discount < 0">{{objchild.discount * -1}} %</span> <span ng-if="objchild.discount > 0">{{objchild.discount}} %</span></span> <span ng-if="newObj.key == \'discount\' && objchild.discounttype == \'ruppee\'">{{objchild.name}}: <span ng-if="objchild.discountrs < 0">{{objchild.discountrs * -1}} rs</span> <span ng-if="objchild.discountrs > 0">{{objchild.discountrs}} rs</span></span> <span ng-if="newObj.key == \'discount\' && !objchild.discounttype">{{objchild.name}}: <span ng-if="objchild.discount < 0">{{objchild.discount * -1}} %</span> <span ng-if="objchild.discount > 0">{{objchild.discount}} %</span></span> <span ng-if="newObj.key == \'special need\'">{{objchild.name}}</span></span></li></ol></span> <span ng-if="newObj.value.length == 0 || !newObj.value">None</span></td></tr></tbody></table></div></td></tr></tbody></table></div><div class=table-responsive ng-show="temp.show == \'log\'"><table class="table table-bordered table-condensed"><tbody style=background-color:white><tr><td colspan=3 class=active>Log</td></tr><tr ng-repeat-start="logObj in order.log track by $index"><td><div ng-if=logObj.new.length data-toggle=collapse data-target=#{{$index}} class="glyphicon glyphicon-plus-sign"></div></td><td><small>{{logObj.comments}}<small></small></small></td><td><small>{{logObj.updateddatetime | date:\'dd-MMM-yyyy hh:mm a\'}}<br><strong>Updated by:</strong>{{logObj.updatedby.profile.name}}</small></td></tr><tr ng-repeat-end id={{$index}} class=collapse style=background-color:#eee;><td colspan=3><div class=table-responsive><table class="table table-bordered table-condensed" style=padding-bottom:0px><thead><tr><th style=padding-left:30px>fields</th><th style=padding-left:30px>old</th><th style=padding-left:30px>new</th></tr></thead><tbody><tr ng-repeat="(indexKey, keyObj) in logObj.old" ng-hide="(keyObj.key == \'fullname\' || keyObj.key == \'languagesknown\' || keyObj.key == \'addresses\' )"><td style=padding-left:30px ng-hide="(keyObj.key == \'assumeddob\' || keyObj.key == \'areaid\' || keyObj.key == \'_id\' || keyObj.key == \'logistic_id\'|| keyObj.key == \'patientaddress\' )"><span><b>{{keyObj.key}}</b></span></td><td style=padding-left:30px ng-repeat="(indexOld, oldObj) in logObj.old" ng-if="indexKey == indexOld && !(oldObj.key == \'assumeddob\' || oldObj.key == \'areaid\' || oldObj.key == \'_id\' || oldObj.key == \'logistic_id\'||oldObj.key == \'patientaddress\')"><span ng-if="checkType(oldObj.value) == \'object\'">{{oldObj.value}}</span> <span ng-if="checkType(oldObj.value) == \'string\' && (oldObj.key != \'dob\' && oldObj.key != \'pick up time\' && oldObj.key != \'from date\' && oldObj.key != \'from time\' && oldObj.key != \'status\' && oldObj.key != \'pick up date\' && oldObj.key != \'deliver type\')">{{oldObj.value}}</span> <span ng-if="checkType(oldObj.value) == \'string\' && oldObj.key == \'deliver type\'"><span ng-if="oldObj.value==\'DeliverToLab\'">Deliver to lab</span> <span ng-if="oldObj.value==\'HandoverToLogistics\'">Handover to logistics</span></span> <span ng-if="checkType(oldObj.value) == \'string\' && oldObj.key == \'status\' && oldObj.value == \'Open\'">Assigned</span> <span ng-if="checkType(oldObj.value) == \'string\' && oldObj.key == \'status\' && oldObj.value != \'Open\'">{{oldObj.value}}</span> <span ng-if="checkType(oldObj.value) == \'string\' && (oldObj.key == \'dob\' || oldObj.key == \'from date\' || oldObj.key == \'pick up date\')">{{oldObj.value | date:\'dd-MMM-yyyy\'}}</span> <span ng-if="checkType(oldObj.value) == \'string\' && (oldObj.key == \'pick up time\' || oldObj.key == \'from time\')">{{oldObj.value | waqt}}</span> <span ng-if="checkType(oldObj.value) == \'number\' && oldObj.key != \'age\'">{{oldObj.value | waqt}}</span> <span ng-if="checkType(oldObj.value) == \'number\' && oldObj.key == \'age\'">{{oldObj.value}}</span> <span ng-if="checkType(oldObj.value) == \'array\'"><ol class=list_view style=padding-left:0px><li ng-repeat="objchild in oldObj.value"><span ng-if="checkType(objchild) == \'string\'">{{objchild}}</span> <span ng-if="checkType(objchild) == \'object\'"><span ng-if="oldObj.key == \'services\'">{{objchild.service_id.name}}</span> <span ng-if="oldObj.key == \'discount\' && objchild.discounttype == \'percentage\'">{{objchild.name}}: <span ng-if="objchild.discount < 0">{{objchild.discount * -1}} %</span> <span ng-if="objchild.discount > 0">{{objchild.discount}} %</span></span> <span ng-if="oldObj.key == \'discount\' && objchild.discounttype == \'ruppee\'">{{objchild.name}}: <span ng-if="objchild.discountrs < 0">{{objchild.discountrs * -1}} rs</span> <span ng-if="objchild.discountrs > 0">{{objchild.discountrs}} rs</span></span> <span ng-if="oldObj.key == \'discount\' && !objchild.discounttype">{{objchild.name}}: <span ng-if="objchild.discount < 0">{{objchild.discount * -1}} %</span> <span ng-if="objchild.discount > 0">{{objchild.discount}} %</span></span> <span ng-if="oldObj.key == \'special need\'">{{objchild.name}}</span></span></li></ol></span> <span ng-if="oldObj.value.length == 0 || !oldObj.value">None</span></td><td style=padding-left:30px ng-repeat="(indexNew, newObj) in logObj.new" ng-if="indexNew == indexKey && !(newObj.key == \'assumeddob\' || newObj.key == \'areaid\' || newObj.key == \'_id\' || newObj.key == \'logistic_id\' || newObj.key == \'patientaddress\')"><span ng-if="checkType(newObj.value) == \'object\'">{{newObj.value}}</span> <span ng-if="checkType(newObj.value) == \'string\' && (newObj.key != \'dob\' && newObj.key != \'pick up time\' && newObj.key != \'from date\' && newObj.key != \'from time\' && newObj.key != \'status\' && newObj.key != \'pick up date\' && newObj.key != \'deliver type\')">{{newObj.value}}</span> <span ng-if="checkType(newObj.value) == \'string\' && newObj.key == \'deliver type\'"><span ng-if="newObj.value==\'DeliverToLab\'">Deliver to lab</span> <span ng-if="newObj.value==\'HandoverToLogistics\'">Handover to logistics</span></span> <span ng-if="checkType(newObj.value) == \'string\' && newObj.key == \'status\' && newObj.value == \'Open\'">Assigned</span> <span ng-if="checkType(newObj.value) == \'string\' && newObj.key == \'status\' && newObj.value != \'Open\'">{{newObj.value}}</span> <span ng-if="checkType(newObj.value) == \'string\' && (newObj.key == \'dob\' || newObj.key == \'from date\' || newObj.key == \'pick up date\')">{{newObj.value | date:\'dd-MMM-yyyy\'}}</span> <span ng-if="checkType(newObj.value) == \'string\' && (newObj.key == \'pick up time\' || newObj.key == \'from time\')">{{newObj.value | waqt}}</span> <span ng-if="checkType(newObj.value) == \'number\' && newObj.key != \'age\'">{{newObj.value | waqt}}</span> <span ng-if="checkType(newObj.value) == \'number\' && newObj.key == \'age\'">{{newObj.value}}</span> <span ng-if="checkType(newObj.value) == \'array\'"><ol class=list_view style=padding-left:0px><li ng-repeat="objchild in newObj.value"><span ng-if="checkType(objchild) == \'string\'">{{objchild}}</span> <span ng-if="checkType(objchild) == \'object\'"><span ng-if="newObj.key == \'services\'">{{objchild.service_id.name}}</span> <span ng-if="newObj.key == \'discount\' && objchild.discounttype == \'percentage\'">{{objchild.name}}: <span ng-if="objchild.discount < 0">{{objchild.discount * -1}} %</span> <span ng-if="objchild.discount > 0">{{objchild.discount}} %</span></span> <span ng-if="newObj.key == \'discount\' && objchild.discounttype == \'ruppee\'">{{objchild.name}}: <span ng-if="objchild.discountrs < 0">{{objchild.discountrs * -1}} rs</span> <span ng-if="objchild.discountrs > 0">{{objchild.discountrs}} rs</span></span> <span ng-if="newObj.key == \'discount\' && !objchild.discounttype">{{objchild.name}}: <span ng-if="objchild.discount < 0">{{objchild.discount * -1}} %</span> <span ng-if="objchild.discount > 0">{{objchild.discount}} %</span></span> <span ng-if="newObj.key == \'special need\'">{{objchild.name}}</span></span></li></ol></span> <span ng-if="newObj.value.length == 0 || !newObj.value">None</span></td></tr></tbody></table></div></td></tr></tbody></table></div><div class=table-responsive ng-show="temp.show == \'statusLog\'"><table class="table table-bordered table-condensed"><tbody style=background-color:white><tr><td colspan=3 class=active>Status log</td></tr><tr ng-repeat="logObj in order.statuslog"><td><small ng-if="logObj.status == \'SampleCollected\'">Completed</small> <small ng-if="logObj.status == \'Completed\'">Delivered</small> <small ng-if="logObj.status == \'SampleHandover\'">En Route</small> <small ng-if="(logObj.status != \'Completed\' && logObj.status != \'SampleCollected\' && logObj.status != \'SampleHandover\')">{{logObj.status}}</small></td><td><small>{{logObj.statustimestamp | date:\'dd-MMM-yyyy\'}}&nbsp;&nbsp;<b>{{logObj.statustimestamp | date:\'hh:mm a\'}}</b><br><strong>Updated by:</strong>{{logObj.statusby.profile.name}}</small></td></tr></tbody></table></div><div class=table-responsive ng-show="temp.show == \'attachment\'"><table class="table table-bordered table-condensed" ng-if=display.attachments.length><tbody style=background-color:white><tr><td colspan=2 class=active>Attachments</td></tr><tr ng-repeat="logObj in display.attachments" ng-click=openAttachment(logObj)><td><img src={{logObj.url}} style=height:40px;width:40px class=img-circle></td><td><small><span ng-if="logObj.description != \'LabAssistant Signature\'">{{logObj.description}}</span> <span ng-if="logObj.description == \'LabAssistant Signature\'">Lab Assistant Signature</span> &nbsp;&nbsp; <span ng-if="logObj.description == \'Patient Signature\' && temp.completedTime">( {{temp.completedTime | date:\'dd-MMM-yyyy\'}} <b>{{temp.completedTime | date:\'hh:mm a\'}}</b> )</span> <span ng-if="(logObj.description == \'Delivery Signature\' || logObj.description == \'LabAssistant Signature\') && temp.deliveredTime">( {{temp.deliveredTime | date:\'dd-MMM-yyyy\'}} <b>{{temp.deliveredTime | date:\'hh:mm a\'}}</b> )</span> <span ng-if="logObj.description == \'Logistics Signature\' && temp.sampleHandoverTime">( {{temp.sampleHandoverTime | date:\'dd-MMM-yyyy\'}} <b>{{temp.sampleHandoverTime | date:\'hh:mm a\'}}</b> )</span> <small></small></small></td></tr></tbody></table><table class="table table-bordered table-condensed" ng-if=!display.attachments.length><tbody style=background-color:white><tr><td>No attachments</td></tr></tbody></table></div></div></div><div class="modal fade" id=updateDroppoint role=dialog><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Edit droppoint</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-primary pull-right" ng-click=saveEditDroppoint()>Update</button></div><div class=modal-body><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>SAMPLE DROP</strong></span><select name=sampledrop ng-model=temp.sampledrop class=form-control ng-options="dp as dp.address for dp in temp.droppointsOption | orderBy:\'address\'"></select></div></div></div></div></div></div></div><div class="modal fade" id=updateSpecialneed role=dialog><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Edit special need</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-primary pull-right" ng-click=saveEditSpecialNeed()>Update</button></div><div class=modal-body><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>SPECIAL NEED</strong></span><select name=area ng-model=temp.specialneed class=form-control ng-options="sp as sp.name for sp in temp.specialneedList" ng-change=addMultipleSN(temp.specialneed)><option ng-selected=true value>--SELECT SPECIAL NEED--</option></select></div></div></div><div class=row><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="SN in temp.specialneedArray | orderBy: \'name\'"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{SN.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeSN(SN,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div></div></div><div class="modal fade" id=updatePaymentOption role=dialog><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Edit Payment options</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-primary pull-right" ng-click=saveEditPaymentOption() ng-disabled=!temp.paymentoptionsList.length>Update</button></div><div class=modal-body style=height:auto><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Payment options</strong></span><select name=paymentoption ng-model=display.paymentoption class=form-control ng-options="po.displayname as po.displayname for po in temp.paymentoptions | orderBy:\'displayname\'" ng-change=addPaymentOptions(display.paymentoption)><option ng-selected=true value>--Select Payment Options--</option></select></div></div><div class=col-sm-12 ng-if=temp.paymentoptionsList.length><div class="alert alert-info" role=alert><span ng-repeat="po in temp.paymentoptionsList track by $index"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{po}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePayment($index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div></div></div><div ng-include="\'partials/order/modal/alertgoogleMapSlot.modal.html\'"></div><div class="modal fade" id=updateDiscount role=dialog><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Edit Discount</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-primary pull-right" ng-click=saveEditDiscountOption()>Update</button></div><div class=modal-body><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>DISCOUNTS & Premium</strong></span><select name=discount ng-model=temp.updatediscountobj class=form-control ng-options="discount as (discount | discountfilter) for discount in temp.discounts | orderBy:\'priority\'" ng-change=addDiscountArray(temp.updatediscountobj)><option ng-selected=true value>--SELECT DISCOUNTS & Premium--</option></select></div></div></div><div class=row ng-if=temp.updatediscount.length><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="d in temp.updatediscount | orderBy:\'priority\'"><span style="display: inline-block; position:relative" ng-class=setDiscountArrayClass(d)>{{d.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeDiscount(d)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div></div></div><div class="modal fade" id=addressUpdate tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Sorry No time slot is available</h4><button data-dismiss=modal aria-label=Close style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=groupOrderNotAvailable tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Group order is not available</h4><button data-dismiss=modal aria-label=Close style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=alertAddressUpdate tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Another Time slot will be blocked</h4><button data-dismiss=modal ng-click=changeaddressfromselection() aria-label=Close style=width:130px class="btn btn-primary">Ok</button> <button data-dismiss=modal aria-label=Close style=width:130px class="btn btn-default">Cancel</button></center></div></div></div></div></div></div><div class="modal fade" id=alertNewAddressUpdate tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Another Time slot will be blocked</h4><button data-dismiss=modal ng-click=newaddressConform() aria-label=Close style=width:130px class="btn btn-primary">Ok</button> <button data-dismiss=modal aria-label=Close style=width:130px class="btn btn-default">Cancel</button></center></div></div></div></div></div></div><div class="modal fade" style="z-index: 1051;" id=addServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addServiceConformation | sanitize">{{addServiceConformation}}</h4><button data-dismiss=modal ng-click=replaceServices() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" style="z-index: 1051;" id=addftwoServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addftwoServiceConformation | sanitize">{{addftwoServiceConformation}}</h4><button data-dismiss=modal ng-click=openFSecondpopup() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" style="z-index: 1051;" id=addffServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="coveredPPTestPopupText | sanitize">{{coveredPPTestPopupText}}</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">OK</button></center></div></div></div></div></div></div><div class="modal fade" style="z-index: 1051;" id=addftwothreeServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addftwothreeServiceConformation | sanitize">{{addftwothreeServiceConformation}}</h4><button data-dismiss=modal ng-click=replaceServices() style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=updateTestReason role=dialog><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Test Update Reason</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style="margin-right:5px;margin-top: -30px;" type=button ng-disabled=!temp.updatetestreasonlist.length class="btn btn-primary pull-right" ng-click=saveEditTestwithReason()>Update</button></div><div class=modal-body><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Reason</strong></span><select name=discount ng-model=temp.updatetestreasonobj class=form-control ng-options="testupdatereason as testupdatereason.displayname for testupdatereason in temp.testupdatereasons.childs | orderBy:\'displayname\'" ng-change=addTestReasonArray(temp.updatetestreasonobj)><option ng-selected=true value>--SELECT Reason--</option></select></div></div></div><div class=row><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Other Details</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=temp.testupdateotherdetail></textarea></div></div></div><div class=row ng-if=temp.updatetestreasonlist.length><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="d in temp.updatetestreasonlist track by $index"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{d.displayname}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeTestUpdateReason(d,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div></div></div><div class="modal fade" id=updateDiscountReason role=dialog><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Discount Update Reason</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style="margin-right:5px;margin-top: -30px;" type=button ng-disabled=!temp.updatediscountreasonlist.length class="btn btn-primary pull-right" ng-click=saveEditDiscountwithReason()>Update</button></div><div class=modal-body><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Reason</strong></span><select name=discount ng-model=temp.updatetestreasonobj class=form-control ng-options="testupdatereason as testupdatereason.displayname for testupdatereason in temp.discountupdatereasons.childs | orderBy:\'displayname\'" ng-change=addDiscountReasonArray(temp.updatetestreasonobj)><option ng-selected=true value>--SELECT Reason--</option></select></div></div></div><div class=row><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Other Details</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=temp.discountotherdetail></textarea></div></div></div><div class=row ng-if=temp.updatediscountreasonlist.length><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="d in temp.updatediscountreasonlist track by $index"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{d.displayname}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeDiscountUpdateReason(d,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div></div></div><div class="modal fade" id=reomvePPModelOpen tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;z-index: 1052;" data-backdrop=static data-keyboard=false title=Alert><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><center>PP TEST REMOVED.</center></h4><div><center><button style=width:130px data-dismiss=modal aria-label=Close class="btn btn-primary">Cancel</button></center></div></div></div></div></div></div></div><div class="modal fade" id=reportdelivery tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;z-index: 1052;" data-backdrop=static data-keyboard=false title=Alert><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><center>you can select only one hardcopy.</center></h4><div><center><button style=width:130px data-dismiss=modal aria-label=Close class="btn btn-primary">Cancel</button></center></div></div></div></div></div></div></div><div class="modal fade" id=editaddressAlert tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;z-index: 1052;" data-backdrop=static data-keyboard=false title=Alert><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><center>You can edit address only if it is of same slot area.<br>If you want to change the slot area then goto "Patient List", select that patient & make the slot area changes.</center></h4><div><center><button style=width:130px data-dismiss=modal aria-label=Close ng-click=openEditAddressModal(order.servicedeliveryaddress) class="btn btn-primary">Ok</button></center></div></div></div></div></div></div></div><div class="modal fade" id=ppvisitremovemodal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;z-index: 1052;" data-backdrop=static data-keyboard=false title=Alert><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><center ng-if="order.status==\'Unassigned\' || order.status==\'Open\'|| order.status==\'Recieved\' || order.status==\'Reached\'">Are you sure you want to delete this PP test?<br>If You delete this pp test, PP visit will be cancelled.</center><center ng-if="order.status==\'SampleCollected\' || order.status==\'SampleHandover\'|| order.status==\'Completed\'">Are you sure you want to delete this PP test?<br>If You delete this pp test, PP visit will be cancelled.<br>Also you will not be able to add PP test again.</center></h4><div><center><button style=width:130px data-dismiss=modal ng-click=updateTest() aria-label=Close class="btn btn-primary">OK</button> <button style=width:130px data-dismiss=modal aria-label=Close class="btn btn-default">Cancel</button></center></div></div></div></div></div></div></div><div ng-include="\'partials/mly/partner/call/gmapaddaddress.modal.html\'"></div><div ng-include="\'partials/order/modal/addingaddressfromexisting.modal.html\'"></div><div ng-include="\'partials/order/modal/partnerService.modal.html\'"></div><div ng-include="\'partials/order/modal/editAddress.modal.html\'"></div><div ng-include="\'partials/order/modal/addAddress.modal.html\'"></div><div ng-include="\'partials/order/modal/phlebo.modal.html\'"></div><div ng-include="\'partials/order/modal/rescheduleOrder.modal.html\'"></div><div ng-include="\'partials/order/modal/cancelOrder.modal.html\'"></div><div ng-include="\'partials/order/modal/editClient.modal.html\'"></div><div ng-include="\'partials/order/modal/ppVisitConfirmation.modal.html\'"></div><div ng-include="\'partials/order/modal/addLogistics.modal.html\'"></div><div ng-include="\'partials/order/modal/openAttachment.modal.html\'"></div><div ng-include="\'partials/order/modal/schedulePPTest.modal.html\'"></div><div ng-include="\'partials/order/modal/redirectToFasting.modal.html\'"></div><div ng-include="\'partials/order/modal/confirmPhlebo.modal.html\'"></div><div ng-include="\'partials/order/modal/confirmUnassignPhlebo.modal.html\'"></div><div ng-include="\'partials/order/modal/editComment.modal.html\'"></div><div ng-include="\'partials/order/modal/logdetail.modal.html\'"></div><div ng-include="\'partials/order/modal/groupSummary.modal.html\'"></div><div ng-include="\'partials/order/modal/reportdelivery.modal.html\'"></div><div ng-include="\'partials/order/modal/checklogistic.modal.html\'"></div><div ng-include="\'partials/order/modal/logisticComment.modal.html\'"></div><div ng-include="\'partials/order/modal/acceptNewAddress.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/testComponent.modal.html\'"></div><div ng-include="\'partials/order/modal/imageslide.modal.html\'"></div>'),e.put("partials/order/requeststatus-include.html",'<div class=row><div class=col-sm-6><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Existing Client</strong></span> <input id=search-input type=text ng-model=requeststatus.searchText ng-model-options="{ debounce: 300 }" placeholder="Search by name, mobile no, membership no." class=form-control><table class="table table-responsive searchtable"><tbody><tr ng-repeat="Patient in PatientList"><td ng-click=SelectPatient(Patient) class=pointer>{{Patient.demography.name}} <span><label ng-class="(Patient.type==\'member\')?\'label-success\':\'label-default\'" class=label>{{Patient.type}}</label></span>&nbsp; <span>{{Patient.demography.age}}, {{Patient.demography.gender}}</span> <span><i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span></td></tr></tbody></table><span class="input-group-addon pointer" ng-click=SearchPatientByName()><i class="glyphicon glyphicon-search"></i>Search</span></div></div></div><div class=row><div class=col-md-12 style=margin-top:-5px; ng-show=showStatusBtns><fieldset class="scheduler-border valid"><legend class=scheduler-border><h4>Workplans</h4></legend><div class=col-md-12><div class=row ng-show=showStatusBtns><div class=col-md-6><div class="input-group form-group"><div class="input-group-addon input-sm">From Date</div><input type=text name=fromdate class="form-control input-sm" datepicker-popup min-date=minFromDate max-date=maxFromDate ng-model=requeststatus.fromdate is-open=datePickerPopup.dp_fromdate close-text=Close ng-change=getorderList() ng-click="openDatePicker($event,\'dp_fromdate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fromdate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-6><div class="input-group form-group"><div class="input-group-addon input-sm">To Date</div><input type=text name=todate class="form-control input-sm" datepicker-popup min-date=minToDate max-date=maxToDate ng-model=requeststatus.todate is-open=datePickerPopup.dp_todate close-text=Close ng-change=getorderList() ng-click="openDatePicker($event,\'dp_todate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_todate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=row ng-show=showStatusBtns><div class=col-md-12><div class=form-group><span class="label pointer" style="color: #999;" ng-class="(requeststatus.status == \'\')?\'buttonactive\':\'\'" ng-click="getorderList(requeststatus.status = \'\')">All</span> <span class="label pointer" style="background-color: #F5F5F5; color: #999;" ng-class="(requeststatus.status == \'Open\')?\'buttonactive\':\'\'" ng-click="getorderList(requeststatus.status = \'Open\')">Open</span> <span class="label pointer" style="background-color: #dff0d8; color: #999;" ng-class="(requeststatus.status == \'Completed\')?\'buttonactive\':\'\'" ng-click="getorderList(requeststatus.status = \'Completed\')">Completed</span> <span class="label pointer" style="background-color: #fcf8e3; color: #999;" ng-class="(requeststatus.status == \'Cancelled\')?\'buttonactive\':\'\'" ng-click="getorderList(requeststatus.status = \'Cancelled\')">Cancelled</span> <span class="label pointer" style="background-color: #f2dede; color: #999;" ng-class="(requeststatus.status == \'Postponed\')?\'buttonactive\':\'\'" ng-click="getorderList(requeststatus.status = \'Postponed\')">Postponed</span></div></div></div><div class=row><div class=col-sm-12><div class=table-responsive ng-show="orderList.length > 0"><table class="table table-bordered"><thead><tr><th>Patient Name &nbsp;</th><th>Services</th><th ng-click="changeSorting(\'fromdatetime\')" ng-class="selectedCls(\'fromdatetime\')">Time &nbsp;</th><th>Staff</th><th>Status</th><th>Team lead</th><th>Cancel</th></tr></thead><tbody><tr ng-repeat="WorkPlan in orderList | filter: search | orderBy:sort.column: sort.descending" ng-class="{\'success\' : WorkPlan.status == \'Completed\',\'warning\' : WorkPlan.status == \'Cancelled\',\'danger\' : WorkPlan.status == \'Postponed\'}"><td>{{WorkPlan.client_id.demography.name}}</td><td><div class=row><div class=col-md-9><div ng-repeat="WorkPlanServices in WorkPlan.services track by $index">{{WorkPlanServices.service_id.name}}{{$last ? \'\' : \', \'}} &nbsp;</div></div><div class=col-md-1><button ng-show="WorkPlan.status==\'Open\' && WorkPlan.services.length > 1" type=button class="btn btn-sm" ng-click=updateserviceModal(WorkPlan)><i class="glyphicon glyphicon-pencil"></i></button></div></div></td><td>{{WorkPlan.fromdate | date: \'dd-MM-yyyy\' }} &nbsp; {{WorkPlan.fromtime | date: \'@ h:mm a\' }} &nbsp; <button ng-show="WorkPlan.status==\'Open\'" type=button class="btn btn-sm" ng-click=updateDateTimeModal(WorkPlan)><i class="glyphicon glyphicon-pencil"></i></button><p ng-show=WorkPlan.servicetime style=color:#FF0000>({{WorkPlan.servicetime | date: \'dd-MM-yyyy @ h:mm a\'}})</p></td><td><sapn ng-show="WorkPlan.comments.length > 0"><span class=badge style=background-color:red>&nbsp;</span></sapn>{{WorkPlan.assignto[0].profile.firstname}}&nbsp; {{WorkPlan.assignto[0].profile.lastname}}<br>{{WorkPlan.assignto[0].profile.mobilenumber}}</td><td>{{WorkPlan.status}}</td><td>{{WorkPlan.assignby.profile.firstname}}&nbsp; {{WorkPlan.assignby.profile.lastname}}<br>{{WorkPlan.assignby.profile.mobilenumber}}</td><td><button ng-if="WorkPlan.status==\'Open\'" type=button class="btn btn-sm btn-danger" ng-click=Update(WorkPlan)>Cancel</button></td></tr></tbody></table><pagination class="pull-right pagination-sm" style=margin-right:5px; total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="tempPage.isWorkPlanPaging=true;getorderList()"></pagination></div><div ng-show="orderList.length == 0"><div class="alert alert-warning" role=alert><strong>No work plans</strong></div></div></div></div></div></fieldset></div></div><div class="modal fade" id=confirmIndicator tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true ng-click=Confirm(false)>×</button><h4 class=modal-title id=myModalLabel>Confirm</h4></div><form name=StatusCommentsfrm><div class=modal-body><div class=form-group><label><h4>Are you sure, You want to update the work-plan?</h4></label><div ng-if="WorkPlan.CurrentStatus != temp.status"><textarea msd-elastic ng-model=WorkPlan.statuscomment placeholder="Please mention reason to change status" class=form-control required></textarea></div></div></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal ng-click=Confirm(false)>Cancel</button> <button type=button class="btn btn-primary" ng-click=Confirm(true) ng-disabled=StatusCommentsfrm.$invalid>Save changes</button></div></form></div></div></div><div class="modal fade" id=visitCommentBox tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true>×</button><h4 class=modal-title id=myModalLabel>Comment</h4></div><form name=VisitCommentsfrm><div class=modal-body><div class=form-group><label>{{ServiceTitleName}}</label> <textarea msd-elastic ng-model=temp.DeleteComment placeholder="Please write Comments" ng-pattern=validVisitComment class=form-control required></textarea></div></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Cancel</button> <button type=button class="btn btn-primary" ng-click=ConfirmComment(true) ng-disabled=!VisitCommentsfrm.$valid>Save changes</button></div></form></div></div></div><div class="modal fade" id=updateDateTimeObjView tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true>×</button><h4 class=modal-title id=myModalLabel>Date Time</h4></div><form name=datetimefrm><div class=modal-body><div class=form-group><div class=row><div class="col-md-8 col-md-offset-2"><div class="input-group form-group"><span class=input-group-addon><strong>Service Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=temp.fromdate is-open=datePickerPopup.dp_tempfromdate close-text=Close ng-click="openDatePicker($event,\'dp_tempfromdate\')" min-date=datePickerPopup.minDate required readonly ng-change="temp.todate = temp.fromdate"></div></div></div><div class=row><div class="col-md-8 col-md-offset-2"><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Service Time</strong></span><div class=form-control style="float:none !important;align:center;"><select name=fromtime class="form-control input-sm" aria-describedby=sizing-addon2 ng-model=temp.fromtime required ng-change="temp.totime = temp.fromtime"><option ng-repeat="timeslot in timeSlots track by $index" value={{timeslot.time}} ng-selected="temp.fromtime == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div></div></div><div class=row><div class="col-md-8 col-md-offset-2"><div class="input-group form-group"><span class="input-group-addon input-sm"><strong>Comment</strong></span> <textarea msd-elastic ng-model=WorkPlan.logobj.comments placeholder="Please mention reason to change date-time" class=form-control required></textarea></div></div></div></div></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Cancel</button> <button type=button class="btn btn-primary" ng-click=updateDatetime() ng-disabled=!datetimefrm.$valid>Save changes</button></div></form></div></div></div><div class="modal fade" id=updateServiceObjView tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true>×</button><h4 class=modal-title id=myModalLabel>Services</h4></div><form name=servicefrm><div class=modal-body><div class=form-group><div class=row ng-show=WorkPlan.services.length><div class="col-md-8 col-md-offset-2"><div class=table-responsive><table class="table table-bordered table-hover"><thead><th>Delete</th><th>Selected services</th><th>Amount (Rs.)</th></thead><tbody><tr ng-repeat="service in WorkPlan.services"><td><button ng-hide="WorkPlan.status==\'Cancelled\'" type=button class="btn btn-xs btn-default" ng-click=DeleteService(service,$index) ng-disabled="WorkPlan.services.length == 1"><span class="glyphicon glyphicon-remove"></span></button></td><td><span><div class=col-sm-11>{{service.service_id.name}}</div></span></td><td><span class=pull-right>{{service.service_id.price.mrp}}</span></td></tr><tr><td colspan=3><span class=pull-right><span type=button>Total Service Amount: {{WorkPlan.amount}}</span></span></td></tr></tbody></table></div></div></div></div></div></form></div></div></div>'),e.put("partials/overview/overview.html",'<div class=row style=margin-top:30px;margin-bottom:30px><div class="col-lg-offset-2 col-lg-8 col-lg-offset-2"><center><div class=btn-group role=group aria-label=...><button type=button class="btn btn-warning" ng-class=expression ng-click="searchSelection(\'today\')">Today</button> <button type=button class="btn btn-warning" ng-click="searchSelection(\'week\')">week</button> <button type=button class="btn btn-warning" ng-click="searchSelection(\'month\')">month</button></div></center></div></div><div class=row><div class=col-lg-3><center class="alert alert-warning"><h1>{{TotalCount}}</h1><sup>Total</sup></center></div><div class=col-lg-3><center class="alert alert-danger"><h1>{{OpenCount}}</h1><sup>new</sup></center></div><div class=col-lg-3><center class="alert alert-info"><h1>{{SampleCollectedCount}}</h1><sup>sample collected</sup></center></div><div class=col-lg-3><center class="alert alert-success"><h1>{{CompletedCount}}</h1><sup>Completed</sup></center></div></div><div class=row><div class=col-lg-12><ng-map zoom=12 center="19.25, 72.91" style=height:500px><marker ng-repeat="beach in beaches" icon={{image}} shape={{shape}} title={{beach[0]}} position="{{beach[1]}}, {{beach[2]}}" z-index={{beach[3]}}></marker></ng-map></div></div>'),e.put("partials/overview/overviewlist.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Appointment <small><sup>at {{search.time}} <span ng-if=search.mode>&nbsp;{{search.mode}}</span> ({{search.count}})</sup> <a href=#/main/overview class="btn btn-link btn-xs">back to overview</a></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><select class="form-control input-sm" name=area ng-model=search.mode ng-options="mode.value as mode.mode for mode in display.modes" ng-change=setPartner(partner._id) style=margin-top:25px;></select></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>Staff</th><th>Area</th><th>Patient</th></tr></thead><tbody><tr ng-repeat="event in overvieweventlist | filter:{mode:search.mode}" ng-class="{\'autocolor\':event.mode == \'Auto\', \'manualcolor\':event.mode == \'Manual\' }"><td>{{ event.staffname}}</td><td>{{ event.area}}</td><td>{{ event.patientname}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div>'),e.put("partials/newpatient/client-add.html",'<div class=row><div class="col-lg-4 col-md-4 col-sm-4 col-xs-6"><h4 ng-hide=patient._id>Add Patient</h4></div><div class="col-lg-8 col-md-8 col-sm-8 col-xs-6" style="margin:5px 0px"><button type=button ng-hide=patient._id class="btn btn-default pull-right" ng-click=close()>Cancel</button> <button type=button style=margin-right:5px; ng-click=addGmapPatient() class="btn btn-primary pull-right" ng-disabled="!call.partner_id || !newpatient.salutation || !newpatient.firstname || !newpatient.lastname || !newpatient.gender || !newpatient.dob || !newpatient.age || !newpatient.agetype || !newpatient.mobilenumber || !address.area || !address.sublocation || !address.pincode || !address.landmark || !address.addresstype || !temp.validEmail || patientFrm.$invalid">Save</button></div></div><div class="row panelmainDiv"><div class="col-lg-12 panelbodyDiv paneldetailbodyDiv"><div class=row><div class=col-lg-12><div class="panel panel-default"><div class=panel-body><div ng-form=patientFrm><div class=panel-body><div class=row><div class="col-md-10 col-md-offset-1"><div ng-form=addressFrm><div class=row><div class=col-md-12><div class=row ng-if="globaldata.userdata.role != \'partnerteamlead\'"><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.partner_id }"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partnerList | orderBy:\'info.name\' track by partner._id" ng-model=call.partner_id class="form-control input-sm" placeholder=Partner ng-change=changePartner(call.partner_id) ng-disabled="temp.parentorder_id || temp.partnerformtoffice"><option value>--Select--</option></select></div></div></div><div class=row ng-if="globaldata.userdata.role == \'partnerteamlead\'"><div class=col-md-12><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Partner</strong></span> <input name=Partner type=text placeholder=Partner class=form-control disabled ng-model=display.partnername></div></div></div><form name=patientFrm><ng-demography newpatient=newpatient temp=temp></ng-demography></form><center><div style="margin-bottom: 20px;margin-top: 7px;"><button type=button class="btn btn-primary" ng-class="(addAddressButtonCheck==false )?\'setActice\':\'setDeactice\'" ng-click=openAddAddressCheck()>ADD NEW ADDRESS 8</button> <button type=button class="btn btn-primary" ng-class="(gampAddressCheck==false)?\'setDeactice\':\'setActice\'" ng-hide=!call.partner_id ng-click=newPatientAddressFromExistingPateint()>ADD ADDRESS FROM EXISTING PATIENT</button></div></center><span ng-if="call.partner_id && !gmapshowhideCheck"><ng-gmap-address address=address order=order area-list=areaList></ng-gmap-address></span><div class=row ng-show=gmapshowhideCheck><div class=col-md-12><div class=modal-content><div class=modal-header><button style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-disabled=!temp.newAddressArray._id ng-click=saveNewAddresstoGmap()>Add</button><h4 class=modal-title>Add address</h4></div><div class=modal-body><div class=row><div class=col-md-10><div class=col-md-9 style="padding-left: 0px;"><div class="input-group input-group-sm pull-right"><span class=input-group-addon><strong>Existing Patient</strong></span> <input placeholder="first name (min. 3)" ng-model=searchExistingPatientObj.firstname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 40%;" type=text ng-minlength=3> <input placeholder="middle name" ng-model=searchExistingPatientObj.middlename class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1> <input placeholder=surname ng-model=searchExistingPatientObj.lastname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1></div></div><div class=col-md-3 style="padding-left: 0px;padding-right: 0px;"><input type=text style="margin-bottom: 0px;" ng-model=searchExistingPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() placeholder="UHID / MOB NO / ALT NO" class="form-group form-control input-sm"></div><table class="table table-responsive searchtable" style=width:100%;position:inherit><tbody><tr ng-repeat="Patient in newPatientList"><td ng-click="selectNewPatient (Patient)" class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span> <span ng-repeat="altNo in Patient.demography.altnumber">,{{altNo}}</span></td></tr></tbody></table></div><div class=col-md-2 style="padding-left: 0px;padding-right: 0px;" ng-if="searchExistingPatientObj.lastname || searchExistingPatientObj.firstname || searchExistingPatientObj.middlename || searchExistingPatientObj.searchText"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchData() style=color:black;><b>clear data</b></a></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;"><strong><i class="glyphicon glyphicon-user">&nbsp;</i>{{existingPatient.demography.salutation}}&nbsp; {{existingPatient.demography.fullname}},</strong> <span class=badge ng-if=existingPatient.externalId><strong>UHID:</strong>{{existingPatient.externalId}}&nbsp;</span> <span>{{existingPatient.demography.age}} {{existingPatient.demography.agetype}}, {{existingPatient.demography.gender}}, <strong><i class="glyphicon glyphicon-phone"></i></strong> {{existingPatient.demography.mobilenumber}}</span> <span ng-repeat="altNo in existingPatient.demography.altnumber">,{{altNo}}</span></div></div></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;border-bottom: 2px solid #b3aeae;" ng-repeat="tempaddress in addressArray track by $index" ng-if=existingPatient.demography.addresses.length ng-click=selectedAddressCheck(tempaddress,$index) ng-class="(tempaddress.servicedeliveryaddress == true)?\'setAddColor\':\'\'"><div><strong>{{tempaddress.title}}</strong><br>{{tempaddress.address2}}<br><div><b>Landmark:</b> {{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b> {{tempaddress.area_id.name}}</div></div></div><div ng-if=!existingPatient.demography.addresses.length><span><center style=color:red;>NO ADDRESS AVAILABLE</center></span></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>'),e.put("partials/newpatient/client-include-add.html",'<div class=row ng-show="patient._id && patient.membership.length"><div class=col-md-2></div><div class=col-md-2></div></div><form name=patientFrm><ng-demography newpatient=newpatient temp=temp></ng-demography></form>'),e.put("partials/newpatient/clients.html",""),e.put("partials/newpatient/newPatientAddressFromExistingPatient.modal.html",'<div class="modal fade" id=newPatientAddaddressFormExixting role=dialog style=overflow-y:scroll><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-disabled=!newAddressArray.length ng-click=saveNewAddress()>Save</button><h4 class=modal-title>Add address</h4></div><div class=modal-body><div class=row><div class=col-md-10><div class=col-md-9 style="padding-left: 0px;"><div class="input-group input-group-sm pull-right"><span class=input-group-addon><strong>Existing Patient</strong></span> <input placeholder="first name (min. 3)" ng-model=searchExistingPatientObj.firstname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 40%;" type=text ng-minlength=3> <input placeholder="middle name" ng-model=searchExistingPatientObj.middlename class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1> <input placeholder=surname ng-model=searchExistingPatientObj.lastname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1></div></div><div class=col-md-3 style="padding-left: 0px;padding-right: 0px;"><input type=text style="margin-bottom: 0px;" ng-model=searchExistingPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() placeholder="UHID / MOB NO / ALT NO" class="form-group form-control input-sm"></div><table class="table table-responsive searchtable" style=width:100%;position:inherit><tbody><tr ng-repeat="Patient in newPatientList"><td ng-click=selectNewPatient(Patient) class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span> <span ng-repeat="altNo in Patient.demography.altnumber">,{{altNo}}</span></td></tr><tr ng-if=!newPatientList.length><td ng-if=clientcheckpoint><center style=color:red;>Patient not found</center></td></tr><tr ng-if="!newPatientListdata.length && !newPatientList.length"><td ng-if=clientUsercheckpoint><center style=color:red;>Patient not found</center></td></tr></tbody></table></div><div class=col-md-2 style="padding-left: 0px;padding-right: 0px;" ng-if="searchExistingPatientObj.lastname || searchExistingPatientObj.firstname || searchExistingPatientObj.middlename || searchExistingPatientObj.searchText"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchData() style=color:black;><b>clear data</b></a></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;"><div><strong><i class="glyphicon glyphicon-user"></i> {{existingPatient.demography.fullname}}</strong></div></div></div></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;border-bottom: 2px solid #b3aeae;" ng-repeat="tempaddress in existingPatient.demography.addresses track by $index" ng-if=existingPatient.demography.addresses.length><span class=pull-right><input type=checkbox name=selectedAddress[] value={{tempaddress}} ng-checked="newAddressArray.indexOf(tempaddress) > -1" id=$index ng-click=selectedAddressCheck(tempaddress)></span> <strong>{{tempaddress.title}}</strong><br>{{tempaddress.address2}}<br><div><b>Landmark:</b> {{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b> {{tempaddress.area_id.name}}</div></div><div ng-if=!existingPatient.demography.addresses.length><span><center style=color:red;>NO ADDRESS AVAILABLE</center></span></div></div></div></div></div></div></div></div>'),e.put("partials/newpatient/patientAddress.html",""),e.put("partials/provider/provider.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Provider<small><sup><a href=#/main/provider-add class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=searchObj.search ng-change=getProviderList() placeholder=Search style=margin-top:25px></div><div class=conainer><table class="table table-bordered" style=background-color:white><thead><tr><th>Name &nbsp;</th><th>Description</th></tr></thead><tbody><tr ng-repeat="provider in providerList"><td><a href ng-click=SelectProvider(provider)>{{provider.name}}</a></td><td>{{provider.description}}</td></tr></tbody></table></div><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px; total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="isPaging=true;getProviderList()"></pagination></div></div><div ng-show="providerList.length == 0"><div class="alert alert-warning" role=alert><strong>No providers</strong></div></div>'),e.put("partials/provider/provider.object.html",'<style>\nbody, input, textarea, select, button{\n    text-transform: none;\n}\n</style><div><h2>Provider<small><sup><a href=#/main/provider ng-click=clearProvider() class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><div id=app-frame><div class="row panelmainDiv"><div class="col-md-12 panelheaderDiv"></div><div class="col-md-12 panelbodyDiv"><div class=row><div class=col-lg-12><div class="panel panel-default"><div class=panel-body><form name=providerFrm><div class=row><div class="col-md-8 col-md-offset-2"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Name</strong></span> <input name=name type=text ng-model=provider.name placeholder="Enter name" class="form-control input-sm" required></div></div></div><div class=row><div class="col-md-8 col-md-offset-2"><div class="form-group input-group" ng-class="{ \'has-error\': providerFrm.description.$invalid }"><span class="input-group-addon input-sm"><strong>Description</strong></span> <textarea msd-elastic name=description ng-model=provider.description placeholder="Enter description" class="form-control input-sm" required></textarea></div></div><div class="col-md-8 col-md-offset-2"><div class="form-group input-group" ng-class="{ \'has-error\': providerFrm.noofuser.$invalid }"><span class="input-group-addon input-sm"><strong>Plan</strong></span> <span class="input-group-addon input-sm"><strong>Number Of Users</strong></span> <input type=number ng-model=provider.plan.users name=noofuser value placeholder class="form-control input-sm"> <span class="input-group-addon input-sm"><strong>SMS</strong></span> <input type=number ng-model=provider.plan.sms name value placeholder class="form-control input-sm"></div></div><div class="col-md-8 col-md-offset-2"><div class="form-group input-group" ng-class="{ \'has-error\': providerFrm.description.$invalid }"><span class="input-group-addon input-sm"><strong>Hooks</strong></span> <span class="input-group-addon input-sm"><strong>Active</strong></span><select name=active id class="form-control input-sm" ng-model=provider.hooks.order.active><option value=true>true</option><option value=false>false</option></select><span class="input-group-addon input-sm"><strong>URL</strong></span> <input type=text name value placeholder class="form-control input-sm" ng-model=provider.hooks.order.url></div></div></div><div class="col-md-8 col-md-offset-2"><div class="form-group input-group" ng-class="{ \'has-error\': providerFrm.description.$invalid }"><span class="input-group-addon input-sm"><strong>Payment</strong></span> <span class="input-group-addon input-sm"><strong>Active</strong></span><select name=active id class="form-control input-sm" ng-model=provider.hooks.payment.active><option value=true>True</option><option value=false>False</option></select><span class="input-group-addon input-sm"><strong>URL</strong></span> <input type=text name value placeholder class="form-control input-sm" ng-model=provider.hooks.payment.url></div></div><div class="pull-right input-group input-group-sm" style=margin-right:5px;><a ng-if=!provider._id class="btn btn-sm btn-success" ng-click=saveProvider() ng-disabled=providerFrm.$invalid>Save</a> <a ng-if=provider._id class="btn btn-sm btn-success" ng-click=updateProvider() ng-disabled=providerFrm.$invalid>Update</a></div></form></div></div></div></div></div></div></div><div><div class="panel panel-default"><div class=panel-heading>ApiConfig <span class=pull-right><a href=# ng-click=addapiConfig()><i class="glyphicon glyphicon-plus"></i>Add</a></span></div><div class=panel-body><table class="table table-hover" style=background-color:white><thead><tr><th>EndPoint</th><th>Function Name</th><th>Parser</th><th>Active</th></tr></thead><tbody><tr ng-repeat="(key, value) in display.apiconfig track by $index"><td class=small><a href=# ng-click=updateApiConfig(value,$index)>{{value.endpoint}}</a></td><td class=small>{{value.functionname}}</td><td class=small>{{value.parser}}</td><td class=small>{{value.active}} <span class=pull-right><a href=# ng-click=deleteApiConfig($index,value)><i class="glyphicon glyphicon-trash" style=color:red;></i></a></span></td></tr></tbody></table></div></div></div><div class="panel panel-default"><div class=panel-heading>Routes <span class=pull-right><a href=# ng-click=addRoutes()><i class="glyphicon glyphicon-plus"></i>Add</a></span></div><div class=panel-body><table class="table table-hover" style=background-color:white><thead><tr><th>Name</th><th>Url</th><th>Template</th><th>Controller</th></tr></thead><tbody><tr ng-repeat="(key, value) in display.routes track by $index"><td class=small><a href=# ng-click=updateRoute(value,$index)>{{value.name}}</a></td><td class=small>{{value.url}}</td><td class=small>{{value.views.menuContent.templateUrl}}</td><td class=small>{{value.views.menuContent.controller}} <span class=pull-right><a href=# ng-click=deleteRoute($index,value)><i class="glyphicon glyphicon-trash" style=color:red;></i></a></span></td></tr></tbody></table></div></div><div class="panel panel-default"><div class=panel-heading>Roles</div><div class=panel-body><table class="table table-hover" style=background-color:white><thead><tr><th>Name</th><th>Display Name</th></tr></thead><tbody><tr ng-repeat="(key, value) in display.roles track by $index"><td class=small><a href=# ng-click=updateRole(value,$index)>{{value.name}}</a></td><td class=small>{{value.label}}</td></tr></tbody></table></div></div><div id=routeModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Add Routes</h4></div><div class=modal-body><div class=row><div class=col-md-12><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Name</strong></span> <input name=name type=text ng-model=provider.routes.name placeholder="Enter name" class="form-control input-sm" required></div></div><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Url</strong></span> <input name=name type=text ng-model=provider.routes.url placeholder="Enter name" class="form-control input-sm" required></div></div></div></div><div class=row><div class=col-md-12><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Template</strong></span> <input name=name type=text ng-model=provider.routes.views.menuContent.templateUrl placeholder="Enter name" class="form-control input-sm" required></div></div><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Controller</strong></span> <input name=name type=text ng-model=provider.routes.views.menuContent.controller placeholder="Enter name" class="form-control input-sm" required></div></div></div></div></div><div class=modal-footer><button type=button class="btn btn-success" ng-click=SaveRoutes()>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><div id=roleModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Edit Role</h4></div><div class=modal-body><div class=row><div class=col-md-12><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Name</strong></span> <input name=name type=text ng-model=provider.roles.label placeholder="Enter name" class="form-control input-sm" required></div></div></div></div></div><div class=modal-footer><button type=button class="btn btn-success" ng-click=SaveRole(provider.roles.label)>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><div id=deleteModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Delete Route</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove <b>{{deleteObj.name}}</b> ?</div></div><div class=modal-footer><button type=button class="btn btn-success" ng-click=finalDeleteRoute()>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><div id=deleteApiConfigModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Delete Route</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove <b>{{deleteObj.name}}</b> ?</div></div><div class=modal-footer><button type=button class="btn btn-success" ng-click=finalDeleteApiConfig()>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><div id=apiConfigModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Delete ApiConfig</h4></div><div class=modal-body><div class=row><div class=col-md-12><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Endpoint</strong></span> <input name=name type=text ng-model=provider.display.apiConfig.endpoint placeholder="Enter name" class="form-control input-sm" required></div></div><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Function Name</strong></span> <input name=name type=text ng-model=provider.display.apiConfig.functionname placeholder="Enter name" class="form-control input-sm" required></div></div></div></div><div class=row><div class=col-md-12><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Parser</strong></span> <input name=name type=text ng-model=provider.display.apiConfig.parser placeholder="Enter name" class="form-control input-sm" required></div></div><div class=col-md-2><center><div class=checkbox><label><input ng-model=provider.display.apiConfig.active type=checkbox> <strong>Active</strong></label></div></center></div></div></div><div class=modal-footer><button type=button class="btn btn-success" ng-click=SaveApiConfig()>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div></div>'),e.put("partials/partner/partner.html",'<div class=row><div class="col-md-3 col-lg-3" style=padding-left:15px><h2>Partner<small><sup><a href=#/main/partner/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-md-4 col-lg-4 pull-right" style=padding-right:15px><input type=text class="form-control input-sm" ng-model=search.name placeholder=Search style=margin-top:25px ng-change=getList() ng-model-options="{ debounce: 1000 }"></div></div><div class=row style=margin-bottom:20px;><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="margin-top: 25px;"><label class=col-md-2 style="width:initial;margin-top: 6px;"><strong>partner type</strong></label> <label class=radio-inline style="margin-top: 6px;"><strong><input name=partnerType type=radio ng-model=search.partnertype id=b2b value=b2b ng-click=getList() checked>&nbsp;&nbsp;b2b</strong></label> <label class=radio-inline style="margin-top: 6px;"><strong><input name=partnerType type=radio ng-model=search.partnertype id=b2c value=b2c ng-click=getList()>&nbsp;&nbsp;b2c</strong></label></div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" ng-show="(user.userdata.role == \'admin\' || user.userdata.role == \'backoffice\')"><select class="form-control input-sm" id=selectCity name=city ng-model=search.city_id ng-options="city._id as city.name for city in display.cities" ng-change=getList() style=margin-top:25px><option value>-- All Cities --</option></select></div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style=padding-left:15px><select ng-model=search.active type=text class="form-control input-sm" name=category aria-describedby=sizing-addon2 style=margin-top:25px; ng-change=getList()><option name=active value require>All Status</option><option name=active value=true require>Active</option><option name=active value=false require>Deactive</option></select></div></div><div ng-show=!display.partners><div class=row><div class="col-lg-12 col-sm-12"><div class="alert alert-info" role=alert><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> Please add new partner</div></div></div></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>Name</th><th>Address</th><th>City</th><th>Status</th></tr></thead><tbody><tr ng-repeat="partner in display.partners"><td ng-click=edit(partner._id)>{{$index+1}}</td><td ng-click=edit(partner._id)><span class="label label-success">{{partner.info.type}}</span> {{partner.info.name}}</td><td ng-click=edit(partner._id)>{{partner.info.address}}</td><td ng-click=edit(partner._id)>{{partner.info.city_id.name}}</td><td><button type=button data-toggle=modal ng-show="partner._Deleted ==true" ng-model=activeModal.data ng-click="setActive(\'active\',partner)" class="btn btn-success btn-xs">Activate</button> <button type=button ng-show="partner._Deleted ==false" ng-model=deactiveModal.data class="btn btn-danger btn-xs" ng-click="setActive(\'deactive\',partner)">Deactivate</button></td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=getList()></pagination></div><ng-include src="\'partials/partner/modal/activate.model.html\'"></ng-include>'),e.put("partials/partner/partner.object.html",'<div><h2>Partner<small><sup><a href=#/main/partner class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=partnerForm><div class=col-sm-6 style=padding:0px><div class="panel panel-defaul"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{ \'has-error\': partnerForm.name.$invalid }"><label for=inputName class="col-sm-3 control-label">Partner Name</label><div class=col-sm-9><input type=text id=inputName class=form-control name=name ng-model=data.partner.info.name required></div></div><div class=form-group ng-class="{ \'has-error\': partnerForm.acronym.$invalid }"><label for=inputName class="col-sm-3 control-label">Acronym</label><div class=col-sm-9><input type=text id=inputName class=form-control name=acronym ng-model=data.partner.info.acronym required></div></div><div class=form-group ng-class="{ \'has-error\': partnerForm.infotype.$invalid }"><label for=inputName class="col-sm-3 control-label">Type</label><div class=col-sm-9><select ng-model=data.partner.info.type name=infotype id class=form-control ng-options="type.displayname as type.displayname for type in display.type | orderBy:\'displayname\'" required></select></div></div><div class=form-group ng-class="{ \'has-error\': partnerForm.long.$invalid }"><label for=inputName class="col-sm-3 control-label">Address</label><div class=col-sm-9><textarea msd-elastic type=text class=form-control name=long ng-model=data.partner.info.address aria-describedby=sizing-addon2 required></textarea></div></div><div class=form-group ng-class="{ \'has-error\': partnerForm.lat.$invalid }"><label for=inputName class="col-sm-3 control-label">Lat / Long</label><div class=col-sm-4 ng-class="{ \'has-error\': partnerForm.lat.$invalid }"><input type=tel id=Latitude class=form-control name=lat placeholder=Latitude ng-model=data.partner.info.coordinates.lat ng-pattern="/^[0-9]+([,.][0-9]+)?$/" required></div><div class=col-sm-4 ng-class="{ \'has-error\': partnerForm.Longitude.$invalid }"><input type=tel id=Longitude class=form-control name=Longitude placeholder=Longitude ng-model=data.partner.info.coordinates.long ng-pattern="/^[0-9]+([,.][0-9]+)?$/" required></div></div><div class=form-group ng-class="{ \'has-error\': partnerForm.infocity.$invalid }"><label for=inputName class="col-sm-3 control-label">City</label><div class=col-sm-9><select type=text class=form-control name=infocity ng-model=data.partner.info.city_id placeholder=Name aria-describedby=sizing-addon2 ng-options="city as city.name for city in display.cities | orderBy:\'name\' track by city._id" required></select></div></div><div class=form-group><label for=inputType class="col-sm-3 control-label"></label><div class=col-sm-6><input type=checkbox name=b2b ng-model=data.partner.sharetubes> <strong>Share tubes</strong></div></div><div class=form-group ng-class="{ \'has-error\': !data.partner.partnertype }"><label for=inputName class="col-sm-3 control-label">Partner type</label><div class=col-sm-5><strong><input name=partnerType type=radio ng-model=data.partner.partnertype id=b2b value=b2b checked required>&nbsp;&nbsp;b2b&nbsp;&nbsp;&nbsp;&nbsp; <input name=partnerType type=radio ng-model=data.partner.partnertype id=b2c value=b2c required>&nbsp;&nbsp;b2c</strong></div></div><div class="panel panel-default col-sm-offset-3"><div class=panel-heading><strong>Auto scheduling</strong></div><div class=panel-body><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=data.partner.autoscheduling ng-change="data.partner.autoschedulingtime = \'\'">Auto schedule</label></div></div></div><div class=form-group ng-if=data.partner.autoscheduling><div class=col-sm-5><span>Auto scheduling time</span></div><div class=col-sm-7><span><select name=autoschedulingtime class="form-control input-sm" aria-describedby=sizing-addon2 ng-model=data.partner.autoschedulingtime required><option ng-repeat="timeslot in display.timeSlots track by $index" value={{timeslot.time}} ng-selected="data.partner.autoschedulingtime == timeslot.time">{{timeslot.time | waqt}}</option></select></span></div></div></div></div><div class="panel panel-default col-sm-offset-3" ng-class="{ \'panel-has-error\': !reportDelivery.email && !reportDelivery.online && !reportDelivery.counter && !reportDelivery.doctordelivery && !reportDelivery.courier && !reportDelivery.homedelivery }"><div class=panel-heading><strong>Report delivery mode</strong></div><div class=panel-body><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.email>Email</label></div></div></div><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.online>Online</label></div></div></div><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.counter>Counter</label></div></div></div><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.doctordelivery>Doctor delivery</label></div></div></div><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.freehanddelivery>free Hand delivery</label></div></div></div><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.homedelivery>Hand delivery</label></div></div><div class=col-sm-4 ng-if=reportDelivery.homedelivery><input type=number class=form-control ng-model=reportDelivery.homedeliveryCharges placeholder=charges required=reportDelivery.homedelivery></div></div><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.courier>Courier</label></div></div><div class=col-sm-4 ng-if=reportDelivery.courier><input type=number placeholder=charges class=form-control ng-model=reportDelivery.courierCharges required=reportDelivery.courier></div></div></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-8"><button name=save type=button ng-click="Save(frommainsave = \'true\')" class="btn btn-primary" ng-disabled="partnerForm.$invalid || (!reportDelivery.email && !reportDelivery.online && !reportDelivery.counter && !reportDelivery.doctordelivery && !reportDelivery.courier && !reportDelivery.homedelivery) || !data.partner.workinghour.length || !data.partner.droppoints.length || !data.partner.paymentoptions.length">Save</button></div></div></div></div></div><div class=col-sm-6><div class="panel panel-defaul"><div class=panel-body style=padding-bottom:0px><div class="panel panel-default" ng-class="{ \'panel-has-error\': !data.partner.workinghour.length }"><div class=panel-heading><strong>Working hours</strong><small><sup><a ng-click=addWorkingHour() class="btn btn-link btn-xs">Add</a></sup></small></div><div class=panel-body ng-show=false><div style=font-style:italic>Nothing is added here</div></div><table class="table table-hover"><tbody><tr ng-repeat="wh in data.partner.workinghour"><td ng-click=editWorkingHour($index,wh)><small>{{wh.day.join(\', \')}}</small><div ng-click=editWorkingHour($index,wh)><small><strong>From:</strong> {{wh.from | waqt}} <strong>To:</strong> {{wh.to | waqt}}</small></div></td><td><span class=pull-right><a ng-click="deleteWorkingHour($index, wh)"><span class="glyphicon glyphicon-remove pull-right" style=color:maroon></span></a></span></td></tr></tbody></table></div></div><div class=panel-body style=padding-top:0px;padding-bottom:0px><div class="panel panel-default"><div class=panel-heading><strong>Visiting charges</strong></div><div class=panel-body ng-show=false><div style=font-style:italic>Nothing is added here</div></div><table class="table table-hover"><tbody><tr ng-repeat="vc in data.partner.visitcharges"><td><small>{{vc.day.join(\', \')}}<div><div><strong>From:</strong> {{vc.from | waqt}} <strong>To:</strong> {{vc.to | waqt}}</div><div><strong>Person:</strong> {{vc.person}}, <strong>Charge:</strong> {{vc.charge}}, <strong>Post Charge:</strong>{{vc.postcharge}}, <strong>Premium on test %:</strong> {{vc.premiumpercentontest}}</div></div></small></td></tr></tbody></table></div></div><div class=panel-body style=padding-top:0px;padding-bottom:0px><div class="panel panel-default" ng-class="{ \'panel-has-error\': !data.partner.droppoints.length }"><div class=panel-heading><div class=row><div class=col-md-6><strong>Droppoints</strong> <small><sup><a ng-click=addDropPoint() class="btn btn-link btn-xs">Add</a></sup></small></div><div class=col-md-6><strong><input type=checkbox ng-model=copyAddress ng-change=copyDropPoint()> Copy from address</strong></div></div></div><div class=panel-body ng-show=false><div style=font-style:italic>Nothing is added here</div></div><table class="table table-hover"><tbody><tr ng-repeat="dp in data.partner.droppoints track by $index"><td><div ng-click=editDropPoint($index,dp)>{{dp.address}}</div></td><td><span class=pull-right><a ng-click=deleteDropPoint($index)><span class="glyphicon glyphicon-remove pull-right" style=color:maroon></span></a></span></td></tr></tbody></table></div></div><div class=panel-body style=padding-top:0px;padding-bottom:0px><div class="panel panel-default" ng-class="{ \'panel-has-error\': !data.partner.paymentoptions.length }"><div class=panel-heading><strong>Payment Options</strong> <small><sup><a ng-click=AddAllpaymentOption() class="btn btn-link btn-xs">Add All</a></sup></small></div><div class=panel-body style=padding:0px><select type=text class=form-control name=payment ng-model=display.temppaymentOption ng-options="obj as obj.displayname for obj in display.paymentoptions.childs | orderBy:\'displayname\'" ng-change=pushPaymentOtions(display.temppaymentOption)><option disabled value>-- Select Payment Options --</option></select><table class="table table-striped table-hover" ng-show="data.partner.paymentoptions.length > 0" style="margin-bottom: 0px;"><tbody><tr ng-repeat="option in data.partner.paymentoptions track by $index"><td>{{option.displayname}}</td><td><a href ng-click=removePaymentOptions(option,$index)><span class="glyphicon glyphicon-remove pull-right" style=color:maroon></span></a></td></tr></tbody></table></div></div></div><div class=panel-body style=padding-top:0px><div class="panel panel-default"><div class=panel-heading><strong>Discounts</strong> <small><sup><a ng-click=discountAdd() class="btn btn-link btn-xs">Add</a></sup></small></div><table class="table table-striped table-hover table-condensed" ng-show="data.partner.discounts.length > 0"><thead><tr><th style=width:30%><center>Name</center></th><th style=width:20%><center>Priority</center></th><th style=width:25%><center>Type</center></th><th style=width:25%><center>Value</center></th></tr></thead><tbody><tr ng-repeat="option in data.partner.discounts" ng-class={success:option.active}><td ng-click=discountEdit(option,$index)><center><small>{{option.name}}</small></center></td><td ng-click=discountEdit(option,$index)><center><small>{{option.priority}}</small></center></td><td><center><span ng-if="option.discountapplicable != \'VISIT\'"><a ng-click=discountEdit(option,$index)><small>{{option.discountapplicable}}</small></a></span> <span ng-if="option.discountapplicable == \'VISIT\'"><a ng-click=discountEdit(option,$index)><small>VISIT CHARGe</small></a></span></center></td><td ng-if=option.discount><center><span><small style="margin-right: 10px;">{{option.discount}} %</small> <a ng-click=deleteDiscount($index)><span class="glyphicon glyphicon-remove" style=color:maroon></span></a></span></center></td><td ng-if=option.discountrs><center><span><small style="margin-right: 10px;">{{option.discountrs}} Rs</small> <a ng-click=deleteDiscount($index)><span class="glyphicon glyphicon-remove" style=color:maroon></span></a></span></center></td></tr></tbody></table></div></div></div></div></form><div class="modal fade" id=ConfirmPopupDeletePaymentOption tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove Payment Option</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove Payment Option?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=confirmDeletePaymentOptions()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div><div ng-include="\'partials/partner/modal/ConfirmPopupDeleteDropPoint.modal.html\'"></div><div ng-include="\'partials/partner/modal/ConfirmPopupDeleteForVisitCharge.modal.html\'"></div><div ng-include="\'partials/partner/modal/workingHour.modal.html\'"></div><div ng-include="\'partials/partner/modal/visitCharge.modal.html\'"></div><div ng-include="\'partials/partner/modal/dropPoint.modal.html\'"></div><div ng-include="\'partials/partner/modal/ConfirmPopupDeleteForWorkinHour.modal.html\'"></div><div ng-include="\'partials/partner/modal/paymentOption.modal.html\'"></div><div ng-include="\'partials/partner/modal/discount.modal.html\'"></div><div ng-include="\'partials/partner/modal/confirmUpdateWorkingHours.html\'"></div><div ng-include="\'partials/partner/modal/workingHour_VisitingCharges.modal.html\'"></div><div ng-include="\'partials/partner/modal/ConfirmPopupChangeVisitChargeTime.modal.html\'"></div>'),e.put("partials/roles/roles.html",'<div ng-controller=areaController><div id=page-content-wrapper class=content-wrapper><div class=container-fluid><div class=row><div class=col-lg-12><h2>Roles<small><sup></sup></small></h2><div class="panel panel-default"><div class=panel-body><div class="form-group input-group input-group-sm col-md-4 col-md-offset-4"><span class=input-group-addon><strong>Role</strong></span><select ng-model=roleObj class="form-control input-sm" ng-options="role as role.label for role in roleList | orderBy:\'label\'" ng-change=selectRole(roleObj)><option value="" disabled>--Select Role--</option></select></div><div class=row><div class="col-lg-8 col-md-offset-2"><div class=panel-group id=accordion><div class="panel panel-default" ng-repeat="menu in roleWiseCompleteMenu track by $index"><div class=panel-heading data-toggle=collapse data-target=#{{menu._id}}-a><input ng-hide=menu.isLabel type=checkbox ng-model=menu.selected ng-click=selectMenu() style=display:block> <a data-toggle=collapse data-parent=#accordion href=javascript:void(0) ng-hide=!menu.isLabel style=color:black>{{menu.name}} ({{menu.selectedMenuLen}}/{{menu.subMenusLen}})</a> <span ng-hide=menu.isLabel>{{menu.name}}</span> <span ng-show=menu.isLabel type=button class="caret pull-right"></span></div><div id={{menu._id}}-a class="panel-collapse collapse" ng-if="menu.subMenus.length &gt; 0"><div class=panel-body><div class=table-responsive><table class="table table-striped table-bordered table-hover"><tbody><tr ng-repeat="subMenu in menu.subMenus"><td><div class=checkbox><label><input ng-hide=subMenu.isLabel type=checkbox ng-model=subMenu.selected ng-click="selectMenu(menu, subMenu.selected)" style=display:block> {{subMenu.name}}</label></div></td></tr></tbody></table></div></div></div></div></div></div></div><div class=form-group><div class="col-sm-offset-4 col-sm-10"><button name=save type=button ng-click=Save(roleObj) class="btn btn-primary" ng-disabled=!isModified>Save</button></div></div></div></div></div></div></div></div></div>'),e.put("partials/privileges/privileges.html",'<style>\nbody, input, textarea, select, button{\n    text-transform: none;\n}\n</style><div><div class="col-lg-8 col-md-8 col-sm-8 col-xs-6" style=padding-left:0px><h2>Privileges</h2></div></div><div class="row col-lg-12 col-md-12 col-sm-12 col-xs-6"><div class="panel panel-default"><div class=panel-body><div class="col-md-8 col-md-offset-2"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Select Role</strong></span><select name id ng-model=role class=form-control ng-change=setPrivileges() ng-options="role as role.name for role in display.roleList"><option value>--Select role--</option></select></div><div class=row ng-show=toggle><div class="panel panel-default"><div class=panel-heading>Add Privileges</div><div class=panel-body><table class="table table-bordered table-hover"><thead><tr><th>Name</th><th>Read</th><th>Write</th><th>Update</th><th>Delete <span class=pull-right><a ng-click=addPrivileges() href=#><i class="glyphicon glyphicon-plus"></i>Add</a></span></th></tr></thead><tbody><tr ng-repeat="(key, value) in role.privileges"><td><a href=# ng-click=editPrivileges(value,$index)>{{value.name}}</a></td><td>{{value.access[0]}}</td><td>{{value.access[1]}}</td><td>{{value.access[2]}}</td><td>{{value.access[3]}} <span class=pull-right><a href=# ng-click=deletePri($index,value)><i class="glyphicon glyphicon-trash" style=color:red;></i></a></span></td></tr></tbody></table></div></div></div></div></div></div></div><div id=addPrivilegesModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Add Privileges</h4></div><div class=modal-body><div class=row><div class=col-md-12><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Name</strong></span> <input name=name type=text ng-model=role.privileges.display.name placeholder="Enter name" class="form-control input-sm" required></div></div></div><div class=col-md-12><div class=col-md-4><center><div class=form-group><label for=inputType></label><div class><input type=checkbox name=b2b ng-model=role.privileges.display.access.read> <strong>Read</strong></div></div></center></div><div class=col-md-4><center><div class=form-group><label for=inputType></label><div class><input type=checkbox name=b2b ng-model=role.privileges.display.access.write> <strong>Write</strong></div></div></center></div><div class=col-md-4><center><div class=form-group><label for=inputType></label><div class><input type=checkbox name=b2b ng-model=role.privileges.display.access.update> <strong>Update</strong></div></div></center></div><div class=col-md-4><center><div class=form-group><label for=inputType></label><div class><input type=checkbox name=b2b ng-model=role.privileges.display.access.delete> <strong>Delete</strong></div></div></center></div></div></div></div><div class=modal-footer><button type=button class="btn btn-success" data-dismiss=modal ng-click=saveprivileges()>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><div id=deletePri class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Delete Route</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove <b>{{deleteObj.name}}</b> ?</div></div><div class=modal-footer><button type=button class="btn btn-success" ng-click=confirmDelete()>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><div class="row col-lg-12 col-md-12 col-sm-12 col-xs-6"><div class="panel panel-default"><div class=panel-heading>Option Master <span class=pull-right><a ng-click=addOptionMaster() href=#><i class="glyphicon glyphicon-plus"></i>Add</a></span></div><div class=panel-body><table class="table table-hover"><thead><tr><th>Name</th><th>Display Name</th><th>Parent</th></tr></thead><tbody><tr ng-repeat="(key, value) in display.optionsList"><td><a href=# ng-click=editOptionMaster($index,value)>{{value.name}}</a></td><td>{{value.displayname}}</td><td>{{value.isParent}} <span class=pull-right><a href=# ng-click=deleteOptionMaster($index,value)><i class="glyphicon glyphicon-trash" style=color:red;></i></a></span></td></tr></tbody></table></div></div></div><div id=addOptionMasssster class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Delete Route</h4></div><div class=modal-body><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Name</strong></span> <input name=name type=text ng-model=role.privileges.display.name placeholder="Enter name" class="form-control input-sm" required></div><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Name</strong></span> <input name=name type=text ng-model=role.privileges.display.name placeholder="Enter name" class="form-control input-sm" required></div><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><center><div class=form-group><label for=inputType></label><div class><input type=checkbox name=b2b ng-model=role.privileges.display.access.read> <strong>Read</strong></div></div></center></div><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><center><div class=form-group><label for=inputType></label><div class><input type=checkbox name=b2b ng-model=role.privileges.display.access.read> <strong>Read</strong></div></div></center></div><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><center><div class=form-group><label for=inputType></label><div class><input type=checkbox name=b2b ng-model=role.privileges.display.access.read> <strong>Read</strong></div></div></center></div></div><div class=modal-footer><button type=button class="btn btn-success" ng-click=confirmDelete()>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><div id=addOptionMaster class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Add Option Master</h4></div><div class=modal-body><div class=row><div class=col-md-12><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Name</strong></span> <input name=name type=text ng-model=optionMaster.display.name placeholder="Enter name" class="form-control input-sm" required></div></div></div><div class=col-md-12><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': providerFrm.name.$invalid }"><span class=input-group-addon><strong>Display Name</strong></span> <input name=name type=text ng-model=optionMaster.display.displayname placeholder="Enter name" class="form-control input-sm" required></div></div></div></div></div><div class=modal-footer><button type=button class="btn btn-success" data-dismiss=modal ng-click=saveOptionMaster()>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div><div id=deleteOptionMaster class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Delete Route</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove <b>{{deleteObj.name}}</b> ?</div></div><div class=modal-footer><button type=button class="btn btn-success" ng-click=ConfDeleteOptionMaster()>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div>'),e.put("partials/reports/reports.html",'<div class="row panelmainDiv" data-ng-init=loadOptions()><div class="col-md-12 panelheaderDiv"><h4>General Reports</h4></div><div class="col-md-12 panelbodyDiv"><div class="panel panel-default" style=margin-bottom:0px;><div class=panel-body><div class=row><div class=col-md-6><div class="form-group input-group"><div class="input-group-addon input-sm">Select Report</div><select ng-options="report as report.name for report in reportList | orderBy:\'name\'" ng-model=selectedOptions.report class="form-control input-sm" ng-change=selectReport(selectedOptions.report)><option value disabled>--Select report type--</option></select></div></div><div class=col-md-3><div class="input-group form-group" ng-if=showhide.fromdate><div class="input-group-addon input-sm">{{fromdate}}</div><input type=text name=fromdate class="form-control input-sm" datepicker-popup min-date=minFromDate max-date=maxFromDate ng-model=selectedOptions.fromdate is-open=datePickerPopup.dp_fromdate close-text=Close ng-click="openDatePicker($event,\'dp_fromdate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fromdate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-3><div class="input-group form-group" ng-if=showhide.todate><div class="input-group-addon input-sm">To date</div><input type=text name=todate class="form-control input-sm" datepicker-popup min-date=minToDate max-date=maxToDate ng-model=selectedOptions.todate is-open=datePickerPopup.dp_todate close-text=Close ng-click="openDatePicker($event,\'dp_todate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_todate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=row ng-if="selectedOptions.report.reportname==\'homevisitreport\' || selectedOptions.report.reportname==\'cancelledvisitreport\'" ng-hide="loggedinuserdata.userdata.role == \'partnerteamlead\'"><div class=col-md-12><div class="form-group input-group"><div class="input-group-addon input-sm">Select Partner</div><select ng-options="partner as partner.info.name for partner in PartnerList | orderBy:\'info.name\'" ng-model=temp.partner class="form-control input-sm" ng-change=pushPartner(temp.partner)><option value>--All partners--</option></select></div></div></div><div class=row ng-if="selectedOptions.report.reportname==\'partnerstockreport\'" ng-hide="loggedinuserdata.userdata.role == \'partnerteamlead\'"><div class=col-md-12><div class="form-group input-group"><div class="input-group-addon input-sm">Select Partner</div><select ng-options="partner as partner.info.name for partner in PartnerList | orderBy:\'info.name\'" ng-model=temp.partner class="form-control input-sm" ng-change=pushPartner(temp.partner)><option value>--all partner--</option></select></div></div></div><div class=row ng-if="display.partner.length && loggedinuserdata.userdata.role == \'admin\' && (selectedOptions.report.reportname==\'homevisitreport\' || selectedOptions.report.reportname==\'partnerstockreport\' || selectedOptions.report.reportname==\'cancelledvisitreport\')"><div class=col-md-12><div class=form-group><div class=col-md-12 style=padding-left:0px;padding-right:0px;><div class="alert alert-info" role=alert><span ng-repeat="partner in display.partner"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{partner.info.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePartner($index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div><div class=row ng-if="display.partner.length && loggedinuserdata.userdata.role != \'admin\'"><div class=col-md-12><div class=form-group><div class=col-md-12 style=padding-left:0px;padding-right:0px;><div class="alert alert-info" role=alert><span ng-repeat="partner in display.partner"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{partner.info.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePartner($index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div><div class=row ng-if="selectedOptions.report.reportname==\'phlebostockreport\' || selectedOptions.report.reportname==\'phlebovisitcount\'"><div class=col-md-12 ng-if="loggedinuserdata.userdata.role != \'partnerteamlead\'"><div class="form-group input-group"><div class="input-group-addon input-sm">Select phlebo</div><select ng-options="phlebo as phlebo.profile.name for phlebo in phleboList | orderBy:\'profile.name\'" ng-model=temp.phlebo class="form-control input-sm" ng-change=pushPhlebo(temp.phlebo)><option value>--all phlebo--</option></select></div></div></div><div class=row ng-if=display.phlebo.length><div class=col-md-12><div class=form-group><div class=col-md-12 style=padding-left:0px;padding-right:0px;><div class="alert alert-info" role=alert><span ng-repeat="phlebo in display.phlebo"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{phlebo.profile.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeRole($index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div><div class=row><center><div class="btn-group form-group" role=group ng-if=selectedOptions.report><button type=button class="btn btn-default" ng-click="download(\'down\')" ng-if=showhide.csvformat><span class="glyphicon glyphicon-download"></span> Download</button></div>&nbsp;&nbsp;&nbsp;<div class="btn-group form-group" role=group ng-if="selectedOptions.report.reportname==\'phlebostockreport\' || selectedOptions.report.reportname==\'partnerstockreport\' || selectedOptions.report.reportname==\'phlebovisitcount\'"><button type=button class="btn btn-default" ng-click="download(\'view\')">VIEW</button></div></center></div></div></div></div><div class=row ng-if=viewList.length><div class=col-md-12 style="padding-left: 32px; padding-right: 29px;"><table class="table table-bordered reportHeadColor" style="background-color: white;"><tbody><tr ng-repeat="obj in viewList track by $index" ng-class=checkClass(obj)><td ng-repeat="objValue in obj track by $index"><center>{{objValue}}</center></td></tr></tbody></table></div></div></div>'),e.put("partials/patientinstruction/patientinstruction.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Patient Instruction<small><sup><a href=#/main/instruction/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=search placeholder=Search style=margin-top:25px></div><table class="table table-bordered table-hover" style="background-color: white;table-layout: fixed;word-wrap: break-word;"><thead><tr><th class="col-lg-1 col-md-1 col-sm-1 col-xs-1" data-field="City Name">No</th><th class="col-lg-5 col-md-5 col-sm-5 col-xs-5" data-field="City Name">Name</th><th class="col-lg-6 col-md-6 col-sm-6 col-xs-6" data-field="City Code">Description</th></tr></thead><tbody><tr ng-repeat="patientinstruction in display.patientinstructions | filter:search" ng-click=edit(patientinstruction._id)><td>{{$index+1}}</td><td>{{patientinstruction.name}}</td><td>{{patientinstruction.description}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div>'),e.put("partials/patientinstruction/patientinstruction.object.html",'<div><h2>Patient Instruction<small><sup><a href=#/main/instruction class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=PatientInstruction><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{ \'has-error\': PatientInstruction.name.$invalid }"><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input type=text id=inputName class=form-control name=name ng-model=patientinstructionObj.name required></div></div><div class=form-group ng-class="{ \'has-error\': PatientInstruction.Description.$invalid }"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Description</label><div class=col-sm-6><textarea msd-elastic type=text id=inputName class=form-control name=Description rows=5 ng-model=patientinstructionObj.description required></textarea></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=PatientInstruction.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/servicesinfo/servicesinfo.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Tests and Diseases<small><sup><a href=#/main/servicesinfo/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text ng-model-options="{ debounce: 1000 }" class="form-control input-sm" ng-model=searchObj.testserch placeholder=Search style=margin-top:25px ng-change=get()></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th data-field>No</th><th data-field>Page type</th><th data-field>Title</th></tr></thead><tbody><tr ng-repeat="service in display.services" ng-click=edit(service._id)><td>{{$index+1}}</td><td>{{service.pagetype}}</td><td>{{service.title}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div>'),e.put("partials/servicesinfo/servicesinfo.object.html",'<div><h2>Test and Disease<small><sup><a href=#/main/servicesinfo class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=serviceinfoForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Title</label><div class=col-sm-6><input type=text id=inputName class=form-control name=name ng-model=display.servicesinfo.title required></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Page Type</label><div class=col-sm-6><label class=radio-inline><input type=radio name=inlineRadioOptions ng-model=display.servicesinfo.pagetype id=test value=TEST> TEST</label> <label class=radio-inline><input type=radio name=inlineRadioOptions ng-model=display.servicesinfo.pagetype id=disease value=DISEASE> DISEASE</label></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Test Name<p><small>(Book this test)</small></p></label><div class=col-sm-6><tags-input ng-model=servicetags display-property=name key-property=_id add-from-autocomplete-only=true template=tag-template1 placeholder="search tests"><auto-complete source=searchTest($query) template=auto-template1></auto-complete></tags-input><sup ng-if=!display.services.length style=color:red;>No test present in master</sup></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Synonyms</label><div class=col-sm-6><tags-input ng-model=aliasTag add-from-autocomplete-only=false replace-spaces-with-dashes=false placeholder="add synonyms" add-on-comma=true add-on-blur=true add-on-paste=true><auto-complete min-length=1 template=my-custom-template></auto-complete></tags-input></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Page content</label><div class=col-sm-9><form method=post><textarea msd-elastic ui-tinymce=tinymceOptions ng-model=display.servicesinfo.description></textarea></form></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Related Tests<p><small>(To read)</small></p></label><div class=col-sm-6><tags-input ng-model=relatedservicesTags display-property=name key-property=_id add-from-autocomplete-only=true template=tag-template1 placeholder="search tests"><auto-complete source=searchTest($query) template=auto-template1></auto-complete></tags-input><sup ng-if=!display.services.length style=color:red;>No test present in master</sup></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled="serviceinfoForm.$invalid || !display.servicesinfo.pagetype">Save</button></div></div></div></div></form><script type=text/ng-template id=tag-template1><div>{{data.name}}</div></script><script type=text/ng-template id=auto-template1><div>{{data.name}}</div></script><script type=text/ng-template id=auto-template1><div>{{data.name}}</div></script><script type=text/ng-template id=my-custom-template><div class="right-panel"> <h1 style=" font-size: 15px!important "> {{name}} </h1> </div></script>'),e.put("partials/servicerequest/servicerequest-include.html",'<div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !data.area_id._id }"><span class=input-group-addon><strong>Area</strong></span><select name=area ng-options="area as area.area_id.name for area in AreaList track by area._id" ng-model=temparea class=form-control ng-change=SelectArea(temparea)><option value>--Select area--</option></select></div></div></div><div class=row><div class=col-md-6 ng-if=data.area_id._id><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !data.fromdate }"><span class=input-group-addon><strong>From Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=data.fromdate is-open=datePickerPopup.dp_fd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_fd\')" readonly ng-change="data.todate = data.fromdate;getWorkingHours();"> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=row><div class=col-sm-12><div class=table-responsive ng-if="data.fromdate && orderList"><table class="table table-striped table-bordered table-hover"><tbody><tr><td><table class="table table-striped table-bordered table-hover"><tr ng-repeat="slottime in temp.timeSlots"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td ng-if="slottime.time == slot.time" ng-repeat="slot in slots"><span ng-if="slottime.time == slot.time" ng-value="slotdaylength = slot[lowerfromday]"><span ng-repeat="l in returnArray track by $index"><button type=button ng-if="l.time == slot.time" class="btn btn-sm" ng-class="(l.orderexist)?\'btn-default\':\'btn-success\'" ng-click=openBookAppointment(slot,l);><span ng-if=!l.orderexist>Available</span> <span ng-if=l.orderexist>Booked</span></button></span></span></td></tr></table></td></tr></tbody></table></div></div></div><div class="modal fade" id=AddPatientObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=clearPatient() class="btn btn-default pull-right">Cancel</button> <button ng-show=!patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="(patientFrm.$invalid || !patient.demography.addresses.length)"><span>Save and continue</span></button> <button ng-show=patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="patientFrm.$invalid || !patient.demography.addresses.length"><span>Update and continue</span></button><h4 class=modal-title id=myModalLabel ng-show=!patient._id>Add Patient</h4><h4 class=modal-title id=myModalLabel ng-show=patient._id>Update Patient</h4></div><div class=modal-body><div ng-form=patientFrm><div class=panel-body ng-controller=clientController><div ng-include src="\'partials/client/client-include-add.html\'" data-ng-init=edit()></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=AddressObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAddAddress() class="btn btn-default pull-right">Close</button><h4 class=modal-title id=myModalLabel>Add/Select address</h4></div><div class=modal-body><div class="panel panel-default"><div class=panel-heading>Add Address <button type=button style=margin-right:5px; ng-click=addAddress() class="btn btn-xs btn-primary pull-right" ng-disabled=!addressFrmValid><span>Add address</span></button></div><div class=panel-body><div ng-form=addressFrm><span ng-hide=true>{{addressFrmValid = addressFrm.$valid}}</span><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.title.$invalid }"><span class=input-group-addon><strong>Address Type</strong></span><select name=title ng-model=addaddress.title class=form-control ng-options="title.displayname as title.displayname for title in AddressType.childs" required><option value>--Select Address Type--</option></select></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.pincode.$invalid }"><span class=input-group-addon><strong>Pincode</strong></span><select name=pincode ng-model=addaddress.pincode class=form-control ng-options="pincode as pincode for pincode in pincodes" required><option value>--Select Pincode--</option></select></div></div></div><div class=row><div class=col-md-12 style=padding-right:5px; ng-class="{ \'has-error\':addressFrm.addresslineone.$invalid }"><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>Address</strong></span> <textarea msd-elastic row=3 type=text autofocus placeholder=Address name=addresslineone class="form-control input-sm" ng-model=addaddress.address required></textarea></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.landmark.$invalid }"><span class=input-group-addon><strong>Landmark</strong></span> <input name=landmark type=text placeholder=Landmark class=form-control ng-model=addaddress.landmark required></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.sublocation.$invalid }"><span class=input-group-addon><strong>Sub location</strong></span><select name=sublocation ng-model=addaddress.sublocation_id class=form-control ng-options="sublocation as sublocation.name for sublocation in subLocationList track by sublocation._id" ng-change=changesublocation()><option value>--Select Sub location--</option></select></div></div></div></div></div></div><div class="panel panel-default" ng-if=patient.demography.addresses.length><div class=panel-heading>Select service delivery address</div><div class=panel-body><div class=row><div class="col-md-6 form-group" ng-repeat="tempaddress in patient.demography.addresses track by $index" style="border: 1px solid #999;"><span class=row><div class=col-md-1 style="word-wrap: break-word;"><label class=radio-inline><input type=radio name=addradio value=true ng-model=tempaddress.servicedeliveryaddress ng-click=checkServiceAddress(tempaddress,$index)></label></div><div class=col-md-9 style="word-wrap: break-word;"><span><label class="label label-default">{{tempaddress.title}}</label><br><span ng-if=tempaddress.address><span class=angular-with-newlines>{{tempaddress.address}}</span></span><br><strong ng-if=tempaddress.area_id>{{tempaddress.area_id.name}},</strong><br><strong ng-if=tempaddress.sublocation_id>{{tempaddress.sublocation_id.name}},</strong><br><span ng-if=tempaddress.landmark><strong>{{tempaddress.landmark}},</strong></span><br><span ng-if=tempaddress.city_id>{{tempaddress.city_id.name}}</span> <span ng-if=tempaddress.pincode>- {{tempaddress.pincode}}</span></span></div><div class=col-md-1 style="word-wrap: break-word;"><i class="glyphicon glyphicon-pencil pointer" ng-click=editAddress(tempaddress,$index)></i>&nbsp;&nbsp;&nbsp;<br></div><div class=col-md-1 style="word-wrap: break-word;"><i class="glyphicon glyphicon-remove pointer" ng-click=deleteAddress(tempaddress,$index)></i>&nbsp;&nbsp;&nbsp;</div></span></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=bookAppointmentObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none; overflow: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAppointment() class="btn btn-default pull-right">Cancel</button><button ng-show="whenServiceRequest && !call._id" style="margin-right:5px;margin-top: -7px;" type=button class="btn btn-default pull-right" ng-disabled="!(callFrm.$valid && data.patient._id && data.services.length && data.fromdate && data.fromtime)" ng-click=openPreview()><span ng-hide=call._id>Save call and request</span></button><h4 class=modal-title id=myModalLabel>Book Appointment</h4></div><div class=modal-body><div class=row><div class=col-sm-12><div class=row ng-if=data.fromtime><div class=col-sm-10 ng-hide=data._id><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !patient._id }"><span class=input-group-addon><strong>Existing Client</strong></span> <input id=search-input type=text ng-model=searchObj.searchText ng-model-options="{ debounce: 300 }" placeholder="Search by name, mobile no, membership no." class=form-control><table class="table table-responsive searchtable"><tbody><tr ng-repeat="Patient in PatientList"><td ng-click=SelectPatient(Patient) class=pointer>{{Patient.demography.fullname}} <span ng-show=Patient.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span>&nbsp; <span>{{Patient.demography.age}}, {{Patient.demography.gender}}, {{Patient.demography.servicedeliveryaddress.branch_id.name}}</span> <span><i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span></td></tr></tbody></table><span class="input-group-addon pointer" ng-click=SearchPatientByName()><i class="glyphicon glyphicon-search"></i> Search</span></div></div><div class=col-sm-2 ng-hide=data._id><button type=button class="btn btn-sm btn-primary" ng-click=newPatient()><i class="glyphicon glyphicon-plus"></i> New Client</button></div></div><div class="row form-group" ng-show=temppatient._id><div class=col-md-6><p><span ng-if=temppatient.demography.fullname><i class="glyphicon glyphicon-user"></i> <strong>{{temppatient.demography.fullname}}</strong></span> <span ng-show=temppatient.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span> <span ng-if=temppatient.demography.age><strong>{{temppatient.demography.age}} &nbsp;</strong></span> <span ng-if=temppatient.demography.gender><strong>{{temppatient.demography.gender}}</strong></span> <button ng-hide=data._id type=button class="btn btn-xs btn-default" ng-click=editPatient(temppatient)><i class="glyphicon glyphicon-pencil"></i></button></p><p ng-if=temppatient.demography.mobilenumber><span><i class="glyphicon glyphicon-phone"></i></span> <strong>{{temppatient.demography.mobilenumber}}</strong></p><p><strong ng-if=temppatient.demography.servicedeliveryaddress.branch_id.name>{{temppatient.demography.servicedeliveryaddress.branch_id.name}}</strong></p></div><div class=col-md-3><p><label class="label label-default">Service delivery address</label><br><span style="word-wrap: break-word;" ng-repeat="tempaddress in temppatient.demography.addresses track by $index" ng-if="tempaddress.servicedeliveryaddress == \'true\'"><label class="label label-default">{{tempaddress.title}}</label><br><span ng-if=tempaddress.address>{{tempaddress.address}}</span><br><strong ng-if=tempaddress.area_id>{{tempaddress.area_id.name}},</strong><br><strong ng-if=tempaddress.sublocation_id>{{tempaddress.sublocation_id.name}},</strong><br><span ng-if=tempaddress.landmark><strong>{{tempaddress.landmark}},</strong></span><br><span ng-if=tempaddress.city_id>{{tempaddress.city_id.name}}</span> <span ng-if=tempaddress.pincode>- {{tempaddress.pincode}}</span></span></p></div></div><div class=row><div class=col-md-12 ng-show="patient._id && !patient.demography.deceased"><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>Remarks</strong></span> <textarea msd-elastic name=comment ng-model=data.comment placeholder="Enter remarks" class="form-control input-sm"></textarea></div></div></div><div class=row><div class=col-md-6><div class=row ng-show="patient._id && !patient.demography.deceased"><div ng-hide=data._id><div class=col-sm-12><div class="form-group input-group input-group-sm" ng-init="type=\'service\'"><label class=radio-inline><input type=radio name=typeradio value=service ng-model=type>Services/Tests</label></div><div ng-show="type==\'service\' || type==\'lab\'" class="form-group input-group input-group-sm typeaheadwidth"><span class=input-group-addon><strong>Service/Test</strong></span><script type=text/ng-template id=customService.html><div > <span style="white-space: normal;" > <div class="typeahead-available-text"> <div bind-html-unsafe="match.label | typeaheadHighlight:query"></div> <div>Rs. {{match.model.price.mrp}}</div> <div ng-if="match.model.alias.length > 0">also known as : </div> <div style="display: inline-block; position:relative" ng-repeat="a in match.model.alias"> {{a}} </div> </div> </span> </div></script><input type=text ng-model=searchObj.servicename placeholder="Service Name" typeahead="service as service.name for service in getAllServices($viewValue,searchObj,type)" typeahead-loading=loadingStaffs class="form-control input-sm" typeahead-template-url=customService.html typeahead-on-select=SelectService(searchObj.servicename)> <i ng-show=loadingStaffs class="glyphicon glyphicon-refresh"></i></div></div></div></div><div class=row ng-show="data.services.length > 0"><div class=col-sm-12><div class="panel panel-default nopadding"><div class=panel-heading>Services</div><table class="table table-striped table-bordered table-hover"><thead><tr><th>Name</th><th>Amount</th><th ng-hide=data._id></th></tr></thead><tbody><tr ng-repeat="service in data.services track by $index"><td class=pointer><span>{{service.service_id.name}}</span></td><td>{{service.service_id.price.mrp}}</td><td ng-hide=data._id><a ng-click=showDeleteModel($index)><i class="glyphicon glyphicon-remove"></i></a></td></tr></tbody></table></div></div></div></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=myModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header></div><div class=modal-body><div class=row><div class=col-lg-12><h3>Are you sure you want to delete ?</h3><div class=row><div class=col-md-12><div class="col pull-right"><a data-dismiss=modal ng-click=deleteService() class="btn btn-default">Yes</a> <a data-dismiss=modal ng-click=closedeletemodal() class="btn btn-primary">No</a></div></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=mapObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeMap() class="btn btn-default pull-right">Close</button><h4 class=modal-title id=myModalLabel>Map</h4></div><div class=modal-body><map zoom=11 center="[40.74, -74.18]"><marker position="[40.73, -74.19]" title="drag me" draggable></marker></map></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=mapAddressObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeMapAddress() class="btn btn-default pull-right">Close</button><h4 class=modal-title id=myModalLabel>Map</h4></div><div class=modal-body><map zoom=11 center="[40.74, -74.18]"><marker position="[40.73, -74.19]" title="drag me" draggable></marker></map></div><div class=modal-footer></div></div></div></div>'),e.put("partials/servicerequest/servicerequest.html",'<div class="row panelmainDiv"><div class="col-sm-12 panelheaderDiv"><div class=pull-right></div><div class=pull-right style=margin-right:5px;><input type=text ng-model-options="{ debounce: 300 }" ng-model=searchObj.searchText class="form-control input-sm" placeholder=Search ng-change=getUserPatients()></div><h4>Service Request</h4></div></div><div class=row><div class="col-md-12 panelbodyDiv" data-ng-init=getUserPatients()><div class="panel panel-default"><div class=panel-body><div class=row><div class=col-md-4><div class="input-group form-group"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObj.searchDate is-open=datePickerPopup.dp_searchDate close-text=Close ng-change=getUserPatients() ng-click="openDatePicker($event,\'dp_searchDate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span> <span class=input-group-btn><button class="btn btn-default btn-sm" ng-click=getUserPatients() type=button><i class="glyphicon glyphicon-search"></i></button></span></div></div><div class=col-md-8><div class=form-group><button class="btn btn-default btn-sm" ng-click=previousDate() type=button><i class="glyphicon glyphicon-chevron-left" style=color:#555></i></button> <button class="btn btn-primary btn-sm" ng-click=todayDate() type=button>Today</button> <button class="btn btn-default btn-sm" ng-click=nextDate() type=button><i class="glyphicon glyphicon-chevron-right" style=color:#555></i></button></div></div></div><div class=row><div class=col-md-12 ng-show="myRequestsList.length > 0"><table class="table table-striped table-bordered table-hover"><thead><tr><th>Patient Name</th><th>Services</th><th>Bill (Rs.)</th><th>Paid (Rs.)</th><th>Balance (Rs.)</th><th>Created by</th><th>Print</th></tr></thead><tbody><tr ng-repeat="myRequest in myRequestsList"><td class=col-md-4><span>{{myRequest.patient_id.demography.name}}</span><span ng-show="myRequest.patient_id.type == \'member\' && myRequest.patient_id.membershipdisplay"><span class="label label-success">{{myRequest.patient_id.membershipdisplay}}</span> &nbsp;</span> <span ng-show="myRequest.patient_id.type == \'nonmember\' && myRequest.patient_id.membershipdisplay"><span class="label label-danger">{{myRequest.patient_id.membershipdisplay}}</span>&nbsp;</span> <span ng-show="myRequest.patient_id.type == \'nonmember\' && !myRequest.patient_id.membershipdisplay"><span class="label label-default">Non member &nbsp;</span></span> <span ng-show=myRequest.patient_id.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span></td><td class=col-md-3 style="height: auto;max-height: 135px;display: block;width: auto;overflow-y: auto;"><span ng-repeat="service in myRequest.services"><p>- {{service.service_id.name}} <span ng-if=service.package_id>({{service.package_id.name}})</span> [{{service.startdate | date: \'dd/MM/yy @ hh:mm a\'}}]</p></span></td><td class=col-md-1>{{myRequest.totalbillamount}}</td><td class=col-md-1>{{myRequest.totalreceiptamount}}</td><td class=col-md-1>{{myRequest.totalbillamount - myRequest.totalreceiptamount}}</td><td class=col-md-1><span>{{myRequest.createdby.profile.firstname}}&nbsp;{{myRequest.createdby.profile.lastname}} {{myRequest.datetime | date: \' @ hh:mm a\'}}</span></td><td class=col-md-1><button class="btn btn-primary btn-sm" ng-click=receiptRePrint(myRequest._id) type=button ng-show="myRequest.totalbillamount && myRequest.totalreceiptamount"><i class="glyphicon glyphicon-print"></i></button></td></tr></tbody></table><pagination class="pull-right pagination-sm" style=margin-right:5px; total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="isPaging=true;getUserPatients()"></pagination></div></div></div></div></div></div>'),e.put("partials/servicerequest/servicerequestadd.html",'<div id=app-frame><div class="row panelmainDiv"><div class="col-sm-12 panelheaderDiv"><div class="pull-right input-group input-group-sm" style=margin-right:5px;><button type=button class="btn btn-default btn-sm pull-right" ng-click=cancelRequest()>Cancel</button><button ng-if=!data._id ng-disabled="!(patient._id && data.services.length && data.fromdate && data.fromtime && data.todate && data.totime)" ng-click=saveRequest() class="btn btn-default btn-sm pull-right" style=margin-right:5px;>Save</button></div><h4 ng-if=!data._id>New Service Request</h4><h4 ng-if=data._id>View Service Request</h4></div><div class="col-sm-12 panelbodyDiv"><div class=row><div class=col-sm-12><div class="panel panel-default"><div class=panel-body><div><div ng-include src="\'partials/servicerequest/servicerequest-include.html\'"></div></div></div></div></div></div></div></div></div>'),e.put("partials/servicerequest/servicerequestpatient-include.html",'<div class="modal fade" id=AddPatientObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=clearPatient() class="btn btn-default pull-right">Cancel</button> <button ng-show=!patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled=patientFrm.$invalid><span>Save and continue</span></button> <button ng-show=patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled=patientFrm.$invalid><span>Update and continue</span></button><h4 class=modal-title id=myModalLabel ng-show=!patient._id>Add Patient</h4><h4 class=modal-title id=myModalLabel ng-show=patient._id>Update Patient</h4></div><div class=modal-body><form name=patientFrm><div class=panel-body ng-controller=patientsController><div ng-include src="\'partials/patient/patient-include-add.html\'" data-ng-init=edit()></div></div></form></div><div class=modal-footer></div></div></div></div>'),e.put("partials/servicerequest/services-include-add.html",'<div class="modal-dialog modal-md"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAddService() class="btn btn-sm btn-default pull-right">Cancel</button><button style="margin-right:5px;margin-top: -7px;" ng-click=addService() ng-disabled="!((service_sm.service_id && service_sm.repeatdetails.occurrence && service_sm.repeatdetails.occurrenceperiod && service_sm.startdate && service_sm.repeatdetails.frequency==\'daily\') || (service_sm.service_id && service_sm.repeatdetails.occurrence && service_sm.repeatdetails.occurrenceperiod && service_sm.startdate && service_sm.repeatdetails.frequency && (service_sm.repeatdetails.period || (service_sm.repeatdetails.days[\'mon\'] || service_sm.repeatdetails.days[\'tue\'] || service_sm.repeatdetails.days[\'wed\'] || service_sm.repeatdetails.days[\'thu\'] || service_sm.repeatdetails.days[\'fri\'] || service_sm.repeatdetails.days[\'sat\'] || service_sm.repeatdetails.days[\'sun\']) ) ))" class="btn btn-sm btn-primary pull-right" ng-show=showAddBtn>Add</button> <button style="margin-right:5px;margin-top: -7px;" ng-click=updateService() ng-disabled="!((service_sm.service_id && service_sm.repeatdetails.occurrence && service_sm.repeatdetails.occurrenceperiod && service_sm.startdate && service_sm.repeatdetails.frequency==\'daily\') || (service_sm.service_id && service_sm.repeatdetails.occurrence && service_sm.repeatdetails.occurrenceperiod && service_sm.startdate && service_sm.repeatdetails.frequency && (service_sm.repeatdetails.period || (service_sm.repeatdetails.days[\'mon\'] || service_sm.repeatdetails.days[\'tue\'] || service_sm.repeatdetails.days[\'wed\'] || service_sm.repeatdetails.days[\'thu\'] || service_sm.repeatdetails.days[\'fri\'] || service_sm.repeatdetails.days[\'sat\'] || service_sm.repeatdetails.days[\'sun\']) ) ))" class="btn btn-sm btn-primary pull-right" ng-show=showUpdateBtn>Update</button><h4 class=modal-title id=myModalLabel>{{service_sm.service_id.name}}</h4></div><div class=modal-body><div class=row><div class="col-sm-8 col-md-offset-2"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.primary_id }" ng-if="service_sm.service_id.type==\'membership\' && service_sm.service_id.subtype==\'secondary\'"><span class=input-group-addon><strong>Select primary member</strong></span> <input id=search-input type=text ng-model=data.primarymembername ng-model-options="{ debounce: 300 }" ng-change=SearchMemberByName() placeholder=Search class=form-control><table class="table table-responsive searchtable"><tbody><tr ng-repeat="Patient in MemberList"><td ng-click=SelectPrimaryMember(Patient) class=pointer>{{Patient.demography.name}} <span><label ng-class="(Patient.type==\'member\')?\'label-success\':\'label-default\'" class=label>{{Patient.type}}</label></span>&nbsp; <span>{{Patient.demography.age}}, {{Patient.demography.gender}}</span> <span><i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span></td></tr></tbody></table></div><div class="form-group input-group input-group-sm" ng-if="service_sm.service_id.type==\'membership\' && service_sm.service_id.subtype==\'secondary\'"><span class=input-group-addon><strong>Relation</strong></span><select name=relation ng-options="relation.code as relation.displayname for relation in relationship.optionlist" ng-model=service_sm.relationwithprimary class=form-control><option value>--Select Relation--</option></select></div><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.startdate }"><span class=input-group-addon ng-if=!hideChk><strong>Requested Service Date</strong></span> <span class=input-group-addon ng-if=hideChk><strong>Membership start Date</strong></span><input type=text class="form-control input-sm" datepicker-popup ng-model=service_sm.startdate is-open=datePickerPopup.dp_service_sd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_service_sd\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_service_sd\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !service_sm.startdate }" ng-if=!hideChk><span class=input-group-addon><strong>Requested Service Time</strong></span><div class=form-control style="float:none !important;align:center;"><timepicker ng-model=service_sm.startdate hour-step=hsteps minute-step=msteps show-meridian=true></timepicker></div></div></div></div><div class=row ng-if=!hideChk><div class="col-md-8 col-md-offset-2"><div style=padding-top:0px;padding-bottom:0px;margin-top:-15px;margin-bottom:0px;><div class=checkbox><label><input type=checkbox ng-model=temp.oneoff ng-click=chkOneOff()> One-Off</label></div></div></div></div><div class=row ng-hide=temp.oneoff><div class="col-md-8 col-md-offset-2" ng-hide="service_sm.service_id.type == \'membership\'"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.repeatdetails.frequency }"><span class=input-group-addon><strong>Frequency</strong></span><select ng-model=service_sm.repeatdetails.frequency class=form-control ng-change=changeFrequency() ng-disabled=temp.oneoff><option value>--Select Frequency--</option><option value=daily>Daily</option><option value=once>Once</option><option value=twice>Twice</option><option value=weekly>Weekly</option></select></div></div></div><div class=row ng-show=showPeriod()><div class="col-md-8 col-md-offset-2" ng-hide="service_sm.service_id.type == \'membership\'"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.repeatdetails.period }"><span class=input-group-addon><strong>Period</strong></span><select ng-model=service_sm.repeatdetails.period class=form-control ng-change=changePeriod()><option value>--Period--</option><option value=yearly>yearly</option><option value=quaterly>quaterly</option><option value=halfyearly>halfyearly</option><option value=monthly>monthly</option></select></div></div></div><div class=row ng-show=showWeeks()><div class="col-md-8 col-md-offset-2"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !(service_sm.repeatdetails.days.mon || service_sm.repeatdetails.days.tue || service_sm.repeatdetails.days.wed || service_sm.repeatdetails.days.thu || service_sm.repeatdetails.days.fri || service_sm.repeatdetails.days.sat || service_sm.repeatdetails.days.sun) }"><div class=input-group-addon><strong>Days Of The Week</strong></div><div class=form-control><input type=checkbox ng-model="service_sm.repeatdetails.days[\'mon\']"> Mo <input type=checkbox ng-model="service_sm.repeatdetails.days[\'tue\']"> Tu <input type=checkbox ng-model="service_sm.repeatdetails.days[\'wed\']"> We <input type=checkbox ng-model="service_sm.repeatdetails.days[\'thu\']"> Th <input type=checkbox ng-model="service_sm.repeatdetails.days[\'fri\']"> Fr <input type=checkbox ng-model="service_sm.repeatdetails.days[\'sat\']"> Sa <input type=checkbox ng-model="service_sm.repeatdetails.days[\'sun\']"> Su</div></div></div></div><div class=row ng-show=service_sm.repeatdetails.frequency><div class="col-md-4 col-md-offset-2" ng-hide=temp.oneoff><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.repeatdetails.occurrence }" ng-hide="service_sm.service_id.type == \'membership\'"><span class=input-group-addon><strong>For</strong></span> <input type=text ng-model=service_sm.repeatdetails.occurrence placeholder="Enter Number" class=form-control ng-change=changeOccurrence() ng-disabled=temp.oneoff></div></div><div class=col-md-4 ng-hide=temp.oneoff><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.repeatdetails.occurrenceperiod }" ng-hide="service_sm.service_id.type == \'membership\'"><select ng-model=service_sm.repeatdetails.occurrenceperiod class=form-control ng-disabled=temp.oneoff><option value>--Period--</option><option value=day ng-hide=temp.hideDay>Day</option><option value=week ng-hide=temp.hideWeek>Week</option><option value=month>Month</option><option value=year>Year</option></select></div></div></div></div><div class=modal-footer></div></div></div>'),e.put("partials/scheduler/scheduler.html",'<div class=panelheaderDiv><h4>Scheduler</h4></div><div class="panel panel-default"><div class=panel-body><table class="table table-bordered table-condensed" style=background-color:white><tbody><tr><td>Time</td><td>Staffs</td></tr><tr ng-repeat="tasktime in users"><td>{{tasktime.time}}</td><td><span ng-repeat="event in tasktime.events"><button type=button class=btn ng-class="(event.status==\'success\')?\'btn-success\':(event.status==\'warning\')?\'btn-warning\':(event.status==\'danger\')?\'btn-danger\':\'btn-default\'" ng-click=eventInfo(event)>{{event.staff_id.name}}</button>&nbsp;&nbsp;</span></td></tr></tbody></table><div class=col-lg-12><span>&nbsp;</span></div><div class=col-lg-12><center><span class="label label-success pointer">&nbsp;&nbsp;</span>Completed&nbsp;&nbsp;&nbsp;&nbsp; <span class="label label-danger pointer">&nbsp;&nbsp;</span>Accepted&nbsp;&nbsp;&nbsp;&nbsp; <span class="label label-warning pointer">&nbsp;&nbsp;</span>Pending&nbsp;&nbsp;&nbsp;&nbsp;</center></div><div class=col-lg-12><span>&nbsp;</span></div></div></div><div class="modal fade" id=eventObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button ng-click=cancelObjectView() class="btn btn-default btn-sm pull-right">Cancel</button><h4 class=modal-title id=myModalLabel><span>Info</span></h4></div><div class=modal-body><table class="table table-bordered" style="margin-top: 10px"><tbody><tr class=active><td><b>Client</b></td></tr><tr><td>{{event.user_id.name}}</td></tr><tr><td>{{event.user_id.address}}</td></tr><tr><td>{{event.user_id.mobilenumber}}</td></tr></tbody></table><table class="table table-bordered" style="margin-top: 10px"><tbody><tr class=active><td><b>Services</b></td><td><b>Amount</b></td></tr><tr ng-repeat="service in event.services"><td>{{service.name}}</td><td><span class="fa fa-inr"></span>&nbsp;{{service.price}}</td></tr></tbody></table><table class="table table-bordered" style="margin-top: 10px"><tbody><tr class=active><td><b>Staff</b></td></tr><tr><td>{{event.staff_id.name}}</td></tr><tr><td>{{event.staff_id.mobilenumber}}</td></tr></tbody></table></div></div></div></div>'),e.put("partials/sublocation/sublocation.html",'<div><div class="col-lg-8 col-md-8 col-sm-8 col-xs-6" style=padding-left:0px><h2>Sub location <small><sup><a href=#/main/sublocation/new class="btn btn-link btn-xs">New</a> <a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><select class="form-control input-sm" id=selectCity name=area ng-model=majorAreaview ng-options="majorArea as majorArea.name for majorArea in display.majorArea | orderBy:\'name\' track by majorArea._id" style=margin-top:25px ng-change="paging = {};paging.currentPage = 1;paging.itemPerPage = 20;get(majorAreaview)"><option value selected>---Select major area---</option></select></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=search.areasearch placeholder=Search style=margin-top:25px ng-change="paging = {};paging.currentPage = 1;paging.itemPerPage = 20;get(majorAreaview)"></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th class="col-lg-1 col-md-1 col-sm-1 col-xs-1">No</th><th class="col-lg-5 col-md-5 col-sm-5 col-xs-5">Name</th><th class="col-lg-6 col-md-6 col-sm-6 col-xs-6">Description</th></tr></thead><tbody><tr ng-repeat="area in sublocations" ng-click=edit(area._id)><td>{{$index+1}}</td><td>{{area.name}}</td><td>{{area.description}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get(majorAreaview)></pagination></div></div><ng-import type=sublocation></ng-import>'),e.put("partials/sublocation/sublocation.object.html",'<div><h2>Sub location<small><sup><a href=#/main/sublocation class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=sublocationForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{ \'has-error\': sublocationForm.city.$invalid }"><label for=inputCity class="col-sm-offset-1 col-sm-2 control-label">City</label><div class=col-sm-6><select name=city class=form-control ng-model=sublocation.city_id ng-change=setArea(sublocation.city_id) ng-options="city as city.name for city in cities | orderBy:\'name\' track by city._id" required></select></div></div><div class=form-group ng-class="{ \'has-error\': sublocationForm.majorlocation.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Area</label><div class=col-sm-6><select name=majorlocation class=form-control ng-model=area ng-options="areaObj as areaObj.name for areaObj in filteredAreas | orderBy:\'name\' track by areaObj._id" ng-change=getPincode() required></select></div></div><div class=form-group ng-class="{ \'has-error\': sublocationForm.pincode.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Pincode</label><div class=col-sm-6><select name=pincode class=form-control ng-model=sublocation.pincode ng-options="pincode as pincode for pincode in pincodeList | orderBy:\'toString()\'" required></select></div></div><div class=form-group ng-class="{ \'has-error\': sublocationForm.subname.$invalid }"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input type=text name=subname class=form-control ng-model=sublocation.name required></div></div><div class=form-group><label for=inputSize class="col-sm-offset-1 col-sm-2 control-label">Description</label><div class=col-sm-6><textarea msd-elastic type=text class=form-control name=description ng-model=sublocation.description></textarea></div></div><div class=form-group ng-class="{ \'has-error\': sublocationForm.lat.$invalid || sublocationForm.Longitude.$invalid }"><label for=inputType class="col-sm-offset-1 col-sm-2 control-label">Latitude / Longitude</label><div class=col-sm-2><input type=number id=Latitude class=form-control name=lat placeholder=Latitude ng-model=sublocation.coordinates.lat min=0 required></div><div class=col-sm-2><input type=number id=Longitude class=form-control name=Longitude placeholder=Longitude ng-model=sublocation.coordinates.long min=0 required></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=sublocationForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/specialneed/specialneed.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Special Need<small><sup><a href=#/main/specialneed/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=search placeholder=Search style=margin-top:25px></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th class="col-lg-1 col-md-1 col-sm-1 col-xs-1" data-field="City Name">No</th><th class="col-lg-5 col-md-5 col-sm-5 col-xs-5" data-field="City Name">Name</th><th class="col-lg-6 col-md-6 col-sm-6 col-xs-6" data-field="City Code">description</th></tr></thead><tbody><tr ng-repeat="specialneed in display.specialneeds | filter:search" ng-click=edit(specialneed._id)><td>{{$index+1}}</td><td>{{specialneed.name}}</td><td>{{specialneed.description}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div>'),e.put("partials/specialneed/specialneed.object.html",'<div><h2>Special Need<small><sup><a href=#/main/specialneed class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=specailneedForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{ \'has-error\': specailneedForm.name.$invalid }"><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-8><input type=text id=inputName class=form-control name=name ng-model=specailneedObj.name required></div></div><div class=form-group ng-class="{ \'has-error\': specailneedForm.Description.$invalid }"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Description</label><div class=col-sm-8><textarea msd-elastic type=text id=inputName class=form-control name=Description ng-model=specailneedObj.description required>\n                    </textarea></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=specailneedForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/superarea/superarea.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Super Area <small><sup><a href=#/main/superarea/new class="btn btn-link btn-xs">New</a> <a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm pull-right" placeholder=search style=margin-top:25px ng-model=searchObj.areasearch ng-change=getAreasTypeSA()></div><div class=table-responsive style="word-break: break-word;"><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th width=10%>No</th><th width=35%>Name</th><th width=35%>Major Area</th><th width=20%>City</th></tr></thead><tbody><tr ng-repeat="obj in areas" ng-click=edit(obj._id)><td>{{$index+1}}</td><td>{{obj.name}}</td><td class=orderview><ul style="padding-left: 16px;margin-bottom: 0px;"><li ng-repeat="mjareas in obj.parent_areas">{{mjareas.area_id.name}}{{$last?"":","}}</li></ul></td><td>{{obj.city_id.name}}</td></tr></tbody></table></div><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=getAreasTypeSA()></pagination></div></div>'),e.put("partials/superarea/superarea.object.html",'<div><h2>Super area<small><sup><a ng-click=BackTolist() class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=areasForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{ \'has-error\': areasForm.City.$invalid }"><label for=selectCity class="col-sm-offset-1 col-sm-2 control-label">City</label><div class=col-sm-6><select class=form-control id=selectCity name=City ng-model=areasobj.city_id ng-options="selectedcity as selectedcity.name for selectedcity in cities | orderBy:\'name\' track by selectedcity._id" ng-change=selectCity(areasobj.city_id) required><option value selected>--Select--</option></select></div></div><div class=form-group ng-class="{ \'has-error\': areasForm.name.$invalid }"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input type=text id=inputName class=form-control name=name ng-model=areasobj.name required></div></div><div class=form-group ng-class="{ \'has-error\': !temp.areas.length }"><label for=area class="col-sm-offset-1 col-sm-2 control-label">Major Area</label><div class=col-sm-6><select name=setArea ng-options="selectedarea as selectedarea.name for selectedarea in display.areas | orderBy:\'name\' track by selectedarea._id" ng-model=display.selectedarea class=form-control placeholder=Area ng-change=pushArea(display.selectedarea)><option value selected>--Select--</option></select></div></div><div class=form-group ng-if=temp.areas.length><label class="col-sm-offset-1 col-sm-2 control-label"></label><div class=col-sm-6><div class="alert alert-info" role=alert><span ng-repeat="area in temp.areas"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{area.area_id.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeArea(area,$index)></i></span></span></div></div></div><div class=form-group><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Description</label><div class=col-sm-6><textarea type msd-elastic class=form-control id=inputDescription name=description ng-model=areasobj.description></textarea></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled="areasForm.$invalid || !temp.areas.length">Save</button></div></div></div></div></form>'),e.put("partials/staffavailability/staffavailability.html",'<div><h2><span>Staff Allocation</span></h2></div><div class="panel panel-default"><div class=panel-body><div class=row><div class=col-md-3><div class="input-group form-group"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObj.searchDate is-open=datePickerPopup.dp_searchDate close-text=Close ng-change=getStaffAvailability() ng-click="openDatePicker($event,\'dp_searchDate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span> <span class=input-group-btn><button class="btn btn-default btn-sm" ng-click=getStaffAvailability() type=button><i class="glyphicon glyphicon-search"></i></button></span></div></div><div class=col-md-3><div class=form-group><button class="btn btn-default btn-sm" ng-click=previousDate() type=button><i class="glyphicon glyphicon-chevron-left" style=color:#555></i></button> <button class="btn btn-sm btn-primary" ng-click=todayDate() type=button>Today</button> <button class="btn btn-default btn-sm" ng-click=nextDate() type=button><i class="glyphicon glyphicon-chevron-right" style=color:#555></i></button></div></div><div class=col-md-3><div class=form-group><input name=areatype type=radio value ng-click="searchObj.day=true;searchObj.evening=false;getStaffAvailability()" checked> Morning &nbsp;&nbsp; <input name=areatype type=radio value ng-click="searchObj.day=false;searchObj.evening=true;getStaffAvailability()"> Evening</div></div></div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Area</strong></span><select name=callpartner ng-options="area as area.name for area in areaList | orderBy:\'name\' track by area._id" ng-model=area class="form-control input-sm" placeholder=Area ng-change=pushArea(area)><option value selected>--Select--</option></select></div></div></div><div class=row ng-if=temp.area.length><div class=col-md-12><div class="alert alert-info" role=alert><span ng-repeat="areas in temp.area"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{areas.name}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeArea(areas,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row><div class=col-md-12><div class=form-group ng-if=staffList><tags-input ng-model=temp.selectedPhlebos name=phlebos display-property=name key-property=_id add-from-autocomplete-only=true placeholder="search Phlebo" required replace-spaces-with-dashes=false on-tag-added=changePhlebo($tag) on-tag-removed=changePhlebo($tag)><auto-complete source=searchPhlebo($query) template=auto-template></auto-complete></tags-input></div></div></div><div class=row ng-if=staffList.length style=margin:0px><div class="col-md-12 col-lg-12" style="padding-left: 0px"><div class=table-responsive><table class="table table-bordered table-condensed" style="border:none; height:100px;overflow:auto;"><thead><tr style="background-color: #ccc;"><th><small><b>Phlebo</b></small></th><th ng-repeat="timeObj in orders"><center><div><small><sub><b>{{timeObj.time | waqt}}</b></sub></small></div><div><small><sub style=color:red;><b>{{timeObj.orders}}</b></sub></small></div></center></th></tr></thead><tbody><tr ng-repeat="staff in staffList" style="background-color: #ccc;"><td><small><b>{{staff.profile.name}}</b></small></td><td ng-repeat="timeObj in orders" style="padding: 0;"><center ng-repeat="stafftimeObj in staff.availableTime" ng-if="timeObj.time == stafftimeObj.time" ng-class="{\'label-success\':stafftimeObj.available, \'label-danger\':!stafftimeObj.available}" style="width:100%;height:100%;cursor: pointer;display: inline-block;" ng-click=getOrders(stafftimeObj,staff)><small style="padding: 10px;" ng-if=stafftimeObj.available><sub>Available</sub></small> <small style="padding: 10px;" ng-if=!stafftimeObj.available><div>Booked</div><div ng-if=stafftimeObj.orders.length>Orders - {{stafftimeObj.orders.length}}</div></small></center></td></tr></tbody></table></div></div></div></div></div><script type=text/ng-template id=auto-template><div>{{data.profile.name}}</div></script><div ng-include="\'partials/staffavailability/modal/orderList.modal.html\'"></div><div ng-include="\'partials/staffavailability/modal/bookedOrderList.modal.html\'"></div><div ng-include="\'partials/staffavailability/modal/selectareamessage.modal.html\'"></div>'),e.put("partials/userattendance/userattendance.html",'<div class=row><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style=padding-left:0px><h2>Attendance</h2></div></div><div class="panel panel-default"><div class=panel-body><div class=row><div class="col-lg-4 col-md-4 col-sm-4" ng-if="userinfo.userdata.role != \'providerteamlead\'"><div class="form-group input-group input-group-sm" ng-class="{\'has-error\' : !searchObj.city}"><span class=input-group-addon><strong>City</strong></span><select name=city ng-model=searchObj.city class=form-control ng-options="citie._id as citie.name for citie in cities | orderBy:\'name\'" ng-change=changeCity() required><option value>--Select City--</option></select></div></div><div class="col-md-4 col-lg-4" ng-if="userinfo.userdata.role == \'providerteamlead\'"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>City</strong></span> <input name=City type=text placeholder=City class=form-control disabled ng-model=searchObj.cityname></div></div><div class="col-lg-4 col-md-4 col-sm-4"><div class="input-group form-group" ng-class="{\'has-error\' : !searchObj.fromDate}"><span class=input-group-addon><strong>From Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObj.fromDate is-open=datePickerPopup.dp_Date close-text=Close ng-change=getOrderList() ng-click="openDatePicker($event,\'dp_Date\')" required readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_Date\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-lg-4 col-md-4 col-sm-4"><div class="input-group form-group" ng-class="{\'has-error\' : !searchObj.toDate}"><span class=input-group-addon><strong>To Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObj.toDate is-open=datePickerPopup.dp_searchDate close-text=Close ng-change=getOrderList() ng-click="openDatePicker($event,\'dp_searchDate\')" required readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Area</strong></span><select name=callpartner ng-options="area as area.name for area in areaList | orderBy:\'name\' track by area._id" ng-model=searchObj.area class="form-control input-sm" placeholder=Area ng-change=pushArea(searchObj.area)><option value>--Select--</option></select></div></div></div><div class=row><div class=col-md-12 ng-if=display.area.length><div class="alert alert-info" role=alert><span ng-repeat="areas in display.area"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{areas.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeArea(areas,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row><div class=col-md-6><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Phlebo</strong></span><select name=callpartner ng-options="phlebo as phlebo.name for phlebo in finalData | orderBy:\'name\' track by phlebo.id" ng-model=searchObj.phlebo class="form-control input-sm" placeholder=phlebo ng-change=pushPhlebo(searchObj.phlebo)><option value>--Select--</option></select></div><div class=col-md-12 ng-if=display.phlebo.length><div class="alert alert-info" role=alert><span ng-repeat="phlebos in display.phlebo"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{phlebos.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click="changePhlebo(phlebos,$index,\'rm_phlebo\')"></i></span>&nbsp;&nbsp;</span></div></div></div><div class=col-md-6><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Logistics</strong></span><select name=callpartner ng-options="logis as logis.name for logis in logisticsData | orderBy:\'name\' track by logis.id" ng-model=searchObj.logis class="form-control input-sm" placeholder=Logistics ng-change=pushLogistics(searchObj.logis)><option value>--Select--</option></select></div><div class=col-md-12 ng-if=display.logis.length><div class="alert alert-info" role=alert><span ng-repeat="logis in display.logis"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{logis.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click="changePhlebo(logis,$index,\'rm_logis\')"></i></span>&nbsp;&nbsp;</span></div></div></div></div><div class="modal fade" id=selectCity tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Select City</h4><button ng-click=closeModal() style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class=gantt gantt data=data from-date=searchObj.fromDate to-date=searchObj.toDate headers="[\'month\', \'day\']" headers-formats=headersFormats style="border: 1px solid #ddd;" allow-side-resizing=false column-width="diff>8?90:undefined"><gantt-table></gantt-table><gantt-tooltips></gantt-tooltips></div><div class=footer style=margin-top:25px><div class="pull-left info"><i class="glyphicon glyphicon-stop" style=color:#f77777;></i> <label class=labeldisplay>Not Punched in</label></div><div class="pull-left info"><i class="glyphicon glyphicon-stop" style=color:#77f793;></i> <label class=labeldisplay>Punched in and Punched out</label></div><div class="pull-left info"><i class="glyphicon glyphicon-stop" style=color:#f7f177;></i> <label class=labeldisplay>Only Punched in</label></div></div></div></div>'),e.put("partials/test/test.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Test <small><sup><a href=#/main/test/new class="btn btn-link btn-xs">New</a> <a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2><div class=container style=float:left><span class="label pointer" style="background-color: #D0E9C6; color: black;">Special test</span></div></div></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px;margin-top:5px;><input type=text class="form-control input-sm" ng-model=searchObj.servicename placeholder=Search style=margin-top:25px ng-model-options="{ debounce: 1000 }" ng-change=get()></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>Name</th><th>Sample Type</th><th>Description</th><th>Collection Procedure</th><th>Active/Inactive</th></tr></thead><tbody><tr ng-repeat="test in testList" ng-class="{\'success\' : test.specialservice}"><td ng-click=edit(test._id)>{{$index+1}}</td><td ng-click=edit(test._id)>{{test.name}}</td><td ng-click=edit(test._id)>{{test.sampletype}}</td><td ng-click=edit(test._id)>{{test.description}}</td><td>{{test.method}}</td><td><button type=button ng-show="test._Deleted == true" data-toggle=modal ng-model=activeModal.data ng-click="setActive(\'active\',test)" class="btn btn-danger btn-xs">Activate</button> <button type=button ng-show="test._Deleted == false" ng-model=deactiveModal.data class="btn btn-success btn-xs" ng-click="setActive(\'deactive\',test)">Deactivate</button></td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div><ng-include src="\'partials/partner/test/modal/active.model.html\'"></ng-include><ng-import type=mastertests></ng-import>'),e.put("partials/test/test.object.html",'<div><h2>Test <small><sup><a href=#/main/test class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=departentForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Code</label><div class=col-sm-6><input type=text id=inputName class=form-control name=name ng-model=test.code required></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input type=text id=inputName class=form-control name=name ng-model=test.name required></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-3"><div class=checkbox><label><input type=checkbox ng-model=test.specialservice ng-click=special_test()> <strong>Special test</strong></label></div></div></div><div class=form-group><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Description</label><div class=col-sm-6><textarea msd-elastic type class=form-control id=inputDescription name=description ng-model=test.description></textarea></div></div><div class=form-group><label for=inputType class="col-sm-offset-1 col-sm-2 control-label">Sample Type</label><div class=col-sm-6><select class="form-control input-sm" ng-model=test.sampletype ng-options="tp.displayname as tp.displayname for tp in sampletypes"><option value>-- Sample type --</option></select></div></div><div class=form-group ng-if="test.specialservice == true"><label for=inputMethod class="col-sm-offset-1 col-sm-2 control-label">Collection Procedure</label><div class=col-sm-6><textarea msd-elastic type class=form-control id=inputMethod name=method ng-model=test.method></textarea></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=departentForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/tube/tube.html",'<div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style=padding-left:0px><h2>Tube <small><sup><a href=#/main/tube/new class="btn btn-link btn-xs">New</a> <a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><select class="form-control input-sm" ng-model=search.company ng-change=getSortTubes() ng-options="comp.displayname as comp.displayname for comp in display.company | orderBy:\'displayname\'" name id style=margin-top:25px;><option value>-- All Company --</option></select></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><select class="form-control input-sm" ng-model=search.type name ng-change=getSortTubes() id ng-options="tp.displayname as tp.displayname for tp in display.type | orderBy:\'displayname\'" style=margin-top:25px;>><option value>-- All Type --</option></select></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><select class="form-control input-sm" ng-model=search.size name ng-change=getSortTubes() id ng-options="siz.displayname as siz.displayname for siz in display.size | orderBy:\'displayname\'" style=margin-top:25px><option value>-- All Size--</option></select></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><select class="form-control input-sm" ng-model=search.color name ng-change=getSortTubes() id ng-options="col.displayname as col.displayname for col in display.color | orderBy:\'displayname\'" style=margin-top:25px><option value>-- All Color--</option></select></div></div><div><div style=width:60%;float:right;margin-top:25px;><div class="border row"><div class="border col-sm-3"></div><div class="border col-sm-3"></div><div class="border col-sm-3"></div><div class="border col-sm-3"></div></div></div></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>Company</th><th>Type</th><th>Size</th><th>Color</th></tr></thead><tbody><tr ng-repeat="tube in tubelist" ng-class="{\'danger\' : tube._Deleted }"><td ng-click=edit(tube._id)>{{$index+1}}</td><td ng-click=edit(tube._id)>{{tube.company}}</td><td ng-click=edit(tube._id)>{{tube.type}}</td><td ng-click=edit(tube._id)>{{tube.size}}</td><td ng-click=edit(tube._id)>{{tube.color.name}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div><ng-import type=tubes></ng-import>'),e.put("partials/tube/tube.object.html",'<div><h2>Tube<small><sup><a href=#/main/tube class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=tubeForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{ \'has-error\': tubeForm.Company.$invalid }"><label for=inputCompany class="col-sm-offset-1 col-sm-2 control-label">Company</label><div class=col-sm-6><select class=form-control ng-model=tube.company name=Company required><option value={{company.displayname}} ng-repeat="company in companies | orderBy:\'displayname\'" ng-selected="company.displayname == tube.company">{{company.displayname}}</option></select></div></div><div class=form-group ng-class="{ \'has-error\': tubeForm.type.$invalid }"><label for=inputType class="col-sm-offset-1 col-sm-2 control-label">Type</label><div class=col-sm-6><select class=form-control ng-model=tube.type name=type required><option value={{tubeType.displayname}} ng-repeat="tubeType in types | orderBy:\'displayname\'" ng-selected="tubeType.displayname == tube.type">{{tubeType.displayname}}</option></select></div></div><div class=form-group ng-class="{ \'has-error\': tubeForm.Size.$invalid }"><label for=inputSize class="col-sm-offset-1 col-sm-2 control-label">Size</label><div class=col-sm-6><select class=form-control ng-model=tube.size name=Size required><option value={{size.displayname}} ng-repeat="size in sizes | orderBy:\'displayname\'" ng-selected="size.displayname == tube.size">{{size.displayname}}</option></select></div>(in ml)</div><div class=form-group ng-class="{ \'has-error\': tubeForm.Color.$invalid }"><label for=inputType class="col-sm-offset-1 col-sm-2 control-label">Color</label><div class=col-sm-6><select class=form-control ng-model=tube.color.name name=Color required><option value={{color.displayname}} ng-repeat="color in colors | orderBy:\'displayname\'" ng-selected="color.displayname == tube.color.name">{{color.displayname}}</option></select></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-4"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=tubeForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/usernotification/usernotification.html",'<div><h2>User Notification <small><sup><a href=#/main/dashboard class="btn btn-link btn-xs">close</a></sup></small></h2></div><form class=form-horizontal name=userForm><div class="panel panel-default"><div class=panel-body><div class=row><div class="col-lg-offset-3 col-lg-6"><div class=form-group ng-class="{\'has-error\' : userForm.city.$invalid}"><label class="col-sm-2 control-label">City</label><div class=col-sm-10><select class=form-control id=selectCity name=city ng-model=display.cities._id required ng-change=changeCity() ng-options="city._id as city.name for city in display.cities | orderBy:\'name\' track by city._id"><option value>---Select city---</option></select></div></div></div></div><div class=row ng-if=display.cities._id><div class="col-lg-offset-3 col-lg-6"><div class=form-group><label class="col-sm-2 control-label">Role</label><div class=col-sm-10><select name=callpartner ng-options="role as role.name for role in roleLists | orderBy:\'name\' track by role._id" ng-model=temp.role class="form-control input-sm" placeholder=Area ng-change=pushRole(temp.role)><option value selected>--Select--</option></select></div></div></div><div class=col-md-3 style="margin-top: 12px;"><input type=checkbox ng-click=setAllRoles(display.setAllRoles) ng-model=display.setAllRoles class> Select all</div></div><div class=row ng-if=display.roles.length><div class="col-lg-offset-3 col-lg-6"><div class=form-group><label class="col-sm-2 control-label"></label><div class=col-sm-10><div class="alert alert-info" role=alert><span ng-repeat="role in display.roles"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{role.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeRole(role,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div><div class=row ng-if="display.roles.length && phlebo"><div class="col-lg-offset-3 col-lg-6"><div class=form-group><label class="col-sm-2 control-label">Area</label><div class=col-sm-10><select name=callphlebo ng-options="area as area.name for area in areas | orderBy:\'name\' track by area._id" ng-model=temp.area class="form-control input-sm" placeholder=Area ng-change=pushArea(temp.area)><option value selected>--Select--</option></select></div></div></div><div class=col-md-3 style="margin-top: 12px;"><input type=checkbox ng-click=setAllAreas(display.setAllAreas) ng-model=display.setAllAreas class> Select all</div></div><div class=row ng-if=display.areas.length><div class="col-lg-offset-3 col-lg-6"><div class=form-group><label class="col-sm-2 control-label"></label><div class=col-sm-10><div class="alert alert-info" role=alert><span ng-repeat="area in display.areas"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{area.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeArea(area,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div><div class=row ng-if=display.roles.length><div class="col-lg-offset-3 col-lg-6"><div class=form-group><label style="margin-top: 9px;" class="col-sm-2 control-label">User</label><div class=col-sm-10><tags-input class=taginput ng-model=display.users name=users display-property=name key-property=_id add-from-autocomplete-only=true placeholder="search users" required replace-spaces-with-dashes=false on-tag-added=changeUser($tag) on-tag-removed=changeUser($tag) template=tag-template><auto-complete source=searchUser($query) template=auto-template></auto-complete></tags-input></div></div></div><div class=col-md-3 style="margin-top: 12px;"><input type=checkbox ng-click=setAllUsers(display.setAllUsers) ng-model=display.setAllUsers class> Select all</div></div><div class=row ng-if="display.users.length && display.roles.length"><div class="col-lg-offset-3 col-lg-6"><div class=form-group ng-class="{\'has-error\' : userForm.noti.$invalid}"><label style=padding-left:0px; class="col-sm-2 control-label">Notification from</label><div class=col-sm-10><select class="form-control input-sm" id=notify name=noti ng-model=notification required ng-change=selectNotiy(notification)><option value>---Select notification---</option><option value="test 1">test 1</option><option value="test 2">test 2</option></select></div></div></div></div><div class=row ng-if=tempNote><div class="col-md-offset-3 col-md-6"><div class=form-group><label class="col-sm-2 control-label">Message</label><div class=col-sm-10><textarea style=height:100px; msd-elastic type=text name placeholder="Enter your message here" ng-model=message class=form-control></textarea></div></div></div></div><div class="col-md-offset-4 col-md-6"><button name=send class="btn btn-primary" type=button ng-click=send() ng-disabled=userForm.$invalid>Send Message</button>&nbsp;&nbsp;&nbsp; <input name=reset class="btn btn-primary" type=reset ng-click=reset()></div></div></div></form><div class="modal fade" id=msgsent tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Message Sent</h4><button ng-click=msgSent() style=width:130px class="btn btn-primary">OK</button></center></div></div></div></div></div></div><script type=text/ng-template id=tag-template><div>{{data.profile.name}} <a class="remove-button" ng-click="$removeTag()">&#10006;</a> </div></script><script type=text/ng-template id=auto-template><div>{{data.profile.name}}</div></script><script type=text/ng-template id=tags-template><div>{{data.label}} <a class="remove-button" ng-click="$removeTag()">&#10006;</a></div></script><script type=text/ng-template id=area-template><div>{{data.name}} <a class="remove-button" ng-click="$removeTag()">&#10006;</a></div></script>'),e.put("partials/weekoff/weekoff.html",'<div class=row><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style=padding-left:0px><h2>Week Off</h2></div></div><div class="panel panel-default"><div class=panel-body><div class=row><div class="col-lg-4 col-md-4 col-sm-4"><div class="form-group input-group input-group-sm" ng-class="{\'has-error\' : !searchObj.city}"><span class=input-group-addon><strong>City</strong></span><select name=city ng-model=searchObj.city class=form-control ng-options="citie._id as citie.name for citie in cities | orderBy:\'name\'" ng-change=changeCity() required><option value>--Select City--</option></select></div></div><div class="col-md-4 col-lg-4" ng-if="userinfo.userdata.role == \'providerteamlead\'"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>City</strong></span> <input name=City type=text placeholder=City class=form-control disabled ng-model=searchObj.cityname></div></div><div class="col-lg-4 col-md-4 col-sm-4"><div class="input-group form-group" ng-class="{\'has-error\' : !searchObj.from_date}"><span class=input-group-addon><strong>From Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObject.from_date is-open=datePickerPopup.dp_Date close-text=Close ng-change=getOrderList() ng-click="openDatePicker($event,\'dp_Date\')" required readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_Date\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-lg-4 col-md-4 col-sm-4"><div class="input-group form-group" ng-class="{\'has-error\' : !searchObj.to_date}"><span class=input-group-addon><strong>To Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObject.to_date is-open=datePickerPopup.dp_searchDate close-text=Close ng-change=getOrderList() ng-click="openDatePicker($event,\'dp_searchDate\')" required readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=row ng-if=searchObj.city><div class=col-md-12><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Role</strong></span><select name=callpartner ng-options="role as role.label for role in roleLists | orderBy:\'name\' track by role._id" ng-model=temp.role class="form-control input-sm" placeholder=Area ng-change=pushRole(temp.role)><option value selected>--Select--</option></select></div></div></div><div class=row ng-if=display.roles.length><div class=col-md-12><div class="alert alert-info" role=alert><span ng-repeat="role in display.roles"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{role.label}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeRole(role,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row><div class=col-md-12 ng-if=checkPointArea><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Area</strong></span><select name=callpartner ng-options="area as area.name for area in areaList | orderBy:\'name\' track by area._id" ng-model=searchObj.area class="form-control input-sm" placeholder=Area ng-change=pushArea(searchObj.area)><option value>--Select--</option></select></div></div></div><div class=row><div class=col-md-12 ng-if=display.area.length><div class="alert alert-info" role=alert><span ng-repeat="areas in display.area"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{areas.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeArea(areas,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row><div class=col-md-12 ng-if=searchObject.city_id><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Users</strong></span><select name=callpartner ng-options="phlebo as phlebo.name for phlebo in finalData | orderBy:\'name\' track by phlebo.id" ng-model=searchObj.phlebo class="form-control input-sm" placeholder=phlebo ng-change=pushPhlebo(searchObj.phlebo)><option value>--Select--</option></select></div></div></div><div class=row><div class=col-md-12 ng-if=display.phlebo.length><div class="alert alert-info" role=alert><span ng-repeat="phlebos in display.phlebo"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{phlebos.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePhlebo(phlebos,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class="modal fade" id=selectCity tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Select City</h4><button ng-click=closeModal() style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class=gantt gantt data=data from-date=searchObject.from_date to-date=searchObject.to_date headers="[\'month\', \'day\']" headers-formats=headersFormats style="border: 1px solid #ddd;" allow-side-resizing=false><gantt-table></gantt-table><gantt-labels enabled=false></gantt-labels><gantt-tooltips></gantt-tooltips></div><div class=footer style=margin-top:25px><div class="pull-left info"><i class="glyphicon glyphicon-stop" style=color:#87b1f9;></i> <label class=labeldisplay>Wo / Leave by Admin</label></div><div class="pull-left info"><i class="glyphicon glyphicon-stop" style=color:#5ab85c;></i> <label class=labeldisplay>Wo / Leave Request ; Approved</label></div><div class="pull-left info"><i class="glyphicon glyphicon-stop" style=color:#c9302c;></i> <label class=labeldisplay>Wo / Leave Cancelled</label></div><div class="pull-left info"><i class="glyphicon glyphicon-stop" style=color:#f7f177;></i> <label class=labeldisplay>Leave request ; Approval pending</label></div><div class="pull-left info"><i class="glyphicon glyphicon-stop" style=color:#e8bfdf;></i> <label class=labeldisplay>Wo request ; Approval pending</label></div></div></div></div>'),e.put("partials/userinfo/active.model.html",'<div id=activeModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>{{activeModal.header}}</h4></div><div class=modal-body><p>Are you sure do you want to {{activeModal.header}} <b>{{activeModal.displayText.profile.name}}</b></p></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button> <button type=button class="btn btn-success" data-dismiss=modal ng-click="deleteUser(activeModal.displayText, activeModal.header)">Save</button></div></div></div></div>'),e.put("partials/userinfo/address.modal.html",'<div class="modal fade" id=addressModal tabindex=-1 role=dialog aria-labelledby=dropPointModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=dropPointModalLabel>Address</h4></div><div class=modal-body><form name=userForm1><div class=panel-body><div class=form-group ng-class="{ \'has-error\': !tempaddress.city_id }"><label for=inputCity class="col-sm-offset-1 col-sm-2 control-label">City</label><div class=col-sm-8><select class="form-control input-sm" id=selectCity name=city ng-model=tempaddress.city_id ng-change=changeCity(tempaddress.city_id) ng-options="city as city.name for city in display.cities | orderBy:\'name\' track by city._id"><option value selected>---Select city---</option></select></div></div><br><br><div class=form-group ng-class="{ \'has-error\': !tempaddress.location }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Location</label><div class=col-sm-8><input type=text class=form-control ng-model=tempaddress.location name=location placeholder="eg: Location" aria-describedby=sizing-addon2></div></div><br><br><div class=form-group ng-class="{ \'has-error\': !tempaddress.address1 }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Address</label><div class=col-sm-8><textarea msd-elastic type=textarea class=form-control ng-model=tempaddress.address1 name=address1></textarea></div></div><br><br><div class=form-group ng-class="{ \'has-error\': !tempaddress.pincode }"><br><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Pincode</label><div class=col-sm-8><input type=text class=form-control ng-model=tempaddress.pincode name=pincode placeholder="eg: 400072" minlength=6 ng-minlength=6 ng-maxlength=6 maxlength=6 aria-describedby=sizing-addon2 onkeypress="if (isNaN( String.fromCharCode(event.keyCode) )) return false;"></div></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button data-dismiss=modal class="btn btn-primary" ng-click=updateAdress(tempaddress) ng-disabled="!tempaddress.location || !tempaddress.address1 || !tempaddress.pincode || !tempaddress.city_id">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/userinfo/config.modal.html",'<div class="modal fade" id=configModal tabindex=-1 role=dialog aria-labelledby=timingModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=timingModalLabel><i class="fa fa-plus"></i>Add timing</h4></div><div class=modal-body><div class=row><div class=form-group><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Partner</label><div class=col-sm-9><select ng-model=display.user.userinfo.partner_id class=form-control placeholder=Name aria-describedby=sizing-addon2 required><option value={{partner._id}} ng-repeat="partner in display.partners track by partner._id">{{partner.info.name}}</option></select></div></div></div><div class=row><br><div class=form-group><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Type</label><div class=col-sm-9><select type=text ng-model=display.user.profile.type class=form-control name=type placeholder=Name aria-describedby=sizing-addon2 required><option value=Phlebo require>Phlebo</option><option value=Logistics require>Logistics</option><option value=Web require>Web</option></select></div></div></div><div class=row><br></div><br><div class=container><div class=row><div class=col-md-6><div class="panel panel-default" ng-if="display.user.profile.type == \'Phlebo\'"><div class=panel-heading><input type=checkbox name=morn360 ng-model=display.user.profile.specialneed ng-click="display.specialneed=[];display.setAllSpecailNeed = false"> <label>Special needs</label></div><div class=panel-body><div ng-show=display.user.profile.specialneed><input type=checkbox name ng-model=display.setAllSpecailNeed value ng-click=setAllSpecailNeed()><strong>All</strong><tags-input ng-model=display.specialneed on-tag-added="addTag(\'specialneed\')" on-tag-removed="setFalse(\'specialneed\')" display-property=name key-property=_id add-from-autocomplete-only=true template=tag-template placeholder="search special need"><auto-complete source=searchSpecialNeed($query) template=auto-template></auto-complete></tags-input></div></div></div></div><div class=col-md-6><div class="panel panel-default" ng-if="display.user.profile.type == \'Phlebo\'"><div class=panel-heading><input ng-click="display.specialtest = [];display.setAllSpecaiTest=false" type=checkbox name=morn360 ng-model=display.user.profile.specialtest> <label>Special test</label></div><div class=panel-body><div ng-show=display.user.profile.specialtest><input type=checkbox name ng-model=display.setAllSpecaiTest value ng-click=setAllSpecailTest()><strong>All</strong><tags-input ng-model=display.specialtest on-tag-added="addTag(\'specailtest\')" on-tag-removed="setFalse(\'specailtest\')" display-property=name key-property=_id add-from-autocomplete-only=true template=tag-template placeholder="search special test"><auto-complete source=searchSpecialTest($query) template=auto-template></auto-complete></tags-input></div></div></div></div></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveConfig() class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div><script type=text/ng-template id=tag-template><div>{{data.name}}</div></script><script type=text/ng-template id=auto-template><div>{{data.name}}</div></script>'),e.put("partials/userinfo/confirmResetPassword.modal.html",'<div class="modal fade" id=confirmResetPasswordModal tabindex=-1 role=dialog aria-labelledby=confirmResetPasswordModal><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click="display.resetpassword = false"><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=confirmResetPasswordModal>Reset Password</h4></div><div class=modal-body><div class="alert alert-danger" role=alert>Are you sure you want to reset your password ?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=ResetPassword() class="btn btn-primary">Yes</button> <button type=button class="btn btn-gray" data-dismiss=modal ng-click=cancelResetPassword()>No</button></span></div></div></div></div>'),e.put("partials/userinfo/timing.modal.html",'<div class="modal fade" id=timingModal tabindex=-1 role=dialog aria-labelledby=timingModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=timingModalLabel><i class="fa fa-plus"></i>Add timing</h4></div><div class=modal-body><div class=container><div class=row><br><div class=form-group><label for=inputArea class=col-sm-2></label><div class=col-sm-12><div class=col-md-6><input type=checkbox ng-model=display.user.availability.day class> <label>Morning</label><select ng-show=display.user.availability.day type=text class=form-control ng-model=display.user.availability.morningarea ng-options="area._id as area.name for area in display.areas" name=asigarea><option value selected>Select Area</option></select></div><div class=col-md-6><input type=checkbox name=evenavail ng-model=display.user.availability.evening> <label>Evening</label><select ng-show=display.user.availability.evening type=text class=form-control ng-model=display.user.availability.eveningarea ng-options="area._id as area.name for area in display.areas" name=asigarea placeholder=Name aria-describedby=sizing-addon2 required><option value selected>Select Area</option></select></div></div></div></div><div class=row><br><div class=form-group><label for=inputArea class=col-sm-2></label><div class=col-sm-12><div class=col-md-6><input type=checkbox name=sundaylv ng-model=display.user.availability.sundayleave> <label>Sunday Leave</label></div><div class=col-md-6><input type=checkbox name=morn360 ng-model=display.user.availability.sixthirty> <label>6.30 AM</label></div></div></div></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveTiming() class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/userinfo/userinfo.html",'<div class=row><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12" style=padding-left:0px><h2>Users info <small><sup><a href=#/main/user/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style=padding-left:0px><select ng-model=searchObj.active type=text class="form-control input-sm" name=category aria-describedby=sizing-addon2 style=margin-top:25px; ng-change=changeStatus()><option name=active value require>All</option><option name=active value=true require>Active</option><option name=active value=false require>Deactive</option></select></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style=padding-right:0px><select class="form-control input-sm" id=selectCity name=city ng-model=searchObj.city_id ng-options="city._id as city.name for city in display.cities" ng-change=changeCity() style=margin-top:25px><option value>-- All Cities --</option></select></div><div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style=padding-right:0px><select class="form-control input-sm" ng-model=searchObj.role ng-options="role.name as role.label for role in display.roles | orderBy:\'label\'" ng-change=changeRole() style=margin-top:25px><option value>-- All Roles --</option></select></div><div class="col-lg-3 col-md-3 col-sm-12 col-xs-12" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=searchObj.searchText ng-model-options="{ debounce: 500 }" placeholder=Search style=margin-top:25px ng-change=get()></div></div><div class=row style="margin-bottom: 15px"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style=padding-right:0px;padding-left:0px; ng-if="searchObj.role == \'partnerteamlead\' || searchObj.role == \'partnerfrontoffice\' || searchObj.role == \'providerteamlead\'"><select class="form-control input-sm" ng-model=searchObj.partner_id ng-options="part._id as part.info.name for part in display.partners | orderBy:\'info.name\'" ng-change=get() style=margin-top:10px;><option value>-- All Partner --</option></select></div></div><div class=row style="margin-bottom: 15px;" ng-if="searchObj.role == \'serviceagent\' || searchObj.role == \'logistic\'"><div class="col-lg-4 col-md-4 col-sm-12 col-xs-12" style=padding-right:15px;padding-left:0px;><select ng-model=searchObj.area_id class="form-control input-sm" ng-options="area._id as area.name for area in display.areas | orderBy:\'name\'" style=margin-top:10px; ng-change=get()><option value require>-- All Areas --</option></select></div><div ng-if="searchObj.role == \'serviceagent\'" class="col-lg-4 col-md-4 col-sm-12 col-xs-12" style=padding-left:7.5px;padding-right:7.5px;><select ng-model=searchObj.specialneeds class="form-control input-sm" ng-options="need._id as need.name for need in display.spclNeeds" style=margin-top:10px; ng-change=get()><option value require>--Special Needs--</option></select></div><div ng-if="searchObj.role == \'serviceagent\'" class="col-lg-4 col-md-4 col-sm-12 col-xs-12" style=padding-left:15px;padding-right:0px;><select ng-model=searchObj.specialtests class="form-control input-sm" ng-options="test._id as test.name for test in display.spclTests | orderBy:\'name\'" style=margin-top:10px; ng-change=get()><option value require>--Special Tests--</option></select></div></div><div class=row><table class="table table-bordered" style=background-color:white><thead><tr><th>No</th><th>Name</th><th>Username</th><th>Role</th><th style=width:25%; ng-hide="searchObj.role == \'serviceagent\' || searchObj.role == \'logistic\'">Partner</th><th>Status</th></tr></thead><tbody><tr ng-repeat="user in display.users | orderBy:\'profile.name\'"><td>{{$index+1}}</td><td ng-click=edit(user._id)>{{user.profile.name}}</td><td class=normal ng-click=edit(user._id)>{{user.username}}</td><td ng-click=edit(user._id)>{{getRoleLabel(user.role)}}</td><td ng-hide="searchObj.role == \'serviceagent\' || searchObj.role == \'logistic\'"><div ng-if=user.userinfo.partners.length data-toggle=collapse data-target=#collapseExample{{$index}} aria-expanded=false aria-controls=collapseExample><i class="glyphicon glyphicon-plus" style="font-size: 12px;"></i><ul class=collapse id=collapseExample{{$index}} style="padding-left: 20px;"><li ng-repeat="partner in user.userinfo.partners">{{partner.info.name}}</li></ul></div></td><td><button type=button ng-show="user._Deleted == true" data-toggle=modal ng-model=activeModal.data ng-click="setActive(\'active\',user)" class="btn btn-success btn-xs">Activate</button> <button type=button ng-show="user._Deleted ==false" ng-model=deactiveModal.data class="btn btn-danger btn-xs" ng-click="setActive(\'deactive\',user)">Deactivate</button></td></tr></tbody><div ng-include="\'partials/userinfo/timing.modal.html\'"></div><ng-include src="\'partials/userinfo/active.model.html\'"></ng-include></table></div><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=nextPageData()></pagination></div>'),e.put("partials/userinfo/userinfo.object.html",'<div><h2>User info<small><sup><a href=#/main/user class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=userForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-if=successFlag>Saved!</div><div class="col-lg-12 col-md-12 col-sm-12 nopadding addpanel"><div class=row><div class=col-lg-6><div class=form-group ng-class="{ \'has-error\': userForm.role.$invalid }" ng-if="display.user.role != \'admin\'"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Role</label><div class=col-sm-9><select ng-model=display.user.role class=form-control placeholder=Name aria-describedby=sizing-addon2 required ng-change=CheckRole(display.user.role) name=role><option ng-selected="role.name == display.user.role" value={{role.name}} ng-repeat="role in display.roles | orderBy:\'name\' track by $index" ng-if="role.name!=\'admin\'">{{role.label}}</option></select></div></div><div class=form-group ng-class="{ \'has-error\': userForm.name.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-9><input name=name type=text ng-model=display.user.profile.name class=form-control required></div></div><div class=form-group ng-class="{ \'has-error\': userForm.gender.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Gender</label><div class=col-sm-9><select type=text class=form-control ng-model=display.user.profile.gender name=gender placeholder=Name aria-describedby=sizing-addon2 required><option name=genderopt value=Male require>Male</option><option name=genderopt value=Female require>Female</option></select></div></div><div class=form-group ng-class="{ \'has-error\': userForm.emaliid.$invalid }"><label for=inputEmail class="col-sm-offset-1 col-sm-2 control-label">Email</label><div class=col-sm-9><input type=email class="form-control normal" ng-model=display.user.profile.email name=emaliid aria-describedby=sizing-addon2 required></div></div><div class=form-group ng-class="{ \'has-error\': userForm.mobileno.$invalid }"><label for=inputMobile class="col-sm-offset-1 col-sm-2 control-label">Mobile</label><div class=col-sm-9><input type=text class=form-control ng-model=display.user.profile.mobilenumber name=mobileno maxlength=10 minlength=10 aria-describedby=sizing-addon2 required></div></div><div class=form-group ng-class="{ \'has-error\': userForm.username.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Username</label><div class=col-sm-9><input type=text class="form-control normal" ng-model=display.user.username name=username aria-describedby=sizing-addon2 required></div></div><div ng-if=!display.user._id class=form-group ng-class="{ \'has-error\': userForm.password.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Password</label><div class=col-sm-9><input name=password ng-model=display.user.password type=password class="form-control normal" minlength=3 required></div></div><div ng-if=display.user._id class=form-group><div class="col-sm-offset-3 colsm-9"><label for=inputArea class="col-sm-2 control-label">change password</label><div class=col-sm-3><input type=checkbox ng-model=display.changepassword></div><label for=inputArea class="col-sm-2 control-label">Reset password</label><div class=col-sm-3><input type=checkbox ng-model=display.resetpassword ng-change=confirmResetPassword()></div></div></div><div ng-if="display.user._id && display.changepassword" class=form-group ng-class="{ \'has-error\': userForm.oldpassword.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Old Password</label><div class=col-sm-9><input name=oldpassword ng-model=display.user.oldpassword type=password class="form-control normal" required></div></div><div ng-if="display.user._id && display.changepassword" class=form-group ng-class="{ \'has-error\': userForm.newpassword.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">New Password</label><div class=col-sm-9><input name=newpassword ng-model=display.user.newpassword type=password class="form-control normal" minlength=3 required></div></div><div class=form-group ng-class="{ \'has-error\': !display.user.profile.location}"><label for=inputAddress class="col-sm-offset-1 col-sm-2 control-label">Address<small><sup><a ng-click=address(display.user.profile) type=button class="btn btn-link btn-xs">Edit</a></sup></small></label><div class=col-sm-9><span>{{display.user.profile.location}}</span><br><span>{{display.user.profile.address1}}</span><br><span>{{display.user.profile.city_id.name}}</span></div></div></div><div class=col-lg-6 ng-if="display.user.role && display.user.profile.city_id"><div class=form-group ng-class="{ \'has-error\': !display.user.userinfo.partners.length}" ng-if="display.user.role != \'providerfrontoffice\' && display.user.role != \'admin\' && display.user.role != \'serviceagent\' && display.user.role != \'logistic\' && display.user.role != \'providerqa\' && display.user.role != \'backoffice\'"><label for=inputArea class="col-sm-2 control-label">Partner</label><div class=col-sm-10><select ng-model=display.user.userinfo.partner_id class=form-control placeholder=Name aria-describedby=sizing-addon2 ng-change=pushPartner(display.user.userinfo.partner_id)><option value ng-disabled>-- Select --</option><option value={{partner}} ng-repeat="partner in display.partners | orderBy:\'info.name\' track by partner._id">{{partner.info.name}}</option></select></div><span ng-if="display.user.role != \'partnerfrontoffice\' && display.user.role != \'partnerteamlead\'"><label for=inputArea class="col-sm-2 control-label"></label><div class=col-sm-10><div class=checkbox><label><input type=checkbox ng-model=display.selectall class ng-change=selectALLPartner(display.selectall)>SELECT ALL</label></div></div></span></div><div class=row ng-if="display.user.role != \'providerfrontoffice\'&& display.user.role != \'admin\' && display.user.role != \'serviceagent\' && display.user.role != \'logistic\' && display.user.role != \'providerqa\'"><div class=col-lg-2><label for=inputArea class="col-sm-2 control-label"></label></div><div class=col-lg-10 ng-if=display.user.userinfo.partners.length><div class="alert alert-info" role=alert><span ng-repeat="part in display.user.userinfo.partners" style=padding-left:16px><span style="display: inline-block; position:relative" class=typeahead-available-text>{{part.info.name}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePartner(part,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div ng-if="display.user.role != \'frontoffice\' && display.user.role != \'backoffice\' && display.user.role != \'partnerfrontoffice\' && display.user.role != \'partnerteamlead\' && display.user.role != \'providerfrontoffice\' && display.user.role != \'providerteamlead\' && display.user.role != \'admin\' && display.user.role != \'providerqa\'"><div class=form-group><div class="col-sm-offset-2 col-sm-4 chckbox"><div style=padding-right:10px class=checkbox><label><input type=checkbox ng-model=display.user.availability.day class ng-change="display.user.availability.morningareas=[];display.selectMorning= \'false\'">Morning</label></div><div class=checkbox ng-if=display.user.availability.day><label><input type=checkbox ng-model=display.selectMorning class ng-change=selectAllAreaMorning(display.selectMorning)>SELECT ALL</label></div></div><div style=margin-top:5px class="col-sm-offset-2 col-sm-10" ng-if=display.user.availability.day ng-class="{ \'has-error\': !display.user.availability.morningareas.length }"><select type=text class="form-control input-sm" ng-model=display.user.availability.morningarea ng-options="area as area.name for area in display.areas" name=asigarea ng-change=pushMorningArea(display.user.availability.morningarea)><option value selected>--Assign major area--</option></select></div></div><div class=row ng-if=display.user.availability.morningareas.length><div class=col-lg-2><label for=inputArea class="col-sm-2 control-label"></label></div><div class=col-lg-10><div class="alert alert-info" role=alert><span ng-repeat="morningarea in display.user.availability.morningareas"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{morningarea.name}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeMorningArea(morningarea,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-4 chckbox"><div style=padding-right:10px class=checkbox><label><input type=checkbox ng-change="display.user.availability.eveningareas=[]; display.selectEvening = \'false\'" ng-model=display.user.availability.evening class>Evening</label></div><div class=checkbox ng-if=display.user.availability.evening><label><input type=checkbox ng-model=display.selectEvening class ng-change=selectAllAreaEvening(display.selectEvening)>SELECT ALL</label></div></div><div style=margin-top:5px class="col-sm-offset-2 col-sm-10" ng-if=display.user.availability.evening ng-class="{ \'has-error\': !display.user.availability.eveningareas.length }"><select type=text class="form-control input-sm" ng-model=display.user.availability.eveningarea ng-options="area as area.name for area in display.areas" name=asigarea placeholder=Name aria-describedby=sizing-addon2 ng-change=pushEveningArea(display.user.availability.eveningarea)><option value selected>--Assign major area--</option></select></div></div><div class=row ng-if=display.user.availability.eveningareas.length><div class=col-lg-2><label for=inputArea class="col-sm-2 control-label"></label></div><div class=col-lg-10><div class="alert alert-info" role=alert><span ng-repeat="eveningarea in display.user.availability.eveningareas"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{eveningarea.name}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeEveningArea(eveningarea,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-7"><input type=checkbox name=sundaylv ng-model=display.user.availability.sundayleave> Requested for sunday leave</div></div><div class=form-group><div class="col-sm-offset-2 col-sm-7"><input type=checkbox name=sundaylv ng-model=display.user.availability.sixthirty> 6:30AM available</div></div><div class=form-group ng-if="display.user.role != \'logistic\'"><div class="col-sm-offset-2 col-sm-4 chckbox"><div style=padding-right:10px class=checkbox><label><input type=checkbox ng-model=display.user.profile.specialneed ng-click="display.user.profile.specialneedlist=[];display.SpecialNeed = false">Special Needs</label></div><div class=checkbox ng-if=display.user.profile.specialneed><label><input type=checkbox ng-model=display.SpecialNeed ng-click=setAllSpecialNeed(display.SpecialNeed) class>SELECT ALL</label></div></div><div style=margin-top:5px class="col-sm-offset-2 col-sm-10" ng-if=display.user.profile.specialneed ng-class="{ \'has-error\': !display.user.profile.specialneedlist.length }"><select type=text class="form-control input-sm" ng-model=display.specialneed ng-options="need as need.name for need in display.specialneeds" name=asigarea ng-change=pushSpclNeed(display.specialneed)><option value selected>--Select--</option></select></div></div><div class=row ng-if="display.user.profile.specialneedlist.length && display.user.role != \'logistic\'"><div class=col-lg-2><label for=inputArea class="col-sm-2 control-label"></label></div><div class=col-lg-10><div class="alert alert-info" role=alert><span ng-repeat="need in display.user.profile.specialneedlist"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{need.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeSpclNeed(need,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-4 chckbox"><div style=padding-right:10px class=checkbox><label><input ng-click="display.user.profile.specialtestlist = [];display.SpecialTest=false" type=checkbox name=morn360 ng-model=display.user.profile.specialtest>Special Tests</label></div><div class=checkbox ng-if=display.user.profile.specialtest><label><input type=checkbox ng-model=display.SpecialTest ng-click=setAllSpecialTest(display.SpecialTest) class>SELECT ALL</label></div></div><div style=margin-top:5px class="col-sm-offset-2 col-sm-10" ng-if=display.user.profile.specialtest ng-class="{ \'has-error\': !display.user.profile.specialtestlist.length }"><select type=text class="form-control input-sm" ng-model=display.specialtest ng-options="test as test.name for test in display.specialtests" name=asigarea ng-change=pushSpclTest(display.specialtest)><option value selected>--Select--</option></select></div></div><div class=row ng-if=display.user.profile.specialtestlist.length><div class=col-lg-2><label for=inputArea class="col-sm-2 control-label"></label></div><div class=col-lg-10><div class="alert alert-info" role=alert><span ng-repeat="test in display.user.profile.specialtestlist"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{test.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeSpclTest(test,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div></div><div class=row><div class=col-lg-6><button ng-if="display.user.role != \'providerfrontoffice\' && display.user.role != \'providerteamlead\' && display.user.role != \'admin\' && display.user.role != \'serviceagent\' && display.user.role != \'logistic\' && display.user.role != \'providerqa\' && display.user.role != \'backoffice\'" name=save class="col-sm-offset-3 btn btn-primary" type=button ng-click=save() ng-disabled="userForm.$invalid || !display.user.userinfo.partners.length">Save</button><button ng-if="display.user.role == \'providerfrontoffice\' || display.user.role == \'providerteamlead\' || display.user.role == \'admin\'|| display.user.role == \'providerqa\' || display.user.role == \'backoffice\'" name=save class="col-sm-offset-3 btn btn-primary" type=button ng-click=save() ng-disabled="userForm.$invalid || (display.user.role == \'providerteamlead\' && !display.user.userinfo.partners.length)">Save</button><button ng-if="display.user.role == \'serviceagent\' || display.user.role == \'logistic\'" name=save class="col-sm-offset-3 btn btn-primary" type=button ng-click=save() ng-disabled="userForm.$invalid || (display.user.availability.day && !display.user.availability.morningareas.length) || (display.user.availability.evening && !display.user.availability.eveningareas.length) || (display.user.profile.specialneed && !display.user.profile.specialneedlist.length) || (display.user.profile.specialtest && !display.user.profile.specialtestlist.length)">Save</button></div></div></div></div></div><div ng-include="\'partials/userinfo/confirmResetPassword.modal.html\'"></div><div ng-include="\'partials/userinfo/address.modal.html\'"></div><div class="modal fade" id=callCreated tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Your Password has been reset to <strong style="text-transform: lowercase;">\'escherichiacoli\'</strong> successfully!!</h4><button ng-click=callcreated() style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div></form>'),e.put("partials/worequest/worequest.html",'<div class=row><div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" style=padding-right:0px><h2>week off / leave Request <small><sup><a href=#/main/worequest/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" style="padding-left:0px; display: inline-flex"><input ng-show="(user.userdata.role == \'admin\' || user.userdata.role == \'backoffice\')" type=text class="form-control input-sm" style=margin-top:25px; ng-model=searchObjWo.name ng-model-options="{ debounce: 500 }" placeholder="search by name" ng-change=initpaging();getResult()>&nbsp;&nbsp;<select class="form-control input-sm" name=area ng-model=searchObjWo.leavetype ng-change=getTypeResult(searchObjWo.leavetype) style=margin-top:25px;><option value>--All Type--</option><option value=leave>leave</option><option value=weekoff>week off</option></select>&nbsp;&nbsp;<select class="form-control input-sm" name=area ng-model=searchObjWo.status ng-change=getStatusResult(searchObjWo.status) style=margin-top:25px><option value>--All status--</option><option value=accepted>Accepted</option><option value=open>Open</option><option value=rejected>Cancelled</option></select></div></div><div class=row><div class="col-lg-3 col-md-3 col-sm-3 col-xs-6" style=margin-top:10px;margin-bottom:15px;><div class=input-group><span class=input-group-addon style="background-color: #fff;"><strong>From Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObjWo.fromdate is-open=datePickerPopup.dp_fromDate close-text=Close ng-change=initpaging();getResult() placeholder="Select date" ng-click="openDatePicker($event,\'dp_fromDate\')" style="background-color: #fff;" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fromDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-lg-3 col-md-3 col-sm-3 col-xs-6" style=margin-top:10px;margin-bottom:15px;><div class=input-group><span class=input-group-addon style="background-color: #fff;"><strong>to Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObjWo.todate is-open=datePickerPopup.dp_toDate close-text=Close ng-change=initpaging();getResult() placeholder="Select date" ng-click="openDatePicker($event,\'dp_toDate\')" style="background-color: #fff;" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_toDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-lg-3 col-md-3 col-sm-3 col-xs-6" ng-show="(user.userdata.role == \'admin\' || user.userdata.role == \'backoffice\')"><select class="form-control input-sm" id=selectCity name=city ng-model=searchObj.city_id ng-options="city._id as city.name for city in display.cities" ng-change="getAreas(\'rm\')" style=margin-top:10px;margin-bottom:15px;><option value>-- All Cities --</option></select></div><div class="col-lg-3 col-md-3 col-sm-3 col-xs-6" ng-show="(user.userdata.role == \'admin\' || user.userdata.role == \'backoffice\')"><select class="form-control input-sm" ng-model=searchObj.role ng-options="role.name as role.label for role in display.roles | orderBy:\'label\'" ng-change="initpaging();getRole(\'rm\')" style=margin-top:10px;margin-bottom:15px;><option value>-- All Roles --</option></select></div></div><div class=row ng-if="searchObj.role == \'serviceagent\' || searchObj.role == \'logistic\'"><div class=col-lg-12 style=margin-top:10px;margin-bottom:15px><select ng-model=temp.area class="form-control input-sm" ng-options="area as area.name for area in display.areas | orderBy:\'name\'" ng-change=pushArea(temp.area)><option value require>-- All Areas --</option></select></div><div class=col-lg-12 ng-if=display.areadiv.length><div class="alert alert-info" role=alert><span ng-repeat="area in display.areadiv"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{area.name}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeArea(area,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if=searchObj.role><div class=col-lg-12 style=margin-top:10px;margin-bottom:15px><select ng-model=temp.user class="form-control input-sm" ng-options="user as user.profile.name for user in display.dropDownUsers | orderBy:\'profile.name\'" ng-change=pushUser(temp.user)><option value require>-- All Users --</option></select></div><div class=col-lg-12 ng-if=display.userdiv.length><div class="alert alert-info" role=alert><span ng-repeat="user in display.userdiv"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{user.profile.name}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeUser(user,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div><div class=row><div class="col-lg-12 col-sm-12"><table class="table table-bordered" style="background-color: white;"><thead><tr><th width=5%><center>No</center></th><th width=20% ng-if="user.userdata.role == \'admin\' || user.userdata.role == \'backoffice\'"><center>Name</center></th><th width=20%><center>Date</center></th><th width=25%><center>Type</center></th><th width=15%><center>Status</center></th></tr></thead><tbody><tr ng-repeat="obj in display.users" ng-class=checkClass(obj)><td ng-click=edit(obj._id)><center>{{$index+1}}</center></td><td ng-click=edit(obj._id) ng-if="user.userdata.role == \'admin\'"><center>{{obj.user_id.profile.name}}</center></td><td ng-click=edit(obj._id) ng-if="obj.leavetype == \'weekoff\' && obj.requestdate"><center>{{obj.requestdate | date : "dd-MM-y"}}</center></td><td ng-if="obj.requesttodate && obj.leavetype == \'leave\'" ng-click=edit(obj._id)><center>{{obj.requestdate | date : "dd-MM-y"}} To {{obj.requesttodate | date : "dd-MM-y"}}</center></td><td ng-click=edit(obj._id)><center><div><span class=badge ng-if="obj.leavetype == \'leave\'">Leave</span> <span class=badge ng-if="obj.leavetype == \'weekoff\'">Week off</span></div><span><span ng-if="obj.requesttype == \'halfday\'"><strong>Half Day</strong></span> <span ng-if="obj.requesttype == \'fullday\'"><strong>Full Day<strong></strong></strong></span></span> <span ng-if="obj.requesttype == \'halfday\'">{{obj.requesttime | waqt}} - {{obj.requesttotime | waqt}}</span></center></td><td><center><span ng-hide="obj.status ==\'open\'"><span ng-if="obj.status == \'rejected\'">Cancelled</span> <span ng-if="obj.status != \'rejected\'">{{obj.status}}</span></span> <button name=save type=button ng-if="obj.status == \'open\' && (user.userdata.role == \'admin\' || user.userdata.role == \'backoffice\')" ng-show="(user.userdata.role == \'admin\' || user.userdata.role == \'backoffice\')" ng-click="callPopUp(obj,\'accept\')" class="btn btn-success btn-xs">Accept</button> <button name=save type=button ng-show="(user.userdata.role == \'admin\' || user.userdata.role == \'backoffice\')" ng-if="obj.status == \'open\' && (user.userdata.role == \'admin\' || user.userdata.role == \'backoffice\')" ng-click="callPopUp(obj,\'reject\')" class="btn btn-danger btn-xs">Cancel</button> <span ng-if="user.userdata.role != \'admin\' && obj.status == \'open\'">Pending</span></center></td></tr></tbody></table><div ng-if=display.users.length class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=getResult()></pagination></div><div ng-include="\'partials/worequest/modal/addAcceptedStatus.modal.html\'"></div><div ng-include="\'partials/worequest/modal/rejectedStatus.modal.html\'" scope onload></div></div></div></div><div ng-include="\'partials/partner/test/modal/component.modal.html\'"></div><ng-import type=partnertest></ng-import>'),e.put("partials/worequest/worequest.object.html",'<div><h2>Week Off / Leave Request<small><sup><a href=#/main/worequest class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=woRequestForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=row><div class="col-md-offset-4 col-md-3" style=padding-left:70px><div class=form-group><input name=reqType type=radio ng-model=display.weekOffRequest.leavetype id=weekoff value=weekoff ng-disabled="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))" ng-change=weekoffChange()>&nbsp;&nbsp;Week off Request</div></div><div class=col-md-3 style=padding-left:0px;><div class=form-group><input name=reqType type=radio ng-model=display.weekOffRequest.leavetype id=leave value=leave ng-disabled="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))" ng-change=weekoffChange()>&nbsp;&nbsp;Leave Request</div></div></div><div ng-if="user.userdata.role == \'admin\' && !display.weekOffRequest._id"><div class=row ng-if="display.weekOffRequest.status != \'accepted\' && display.weekOffRequest.status != \'rejected\' && display.weekOffRequest.status != \'pending\'"><div class="col-lg-offset-3 col-lg-6" ng-class="{ \'has-error\': !display.cities._id}"><div class=form-group ng-class="{\'has-error\' : userForm.city.$invalid}"><label class="col-sm-2 control-label">City</label><div class=col-sm-10><select class=form-control id=selectCity name=city ng-model=display.cities._id required ng-change=changeCity() ng-options="city._id as city.name for city in display.cities | orderBy:\'name\' track by city._id"><option value>---Select city---</option></select></div></div></div></div><div class=row ng-if=display.cities._id><div class="col-lg-offset-3 col-lg-6" ng-class="{ \'has-error\': !display.roles.length }"><div class=form-group><label class="col-sm-2 control-label">Role</label><div class=col-sm-10><select name=callpartner ng-options="role as role.label for role in roleLists | orderBy:\'name\' track by role._id" ng-model=temp.role class="form-control input-sm" placeholder=Area ng-change=pushRole(temp.role)><option value selected>--Select--</option></select></div></div></div></div><div class=row ng-if=display.roles.length><div class="col-lg-offset-3 col-lg-6"><div class=form-group><label class="col-sm-2 control-label"></label><div class=col-sm-10><div class="alert alert-info" role=alert><span ng-repeat="role in display.roles"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{role.label}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeRole(role,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div><div class=row ng-if="display.roles.length && phlebo"><div class="col-lg-offset-3 col-lg-4"><div class=form-group><label class="col-sm-3 control-label">Area</label><div class=col-sm-9><select name=callphlebo ng-options="area as area.name for area in areas | orderBy:\'name\' track by area._id" ng-model=temp.area class="form-control input-sm" placeholder=Area ng-change=pushArea(temp.area)><option value selected>--Select--</option></select></div></div></div><div class=col-lg-2 style="margin-top: 12px;margin-left:5%;"><input type=checkbox ng-click=setAllAreas(display.setAllAreas) ng-model=display.setAllAreas class> Select all</div></div><div class=row ng-if=display.areas.length><div class="col-lg-offset-3 col-lg-6"><div class=form-group><label class="col-sm-2 control-label"></label><div class=col-sm-10><div class="alert alert-info" role=alert><span ng-repeat="area in display.areas"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{area.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeArea(area,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div></div><div class=row ng-if="display.roles.length || user.userdata.role != \'admin\'"><div class="col-lg-offset-3 col-lg-6" ng-class="{ \'has-error\': !temp.users.length }"><div class=form-group><label for=selectCity class="col-sm-2 control-label">User name</label><div class=col-sm-10><select class="form-control input-sm" id=selectCity name=user ng-model=temp.user ng-options="users as users.profile.name for users in display.users | orderBy:\'profile.name\'" ng-change=pushUser(temp.user) ng-disabled="(display.weekOffRequest._id && user.userdata.role ==\'admin\') ||(user.userdata.role !=\'admin\' )"><option value selected>---Select user---</option></select></div></div></div>{{users.profile.name}}<div class="col-lg-offset-3 col-lg-6" ng-if="!display.weekOffRequest._id && user.userdata.role==\'admin\' && temp.users.length"><div class=form-group><label class="col-sm-2 control-label"></label><div class=col-sm-10><div class="alert alert-info" role=alert><span ng-repeat="selUser in temp.users"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{selUser.profile.name}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeUser($index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div><div class=row ng-if=display.weekOffRequest._id><div class="col-lg-offset-3 col-lg-6" ng-class="{ \'has-error\': !temp.users.length }"><div class=form-group><label for=selectCity class="col-sm-2 control-label">User name</label><div class=col-sm-10><select class="form-control input-sm" id=selectCity name=user ng-model=temp.user ng-options="users as users.profile.name for users in display.users | orderBy:\'profile.name\'" ng-change=pushUser(temp.user) ng-disabled=display.weekOffRequest._id><option value selected>---Select user---</option></select></div></div></div><div class="col-lg-offset-3 col-lg-6" ng-if="!display.weekOffRequest._id && user.userdata.role==\'admin\' && temp.users.length"><div class=form-group><label class="col-sm-2 control-label"></label><div class=col-sm-10><div class="alert alert-info" role=alert><span ng-repeat="selUser in temp.users"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{selUser.profile.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeUser($index)></i></span>&nbsp;&nbsp;</span></div></div></div></div></div><div class=row><div class="col-lg-offset-3 col-lg-6" ng-class="{ \'has-error\': woRequestForm.date.$invalid }"><div class=form-group><label ng-if="display.weekOffRequest.leavetype != \'leave\' || (display.weekOffRequest.leavetype == \'weekoff\' && successFlag)" for=inputDescription class="col-md-2 control-label">Date</label> <label ng-if="display.weekOffRequest.leavetype == \'leave\'" for=inputDescription class="col-sm-2 control-label">date from</label><div class=col-sm-10><div class=input-group><input type=text name=date class="form-control input-sm" placeholder="Select date" datepicker-popup ng-model=display.weekOffRequest.requestdate is-open=datePickerPopup.dp_searchDate close-text=Close min-date=minFromDate max-date=maxFromDate ng-click="openDatePicker($event,\'dp_searchDate\')" readonly required ng-disabled="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))"> <span class=input-group-btn><button ng-class="{ \'has-error\': woRequestForm.date.$invalid }" type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')" ng-disabled="display.weekOffRequest.status == \'rejected\'"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div></div></div><div class=row ng-if="display.weekOffRequest.leavetype == \'leave\'"><div class="col-lg-offset-3 col-lg-6" ng-class="{ \'has-error\': woRequestForm.dateto.$invalid }"><div class=form-group><label for=inputDescription class="col-sm-2 control-label">date to</label><div class=col-sm-10><div class=input-group><input type=text name=dateto class="form-control input-sm" placeholder="Select date" datepicker-popup ng-model=display.weekOffRequest.requesttodate is-open=datePickerPopup.dp_todate close-text=Close min-date=minToDate max-date=maxToDate ng-click="openDatePicker($event,\'dp_todate\')" readonly autoclose=true required ng-disabled="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))"> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_todate\')" ng-disabled="display.weekOffRequest.status == \'rejected\'"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div></div></div><div class=row ng-if="display.weekOffRequest.leavetype == \'leave\'"><div class="col-lg-offset-3 col-lg-6" ng-class="{ \'has-error\': woRequestForm.reason.$invalid }"><div class=form-group><label for=inputName class="col-sm-2 control-label">Reason</label><div class=col-sm-10><textarea msd-elastic name=reason ng-disabled="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))" class=form-control ng-model=display.weekOffRequest.leavereason required></textarea></div></div></div></div><div class=row><div class="col-md-offset-4 col-md-3" style=padding-left:70px><div class=form-group><input name=reqTypeValue type=radio ng-disabled="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))" ng-model=display.weekOffRequest.requesttype id=fullday value=fullday ng-change=requestTypeChange(display.weekOffRequest.requesttype)>&nbsp;&nbsp;Full Day</div></div><div class=col-md-3 style=padding-left:0px;><div class=form-group><input name=reqTypeValue type=radio ng-disabled="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))" ng-model=display.weekOffRequest.requesttype id=halfday value=halfday ng-change=requestTypeChange(display.weekOffRequest.requesttype)>&nbsp;&nbsp;Half Day</div></div></div><div class=row ng-if="display.weekOffRequest.requesttype ==\'halfday\'"><div class="col-lg-offset-3 col-lg-6" ng-class="{ \'has-error\': whForm.fromtime.$invalid }"><div class=form-group><label class="col-sm-2 control-label">From time</label><div class=col-sm-10><select class=form-control ng-model=display.weekOffRequest.requesttime ng-disabled="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))" required ng-change=checkHDTime() ng-options="timeslot.time as timeslot.time | waqt for timeslot in display.timeSlots" ng-selected="display.weekOffRequest.requesttime == timeslot.time"><option value>---Select from time---</option></select></div></div></div></div><div class=row ng-if="display.weekOffRequest.requesttype ==\'halfday\'"><div class="col-lg-offset-3 col-lg-6" ng-class="{ \'has-error\': whForm.fromtime.$invalid }"><div class=form-group><label class="col-sm-2 control-label">To time</label><div class=col-sm-10><select class=form-control name=totime ng-model=display.weekOffRequest.requesttotime ng-disabled="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))" required ng-change=checkHDTime() ng-options="timeslot.time as timeslot.time | waqt for timeslot in display.timeSlots" ng-selected="display.weekOffRequest.requesttotime == timeslot.time"><option value>---Select to time---</option></select></div></div></div></div><div class=row><div class="col-lg-offset-3 col-lg-6"><div class=form-group><label for=inputName class="col-sm-2 control-label"></label><div class=col-sm-10><button ng-hide="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))" type=button ng-click=updateModal() class="btn btn-primary" ng-if=!display.weekOffRequest._id ng-disabled="woRequestForm.$invalid || !temp.users.length"><span>Save</span></button> <button ng-hide="(user.userdata.role == \'admin\' && display.weekOffRequest.status == \'rejected\') || (user.userdata.role != \'admin\' && (display.weekOffRequest.status == \'rejected\' || display.weekOffRequest.status == \'accepted\'))" type=button ng-click=updateModal() class="btn btn-primary" ng-if=display.weekOffRequest._id><span>edit</span></button> <button type=button ng-click=cancelLeave() class="btn btn-primary" ng-if="display.weekOffRequest.status != \'rejected\' && display.weekOffRequest._id && user.userdata.role == \'admin\'"><span ng-if="display.weekOffRequest.leavetype == \'leave\'">Cancel</span> <span ng-if="display.weekOffRequest.leavetype == \'weekoff\'">Cancel</span></button> <button type=button data-toggle=collapse data-target=#logTable class="btn btn-primary" ng-if="display.weekOffRequest._id && user.userdata.role == \'admin\'"><span>log</span></button></div></div></div></div></div></div></form><div id=logTable class="table-responsive collapse" ng-if="display.weekOffRequest._id && user.userdata.role == \'admin\'"><table class="table table-bordered table-condensed"><tbody style=background-color:white><tr><td colspan=3 class=active>Log</td></tr><tr ng-repeat-start="logObj in display.weekOffRequest.log track by $index"><td><div ng-if=logObj.new.length data-toggle=collapse data-target=#{{$index}} class="glyphicon glyphicon-plus-sign"></div></td><td><small>{{logObj.comment}}<small></small></small></td><td><small>{{logObj.updateddatetime | date:\'dd-MMM-yyyy\'}}<br><strong>Updated by:</strong>{{logObj.updatedby.profile.name}}</small></td></tr><tr ng-repeat-end id={{$index}} class=collapse style=background-color:#eee;><td colspan=3><div class=table-responsive><table class="table table-bordered table-condensed" style=padding-bottom:0px><thead><th>Reason</th></thead><tbody><tr><td>{{logObj.reason_id.displayname}} <span ng-if=logObj.otherreasontext>: {{logObj.otherreasontext}}</span></td></tr></tbody></table><table class="table table-bordered table-condensed" style=padding-bottom:0px><thead><tr><th style=padding-left:30px>fields</th><th style=padding-left:30px>old</th><th style=padding-left:30px>new</th></tr></thead><tbody><tr ng-repeat="(indexKey, keyObj) in logObj.old"><td style=padding-left:30px><span><b>{{keyObj.key}}</b></span></td><td style=padding-left:30px ng-repeat="(indexOld, oldObj) in logObj.old" ng-if="indexKey == indexOld"><span ng-if="oldObj.key==\'request type\'"><span ng-if="oldObj.value == \'fullday\'">full day</span> <span ng-if="oldObj.value == \'halfday\'">half day</span></span> <span ng-if="oldObj.key == \'status\'"><span ng-if=oldObj.value>{{oldObj.value}}</span></span> <span ng-if="oldObj.key == \'leave reason\'"><span ng-if=oldObj.value>{{oldObj.value}}</span></span> <span ng-if="oldObj.key == \'leave type\'"><span ng-if="oldObj.value != \'weekoff\'">{{oldObj.value}}</span> <span ng-if="oldObj.value == \'weekoff\'">week off</span></span> <span ng-if="oldObj.key == \'to date\'"><span ng-if=oldObj.value>{{oldObj.value |date:\'dd-MMM-yyyy\'}}</span></span> <span ng-if="oldObj.key == \'from date\'"><span ng-if=oldObj.value>{{oldObj.value |date:\'dd-MMM-yyyy\'}}</span></span> <span ng-if="oldObj.key == \'half day from time\'"><span ng-if=oldObj.value>{{oldObj.value | waqt}}</span></span> <span ng-if="oldObj.key == \'half day to time\'"><span ng-if=oldObj.value>{{oldObj.value | waqt}}</span></span> <span ng-if=!oldObj.value>None</span></td><td style=padding-left:30px ng-repeat="(indexNew, newObj) in logObj.new" ng-if="indexKey == indexNew"><span ng-if="newObj.key ==\'request type\'"><span ng-if="newObj.value == \'fullday\'">full day</span> <span ng-if="newObj.value == \'halfday\'">half day</span></span> <span ng-if="newObj.key == \'status\'"><span ng-if=newObj.value>{{newObj.value}}</span></span> <span ng-if="newObj.key == \'leave type\'"><span ng-if="newObj.value==\'leave\'">{{newObj.value}}</span> <span ng-if="newObj.value ==\'weekoff\'">week off</span></span> <span ng-if="newObj.key == \'leave reason\'"><span ng-if=newObj.value>{{newObj.value}}</span></span> <span ng-if="newObj.key == \'from date\'"><span ng-if=newObj.value>{{newObj.value |date:\'dd-MMM-yyyy\'}}</span></span> <span ng-if="newObj.key == \'to date\'"><span ng-if=newObj.value>{{newObj.value |date:\'dd-MMM-yyyy\'}}</span></span> <span ng-if="newObj.key == \'half day to time\'"><span ng-if=newObj.value>{{newObj.value | waqt}}</span></span> <span ng-if="newObj.key == \'half day from time\'"><span ng-if=newObj.value>{{newObj.value | waqt}}</span></span> <span ng-if=!newObj.value>None</span></td></tr></tbody></table></div></td></tr></tbody></table></div><div class="modal fade" id=AcceptThenRejectModal tabindex=-1 role=dialog aria-labelledby=AcceptThenRejectModal><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=AcceptThenRejectModal>Reject</h4></div><div class=modal-body><form name=reasonForm><div class=row><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Reason</label><div class=col-sm-9><select class=form-control id=rejectReason name=reason ng-model=temp.rejectReason ng-options="reason as reason.displayname for reason in display.rejectReasons track by reason._id" ng-change=selectReason(temp.rejectReason) required><option value>---Select Reason---</option></select><textarea style=margin-top:10px ng-if=exist msd-elastic name class=form-control ng-model=temp.otherReason required></textarea></div></div></div></form></div><div class=modal-footer><span style=pull-right><button ng-disabled=reasonForm.$invalid name=save type=button class="btn btn-primary" ng-click=changeStatus()>Reject</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div><div ng-include="\'partials/worequest/modal/rejectedStatus.modal.html\'" scope onload></div><div ng-include="\'partials/worequest/modal/updateReason.modal.html\'" scope onload></div><div class="modal fade" id=errorWOMessage tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4><ul style="padding-left: 16px;margin-bottom: 0px;list-style-type:none"><li ng-repeat="messageObj in temp.message">{{messageObj}}{{$last?"":","}}</li></ul></h4><button style=width:130px data-dismiss=modal class="btn btn-primary">Ok</button></center></div></div></div></div></div></div>'),e.put("partials/worequest/worequest.object1.html",'<div><h2>WeekOff request / Leave Request<small><sup><a href=#/main/worequest class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=woRequestForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=row><div class="col-md-offset-4 col-md-3" style=padding-left:70px><div class=form-group><input name=reqType type=radio ng-model=display.weekOffRequest.leavetype id=weekoff value=weekoff ng-disabled="display.weekOffRequest.leavetype == \'leave\' && (display.weekOffRequest.status == \'accepted\' || display.weekOffRequest.status == \'rejected\')">&nbsp;&nbsp;Weekoff Request</div></div><div class=col-md-3 style=padding-left:0px;><div class=form-group><input name=reqType type=radio ng-model=display.weekOffRequest.leavetype id=leave value=leave ng-disabled="display.weekOffRequest.leavetype == \'weekoff\' && (display.weekOffRequest.status == \'accepted\' || display.weekOffRequest.status == \'rejected\')">&nbsp;&nbsp;Leave Request</div></div></div><div class=row><div class=col-md-offset-3 ng-class="{ \'has-error\': !temp.users.length }"><div class=form-group><label for=selectCity class="col-md-2 control-label">User name</label><div class=col-md-6><select class=form-control id=selectCity name=user ng-model=temp.user ng-options="users as users.profile.name for users in display.userlist | orderBy:\'profile.name\'" ng-change=pushUser(temp.user) ng-disabled=display.weekOffRequest._id><option value>---Select user---</option></select></div></div></div><div class=col-lg-12 ng-if="!display.weekOffRequest._id && user.userdata.role==\'admin\' && temp.users.length"><div class="alert alert-info" role=alert><span ng-repeat="selUser in temp.users"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{selUser.profile.name}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeUser($index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row><div class=col-md-offset-3 ng-class="{ \'has-error\': woRequestForm.date.$invalid }"><div class=form-group><label ng-if="display.weekOffRequest.leavetype != \'leave\' || (display.weekOffRequest.leavetype == \'weekoff\' && successFlag)" for=inputDescription class="col-md-2 control-label">Request date</label> <label ng-if="display.weekOffRequest.leavetype == \'leave\'" for=inputDescription class="col-md-2 control-label">date from</label><div class=col-md-6><div class=input-group><input type=text name=date class="form-control input-sm" placeholder="Select date" datepicker-popup ng-model=display.weekOffRequest.requestdate is-open=datePickerPopup.dp_searchDate close-text=Close min-date=minFromDate max-date=maxFromDate ng-click="openDatePicker($event,\'dp_searchDate\')" readonly required ng-disabled="display.weekOffRequest.status == \'accepted\' || display.weekOffRequest.status == \'rejected\'"> <span class=input-group-btn><button ng-class="{ \'has-error\': woRequestForm.date.$invalid }" type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div></div></div><div class=row ng-if="display.weekOffRequest.leavetype == \'leave\'"><div class=col-md-offset-3 ng-class="{ \'has-error\': woRequestForm.dateto.$invalid }"><div class=form-group><label for=inputDescription class="col-md-2 control-label">date to</label><div class=col-md-6><div class=input-group><input type=text name=dateto class="form-control input-sm" placeholder="Select date" datepicker-popup ng-model=display.weekOffRequest.requesttodate is-open=datePickerPopup.dp_todate close-text=Close min-date=minToDate max-date=maxToDate ng-click="openDatePicker($event,\'dp_todate\')" readonly autoclose=true required ng-disabled="display.weekOffRequest.status == \'accepted\' || display.weekOffRequest.status == \'rejected\'"> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_todate\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div></div></div><div class=row ng-if="display.weekOffRequest.leavetype == \'leave\'"><div class=col-md-offset-3 ng-class="{ \'has-error\': woRequestForm.reason.$invalid }"><div class=form-group><label for=inputName class="col-md-2 control-label">Reason</label><div class=col-md-6><div style="border: 1px solid #ccc;padding: 5px 10px;border-radius:3px;" ng-if="display.weekOffRequest.status == \'accepted\' || display.weekOffRequest.status == \'rejected\'"><span style=word-break:break-word; ng-bind-html="display.weekOffRequest.leavereason | trustAsHTML">{{display.weekOffRequest.leavereason}}</span></div><textarea msd-elastic name=reason class=form-control ng-if="display.weekOffRequest.status == \'open\' || !display.weekOffRequest._id" ng-model=display.weekOffRequest.leavereason required></textarea></div></div></div></div><div class=row><div class=col-md-offset-3 ng-hide="display.weekOffRequest.status == \'accepted\' || display.weekOffRequest.status == \'rejected\'"><div class=form-group><label for=save class="col-md-2 control-label"></label><div class=col-md-6><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled="woRequestForm.$invalid || !temp.users.length">Save</button></div></div></div><div class=col-md-offset-3 ng-if="display.weekOffRequest.status == \'accepted\'"><div class=form-group><label for=cancel class="col-md-2 control-label"></label><div class=col-md-6><button name=save type=button ng-click=cancelLeave() class="btn btn-primary" ng-disabled="woRequestForm.$invalid || !temp.users.length">Cancel Leave</button></div></div></div></div></div></div></form><div class="modal fade" id=AcceptThenRejectModal tabindex=-1 role=dialog aria-labelledby=AcceptThenRejectModal><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=AcceptThenRejectModal>Reject</h4></div><div class=modal-body><form name=reasonForm><div class=row><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Reason</label><div class=col-sm-9><select class=form-control id=rejectReason name=reason ng-model=display.rejectReason ng-options="reason._id as reason.displayname for reason in display.rejectReasons track by reason._id" ng-change=selectReason(display.rejectReason) required><option value>---Select Reason---</option></select><textarea style=margin-top:10px ng-if=exist msd-elastic name class=form-control ng-model=temp.otherReason required></textarea></div></div></div></form></div><div class=modal-footer><span style=pull-right><button ng-disabled=reasonForm.$invalid name=save type=button class="btn btn-primary" ng-click=changeStatus()>Reject</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/call/list/calls.html",'<div><div class="col-lg-8 col-md-8 col-sm-8 col-xs-6" style=padding-left:0px><h2>Call mly <small><sup><a href=#/main/call-add class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-4 col-xs-6" style=padding-right:0px><select name=calltype ng-options="type.code as type.displayname for type in calltypelist.optionlist" ng-model=searchObj.calltype class="form-control input-sm" style=margin-top:25px; ng-change=get()></select></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=searchObj.searchText placeholder=Search style=margin-top:25px ng-change=get()></div></div><div><div class=row><div class="col-lg-12 col-sm-12"><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>Name</th><th>Contact Number</th><th>Email</th><th style=width:5%;></th></tr></thead><tbody><tr ng-repeat="call in display.calls | filter:search"><td>{{ count + $index+1}}</td><td><a ng-click=SelectCall(call)>{{call.name}}</a></td><td>{{call.contactnumber}}</td><td>{{call.email}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div></div></div>'),e.put("partials/directives/daypicker/daypicker.html",'<div class=form-group><div class=btn-group role=group aria-label=...><button type=button class="btn btn-default" ng-disabled=!mondayActive ng-model=monday ng-click="dayClick(\'mon\', monday)" ng-class="{\'btn-primary\':monday}">Mon</button> <button type=button class="btn btn-default" ng-disabled=!tuesdayActive ng-model=tuesday ng-click="dayClick(\'tue\', tuesday)" ng-class="{\'btn-primary\':tuesday}">Tue</button> <button type=button class="btn btn-default" ng-disabled=!wednesdayActive ng-model=wednesday ng-click="dayClick(\'wed\', wednesday)" ng-class="{\'btn-primary\':wednesday}">Wed</button> <button type=button class="btn btn-default" ng-disabled=!thursdayActive ng-model=thursday ng-click="dayClick(\'thu\', thursday)" ng-class="{\'btn-primary\':thursday}">Thr</button> <button type=button class="btn btn-default" ng-disabled=!fridayActive ng-model=friday ng-click="dayClick(\'fri\', friday)" ng-class="{\'btn-primary\':friday}">Fri</button> <button type=button class="btn btn-default" ng-disabled=!saturdayActive ng-model=saturday ng-click="dayClick(\'sat\', saturday)" ng-class="{\'btn-primary\':saturday}">Sat</button> <button type=button class="btn btn-default" ng-disabled=!sundayActive ng-model=sunday ng-click="dayClick(\'sun\', sunday)" ng-class="{\'btn-primary\':sunday}">Sun</button></div></div>'),e.put("partials/directives/demography/demography.html",'<div class=row><div class=col-md-6><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>UHID</strong></span> <input name=clientcode type=text autofocus placeholder=UHID class=form-control ng-model=temp.externalId ng-model-options="{ debounce: 1500 }" ng-change=searchPatientByExternalId()></div></div><div class=col-md-6><div class="input-group input-group-sm" ng-class="{ \'has-error\':!newpatient.salutation}"><span class=input-group-addon><strong>Title</strong></span><select name=salutation ng-options="salutation.displayname as salutation.displayname for salutation in display.Salutations | orderBy:\'displayname\'" ng-model=newpatient.salutation class=form-control ng-class="{ \'has-error\': patientFrm.salutation.$invalid }" required ng-change=changeTitle()></select></div></div></div><div class=row><div class=col-md-4><div class=form-group ng-class="{ \'has-error\': !newpatient.firstname}"><input type=text autofocus required placeholder="First Name" name=patientFirstName class="form-control input-sm" ng-model=newpatient.firstname ng-pattern=validName></div></div><div class=col-md-4><div class=form-group ng-class="{ \'has-error\': patientFrm.middlename.$invalid}"><input type=text placeholder="Middle Name" name=patientMiddleName class="form-control input-sm" ng-model=newpatient.middlename ng-pattern=validName></div></div><div class=col-md-4><div class=form-group ng-class="{ \'has-error\': !newpatient.lastname}"><input type=text autofocus required placeholder="Last Name" name=patientLastName class="form-control input-sm" ng-model=newpatient.lastname ng-pattern=validName></div></div></div><div class=row><div class=col-md-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !newpatient.gender}"><span class=input-group-addon><strong>Gender</strong></span><div class=form-control><div class=row><div class=col-sm-3><label><input type=radio style="padding-top=5px" ; ng-model=newpatient.gender value=male ng-disabled=disableGenderMale></label> Male</div><div class=col-sm-3><label><input type=radio style="padding-top=5px" ; ng-model=newpatient.gender value=female ng-disabled=disableGenderFemale></label> Female</div><div class=col-sm><label><input type=radio style="padding-top=5px" ; ng-model=newpatient.gender value="third gender" ng-disabled=disableGenderOther></label> Third Gender</div></div></div></div></div></div><div class=row><div class=col-md-4><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !newpatient.dob }"><span class=input-group-addon><strong>DOB</strong></span> <input type=text name=dob class="form-control input-sm" datepicker-popup ng-model=newpatient.dob is-open=datePickerPopup.dp_dob close-text=Close ng-change=getDavAge() ng-click="openDatePicker($event,\'dp_dob\')" readonly required> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_dob\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-4><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !newpatient.age}"><span class=input-group-addon><strong>Age</strong></span> <input type=text onkeypress="if ( isNaN( String.fromCharCode(event.keyCode) )) return false;" autofocus placeholder=Age ng-model=newpatient.age name=age class=form-control maxlength=3 ng-pattern=validDigit ng-change=getDevDob() required></div></div><div class=col-sm-4 ng-if=!newpatient.agetype><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !newpatient.agetype}"><span class=input-group-addon><strong>AGE IN</strong></span><select name=agetype ng-model=newpatient.agetype ng-init="newpatient.agetype = \'YEARS\'" class=form-control ng-options="ai.agein as ai.agein for ai in temp.ageIn | orderBy:\'agein\'" ng-change=getDevDob()></select></div></div><div class=col-sm-4 ng-if=newpatient.agetype><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !newpatient.agetype}"><span class=input-group-addon><strong>AGE IN</strong></span><select name=agetype ng-model=newpatient.agetype class=form-control ng-options="ai.agein as ai.agein for ai in temp.ageIn | orderBy:\'agein\'" ng-change=getDevDob()></select></div></div></div><div class=row><div class=col-md-6><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !newpatient.mobilenumber}"><span class=input-group-addon><strong>Mobile No</strong></span> <input type=text required placeholder="Mobile Number" name=mobilenumber class=form-control minlength=10 maxlength=10 onkeypress="if ( isNaN( String.fromCharCode(event.keyCode) )) return false;" ng-model=newpatient.mobilenumber ng-pattern=validmobilenumber></div></div><div class=col-md-6><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.landlinenumber.$invalid || patientFrm.landlinenumber.$error.minlength || patientFrm.landlinenumber.$error.maxlength}"><span class=input-group-addon><strong>Alternate No</strong></span><tags-input ng-model=temp.altnumber name=landlinenumber text=AlternateNo type=number min-length=10 max-length=12 placeholder="Press enter to save multiple alt no\'s" onkeypress="if (isNaN( String.fromCharCode(event.keyCode) )) return false;"></tags-input></div></div></div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': newpatient.email && !validateEmail()}"><span class=input-group-addon><strong>Email ID {{temp.EmailValid}}</strong></span> <input type=text placeholder="Email ID" style="text-transform: lowercase !important;" id=email class=form-control ng-model=newpatient.email ng-change=validateEmail()></div></div></div>'),e.put("partials/directives/gmapaddress/gmapaddress.html",'<div class=row ng-if=!temp.parentorder_id><div class=col-md-12><div class=row style=margin:0><div class=col-md-12 style=padding:5px><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !address.area}"><span class=input-group-addon><strong>Area</strong></span> <textarea msd-elastic class="form-control input-sm" ng-disabled=true ng-model=address.area></textarea></div></div></div><div class=row style=margin:0></div><div class=row style=margin:0><div class=col-md-6 style=padding:5px><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Wing</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=address.wing></textarea></div></div><div class=col-md-6 style=padding:5px><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Flat no</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=address.flatno></textarea></div></div></div><div class=row style=margin:0><div class=col-md-6 style=padding:5px><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Floor no</strong></span> <textarea msd-elastic class="form-control input-sm" maxlength=3 onkeypress="if ( isNaN( String.fromCharCode(event.keyCode) )) return false;" ng-model=address.floorno></textarea></div></div><div class=col-md-6 style=padding:5px><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Plot no</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=address.plotno></textarea></div></div></div><div class=row style=margin:0><div class=col-md-6 style=padding:5px><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Sector no</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=address.sectorno></textarea></div></div><div class=col-md-6 style=padding:5px><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !address.pincode}"><span class=input-group-addon><strong>Pincode</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=address.pincode ng-disabled=false ng-change=onPincodeChange() ng-minlength=6></textarea></div></div></div><div class=row style=margin:0><div class=col-md-12 style=padding:5px><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Building / Bunglow</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=address.building></textarea></div></div></div><div class=row style=margin:0><div class=col-md-12 style=padding:5px><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Street Name</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=address.streetname></textarea></div></div></div><div class=row style=margin:0><div class=col-md-12 style=padding:5px><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !address.landmark}"><span class=input-group-addon><strong>Landmark</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=address.landmark></textarea></div></div></div><div class=row style=margin-left:0;margin-top:3px;margin-bottom:3px;><div class=col-md-12 style=padding:5px><label class=radio-inline ng-repeat="title in AddressType.childs"><input type=radio ng-model=address.addresstype value={{title.displayname}} name=optradiotype>{{title.displayname}}</label></div></div></div></div>'),e.put("partials/directives/delete/delete.html",'<div><div class=pull-right><span></span></div></div><div class="modal fade" id=activeModal tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Delete</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong>Are you sure, do you want to delete <span ng-model=displayText ng-if>{{displayText}}</span> record.</div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=delete()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div><div class="modal fade" id=deleteModal tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Delete</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> <span ng-model=displayText ng-if>{{displayText}}</span> record.</div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=delete()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/directives/import/import.html",'<div id=importModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header style=background-color:#F8F8F8><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading">Upload File</h4></div><div class=modal-body style=background-color:#EEEEEE;color:black><form name=formImport><div class=row><div class=col-lg-12><div class="form-group has-feedback" ng-class="{\'has-error\':formImport.file.$invalid}"><div class=input-group><span class=input-group-addon>Select File</span> <input name=file type=file ng-model=$selectedFile ngf-select accept=.csv class=form-control required></div></div></div></div><div class=row><div class=col-lg-12><div class="form-group has-feedback"><div class=input-group><span class=input-group-addon id=sizing-addon2>Type</span><select name ng-model=setType id class=form-control disabled><option value=tubes>Tube</option><option value=tests>Test</option><option value=partnertest>Partner Test</option><option value=departments>Department</option><option value=optionmasters>Option Master</option><option value=mastertests>Master Tests</option><option value=testtubes>Test Tubes</option><option value=sublocation>Sublocation</option><option value=majorarea>Major Area</option><option value=clientimport>Client Import</option></select></div></div></div></div><div class=row ng-show="setType == \'optionmasters\'"><div class=col-lg-12><div class="form-group has-feedback" ng-class="{\'has-error\':formImport.file.$invalid}"><div class=input-group><span class=input-group-addon id=sizing-addon2>Sub Type</span><select name ng-model=subtype id class=form-control required><option value=optiongender>Gender</option><option value=optiontitle>Title</option><option value=optionarea>Area</option><option value=optiondispatchmethod>Dispatch Method</option><option value=optionservicetype>Service Type</option><option value=optionserviceclass>Service Class</option><option value=optionclinicalhistory>Clinical History</option><option value=optionpaymentmode>Payment Mode</option></select></div></div></div></div><div class=row ng-show="setType == \'mastertests\'"><div class=col-lg-12><div class="form-group has-feedback" ng-class="{\'has-error\':formImport.file.$invalid}"><div class=input-group><span class=input-group-addon id=sizing-addon2>Sub Type</span><select name ng-model=subtype id class=form-control required><option value=tests>Test</option><option value=testtubes>Test Tubes</option></select></div></div></div></div><div class=row ng-show=result.done><div class="col-xs-6 col-sm-4"><div class="alert alert-success"><strong>Record Inserted</strong> <strong class="text-center pull-right">{{result.insertCount}}</strong></div></div><div class="col-xs-6 col-sm-4"><div class="alert alert-success"><strong>Record Updated</strong> <strong class="text-center pull-right">{{result.updateCount}}</strong></div></div><div class="col-xs-6 col-sm-4"><div class="alert alert-danger"><strong>Error!</strong><strong class="text-center pull-right">{{result.errorCount}}</strong></div></div></div><div class=modal-footer><a href=partials/templates/{{setType}}.csv class="btn btn-primary" ng-model=downloadFileName download={{setType}}.csv ng-click="display.file=flase;">Download <span class="glyphicon glyphicon-download-alt"></span></a> <button type=button class="btn btn-default" ng-init data-dismiss=modal ng-click=close()>Close</button> <button type=button class="btn btn-primary" ng-click=saveFile($selectedFile) ng-model=importFile>Import</button></div></form></div></div></div></div>'),e.put("partials/order/modal/acceptNewAddress.modal.html",'<div class="modal fade" id=addingNewAddressFromExixting tabindex=-1 role=dialog aria-labelledby=addingNewAddressFromExixting><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><div class=modal-body><div class=row><div class=col-sm-12><div class="alert alert-success">Are you sure, you want to add address against patient?</div></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=saveClientAddress()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div></div>'),e.put("partials/order/modal/addAddress.modal.html",'<div class="modal fade" id=addAddressModal role=dialog data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Add address</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right" ng-click=cancelAddAddress()>Cancel</button> <button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-primary pull-right" ng-disabled="addressForm.$invalid || !modal.addAddressModal.sublocation_id" ng-click=saveNewAddress()>Save</button></div><div class=modal-body><form name=addressForm><div class=row ng-if=!modal.addAddressModal._id><center><div class=col-md-12 style=padding-right:5px;><div class=col-md-4 style=padding-left:0px;><div class="form-group input-group input-group-sm pull-left" style="margin-bottom: 0px"><center><div class=form-group><label for=inputType></label><div class><input type=checkbox value=slotarea ng-click=setAreaSlots() ng-model=modal.addAddressModal.slotareaCheck> <strong>Partner slot area</strong></div></div></center></div></div><div class=col-md-4><div class="form-group input-group input-group-sm pull-left" ng-click=setOtherSlots() style="margin-bottom: 0px;"><center><div class=form-group><label for=inputType></label><div class><input type=checkbox value=otherarea ng-model=modal.addAddressModal.otherareaCheck> <strong>Other Area</strong></div></div></center></div></div></div></center></div><div class=row ng-if=!modal.addAddressModal._id><div class=col-md-12 style=padding-right:5px;><tags-input id=tag ng-model=modal.addAddressModal.otherarea display-property=name key-property=_id placeholder="search area by name or pincode" replace-spaces-with-dashes=false add-from-autocomplete-only=true name=temp.services template=tag-template min-tags=1 max-tags=1 on-tag-added=checkValidation($tag) on-tag-removing=tagRemoved($tag)><auto-complete source=searchArea($query) template=autocomplete-template></auto-complete></tags-input></div></div><br><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressForm.title.$invalid }"><span class=input-group-addon><strong>Address Type</strong></span><select name=title ng-model=modal.addAddressModal.title class=form-control ng-options="title.displayname as title.displayname for title in temp.AddressType.childs" ng-init="title.displayname == \'Home\'" required><option value>--Select Address Type--</option></select></div></div></div><div class=row><div class=col-md-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !modal.addAddressModal.city_id.name}"><span class=input-group-addon><strong>City</strong></span> <input type=text class=form-control ng-model=modal.addAddressModal.city_id.name readonly></div></div></div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !modal.addAddressModal.sublocation_id}"><span class=input-group-addon><strong>Sub location</strong></span><tags-input ng-model=temp.sublocation_id display-property=name on-tag-added=changesublocation(addaddress.sublocation_id) placeholder="Sub location" add-from-autocomplete-only=true on-tag-removed=tagRemovednew($tag)><auto-complete source=loadSublocation($query) debounce-delay=1000 max-results-to-show=10></auto-complete></tags-input></div></div></div><div class=row><div class=col-md-4><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.addpincode.$invalid }"><span class=input-group-addon><strong>Pincode</strong></span> <input type=text class=form-control ng-model=modal.addAddressModal.pincode readonly></div></div><div class=col-md-4 style=padding-left:5px;padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.plotno.$invalid }"><span class=input-group-addon><strong>Wing</strong></span> <input name=plotno type=text placeholder class=form-control ng-model=modal.addAddressModal.wing></div></div><div class=col-md-4><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Flat</strong></span> <input name=sectorno type=text placeholder class=form-control ng-model=modal.addAddressModal.flatno></div></div><div class=col-md-4 style=padding-right:5px;><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Floor</strong></span> <input name=sectorno type=text placeholder class=form-control ng-model=modal.addAddressModal.floor></div></div><div class=col-md-4 style=padding-left:5px;padding-right:5px;><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Plot</strong></span> <input name=plotno type=text placeholder class=form-control ng-model=modal.addAddressModal.plotno></div></div><div class=col-md-4 style=padding-left:5px;><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Sector no</strong></span> <input name=sectorno type=text placeholder class=form-control ng-model=modal.addAddressModal.sectorno></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressForm.building.$invalid }"><span class=input-group-addon><strong>Building / Bunglow</strong></span> <input name=building type=text placeholder class=form-control ng-model=modal.addAddressModal.building required></div></div><div class=col-md-6 style=padding-left:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressForm.streetname.$invalid }"><span class=input-group-addon><strong>Street Name</strong></span> <input name=streetname type=text placeholder class=form-control ng-model=modal.addAddressModal.streetname></div></div></div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressForm.landmark.$invalid }"><span class=input-group-addon><strong>Landmark</strong></span> <input name=landmark type=text placeholder class=form-control ng-model=modal.addAddressModal.landmark required></div></div></div></form></div></div></div></div><script type=text/ng-template id=autocomplete-template><div>{{data.name}}<!-- - <small>{{data.pincodes.join(\',\')}}</small> --></div></script><script type=text/ng-template id=tag-template><div>{{data.name}} <!-- - <small>{{data.pincodes.join(\',\')}}</small> --></div></script>'),e.put("partials/order/modal/addLogistics.modal.html",'<div class="modal fade" id=editlogistics role=dialog style="display: none;overflow-y: scroll;"><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Add/edit logistics</h4><button type=button class="btn btn-primary pull-right" style="margin-right:5px;margin-top: -30px;" ng-if="modal.editlogistics.delivertype ==\'DeliverToLab\'" data-dismiss=modal ng-click=saveLogistics() ng-disabled=frmlogistic.$invalid>Save</button><button type=button class="btn btn-default pull-right" style="margin-right:5px;margin-top: -30px;" ng-click=closeandchedcklogisticModal()>Close</button></div><div class=modal-body><form name=frmlogistic><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.plotno.$invalid }"><span class=input-group-addon><strong>Delivery To</strong></span><select name=delivertype ng-model=modal.editlogistics.delivertype class=form-control ng-change=getLogUser() required><option value=DeliverToLab ng-disabled="order.status == \'Completed\' || order.status == \'SampleHandover\'">Deliver To Lab</option><option value=HandoverToLogistics ng-disabled=temp.logCheck>Delivery To Logistics</option></select></div></div></div><div ng-if=temp.logCheck style="padding-bottom: 12px;"><span style=color:red;><sup>**</sup> sample handover time has exceeded 8 hours from visit time</span></div><div class=row ng-if="modal.editlogistics.delivertype == \'HandoverToLogistics\'"><div class=col-md-6><div class="input-group form-group" ng-class="{ \'has-error\': modal.editlogistics.pickupdate.$invalid }"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=modal.editlogistics.pickupdate is-open=datePickerPopup.dp_searchDate close-text=Close ng-click="openDatePicker($event,\'dp_searchDate\');" ng-change="temp.logisticList=[]" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span> <span class=input-group-btn><button class="btn btn-default btn-sm" type=button><i class="glyphicon glyphicon-search"></i></button></span></div></div><div class=col-md-6><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': frmlogistic.time.$invalid }"><span class=input-group-addon><strong>At</strong></span><select name=time ng-model=modal.editlogistics.pickuptime class=form-control required ng-disabled=temp.logCheck ng-change="temp.logisticList=[]"><option value>-- time --</option><option value={{time}} ng-repeat="time in temp.timeSlots20 track by $index" ng-selected="modal.editlogistics.pickuptime == time">{{time | waqt}}</option></select></div></div><div class=col-md-12 style="margin-bottom: 5px;"><strong><input type=checkbox ng-model=modal.editlogistics.patientaddress ng-disabled=temp.logCheck ng-change=copyDropPoint(modal.editlogistics.patientaddress)> Copy patient address</strong></div><div class=col-md-12><div class="form-group input-group" ng-class="{ \'has-error\': frmlogistic.pickuppoint.$invalid }" ng-disabled=temp.logCheck><span class="input-group-addon input-sm"><strong>Place</strong></span> <textarea msd-elastic id=pickupsddress name=pickuppoint placeholder="pick up address" class=form-control ng-model=modal.editlogistics.pickuppoint ng-disabled=modal.editlogistics.patientaddress ng-change=addressCheck() required></textarea></div></div><div class=col-md-12 style=margin-bottom:15px;><center><button type=button class="btn btn-primary" ng-disabled="!(modal.editlogistics.pickupdate && modal.editlogistics.pickuptime && modal.editlogistics.pickuppoint)" ng-click=getLogistic()>Choose Logistics Officer</button></center></div><div style="margin-bottom: 7px;"><center>Logistic for major area: <strong>{{order.servicedeliveryaddress.area_id.name}}</strong>&nbsp;ON&nbsp;<b>{{modal.editlogistics.pickupdate | date:\'dd-MMM-yyyy\'}}</b><span ng-if=modal.editlogistics.pickuptime>&nbsp;AT&nbsp;<strong>{{modal.editlogistics.pickuptime | waqt}}</strong></span></center></div><div class=col-md-12 ng-if="modal.editlogistics.pickupdate && modal.editlogistics.pickuptime && modal.editlogistics.pickuppoint && checkPoint"><div class=table-responsive><table class="table table-bordered"><tbody style="background-color:white;max-height:270px;height:270px;overflow-y: auto;display: block;"><tr ng-repeat="user in temp.logisticList | orderBy:\'profile.name\'"><td><h4 style=margin:0px>{{user.profile.name}}</h4>{{user.profile.mobilenumber}}<p><button type=button class="btn btn-primary btn-sm" ng-disabled="!(modal.editlogistics.pickupdate && modal.editlogistics.pickuptime && modal.editlogistics.pickuppoint)" ng-click=saveLogistics(user)>Assign</button></p></td><td style=width:100%;><div ng-repeat="odr in user.orders | orderBy:\'logistic.pickuptime\'"><div class=alert role=alert ng-class="{\'alert-danger\':odr._id != order._id,\'alert-info\':odr._id == order._id}" style="padding-top: 5px;padding-bottom: 5px;margin-bottom: 5px;"><div style=margin:0px;float:left><h4>{{odr.logistic.pickuptime | waqt}}</h4><p><small><strong>Partner: {{odr.partner_id.info.name}}</strong><br><strong>Address:</strong>{{odr.logistic.pickuppoint}}<br><strong>Patient info:</strong>{{odr.client_id.demography.salution}} {{odr.client_id.demography.fullname}}</small></p></div><div style="margin:0px;float:right;text-align: center;"><h4>{{odr.assignto.profile.name}}</h4><img ng-if="odr.status==\'Cancelled\'" height=85 width=85 src=../../../images/cancelled.png></div><p style=clear:both></p></div></div></td></tr></tbody></table></div></div></div></form></div></div></div></div>'),e.put("partials/order/modal/addingaddressfromexisting.modal.html",'<div class="modal fade" id=addAddressModalforexisting role=dialog style=overflow-y:scroll><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-disabled=!newAddressArray.length ng-click=addressAccept()>Save</button><h4 class=modal-title>Add address</h4></div><div class=modal-body><div class=row><div class="col-md-10 col-md-offset-1"><div class="panel panel-default" ng-repeat="tempdata in addressfinalData track by $index" ng-if=addressfinalData.length><div class="list-group-item line-break" style="border: none;border-bottom: 2px solid #ddd;"><span class=pull-right><input type=checkbox name=selectedAddress[] value={{tempdata}} ng-checked="newAddressArray.indexOf(tempdata) > -1" id=$index ng-click=selectedAddressCheck(tempdata)></span> <strong>{{tempdata.title}}</strong><br>{{tempdata.address2}}<br><div><b>Landmark:</b> {{tempdata.landmark}}</div><div style=margin-top:3px ng-if=tempdata.area_id.name><b>Slot Area:</b> {{tempdata.area_id.name}}</div></div></div><div ng-if=!addressfinalData.length><p style=color:red;>Address is not available<sup>**</sup></p></div></div></div></div></div></div></div>'),e.put("partials/order/modal/alertgoogleMapSlot.modal.html",'<div class="modal fade" id=alertSlotArea tabindex=-1 role=dialog aria-labelledby=alertSlotArea><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button></div><div class=modal-body><div class=row><div class=col-sm-12><div class="alert alert-success"><p>Please select the address from area {{address.selectedFromAreaname}}</p></div></div></div></div><div class=modal-footer><span style=pull-right><button type=button class="btn btn-gray btn-primary" ng-click=openModelGamp()>Ok</button></span></div></div></div></div>'),e.put("partials/order/modal/cancelOrder.modal.html",'<div class="modal fade" id=cancelOrderModal role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button ng-if=!temp.ppTestFlag style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-disabled="(!modal.cancelOrderModal.reason.length) || (temp.checkVisitChargeReson && !temp.visitChargeReason)" ng-click=cancelOrder()>Save</button> <button ng-if=temp.ppTestFlag style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-disabled="(!modal.cancelOrderModal.reason.length) || (temp.checkVisitChargeReson && !temp.visitChargeReason)" ng-click=cancelOrder()>Save</button><h4 class=modal-title>Cancel order</h4></div><div class=modal-body><form name=cancelOrderForm><div class=row><div class=col-md-12 style=padding-right:5px;><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !modal.cancelOrderModal.reason.length }"><span class=input-group-addon><strong>Reason</strong></span><select name=reason ng-model=temp.reason class=form-control ng-options="cancel.displayname as cancel.displayname for cancel in cancelMaster | orderBy:\'priority\'" ng-change=addCancelReason(temp.reason) required><option ng-selected=true value>--SELECT Reason--</option></select></div></div></div><div class=row ng-if=temp.checkVisitChargeReson><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !temp.visitChargeReason }"><span class=input-group-addon><strong>VISIT CHARGE COLLECTED</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=temp.visitChargeReason></textarea></div></div></div><div class=row ng-if=modal.cancelOrderModal.reason.length><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="cr in modal.cancelOrderModal.reason"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{cr}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeCancelReason($index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if=temp.existCancelReson><div class=col-sm-12><div class="alert alert-info" role=alert>Already Added.</div></div></div></form></div></div></div></div>'),e.put("partials/order/modal/checklogistic.modal.html",'<div class="modal fade" id=checkLogisticmodal tabindex=-1 role=dialog aria-labelledby=checkLogisticmodal><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><div class=modal-body><div class=row><div class=col-sm-12><div class="alert alert-success">It seems you have made changes. Kindly click on "Choose Logistics Officer", click on "Assign" button to save changes.</div></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=reOpenlogisticModal()>ok</button> <button type=button class="btn btn-gray" data-dismiss=modal>cancel</button></span></div></div></div></div></div>'),e.put("partials/order/modal/confirmPhlebo.modal.html",'<div class="modal fade" id=confirmPhleboModal tabindex=-1 role=dialog aria-labelledby=rconfirmPhleboModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancleAssignPhlebo()><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=confirmPhleboModalLabel>Alert !!!</h4></div><div class=modal-body><div class="alert alert-danger" role=alert><center>Phlebo already assigned to different address at {{order.fromtime | waqt}},<br>you are not allowed to assign {{phlebo.profile.name}}</center></div></div><div class=modal-footer><span style=pull-right><button type=button class="btn btn-primary" data-dismiss=modal ng-click=cancleAssignPhlebo()>Ok</button></span></div></div></div></div>'),e.put("partials/order/modal/confirmUnassignPhlebo.modal.html",'<div class="modal fade" id=unassignPhleboModal tabindex=-1 role=dialog aria-labelledby=unassignPhleboModal><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancleUnassignPhlebo()><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading">Alert !!!</h4></div><div class=modal-body><div class="alert alert-danger" role=alert><center>Are you sure, you want to unassign phlebo ?</center></div></div><div class=modal-footer><span style=pull-right><button type=button class="btn btn-primary" data-dismiss=modal ng-click=unassignPhlebo()>yes</button> <button type=button class="btn btn-default" data-dismiss=modal ng-click=cancleUnassignPhlebo()>No</button></span></div></div></div></div>'),e.put("partials/order/modal/editAddress.modal.html",'<div class="modal fade" id=editAddressModal role=dialog style=overflow-y:scroll><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-click=changeAddress()>Save</button><h4 class=modal-title>Change address</h4></div><div class=modal-body><div class=row ng-repeat="adr in modal.changeAddressModal.addresses" ng-click=onAddressClick(adr._id) ng-if=adr.area_id.name><div class=col-md-12><blockquote style="border-left: 5px solid #C33434; font-size:13px;" ng-if="adr.servicedeliveryaddress == \'true\'"><address class=line-break style="margin-bottom: 0px;"><strong>{{adr.title}}</strong><br>{{adr.address2}}<div><b>Landmark:</b>{{adr.landmark}}</div><div style=margin-top:3px ng-if=adr.area_id.name><b>Slot Area:</b>{{adr.area_id.name}}</div></address></blockquote><blockquote style="border-left: 5px solid #fff; font-size:13px; cursor:pointer;" ng-if="adr.servicedeliveryaddress == \'false\'"><address class=line-break style="margin-bottom: 0px;"><strong>{{adr.title}}</strong><br>{{adr.address2}}<div><b>Landmark:</b>{{adr.landmark}}</div><div style=margin-top:3px ng-if=adr.area_id.name><b>Slot Area:</b>{{adr.area_id.name}}</div></address></blockquote></div></div><div class=row style=margin-top:10px><div class=col-md-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-click=openAddAddress() data-dismiss=modal>ADD NEW ADDRESS 9</button></div><div class=col-md-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-click=openAddAddressFromExisting() data-dismiss=modal>ADD ADDRESS FROM GROUP PATIENTS ADDRESS</button></div></div></div></div></div></div>'),e.put("partials/order/modal/editClient.modal.html",'<div class="modal fade" id=editClient role=dialog><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Edit Client</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-primary pull-right" ng-click=saveEditClient() ng-disabled="(!newpatient.salutation || !newpatient.firstname || !newpatient.lastname || !newpatient.gender || !newpatient.age || !newpatient.agetype || !newpatient.mobilenumber || !temp.validEmail || patientFrm.$invalid)">Save</button></div><div class=modal-body><form name=patientFrm><span ng-if=newpatient><ng-demography newpatient=newpatient temp=temp></ng-demography></span></form></div></div></div></div>'),e.put("partials/order/modal/editComment.modal.html",'<div class="modal fade" id=editComment role=dialog><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>ADD / Edit Phlebo Comments</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button><button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-primary pull-right" ng-disabled=!modal.editCommentModal.comment ng-if="modal.buttontype==\'add\'" ng-click=saveEditComment()>Save</button> <button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-primary pull-right" ng-if="modal.buttontype==\'edit\'" ng-click=saveEditComment()>Save</button></div><div class=modal-body><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Phlebo Comments</strong></span> <textarea msd-elastic type=text name value placeholder ng-model=modal.editCommentModal.comment class=form-control>\n                            </textarea></div></div></div></div></div></div></div>'),e.put("partials/order/modal/groupSummary.modal.html","<div class=\"modal fade\" id=groupSummaryModal tabindex=-1 role=dialog aria-labelledby=groupSummaryModal aria-hidden=true style=\"display: none;overflow-y: scroll;\" data-backdrop=static data-keyboard=false><div class=\"modal-dialog modal-lg\"><div class=modal-content><div class=modal-header><button style=\"margin-right:5px;margin-top: -7px;\" data-dismiss=modal aria-label=Close class=\"btn btn-default pull-right\">Close</button><h4 class=modal-title>Group Summary</h4></div><div class=modal-body style=padding:28px;><div class=table-responsive><table class=\"table table-bordered\"><thead><tr><th style=width:17%;><center>Patient Name</center></th><th style=width:23%;><center>Tests</center></th><th style=width:25%;><center>Patient Address</center></th><th style=width:13%;><center>Date time</center></th><th style=width:22%;><center>Test Charge<br><sub>After Discount (If Any)</sub></center></th></tr></thead><tbody ng-if=\"!(user.userdata.role == 'partnerfrontoffice' || user.userdata.role == 'partnerteamlead')\"><tr ng-repeat=\"(indexPatnt, patntObj) in temp.tempSummary | orderBy:['fromdate','fromtime']\" ng-init=grpOrdersDiscount(patntObj) ng-class=\"{'statuscompleted' : patntObj.status == 'SampleCollected','statusunassign' : patntObj.status == 'Unassigned', 'statusassign' : patntObj.status == 'Open' , 'statusreceived' : patntObj.status == 'Recieved', 'statusreached' : patntObj.status == 'Reached', 'statuscancelled' : patntObj.status == 'Cancelled', 'statusdelivered' : patntObj.status == 'Completed', 'statushandover' : patntObj.status == 'SampleHandover' }\"><td><span>{{patntObj.client_id.demography.salutation}} {{patntObj.client_id.demography.firstname}} {{patntObj.client_id.demography.middlename}} {{patntObj.client_id.demography.lastname}}</span> <sup ng-if=\"patntObj.ordertype=='PP'\"><small style=color:#0000FF;font-size:11px;><b>({{::patntObj.ordertype}})</b></small></sup></td><td><div style=\"max-height: 100px;height: auto;overflow-y: auto;display: block;\"><span ng-repeat=\"OrderService in patntObj.services\"><small>{{::OrderService.service_id.name}}{{$last?'':','}} &nbsp;</small></span></div></td><td><span>{{patntObj.servicedeliveryaddress.address2}}</span></td><td><center><span>{{ patntObj.fromdate | date:'dd-MMM-yyyy'}}</span><br><span>{{patntObj.fromtime | waqt}}</span></center></td><td ng-init=\"patntObj.servicePriceTotal = priceCal(patntObj)\"><center><span>Rs. {{patntObj.discountTotalAmount}}</span></center></td></tr><tr><td colspan=4><small class=\"pull-right testview\">Total Test Charge</small></td><td><center><span>Rs. {{columnDiscountPriceTotal}}</span></center></td></tr><tr ng-if=displayCharge.paymentdetails.totalvisitingcharges><td colspan=4><small class=\"pull-right testview\">Total visit charge</small></td><td><center><span>Rs. {{displayCharge.paymentdetails.totalvisitingcharges}}</span></center></td></tr><tr ng-if=displayCharge.paymentdetails.totalvisitingcharges><td colspan=4><small class=\"pull-right testview\">Grand Total</small></td><td><center><span>Rs. {{displayCharge.paymentdetails.totalvisitingcharges + columnDiscountPriceTotal | number }}</span></center></td></tr></tbody><tbody ng-if=\"user.userdata.role == 'partnerfrontoffice' || user.userdata.role == 'partnerteamlead'\"><tr ng-repeat=\"(indexPatnt, patntObj) in temp.tempSummary | orderBy:['fromdate','fromtime']\" ng-init=grpOrdersDiscount(patntObj) ng-class=\"{'statusunassign' : patntObj.status == 'Open' ,'statuscancelled' : patntObj.status == 'Cancelled', 'statuscompleted' : patntObj.status == 'SampleCollected','statusdelivered' : patntObj.status == 'Completed', 'statushandover' : patntObj.status == 'SampleHandover' }\"><td><span>{{patntObj.client_id.demography.salutation}} {{patntObj.client_id.demography.firstname}} {{patntObj.client_id.demography.middlename}} {{patntObj.client_id.demography.lastname}}</span> <sup ng-if=\"patntObj.ordertype=='PP'\"><small style=color:#0000FF;font-size:11px;><b>({{::patntObj.ordertype}})</b></small></sup></td><td><div style=\"max-height: 100px;height: auto;overflow-y: auto;display: block;\"><span ng-repeat=\"OrderService in patntObj.services\"><small>{{::OrderService.service_id.name}}{{$last?'':','}} &nbsp;</small></span></div></td><td><span>{{patntObj.servicedeliveryaddress.address2}}</span></td><td><center><span>{{ patntObj.fromdate | date:'dd-MMM-yyyy'}}</span><br><span>{{patntObj.fromtime | waqt}}</span></center></td><td ng-init=\"patntObj.servicePriceTotal = priceCal(patntObj)\"><center><span>Rs. {{patntObj.discountTotalAmount}}</span></center></td></tr><tr><td colspan=4><small class=\"pull-right testview\">Total Test Charge</small></td><td><center><span>Rs. {{columnDiscountPriceTotal}}</span></center></td></tr><tr ng-if=displayCharge.paymentdetails.totalvisitingcharges><td colspan=4><small class=\"pull-right testview\">Total visit charge</small></td><td><center><span>Rs. {{displayCharge.paymentdetails.totalvisitingcharges}}</span></center></td></tr><tr ng-if=displayCharge.paymentdetails.totalvisitingcharges><td colspan=4><small class=\"pull-right testview\">Grand Total</small></td><td><center><span>Rs. {{displayCharge.paymentdetails.totalvisitingcharges + columnDiscountPriceTotal | number }}</span></center></td></tr></tbody></table></div></div></div></div></div>"),e.put("partials/order/modal/imageslide.modal.html",'<div class="modal fade" id=openImageSlider role=dialog tabindex=-1 aria-labelledby=groupSummaryModal aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>Images</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button></div><div class=modal-body><carousel interval=myInterval><slide ng-repeat="slide in slides" active=slide.active><h4><a ng-click=openfile(slide.url) style="text-decoration: underline;cursor: pointer;">click here to open image</a></h4><img ng-src={{slide.url}} style=margin:auto;height:100%><div class=carousel-caption></div></slide></carousel></div></div></div></div>'),e.put("partials/order/modal/logdetail.modal.html",'<div class="modal fade" id=logDetailModal tabindex=-1 role=dialog aria-labelledby=logDetailModal style="overflow: scroll;"><div class="modal-dialog modal-lg" role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=logDetailModal>Details</h4></div><div class=modal-body><div class=table-responsive><table class="table table-bordered table-condensed"><tr><td>OLD</td><td>NEW</td></tr><tr><td><ul style="padding-left: 16px;margin-bottom: 0px;"><li ng-repeat="obj in temp.log.old"><b>{{obj.key}}:</b> <span>{{obj.value}}</span></li></ul></td><td><ul style="padding-left: 16px;margin-bottom: 0px;"><li ng-repeat="obj in temp.log.new"><b>{{obj.key}}:{{obj.value}}</b></li></ul></td></tr></table></div></div><div class=modal-footer><span style=pull-right><button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/order/modal/logisticComment.modal.html",'<div class="modal fade" id=logisticCommentmodal role=dialog><div class="modal-dialog modal-lg" role=document><div class=modal-content><div class=modal-header><h4 class=modal-title>ADD / Edit LO Comments</h4><button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-gray pull-right" data-dismiss=modal>Cancel</button> <button style="margin-right:5px;margin-top: -30px;" name=save type=button class="btn btn-primary pull-right" ng-disabled=!modal.logisticComment.logisticcomments ng-if="modal.act==\'add\'" ng-click=saveLogisticComment()>Save</button> <button style="margin-right:5px;margin-top: -30px;" name=save type=button class="btn btn-primary pull-right" ng-if="modal.act==\'edit\'" ng-click=saveLogisticComment()>Save</button></div><div class=modal-body><div class=row><div class=col-sm-12><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>LO comments</strong></span> <textarea msd-elastic id=locomments name=logisticcomments placeholder="logistic comments" class=form-control ng-model=modal.logisticComment.logisticcomments style=height:30px required></textarea></div></div></div></div><div class=modal-footer></div></div></div></div>'),e.put("partials/order/modal/openAttachment.modal.html",'<div class="modal fade" id=openAttachmentModal tabindex=-1 role=dialog aria-labelledby=openAttachmentModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style=margin-right:5px; data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button><h4 class=modal-title id=openAttachmentModal>{{temp.attachment.description}}</h4></div><div class=modal-body><img src={{temp.attachment.url}} class="img-responsive img-border" title="right click to save the image"></div></div></div></div>'),e.put("partials/order/modal/partnerService.modal.html",'<div class="modal fade" id=partnerServiceModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Close</button> <button style="margin-right:5px;margin-top: -7px;" type=button class="btn btn-primary pull-right" ng-click=updateOrderWithTest()>Update</button><h4 class=modal-title id=partnerServiceLabel ng-if=!editOnlyPP>Update tests</h4><h4 class=modal-title id=partnerServiceLabel ng-if=editOnlyPP>Remove PP test</h4></div><div class=modal-body><div class=table-responsive><table class="table table-bordered" ng-if=!editOnlyPP><tbody style=background-color:white><tr><td colspan=2><tags-input ng-model=modal.editTestModal.selectedservices display-property=name key-property=_id placeholder="search tests by name or code" replace-spaces-with-dashes=false add-from-autocomplete-only=true name=temp.services on-tag-adding=addTestTag($tag) on-tag-added=clearInvalid($tag) template=tag-template><auto-complete source=searchTestTags($query) template=testAutocomplete-template max-results-to-show=50></auto-complete></tags-input><span style=color:red;><small>{{temp.alertMessage}}</small></span></td></tr><tr class=active><td colspan=2>selected Tests {{newTag.text}}</td></tr><tr ng-repeat="service in modal.editTestModal.services"><td><small ng-click=removeTest($index)><i class="icon glyphicon glyphicon-remove"></i></small> <small class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}">{{service.service_id.name}}</small> <span ng-if="order.status != \'Completed\' && order.status != \'SampleCollected\' && order.status != \'SampleHandover\' && !order.addpatientcomment.addpatientreasons.length && !temp.isBackDate"><small ng-click=addPPTest(service.service_id.postservices) style=color:blue;font-size:15px; ng-if=showPPAddButton(service.service_id)><sup>add pp / pg tests ( delete any one )</sup></small></span></td><td><small class="pull-right testview" ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}">Rs. {{service.price}}</small></td></tr><tr><td><small class=pull-right>Test charge</small></td><td><small class=pull-right>Rs. {{modal.editTestModal.amount | number:0}}</small></td></tr><tr ng-if="discountperupdated != 0"><td><small class=pull-right>DISCOUNT <b>({{temp.discountname | uppercase}} {{discountperupdated}}%)</b></small></td><td><small class=pull-right>Rs. {{discountamountupdated | number:0}}</small></td></tr><tr ng-if="discountperupdated != 0"><td><small class=pull-right>TEST CHARGES AFTER DISCOUNT:</small></td><td><small class=pull-right>Rs. {{modal.editTestModal.amount - discountamountupdated | number:0}}</small></td></tr><tr ng-if="temp.charges.premiumpercentontest > 0"><td><small class=pull-right>Extra charge <b>({{temp.charges.premiumpercentontest}}%)</b></small></td><td><small class=pull-right>Rs. {{modal.editTestModal.premiumAmount | number:0}}</small></td></tr><tr><td><small class=pull-right>Total charge</small></td><td><small class=pull-right>Rs. {{modal.editTestModal.amount + modal.editTestModal.premiumAmount - discountamountupdated | number:0}}</small></td></tr></tbody></table><table class="table table-bordered" ng-if=editOnlyPP><tbody style=background-color:white><tr class=active><td>selected Tests {{newTag.text}}</td></tr><tr ng-repeat="service in modal.editTestModal.services"><td ng-if=service.ispp><small ng-click=removeTest($index)><i class="icon glyphicon glyphicon-remove"></i></small> <small class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}">{{service.service_id.name}}</small></td></tr></tbody></table></div></div></div></div></div><script type=text/ng-template id=testAutocomplete-template><div>{{data.name}} - <small>{{data.code}}</small></div></script>'),e.put("partials/order/modal/phlebo.modal.html",'<div class="modal fade" id=phleboModal tabindex=-1 role=dialog aria-labelledby=phleboModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Close</button><h4 class=modal-title id=partnerServiceLabel>Assign phlebo</h4></div><div class=modal-body><div class=table-responsive><table class="table table-bordered"><tbody style=background-color:white><tr><td colspan=2 class=active>Phlebotomist for major area: <strong>{{order.servicedeliveryaddress.area_id.name}}</strong> @ <strong>{{order.fromtime | waqt}}</strong></td></tr><tr ng-repeat="user in modal.phleboModal.users | orderBy:\'profile.name\'"><td><h4 style=margin:0px>{{user.profile.name}}</h4>{{user.profile.mobilenumber}}<p><button type=button class="btn btn-primary btn-sm" ng-click=assignPhlebo(user);>Assign</button></p></td><td><div class=alert role=alert ng-repeat="odr in user.orders" style="padding-top: 5px;padding-bottom: 5px;margin-bottom: 5px;" ng-class="{\'alert-danger\':odr._id != order._id,\'alert-info\':odr._id == order._id}"><h4 style=margin:0px class=pull-left>{{odr.fromtime | waqt}}</h4><span ng-if="odr.status==\'Cancelled\'"><img class=pull-right height=85 width=85 src=../../../images/cancelled.png></span><br><small style=clear:both><strong>Partner:{{odr.partner_id.info.name}}</strong><br><strong>Area:</strong> {{odr.servicedeliveryaddress.address2}}<br><strong>Patient info:</strong>{{odr.client_id.demography.salution}} {{odr.client_id.demography.fullname}}</small></div></td></tr></tbody></table></div></div></div></div></div>'),e.put("partials/order/modal/ppVisitConfirmation.modal.html",'<div class="modal fade" id=ppVisitConfirmationModal tabindex=-1 role=dialog aria-labelledby=ppVisitConfirmationModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">No</button> <button style="margin-right:5px;margin-top: -7px;" type=button class="btn btn-primary pull-right" ng-click=createPPVisit()>Yes</button><h4 class=modal-title id=ppVisitConfirmationModalLabel>Confirmation</h4></div><div class=modal-body><h3>Do you want to create PP visit?</h3></div></div></div></div>'),e.put("partials/order/modal/redirectToFasting.modal.html",'<div class="modal fade" id=redirectToFastingOrderModal role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title>Cancel PP visit</h4></div><div class=modal-body><form><div class=row><div class=col-md-12><div class=form-group><center>TO CANCEL THE PP VISIT, REMOVE THE PP TEST FROM THE "EDIT TEST" SECTION IN THE FASTING VISIT</center></div></div></div><div class=row><div class=col-md-12><div class=form-group><button type=button name=ppcancel style=margin-top:-2px; class="btn btn-primary btn-default" ng-click=gotoFasting()>Goto</button> <button data-dismiss=modal aria-label=Close class="btn btn-default">Cancel</button></div></div></div></form></div></div></div></div>'),e.put("partials/order/modal/reportdelivery.modal.html",'<div class="modal fade" id=reportdeliverymodal role=dialog><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><h4 class=modal-title>ADD / Edit Report delivery mode</h4><button style="margin-right:5px;margin-top: -30px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style="margin-right:5px;margin-top: -30px;" type=button class="btn btn-primary pull-right" ng-click=savereportdelivery()>Save</button></div><div class=modal-body><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Report delivery mode</strong></span><select name=paymentoption ng-model=display.reportdeliverymode class=form-control ng-options="po as po.mode for po in temp.reportdeliverymode | orderBy:\'mode\'" ng-change=addReportDelMode(display.reportdeliverymode)><option ng-selected=true value>--Report delivery mode--</option></select></div></div></div><div class=row ng-if=tempreport.reportdeliverymode.length><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="rn in tempreport.reportdeliverymode"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{rn.mode}} Rs.{{rn.charge}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeReportmode($index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if=temp.alredyshow><div class=col-sm-12><div class="alert alert-info" role=alert>Already Added.</div></div></div></div></div></div></div>'),e.put("partials/order/modal/rescheduleOrder.modal.html",'<div class="modal fade" id=rescheduleOrderModal tabindex=-1 role=dialog aria-labelledby=rescheduleOrderModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right" ng-click=closeReschedule()>Close</button> <button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal aria-label=Close class="btn btn-primary pull-right" ng-click=rescheduleOrder() ng-if=!ppOrder ng-disabled=!modal.openRescheduleOrderModal.selectedTime>Reschedule</button> <button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal aria-label=Close class="btn btn-primary pull-right" ng-click=rescheduleOrder() ng-if=ppOrder ng-disabled="!modal.openRescheduleOrderModal.selectedTime || !modal.schedulePPTestModal.ppfromtime">Reschedule</button><h4 class=modal-title id=rescheduleOrderModal>Reschedule</h4></div><div class=modal-body><tabset ng-if=ppOrder><tab heading=Fasting><div class=row><div class=col-sm-4>&nbsp;</div></div><div class=row><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm col-sm-2" datepicker-popup ng-model=modal.openRescheduleOrderModal.fromdate is-open=datePickerPopup.dp_fd close-text=Close min-date=datePickerPopup.minDate datepicker-options=datePickerPopup ng-click="openDatePicker($event,\'dp_fd\')" readonly ng-change=getWorkingHours();> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><br><div class=table-responsive><table class="table table-bordered"><tbody style=background-color:white><tr ng-repeat="slottime in modal.openRescheduleOrderModal.timeSlots" ng-if=slottime.available><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td style="padding-top: 5px;padding-bottom: 5px;"><div class="btn-group btn-group-sm" ng-repeat="slot in slottime.slots" style=margin-right:5px><button type=button class="btn dropdown-toggle" ng-class="{\'btn-danger\':!slot.available, \'btn-success\':slot.available, \'btn-warning\':slot.available == -1}" data-toggle=dropdown aria-haspopup=true aria-expanded=false ng-disabled=!slot.available><small ng-if="slot.available == true">{{slot.text}}</small> <span ng-if="!slot.available || slot.available == -1">{{slot.text | waqt}}</span> <span class=caret></span></button><ul class=dropdown-menu><li ng-repeat-start="subSlot in slottime.subSlots"><a ng-click=rescheduleTimeSelection(slot,subSlot)><small>{{subSlot | waqt}}</small></a></li><li role=separator class=divider ng-repeat-end ng-if=!$last></li></ul></div></td></tr></tbody></table></div></tab><tab heading=PP active=ppactive><div ng-if=modal.openRescheduleOrderModal.selectedTime><div class=row><div class=col-sm-4>&nbsp;</div></div><div class=row><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm col-sm-2" datepicker-popup ng-model=modal.schedulePPTestModal.fromdate is-open=datePickerPopup.dp_fd1 close-text=Close datepicker-options=datePickerPopup ng-click="openDatePicker($event,\'dp_fd1\')" readonly ng-change=getWorkingHoursForPPFromFasting(); min-date=modal.openRescheduleOrderModal.fromdate> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd1\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><br>PP visit time for {{ppOrder.client_id.demography.fullname}} is {{ppOrder.fromdate | date:\'dd-MMM-yyyy\'}} at {{ppOrder.fromtime | waqt}}<br><div class=table-responsive ng-if="!modal.schedulePPTestModal.isppordercancelled || !modal.schedulePPTestModal.timeSlots.length"><table class="table table-bordered"><tbody style=background-color:white><tr ng-repeat="slottime in modal.schedulePPTestModal.timeSlots" ng-if="checkpptab(slottime) && slottime.available"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td style="padding-top: 5px;padding-bottom: 5px;"><div class="btn-group btn-group-sm" ng-repeat="slot in slottime.slots" style=margin-right:5px><button type=button class="btn dropdown-toggle" ng-class="{\'btn-danger\':!slot.available, \'btn-success\':slot.available, \'btn-warning\':slot.available == -1}" data-toggle=dropdown aria-haspopup=true aria-expanded=false ng-disabled=!slot.available><small ng-if="slot.available == true">{{slot.text}}</small> <span ng-if="!slot.available || slot.available == -1">{{slot.text | waqt}}</span> <span class=caret></span></button><ul class=dropdown-menu><li ng-repeat-start="subSlot in slottime.subSlots"><a ng-click=rescheduleTimeSelectionPP(slot,subSlot)><small>{{subSlot | waqt}}</small></a></li><li role=separator class=divider ng-repeat-end ng-if=!$last></li></ul></div></td></tr></tbody></table></div><div ng-if=!modal.schedulePPTestModal.timeSlots.length>No Slots available for current date please try for next date</div></div><div ng-if=!modal.openRescheduleOrderModal.selectedTime><br>Please select visit time for fasting.</div></tab></tabset><div ng-if=!ppOrder><div class=row><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm col-sm-2" datepicker-popup ng-model=modal.openRescheduleOrderModal.fromdate is-open=datePickerPopup.dp_fd close-text=Close min-date=datePickerPopup.minDate datepicker-options=datePickerPopup ng-click="openDatePicker($event,\'dp_fd\')" readonly ng-change=getWorkingHours();> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><br><div class=table-responsive><table class="table table-bordered"><tbody style=background-color:white><tr ng-repeat="slottime in modal.openRescheduleOrderModal.timeSlots" ng-if="rechedulenonfastingandppcheck() && slottime.available"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td style="padding-top: 5px;padding-bottom: 5px;"><div class="btn-group btn-group-sm" ng-repeat="slot in slottime.slots" style=margin-right:5px><button type=button class="btn dropdown-toggle" ng-class="{\'btn-danger\':!slot.available, \'btn-success\':slot.available, \'btn-warning\':slot.available == -1}" data-toggle=dropdown aria-haspopup=true aria-expanded=false ng-disabled=!slot.available><small ng-if="slot.available == true">{{slot.text}}</small> <span ng-if="!slot.available || slot.available == -1">{{slot.text | waqt}}</span> <span class=caret></span></button><ul class=dropdown-menu><li ng-repeat-start="subSlot in slottime.subSlots"><a ng-click=rescheduleTimeSelection(slot,subSlot)><small>{{subSlot | waqt}}</small></a></li><li role=separator class=divider ng-repeat-end ng-if=!$last></li></ul></div></td></tr></tbody></table></div></div><div ng-if=!modal.openRescheduleOrderModal.timeSlots.length>No slots available</div></div></div></div></div>'),e.put("partials/order/modal/schedulePPTest.modal.html",'<div class="modal fade" id=schedulePPTestModal tabindex=-1 role=dialog aria-labelledby=rescheduleOrderModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Close</button> <button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal aria-label=Close class="btn btn-primary pull-right" ng-click=updateNewPPTest() ng-disabled=!modal.schedulePPTestModal.ppfromtime>Schedule</button><h4 class=modal-title id=schedulePPTestModal>Schedule PP Visit</h4></div><div class=modal-body><div class=row><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=modal.schedulePPTestModal.fromdate is-open=datePickerPopup.dp_fd close-text=Close min-date=minppdate datepicker-options=datePickerPopup ng-click="openDatePicker($event,\'dp_fd\')" readonly ng-change=getWorkingHoursForPP();> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><br><div class=table-responsive ng-if=modal.schedulePPTestModal.timeSlots.length><table class="table table-bordered"><tbody style=background-color:white><tr ng-repeat="slottime in modal.schedulePPTestModal.timeSlots" ng-if="checkpp(slottime) && slottime.available"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td style="padding-top: 5px;padding-bottom: 5px;"><div class="btn-group btn-group-sm" ng-repeat="slot in slottime.slots" style=margin-right:5px><button type=button class="btn dropdown-toggle" ng-class="{\'btn-danger\':!slot.available, \'btn-success\':slot.available, \'btn-warning\':slot.available == -1}" data-toggle=dropdown aria-haspopup=true aria-expanded=false ng-disabled=!slot.available><small ng-if="slot.available == true">{{slot.text}}</small> <span ng-if="!slot.available || slot.available == -1">{{slot.text | waqt}}</span> <span class=caret></span></button><ul class=dropdown-menu><li ng-repeat-start="subSlot in slottime.subSlots"><a ng-click=rescheduleTimeSelectionPP(slot,subSlot)><small>{{subSlot | waqt}}</small></a></li><li role=separator class=divider ng-repeat-end ng-if=!$last></li></ul></div></td></tr></tbody></table></div><div ng-if=!modal.schedulePPTestModal.timeSlots.length>No slots available</div></div></div></div></div>'),e.put("partials/order/newpporder/newpporder.object.html",'<div><h2>New PP order<small><sup><a href=#/main/order class="btn btn-link btn-xs">back to list</a></sup></small></h2><div class="alert alert-warning alert-dismissible" role=alert><button type=button class=close data-dismiss=alert aria-label=Close><span aria-hidden=true>&times;</span></button> <strong></strong> {{parentOrder | json}}</div></div>'),e.put("partials/partner/areas/cell.modal.html",'<div class="modal fade" id=cellSlotModel tabindex=-1 role=dialog aria-labelledby=cellSlotModelLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=cellSlotModelLabel>Update slot</h4></div><div class=modal-body><form name=cellForm><div class="row form-group"><div class=col-md-3><strong>Day / Time</strong></div><div class=col-md-4>{{display.day}} / {{display.time | waqt}}</div></div><div class=row><div class=col-md-3><strong>Slot</strong></div><div class=col-md-4><input type=text class=form-control name=slot placeholder=slot ng-model=temp.cellSlot required=temp.cellSlot></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click="saveCellSlot(display.day, display.time, temp.cellSlot)" class="btn btn-primary" ng-disabled=cellForm.$invalid>Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/areas/column.modal.html",'<div class="modal fade" id=columnSlotModel tabindex=-1 role=dialog aria-labelledby=columnSlotLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=columnSlotLabel>Update slot</h4></div><div class=modal-body><form name=columnForm><div class="row form-group"><div class=col-md-2><strong>Day</strong></div><div class=col-md-4>{{display.day}}</div></div><div class="row form-group"><div class=col-md-2><strong>From time</strong></div><div class=col-md-4><select name=fromtime class=form-control ng-model=temp.fromtime required ng-change=changeSlotTime()><option ng-repeat-start="timeslot in dayTimeSlots track by $index" value={{timeslot}}>{{timeslot.time | waqt}}</option><option ng-repeat-end ng-if="timeslot.time==990">--evening slot--</option></select></div><div class=col-md-2><strong>To time</strong></div><div class=col-md-4><select name=totime class=form-control ng-model=temp.totime required ng-change=changeSlotTime()><option ng-repeat-start="timeslot in dayTimeSlots track by $index" value={{timeslot}}>{{timeslot.time | waqt}}</option><option ng-repeat-end ng-if="timeslot.time==990">--evening slot--</option></select></div></div><div class=row><div class=col-md-2><strong>Slot</strong></div><div class=col-md-4><input type=text class=form-control name=slot ng-model=temp.columnSlot required></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click="saveColumnSlot(display.day, temp.columnSlot)" class="btn btn-primary" ng-disabled=columnForm.$invalid>Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/areas/partnerarea.html",'<div ng-controller=partnerAreaController><div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 xstrasm" style=padding-left:0px><h2>Slots <small><sup><a class="btn btn-gray" id=adduser-btn data-toggle=modal data-target=#addAddresstModal>Add area</a></sup></small> <small><sup><a class="btn btn-gray" id=adduser-btn data-toggle=modal data-target=#removeAreaModal>Remove area</a></sup></small></h2></div><span class><div class="col-lg-4 col-md-4 col-sm-8 col-xs-8 xstrasm" style=padding-right:0px;><select class="form-control input-sm" style=margin-top:25px name=partner ng-model=partner ng-options="part as part.info.name for part in display.partners | orderBy:\'info.name\'" required ng-change=setAreaAndTime(partner.info.city_id._id,partner.workinghour)><option value selected>---Select partner---</option></select></div></span><div ng-show=!partner><div class=row><div class="col-lg-12 col-sm-12"><div class="alert alert-info" role=alert><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> Please select partner</div></div></div></div><div class=tablewrapper><div class=row><div class="col-lg-12 col-sm-12"><tabset><tab ng-repeat="area in partner.areas" heading={{area.area_id.name}} active=area.tabActive ng-click=areaChange(area)><table class="table table-bordered table-hover" style="background-color: white;" ng-show=tempTabActive><th></th><th><center ng-click="columnModal(\'Monday\')">MONDAY</center></th><th><center ng-click="columnModal(\'Tuesday\')">TUESDAY</center></th><th><center ng-click="columnModal(\'Wednesday\')">WEDNESDAY</center></th><th><center ng-click="columnModal(\'Thursday\')">THURSDAY</center></th><th><center ng-click="columnModal(\'Friday\')">FRIDAY</center></th><th><center ng-click="columnModal(\'Saturday\')">SATURDAY</center></th><th><center ng-click="columnModal(\'Sunday\')">SUNDAY</center></th><tr ng-repeat-start="timeslot in temp.timeSlots track by $index" ng-if="timeslot.time==390 || timeslot.time == 990"><td colspan=8 style=background-color:silver><center ng-if="timeslot.time==390">Morning</center><center ng-if="timeslot.time==990">Evening</center></td></tr><tr ng-repeat-end><td ng-click=rowModal($index,timeslot.time)><strong><center>{{timeslot.time | waqt}}</center></strong></td><td><button type=button ng-if=timeslot.monday class="btn btn-block btn-primary btn-xm" ng-click="cellModal(\'Monday\', timeslot.time, timeslot.monday)">{{timeslot.monday}}</button> <button type=button ng-if="!timeslot.monday && timeslot.mondayFlag" ng-click="cellModal(\'Monday\', timeslot.time, 0)" class="btn btn-block btn-danger btn-xm">add</button></td><td><button ng-if=timeslot.tuesday ng-click="cellModal(\'Tuesday\', timeslot.time, timeslot.tuesday)" class="btn btn-block btn-primary btn-xm">{{timeslot.tuesday}}</button> <button type=button ng-click="cellModal(\'Tuesday\', timeslot.time, 0)" ng-if="!timeslot.tuesday && timeslot.tuesdayFlag" class="btn btn-block btn-danger btn-xm">add</button></td><td><button ng-if=timeslot.wednesday ng-click="cellModal(\'Wednesday\', timeslot.time, timeslot.wednesday)" class="btn btn-block btn-primary btn-xm">{{timeslot.wednesday}}</button> <button type=button ng-click="cellModal(\'Wednesday\', timeslot.time, 0)" ng-if="!timeslot.wednesday && timeslot.wednesdayFlag" class="btn btn-block btn-danger btn-xm">add</button></td><td><button ng-if=timeslot.thursday ng-click="cellModal(\'Thursday\', timeslot.time, timeslot.thursday)" class="btn btn-block btn-primary btn-xm">{{timeslot.thursday}}</button> <button type=button ng-click="cellModal(\'Thursday\', timeslot.time, 0)" ng-if="!timeslot.thursday && timeslot.thursdayFlag" class="btn btn-block btn-danger btn-xm">add</button></td><td><button ng-if=timeslot.friday ng-click="cellModal(\'Friday\', timeslot.time, timeslot.friday)" class="btn btn-block btn-primary btn-xm">{{timeslot.friday}}</button> <button type=button ng-click="cellModal(\'Friday\', timeslot.time, 0)" ng-if="!timeslot.friday && timeslot.fridayFlag" class="btn btn-block btn-danger btn-xm">add</button></td><td><button ng-if=timeslot.saturday ng-click="cellModal(\'Saturday\', timeslot.time, timeslot.saturday)" class="btn btn-block btn-primary btn-xm">{{timeslot.saturday}}</button> <button type=button ng-click="cellModal(\'Saturday\', timeslot.time, 0)" ng-if="!timeslot.saturday && timeslot.saturdayFlag" class="btn btn-block btn-danger btn-xm">add</button></td><td><button ng-if=timeslot.sunday ng-click="cellModal(\'Sunday\', timeslot.time, timeslot.sunday)" class="btn btn-block btn-primary btn-xm">{{timeslot.sunday}}</button> <button type=button ng-click="cellModal(\'Sunday\', timeslot.time, 0)" ng-if="!timeslot.sunday && timeslot.sundayFlag" class="btn btn-block btn-danger btn-xm">add</button></td></tr></table></tab></tabset></div></div></div><div ng-include="\'partials/partner/areas/row.modal.html\'"></div><div ng-include="\'partials/partner/areas/cell.modal.html\'"></div><div ng-include="\'partials/partner/areas/column.modal.html\'"></div><div ng-include="\'partials/partner/modal/addAddress.modal.html\'"></div><div ng-include="\'partials/partner/modal/removeArea.modal.html\'"></div><div ng-include="\'partials/partner/modal/confirmRemoveArea.html\'"></div></div>'),e.put("partials/partner/areas/row.modal.html",'<div class="modal fade" id=rowSlotModel tabindex=-1 role=dialog aria-labelledby=rowSlotLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=rowSlotLabel>Update slot</h4></div><div class=modal-body><form name=rowForm><div class=row><div class="alert alert-warning" role=alert>Save will override all <strong>{{display.time | waqt}}</strong> slots with new given slot.</div></div><div class="row form-group"><div class=col-md-2><strong>Time</strong></div><div class=col-md-4>{{display.time | waqt}}</div></div><div class=row><div class=col-md-2><strong>Days</strong></div><div class=col-md-10><ng-daypicker d-active=temp.activeDays d-model=temp.rowDay></ng-daypicker></div></div><div class=row><div class=col-md-2><strong>Slot</strong></div><div class=col-md-4><input type=text class=form-control name=slot ng-model=temp.rowSlot required></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click="saveRowSlot(display.time, temp.rowSlot)" class="btn btn-primary" ng-disabled="rowForm.$invalid || (temp.rowDay.length == 0 || !temp.rowDay)">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/ConfirmPopupChangeVisitChargeTime.modal.html",'<div class="modal fade" id=ConfirmPopupChangeVisitChargeTime tabindex=-1 role=dialog aria-labelledby=ConfirmPopupChangeVisitChargeTimeLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=ConfirmPopupChangeVisitChargeTimeLabel>Change Working Hours</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to change working hour time? This will changes Visit Charge time as it is beyond Working hours.</div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=changeVCTimeOnWHTime()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/ConfirmPopupDeleteDropPoint.modal.html",'<div class="modal fade" id=ConfirmPopupDeleteDropPoint tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove Drop Point</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove drop point?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=confirmDeleteDropPoint()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/ConfirmPopupDeleteForVisitCharge.modal.html",'<div class="modal fade" id=ConfirmPopupDeleteForVisitCharge tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove Visit Charge</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove visit charge?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=confirmDeleteVisitCharge()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal ng-click=closeVCDeleteConfirmModal()>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/ConfirmPopupDeleteForWorkinHour.modal.html",'<div class="modal fade" id=ConfirmPopupDeleteForWorkinHour tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove Working Hour</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove working hour? It will remove all working slot</div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=confirmDeleteWorkingHour() class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/activate.model.html",'<div id=activateModal1 class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>{{activateModal.header}}</h4></div><div class=modal-body><p>Are you sure do you want to {{activateModal.header}} <b>{{activateModal.displayText.info.name}}</b></p></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button> <button type=button class="btn btn-success" data-dismiss=modal ng-click="deleteUser(activateModal.displayText, activateModal.header)">Save</button></div></div></div></div>'),e.put("partials/partner/modal/addAddress.modal.html",'<div class="modal fade" id=addAddresstModal tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Add major area</h4></div><div class=modal-body><form name=areaForm><div class="alert alert-danger" role=alert ng-show=!partner>Please select partner</div><div class="row form-group" ng-show=partner><div class=col-md-4><label class=pull-right><strong>Partner</strong></label></div><div class=col-md-6>{{partner.info.name}}</div></div><div class="row form-group" ng-show=partner><div class=col-md-4><label class=pull-right><strong>Major area</strong></label></div><div class=col-md-6><select name=majorlocation class=form-control ng-model=data.area ng-options="areasResult as areasResult.name for areasResult in display.areas | orderBy:\'name\' track by areasResult.name" required></select></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveNewArea() class="btn btn-primary" ng-show=partner ng-disabled=areaForm.$invalid>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div><script type=text/ng-template id=tag-template1><div>{{data.name}}</div></script><script type=text/ng-template id=auto-template1><div>{{data.name}}</div></script><script type=text/ng-template id=auto-template1><div>{{data.name}}</div></script>'),e.put("partials/partner/modal/confirmRemoveArea.html",'<div class="modal fade" id=confirmRemoveAreaModal tabindex=-1 role=dialog aria-labelledby=removeAreaModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=removeAreaModalLabel>Remove major area</h4></div><div class=modal-body><div class="alert alert-danger" role=alert ng-show=removedArea>Are you sure you want to delete area</div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=removeExistingArea() class="btn btn-primary" ng-show=partner>Yes</button> <button type=button class="btn btn-gray" data-dismiss=modal ng-click=cancleRemoveArea()>No</button></span></div></div></div></div>'),e.put("partials/partner/modal/confirmUpdateWorkingHours.html",'<div class="modal fade" id=confirmUpdateWorkinghoursModal tabindex=-1 role=dialog aria-labelledby=confirmUpdateWorkinghours><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=confirmUpdateWorkinghours>Update Working Hours</h4></div><div class=modal-body><div class="alert alert-danger" ng-if="flag== true" role=alert>Are you sure you want to Update Working Hours ? It will remove all working slot</div><div class="alert alert-danger" ng-if="flag == false" role=alert>Are you sure you want to Update Visiting Charges ?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=removeExistingWorkingHoursSlot() class="btn btn-primary">Yes</button> <button type=button class="btn btn-gray" data-dismiss=modal ng-click=cancelExistingWorkingHoursSlot()>No</button></span></div></div></div></div>'),e.put("partials/partner/modal/discount.modal.html",'<div class="modal fade" id=discountModal tabindex=-1 role=dialog aria-labelledby=discountModalLabel><div class="modal-dialog modal-lg" role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" ng-show=!modal.discountModal._id>Add discount</h4><h4 class="modal-title formheading" ng-show=modal.discountModal._id>Update discount</h4></div><div class=modal-body><form name=discountForm><div class="row form-group" ng-class="{ \'has-error\': discountForm.discount_name.$invalid }"><div class=col-md-4><label class=pull-right><strong>Discount</strong></label></div><div class=col-md-6><input name=discount_name class=form-control type=text ng-model=modal.discountModal.name required></div></div><div class="row form-group" ng-class="{ \'has-error\': discountForm.inlineRadioOptions.$invalid }"><div class=col-md-4><label class=pull-right><strong>Type</strong></label></div><div class=col-md-6><div class=form-control><label class=radio-inline><input type=radio name=inlineRadioOptions ng-model=modal.discountModal.discounttype id=inlineRadio1 ng-change="modal.discountModal.discount = \'\';modal.discountModal.discountrs = \'\'" value=ruppee required>Ruppee(Rs)</label> <label class=radio-inline><input type=radio name=inlineRadioOptions ng-model=modal.discountModal.discounttype id=inlineRadio2 ng-change="modal.discountModal.discount = \'\';modal.discountModal.discountrs = \'\'" value=percentage required>Percentage(%)</label></div></div></div><div class="row form-group" ng-if="modal.discountModal.discounttype == \'percentage\'" ng-class="{ \'has-error\': discountForm.discountname_percent.$invalid }"><div class=col-md-4><label class=pull-right><strong>Value</strong></label></div><div class=col-md-6><input name=discountname_percent placeholder={{modal.discountModal.discounttype}} class=form-control type=number ng-model=modal.discountModal.discount ng-change=perCheck() required></div></div><div class="row form-group" ng-if="modal.discountModal.discounttype == \'ruppee\'" ng-class="{ \'has-error\': discountForm.discountname_rupee.$invalid }"><div class=col-md-4><label class=pull-right><strong>Value</strong></label></div><div class=col-md-6><input name=discountname_rupee placeholder={{modal.discountModal.discounttype}} class=form-control type=number ng-model=modal.discountModal.discountrs required></div></div><div class="row form-group" ng-class="{ \'has-error\': discountForm.discountapplicable.$invalid }"><div class=col-md-4><label class=pull-right><strong>Discount Applicable</strong></label></div><div class=col-md-6><div class=form-control><label class=radio-inline><input type=radio name=discountapplicable ng-model=modal.discountModal.discountapplicable value=TEST required>TEST(T)</label> <label class=radio-inline><input type=radio name=discountapplicable ng-model=modal.discountModal.discountapplicable value=VISIT required>VISIT CHARGE(VC)</label> <label class=radio-inline><input type=radio name=discountapplicable ng-model=modal.discountModal.discountapplicable value=BOTH required>BOTH(B)</label></div></div></div><div class="row form-group" ng-class="{ \'has-error\': discountForm.priority.$invalid }"><div class=col-md-4><label class=pull-right><strong>Priority</strong></label></div><div class=col-md-6><input name=priority class=form-control type=number ng-model=modal.discountModal.priority required></div></div><div class="row form-group"><div class="checkbox col-md-offset-4 col-md-4"><label><input type=checkbox ng-model=modal.discountModal.active checked><string>Active</string></label></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveDiscount() class="btn btn-primary" ng-disabled=discountForm.$invalid>Save</button><button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/dropPoint.modal.html",'<div class="modal fade" id=dropPointModal tabindex=-1 role=dialog aria-labelledby=dropPointModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=dropPointModalLabel>Drop point</h4></div><div class=modal-body><form name=dpForm><div class="row form-group" ng-class="{ \'has-error\': dpForm.dpadd.$invalid }"><div class="col-md-2 control-label"><strong>Address</strong></div><div class="col-md-offset-1 col-md-8"><textarea msd-elastic type=text class=form-control name=dpadd ng-model=droppoint.address aria-describedby=sizing-addon2 required></textarea></div></div><div class=row ng-class="{ \'has-error\': dpForm.dplat.$invalid }"><div class="col-md-2 control-label"><strong>Coordinates</strong></div><div class="col-md-offset-1 col-md-4" ng-class="{ \'has-error\': dpForm.dplat.$invalid }"><input type=tel id=modelLatitude class=form-control name=dplat ng-model=droppoint.coordinates.lat placeholder=Latitude ng-pattern="/^[0-9]+([,.][0-9]+)?$/" aria-describedby=sizing-addon2 required></div><div class=col-md-4 ng-class="{ \'has-error\': dpForm.dplong.$invalid }"><input type=tel id=modelLongitude class=form-control name=dplong ng-model=droppoint.coordinates.long aria-describedby=sizing-addon2 ng-pattern="/^[0-9]+([,.][0-9]+)?$/" placeholder=Longitude required></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveDropPoint() class="btn btn-primary" ng-disabled=dpForm.$invalid>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/paymentOption.modal.html",'<div class="modal fade" id=paymentOption tabindex=-1 role=dialog aria-labelledby=descModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=descModalLabel>Payment Option</h4></div><div class=modal-body><div class="row form-group"><div class=col-md-12><form name=whForm><div class=row><div ng-class="{ \'has-error\': !paymentoptions.name }"><div class="col-md-2 control-label"><strong>Name</strong></div><div class=col-md-8><input type=text name=name value class=form-control ng-model=paymentoptions.name placeholder></div></div></div><br><div class=row><div ng-class="{ \'has-error\': !paymentoptions.code }"><div class="col-md-2 control-label"><strong>Code</strong></div><div class=col-md-8><input type=text name=code value class=form-control ng-model=paymentoptions.code placeholder></div></div></div><div class=row><div class="col-md-4 col-sm-offset-2"><div class=checkbox><label><input type=checkbox ng-model=paymentoptions.paid> <strong>Paid</strong></label></div></div></div></form></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=savePaymentOption() ng-disabled="(!paymentoptions.name || !paymentoptions.code)" class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/removeArea.modal.html",'<div class="modal fade" id=removeAreaModal tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove major area</h4></div><div class=modal-body><div class="alert alert-danger" role=alert ng-show=!partner>Please select partner</div><div class="row form-group" ng-show=partner.areas><div class=col-md-12><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>Area</th><th>Delete</th></tr></thead><tbody><tr ng-repeat="areaObj in partner.areas"><td>{{areaObj.area_id.name}}</td><td><span class="glyphicon glyphicon-remove pull-right" ng-click="removeArea(areaObj, $index)" style=color:maroon></span></td></tr></tbody></table></div></div></div></div></div></div>'),e.put("partials/partner/modal/visitCharge.modal.html",'<div class="modal fade" id=visitChargeModal tabindex=-1 role=dialog aria-labelledby=visitChargeModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=visitChargeModalLabel>Visiting Charges</h4></div><div class=modal-body><form name=vcForm><div class=row ng-class="{ \'has-error\': !visitcharge.day.length }"><div class="col-md-2 control-label"><strong>Days</strong></div><div class=col-md-10><ng-daypicker d-model=visitcharge.day></ng-daypicker></div></div><div class="row form-group"><div ng-class="{ \'has-error\': vcForm.fromtime.$invalid }"><div class="col-md-2 control-label"><strong>From time</strong></div><div class=col-md-4><select name=fromtime class=form-control ng-model=visitcharge.from required><option ng-repeat="timeslot in temp.timeSlots track by $index" value={{timeslot.time}} ng-selected="visitcharge.from == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div><div ng-class="{ \'has-error\': vcForm.totime.$invalid }"><div class="col-md-2 control-label"><strong>To time</strong></div><div class=col-md-4><select name=totime class=form-control ng-model=visitcharge.to required><option ng-repeat="timeslot in temp.timeSlots track by $index" value={{timeslot.time}} ng-selected="visitcharge.to == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div></div><div class="row form-group" ng-class="{ \'has-error\': vcForm.person.$invalid }"><div class="col-md-2 control-label"><strong>Person</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.person class=form-control name=person required min=1></div></div><div class="row form-group" ng-class="{ \'has-error\': vcForm.postcharge.$invalid }"><div class="col-md-2 control-label"><strong>Charge</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.charge ng-change=calculatePremium() class=form-control name=postcharge required value=1 min=0></div><div class="col-md-2 control-label"><strong style=font-size:12px>Post_Charge</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.postcharge class=form-control name=charge required value=1 min=0></div></div><div class="row form-group" ng-class="{ \'has-error\': vcForm.permium.$invalid }"><div class="col-md-2 control-label"><strong>Premium on home visit(%)</strong></div><div class=col-md-4><input type=number ng-change=calculatePremium() ng-model=visitcharge.premiumpercent class=form-control name=permium required></div><div class=col-md-6></div></div><div class="row form-group" ng-class="{ \'has-error\': vcForm.permiumontest.$invalid }"><div class="col-md-2 control-label"><strong>Premium on test(%)</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.premiumpercentontest class=form-control name=permiumontest required></div><div class=col-md-6></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveVisitCharge() class="btn btn-primary" ng-disabled="vcForm.$invalid || (visitcharge.day.length == 0 || !visitcharge.day)">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/workingHour.modal.html",'<div class="modal fade" id=workinghourModal tabindex=-1 role=dialog aria-labelledby=workhrModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=visitingModalLabel>Working Hours</h4></div><div class=modal-body><form name=whForm><div class=row ng-class="{ \'has-error\': !workinghour.day.length }"><div class="col-md-2 control-label"><strong>Days</strong></div><div class=col-md-10><ng-daypicker d-model=workinghour.day name=day></ng-daypicker></div></div><div class=row><div ng-class="{ \'has-error\': whForm.fromtime.$invalid }"><div class="col-md-2 control-label"><strong>From time</strong></div><div class=col-md-4><select name=fromtime ng-disabled=workinghour.fullday class=form-control aria-describedby=sizing-addon2 ng-model=workinghour.from ng-required=!workinghour.fullday ng-change=checkWHTime()><option ng-repeat="timeslot in display.timeSlots track by $index" value={{timeslot.time}} ng-selected="workinghour.from == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div><div ng-class="{ \'has-error\': whForm.totime.$invalid }"><div class="col-md-2 control-label"><strong>To time</strong></div><div class=col-md-4><select ng-disabled=workinghour.fullday name=totime class=form-control aria-describedby=sizing-addon2 ng-model=workinghour.to ng-required=!workinghour.fullday ng-change=checkWHTime()><option ng-repeat="timeslot in display.timeSlots track by $index" value={{timeslot.time}} ng-selected="workinghour.to == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div></div><div class=row><div class="col-md-4 col-sm-offset-2"><div class=checkbox><label><input type=checkbox ng-click=fullDayClick() ng-model=workinghour.fullday> <strong>24 hours</strong></label></div></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveWorkingHour() class="btn btn-primary" ng-disabled="whForm.$invalid || (workinghour.day.length == 0 || !workinghour.day)">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/modal/workingHour_VisitingCharges.modal.html",'<div class="modal fade" id=workinghourVisitingHourModal tabindex=-1 role=dialog aria-labelledby=workhrModalLabel><div class="modal-dialog modal-lg" role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true ng-click=closemodal()>&times;</span></button><h4 class="modal-title formheading" id=visitingModalLabel>Working Hours</h4></div><div class=modal-body><form name=whForm><div class=row ng-class="{ \'has-error\': !workinghour.day.length }"><div class="col-md-2 control-label"><strong>Days</strong></div><div class=col-md-10><ng-daypicker d-model=workinghour.day name=day on-select=changeDays(item)></ng-daypicker></div></div><div class=row><div ng-class="{ \'has-error\': whForm.fromtime.$invalid }"><div class="col-md-2 control-label"><strong>From time</strong></div><div class=col-md-4><select name=fromtime ng-disabled=workinghour.fullday class=form-control aria-describedby=sizing-addon2 ng-model=workinghour.from ng-required=!workinghour.fullday ng-change=checkWHTime()><option ng-repeat="timeslot in display.timeSlots track by $index" value={{timeslot.time}} ng-selected="workinghour.from == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div><div ng-class="{ \'has-error\': whForm.totime.$invalid }"><div class="col-md-2 control-label"><strong>To time</strong></div><div class=col-md-4><select ng-disabled=workinghour.fullday name=totime class=form-control aria-describedby=sizing-addon2 ng-model=workinghour.to ng-required=!workinghour.fullday ng-change=checkWHTime()><option ng-repeat="timeslot in display.timeSlots track by $index" value={{timeslot.time}} ng-selected="workinghour.to == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div></div><div class=row><div class="col-md-4 col-sm-offset-2"><div class=checkbox><label><input type=checkbox ng-click=fullDayClick() ng-model=workinghour.fullday> <strong>24 hours</strong></label></div></div></div></form></div><div ng-show=showVisitingCharge><div class=modal-header><h4 class="modal-title formheading" id=visitChargeModalLabel><span ng-if="temp.vcindex==undefined">Add Visiting Charges</span> <span ng-if="temp.vcindex > -1">Change Visiting Charges</span></h4></div><div class=modal-body><form name=vcForm><div class="row form-group"><div ng-class="{ \'has-error\': vcForm.fromtime.$invalid }"><div class="col-md-2 control-label"><strong>From time</strong></div><div class=col-md-4><select name=fromtime class=form-control ng-model=visitcharge.from required ng-change=checkVCTime()><option ng-repeat="timeslot in temp.timeSlots track by $index" value={{timeslot.time}} ng-selected="visitcharge.from == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div><div ng-class="{ \'has-error\': vcForm.totime.$invalid }"><div class="col-md-2 control-label"><strong>To time</strong></div><div class=col-md-4><select name=totime class=form-control ng-model=visitcharge.to required ng-change=checkVCTime()><option ng-repeat="timeslot in temp.timeSlots track by $index" value={{timeslot.time}} ng-selected="visitcharge.to == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div></div><div class="row form-group" ng-class="{ \'has-error\': vcForm.person.$invalid }"><div class="col-md-2 control-label"><strong>Person</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.person class=form-control name=person required min=1></div></div><div class="row form-group"><div ng-class="{ \'has-error\': vcForm.charge.$invalid }"><div class="col-md-2 control-label"><strong>Charge</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.charge ng-change=calculatePremium() class=form-control name=charge required value=1 min=0></div></div><div ng-class="{ \'has-error\': vcForm.postcharge.$invalid }"><div class="col-md-2 control-label"><strong style=font-size:12px>Post_Charge</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.postcharge class=form-control name=postcharge required value=1 min=0></div></div></div><div class="row form-group" ng-class="{ \'has-error\': vcForm.permiumontest.$invalid }"><div class="col-md-2 control-label"><strong>Premium on test(%)</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.premiumpercentontest class=form-control name=permiumontest required></div><div class=col-md-6></div></div><div class=row><div class=col-md-12><center><button name=save type=button ng-click=pushVisitCharge() class="btn btn-primary pull-right" ng-disabled="vcForm.$invalid || (visitcharge.day.length == 0 || !visitcharge.day)"><span ng-if="temp.vcindex==undefined">Add visit charge</span> <span ng-if="temp.vcindex > -1">change visit charge</span></button></center></div></div><table class="table table-bordered table-hover" style="background-color: white;"><tbody><tr ng-repeat="vcObj in visitcharges track by $index"><td ng-click=editVisitCharge($index,vcObj)><small>{{vcObj.day.join(\', \')}}<div><div><strong>From:</strong> {{vcObj.from | waqt}} <strong>To:</strong> {{vcObj.to | waqt}}</div><div><strong>Person:</strong> {{vcObj.person}}, <strong>Charge:</strong> {{vcObj.charge}}, <strong>Post Charge:</strong>{{vcObj.postcharge}}, <strong>Premium on test %:</strong> {{vcObj.premiumpercentontest}}</div></div></small></td><td><span class=pull-right><a ng-click=deleteVisitCharge($index)><span class="glyphicon glyphicon-remove pull-right" style=color:maroon></span></a></span></td></tr></tbody></table></form></div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveWorkingHourVisitCharge() class="btn btn-primary" ng-disabled="!workinghour.from || !workinghour.to || (workinghour.day.length == 0 || !workinghour.day)">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/test/partnerpackagelist.html",'<div ng-if="search.category==\'PACKAGES\' && display.partnerpackages.length"><table class="table table-bordered" style=background-color:white;><thead><tr><th><center>Partner</center></th><th></th><th>code</th><th>name</th><th>Price</th><th>Status</th><th>Delete Permanent</th></tr></thead><tbody><tr ng-repeat-start="partnertest in display.partnerpackages track by $index" ng-class="{\'danger\':partnertest._Deleted}"><td ng-click=edit(partnertest._id)><center>{{partnertest.partner_id.info.acronym}}</center></td><td data-toggle=collapse data-target=#{{$index}}><div class="glyphicon glyphicon-plus-sign"></div></td><td ng-click=edit(partnertest._id)>{{partnertest.code}}</td><td ng-click=edit(partnertest._id)>{{partnertest.name}}</td><td ng-click=edit(partnertest._id)><div><b>SP :</b>{{ partnertest.price.selling | number}}</div><div><b>MRP :</b>{{ partnertest.price.mrp | number}}</div></td><td><button type=button ng-show="partnertest._Deleted == true" data-toggle=modal ng-model=activeModal.data ng-click="setActive(\'active\',partnertest)" class="btn btn-success btn-xs">Activate</button> <button type=button ng-show="partnertest._Deleted == false" ng-model=deactiveModal.data class="btn btn-danger btn-xs" ng-click="setActive(\'deactive\',partnertest)">Deactivate</button></td><td><button type=button class="btn btn-xs glyphicon glyphicon-trash" ng-click="setActive(\'delete\',partnertest)"></button></td></tr><tr ng-repeat-end id={{$index}} class=collapse style=background-color:#eee;><td colspan=5><table class="table table-bordered table-condensed" style=padding-bottom:0px><thead><tr><th>Test Name</th><th>Department</th><th>Tubes</th></tr></thead><tbody><tr ng-repeat="components in partnertest.childs"><td><span ng-if="components.test_id.category==\'TEST\'">{{components.test_id.name}}</span><u style=color:blue; class=pointer ng-if="components.test_id.category!=\'TEST\'" ng-click=showComponents(components.test_id)>{{components.test_id.name}}</u></td><td>{{components.test_id.masterservice.department_id.name}}</td><td><span ng-repeat="value in components.test_id.masterservice.tubes"><span>({{value.company}} - {{value.type}} - {{value.size}})</span></span></td></tr></tbody></table></td></tr></tbody></table><div class=row><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="temp.isPaging=true;getlist()"></pagination></div></div></div>'),e.put("partials/partner/test/partnerprofilelist.html",'<div ng-if="search.category==\'PROFILE\' && display.partnerprofiles.length"><table class="table table-bordered" style=background-color:white;><thead><tr><th><center>Partner</center></th><th></th><th>Code</th><th>Name</th><th>Price</th><th>Status</th><th>Delete Permanent</th></tr></thead><tbody><tr ng-repeat-start="partnertest in display.partnerprofiles track by $index" ng-class="{\'danger\':partnertest._Deleted}"><td ng-click=edit(partnertest._id)><center>{{partnertest.partner_id.info.acronym}}</center></td><td data-toggle=collapse data-target=#{{$index}}><div class="glyphicon glyphicon-plus-sign"></div></td><td ng-click=edit(partnertest._id)>{{partnertest.code}}</td><td ng-click=edit(partnertest._id)>{{partnertest.name}}</td><td ng-click=edit(partnertest._id)><div><b>SP :</b>{{ partnertest.price.selling | number}}</div><div><b>MRP :</b>{{ partnertest.price.mrp | number}}</div></td><td><button type=button ng-show="partnertest._Deleted == true" data-toggle=modal ng-model=activeModal.data ng-click="setActive(\'active\',partnertest)" class="btn btn-success btn-xs">Activate</button> <button type=button ng-show="partnertest._Deleted == false" ng-model=deactiveModal.data class="btn btn-danger btn-xs" ng-click="setActive(\'deactive\',partnertest)">Deactivate</button></td><td><button type=button class="btn btn-xs glyphicon glyphicon-trash" ng-click="setActive(\'delete\',partnertest)"></button></td></tr><tr ng-repeat-end id={{$index}} class=collapse style=background-color:#eee;><td colspan=5><table class="table table-bordered table-condensed" style=padding-bottom:0px><thead><tr><th>Test Name</th><th>Department</th><th>Tubes</th></tr></thead><tbody><tr ng-repeat="components in partnertest.childs"><td><span ng-if="components.test_id.category==\'TEST\'">{{components.test_id.name}}</span><u style=color:blue; class=pointer ng-if="components.test_id.category!=\'TEST\'" ng-click=showComponents(components.test_id)>{{components.test_id.name}}</u></td><td>{{components.test_id.masterservice.department_id.name}}</td><td><span ng-repeat="value in components.test_id.masterservice.tubes"><span>({{value.company}} - {{value.type}} - {{value.size}})</span></span></td></tr></tbody></table></td></tr></tbody></table><div class=row><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="temp.isPaging=true;getlist()"></pagination></div></div></div>'),e.put("partials/partner/test/partnertestlist.html",'<div ng-if="search.category==\'TEST\' && display.partnertests.length"><table class="table table-bordered" style=background-color:white;width:100%><thead><tr><th><center>Partner</center></th><th>Test code</th><th>Partner Test name</th><th>Price</th><th>Department</th><th>Sample Type</th><th>Tube</th><th>Status</th><th>Delete Permanent</th></tr></thead><tbody><tr ng-repeat="partnertest in display.partnertests track by $index" ng-class="{\'danger\':partnertest._Deleted}"><td ng-click=edit(partnertest._id)><center>{{partnertest.partner_id.info.acronym}}</center></td><td ng-click=edit(partnertest._id)>{{partnertest.code}}</td><td ng-click=edit(partnertest._id)>{{partnertest.name}}</td><td ng-click=edit(partnertest._id) style=width:130px;><div><b>SP :</b>{{ partnertest.price.selling | number}}</div><div><b>MRP :</b>{{ partnertest.price.mrp | number}}</div></td><td ng-click=edit(partnertest._id)>{{partnertest.masterservice.department_id.name}}</td><td ng-click=edit(partnertest._id)>{{partnertest.sampletype}}</td><td ng-click=edit(partnertest._id)><span ng-repeat="ptube in partnertest.masterservice.tubes">{{ptube.company}}-{{ptube.type}}-{{ptube.size}}{{$last?\'\':\', \'}}</span></td><td><button type=button ng-show="partnertest._Deleted == true" data-toggle=modal ng-model=activeModal.data ng-click="setActive(\'active\',partnertest)" class="btn btn-success btn-xs">Activate</button> <button type=button ng-show="partnertest._Deleted == false" ng-model=deactiveModal.data class="btn btn-danger btn-xs" ng-click="setActive(\'deactive\',partnertest)">Deactivate</button></td><td><button type=button class="btn btn-xs glyphicon glyphicon-trash" ng-click="setActive(\'delete\',partnertest)"></button></td></tr></tbody></table><div class=row><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="temp.isPaging=true;getlist()"></pagination></div></div></div>'),e.put("partials/partner/test/qapartnerpackagelist.html",'<div ng-if="search.category==\'PACKAGES\' && display.partnerpackages.length"><table class="table table-bordered" style=background-color:white;><thead><tr><th><center>Partner</center></th><th></th><th>code</th><th>name</th><th>Price</th></tr></thead><tbody><tr ng-repeat-start="partnertest in display.partnerpackages track by $index" ng-class="{\'danger\':partnertest._Deleted}"><td ng-click="edit(partnertest._id,\'qa\')"><center>{{partnertest.partner_id.info.acronym}}</center></td><td data-toggle=collapse data-target=#{{$index}}><div class="glyphicon glyphicon-plus-sign"></div></td><td ng-click="edit(partnertest._id,\'qa\')">{{partnertest.code}}</td><td ng-click="edit(partnertest._id,\'qa\')">{{partnertest.name}}</td><td ng-click="edit(partnertest._id,\'qa\')"><div><b>SP :</b>{{ partnertest.price.selling | number}}</div><div><b>MRP :</b>{{ partnertest.price.mrp | number}}</div></td></tr><tr ng-repeat-end id={{$index}} class=collapse style=background-color:#eee;><td colspan=5><table class="table table-bordered table-condensed" style=padding-bottom:0px><thead><tr><th>Test Name</th><th>Department</th><th>Tubes</th></tr></thead><tbody><tr ng-repeat="components in partnertest.childs"><td><span ng-if="components.test_id.category==\'TEST\'">{{components.test_id.name}}</span><u style=color:blue; class=pointer ng-if="components.test_id.category!=\'TEST\'" ng-click=showComponents(components.test_id)>{{components.test_id.name}}</u></td><td>{{components.test_id.masterservice.department_id.name}}</td><td><span ng-repeat="value in components.test_id.masterservice.tubes"><span>({{value.company}} - {{value.type}} - {{value.size}})</span></span></td></tr></tbody></table></td></tr></tbody></table><div class=row><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="temp.isPaging=true;getlist()"></pagination></div></div></div>'),e.put("partials/partner/test/qapartnerprofilelist.html",'<div ng-if="search.category==\'PROFILE\' && display.partnerprofiles.length"><table class="table table-bordered" style=background-color:white;><thead><tr><th><center>Partner</center></th><th></th><th>Code</th><th>Name</th><th>Price</th></tr></thead><tbody><tr ng-repeat-start="partnertest in display.partnerprofiles track by $index" ng-class="{\'danger\':partnertest._Deleted}"><td ng-click="edit(partnertest._id,\'qa\')"><center>{{partnertest.partner_id.info.acronym}}</center></td><td data-toggle=collapse data-target=#{{$index}}><div class="glyphicon glyphicon-plus-sign"></div></td><td ng-click="edit(partnertest._id,\'qa\')">{{partnertest.code}}</td><td ng-click="edit(partnertest._id,\'qa\')">{{partnertest.name}}</td><td ng-click="edit(partnertest._id,\'qa\')"><div><b>SP :</b>{{ partnertest.price.selling | number}}</div><div><b>MRP :</b>{{ partnertest.price.mrp | number}}</div></td></tr><tr ng-repeat-end id={{$index}} class=collapse style=background-color:#eee;><td colspan=5><table class="table table-bordered table-condensed" style=padding-bottom:0px><thead><tr><th>Test Name</th><th>Department</th><th>Tubes</th></tr></thead><tbody><tr ng-repeat="components in partnertest.childs"><td><span ng-if="components.test_id.category==\'TEST\'">{{components.test_id.name}}</span><u style=color:blue; class=pointer ng-if="components.test_id.category!=\'TEST\'" ng-click=showComponents(components.test_id)>{{components.test_id.name}}</u></td><td>{{components.test_id.masterservice.department_id.name}}</td><td><span ng-repeat="value in components.test_id.masterservice.tubes"><span>({{value.company}} - {{value.type}} - {{value.size}})</span></span></td></tr></tbody></table></td></tr></tbody></table><div class=row><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="temp.isPaging=true;getlist()"></pagination></div></div></div>'),e.put("partials/partner/test/qapartnertestlist.html",'<div ng-if="search.category==\'TEST\' && display.partnertests.length"><table class="table table-bordered" style=background-color:white;width:100%><thead><tr><th><center>Partner</center></th><th>Test code</th><th>Partner Test name</th><th>Price</th><th>Department</th><th>Sample Type</th><th>Tube</th></tr></thead><tbody><tr ng-repeat="partnertest in display.partnertests track by $index" ng-class="{\'danger\':partnertest._Deleted}"><td ng-click="edit(partnertest._id,\'qa\')"><center>{{partnertest.partner_id.info.acronym}}</center></td><td ng-click="edit(partnertest._id,\'qa\')">{{partnertest.code}}</td><td ng-click="edit(partnertest._id,\'qa\')">{{partnertest.name}}</td><td ng-click="edit(partnertest._id,\'qa\')" style=width:130px;><div><b>SP :</b>{{ partnertest.price.selling | number}}</div><div><b>MRP :</b>{{ partnertest.price.mrp | number}}</div></td><td ng-click="edit(partnertest._id,\'qa\')">{{partnertest.masterservice.department_id.name}}</td><td ng-click="edit(partnertest._id,\'qa\')">{{partnertest.sampletype}}</td><td ng-click="edit(partnertest._id,\'qa\')"><span ng-repeat="ptube in partnertest.masterservice.tubes">{{ptube.company}}-{{ptube.type}}-{{ptube.size}}{{$last?\'\':\', \'}}</span></td></tr></tbody></table><div class=row><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="temp.isPaging=true;getlist()"></pagination></div></div></div>'),e.put("partials/partner/test/qatest.html",'<div class=row style="margin: 0;"><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style=padding-left:0px><h2>Partner Test</h2></div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style=padding-left:0px><select ng-model=search.active type=text class="form-control input-sm" name=category aria-describedby=sizing-addon2 style=margin-top:25px; ng-change=getlist()><option name=active value require>All</option><option name=active value=true require>Active</option><option name=active value=false require>Deactive</option></select></div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 pull-right" style=padding-right:0px;padding-left:0px><input type=text class="form-control input-sm" ng-change=getlist() style=margin-top:25px; placeholder=Search name=srch-term id=srch-term ng-model=search.text ng-model-options="{ debounce: 1000 }"></div></div><div class=row style="margin: 0;"><div class=col-md-10 style=padding-left:0px;padding-right:0px><select class="form-control input-sm" name=area ng-model=partner ng-options="partner as partner.info.name for partner in display.partners | orderBy:\'info.name\'" ng-change=pushPartner(partner) style=margin-top:20px;><option value>--Select partner--</option></select></div><div class=col-md-2><div class=checkbox style=margin-top:25px;><label><input type=checkbox ng-model=search.selectall class ng-change=selectALLPartner(search.selectall)>SELECT ALL</label></div></div></div><div class=row style="margin:10px 0px;" ng-if=temp.PartnerList.length><div class="col-md-12 col-lg-12" style=padding-left:0px;padding-right:0px><div class=form-group style=margin:0px><div class="alert alert-info" role=alert><span ng-repeat="multiPartner in temp.PartnerList"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{multiPartner.info.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePartner(multiPartner,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div><div class=row style="margin: 0;"><div class=col-md-4 style=padding-left:0px;margin-bottom:20px ng-if=temp.PartnerList.length><select ng-model=search.service_id class="form-control input-sm" ng-options="mastSer._id as mastSer.name for mastSer in display.masterSpecialServices | orderBy:\'name\'" ng-change=getlist()><option value require>--Special Services--</option></select></div><div class=col-md-4 style=padding-left:0px;margin-bottom:20px ng-if=temp.PartnerList.length><select ng-model=search.si class="form-control input-sm" ng-options="si._id as si.displayname for si in display.specialInstructions | orderBy:\'displayname\'" ng-change=getlist()><option value require>--Special Instructions--</option></select></div><div class=col-md-4 style=padding-left:0px;padding-right:0px;margin-bottom:20px ng-if=temp.PartnerList.length><select ng-model=search.pi class="form-control input-sm" ng-options="pi._id as pi.name for pi in display.patientInstructions | orderBy:\'name\'" ng-change=getlist()><option value require>--Patient Instructions--</option></select></div></div><div class=row style="margin: 0;" ng-if="search.category==\'TEST\' && temp.PartnerList.length"><div class=col-md-4 style=padding-left:0px><select ng-model=search.department_id class="form-control input-sm" ng-options="dept._id as dept.name for dept in display.departments | orderBy:\'name\'" ng-change=getlist()><option value require>--Department--</option></select></div><div class=col-md-4 style=padding-left:0px><select class="form-control input-sm" ng-model=search.sampletype ng-options="tp.displayname as tp.displayname for tp in display.sampletypes | orderBy:\'displayname\'" ng-change=getlist()><option value>-- Sample type --</option></select></div><div class=col-md-4 style=padding-left:0px;padding-right:0px><select ng-model=search.tube_id class="form-control input-sm" ng-options="tube._id as tube.company +\'-\'+tube.type+\'-\'+tube.size for tube in display.tubes | orderBy:\'company\'" ng-change=getlist()><option value require>--Tube--</option></select></div></div><div class=row style="margin: 0;margin-top:20px;"><div class="col-lg-12 col-sm-12" ng-if=!temp.PartnerList.length style=padding-left:0px;padding-right:0px;><div class="alert alert-info" role=alert><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> Please select partner</div></div><ul ng-if=temp.PartnerList.length class="col-lg-12 col-sm-12 nav nav-tabs"><li role=presentation ng-class="{\'active\':search.category==\'TEST\'}"><a ng-click="search.category=\'TEST\';changeCategory()">Test</a></li><li role=presentation ng-class="{\'active\':search.category==\'PROFILE\'}"><a ng-click="search.category=\'PROFILE\';changeCategory()">Profile</a></li><li role=presentation ng-class="{\'active\':search.category==\'PACKAGES\'}"><a ng-click="search.category=\'PACKAGES\';changeCategory()">Package</a></li></ul></div><ng-include src="\'partials/partner/test/qapartnertestlist.html\'"></ng-include><ng-include src="\'partials/partner/test/qapartnerprofilelist.html\'"></ng-include><ng-include src="\'partials/partner/test/qapartnerpackagelist.html\'"></ng-include><ng-include src="\'partials/partner/test/modal/active.model.html\'"></ng-include><div ng-include="\'partials/partner/test/modal/testComponent.modal.html\'"></div><ng-import type=partnertest></ng-import>'),e.put("partials/partner/test/qatest.object.html",'<div><h2>Partner Test <small><sup><a href=#/main/qapartnertest class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=testForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Partner</label><div class=col-sm-6><select ng-model=partner ng-disabled=partner.info.name ng-options="partner as partner.info.name for partner in display.partners | orderBy:\'info.name\' track by partner._id" class=form-control name=mastertest aria-describedby=sizing-addon2 required></select></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Code</label><div class=col-sm-6><input ng-model=display.partnertest.code ng-disabled=true type=text class=form-control name=code aria-describedby=sizing-addon2 required></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input ng-model=display.partnertest.name ng-disabled=true name=name type=text class=form-control required></div></div><div class=form-group ng-disabled=true><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Alias</label><div class=col-sm-6><tags-input ng-model=aliasTag add-from-autocomplete-only=false replace-spaces-with-dashes=false ng-disabled=true><auto-complete min-length=1 template=my-custom-template></auto-complete></tags-input></div></div><div class=form-group style=padding-top:0px><div class="col-sm-offset-3 col-sm-2"><div class=checkbox><label><input type=checkbox name=b2b ng-disabled=true ng-model=display.partnertest.B2B> <strong>B2B (Private)</strong></label></div></div><div class=col-sm-2><div class=checkbox><label><input type=checkbox name=b2c ng-disabled=true ng-model=display.partnertest.B2C ng-click="display.partnertest.clientservices = [];"> <strong>B2C (Public)</strong></label></div></div><div class=col-sm-3><div class=checkbox><label><input type=checkbox name=b2c ng-disabled=true ng-model=display.partnertest.price.discountnotapplicable> <strong>Discount not applicable</strong></label></div></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label"></label><div class=col-sm-6><tags-input ng-show=display.partnertest.B2C ng-disabled=display.partnertest.clientservices ng-model=display.partnertest.clientservices on-tag-added=addTag($tag) on-tag-removed=removeTag() display-property=name key-property=_id add-from-autocomplete-only=true template=tag-test-template placeholder="search client test"><auto-complete source=searchClientTest($query) template=auto-test-template></auto-complete></tags-input></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">TAT</label><div class=col-sm-6><input type=text class=form-control ng-disabled=true ng-model=display.partnertest.tat></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Sample Type</label><div class=col-sm-6><select class="form-control input-sm" ng-model=display.partnertest.sampletype ng-disabled=true ng-options="tp.displayname as tp.displayname for tp in sampletypes | orderBy:\'displayname\'" required><option value>-- Sample type --</option></select></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-9"><button name=save type=button data-toggle=modal ng-click="showPriceModal(\'qa\')" class="btn btn-default">Price</button> <button name=save type=button data-toggle=modal ng-click="showPiModal(\'qa\')" class="btn btn-default">Patient instruction</button> <button name=save type=button data-toggle=modal ng-click="showSiModal(\'qa\')" class="btn btn-default">Special instruction</button> <button name=save type=button data-toggle=modal data-target=#qadescModal class="btn btn-default">Description</button></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Category</label><div class=col-sm-6><select ng-model=display.partnertest.category ng-disabled=true ng-change=setMasterTest(display.partnertest.category) name=infotype id class=form-control ng-options="cat.displayname as cat.displayname for cat in display.ServiceCategory" required></select></div></div><div class=form-group ng-if="display.partnertest.category == \'TEST\'"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Master Services</label><div class=col-sm-6><input type=text style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;" ng-model=temp.services ng-model-options="{ debounce: 1500 }" ng-disabled=temp.services ng-change=searchMasterService(temp.services) placeholder="search master services" class=form-control><table class="table table-responsive searchtable" style=margin:0px><tbody><tr ng-repeat="temp in temp.searchmasterserviceslist"><td ng-click=addmasterservices(temp) ng-disabled=true class=pointer><span ng-if=temp.code>({{temp.code}})</span> {{temp.name}}</td></tr></tbody></table></div></div><div class=form-group ng-if=display.partnertest.masterservice.service_id.name><div class="col-lg-6 col-sm-offset-3"><div class=form-group style="padding-left: 15px; margin-bottom: 0px;"><span style="display: inline-block; position:relative;" ng-disabled=true ng-model=master_service class=typeahead-available-text>{{display.partnertest.masterservice.service_id.name}}</span>&nbsp;&nbsp;</div></div></div><div class="col-sm-offset-3 col-sm-6" ng-if="display.partnertest.category == \'PROFILE\' || display.partnertest.category == \'PACKAGES\'"><div class="panel panel-default"><div class=panel-heading><strong>Components</strong></div><table id=tabelview class="table table-bordered" style=background-color:white><tbody><tr ng-repeat="component in display.partnertest.childs track by $index"><td>{{component.test_id.name}} <small ng-click=addPPTest(component.test_id.postservices) style=color:blue;font-size:15px; ng-if=showPPAddButton(component.test_id)></small></td></tr></tbody></table></div></div><div ng-if="display.partnertest.category == \'TEST\'"><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Department</label><div class=col-sm-6><select ng-model=display.partnertest.masterservice.department_id ng-disabled=true type=text ng-options="dept as dept.name for dept in display.departments | orderBy:\'name\' track by dept._id" class=form-control name=mastertest aria-describedby=sizing-addon2 ng-required="display.partnertest.category == \'Test\'"></select></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Tube(s)</label><div class=col-sm-6><input type=text ng-disabled=true style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;" ng-model=temp.serchtubeText ng-model-options="{ debounce: 1500 }" ng-change=searchTube(temp.serchtubeText) placeholder="search tubes" class=form-control><table class="table table-responsive searchtable" style=margin:0px><tbody><tr ng-repeat="temp in temp.searchTubeList"><td ng-click=addTubes(temp) class=pointer>{{temp.company}}-{{temp.type}}-{{temp.size}}</td></tr></tbody></table></div></div><div class=form-group><div class="col-lg-6 col-sm-offset-3"><div class=form-group><span ng-repeat="objtubes in display.partnertest.masterservice.tubes track by $index" style=padding-left:16px><span style="display: inline-block; position:relative" class=typeahead-available-text>{{objtubes.company}}-{{objtubes.type}}-{{objtubes.size}}</span>&nbsp;&nbsp;</span></div></div></div></div><div class=form-group ng-if="display.partnertest.category == \'TEST\'"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label"></label><div class=col-sm-3><input type=checkbox ng-disabled=true class=form name ng-model=display.partnertest.postsample ng-change=clearPostTest() value> <strong>Post Sample</strong></div></div><div class=form-group ng-if="display.partnertest.postsample && display.partnertest.category == \'TEST\'"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Post Test</label><div class=col-sm-6><tags-input ng-model=postsampleServices ng-disabled=true display-property=name key-property=_id add-from-autocomplete-only=true template=auto-test-template1 placeholder="search postsample"><auto-complete source=searchPostsampleServices($query) max-results-to-show=100 template=auto-test-template1></auto-complete></tags-input></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-9"><button name=save type=button ng-click="Save(\'qa\')" class="btn btn-primary">Save</button></div></div></div></div></form><div ng-include="\'partials/partner/test/modal/price.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/pi.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/si.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/desc.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/component.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/ConfirmPopupDeleteComponent.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/qaprice.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/qapi.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/qasi.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/qadesc.modal.html\'"></div><div class="modal fade" id=testExistsYES tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><div data-ng-bind-html="messageSome | sanitize"></div></h4><button ng-click=addService() type=button class="btn btn-primary" data-dismiss=modal>yes</button> <button ng-click=cancelService() type=button class="btn btn-gray" data-dismiss=modal>no</button></div></div></div></div></div></div><div class="modal fade" id=testExistsOK tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><div data-ng-bind-html="message | sanitize"></div></h4><button ng-click=testExists() style=width:130px class="btn btn-primary">Ok</button></div></div></div></div></div></div><script type=text/ng-template id=tag-template><div>{{data.company}}-{{data.type}}-{{data.size}}</div></script><script type=text/ng-template id=auto-template><div>{{data.company}}-{{data.type}}-{{data.size}}</div></script><script type=text/ng-template id=auto-template><div>{{data.company}}-{{data.type}}-{{data.size}}</div></script><script type=text/ng-template id=tag-test-template><div>{{data.name}}</div></script><script type=text/ng-template id=auto-test-template><div>{{data.name}}</div></script><script type=text/ng-template id=auto-test-template1><div>{{data.name}}</div></script>'),e.put("partials/partner/test/test.html",'<div class=row style="margin: 0;"><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style=padding-left:0px><h2>Partner Test <small><sup><a href=#/main/partnertest/new class="btn btn-link btn-xs">New</a> <a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2></div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style=padding-left:0px><select ng-model=search.active type=text class="form-control input-sm" name=category aria-describedby=sizing-addon2 style=margin-top:25px; ng-change=getlist()><option name=active value require>All</option><option name=active value=true require>Active</option><option name=active value=false require>Deactive</option></select></div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 pull-right" style=padding-right:0px;padding-left:0px><input type=text class="form-control input-sm" ng-change=getlist() style=margin-top:25px; placeholder=Search name=srch-term id=srch-term ng-model=search.text ng-model-options="{ debounce: 1000 }"></div></div><div class=row style="margin: 0;"><div class=col-md-10 style=padding-left:0px;padding-right:0px><select class="form-control input-sm" name=area ng-model=partner ng-options="partner as partner.info.name for partner in display.partners | orderBy:\'info.name\'" ng-change=pushPartner(partner) style=margin-top:20px;>ng-if="temp.PartnerList.length"<option value>--Select partner--</option></select></div><div class=col-md-2><div class=checkbox style=margin-top:25px;><label><input type=checkbox ng-model=search.selectall class ng-change=selectALLPartner(search.selectall)>SELECT ALL</label></div></div></div><div class=row style="margin:10px 0px;" ng-if=temp.PartnerList.length><div class="col-md-12 col-lg-12" style=padding-left:0px;padding-right:0px><div class=form-group style=margin:0px><div class="alert alert-info" role=alert><span ng-repeat="multiPartner in temp.PartnerList"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{multiPartner.info.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePartner(multiPartner,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div><div class=row style="margin: 0;"><div class=col-md-4 style=padding-left:0px;margin-bottom:20px ng-if=temp.PartnerList.length><select ng-model=search.service_id class="form-control input-sm" ng-options="mastSer._id as mastSer.name for mastSer in display.masterSpecialServices | orderBy:\'name\'" ng-change=getlist()><option value require>--Special Services--</option></select></div><div class=col-md-4 style=padding-left:0px;margin-bottom:20px ng-if=temp.PartnerList.length><select ng-model=search.si class="form-control input-sm" ng-options="si._id as si.displayname for si in display.specialInstructions | orderBy:\'displayname\'" ng-change=getlist()><option value require>--Special Instructions--</option></select></div><div class=col-md-4 style=padding-left:0px;padding-right:0px;margin-bottom:20px ng-if=temp.PartnerList.length><select ng-model=search.pi class="form-control input-sm" ng-options="pi._id as pi.name for pi in display.patientInstructions | orderBy:\'name\'" ng-change=getlist()><option value require>--Patient Instructions--</option></select></div></div><div class=row style="margin: 0;" ng-if="search.category==\'TEST\' && temp.PartnerList.length"><div class=col-md-4 style=padding-left:0px><select ng-model=search.department_id class="form-control input-sm" ng-options="dept._id as dept.name for dept in display.departments | orderBy:\'name\'" ng-change=getlist()><option value require>--Department--</option></select></div><div class=col-md-4 style=padding-left:0px><select class="form-control input-sm" ng-model=search.sampletype ng-options="tp.displayname as tp.displayname for tp in display.sampletypes | orderBy:\'displayname\'" ng-change=getlist()><option value>-- Sample type --</option></select></div><div class=col-md-4 style=padding-left:0px;padding-right:0px><select ng-model=search.tube_id class="form-control input-sm" ng-options="tube._id as tube.company +\'-\'+tube.type+\'-\'+tube.size for tube in display.tubes | orderBy:\'company\'" ng-change=getlist()><option value require>--Tube--</option></select></div></div><div class=row style="margin: 0;margin-top:20px;"><div class="col-lg-12 col-sm-12" ng-if=!temp.PartnerList.length style=padding-left:0px;padding-right:0px;><div class="alert alert-info" role=alert><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> Please select partner</div></div><ul ng-if=temp.PartnerList.length class="col-lg-12 col-sm-12 nav nav-tabs"><li role=presentation ng-class="{\'active\':search.category==\'TEST\'}"><a ng-click="search.category=\'TEST\';changeCategory()">Test</a></li><li role=presentation ng-class="{\'active\':search.category==\'PROFILE\'}"><a ng-click="search.category=\'PROFILE\';changeCategory()">Profile</a></li><li role=presentation ng-class="{\'active\':search.category==\'PACKAGES\'}"><a ng-click="search.category=\'PACKAGES\';changeCategory()">Package</a></li></ul></div><ng-include src="\'partials/partner/test/partnertestlist.html\'"></ng-include><ng-include src="\'partials/partner/test/partnerprofilelist.html\'"></ng-include><ng-include src="\'partials/partner/test/partnerpackagelist.html\'"></ng-include><ng-include src="\'partials/partner/test/modal/active.model.html\'"></ng-include><div ng-include="\'partials/partner/test/modal/testComponent.modal.html\'"></div><ng-import type=partnertest></ng-import>'),e.put("partials/partner/test/test.object.html",'<div><h2>Partner Test <small><sup><a href=#/main/partnertest class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=testForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group ng-class="{\'has-error\' : !partner}"><label for=inputDescription class="col-sm-offset-1 col-sm-2 control-label">Partner</label><div class=col-sm-6><select ng-model=partner ng-options="partner as partner.info.name for partner in display.partners | orderBy:\'info.name\' track by partner._id" class=form-control name=mastertest aria-describedby=sizing-addon2 required></select></div></div><div class=form-group ng-class="{\'has-error\' : !display.partnertest.code}"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Code</label><div class=col-sm-6><input ng-model=display.partnertest.code type=text class=form-control name=code aria-describedby=sizing-addon2 required></div></div><div class=form-group ng-class="{\'has-error\' : !display.partnertest.name}"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-6><input ng-model=display.partnertest.name name=name type=text class=form-control required></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Alias</label><div class=col-sm-6><tags-input ng-model=aliasTag add-from-autocomplete-only=false replace-spaces-with-dashes=false><auto-complete min-length=1 template=my-custom-template></auto-complete></tags-input></div></div><div class=form-group style=padding-top:0px><div class="col-sm-offset-3 col-sm-2"><div class=checkbox><label><input type=checkbox name=b2b ng-model=display.partnertest.B2B> <strong>B2B (Private)</strong></label></div></div><div class=col-sm-2><div class=checkbox><label><input type=checkbox name=b2c ng-model=display.partnertest.B2C ng-click="display.partnertest.clientservices = [];"> <strong>B2C (Public)</strong></label></div></div><div class=col-sm-3><div class=checkbox><label><input type=checkbox name=b2c ng-model=display.partnertest.price.discountnotapplicable> <strong>Discount not applicable</strong></label></div></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label"></label><div class=col-sm-6><tags-input ng-show=display.partnertest.B2C ng-model=display.partnertest.clientservices on-tag-added=addTag($tag) on-tag-removed=removeTag() display-property=name key-property=_id add-from-autocomplete-only=true template=tag-test-template placeholder="search client test"><auto-complete source=searchClientTest($query) template=auto-test-template></auto-complete></tags-input></div></div><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">TAT</label><div class=col-sm-6><input type=text class=form-control ng-model=display.partnertest.tat></div></div><div class=form-group ng-class="{\'has-error\' : !display.partnertest.sampletype}"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Sample Type</label><div class=col-sm-6><select class="form-control input-sm" ng-model=display.partnertest.sampletype ng-options="tp.displayname as tp.displayname for tp in sampletypes | orderBy:\'displayname\'" required><option value>-- Sample type --</option></select></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-9"><button name=save type=button data-toggle=modal ng-click=showPriceModal() class="btn btn-default" ng-class="{\'has-btn-error\' : checkPrice()}">Price</button> <button name=save type=button data-toggle=modal ng-click=showPiModal() class="btn btn-default" ng-class="{\'has-btn-error\' : !display.partnertest.customerinstructions.length && display.partnertest.category == \'TEST\'}">Patient instruction</button> <button name=save type=button data-toggle=modal ng-click=showSiModal() class="btn btn-default" ng-class="{\'has-btn-error\' : !display.partnertest.specialinstructions.length && display.partnertest.category == \'TEST\'}">Special instruction</button> <button name=save type=button data-toggle=modal data-target=#descModal class="btn btn-default">Description</button></div></div><div class=form-group ng-class="{\'has-error\' : !display.partnertest.category}"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Category</label><div class=col-sm-6><select ng-model=display.partnertest.category ng-change=setMasterTest(display.partnertest.category) name=infotype id class=form-control ng-options="cat.displayname as cat.displayname for cat in display.ServiceCategory" required></select></div></div><div class=form-group ng-if="display.partnertest.category == \'TEST\'"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Master Services</label><div class=col-sm-6><input type=text style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;" ng-model=temp.services ng-model-options="{ debounce: 1500 }" ng-change=searchMasterService(temp.services) placeholder="search master services" class=form-control><table class="table table-responsive searchtable" style=margin:0px><tbody><tr ng-repeat="temp in temp.searchmasterserviceslist"><td ng-click=addmasterservices(temp) class=pointer><span ng-if=temp.code>({{temp.code}})</span> {{temp.name}}</td></tr></tbody></table></div></div><div class=form-group ng-if=display.partnertest.masterservice.service_id.name><div class="col-lg-6 col-sm-offset-3"><div class=form-group style="padding-left: 15px; margin-bottom: 0px;"><span style="display: inline-block; position:relative;" ng-model=master_service class=typeahead-available-text>{{display.partnertest.masterservice.service_id.name}}<i class="glyphicon glyphicon-remove pointer" ng-click=removeMasterService()></i></span>&nbsp;&nbsp;</div></div></div><div class="col-sm-offset-3 col-sm-6" ng-if="display.partnertest.category == \'PROFILE\' || display.partnertest.category == \'PACKAGES\'"><div class="panel panel-default" ng-class="{\'has-btn-error\' : !display.partnertest.childs.length}"><div class=panel-heading><strong>Components</strong> <small><sup><button name=save type=button ng-click=addComponent() class="btn btn-link btn-xs">Add</button></sup></small></div><table id=tabelview class="table table-bordered" style=background-color:white><tbody><tr ng-repeat="component in display.partnertest.childs track by $index"><td><span ng-if="component.test_id.category==\'TEST\'">{{component.test_id.name}}</span><u style=color:blue; class=pointer ng-if="component.test_id.category!=\'TEST\'" ng-click=showComponents(component.test_id)>{{component.test_id.name}}</u><small ng-click=addPPTest(component.test_id.postservices) style=color:blue;font-size:15px; ng-if=showPPAddButton(component.test_id)><sup>add pp / pg tests ( delete any one )</sup></small></td></tr></tbody></table></div></div><div ng-if="display.partnertest.category == \'TEST\'"><div class=form-group ng-class="{\'has-error\' : !display.partnertest.masterservice.department_id}"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Department</label><div class=col-sm-6><select ng-model=display.partnertest.masterservice.department_id type=text ng-options="dept as dept.name for dept in display.departments | orderBy:\'name\' track by dept._id" class=form-control name=mastertest aria-describedby=sizing-addon2 ng-required="display.partnertest.category == \'Test\'"></select></div></div><div class=form-group ng-class="{\'has-error\':!display.partnertest.masterservice.tubes.length}"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Tube(s)</label><div class=col-sm-6><input type=text style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;" ng-model=temp.serchtubeText ng-model-options="{ debounce: 1500 }" ng-change=searchTube(temp.serchtubeText) placeholder="search tubes" class=form-control><table class="table table-responsive searchtable" style=margin:0px><tbody><tr ng-repeat="temp in temp.searchTubeList"><td ng-click=addTubes(temp) class=pointer>{{temp.company}}-{{temp.type}}-{{temp.size}}</td></tr></tbody></table></div></div><div class=form-group><div class="col-lg-6 col-sm-offset-3"><div class=form-group><span ng-repeat="objtubes in display.partnertest.masterservice.tubes track by $index" style=padding-left:16px><span style="display: inline-block; position:relative" class=typeahead-available-text>{{objtubes.company}}-{{objtubes.type}}-{{objtubes.size}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removetubes(objtubes,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></div><div class=form-group ng-if="display.partnertest.category == \'TEST\'"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label"></label><div class=col-sm-3><input type=checkbox class=form name ng-model=display.partnertest.postsample ng-change=clearPostTest() value> <strong>Post Sample</strong></div></div><div class=form-group ng-if="display.partnertest.postsample && display.partnertest.category == \'TEST\'"><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Post Test</label><div class=col-sm-6><tags-input ng-model=postsampleServices display-property=name key-property=_id add-from-autocomplete-only=true template=auto-test-template1 placeholder="search postsample"><auto-complete source=searchPostsampleServices($query) max-results-to-show=100 template=auto-test-template1></auto-complete></tags-input></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-9"><button name=save type=button ng-click=Save() ng-if="display.partnertest.category == \'TEST\'" ng-disabled="( !(partner && display.partnertest.name && display.partnertest.category && display.partnertest.code && !checkPrice() && display.partnertest.customerinstructions.length && display.partnertest.specialinstructions.length && display.partnertest.sampletype) || (checkTestCat()) || (checkProPackCat()) )" class="btn btn-primary">Save</button> <button name=save type=button ng-click=Save() ng-if="display.partnertest.category != \'TEST\'" ng-disabled="( !(partner && display.partnertest.name && display.partnertest.category && display.partnertest.code && !checkPrice() && display.partnertest.sampletype) || (checkTestCat()) || (checkProPackCat()) )" class="btn btn-primary">Save</button></div></div></div></div></form><div ng-include="\'partials/partner/test/modal/price.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/pi.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/si.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/desc.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/component.modal.html\'"></div><div ng-include="\'partials/partner/test/modal/ConfirmPopupDeleteComponent.modal.html\'"></div><div class="modal fade" id=testExistsYES tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><div data-ng-bind-html="messageSome | sanitize"></div></h4><button ng-click=addService() type=button class="btn btn-primary" data-dismiss=modal>yes</button> <button ng-click=cancelService() type=button class="btn btn-gray" data-dismiss=modal>no</button></div></div></div></div></div></div><div class="modal fade" id=testExistsOK tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><div data-ng-bind-html="message | sanitize"></div></h4><button ng-click=testExists() style=width:130px class="btn btn-primary">Ok</button></div></div></div></div></div></div><div ng-include="\'partials/partner/test/modal/testComponent.modal.html\'"></div><script type=text/ng-template id=tag-template><div>{{data.company}}-{{data.type}}-{{data.size}}</div></script><script type=text/ng-template id=auto-template><div>{{data.company}}-{{data.type}}-{{data.size}}</div></script><script type=text/ng-template id=auto-template><div>{{data.company}}-{{data.type}}-{{data.size}}</div></script><script type=text/ng-template id=tag-test-template><div>{{data.name}}</div></script><script type=text/ng-template id=auto-test-template><div>{{data.name}}</div></script><script type=text/ng-template id=auto-test-template1><div>{{data.name}}</div></script>'),e.put("partials/servicerequest/list/servicerequest.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Service request <small></small> <small><sup><a href=#/main/serviceRequestAdd class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=search placeholder=Search style=margin-top:25px></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>FromTime</th><th>Status</th><th>Created By</th><th>Clientr</th></tr></thead><tbody><tr ng-repeat="servicerequest in display.servicerequests | filter:search" ng-click=selectServiceRequest(servicerequest)><td>{{ count + $index+1}}</td><td>{{servicerequest.fromdate | date}}</td><td>{{servicerequest.status}}</td><td>{{servicerequest.createdby}}</td><td>{{servicerequest.client_id.demography.name}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div>'),e.put("partials/srl/client/client-add.html",'<div class="row panelmainDiv" data-ng-init=edit()><div class="col-lg-12 panelheaderDiv"><div class=col-lg-6><h4 ng-hide=patient._id>Add Patient</h4><h4 ng-show=patient._id>Edit Patient</h4></div><div class=col-lg-6><button type=button class="btn btn-default pull-right" ng-click=close()>Cancel</button> <button ng-hide=patient._id type=button style=margin-right:5px; ng-click=addPatient() class="btn btn-default pull-right" ng-disabled="(patientFrm.$invalid || !patient.demography.addresses.length)">Save</button> <button ng-show=patient._id type=button style=margin-right:5px; ng-click=addPatient() class="btn btn-default pull-right" ng-disabled="(patientFrm.$invalid || !patient.demography.addresses.length)">Save changes</button></div></div><div class="col-lg-12 panelbodyDiv paneldetailbodyDiv"><div class=row><div class=col-lg-12><div class="panel panel-default"><div class=panel-body><div ng-form=patientFrm><div class=panel-body><div ng-include src="\'partials/srl/client/client-include-add.html\'"></div></div></div></div></div></div></div></div></div><div class="modal fade" id=AddressObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAddAddress() class="btn btn-default pull-right">Close</button><h4 class=modal-title id=myModalLabel>Add/Select address</h4></div><div class=modal-body><div class="panel panel-default"><div class=panel-heading>Add Address <button type=button style=margin-right:5px; ng-click=addAddress() class="btn btn-xs btn-primary pull-right" ng-disabled=!addressFrmValid><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></button></div><div class=panel-body><div ng-form=addressFrm><span ng-hide=true>{{addressFrmValid = addressFrm.$valid}}</span><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.title.$invalid}"><span class=input-group-addon><strong>Title</strong></span> <input name=title type=text autofocus placeholder=Title class=form-control ng-model=addaddress.title required></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.pincode.$invalid}"><span class=input-group-addon><strong>Pincode</strong></span> <input name=pincode type=text minlength=6 maxlength=6 onkeypress="if ( isNaN( String.fromCharCode(event.keyCode) )) return false;" autofocus placeholder=Pincode class=form-control ng-model=addaddress.pincode ng-change=enterPincode() required></div></div></div><div class=row><div class=col-md-12 style=padding-right:5px; ng-class="{ \'has-error\':addressFrm.addresslineone.$invalid }"><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>Address</strong></span> <textarea msd-elastic row=3 type=text autofocus placeholder=Address name=addresslineone class="form-control input-sm" ng-model=addaddress.address required></textarea></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.landmark.$invalid }"><span class=input-group-addon><strong>Landmark</strong></span> <input name=landmark type=text placeholder=Landmark class=form-control ng-model=addaddress.landmark required></div></div><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.State.$invalid }"><span class=input-group-addon><strong>State</strong></span><select name=State ng-options="state.name as state.name for state in stateList" ng-model=addaddress.state class=form-control required><option value>--Select State--</option></select></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.city.$invalid }"><span class=input-group-addon><strong>City</strong></span><select name=city ng-model=addaddress.city_id class=form-control ng-options="City as City.name for City in cityList track by City._id" required ng-change=changeCity()><option value>--Select City--</option></select></div></div><div class=col-md-6 style=padding-right:5px; ng-class="{ \'has-error\': addressFrm.area.$invalid }"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Area</strong></span><select name=area ng-model=addaddress.area_id class=form-control ng-options="Area as Area.name for Area in areaList track by Area._id" required><option value>--Select Area--</option></select></div></div></div></div></div></div><div class="panel panel-default" ng-if=patient.demography.addresses.length><div class=panel-heading>Select service delivery address</div><div class=panel-body><div class=row><div class="col-md-6 form-group" ng-repeat="tempaddress in patient.demography.addresses track by $index" style="border: 1px solid #999;"><span class=row><div class=col-md-1 style="word-wrap: break-word;"><label class=radio-inline><input type=radio name=addradio value=true ng-model=tempaddress.servicedeliveryaddress ng-click=checkServiceAddress(tempaddress,$index)></label></div><div class=col-md-9 style="word-wrap: break-word;"><span><label class="label label-default">{{tempaddress.title}}</label><br><span ng-if=tempaddress.address><span class=angular-with-newlines>{{tempaddress.address}}</span></span><br><strong ng-if=tempaddress.area_id>{{tempaddress.area_id.name}},</strong><br><span ng-if=tempaddress.landmark><strong>{{tempaddress.landmark}},</strong></span><br><span ng-if=tempaddress.city_id>{{tempaddress.city_id.name}}</span> <span ng-if=tempaddress.pincode>- {{tempaddress.pincode}}</span></span></div><div class=col-md-1 style="word-wrap: break-word;"><i class="glyphicon glyphicon-pencil pointer" ng-click=editAddress(tempaddress,$index)></i>&nbsp;&nbsp;&nbsp;</div><div class=col-md-1 style="word-wrap: break-word;"><i class="glyphicon glyphicon-remove pointer" ng-click=deleteAddress(tempaddress,$index)></i>&nbsp;&nbsp;&nbsp;</div></span></div></div></div></div></div><div class=modal-footer></div></div></div></div>'),e.put("partials/srl/client/client-include-add.html",'<div class=row ng-show="patient._id && patient.membership.length"><div class=col-md-2></div><div class=col-md-2></div></div><div class=row><div class="col-md-5 col-md-offset-1" style=padding-right:0px;><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>PID</strong></span> <input name=clientcode type=text autofocus placeholder="Patient Code" class=form-control ng-model=patient.clientcode maxlength=20></div></div></div><div class=row><div class="col-md-3 col-md-offset-1" style=padding-right:0px;><div class="input-group input-group-sm" ng-class="{ \'has-error\':patientFrm.salutation.$invalid || patientFrm.patientName.$invalid || patientFrm.patientLName.$invalid }"><span class=input-group-addon><strong>Title</strong></span><select name=salutation ng-options="salute.displayname as salute.displayname for salute in salutationlist.optionlist" ng-model=patient.demography.salutation class=form-control ng-class="{ \'has-error\': patientFrm.salutation.$invalid }" placeholder="atient Name" required ng-change=changeTitle()><option value>Select</option></select></div></div><div class=col-md-3 style="padding-left: 7px;padding-right: 7px;"><div class=form-group ng-class="{ \'has-error\': patientFrm.salutation.$invalid || patientFrm.patientName.$invalid || patientFrm.patientLName.$invalid }"><input type=text autofocus required placeholder="First Name" name=patientName class="form-control input-sm" ng-model=patient.demography.firstname ng-pattern=validName></div></div><div class=col-md-3 style="padding-left: 1px;"><div class=form-group ng-class="{ \'has-error\': patientFrm.salutation.$invalid || patientFrm.patientName.$invalid || patientFrm.patientLName.$invalid }"><input type=text autofocus required placeholder="Last Name" name=patientLName class="form-control input-sm" ng-model=patient.demography.lastname ng-pattern=validName></div></div></div><div class=row><div class="col-md-10 col-md-offset-1"><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !patient.demography.gender}"><span class=input-group-addon><strong>Gender</strong></span><div class=form-control><span ng-repeat="gender in genderlist.optionlist"><button type=button name=genderradio style=width:100px;margin-top:-2px; class="btn btn-xs btn-default" ng-class="(patient.demography.gender==gender.code)?\'btn-primary\':\'btn-default\'" ng-click="patient.demography.gender=gender.code"><i class=icon-male></i>{{gender.displayname}}</button></span></div></div><div class=col-md-3 ng-hide=true><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.genderradio.$invalid}"><span class=input-group-addon><strong>Gender</strong></span> <input type=text placeholder="Landline Number" name=genderradio class=form-control ng-model=patient.demography.gender required></div></div></div></div><div class=row><div class="col-md-3 col-md-offset-1" style=padding-right:7px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.age.$invalid || patientFrm.age.$error.maxlength}"><span class=input-group-addon><strong>Age</strong></span> <input type=text onkeypress="if ( isNaN( String.fromCharCode(event.keyCode) )) return false;" autofocus placeholder=Age ng-model=patient.demography.age name=age class=form-control maxlength=3 ng-pattern=validDigit ng-change=DOBCalculate() required></div></div><div class=col-md-3 style=padding-left:7px;padding-right:7px><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.agetype.$invalid}"><span class=input-group-addon><strong>in</strong></span><select name=agetype ng-model=patient.demography.agetype class=form-control ng-selected="patient.demography.agetype==\'years\'" ng-change=DOBCalculate()><option value=years>Years</option><option value=months>Months</option></select></div></div><div class=col-md-4 style=padding-left:7px><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.dob.$invalid }" ng-hide=patient.demography.assumeddob><span class=input-group-addon><strong>DOB</strong></span> <input type=text name=dob class="form-control input-sm" datepicker-popup ng-model=patient.demography.dob is-open=datePickerPopup.dp_dob close-text=Close ng-change=ageCalculator(patient.demography.dob) ng-click="openDatePicker($event,\'dp_dob\')" readonly required> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_dob\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=row><div class="col-md-5 col-md-offset-1" style=padding-right:0px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.mobilenumber.$invalid || patientFrm.mobilenumber.$error.minlength || patientFrm.mobilenumber.$error.maxlength}"><span class=input-group-addon><strong>Mobile Number</strong></span> <input type=text required placeholder="Mobile Number" name=mobilenumber class=form-control minlength=10 maxlength=10 onkeypress="if ( isNaN( String.fromCharCode(event.keyCode) )) return false;" ng-model=patient.demography.mobilenumber ng-pattern=validmobilenumber></div></div><div class=col-md-5 style=padding-left:7px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.landlinenumber.$invalid || patientFrm.landlinenumber.$error.minlength || patientFrm.landlinenumber.$error.maxlength}"><span class=input-group-addon><strong>Landline Number</strong></span> <input type=text placeholder="Landline Number" name=landlinenumber class=form-control ng-model=patient.demography.landlinenumber minlength=10 maxlength=15 onkeypress="if ( isNaN( String.fromCharCode(event.keyCode) )) return false;" ng-pattern=validmobilenumber></div></div></div><div class=row><div class="col-md-10 col-md-offset-1"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.email.$invalid }"><span class=input-group-addon><strong>Email ID</strong></span> <input type=text placeholder="Email ID" name=email class=form-control ng-model=patient.demography.email ng-pattern=EmailValid ng-required=patient.isemailactive></div></div></div><div class=row ng-if=!temp.hideWeightHeight><div class=col-md-1></div><div class=col-md-5 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.weight.$invalid }"><span class=input-group-addon><strong>Weight(kg)</strong></span> <input name=weight type=number autofocus placeholder=Weight class=form-control ng-model=patient.demography.weight maxlength=5></div></div><div class=col-md-5 style=padding-left:0px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': patientFrm.height.$invalid }"><span class=input-group-addon><strong>Height(cm)</strong></span> <input name=height type=number autofocus placeholder=Height class=form-control ng-model=patient.demography.height maxlength=5></div></div><div class=col-md-1></div></div><div class=row ng-if=!patient._id><div class="col-md-10 col-md-offset-1"><div ng-form=addressFrm><div ng-include="\'partials/srl/call/patientAddress.html\'"></div></div></div></div><div class=row><div class="col-md-10 col-md-offset-1"><span class="label label-primary" ng-if=patient.extra.ADDRESS1>Address: {{patient.extra.ADDRESS1}}, {{patient.extra.ADDRESS2}},</span> <span class="label label-primary" ng-if=patient.extra.CITY>{{patient.extra.CITY}},</span> <span class="label label-primary" ng-if=patient.extra.STATE>{{patient.extra.STATE}}</span><br><span class="label label-primary" ng-if=patient.extra.ZIP>ZIP : {{patient.extra.ZIP}}</span></div></div>'),e.put("partials/srl/client/clients.html",'<div class="row panelmainDiv" data-ng-init=table()><div class="col-lg-12 panelheaderDiv"><div class=pull-right><button type=button class="btn btn-default btn-sm" ui-sref=main.client-add><strong>New</strong></button></div><div class="pull-right input-group input-group-sm" style=margin-right:5px;width:30%><input type=text ng-model-options="{ debounce: 300 }" ng-model=searchObj.searchText class="form-control input-sm" placeholder="Search by name, mobile no."> <span class=input-group-btn><button class="btn btn-sm btn-default" ng-click=table(searchObj) type=button><i class="glyphicon glyphicon-search"></i></button></span></div><h4>Clients</h4></div><div class="col-md-12 panelbodyDiv"><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-body><div class=table-responsive ng-show="patientsList.length > 0"><table class="table table-striped table-bordered table-hover"><thead><tr><th>Code</th><th>Name</th><th>Gender</th><th>Contact Number</th></tr></thead><tbody><tr ng-repeat="patient in patientsList | filter:patient_search"><td><a ui-sref=main.client-add ng-click=editPatient(patient)>{{patient.clientcode}}</a></td><td><a ui-sref=main.client-add ng-click=editPatient(patient)><span ng-if="patient.type==\'institutemember\'" class=badge>I</span> {{patient.demography.fullname}}<br><span ng-show=patient.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span></a></td><td><span ng-if="patient.demography.gender==\'male\'">Male</span> <span ng-if="patient.demography.gender==\'female\'">Female</span></td><td><p>{{patient.demography.mobilenumber}}</p></td></tr></tbody></table><pagination class="pull-right pagination-sm" style=margin-right:5px; total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="isPaging=true;table(searchObj)"></pagination></div><div class=row ng-hide=patientsList.length><div class=col-md-12><div class="alert alert-warning" role=alert><strong>Patient not found</strong></div></div></div></div></div></div></div></div></div>'),e.put("partials/srl/call/address.modal.html",'<div class="modal fade" id=AddressObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAddAddress() class="btn btn-default pull-right">Close</button> <button type=button style="margin-right:5px;margin-top: -7px;" ng-click=addAddress() class="btn btn-primary pull-right" ng-disabled=!addressFrmValid><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></button><h4 class=modal-title id=myModalLabel><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></h4></div><div class=modal-body><div ng-form=addressFrm><span ng-hide=true>{{addressFrmValid = addressFrm.$valid}}</span><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.title.$invalid }"><span class=input-group-addon><strong>Address Type</strong></span><select name=title ng-model=addaddress.title class=form-control ng-options="title.displayname as title.displayname for title in AddressType.childs" required><option value>--Select Address Type--</option></select></div></div></div><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !addaddress.city_id._id }"><span class=input-group-addon><strong>City</strong></span><select name=city ng-options="city as city.name for city in cityList track by city._id" ng-model=tempaddcity class=form-control ng-change=selectAddCity(tempaddcity)><option value>--Select city--</option></select></div></div></div><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !addaddress.area_id._id }"><span class=input-group-addon><strong>Area</strong></span><select name=area ng-options="area as area.name for area in areaList track by area._id" ng-model=tempaddarea class=form-control ng-change=selectAddArea(tempaddarea)><option value>--Select area--</option></select></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.addpincode.$invalid }"><span class=input-group-addon><strong>Pincode</strong></span><select name=addpincode ng-model=addaddress.pincode class=form-control ng-options="pincode as pincode for pincode in pincodes" required><option value>--Select Pincode--</option></select></div></div></div><div class=row><div class=col-md-12 style=padding-right:5px; ng-class="{ \'has-error\':addressFrm.addresslineone.$invalid }"><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>Address Line 1</strong></span> <textarea msd-elastic type=text autofocus placeholder=Address name=addresslineone class="form-control input-sm" ng-model=addaddress.address required></textarea></div></div></div><div class=row><div class=col-md-12 style=padding-right:5px;><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>Address Line 2</strong></span> <textarea msd-elastic type=text autofocus placeholder=Address class="form-control input-sm" ng-model=addaddress.address2></textarea></div></div></div><div class=row><div class=col-md-12 style=padding-right:5px;><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>Address Line 3</strong></span> <textarea msd-elastic type=text autofocus placeholder=Address class="form-control input-sm" ng-model=addaddress.address3></textarea></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.landmark.$invalid }"><span class=input-group-addon><strong>Landmark</strong></span> <input name=landmark type=text placeholder=Landmark class=form-control ng-model=addaddress.landmark required></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.sublocation.$invalid }"><span class=input-group-addon><strong>Sub location</strong></span><select name=sublocation ng-model=addaddress.sublocation_id class=form-control ng-options="sublocation as sublocation.name for sublocation in subLocationList track by sublocation._id" ng-change=changesublocation()><option value>--Select Sub location--</option></select></div></div></div></div></div><div class=modal-footer></div></div></div></div>'),e.put("partials/srl/call/addressForOrder.modal.html",'<div class="modal fade" id=AddressObjectViewForOrder tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAddAddressForOrder() class="btn btn-default pull-right">Cancel</button> <button type=button style="margin-right:5px;margin-top: -7px;" ng-click=addAddressForOrder() class="btn btn-primary pull-right" ng-disabled=!addressFrmValid><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></button><h4 class=modal-title id=myModalLabel><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></h4></div><div class=modal-body><div ng-form=addressFrm><span ng-hide=true>{{addressFrmValid = addressFrm.$valid}}</span><div ng-include="\'partials/srl/call/patientAddress.html\'"></div></div></div><div class=modal-footer></div></div></div></div>'),e.put("partials/srl/call/availablity.calender.html",'<div class=table-responsive ng-if="availableStaff.length > 0"><table class="table table-bordered table-condensed" style=margin-bottom:0px><thead><tr><th>Phlebotomist</th><th ng-repeat="staff in availableStaff" style="font-size: smaller;"><span><strong><i class="glyphicon glyphicon-user"></i> {{staff.profile.name}} <span ng-if=staff.profile.code><span class="label label-info">{{staff.profile.code}}</span></span> <span ng-if=staff.profile.rating>{{staff.profile.rating}} <i class="glyphicon glyphicon-star"></i></span></strong></span></th></tr><tr><th>Time</th><th ng-repeat="staff in availableStaff" style="font-size: smaller;"><div ng-if=staff.partners.length style="font-size: smaller;font-weight: lighter;color: #428BCA;">{{staff.profile.type}}<br>Expertise: {{staff.profile.expertise}}</div></th></tr></thead><tbody style=height:300px;><tr ng-repeat="ts in timeSlots"><td><small>{{ts.time | waqt}}</small></td><td ng-repeat="staff in availableStaff" ng-class="getTDClass(staff, ts.time)" ng-click="selectAgentPartner(staff, ts.time)"><div ng-repeat="staffSlot in staff.timeSlots"><span ng-if="staffSlot.time == ts.time"><small><center ng-if=!staffSlot.count>Available</center></small><center ng-if=staffSlot.count><span ng-repeat="i in getNumber(staffSlot.count) track by $index"><i class="glyphicon glyphicon-remove"></i></span><br><small>{{staffSlot.areas.join(\',\')}}</small></center></span></div></td></tr></tbody></table></div>'),e.put("partials/srl/call/call-add.html",'<div><h2 ng-hide=call._id>New call<small><sup><a ng-click=cancelCall() class="btn btn-link btn-xs">clear</a></sup></small></h2><h2 ng-show=call._id>View call<small><sup><a ng-click=cancelCall() class="btn btn-link btn-xs">clear</a></sup></small></h2></div><div class="panel panel-default" style="background-color: #F4F3FB;border: none;"><div class=panel-body><div class=row><div class=col-sm-10 style="padding-right: 5px;"><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !patient._id }"><span class=input-group-addon><strong>Existing Patient</strong></span> <input id=search-input type=text ng-model=searchPatientObj.searchText ng-model-options="{ debounce: 300 }" placeholder="Discovery by name, mobile no." class=form-control><table class="table table-responsive searchtable"><tbody><tr ng-repeat="Patient in PatientList"><td ng-click=SelectPatient(Patient) class=pointer>{{Patient.demography.fullname}} <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}}, {{Patient.demography.gender}}, {{Patient.demography.servicedeliveryaddress.branch_id.name}}</span> <span><i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span></td></tr></tbody></table><span class="input-group-addon pointer" ng-click=SearchPatientByName()><i class="glyphicon glyphicon-search"></i> Discovery</span></div></div><div class=col-sm-2 style="padding-left: 5px;"><div class=btn-group role=group><button type=button class="btn btn-sm btn-primary" ng-click=newPatient()><i class="glyphicon glyphicon-plus"></i></button> <button type=button class="btn btn-sm btn-primary" ng-click=newPatient()>New Patient</button></div></div></div><div class=row ng-if=temppatient._id><div class=col-sm-6 style="margin-bottom: -5px;padding-right: 5px;"><div class="panel panel-default" style="height: 145px;border: none;"><div class=panel-heading style="background-color: #FFFFFF;"><strong>Personal details</strong> <a type=button class="btn btn-xs pull-right" ng-click=editPatient(temppatient)>EDIT</a></div><div class=list-group-item style="height: 103px;border: none;"><div ng-if=temppatient.demography.fullname style=margin-bottom:0px><strong><i class="glyphicon glyphicon-user"></i> {{temppatient.demography.fullname | uppercase}}</strong> <span ng-if=temppatient.clientcode><span class="label label-success">{{temppatient.clientcode}}</span></span><br><p style=margin:0px><span ng-if=temppatient.demography.gender><span ng-if="temppatient.demography.gender == \'male\'">Male</span> <span ng-if="temppatient.demography.gender == \'female\'">Female</span> <span ng-if="temppatient.demography.gender == \'third gender\'">Third Gender</span> / {{temppatient.demography.age}} {{temppatient.demography.agetype}}</span></p><p style=margin:0px ng-if=temppatient.demography.mobilenumber><span><i class="glyphicon glyphicon-phone"></i></span> {{temppatient.demography.mobilenumber}}</p></div></div></div></div><div class=col-sm-6 style="margin-bottom: -5px;padding-left: 5px;"><div class="panel panel-default" style="border: none;"><div class=panel-heading style="background-color: #FFFFFF;"><strong>Address</strong> <a type=button class="btn btn-xs pull-right" ng-click=openAddAddress()>ADD</a></div><div class=list-group-item style="border: none;" ng-repeat="tempaddress in temppatient.demography.addresses track by $index" data-toggle=tooltip data-placement=top title="Click to select address" ng-click="checkServiceAddress(tempaddress, $index)" ng-class="(tempaddress.servicedeliveryaddress == \'true\')?\'active\':\'\'"><strong>{{tempaddress.title}}</strong> <span class=pull-right><span ng-click="editServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-pencil pointer"></i></span> &nbsp;&nbsp; <span ng-click="deleteServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-trash pointer"></i></span> &nbsp;&nbsp;</span><br>{{tempaddress.address}}<br>{{tempaddress.area_id.name}}, <span ng-if=tempaddress.sublocation_id.name>{{tempaddress.sublocation_id.name}},</span><br>{{tempaddress.city_id.name}} - {{tempaddress.pincode}}</div></div></div></div><div class=row><div class=col-md-3 ng-if=patient._id style="padding-right: 5px;"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromdate }"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=call.fromdate is-open=datePickerPopup.dp_fd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_fd\')" readonly ng-change="call.todate = call.fromdate;getAgentPartner()"> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd\')"><i class="glyphicon glyphicon-calendar"></i></button></span> <span class=input-group-addon><span ng-click=getAgentPartner()><i class="glyphicon glyphicon-refresh pointer"></i></span></span></div></div><div class=col-md-3 ng-if=availableStaff.length style="padding-left: 5px;"><div class=btn-group role=group><button type=button class="btn btn-sm btn-primary" ng-click=selectAgentPartner()>Skip and continue</button> <button type=button class="btn btn-sm btn-primary" ng-click=selectAgentPartner()><i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div><div class=row ng-if=availableStaff.length><div class=col-md-12><div ng-include="\'partials/srl/call/availablity.calender.html\'"></div></div></div></div></div><div ng-include="\'partials/srl/call/address.modal.html\'"></div><div ng-include="\'partials/srl/call/addressForOrder.modal.html\'"></div><div ng-include="\'partials/srl/call/patient.object.modal.html\'"></div><div ng-include="\'partials/srl/call/partnerService.modal.html\'"></div><div ng-include="\'partials/srl/call/deleteService.modal.html\'"></div><div ng-include="\'partials/srl/call/forcePartnerService.modal.html\'"></div>'),e.put("partials/srl/call/deleteService.modal.html",'<div class="modal fade" id=myModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header></div><div class=modal-body><div class=row><div class=col-lg-12><h3>Are you sure you want to delete ?</h3><div class=row><div class=col-md-12><div class="col pull-right"><a data-dismiss=modal ng-click=deleteService() class="btn btn-default">Yes</a> <a data-dismiss=modal ng-click=closedeletemodal() class="btn btn-primary">No</a></div></div></div></div></div></div><div class=modal-footer></div></div></div></div>'),e.put("partials/srl/call/forcePartnerService.modal.html",'<div class="modal fade" id=ForceStaffObjView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button style="margin-right:5px;margin-top: -7px;" class="btn btn-default pull-right" data-dismiss=modal ng-click=closeForceServicesObject()>Cancel</button><h4 class=modal-title id=myModalLabel>Force assign staff</h4></div><div class=modal-body>No slot available, still allot phlebotomist ?</div></div></div></div>'),e.put("partials/srl/call/partnerService.modal.html",'<div class="modal fade" id=ServicesObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" class="btn btn-default pull-right" ng-click=closeServicesObject()>Close</button> <button ng-if=!call._id style="margin-right:5px;margin-top: -7px;" type=button class="btn btn-primary pull-right" ng-click=Save() ng-disabled="(partners.length)?!call.client_id._id || !call.comment || !call.services.length || !call.fromdate || !call.fromtime || !call.partner_id._id || !call.assignto._id || !call.orderId || temp.savebtndisable : !call.client_id._id || !call.comment || !call.services.length || !call.fromdate || !call.fromtime || !call.orderId"><span ng-hide=call._id>Save call and request</span></button><h4 class=modal-title id=myModalLabel>Save call</h4></div><div class=modal-body><div class=panel-group id=accordion ng-if=orders.length><div class="panel panel-default"><div class=panel-heading data-toggle=collapse data-target=#Orders><span><a data-toggle=collapse data-parent=#accordion><strong>Existing orders</strong></a></span> <span type=button class="caret pull-right"></span></div><div id=Orders class="panel-collapse collapse in"><div class=table-responsive><table class="table table-striped table-bordered table-hover table-condensed" style="margin-bottom: 0px;"><thead><tr><th>Patient</th><th>Area</th><th>Pincode</th><th>Date time</th></tr></thead><tbody><tr ng-repeat="order in orders"><td>{{order.client_id.demography.salutation }}{{order.client_id.demography.fullname}}</td><td>{{order.area_id.name}}</td><td>{{order.servicedeliveryaddress.pincode}}</td><td>{{order.fromdate | date:\'dd/MM/yyyy\'}} {{order.fromtime | waqt}}</td></tr></tbody></table></div></div></div></div><div class=panel-group id=accordion><div class="panel panel-default"><div class=panel-heading data-toggle=collapse data-target=#personal><span><a data-toggle=collapse data-parent=#accordion><strong>Personal details</strong></a></span> <span type=button class="caret pull-right"></span></div><div id=personal class="panel-collapse collapse in"><div class=row><div class=col-sm-6 style="margin-bottom: -5px;padding-right: 5px;" ng-if=call.client_id._id><div class="panel panel-default" style="height: 145px;border: none;"><div class=panel-heading style="background-color: #FFFFFF;"><strong>Personal details</strong></div><div class=list-group-item style="height: 103px;border: none;"><div ng-if=call.client_id.demography.fullname style=margin-bottom:0px><strong><i class="glyphicon glyphicon-user"></i> {{call.client_id.demography.fullname | uppercase}}</strong> <span ng-if=call.client_id.clientcode><span class="label label-success">{{call.client_id.clientcode}}</span></span><br><p style=margin:0px><span ng-if=call.client_id.demography.gender><span ng-if="call.client_id.demography.gender == \'male\'">Male</span> <span ng-if="call.client_id.demography.gender == \'female\'">Female</span> <span ng-if="call.client_id.demography.gender == \'third gender\'">Third Gender</span> / {{call.client_id.demography.age}} {{call.client_id.demography.agetype}}</span></p><p style=margin:0px ng-if=call.client_id.demography.mobilenumber><span><i class="glyphicon glyphicon-phone"></i></span> {{call.client_id.demography.mobilenumber}}</p></div></div></div></div><div class=col-sm-6 style="margin-bottom: -5px;padding-left: 5px;" ng-if=call.servicedeliveryaddress><div class="panel panel-default" style="border: none;"><div class=panel-heading style="background-color: #FFFFFF;"><strong>Address</strong></div><div class=list-group-item style="border: none;"><strong>{{call.servicedeliveryaddress.title}}</strong><br>{{call.servicedeliveryaddress.address}}<br>{{call.servicedeliveryaddress.area_id.name}}, <span ng-if=call.servicedeliveryaddress.sublocation_id.name>{{call.servicedeliveryaddress.sublocation_id.name}},</span><br>{{call.servicedeliveryaddress.city_id.name}} - {{call.servicedeliveryaddress.pincode}}</div></div></div></div></div></div></div><div class=row ng-if=partners.length><div class=col-md-3><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" value="{{call.fromdate | date:\'dd/MM/yyyy\'}}" readonly></div></div><div class=col-md-3><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromtime }"><span class=input-group-addon><strong>Time</strong></span><select name=fromtime class="form-control input-sm" aria-describedby=sizing-addon2 ng-model=call.fromtime required ng-change="call.totime = call.fromtime; changePhleboTime(call.fromtime)"><option ng-repeat="timeslot in tempTimeSlot track by $index" value={{timeslot.time}} ng-selected="call.fromtime == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div><div class=col-md-6><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.partner_id._id }"><span class=input-group-addon><strong>Serviced by lab</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partners track by partner._id" ng-model=call.partner_id class="form-control input-sm" placeholder=Partner ng-change=changePartner(call.partner_id)><option value>--Select--</option></select></div></div></div><div class=row ng-if=!partners.length><div class=col-md-3><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" value="{{call.fromdate | date:\'dd/MM/yyyy\'}}" readonly></div></div><div class=col-md-3><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromtime }"><span class=input-group-addon><strong>Time</strong></span><select name=fromtime class="form-control input-sm" aria-describedby=sizing-addon2 ng-model=call.fromtime required ng-change="call.totime = call.fromtime;"><option ng-repeat="timeslot in timeSlots15 track by $index" value={{timeslot.time}} ng-selected="call.fromtime == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div></div><div><div class=row><div class=col-md-6><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.orderId }"><span class=input-group-addon><strong>Incident No.</strong></span> <input maxlength=13 ng-pattern=validDigit type=text class="form-control input-sm" ng-model=call.orderId required></div></div><div class=col-md-6><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Paid</strong></span><div class="form-control input-sm"><input type=checkbox ng-model=call.paymentdetails.paid></div></div></div></div><div class=row><div class=col-md-12><div class="form-group input-group" ng-class="{ \'has-error\': !call.comment }"><span class="input-group-addon input-sm"><strong>Remarks</strong></span> <textarea msd-elastic name=callcomment ng-model=call.comment placeholder="Enter comment" class="form-control input-sm"></textarea></div></div></div><div class=row><div class=col-sm-12><div class=form-group ng-class="{ \'has-error\': !call.services.length }"><tags-input ng-model=call.services display-property=name key-property=_id placeholder="search tests" replace-spaces-with-dashes=true add-from-autocomplete-only=true name=services on-tag-added=SelectService($tag) on-tag-removed=serviceTagRemoved($tag,$index) template=tag-template required><auto-complete source=getAllServices($query,searchServiceObj) debounce-delay=1000 template=autocomplete-template></auto-complete></tags-input></div></div></div><div class=row ng-if="call.services.length > 0"><div class=col-sm-12><div class="panel panel-default nopadding"><div class=panel-heading>Tests <span class=pull-right ng-if="call.status != \'Unassigned\'">Total amount : <strong>{{call.paymentdetails.amount}}</strong></span></div><table class="table table-striped table-bordered table-hover"><thead><tr><th>Name</th><th>Code</th><th ng-if="call.status != \'Unassigned\'">Amount</th></tr></thead><tbody><tr ng-repeat="service in call.services track by $index"><td><span>{{service.service_id.name}}</span></td><td><span>{{service.service_id.code}}</span></td><td ng-if="call.status != \'Unassigned\'">{{service.price}}</td></tr></tbody></table></div></div></div></div></div></div></div></div><script type=text/ng-template id=tag-template><div class="left-panel"> </div> <div class="right-panel"> <span>{{data.service_id.name}} - {{data.service_id.code}}</span> <a class="remove-button" ng-click="$removeTag()">&#10006;</a> </div></script><script type=text/ng-template id=autocomplete-template><div>{{data.name}} - {{data.code}}</div></script>'),e.put("partials/srl/call/patient.object.modal.html",'<div class="modal fade" id=AddPatientObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=clearPatient() class="btn btn-default pull-right">Cancel</button><button ng-if=!patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="(patientFrm.$invalid || addressFrm.$invalid)"><span>Save and continue</span></button> <button ng-if=patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="(patientFrm.$invalid || addressFrm.$invalid)"><span>Update and continue</span></button><h4 class=modal-title id=myModalLabel ng-if=!patient._id>Add Patient</h4><h4 class=modal-title id=myModalLabel ng-if=patient._id>Update Patient</h4></div><div class=modal-body style="padding: 0px;"><div ng-form=patientFrm><div class=panel-body ng-controller=mlyclientController><div ng-include src="\'partials/srl/client/client-include-add.html\'" data-ng-init=edit()></div></div></div></div></div></div></div>'),e.put("partials/srl/call/patientAddress.html",'<div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.title.$invalid }"><span class=input-group-addon><strong>Address Type</strong></span><select name=title ng-model=addaddress.title class=form-control ng-options="title.displayname as title.displayname for title in AddressType.childs" required><option value>--Select Address Type--</option></select></div></div></div><div class=row><div class=col-sm-6 style=padding-right:5px;><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !addaddress.city_id._id }"><span class=input-group-addon><strong>City</strong></span><select name=city ng-options="city as city.name for city in cityList track by city._id" ng-model=tempaddcity class=form-control ng-change=selectAddCity(tempaddcity)><option value>--Select city--</option></select></div></div><div class=col-sm-6 style=padding-left:5px;><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !addaddress.area_id._id }"><span class=input-group-addon><strong>Area</strong></span><select name=area ng-options="area as area.name for area in areaList track by area._id" ng-model=tempaddarea class=form-control ng-change=selectAddArea(tempaddarea)><option value>--Select area--</option></select></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.sublocation.$invalid }"><span class=input-group-addon><strong>Sub location</strong></span><select name=sublocation ng-model=addaddress.sublocation_id class=form-control ng-options="sublocation as sublocation.name for sublocation in subLocationList track by sublocation._id" ng-change=changesublocation()><option value>--Select Sub location--</option></select></div></div><div class=col-md-6 style=padding-left:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.addpincode.$invalid }"><span class=input-group-addon><strong>Pincode</strong></span><select name=addpincode ng-model=addaddress.pincode class=form-control ng-options="pincode as pincode for pincode in pincodes" required><option value>--Select Pincode--</option></select></div></div></div><div class=row><div class=col-md-3 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.wing.$invalid }"><span class=input-group-addon><strong>Wing</strong></span> <input name=wing type=text placeholder class=form-control ng-model=addaddress.wing></div></div><div class=col-md-3 style=padding-right:5px;padding-left:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.flatno.$invalid }"><span class=input-group-addon><strong>Flat No.</strong></span> <input name=flatno type=text placeholder class=form-control ng-model=addaddress.flatno></div></div><div class=col-md-3 style=padding-right:5px;padding-left:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.plotno.$invalid }"><span class=input-group-addon><strong>Plot No.</strong></span> <input name=plotno type=text placeholder class=form-control ng-model=addaddress.plotno></div></div><div class=col-md-3 style=padding-left:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.sectorno.$invalid }"><span class=input-group-addon><strong>Sector No.</strong></span> <input name=sectorno type=text placeholder class=form-control ng-model=addaddress.sectorno></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.building.$invalid }"><span class=input-group-addon><strong>Building / Bunglow</strong></span> <input name=building type=text placeholder="Building / Bunglow Name" class=form-control ng-model=addaddress.building required></div></div><div class=col-md-6 style=padding-left:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.streetname.$invalid }"><span class=input-group-addon><strong>Street fmsdfmsdlfm;lsdmc</strong></span><input id=Autocomplete class=form-control name=streetname type=text placeholder="Street Name" ng-model=addaddress.streetname required></div></div></div><div class=row><div class=col-md-12 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.landmark.$invalid }"><span class=input-group-addon><strong>Landmark</strong></span> <input name=landmark type=text placeholder=Landmark class=form-control ng-model=addaddress.landmark></div></div></div>'),e.put("partials/staffavailability/modal/bookedOrderList.modal.html",'<div class="modal fade" id=bookedOrderListModal tabindex=-1 role=dialog aria-labelledby=phleboModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Close</button><div class=modal-title id=bookedOrderListModal>Orders assigned to <b>{{modal.bookedOrderListModal.staff.profile.name}}</b> between <b>{{modal.bookedOrderListModal.fromtime | waqt}} to {{modal.bookedOrderListModal.totime | waqt}}</b></div></div><div class=modal-body><div class="alert alert-danger" role=alert ng-repeat="odr in modal.bookedOrderListModal.timeObj.orders" style="padding-top: 5px;padding-bottom: 5px;margin-bottom: 5px;"><h4 style=margin:0px>{{odr.fromtime | waqt}}</h4><small><strong>Partner:</strong>{{odr.partner_id.info.name}}<br><strong>Sub location:</strong> {{odr.servicedeliveryaddress.sublocation_id.name}}<br><strong>Patient info:</strong>{{odr.client_id.demography.salution}} {{odr.client_id.demography.fullname}}</small></div></div></div></div></div>'),e.put("partials/staffavailability/modal/orderList.modal.html",'<div class="modal fade" id=orderListModal tabindex=-1 role=dialog aria-labelledby=rescheduleOrderModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" class="btn btn-default pull-right" ng-click=closeOrderListModal()>Close</button><h4 class=modal-title id=orderListModal>Order list</h4></div><div class=modal-body><div class=row ng-hide="OrderList.length == 0"><div class=col-md-12><div class="alert alert-warning" role=alert>Assign order to <b>{{modal.orderListModal.staff.profile.name}}</b> on <b>{{searchOrderObj.fromdate | date: \'dd-MMM-yyyy\'}}</b> between <b>{{searchOrderObj.fromtime | waqt}} to {{searchOrderObj.totime | waqt}}</b> at <b>Area : {{area.name}}</b></div></div></div><div class=row><div class=col-md-12><div class=table-responsive ng-show="OrderList.length > 0"><table class="table table-bordered table-condensed"><thead><tr><th>Client Name &nbsp;</th><th>Tests</th><th ng-click="changeSorting(\'fromdatetime\')" ng-class="selectedCls(\'fromdatetime\')">Time &nbsp;</th><th>Sub-Location</th><th>Assign</th></tr></thead><tbody><tr ng-repeat="Order in OrderList track by $index"><td><span ng-if="Order.client_id.type==\'institutemember\'" class=badge>I</span> {{Order.client_id.demography.salutation}}&nbsp; {{Order.client_id.demography.fullname}}<sup ng-if="Order.ordertype==\'PP\'"><small style=color:red>({{Order.ordertype}})</small></sup><br><sup><small>{{Order.client_id.demography.gender}}/ {{Order.client_id.demography.age}}</small></sup><br><sup ng-if="Order.specialneed.description && Order.specialneed.description != \'Na\'"><small style=color:red>{{Order.specialneed.description}}</small></sup></td><td><div style="max-height: 100px;height: auto;overflow-y: auto;display: block;"><span ng-repeat="OrderService in Order.services"><small>{{OrderService.service_id.name}}{{$last?\'\':\',\'}} &nbsp;</small></span><br><sup><small>Partner: <strong>{{Order.partner_id.info.name}}</strong></small></sup></div></td><td><small>{{Order.fromtime | waqt }}</small></td><td><small>{{Order.servicedeliveryaddress.sublocation_id.name}}</small></td><td><button class="btn btn-success" ng-click="assignStaff(Order, modal.orderListModal.staff)">Assign</button></td></tr></tbody></table><pagination class="pull-right pagination-sm" style=margin-right:5px; total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="isPaging=true;getOrderList()"></pagination></div><div ng-show="OrderList.length == 0"><div class="alert alert-warning" role=alert><strong>No orders</strong></div></div></div></div></div></div></div></div>'),e.put("partials/staffavailability/modal/selectareamessage.modal.html",'<div class="modal fade" id=alertMessage tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=ok><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>Please select area / date.</h4><button ng-click=selectAreaOK() style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div>'),e.put("partials/srl/order/order.html",'<div class=row><div class="col-lg-8 col-md-8 col-sm-8 col-xs-5" style=padding-left:0px><h2>Appointments<small><sup><a href=#/main/call-add class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-5 input-group input-group-sm" style="padding-right:0px; padding-top:25px"><input type=text ng-model-options="{ debounce: 300 }" ng-model=searchObj.search class="form-control input-sm" placeholder="Search by name, mobile, patientcode"> <span class=input-group-btn><button class="btn btn-sm btn-default" ng-click=getOrderList() type=button><i class="glyphicon glyphicon-search"></i></button></span></div></div><div class=row><div class="panel panel-default"><div class=panel-body><div class=row><div class=col-md-3><div class="input-group form-group"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObj.searchDate is-open=datePickerPopup.dp_searchDate close-text=Close ng-change=getOrderList() ng-click="openDatePicker($event,\'dp_searchDate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span> <span class=input-group-btn><button class="btn btn-default btn-sm" ng-click=getOrderList() type=button><i class="glyphicon glyphicon-search"></i></button></span></div></div><div class=col-md-2><div class=form-group><button class="btn btn-default btn-sm" ng-click=previousDate() type=button><i class="glyphicon glyphicon-chevron-left" style=color:#555></i></button> <button class="btn btn-sm btn-primary" ng-click=todayDate() type=button>Today</button> <button class="btn btn-default btn-sm" ng-click=nextDate() type=button><i class="glyphicon glyphicon-chevron-right" style=color:#555></i></button></div></div><div class=col-md-3><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': callFrm.callpartner.$invalid }"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner._id as partner.info.name for partner in partnerList track by partner._id" ng-model=searchObj.partner_id class="form-control input-sm" placeholder=Partner ng-change="searchObj.status = \'\';getOrderList()"><option value>--Select--</option></select></div></div></div><div class=row></div><div class=row><div class=col-md-12><div class=form-group><span class="label pointer" ng-class="(searchObj.status == \'\')?\'buttonactive active\':\'\'" style="color: #999;" ng-click="getOrderList(searchObj.status = \'\')">All</span> <span class="label pointer" ng-class="(searchObj.status == \'Open\')?\'buttonactive\':\'\'" style="background-color: #F5F5F5; color: #999;" ng-click="getOrderList(searchObj.status = \'Open\')">Open</span> <span ng-class="(searchObj.status == \'Completed\')?\'buttonactive\':\'\'" class="label pointer" style="background-color: #dff0d8; color: #999;" ng-click="getOrderList(searchObj.status = \'Completed\')">Completed</span> <span class="label pointer" style="background-color: #fcf8e3; color: #999;" ng-class="(searchObj.status == \'Cancelled\')?\'buttonactive active\':\'\'" ng-click="getOrderList(searchObj.status = \'Cancelled\')">Cancelled</span> <span class="label pointer bg-danger" ng-class="(searchObj.status == \'Unassigned\')?\'buttonactive active\':\'\'" style="color: #999;" ng-click="searchObj.status = \'Unassigned\';searchObj.partner_id= \'\';getOrderList()">Unallocated</span></div></div></div><div class=table-responsive ng-show="OrderList.length > 0"><table class="table table-bordered table-condensed"><thead><tr><th>Client Name &nbsp;</th><th>Order ID</th><th>Tests</th><th ng-click="changeSorting(\'fromdatetime\')" ng-class="selectedCls(\'fromdatetime\')">Time &nbsp;</th><th>Area</th><th>Staff</th></tr></thead><tbody><tr ng-repeat="Order in OrderList | filter: search | orderBy:sort.column: sort.descending" ng-class="{\'success\' : Order.status == \'Completed\',\'warning\' : Order.status == \'Cancelled\',\'danger\' : Order.status == \'Unassigned\', \'active\' : Order.status == \'Open\'}"><td><a href ng-click=SelectOrder(Order)><span ng-if="Order.client_id.type==\'institutemember\'" class=badge>I</span> {{Order.client_id.demography.salutation}}&nbsp; {{Order.client_id.demography.fullname}}<br><sup><small>{{Order.client_id.demography.gender}}/ {{Order.client_id.demography.age}}</small></sup></a></td><td><span class="label label-success">{{Order.externalId}}</span></td><td><div style="max-height: 100px;height: auto;overflow-y: auto;display: block;"><span ng-repeat="OrderService in Order.masterservices"><small>{{OrderService.service_id.name}}{{$last?\'\':\',\'}} &nbsp;</small></span></div></td><td><small>{{Order.fromtime | waqt }}<p ng-show=Order.servicetime style=color:#FF0000>({{Order.servicetime | date:\'h:mma\' }})</p></small></td><td><small>{{Order.area_id.name}}</small></td><td>{{Order.assignto.profile.name}}<br><sup><small>{{Order.assignto.profile.mobilenumber}}</small></sup></td></tr></tbody></table><pagination class="pull-right pagination-sm" style=margin-right:5px; total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="isPaging=true;getOrderList()"></pagination></div><div ng-show="OrderList.length == 0"><div class="alert alert-warning" role=alert><strong>No orders</strong></div></div></div></div></div>'),e.put("partials/srl/order/order.object.html",'<div class=row><div class="col-lg-8 col-md-8 col-sm-8 col-xs-5" style=padding-left:0px><h2>Update appointment<small><sup><a href=#/main/order class="btn btn-link btn-xs">Back to appointments</a></sup></small></h2></div></div><div class=row><div class="panel panel-default"><div class=panel-body><div class=row ng-show="order.status!=\'Completed\' && order.status!=\'Cancelled\'"><div class="col-md-8 col-md-offset-2"><div class=form-group><button type=button class="btn btn-sm" ng-click="Update(temp.status =\'Cancelled\')"><i class="glyphicon glyphicon-pencil"></i>&nbsp;Cancel appointment</button>&nbsp;<button type=button class="btn btn-sm" ng-click=updateStaffModal()><i class="glyphicon glyphicon-pencil"></i>&nbsp;Reschedule</button>&nbsp;<button type=button class="btn btn-sm" ng-click=updateserviceModal()><i class="glyphicon glyphicon-pencil"></i>&nbsp;Service</button>&nbsp;<button type=button class="btn btn-sm" ng-click=showAddresses(order.servicedeliveryaddress)><i class="glyphicon glyphicon-pencil"></i>&nbsp;Change address</button>&nbsp;</div></div></div><div class=row><div class="col-md-8 col-md-offset-2"><div class=table-responsive><table class="table table-bordered"><tbody><tr class=active><td colspan=2><strong>Information</strong></td></tr><tr><td><strong>Order ID</strong></td><td>{{order.externalId}}</td></tr><tr><td><strong>Client</strong></td><td><span ng-if=order.client_id.demography.fullname>{{order.client_id.demography.salutation}}&nbsp; {{order.client_id.demography.fullname}}</span> <span ng-show=order.client_id.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span> &nbsp; {{order.client_id.demography.age}}, &nbsp; {{order.client_id.demography.gender}}, &nbsp; {{order.client_id.demography.mobilenumber}}<br><div style="word-wrap: break-word;"><span><label class="label label-default">{{order.servicedeliveryaddress.title}}</label><br><span ng-if=order.servicedeliveryaddress.address>{{order.servicedeliveryaddress.address}}</span><br><span ng-if=order.servicedeliveryaddress.area_id>{{order.servicedeliveryaddress.area_id.name}},</span><br><span ng-if=order.servicedeliveryaddress.city_id>{{order.servicedeliveryaddress.city_id.name}}</span> <span ng-if=order.servicedeliveryaddress.pincode>- {{order.servicedeliveryaddress.pincode}}</span></span></div></td></tr><tr><td><strong>Allocated to</strong></td><td ng-if=order.assignto.profile.name><span ng-if=order.assignto.profile.name>{{order.assignto.profile.name}}&nbsp;</span><span ng-if="order.assignto.profile.gender == \'male\'">Male,&nbsp;</span> <span ng-if="order.assignto.profile.gender == \'female\'">Female,&nbsp;</span> <span ng-if=order.assignto.profile.mobilenumber>{{order.assignto.profile.mobilenumber}}</span> <span ng-if=order.partner_id>({{order.partner_id.info.name}})&nbsp;</span></td><td ng-if=!order.assignto><button ng-hide="order.status == \'Cancelled\'" type=button class="btn btn-sm" ng-click=updateStaffModal()><i class="glyphicon glyphicon-pencil"></i>&nbsp;Allocate staff</button>&nbsp;</td></tr><tr><td><strong>Allocated by</strong></td><td><span ng-if=order.assignby.profile.name>{{order.assignby.profile.name}}&nbsp;</span><span ng-if="order.assignby.profile.gender == \'male\'">Male,&nbsp;</span> <span ng-if="order.assignby.profile.gender == \'female\'">Female,&nbsp;</span> {{order.assignby.profile.mobilenumber}}</td></tr><tr><td><strong>Visit time</strong></td><td>{{order.fromdate | date:\'dd/MM/yyyy\'}} {{order.fromtime | waqt}} <span ng-if="order.status==\'Open\'" class="label label-warning"><strong>&nbsp;{{order.status}}</strong></span> <span ng-if="order.status==\'Completed\'" class="label label-success"><strong>&nbsp;{{order.status}}</strong></span> <span ng-if="order.status==\'Cancelled\'" class="label label-danger"><strong>&nbsp;{{order.status}}</strong></span> <span ng-if="order.status==\'Unassigned\'" class="label label-warning"><strong>&nbsp;{{order.status}}</strong></span> <span ng-if="order.status==\'Received\'" class="label label-warning"><strong>&nbsp;{{order.status}}</strong></span> <span ng-if="order.status==\'Reached\'" class="label label-warning"><strong>&nbsp;{{order.status}}</strong></span></td></tr><tr ng-show="order.status==\'Completed\'"><td><strong>Service time</strong></td><td>{{order.servicetime | date:\'dd/MM/yyyy @ h:mma\' }}</td></tr><tr ng-show=order.client_id.demography.servicedeliveryaddress.branch_id.name><td><strong>Default branch</strong></td><td colspan=4>{{order.client_id.demography.servicedeliveryaddress.branch_id.name}}</td></tr><tr ng-show=order.branch_id.name><td><strong>Branch</strong></td><td>{{order.branch_id.name}}</td></tr></tbody></table></div></div></div><div class=row ng-show=order.masterservices.length><div class="col-md-8 col-md-offset-2"><div class=table-responsive><table class="table table-bordered" ng-if="order.status == \'Completed\' && order.paymentdetails.discount"><thead><th class=active>Selected services</th><th class=active ng-if="order.status != \'Unassigned\'">Original Amount</th><th ng-if=order.paymentdetails.discount class=active>Discounted Amount</th></thead><tbody><tr ng-repeat="service in order.masterservices"><td><span>{{service.service_id.name}}</span> <span ng-if=service.service_id.code><span class="label label-info">{{service.service_id.code}}</span></span></td><td ng-if="order.status != \'Unassigned\'"><span class=pull-right style="text-decoration: line-through;">{{service.orignaltestprice}}</span></td><td ng-if="order.status != \'Unassigned\'"><span class=pull-right>{{service.price }}</span></td></tr><tr><td><span>Total Amount</span></td><td><span class=pull-right>{{order.orignalpricetotalcompeted}}</span></td><td><span class=pull-right>{{order.paymentdetails.amount }}</span></td></tr><tr ng-if="order.status != \'Unassigned\' && order.paymentdetails.discount"><td colspan=3><span class=pull-right><span ng-if=order.paymentdetails.discount><b>Discounted Amount({{order.paymentdetails.discount}}<b>%</b>) :</b> {{totalofdiscounttest+totalofnondiscounttest - orignalpriceamount}}</span></span></td></tr><tr ng-if="order.status != \'Unassigned\'"><td colspan=3><span class=pull-right><span><b>Visiting Charge :</b> {{order.paymentdetails.visitingcharges}}</span></span></td></tr><tr ng-if="order.status != \'Unassigned\'"><td colspan=3><span class=pull-right><span><b>Total Order Amount :</b> {{order.paymentdetails.amount + order.paymentdetails.visitingcharges }}</span></span></td></tr></tbody></table><table class="table table-bordered" ng-if="order.status != \'Completed\'"><thead><th class=active>Selected services</th><th class=active ng-if="order.status != \'Unassigned\'">Amount</th></thead><tbody><tr ng-repeat="service in order.masterservices"><td><span>{{service.service_id.name}}</span> <span ng-if=service.service_id.code><span class="label label-info">{{service.service_id.code}}</span></span></td><td ng-if="order.status != \'Unassigned\'"><span class=pull-right>{{service.price }}</span></td></tr><tr ng-if="order.status != \'Unassigned\'"><td colspan=3><span class=pull-right><span>Total Order Amount : {{order.paymentdetails.amount}}</span></span></td></tr></tbody></table><table class="table table-bordered" ng-if="order.status == \'Completed\' && !order.paymentdetails.discount"><thead><th class=active>Selected services order</th><th class=active ng-if="order.status != \'Unassigned\'">Amount</th></thead><tbody><tr ng-repeat="service in order.masterservices"><td><span>{{service.service_id.name}}</span> <span ng-if=service.service_id.code><span class="label label-info">{{service.service_id.code}}</span></span></td><td ng-if="order.status != \'Unassigned\'"><span class=pull-right>{{service.price }}</span></td></tr><tr ng-if="order.status != \'Unassigned\'"><td colspan=3><span class=pull-right><span><b>Visiting Charge :</b> {{order.paymentdetails.visitingcharges}}</span></span></td></tr><tr ng-if="order.status != \'Unassigned\'"><td colspan=3><span class=pull-right><span>Total Order Amount : {{order.paymentdetails.amount + order.paymentdetails.visitingcharges}}</span></span></td></tr></tbody></table></div></div></div><div class=row ng-show=order.masterservices.length><div class="col-md-8 col-md-offset-2"><div class=table-responsive><table class="table table-bordered"><thead><th class=active>Payment Details</th><th class=active ng-if=order.paymentdetails.paid>Paid</th><th class=active ng-if=!order.paymentdetails.paid>Unpaid</th></thead><tbody></tbody></table></div></div></div><div class=row ng-show=order.comments.length><div class="col-md-8 col-md-offset-2"><div class=table-responsive><table class="table table-bordered"><thead><th class=active>Remarks</th></thead><tbody><tr ng-repeat="comment in order.comments"><td><span>{{comment}}</span></td></tr></tbody></table></div></div></div><div class=row ng-if=order.nursecomments><div class="col-md-8 col-md-offset-2"><div class=table-responsive><table class="table table-bordered"><tbody><tr class=active><td><strong>Nurse Comment</strong></td></tr><tr><td>{{order.nursecomments}}</td></tr></tbody></table></div></div></div><div class=row ng-if=order.log.length><div class="col-md-8 col-md-offset-2"><div class=table-responsive><table class="table table-bordered"><tbody><tr class=active><td colspan=5><strong>Log</strong></td></tr><tr class=active><td><strong>Comment</strong></td><td><strong>New status</strong></td><td><strong>Action</strong></td><td><strong>Updated by</strong></td><td><strong>Date and time</strong></td></tr><tr ng-repeat="logObj in order.log"><td><span class=angular-with-newlines>{{logObj.comments}}</span></td><td>{{logObj.newstatus}}</td><td>{{logObj.action}}</td><td>{{logObj.updatedby.profile.name}}</td><td>{{logObj.updateddatetime | date:\'yyyy/MM/dd @ hh:mm a\'}}</td></tr></tbody></table></div></div></div></div></div></div><div class="modal fade" id=confirmIndicator tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button style="margin-right:5px;margin-top: -7px;" class="btn btn-default pull-right" data-dismiss=modal ng-click=Confirm(false)>Cancel</button> <button type=button style="margin-right:5px;margin-top: -7px;" class="btn btn-primary pull-right" ng-click=Confirm(true) ng-disabled=StatusCommentsfrm.$invalid>Save changes</button><h4 class=modal-title id=myModalLabel>Are you sure, You want to cancel the order ?</h4></div><form name=StatusCommentsfrm><div class=modal-body><div class=form-group ng-class="{ \'has-error\': !order.statuscomment }"><div ng-if="order.CurrentStatus != temp.status"><select ng-model=reason class=form-control ng-options="cancelReason.displayname as cancelReason.displayname for cancelReason in AppointmentCancelMaster.childs" required ng-change=changeCancelReason(reason)><option value>--Select Reason--</option></select></div></div><div class=form-group ng-if="tempreason == \'OTHERS\'" ng-class="{ \'has-error\': !order.statuscomment }"><div ng-if="order.CurrentStatus != temp.status"><textarea msd-elastic ng-model=order.statuscomment placeholder="Please mention reason to change status" class=form-control required></textarea></div></div></div></form></div></div></div><div class="modal fade" id=visitCommentBox tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true ng-click=updateserviceModal()>×</button><h4 class=modal-title id=myModalLabel>Comment</h4></div><form name=VisitCommentsfrm><div class=modal-body><div class=form-group><label>{{ServiceTitleName}}</label> <textarea msd-elastic ng-model=DeleteComment placeholder="Please write Comments" ng-pattern=validVisitComment class=form-control required></textarea></div></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal ng-click=updateserviceModal()>Cancel</button> <button type=button class="btn btn-primary" ng-click=ConfirmComment(true) ng-disabled=!VisitCommentsfrm.$valid>Save changes</button></div></form></div></div></div><div class="modal fade bs-example-modal-lg" id=updateStaffObjView tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow:scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true>×</button><h4 class=modal-title id=myModalLabel>Update time/staff</h4></div><form name=stafffrm><div class=modal-body style=padding-bottom:0px;><div class=form-group><div class=row><div class="col-md-8 col-md-offset-2"><div class="input-group form-group"><span class=input-group-addon><strong>Service Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=temp.fromdate is-open=datePickerPopup.dp_tempfromdate close-text=Close ng-click="openDatePicker($event,\'dp_tempfromdate\')" min-date=datePickerPopup.minDate readonly required ng-change=getAgentPartner()> <span class=input-group-addon><i class="glyphicon glyphicon-calendar" ng-click="openDatePicker($event,\'dp_tempfromdate\')"></i></span> <span class=input-group-addon><span ng-click=getAgentPartner()><i class="glyphicon glyphicon-refresh pointer"></i></span></span></div></div></div><div class=row ng-if=availableStaff.length><div class=col-md-12><div ng-include="\'partials/srl/call/availablity.calender.html\'"></div></div></div></div></div></form></div></div></div><div class="modal fade" id=ServicesObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" class="btn btn-default pull-right" ng-click=closeServicesObject()>Cancel</button><button type=button style="margin-right:5px;margin-top: -7px;" class="btn btn-primary pull-right" ng-click=updateStaff() ng-disabled="!temp.fromtime || !temp.partner_id || !order.logobj.comments">Save changes</button><h4 class=modal-title id=myModalLabel>&nbsp;</h4></div><div class=modal-body><div class=panel-group id=accordion ng-if=orders.length><div class="panel panel-default"><div class=panel-heading data-toggle=collapse data-target=#Orders><span><a data-toggle=collapse data-parent=#accordion><strong>Existing orders</strong></a></span> <span type=button class="caret pull-right"></span></div><div id=Orders class="panel-collapse collapse in"><div class=table-responsive><table class="table table-striped table-bordered table-hover table-condensed" style="margin-bottom: 0px;"><thead><tr><th>Patient</th><th>Area</th><th>Pincode</th><th>Date time</th></tr></thead><tbody><tr ng-repeat="order in orders"><td>{{order.client_id.demography.salutation }}{{order.client_id.demography.fullname}}</td><td>{{order.area_id.name}}</td><td>{{order.servicedeliveryaddress.pincode}}</td><td>{{order.fromdate | date:\'dd/MM/yyyy\'}} {{order.fromtime | waqt}}</td></tr></tbody></table></div></div></div></div><div class=row ng-if=partners.length><div class=col-md-4><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !temp.fromtime }"><span class=input-group-addon><strong>Time</strong></span><select name=fromtime class="form-control input-sm" aria-describedby=sizing-addon2 ng-model=temp.fromtime required ng-change="temp.totime = temp.fromtime;"><option ng-repeat="timeslot in tempTimeSlot track by $index" value={{timeslot.time}} ng-selected="temp.fromtime == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div><div class=col-md-8><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !temp.partner_id._id }"><span class=input-group-addon><strong>Serviced by lab</strong></span><select name=temppartner ng-options="partner as partner.info.name for partner in partners track by partner._id" ng-model=temp.partner_id class="form-control input-sm" placeholder=Partner><option value>--Select--</option></select></div></div></div><div class=row><div class=col-md-12 ng-class="{ \'has-error\': !order.logobj.comments }"><div class="input-group form-group"><span class="input-group-addon input-sm"><strong>Comment</strong></span> <textarea msd-elastic ng-model=order.logobj.comments placeholder="Please mention reason to change staff" class=form-control></textarea></div></div></div></div></div></div></div><div ng-include="\'partials/srl/call/forcePartnerService.modal.html\'"></div><div class="modal fade" id=updateServiceObjView tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button style="margin-right:5px;margin-top: -7px;" class="btn btn-default pull-right" data-dismiss=modal ng-click="service_sm={};order.logobj.comments=\'\';">Cancel</button> <button ng-if="order.status != \'Unassigned\'" type=button style="margin-right:5px;margin-top: -7px;" class="btn btn-primary pull-right" ng-disabled="!order.logobj.comments || !temp.services.length || temp.savebtndisable" ng-click=addServiceTag()>Save changes</button> <button ng-if="order.status == \'Unassigned\'" type=button style="margin-right:5px;margin-top: -7px;" class="btn btn-primary pull-right" ng-disabled="!order.logobj.comments || !temp.services.length" ng-click=addServiceTag()>Save changes</button><h4 class=modal-title id=myModalLabel>Services</h4></div><form name=servicefrm><div class=modal-body><div class=form-group><div class=row><div class="col-md-8 col-md-offset-2"><div class=form-group ng-class="{ \'has-error\': !temp.services.length }"><tags-input ng-model=temp.services display-property=name key-property=_id placeholder="search tests" replace-spaces-with-dashes=false add-from-autocomplete-only=true name=services on-tag-added=SelectServiceTag($tag,$index) on-tag-removed=serviceTagRemoved($tag,$index) template=tag-template required><auto-complete source=getAllServicesTag($query,searchServiceObj) debounce-delay=500 template=autocomplete-template></auto-complete></tags-input></div></div></div><div class=row><div class="col-md-8 col-md-offset-2" ng-class="{ \'has-error\': !order.logobj.comments }"><div class="input-group form-group"><span class="input-group-addon input-sm"><strong>Comment</strong></span> <textarea msd-elastic ng-model=order.logobj.comments placeholder="Please mention reason for adding/deleting service" class=form-control required></textarea></div></div></div><div class=row ng-show=temp.services.length><div class="col-md-8 col-md-offset-2"><div class=table-responsive><table class="table table-bordered table-hover"><thead><th>Selected services</th><th>Code</th><th ng-if="order.status != \'Unassigned\'">Amount</th></thead><tbody><tr ng-repeat="service in temp.services"><td><span><div class=col-sm-11>{{service.service_id.name}}</div></span></td><td><span>{{service.service_id.code}}</span></td><td ng-if="order.status != \'Unassigned\'"><span class=pull-right>{{service.price}}</span></td></tr><tr ng-if="order.status != \'Unassigned\'"><td colspan=4><span class=pull-right><span type=button>Total Service Amount: {{order.paymentdetails.amount}}</span></span></td></tr></tbody></table></div></div></div></div></div></form></div></div></div><div class="modal fade" id=addServiceObjView tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-hidden=true ng-click="service_sm={};order.logobj.comments=\'\';">×</button><h4 class=modal-title id=myModalLabel>Add Services</h4></div><form name=serviceaddfrm><div class=modal-body><div class=form-group><div class=row><div class="col-md-8 col-md-offset-2"><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !displaynewservices.length }"><span class=input-group-addon><strong>Services/Tests</strong></span> <input id=search-input type=text ng-model=searchObj.servicename ng-model-options="{ debounce: 300 }" placeholder class=form-control><table class="table table-responsive searchtable"><tbody><tr ng-repeat="Service in ServiceList"><td ng-click=SelectService(Service) class=pointer><span>{{Service.name}}</span> <span ng-if=Service.code><span class="label label-info">- {{Service.code}}</span></span><span>&nbsp;&nbsp;&nbsp;</span></td></tr></tbody></table><span class="input-group-addon pointer" ng-click=getAllServices(searchObj,type)><i class="glyphicon glyphicon-search"></i> Discovery</span></div></div></div><div class=row><div class="col-md-8 col-md-offset-2"><div class=form-group><span ng-repeat="ser in displaynewservices track by $index"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{ser.service_id.name}} - {{ser.service_id.code}} - {{ser.price}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeService(ser,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row><div class="col-md-8 col-md-offset-2" ng-class="{ \'has-error\': !order.logobj.comments }"><div class="input-group form-group"><span class="input-group-addon input-sm"><strong>Comment</strong></span> <textarea msd-elastic ng-model=order.logobj.comments placeholder="Please mention reason for adding service" class=form-control required></textarea></div></div></div></div></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal ng-click="service_sm={};order.logobj.comments=\'\';">Cancel</button> <button ng-if=!temp.savebtndisable type=button class="btn btn-primary" ng-disabled="!serviceaddfrm.$valid || !displaynewservices.length" ng-click=addService()>Save changes</button> <button ng-if="order.status == \'Unassigned\'" type=button class="btn btn-primary" ng-disabled="!serviceaddfrm.$valid || !displaynewservices.length" ng-click=addService()>Save changes</button></div></form></div></div></div><div ng-include="\'partials/srl/call/addressForOrder.modal.html\'"></div><div class="modal fade" id=patientAddressesObj tabindex=-1 role=confirm aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=button style="margin-right:5px;margin-top: -7px;" class="btn btn-default pull-right" data-dismiss=modal aria-hidden=true>Cancel</button> <button type=button style="margin-right:5px;margin-top: -7px;" class="btn btn-primary pull-right" ng-click=openAddAddress()>Add</button><h4 class=modal-title id=myModalLabel>Addresses</h4></div><div class=modal-body><div class=list-group-item style="border: none;" ng-repeat="tempaddress in order.client_id.demography.addresses track by $index" data-toggle=tooltip data-placement=top title="Click to select address" ng-class="(tempaddress.servicedeliveryaddress == \'true\')?\'active\':\'\'"><strong>{{tempaddress.title}}</strong> <span class=pull-right><button type=button class="btn btn-xs btn-default" ng-click="checkServiceAddress(tempaddress, $index)">Select</button>&nbsp;&nbsp; <button type=button class="btn btn-xs btn-default" ng-click="editServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-pencil pointer"></i></button> &nbsp;&nbsp; <button type=button class="btn btn-xs btn-default" ng-click="deleteServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-trash pointer"></i></button> &nbsp;&nbsp;</span><br>{{tempaddress.address}}<br>{{tempaddress.area_id.name}}, <span ng-if=tempaddress.sublocation_id.name>{{tempaddress.sublocation_id.name}},</span><br>{{tempaddress.city_id.name}} - {{tempaddress.pincode}}</div></div><div class=modal-footer></div></div></div></div><script type=text/ng-template id=tag-template><div class="left-panel"> </div> <div class="right-panel"> <span>{{data.service_id.name}} - {{data.service_id.code}}</span> <a class="remove-button" ng-click="$removeTag()">&#10006;</a> </div></script><script type=text/ng-template id=autocomplete-template><div>{{data.name}} - {{data.code}}</div></script>'),e.put("partials/srl/tube/tube.html",'<div><div class="col-lg-8 col-md-8 col-sm-8 col-xs-8" style=padding-left:0px><h2>Tube <small><sup><a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2></div><div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 input-group input-group-sm" style="padding-right:0px; padding-top:25px"><input type=text ng-model-options="{ debounce: 300 }" ng-model=searchObj.searchtube ng-change=get() class="form-control input-sm" placeholder="Discovery by type, container"></div></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>Container</th><th>Type</th><th>Unit</th></tr></thead><tbody><tr ng-repeat="tube in tubelist" ng-class="{\'danger\' : tube._Deleted }"><td>{{ count + $index+1}}</td><td>{{tube.container}}</td><td>{{tube.type}}</td><td>{{tube.unit}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div><ng-import type=tubes></ng-import>'),e.put("partials/srl/tube/tube.object.html",'<div><h2>Tube<small><sup><a href=#/main/tube class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=tubeForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group><label for=inputCompany class="col-sm-offset-1 col-sm-2 control-label">Company</label><div class=col-sm-6><select class=form-control ng-model=tube.company name=type required><option value={{company.displayname}} ng-repeat="company in companies" ng-selected="company.displayname == tube.company">{{company.displayname}}</option></select></div></div><div class=form-group><label for=inputType class="col-sm-offset-1 col-sm-2 control-label">Type</label><div class=col-sm-3><select class=form-control ng-model=tube.type name=type required><option value={{tubeType.displayname}} ng-repeat="tubeType in types" ng-selected="tubeType.displayname == tube.type">{{tubeType.displayname}}</option></select></div></div><div class=form-group><label for=inputSize class="col-sm-offset-1 col-sm-2 control-label">Size</label><div class=col-sm-2><select class=form-control ng-model=tube.size name=type required><option value={{size.displayname}} ng-repeat="size in sizes" ng-selected="size.displayname == tube.size">{{size.displayname}}</option></select></div>(in ml)</div><div class=form-group><label for=inputType class="col-sm-offset-1 col-sm-2 control-label">Color</label><div class=col-sm-3><select class=form-control ng-model=tube.color.name name=type required><option value={{color.displayname}} ng-repeat="color in colors" ng-selected="color.displayname == tube.color.name">{{color.displayname}}</option></select></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=tubeForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/srl/partner/partner.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Partner<small><sup><a href=#/main/partner/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=searchObj.name placeholder=Discovery style=margin-top:25px ng-model-options="{ debounce: 1000 }" ng-change=get()></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>Name</th><th>Code</th><th>Address</th><th>City</th></tr></thead><tbody><tr ng-repeat="partner in display.partners" ng-click=edit(partner._id)><td>{{$index+1}}</td><td><span class="label label-success">{{partner.info.type}}</span> {{partner.info.name}}</td><td>{{partner.info.code}}</td><td>{{partner.info.address}}</td><td>{{partner.info.city_id.name}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div>'),e.put("partials/srl/partner/partner.object.html",'<div><h2>Partner<small><sup><a href=#/main/partner class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=cityForm><div class=col-sm-6 style=padding:0px><div class="panel panel-defaul"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group><label for=inputName class="col-sm-3 control-label">Partner Name</label><div class=col-sm-9><input type=text id=inputName class=form-control name=name ng-model=data.partner.info.name required></div></div><div class=form-group><label for=inputName class="col-sm-3 control-label">Partner Code</label><div class=col-sm-9><input type=text id=inputName class=form-control name=code ng-model=data.partner.info.code required></div></div><div class=form-group><label for=inputName class="col-sm-3 control-label">Partner Id</label><div class=col-sm-9><input type=text id=inputName class=form-control name=externalId ng-model=data.partner.externalId required></div></div><div class=form-group><label for=inputName class="col-sm-3 control-label">Type</label><div class=col-sm-5><select ng-model=data.partner.info.type name=infotype id class=form-control ng-options="type.displayname as type.displayname for type in display.type" required></select></div></div><div class=form-group><label for=inputName class="col-sm-3 control-label">Address</label><div class=col-sm-9><textarea msd-elastic type=text class=form-control name=long ng-model=data.partner.info.address aria-describedby=sizing-addon2 required></textarea></div></div><div class=form-group><label for=inputType class="col-sm-3 control-label">Lat / Long</label><div class=col-sm-3><input type=text class=form-control name=lat placeholder=Latitude ng-model=data.partner.info.coordinates.lat required></div><div class=col-sm-3><input type=text class=form-control name=Longitude placeholder=Longitude ng-model=data.partner.info.coordinates.long required></div></div><div class=form-group><label for=inputName class="col-sm-3 control-label">City</label><div class=col-sm-5><select type=text class=form-control name=infocity ng-model=data.partner.info.city_id placeholder=Name aria-describedby=sizing-addon2 ng-options="city as city.name for city in display.cities track by city._id" required ng-change="updateTrue=false; changeCity(data.partner.info.city_id._id)"><option value>--select--</option></select></div></div><div class=form-group ng-if=data.partner.info.city_id._id><label for=inputName class="col-sm-3 control-label">Areas</label><div class=col-sm-9><tags-input ng-model=tempareas display-property=name key-property=_id placeholder="area name" replace-spaces-with-dashes=false add-from-autocomplete-only=true name=areas on-tag-added=areaTagAdded($tag) on-tag-removed=areaTagRemoved($tag,$index) required><auto-complete source=searcharea($query) min-length=0 debounce-delay=0></auto-complete></tags-input></div></div><div class="panel panel-default col-sm-offset-3"><div class=panel-heading><strong>Report delivery mode</strong></div><div class=panel-body><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.email>Email</label></div></div></div><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.homedelivery placeholder=charges>Home delivery</label></div></div><div class=col-sm-4 ng-show=reportDelivery.homedelivery><input type=number class=form-control ng-model=reportDelivery.homedeliveryCharges placeholder=charges ng-required=reportDelivery.homedelivery></div></div><div class=form-group><div class=col-sm-5><div class=checkbox><label><input type=checkbox ng-model=reportDelivery.courier>Courier</label></div></div><div class=col-sm-4 ng-show=reportDelivery.courier><input type=number placeholder=charges class=form-control ng-model=reportDelivery.courierCharges ng-required=reportDelivery.courier></div></div></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-8"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled="cityForm.$invalid || !data.partner.workinghour.length">Save</button></div></div></div></div></div><div class=col-sm-6><div class="panel panel-defaul"><div class=panel-body style=padding-bottom:0px><div class="panel panel-default"><div class=panel-heading><strong>Working hours</strong><small><sup><a ng-click=addWorkingHour() class="btn btn-link btn-xs">Add</a></sup></small></div><div class=panel-body ng-show=false><div style=font-style:italic>Nothing is added here</div></div><table class="table table-hover"><tbody><tr ng-repeat="wh in data.partner.workinghour"><td>{{wh.day.join(\',\')}} <span class=pull-right><a ng-click=deleteWorkingHour($index)><span class="glyphicon glyphicon-remove pull-right" style=color:maroon></span></a></span><div ng-click=editWorkingHour($index,wh)><small><strong>From:</strong> {{wh.from | waqt}} <strong>To:</strong> {{wh.to | waqt}}</small></div></td></tr></tbody></table></div></div></div></div></form><div ng-include="\'partials/srl/partner/modal/ConfirmPopupDeleteDropPoint.modal.html\'"></div><div ng-include="\'partials/srl/partner/modal/ConfirmPopupDeleteForVisitCharge.modal.html\'"></div><div ng-include="\'partials/srl/partner/modal/workingHour.modal.html\'"></div><div ng-include="\'partials/srl/partner/modal/visitCharge.modal.html\'"></div><div ng-include="\'partials/srl/partner/modal/dropPoint.modal.html\'"></div><div ng-include="\'partials/srl/partner/modal/ConfirmPopupDeleteForWorkinHour.modal.html\'"></div><div class="modal fade" id=locationModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button type=submit style=margin-right:5px; class="btn btn-sm btn-success" ng-click=saveLocation() title=save>Save</button> <button class="btn btn-sm btn-default fa-cancel" title=cancel data-dismiss=modal>Cancel</button></div><div class=modal-body><div class="input-group input-group-sm"><span class=input-group-addon>Search</span> <input type=text class="form-control input-sm" name=addresssearch places-auto-complete ng-model=variables.tempaddress on-place-changed=searchPlace(place)></div><div><ng-map center=[{{coordinates[1]}},{{coordinates[0]}}] zoom=17 on-click=clickMap()><transit-layer></transit-layer><marker position=[{{coordinates[1]}},{{coordinates[0]}}] draggable visible=true></marker></ng-map></div></div></div></div></div>'),e.put("partials/srl/test/test.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Test <small><sup><a href=#/main/test/new class="btn btn-link btn-xs">New</a> <a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h2><div class=container style=float:left><span class="label pointer" style="background-color: #D0E9C6; color: black;">Special test</span></div></div></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px;margin-top:5px;><input type=text class="form-control input-sm" ng-model=searchObj.servicename placeholder=Search style=margin-top:25px ng-model-options="{ debounce: 5000 }" ng-change=get()></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>Name</th><th>Code</th><th>External Id</th><th>Price</th><th>Active/Inactive</th></tr></thead><tbody><tr ng-repeat="test in testList" ng-class="{\'success\' : test.specialservice}"><td ng-click=edit(test._id)>{{$index+1}}</td><td ng-click=edit(test._id)>{{test.name}}</td><td ng-click=edit(test._id)>{{test.code}}</td><td ng-click=edit(test._id)>{{test.externalId}}</td><td ng-click=edit(test._id)>{{test.price}}</td><td><button type=button ng-show="test._Deleted == true" data-toggle=modal ng-model=activeModal.data ng-click="setActive(\'active\',test)" class="btn btn-danger btn-xs">Activate</button> <button type=button ng-show="test._Deleted == false" ng-model=deactiveModal.data class="btn btn-success btn-xs" ng-click="setActive(\'deactive\',test)">Deactivate</button></td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div><ng-include src="\'partials/partner/test/modal/active.model.html\'"></ng-include><ng-import type=mastertests></ng-import>'),e.put("partials/srl/test/test.object.html",'<div><h2>Test <small><sup><a href=#/main/test class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=departentForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-show=successFlag>Saved!</div><div class=form-group><label class="col-sm-offset-1 col-sm-3 control-label">Master Test Name</label><div class=col-sm-6><input type=text class=form-control name=name ng-model=test.name required></div></div><div class=form-group><label class="col-sm-offset-1 col-sm-3 control-label">Code</label><div class=col-sm-6><input type=text class=form-control name=code ng-model=test.code required></div></div><div class=form-group><label class="col-sm-offset-1 col-sm-3 control-label">External Id</label><div class=col-sm-6><input type=text class=form-control name=externalId ng-model=test.externalId required></div></div><div class=form-group><label class="col-sm-offset-1 col-sm-3 control-label">Price</label><div class=col-sm-6><input type=number class=form-control name=price ng-model=test.price required></div></div><div class=form-group><label class="col-sm-offset-1 col-sm-3 control-label"><strong><span>Discount Not Applicable</span></strong></label><div class=col-sm-6><input type=checkbox class=checkbox name ng-model=test.discountnotapplicable value></div></div><div class=form-group><div class="col-sm-offset-6 col-sm-10"><button name=save type=button ng-click=Save() class="btn btn-primary" ng-disabled=departentForm.$invalid>Save</button></div></div></div></div></form>'),e.put("partials/worequest/modal/addAcceptedStatus.modal.html",'<div class="modal fade" id=AddAcceptedStatus tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Change status</h4></div><div class=modal-body><div class=row><div class=col-sm-12><div class="alert alert-success" ng-if="tempObj.leavetype ==\'leave\'">Are youe sure, you want to accept <b>{{tempObj.requestdate | date}}</b> Leave ?</div><div class="alert alert-success" ng-if="tempObj.leavetype ==\'weekoff\'">Are youe sure, you want to accept <b>{{tempObj.requestdate | date}}</b> Week off ?</div></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click="changeStatus(\'accept\')">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/worequest/modal/rejectedStatus.modal.html",'<div class="modal fade" id=RejectedStatus tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Cancel Request</h4></div><div class=modal-body><form name=reasonForm><div class=row><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Reason</label><div class=col-sm-9><select class=form-control id=rejectReason name=reason ng-model=temp.rejectReason ng-options="reason as reason.displayname for reason in display.rejectReasons track by reason._id" ng-change=selectReason(temp.rejectReason) required><option value>---Select Reason---</option></select><textarea style=margin-top:10px ng-if="exist==true" msd-elastic name class=form-control ng-model=temp.otherReason required></textarea></div></div></div></form></div><div class=modal-footer><span style=pull-right><button ng-disabled=reasonForm.$invalid name=save type=button class="btn btn-primary" ng-click="changeStatus(\'reject\')">Cancel</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/worequest/modal/updateReason.modal.html",'<div class="modal fade" id=updateReasonModal tabindex=-1 role=dialog aria-labelledby=updateReasonModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=updateReasonModalLabel>Edit Request</h4></div><div class=modal-body><div class=row ng-if=!display.weekOffRequest._id><div class=col-sm-12><div class="alert alert-success"><span>Are you sure, you want to update request ?</span></div></div></div><form name=reasonForm><div class=row ng-if=display.weekOffRequest._id><div class=form-group><label for=inputName class="col-sm-offset-1 col-sm-2 control-label">Reason</label><div class=col-sm-9><select class=form-control id=rejectReason name=reason ng-model=temp.editReason ng-options="reason as reason.displayname for reason in display.rejectReasons track by reason._id" ng-change=selectReasonEdit(temp.editReason) required><option value>---Select Reason---</option></select><textarea style=margin-top:10px ng-if="exist==true" msd-elastic name class=form-control ng-model=temp.otherEditReason required></textarea></div></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save ng-disabled=reasonForm.$invalid type=button class="btn btn-primary" ng-click=Save()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/userinfo/address.modal.html",'<div class="modal fade" id=addressModal tabindex=-1 role=dialog aria-labelledby=dropPointModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=dropPointModalLabel>Drop point</h4></div><div class=modal-body><form name=dpForm><div class=panel-body><div class=form-group><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Location</label><div class=col-sm-8><input type=text class=form-control ng-model=display.user.profile.location name=location placeholder="eg: Location" aria-describedby=sizing-addon2 required></div></div><br><br><div class=form-group><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Address</label><div class=col-sm-8><textarea msd-elastic type=textarea class=form-control ng-model=display.user.profile.address1 name=address1 required></textarea></div></div><br><br><div class=form-group><br><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Pincode</label><div class=col-sm-8><input type=text class=form-control ng-model=display.user.profile.pincode name=pincode placeholder="eg: 400072" aria-describedby=sizing-addon2 required></div></div><br><br><div class=form-group><label for=inputCity class="col-sm-offset-1 col-sm-2 control-label">City</label><div class=col-sm-8><select class="form-control input-sm" id=selectCity name=city ng-model=display.user.profile.city_id ng-options="city as city.name for city in display.cities track by city._id" required><option value selected>---Select city---</option></select></div></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button data-dismiss=modal class="btn btn-primary" ng-disabled=dpForm.$invalid>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/userinfo/config.modal.html",'<div class="modal fade" id=configModal tabindex=-1 role=dialog aria-labelledby=timingModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=timingModalLabel><i class="fa fa-plus"></i>Add timing</h4></div><div class=modal-body><div class=row><div class=form-group><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Partner</label><div class=col-sm-9><select ng-model=display.user.userinfo.partner_id class=form-control placeholder=Name aria-describedby=sizing-addon2 required><option value={{partner._id}} ng-repeat="partner in display.partners track by partner._id">{{partner.info.name}}</option></select></div></div></div><div class=row><br><div class=form-group><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Type</label><div class=col-sm-9><select type=text ng-model=display.user.profile.type class=form-control name=type placeholder=Name aria-describedby=sizing-addon2 required><option value=Phlebo require>Phlebo</option><option value=Logistics require>Logistics</option><option value=Web require>Web</option></select></div></div></div><div class=row><br></div><br><div class=container><div class=row><div class=col-md-6><div class="panel panel-default" ng-if="display.user.profile.type == \'Phlebo\'"><div class=panel-heading><input type=checkbox name=morn360 ng-model=display.user.profile.specialneed ng-click="display.specialneed=[];display.setAllSpecailNeed = false"> <label>Special needs</label></div><div class=panel-body><div ng-show=display.user.profile.specialneed><input type=checkbox name ng-model=display.setAllSpecailNeed value ng-click=setAllSpecailNeed()><strong>All</strong><tags-input ng-model=display.specialneed on-tag-added="addTag(\'specialneed\')" on-tag-removed="setFalse(\'specialneed\')" display-property=name key-property=_id add-from-autocomplete-only=true template=tag-template placeholder="Discovery special need"><auto-complete source=searchSpecialNeed($query) template=auto-template></auto-complete></tags-input></div></div></div></div><div class=col-md-6><div class="panel panel-default" ng-if="display.user.profile.type == \'Phlebo\'"><div class=panel-heading><input ng-click="display.specialtest = [];display.setAllSpecaiTest=false" type=checkbox name=morn360 ng-model=display.user.profile.specialtest> <label>Special test</label></div><div class=panel-body><div ng-show=display.user.profile.specialtest><input type=checkbox name ng-model=display.setAllSpecaiTest value ng-click=setAllSpecailTest()><strong>All</strong><tags-input ng-model=display.specialtest on-tag-added="addTag(\'specailtest\')" on-tag-removed="setFalse(\'specailtest\')" display-property=name key-property=_id add-from-autocomplete-only=true template=tag-template placeholder="Discovery special test"><auto-complete source=searchSpecialTest($query) template=auto-template></auto-complete></tags-input></div></div></div></div></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveConfig() class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div><script type=text/ng-template id=tag-template><div>{{data.name}}</div></script><script type=text/ng-template id=auto-template><div>{{data.name}}</div></script>'),e.put("partials/srl/userinfo/timing.modal.html",'<div class="modal fade" id=timingModal tabindex=-1 role=dialog aria-labelledby=timingModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=timingModalLabel><i class="fa fa-plus"></i>Add timing</h4></div><div class=modal-body><div class=container><div class=row><br><div class=form-group><label for=inputArea class=col-sm-2></label><div class=col-sm-12><div class=col-md-6><input type=checkbox ng-model=display.user.availability.day class> <label>Morning</label><select ng-show=display.user.availability.day type=text class=form-control ng-model=display.user.availability.morningarea ng-options="area._id as area.name for area in display.areas" name=asigarea><option value selected>Select Area</option></select></div><div class=col-md-6><input type=checkbox name=evenavail ng-model=display.user.availability.evening> <label>Evening</label><select ng-show=display.user.availability.evening type=text class=form-control ng-model=display.user.availability.eveningarea ng-options="area._id as area.name for area in display.areas" name=asigarea placeholder=Name aria-describedby=sizing-addon2 required><option value selected>Select Area</option></select></div></div></div></div><div class=row><br><div class=form-group><label for=inputArea class=col-sm-2></label><div class=col-sm-12><div class=col-md-6><input type=checkbox name=sundaylv ng-model=display.user.availability.sundayleave> <label>Sunday Leave</label></div><div class=col-md-6><input type=checkbox name=morn360 ng-model=display.user.availability.sixthirty> <label>6.30 AM</label></div></div></div></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveTiming() class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/userinfo/userinfo.html",'<div><div class="col-lg-8 col-md-8 col-sm-8 col-xs-6" style=padding-left:0px><h2>Users info <small><sup><a href=#/main/user/new class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-3" style=padding-right:0px><select class="form-control input-sm" ng-model=searchObj.role ng-options="role.name as role.name for role in display.roles" ng-change=get() style=margin-top:25px></select></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-3" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=searchObj.searchText placeholder=Discovery style=margin-top:25px ng-change=get()></div><table class="table table-bordered" style=background-color:white><thead><tr><th>No</th><th>Name</th><th>Code</th><th>Username</th><th>Type</th><th>Role</th><th>Active/Inactive</th></tr></thead><tbody><tr ng-repeat="user in display.users"><td>{{$index+1}}</td><td><a ng-click=edit(user._id)>{{user.profile.name}}</a></td><td>{{user.profile.code}}</td><td><span class=normal>{{user.username}}</span></td><td>{{user.profile.type}}</td><td>{{user.role}}</td><td><button type=button ng-show="user._Deleted == true" data-toggle=modal ng-model=activeModal.data ng-click="setActive(\'active\',user)" class="btn btn-danger btn-xs">Activate</button> <button type=button ng-show="user._Deleted == false" ng-model=deactiveModal.data class="btn btn-success btn-xs" ng-click="setActive(\'deactive\',user)">Deactivate</button></td></tr></tbody><div ng-include="\'partials/userinfo/timing.modal.html\'"></div></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div><ng-include src="\'partials/partner/test/modal/active.model.html\'"></ng-include>'),e.put("partials/srl/userinfo/userinfo.object.html",'<div><h2>User info<small><sup><a href=#/main/user class="btn btn-link btn-xs">back to list</a></sup></small></h2></div><form class=form-horizontal name=userForm><div class="panel panel-default"><div class=panel-body><div class="alert alert-success" role=alert ng-if=successFlag>Saved!</div><div class=row><div class=col-sm-6><div class=form-group ng-class="{ \'has-error\': userForm.role.$invalid }" ng-if="display.user.role != \'admin\'"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Role</label><div class=col-sm-4><select ng-model=display.user.role class=form-control placeholder=Name aria-describedby=sizing-addon2 required ng-change=CheckRole(display.user.role) name=role><option ng-selected="role.name == display.user.role" value={{role.name}} ng-repeat="role in display.roles track by $index" ng-if="role.name!=\'admin\'">{{role.label}}</option></select></div></div><div class=form-group ng-class="{ \'has-error\': userForm.name.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Name</label><div class=col-sm-9><input name=name type=text ng-model=display.user.profile.name class=form-control required></div></div><div class=form-group ng-class="{ \'has-error\': userForm.code.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Code</label><div class=col-sm-4><input name=code type=text ng-model=display.user.profile.code class=form-control required></div></div><div class=form-group ng-class="{ \'has-error\': userForm.gender.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Gender</label><div class=col-sm-4><select type=text class=form-control ng-model=display.user.profile.gender name=gender placeholder=Name aria-describedby=sizing-addon2 required><option name=genderopt value=Male require>Male</option><option name=genderopt value=Female require>Female</option></select></div></div><div class=form-group ng-class="{ \'has-error\': userForm.emaliid.$invalid }"><label for=inputEmail class="col-sm-offset-1 col-sm-2 control-label">Email</label><div class=col-sm-6><input type=text class=form-control ng-model=display.user.profile.email name=emaliid aria-describedby=sizing-addon2 required></div></div><div class=form-group ng-class="{ \'has-error\': userForm.mobileno.$invalid }"><label for=inputMobile class="col-sm-offset-1 col-sm-2 control-label">Mobile</label><div class=col-sm-4><input type=text class=form-control ng-model=display.user.profile.mobilenumber name=mobileno aria-describedby=sizing-addon2 required></div></div><div class=form-group ng-class="{ \'has-error\': userForm.username.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Username</label><div class=col-sm-4><input type=text class="form-control normal" ng-model=display.user.username name=username aria-describedby=sizing-addon2 required></div></div><div ng-if=!display.user._id class=form-group ng-class="{ \'has-error\': userForm.password.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Password</label><div class=col-sm-4><input name=password ng-model=display.user.password type=password class="form-control normal" required></div></div><div ng-if=display.user._id class=form-group><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">change password</label><div class=col-sm-3><input type=checkbox ng-model=display.changepassword></div></div><div ng-if="display.user._id && display.changepassword" class=form-group ng-class="{ \'has-error\': userForm.oldpassword.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">Old Password</label><div class=col-sm-4><input name=oldpassword ng-model=display.user.oldpassword type=password class="form-control normal" required></div></div><div ng-if="display.user._id && display.changepassword" class=form-group ng-class="{ \'has-error\': userForm.newpassword.$invalid }"><label for=inputArea class="col-sm-offset-1 col-sm-2 control-label">New Password</label><div class=col-sm-4><input name=newpassword ng-model=display.user.newpassword type=password class="form-control normal" required></div></div><div class=form-group ng-class="{ \'has-error\': !display.user.profile.location || !display.user.profile.address1 || !display.user.profile.pincode || !display.user.profile.city_id.name}"><label for=inputAddress class="col-sm-offset-1 col-sm-2 control-label">Address<small><sup><a ng-click=address() class="btn btn-link btn-xs">Edit</a></sup></small></label><div class=col-sm-9><span>{{display.user.profile.location}}</span><br><span>{{display.user.profile.address1}}</span><br><span>{{display.user.profile.city_id.name}}</span></div></div></div><div class=col-sm-6 ng-if=display.user.role><div class="panel panel-defaul" ng-if="display.user.role != \'providerfrontoffice\' && display.user.role != \'providerteamlead\' && display.user.role != \'admin\'"><div class=panel-body style="padding-bottom:0px;padding-top: 0px;"><div class="panel panel-default"><div class=panel-heading><strong>Working hours</strong><small><sup><a ng-click=addWorkingHour() class="btn btn-link btn-xs">Add</a></sup></small></div><div class=panel-body ng-show=false><div style=font-style:italic>Nothing is added here</div></div><table class="table table-hover"><tbody><tr ng-repeat="wh in display.user.workinghour"><td>{{wh.day.join(\',\')}} <span class=pull-right><a ng-click=deleteWorkingHour($index)><span class="glyphicon glyphicon-remove pull-right" style=color:maroon></span></a></span><div ng-click=editWorkingHour($index,wh)><small><strong>From:</strong> {{wh.from | waqt}} <strong>To:</strong> {{wh.to | waqt}}</small></div></td></tr></tbody></table></div></div></div><div class=form-group ng-class="{ \'has-error\': !display.user.userinfo.partners.length }" ng-if="display.user.role != \'providerfrontoffice\' && display.user.role != \'providerteamlead\' && display.user.role != \'admin\'"><label for=inputArea class="col-sm-2 control-label">Partner</label><div class=col-sm-10><select ng-model=display.user.userinfo.partner_id class=form-control placeholder=Name aria-describedby=sizing-addon2 ng-change=pushPartner(display.user.userinfo.partner_id)><option value={{partner}} ng-repeat="partner in display.partners track by partner._id">{{partner.info.name}}-{{partner.info.code}}</option></select></div></div><div class=row ng-if="display.user.role != \'providerfrontoffice\' && display.user.role != \'providerteamlead\' && display.user.role != \'admin\'"><div class=col-lg-2><label for=inputArea class="col-sm-2 control-label"></label></div><div class=col-lg-10><div class=form-group><span ng-repeat="part in display.user.userinfo.partners"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{part.info.name}}-{{part.info.code}} &nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePartner(part,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=form-group ng-class="{ \'has-error\': userForm.PType.$invalid }" ng-if="display.user.role != \'providerfrontoffice\' && display.user.role != \'providerteamlead\' && display.user.role != \'admin\'"><label for=inputArea class="col-sm-2 control-label">Type</label><div class=col-sm-10><select name=PType ng-model=display.user.profile.type class=form-control ng-options="PType.displayname as PType.displayname for PType in PhleboType.childs | orderBy:\'priority\'" required><option value>--Select Phlebo Type--</option></select></div></div><div class=form-group ng-class="{ \'has-error\': userForm.PExpertise.$invalid }" ng-if="display.user.role != \'providerfrontoffice\' && display.user.role != \'providerteamlead\' && display.user.role != \'admin\'"><label for=inputArea class="col-sm-2 control-label">Expertise</label><div class=col-sm-10><select name=PExpertise ng-model=display.user.profile.expertise class=form-control ng-options="PExpertise.displayname as PExpertise.displayname for PExpertise in PhleboExpertise.childs" required><option value>--Select Phlebo Expertise--</option></select></div></div><div class=form-group ng-class="{ \'has-error\': userForm.rating.$invalid }" ng-if="display.user.role != \'providerfrontoffice\' && display.user.role != \'providerteamlead\' && display.user.role != \'admin\'"><label for=inputArea class="col-sm-2 control-label">Rating</label><div class=col-sm-10><div class=form-control><rating ng-model=display.user.profile.rating max=5 state-on="\'glyphicon glyphicon-star\'" state-off="\'glyphicon glyphicon-star-empty\'" name=rating required></rating><b>(<i>Rate:</i> {{display.user.profile.rating}})</b></div></div></div></div></div><div class=row><div class=col-lg-6><button ng-if="display.user.role != \'providerfrontoffice\' && display.user.role != \'providerteamlead\'&& display.user.role != \'admin\'" name=save class="col-sm-offset-3 btn btn-primary" type=button ng-click=save() ng-disabled="userForm.$invalid || !display.user.userinfo.partners.length || !display.user.workinghour.length">Save</button><button ng-if="display.user.role == \'providerfrontoffice\' || display.user.role == \'providerteamlead\' || display.user.role == \'admin\'" name=save class="col-sm-offset-3 btn btn-primary" type=button ng-click=save() ng-disabled=userForm.$invalid>Save</button></div></div></div></div></form><div ng-include="\'partials/srl/userinfo/address.modal.html\'"></div><div ng-include="\'partials/srl/userinfo/modal/workingHour.modal.html\'"></div><div ng-include="\'partials/srl/userinfo/modal/ConfirmPopupDeleteForWorkinHour.modal.html\'"></div><script type=text/ng-template id=tag-template><div class="left-panel"> </div> <div class="right-panel"> <span>{{data.info.name}} - {{data.info.code}}</span> <a class="remove-button" ng-click="$removeTag()">&#10006;</a> </div></script><script type=text/ng-template id=autocomplete-template><div>{{data.info.name}} - {{data.info.code}}</div></script>'),e.put("partials/mly/partner/addpatient/addpatient.html",'<div><h2 ng-hide=call._id>ADD PATIENT<small><sup></sup></small></h2></div><div class="panel panel-default"><div class=panel-body><div class=list-group><a href=# class="list-group-item disabled"><b>Partner</b> : {{temp.partnerDetail.info.name}}</a> <a href=# class="list-group-item disabled"><b>Area</b> : {{call.selectedArea.name}}</a> <a href=# class="list-group-item disabled"><b>Date</b> :{{call.fromdate | date:\'dd-MMM-yyyy\'}} &nbsp;&nbsp;&nbsp;<b>Time</b>: {{call.fromtime| waqt}}</a> <a href=# class="list-group-item disabled" ng-if="(call.fromPpdate || call.fromPptime)"><b>PP Date</b> :{{call.fromPpdate | date:\'dd-MMM-yyyy\'}} &nbsp;&nbsp;&nbsp;<b>PP Time</b>: {{call.fromPptime | waqt}}</a> <a href=# class="list-group-item disabled"><b>Parent Patient</b> : {{temp.parentPatient}}</a> <a href=# class="list-group-item disabled"><b>Address:</b> <span class=line-break>{{parentPatientAddress.address2}}</span><div>Landmark: {{parentPatientAddress.landmark}}</div><div style=margin-top:3px>Slot Area: {{parentPatientAddress.area_id.name}}</div></a></div><div id=dialog-confirm style="display: none;">IT WILL REMOVE OTHER ENTERED DETAIL</div><div id=NOT-ALLOWED style="display: none;">NOT ALLOWED</div><div id=Call-Created style="display: none;">CALL CREATED</div><div id=Patient-Exist style="display: none;">PATIENT NOT EXIST</div><div id=Test-Exist style="display: none;">TEST NOT EXIST</div><div id=TestAlready-Exist style="display: none;">SELECTED TEST IS ALREADY ADDED</div><div id=profile-Exist style="display: none;">SELECTED TEST IS ALREADY ADDED IN PROFILE</div><div id=package-Exist style="display: none;">SELECTED TEST IS ALREADY ADDED IN PACKAGE</div><div id=addpp-test style="display: none;">PLEASE ADD PP TEST TO CREATE A PP VISIT</div><div class=row><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partnerList | orderBy:\'info.name\' track by partner._id" ng-model=call.partner_id class="form-control input-sm" placeholder=Partner ng-disabled="temp.parentorder_id || temp.partnerformtoffice"><option value>--Select--</option></select></div></div></div><div class=row ng-if="call.fromtime || call.fromtime >= 0"><div class=col-md-10><div class=col-md-9 style="padding-left: 0px;"><div class="input-group input-group-sm"><span class=input-group-addon><strong>Existing Patient</strong></span> <input placeholder="first name (min. 3)" ng-model=searchPatientObj.firstname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 34%;" type=text ng-minlength=3> <input placeholder="middle name" ng-model=searchPatientObj.middlename class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 33%;" type=text ng-minlength=1> <input placeholder=surname ng-model=searchPatientObj.lastname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 33%;" type=text ng-minlength=1></div></div><div class=col-md-3 style="padding-left: 0px;padding-right: 0px;"><input type=text style="margin-bottom: 0px;" ng-model=searchPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() placeholder="UHID / MOB NO / ALT NO" class="form-group form-control input-sm"></div><table class="table table-responsive searchtable" style=width:100%;position:inherit><tbody><tr ng-if=showAddPatientBtn><td><center><button style=width:250px class="btn btn-sm btn-primary" ng-click=newPatient()>Add New Patient</button></center></td></tr><tr ng-repeat="Patient in PatientList"><td ng-click=SelectPatient(Patient) class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, {{Patient.demography.servicedeliveryaddress.branch_id.name}} <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span> <span ng-repeat="altNo in Patient.demography.altnumber">,{{altNo}}</span></td></tr></tbody></table></div><div class=col-md-2 ng-if="searchPatientObj.lastname || searchPatientObj.firstname || searchPatientObj.middlename || searchPatientObj.searchText"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchData() style=color:black;><b>clear data</b></a></div></div><div class=row ng-if=temppatient._id><div class=col-sm-6 style="margin-bottom: -5px;padding-right: 5px;"><div class="panel panel-default"><div class=panel-heading><strong>Personal details</strong> <a type=button class="btn btn-xs pull-right" ng-click=editPatient(temppatient)>EDIT</a></div><div class=list-group-item><div ng-if=temppatient.demography.fullname style=margin-bottom:0px><strong><i class="glyphicon glyphicon-user"></i> {{temppatient.demography.salutation}}&nbsp;{{temppatient.demography.fullname | uppercase}}</strong><div class=badge ng-if=temppatient.externalId>UHID: {{temppatient.externalId}}</div><span ng-if=temppatient.clientcode><span class="label label-success">{{temppatient.clientcode}}</span></span><br><p style=margin:0px><span ng-if=temppatient.demography.gender><span ng-if="temppatient.demography.gender == \'male\'">Male</span> <span ng-if="temppatient.demography.gender == \'female\'">Female</span> <span ng-if="temppatient.demography.gender == \'third gender\'">Third Gender</span> / {{temppatient.demography.age}} {{temppatient.demography.agetype}}</span></p><p style=margin:0px ng-if=temppatient.demography.mobilenumber><span><i class="glyphicon glyphicon-phone"></i></span> {{temppatient.demography.mobilenumber}}</p><p style=margin:0px ng-if=temppatient.demography.altnumber.length><i class="glyphicon glyphicon-phone-alt"></i> <span ng-repeat="obj in temppatient.demography.altnumber track by $index">{{obj}}{{$last?\'\':\',\'}}&nbsp;</span></p><p style="margin:0px;text-transform: lowercase !important;" ng-if=temppatient.demography.email><i class="glyphicon glyphicon-envelope"></i> {{temppatient.demography.email | lowercase}}</p></div></div></div></div><div class=col-sm-6 style="margin-bottom: -5px;padding-left: 5px;"><div class="panel panel-default"><div class=panel-heading><strong>Address</strong></div><div class="list-group-item line-break" style="border: none;" ng-repeat="tempaddress in temppatient.demography.addresses track by $index" ng-if="tempaddress.servicedeliveryaddress == \'true\'" data-toggle=tooltip data-placement=top title="Click to select address" ng-click="checkServiceAddress(tempaddress, $index)" ng-class="(tempaddress.servicedeliveryaddress == \'true\')?\'active\':\'\'"><strong>{{tempaddress.title}}</strong> <span class=pull-right ng-hide=temp.parentorder_id><span ng-click="editServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-pencil pointer"></i></span> &nbsp;&nbsp;</span><br><span class=line-break>{{tempaddress.address2}}</span><div><b>Landmark:</b>{{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b>{{tempaddress.area_id.name}}</div></div></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromdate }"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=call.fromdate is-open=datePickerPopup.dp_fd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_fd\')" readonly ng-change="call.todate = call.fromdate;getTimeSlot()" ng-disabled=temp.parentorder_id> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd\')" ng-disabled=temp.parentorder_id><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-md-3 col-lg-3" ng-show=call.fromdate><button class="btn btn-sm btn-primary" style="padding: 5px 30px" ng-click=getTimeSlot() ng-disabled=temp.parentorder_id><span ng-if=call.fromtime>Selected Time: {{call.fromtime | waqt}}&nbsp;&nbsp;&nbsp;<i class="glyphicon glyphicon-pencil pointer"></i></span><span ng-if=!call.fromtime>Open time slot</span></button></div><div class="col-md-2 col-lg-2" ng-show=temppatient.allOrder.length><button class="btn btn-sm btn-primary" ng-click=gitVisitHistory()>VISIT HISTORY</button></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="form-group input-group typeaheadwidth"><span class=input-group-addon style="background: #ffd9bf;"><strong>Test</strong></span> <input type=text class=form-control style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;" placeholder="Search test by name or code" ng-model=searchObj.servicename ng-model-options="{ debounce: 1500 }" ng-change=getAllServices(searchObj,type)><table ng-show=searchObj.servicename class="table searchtable"><tbody><tr ng-repeat="Service in ServiceList track by $index"><td ng-click=SelectService(Service) class=pointer><span>{{Service.name}}</span> <span><small>&nbsp; Rs. {{Service.price.mrp}}</small></span> <span>&nbsp;&nbsp;&nbsp;</span></td></tr></tbody></table></div></div></div><div class=row ng-show="call.services.length > 0"><div class=col-sm-12><div class="panel panel-default nopadding"><div class=panel-heading><small>Selected Test</small></div><table class="table table-striped table-bordered table-hover table-condensed"><thead><tr><th width=80%><small>Test Name</small></th><th width=20%><small>Amount</small></th></tr></thead><tbody><tr ng-repeat="service in call.services track by $index"><td class=pointer><a ng-click=showDeleteModel($index)><i class="glyphicon glyphicon-remove"></i></a>&nbsp;&nbsp; <span><small class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}">{{service.service_id.name}}</small> <small ng-click=addPPTest(service.service_id.postservices) style=color:blue;font-size:15px; ng-if="showPPAddButton(service.service_id) && (!temp.isBackDate)"><sup>add pp / pg tests ( delete any one )</sup></small></span><p style=letter-spacing:0.5px><span ng-repeat="chieldTest in service.service_id.childs"><span style=color:#d35400;font-size:11px ng-if="chieldTest.test_id.category==\'TEST\'">{{chieldTest.test_id.name}}</span><u style=color:blue;font-size:11px class=pointer ng-if="chieldTest.test_id.category!=\'TEST\'" ng-click=showComponents(chieldTest.test_id)>{{chieldTest.test_id.name}}</u>{{$last?\'\':\',\'}}&nbsp;</span></p></td><td><small class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}"><span ng-if="(service.service_id.price.discountTestPrice || service.service_id.price.discountTestPrice==0) && existDiscountTestPer">Rs. {{service.service_id.price.discountTestPrice}}&nbsp;&nbsp;</span><span ng-class="{\'orignalprice\':(service.service_id.price.discountTestPrice || service.service_id.price.discountTestPrice==0) && existDiscountTestPer}">Rs. {{service.service_id.price.mrp}}</span></small></td></tr><tr><td><div class=pull-right>TEST CHARGE:</div></td><td><div>Rs. {{call.testamount | number:0}}</div></td></tr><tr ng-if=tDiscountName.length><td><div class=pull-right>Test Discount & Premium ( <b ng-repeat="name in tDiscountName"><span ng-class=setDiscountClass(name)>{{name.name}} : <span ng-if="name.discounttype == \'ruppee\'">RS.<span ng-if="name.discountrs < 0">{{name.discountrs * -1}}</span> <span ng-if="name.discountrs > 0">{{name.discountrs}}</span></span> <span ng-if="name.discounttype == \'percentage\' || name.discounttype == undefined"><span ng-if="name.discount < 0">{{name.discount * -1}}</span> <span ng-if="name.discount > 0">{{name.discount}}</span> %</span></span>{{$last?\'\':\' ; \'}}</b> ):</div></td><td><div>Rs. <span ng-if="discountAmountPer + discountAmountRs >= 0">{{discountAmountPer + discountAmountRs | number:0}}</span> <span ng-if="discountAmountPer + discountAmountRs < 0">{{(discountAmountPer + discountAmountRs) * -1 | number:0}}</span></div></td></tr><tr ng-if=tDiscountName.length><td><div class=pull-right>TEST CHARGES AFTER DISCOUNT & Premium:</div></td><td><div>Rs. {{call.testamount - discountAmountPer - discountAmountRs}}</div></td></tr><tr ng-if="temp.premiumchargesper!=0"><td><div class=pull-right>EXTRA CHARGE <b>({{temp.premiumchargesper}}%)</b>:</div></td><td><div>Rs. {{temp.premiumcharge | number:0}}</div></td></tr><tr><td><div class=pull-right>VISIT CHARGE:</div></td><td><div>Rs. {{finalVisitCharge | number:0}}</div></td></tr><tr ng-if=vDiscountName.length><td><div class=pull-right>Visit Discount & Premium ( <b ng-repeat="name in vDiscountName"><span ng-class=setDiscountClass(name)>{{name.name}} : <span ng-if="name.discounttype == \'ruppee\'">RS. <span ng-if="name.discountrs < 0">{{name.discountrs * -1}}</span> <span ng-if="name.discountrs > 0">{{name.discountrs}}</span></span> <span ng-if="name.discounttype == \'percentage\' || name.discounttype == undefined"><span ng-if="name.discount < 0">{{name.discount * -1}}</span> <span ng-if="name.discount > 0">{{name.discount}}</span> %</span></span>{{$last?\'\':\';\'}}</b>):</div></td><td><div>Rs. <span ng-if="vDiscountRs + vDiscountPer >= 0">{{vDiscountRs + vDiscountPer | number:0}}</span> <span ng-if="vDiscountRs + vDiscountPer < 0">{{(vDiscountRs + vDiscountPer) * -1 | number:0}}</span></div></td></tr><tr ng-if=call.paymentdetails.reportdeliverymode.length><td><div class=pull-right>Report delivery charges (<span ng-repeat="rn in call.paymentdetails.reportdeliverymode">{{rn.mode}}{{$last?\'\':\', \'}}</span>):</div></td><td><div>Rs. {{totalreportcharge | number:0}}</div></td></tr><tr><td><div class=pull-right><b>TOTAL:</b></div></td><td><div><b>Rs. {{finalVisitCharge + temp.premiumcharge + call.testamount - discountAmountRs - discountAmountPer - vDiscountRs - vDiscountPer + totalreportcharge | number:0}}</b></div></td></tr></tbody></table></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id && call.fromppdate"><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromppdate }"><span class=input-group-addon><strong>PP Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=call.fromppdate is-open=datePickerPopup.dp_ppp close-text=Close min-date=call.fromdate ng-click="openDatePicker($event,\'dp_ppp\')" readonly ng-change="getppWorkingHours(fromdatep = \'true\')"> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_ppp\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-md-3 col-lg-3" ng-show=call.fromppdate><button class="btn btn-sm" ng-class="{\'btn-primary\': call.frompptime, \'btn-danger\' : !call.frompptime}" style="padding: 5px 30px" ng-click=getppWorkingHours()><span ng-if=call.frompptime>Selected PP Time: {{call.frompptime | waqt}}&nbsp;&nbsp;&nbsp;<i class="glyphicon glyphicon-pencil pointer"></i></span><span ng-if=!call.frompptime>Open time slot</span></button></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id && call.services.length > 0 && temp.discounts.length"><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.discount }"><span class=input-group-addon><strong>DISCOUNTS & Premium</strong></span><select name=discount ng-model=call.discountobj class=form-control ng-options="discount as (discount | discountfilter) for discount in temp.discounts | orderBy:\'priority\'" ng-change=addDiscount(call.discountobj)><option ng-selected=true value>--SELECT DISCOUNTS & Premium--</option></select></div></div></div><div class=row ng-if="call.discount.length && call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="d in call.discount | orderBy:\'priority\'"><span style="display: inline-block; position:relative" ng-class=setDiscountArrayClass(d)>{{d.name}}&nbsp; <i class="glyphicon glyphicon-remove pointer" ng-click=removeDiscount(d)></i></span></span></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id && call.services.length > 0"><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Report delivery mode</strong></span><select name=paymentoption ng-model=display.reportdeliverymode class=form-control ng-options="po as po.mode for po in temp.reportdeliverymode | orderBy:\'mode\'" ng-change=addReportDelMode(display.reportdeliverymode)><option ng-selected=true value>--Report delivery mode--</option></select></div></div></div><div class=row ng-if="call.paymentdetails.reportdeliverymode.length && call.servicedeliveryaddress._id && call.patient._id && call.services.length > 0"><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="rn in call.paymentdetails.reportdeliverymode"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{rn.mode}} Rs.{{rn.charge}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeReportmode($index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.paymentoptions.length }"><span class=input-group-addon><strong>Payment options</strong></span><select name=paymentoption ng-model=display.paymentoption class=form-control ng-options="po.displayname as po.displayname for po in temp.paymentOptions | orderBy:\'displayname\'" ng-change=addPaymentOptions(display.paymentoption)><option ng-selected=true value>--Payment option--</option></select></div></div></div><div class=row ng-if="call.paymentoptions.length && call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="po in call.paymentoptions"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{po}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePaymentOptions($index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>SPECIAL NEED</strong></span><select name=area ng-model=call.specialneed class=form-control ng-options="sp as sp.name for sp in specialneedList" ng-change=addMultipleSN(call.specialneed)><option ng-selected=true value>--SELECT SPECIAL NEED--</option></select></div></div></div><div class=row ng-if="call.specialNeedList.length && call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="SN in call.specialNeedList | orderBy: \'name\'"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{SN.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeSN(SN,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.sampledrop }"><span class=input-group-addon><strong>SAMPLE DROP</strong></span><select name=sampledrop ng-model=call.sampledrop class=form-control ng-options="dp as dp.address for dp in temp.droppoints | orderBy:\'address\'"></select></div></div></div><div class=row ng-if="storestatus==\'Completed\' && call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.reasonsForAddPt.length }"><span class=input-group-addon><strong>"Add patient" Reason</strong></span><select name=Addpatientres ng-model=display.addPTReason class=form-control ng-options="ap as ap.displayname for ap in addPatientReasons | orderBy:\'displayname\'" ng-change=addPTReasonOptions(display.addPTReason)><option ng-selected=true value>--Reason--</option></select></div></div></div><div class=row ng-if="call.reasonsForAddPt.length && call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="obj in call.reasonsForAddPt"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{obj.displayname}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeaddPtRemove($index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="storestatus==\'Completed\' && call.servicedeliveryaddress._id && call.patient._id"><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>"Add patient" other details</strong></span> <textarea msd-elastic row=3 type=text placeholder=\'"Add patient" other details\' class="form-control input-sm" ng-model=call.addPTOtherRes></textarea></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Comment</strong></span><textarea msd-elastic row=3 type=text placeholder=comment class="form-control input-sm" ng-model=call.remark></textarea></div></div></div><span ng-if=!temp.isBackDate><div class=row ng-show="temppatient.demography.fullname && !temp.ppavailable && call.fromdate && call.fromtime >= 0"><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoptions.length || (!call.reasonsForAddPt.length && storestatus==\'Completed\')" ng-click="saveOrder(orderAction = \'saveExit\')">SAVE & EXIT</button></div><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoptions.length || (!call.reasonsForAddPt.length && storestatus==\'Completed\')" ng-click="saveOrder(orderAction = \'addPatient\')">SAVE & ADD PATIENT</button></div></div><div class=row ng-show="temppatient.demography.fullname && temp.ppavailable && call.fromdate && call.fromtime >= 0 && call.services.length > 0"><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoptions.length || !call.frompptime || (!call.reasonsForAddPt.length && storestatus==\'Completed\')" ng-click="saveOrder(orderAction = \'saveAddppexit\')">ADD PP VISIT & EXIT</button></div><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoptions.length || !call.frompptime || (!call.reasonsForAddPt.length && storestatus==\'Completed\')" ng-click="saveOrder(orderAction = \'saveAddpp\')">ADD PP VISIT & ADD PATIENT</button></div></div></span> <span ng-if=temp.isBackDate><div class=row ng-show="temppatient.demography.fullname && !temp.ppavailable && call.fromdate && call.fromtime >= 0 && call.reasonsForAddPt.length"><div class="col-sm-offset-3 col-sm-6"><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoptions.length" ng-click="saveOrder(orderAction = \'saveExit\')">SAVE & EXIT</button></div></div></span></div></div><div ng-include="\'partials/mly/partner/call/slot.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/patient.object.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/addressForOrder.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/list/call.otherarea.html\'"></div><div class="modal fade" id=delServiceModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header></div><div class=modal-body><div class=row><div class=col-lg-12><h4>Are you sure you want to delete ?</h4><div class=row><div class=col-md-12><div class="col pull-right"><a data-dismiss=modal ng-click=deleteService() class="btn btn-default">Yes</a> <a data-dismiss=modal ng-click=closedeletemodal() class="btn btn-primary">No</a></div></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=addressselection tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header style="height: 60px;"><div class=pull-right><button type=button ng-if=temp.otherAddress.length ng-click=updatedServiceAdd() ng-disabled=temp.selectaddress class="btn btn-primary" data-dismiss=modal>UPDATE</button> <button data-dismiss=modal class="btn btn-default">Close</button></div><h4 class=modal-title id=slotModalLabel>SELECT ADDRESS</h4></div><div class=modal-body><div class=row><div class=col-md-12><div class=list-group-item style="border: none;" ng-repeat="tempaddress in temp.otherAddress" data-toggle=tooltip data-placement=top title="Click to select address" ng-click="checkServiceAddress(tempaddress, $index)" ng-class="(tempaddress.servicedeliveryaddress == \'true\')?\'active\':\'\'" ng-if=tempaddress.area_id.name><strong>{{tempaddress.title}}</strong> <span class=pull-right><span ng-click="editServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-pencil pointer"></i></span> &nbsp;&nbsp;</span><br>{{tempaddress.address}}<br><span ng-if=tempaddress.sublocation_id.name>{{tempaddress.sublocation_id.name}},</span><br>{{tempaddress.city_id.name}} - {{tempaddress.pincode}}</div><button type=button ng-if=!temp.otherAddress.length ng-click=openAddAddress() class="btn btn-default" data-dismiss=modal>ADD NEW ADDRESS 3</button></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=ppslotModal tabindex=-1 role=dialog aria-labelledby=slotModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button ng-if="!call.frompptime && !temp.ppavailable" style="margin-right:5px;margin-top: -7px;" data-dismiss=modal class="btn btn-default pull-right" ng-click="call.fromppdate = \'\'">Remove PP test and Close</button> <button ng-if="!call.frompptime && temp.ppavailable" style="margin-right:5px;margin-top: -7px;" data-dismiss=modal class="btn btn-default pull-right">Close</button> <button ng-if="call.frompptime && temp.ppavailable" style="margin-right:5px;margin-top: -7px;" data-dismiss=modal class="btn btn-default pull-right">Close</button><h4 class=modal-title id=slotModalLabel>SELECT PP TIME</h4></div><div class=modal-body><div class=row><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromppdate }"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=call.fromppdate is-open=datePickerPopup.dp_pp close-text=Close min-date=call.fromdate ng-click="openDatePicker($event,\'dp_pp\')" readonly ng-change="getppWorkingHours(fromdatep = \'true\')"> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_pp\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><table class="table table-striped table-bordered table-hover"><tr ng-repeat="slottime in temp.timeppSlotss"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td style="padding-top: 5px;padding-bottom: 5px;"><div class="btn-group btn-group-sm" ng-repeat="slot in slottime.slots" style=margin-right:5px><button type=button class="btn dropdown-toggle" ng-class="{\'btn-danger\':!slot.available, \'btn-success\':slot.available, \'btn-warning\':slot.available == -1}" data-toggle=dropdown aria-haspopup=true aria-expanded=false ng-disabled=!slot.available><small ng-if="slot.available == true">{{slot.text}}</small> <span ng-if="!slot.available || slot.available == -1">{{slot.text | waqt}}</span> <span class=caret></span></button><ul class=dropdown-menu><li ng-repeat-start="subSlot in slottime.subSlots"><a ng-click=changeppTime(subSlot)><small>{{subSlot | waqt}}</small></a></li><li role=separator class=divider ng-repeat-end ng-if=!$last></li></ul></div></td></tr></table></div></div></div></div><div class="modal fade" id=selectpptime tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header style="height: 60px;"><div class=pull-right><button type=button ng-disabled=!call.fromtimepp ng-click=otherPPvisit() class="btn btn-default" data-dismiss=modal>UPDATE</button> <button data-dismiss=modal ng-click=closeOtherPPmodel() class="btn btn-default">Close</button></div></div><div class=modal-body><div class=row><div class="col-md-12 col-lg-12" ng-if=temp.othertimeSlotsspp.length><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.fromtime }"><span class=input-group-addon><strong>SELECT PP TIME</strong></span><select name=othertimepp ng-model=call.fromtimepp class=form-control><option ng-repeat="timeslot in temp.othertimeSlotsspp" value={{timeslot.time}} ng-selected="timeslot.time == call.fromtimepp">{{timeslot.time | waqt}}</option></select></div></div></div></div></div></div></div><div class="modal fade" id=patientNotAvailable tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>PATIENT NOT AVAILABLE</h4><button data-dismiss=modal style=width:160px class="btn btn-primary" ng-click=newPatient()>Add New Patient</button> <button data-dismiss=modal style=width:130px class="btn btn-default">Cancel</button></center></div></div></div></div></div></div><div class="modal fade" id=testNotAvailable tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>TEST NOT AVAILABLE</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=testalreadyadded tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>SELECTED TEST IS ALREADY ADDED</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=profilealreadyadded tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>SELECTED TEST IS ALREADY ADDED IN PROFILE</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=packagealreadyadded tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>SELECTED TEST IS ALREADY ADDED IN PACKAGE</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=callCreated tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>CALL CREATED</h4><button ng-click=callcreated() style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=addpatientcallCreated tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>CALL CREATED</h4><h4>Are you sure you want to add a new patient to the same address?</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal ng-click=callcreated() style=width:130px class="btn btn-primary">No</button></center></div></div></div></div></div></div><div class="modal fade" id=factoryprofilemodal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>{{showMessage}}</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=addffServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="coveredPPTestPopupText | sanitize">{{coveredPPTestPopupText}}</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">OK</button></center></div></div></div></div></div></div><div class="modal fade" id=addPPServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="coveredTestPPPopupText | sanitize">{{coveredTestPPPopupText}}</h4><button data-dismiss=modal ng-click=goToPPTestAdd() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addPPElseServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="coveredTestElsePPPopupText | sanitize">{{coveredTestElsePPPopupText}}</h4><button data-dismiss=modal ng-click=getppWorkingHours() style=width:130px class="btn btn-primary">OK</button></center></div></div></div></div></div></div><div class="modal fade" id=addPPtwoServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addPPtwoServiceConformation | sanitize">{{addPPtwoServiceConformation}}</h4><button data-dismiss=modal ng-click=openSecondpopup() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addPPtwothreeServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addPPtwothreeServiceConformation | sanitize">{{addPPtwothreeServiceConformation}}</h4><button data-dismiss=modal ng-click=getppWorkingHours() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addServiceConformation | sanitize">{{addServiceConformation}}</h4><button data-dismiss=modal ng-click=replaceServices() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addftwoServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addftwoServiceConformation | sanitize">{{addftwoServiceConformation}}</h4><button data-dismiss=modal ng-click=openFSecondpopup() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addftwothreeServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addftwothreeServiceConformation | sanitize">{{addftwothreeServiceConformation}}</h4><button data-dismiss=modal ng-click=replaceServices() style=width:130px class="btn btn-primary">OK</button></center></div></div></div></div></div></div><div class="modal fade" id=visitHistory tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header style=height:60px><button class="btn btn-default pull-right" style=margin:5px data-dismiss=modal>Cancel</button> <button class="btn btn-primary pull-right" style=margin:5px data-dismiss=modal ng-disabled=!oneCheckOrder ng-click=coyTestModal()>copy tests</button><h4 class=modal-title>Visit History</h4></div><div class=modal-body style=padding-top:0px;padding-bottom:0px><div ng-include="\'partials/client/patientVisitHistory.html\'"></div></div></div></div></div><div ng-include="\'partials/client/copyTestMsg.modal.html\'"></div><div class="modal fade" id=reportdelivery tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;z-index: 1052;" data-backdrop=static data-keyboard=false title=Alert><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><center>you can select only one hardcopy.</center></h4><div><center><button style=width:130px data-dismiss=modal aria-label=Close class="btn btn-primary">Cancel</button></center></div></div></div></div></div></div></div><div ng-include="\'partials/partner/test/modal/testComponent.modal.html\'"></div>'),e.put("partials/mly/partner/container/containerStatus.html","<html><title>Server Containers</title><body><div class=table-responsive><table class=table><tr><td><b>Container Name</b></td><td><b>Container Status</b></td></tr><tr><td>API Container</td><td ng-if=status1>Running</td><td ng-if=!status1>Down</td></tr><tr><td>Order Container</td><td ng-if=status2>Running</td><td ng-if=!status2>Down</td></tr><tr><td>Group Orders Container</td><td ng-if=status3>Running</td><td ng-if=!status3>Down</td></tr><tr><td>Report Container</td><td ng-if=status4>Running</td><td ng-if=!status4>Down</td></tr><tr><td>Sample Delivered Container</td><td ng-if=status5>Running</td><td ng-if=!status5>Down</td></tr><tr><td>Sample sColleted Container</td><td ng-if=status6>Running</td><td ng-if=!status6>Down</td></tr></table></div></body></html>"),e.put("partials/mly/partner/client/addNewAddressFromExisting.modal.html",'<div class="modal fade" id=addNewAddaddressFormExixting role=dialog style=overflow-y:scroll><div class=modal-dialog><div class=modal-content><div class=modal-header><button data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-click=changeAddress()>Save</button><h4 class=modal-title>Change address</h4></div><div class=modal-body><div class=row style=margin-top:10px><div class=col-md-12><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-click=openAddAddress() data-dismiss=modal>ADD NEW ADDRESS 7</button></div></div></div></div></div></div>'),e.put("partials/mly/partner/client/client-add.html",'<div class="row panelmainDiv" data-ng-init=edit()><div class="col-lg-12 panelheaderDiv"><div class=col-lg-6><h4 ng-hide=patient._id>Add Patient</h4><h4 ng-show=patient._id>Edit Patient</h4></div><div class=col-lg-6><button type=button class="btn btn-default pull-right" ng-click=close()>Cancel</button> <button ng-hide=patient._id type=button style=margin-right:5px; ng-click=addPatient() class="btn btn-default pull-right" ng-disabled="(patientFrm.$invalid || !patient.demography.addresses.length || !temp.validEmail)">Save</button> <button ng-show=patient._id type=button style=margin-right:5px; ng-click=addPatient() class="btn btn-default pull-right" ng-disabled="(patientFrm.$invalid || !patient.demography.addresses.length || !temp.validEmail)">Save changes</button></div></div><div class="col-lg-12 panelbodyDiv paneldetailbodyDiv"><div class=row><div class=col-lg-12><div class="panel panel-default"><div class=panel-body><div ng-form=patientFrm><div class=panel-body><div ng-include src="\'partials/client/client-include-add.html\'"></div></div></div></div></div></div></div></div></div>'),e.put("partials/mly/partner/client/client-include-add.html",'<div class=row ng-show="patient._id && patient.membership.length"><div class=col-md-2></div><div class=col-md-2></div></div><ng-demography newpatient=newpatient temp=temp></ng-demography>'),e.put("partials/mly/partner/client/clients.html",'<div class="row panelmainDiv"><div class=col-lg-2><h4 style="font-size: 23px;">Clients <small><sup ng-if="user.userdata.role != \'partnerfrontoffice\'"><a type=button data-toggle=modal data-target=#importModal class="btn btn-link btn-xs">Import</a></sup></small></h4></div><div class="col-lg-6 panelheaderDiv" style=padding-top:10px;><div class="input-group input-group-sm pull-right"><input placeholder="first name (min. 3)" ng-model-options="{ debounce: 1000 }" ng-change=table(searchObj) ng-model=searchObj.firstname class=form-control style="width: 34%;" type=text ng-minlength=3> <input placeholder="middle name" ng-model-options="{ debounce: 1000 }" ng-change=table(searchObj) ng-model=searchObj.middlename class=form-control style="width: 33%;" type=text ng-minlength=1> <input placeholder=surname ng-model-options="{ debounce: 1000 }" ng-change=table(searchObj) ng-model=searchObj.lastname class=form-control style="width: 33%;" type=text ng-minlength=1></div></div><div class="col-lg-3 panelheaderDiv" style=padding-top:10px;><div style=margin-right:5px;width:100%><input type=text ng-model-options="{ debounce: 1000 }" ng-model=searchObj.searchText class="form-control input-sm" placeholder="UHID / MOB NO / ALT NO" ng-change=table(searchObj)></div></div><div class="col-lg-1 panelheaderDiv" ng-if="searchObj.lastname || searchObj.firstname || searchObj.middlename || searchObj.searchText"><div style=margin-right:5px;width:100%><a href=# class="btn btn-sm btn-link" ng-click=clearSearchData() style=color:black;><b>clear<br>data</b></a></div></div><div class="col-md-12 panelbodyDiv"><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-body><span ng-hide="(user.userdata.role == \'partnerteamlead\' || user.userdata.role == \'partnerfrontoffice\')"><div class=row><div class="col-md-8 col-lg-8"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.partner_id }"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partnerList | orderBy:\'info.name\' track by partner._id" ng-model=call.partner_id class="form-control input-sm" placeholder=Partner ng-change=changePartner(call.partner_id) ng-disabled="user.userdata.role == \'partnerfrontoffice\'"><option value>--Select--</option></select></div></div><div class="col-md-4 col-lg-4"><div class=row style=margin-bottom:20px; ng-if="(user.userdata.role == \'admin\'||user.userdata.role == \'providerteamlead\') && !temp.parentorder_id"><label class=col-md-2 style="width:initial;margin-top: 6px;"><strong>partner type</strong></label> <label class=radio-inline style="margin-top: 6px;"><strong><input name=partnerType type=radio ng-model=searchObj.partnertype id=b2b value=b2b ng-click="getPartners(\'test\')">&nbsp;&nbsp;b2b</strong></label> <label class=radio-inline style="margin-top: 6px;"><strong><input name=partnerType type=radio ng-model=searchObj.partnertype id=b2c value=b2c ng-click="getPartners(\'test\')">&nbsp;&nbsp;b2c</strong></label></div></div></div><div class=row ng-if=temp.partnerList.length><div class="col-md-12 col-lg-12"><div class="alert alert-info" role=alert><span ng-repeat="multiPartner in temp.partnerList"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{multiPartner.info.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePartner(multiPartner,$index)></i></span>&nbsp;&nbsp;</span></div></div></div></span><div class=row ng-if="(user.userdata.role == \'partnerteamlead\' || user.userdata.role == \'partnerfrontoffice\')"><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Partner</strong></span> <input name=Partner type=text placeholder=Partner class=form-control disabled ng-model=display.partnername></div></div></div><div class=table-responsive ng-show="patientsList.length > 0"><table class="table table-striped table-bordered table-hover"><thead><tr><th><center>Sr. No.</center></th><th>Name (Gender / Age)</th><th ng-hide="user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\'"><center>Partner</center></th><th><center>UHID</center></th><th style=width:20%;><center>Mobile no / Alternate no</center></th></tr></thead><tbody><tr ng-repeat="patient in patientsList"><td><center>{{$index + 1}}</center></td><td><a ng-click=editPatient(patient)><span ng-if="patient.type==\'institutemember\'" class=badge>I</span> {{patient.demography.salutation}}&nbsp;{{patient.demography.fullname}}&nbsp;(&nbsp;{{patient.demography.gender}}&nbsp;/&nbsp;{{patient.demography.age}}{{patient.demography.agetype}})<br><span ng-show=patient.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span></a></td><td ng-hide="user.userdata.role == \'partnerfrontoffice\' || user.userdata.role == \'partnerteamlead\'"><center>{{patient.partner_id.info.acronym}}</center></td><td><center>{{patient.externalId}}</center></td><td style=width:20%;><center><p>{{patient.demography.mobilenumber}} <span ng-if=patient.demography.altnumber.length>/</span> <span ng-repeat="altnumbers in patient.demography.altnumber">{{altnumbers}}{{$last?\'\':\',\'}}</span></p></center></td></tr></tbody></table><pagination class="pull-right pagination-sm" style=margin-right:5px; total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="isPaging=true;table(searchObj)"></pagination></div><div class=row ng-hide=patientsList.length><div class=col-md-12><div class="alert alert-warning" role=alert><strong>Patient not found</strong></div></div></div></div></div></div></div></div></div><ng-import type=clientimport></ng-import>'),e.put("partials/mly/partner/client/newPatientAddressFromExistingPatient.modal.html",'<div class="modal fade" id=newPatientAddaddressFormExixting role=dialog style=overflow-y:scroll><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-disabled=!newAddressArray.length ng-click=saveNewAddress()>Save</button><h4 class=modal-title>Add address</h4></div><div class=modal-body><div class=row><div class=col-md-10><div class=col-md-9 style="padding-left: 0px;"><div class="input-group input-group-sm pull-right"><span class=input-group-addon><strong>Existing Patient</strong></span> <input placeholder="first name (min. 3)" ng-model=searchExistingPatientObj.firstname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 40%;" type=text ng-minlength=3> <input placeholder="middle name" ng-model=searchExistingPatientObj.middlename class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1> <input placeholder=surname ng-model=searchExistingPatientObj.lastname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 30%;" type=text ng-minlength=1></div></div><div class=col-md-3 style="padding-left: 0px;padding-right: 0px;"><input type=text style="margin-bottom: 0px;" ng-model=searchExistingPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() placeholder="UHID / MOB NO / ALT NO" class="form-group form-control input-sm"></div><table class="table table-responsive searchtable" style=width:100%;position:inherit><tbody><tr ng-repeat="Patient in newPatientList"><td ng-click=selectNewPatient(Patient) class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span> <span ng-repeat="altNo in Patient.demography.altnumber">,{{altNo}}</span></td></tr><tr ng-if=!newPatientList.length><td ng-if=clientcheckpoint><center style=color:red;>Patient not found</center></td></tr><tr ng-if="!newPatientListdata.length && !newPatientList.length"><td ng-if=clientUsercheckpoint><center style=color:red;>Patient not found</center></td></tr></tbody></table></div><div class=col-md-2 style="padding-left: 0px;padding-right: 0px;" ng-if="searchExistingPatientObj.lastname || searchExistingPatientObj.firstname || searchExistingPatientObj.middlename || searchExistingPatientObj.searchText"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchData() style=color:black;><b>clear data</b></a></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;"><div><strong><i class="glyphicon glyphicon-user"></i> {{existingPatient.demography.fullname}}</strong></div></div></div></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;border-bottom: 2px solid #b3aeae;" ng-repeat="tempaddress in existingPatient.demography.addresses track by $index" ng-if=existingPatient.demography.addresses.length><span class=pull-right><input type=checkbox name=selectedAddress[] value={{tempaddress}} ng-checked="newAddressArray.indexOf(tempaddress) > -1" id=$index ng-click=selectedAddressCheck(tempaddress)></span> <strong>{{tempaddress.title}}</strong><br>{{tempaddress.address2}}<br><div><b>Landmark:</b> {{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b> {{tempaddress.area_id.name}}</div></div><div ng-if=!existingPatient.demography.addresses.length><span><center style=color:red;>NO ADDRESS AVAILABLE</center></span></div></div></div></div></div></div></div></div>'),e.put("partials/mly/partner/call/acceptingAddNewAddress.modal.html",'<div class="modal fade" id=acceptingNewAddressFromExixting tabindex=-1 role=dialog aria-labelledby=acceptingNewAddressFromExixting><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><div class=modal-body><div class=row><div class=col-sm-12><div class="alert alert-success">Are you sure, you want to add address against patient?</div></div></div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=saveClientAddress()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div></div>'),e.put("partials/mly/partner/call/addingNewAddaddressFromExisting.modal.html",'<div class="modal fade" id=addingNewAddaddressFormExisting role=dialog style=overflow-y:scroll><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button data-dismiss=modal aria-label=Close class="btn btn-default pull-right">Cancel</button> <button style=margin-right:5px; type=button class="btn btn-primary pull-right" ng-disabled=!newAddressArray.length ng-click=saveNewAddress()>Save</button><h4 class=modal-title>Add address</h4></div><div class=modal-body><div class=row><div class=col-md-10><div class=col-md-9 style="padding-left: 0px;"><div class="input-group input-group-sm pull-right"><span class=input-group-addon><strong>Existing Patient</strong></span> <input placeholder="first name (min. 3)" ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByNameFromExisting() ng-minlength=3 ng-model=searchExistingPatientObj.firstname class=form-control style="width: 40%;" type=text> <input placeholder="middle name" ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByNameFromExisting() ng-minlength=1 ng-model=searchExistingPatientObj.middlename class=form-control style="width: 30%;" type=text> <input placeholder=surname ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByNameFromExisting() ng-minlength=1 ng-model=searchExistingPatientObj.lastname class=form-control style="width: 30%;" type=text></div></div><div class=col-md-3 style="padding-left: 0px;padding-right: 0px;"><input type=text style="margin-bottom: 0px;" ng-model=searchExistingPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByNameFromExisting() placeholder="UHID / MOB NO / ALT NO" class="form-group form-control input-sm"></div><table class="table table-responsive searchtable" style=width:100%;position:inherit><tbody><tr ng-repeat="Patient in newPatientList"><td ng-click=selectNewPatient(Patient) class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, {{Patient.demography.servicedeliveryaddress.branch_id.name}}, <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}},</span> <span ng-repeat="altNo in Patient.demography.altnumber">{{altNo}},</span></td></tr><tr ng-if=!newPatientList.length><td ng-if=clientcheckpoint><center style=color:red;>Patient not found</center></td></tr><tr ng-if="!newPatientListdata.length && !newPatientList.length"><td ng-if=clientUsercheckpoint><center style=color:red;>Patient not found</center></td></tr></tbody></table></div><div class=col-md-2 style="padding-left: 0px;padding-right: 0px;" ng-if="searchExistingPatientObj.lastname || searchExistingPatientObj.firstname || searchExistingPatientObj.middlename || searchExistingPatientObj.searchText"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchDataFromExisting() style=color:black;><b>clear data</b></a></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;"><div><strong><i class="glyphicon glyphicon-user"></i> {{existingPatient.demography.fullname}}</strong></div></div></div></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;border-bottom: 2px solid #ddd;" ng-repeat="tempaddress in existingPatient.demography.addresses track by $index" ng-if=existingPatient.demography.addresses.length><span class=pull-right><input type=checkbox name=selectedAddress[] value={{tempaddress}} ng-checked="newAddressArray.indexOf(tempaddress) > -1" id=$index ng-click=selectedAddressCheck(tempaddress)></span> <strong>{{tempaddress.title}}</strong><br>{{tempaddress.address2}}<br><div><b>Landmark:</b> {{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b> {{tempaddress.area_id.name}}</div></div><div ng-if=!existingPatient.demography.addresses.length><span><center style=color:red;>NO ADDRESS AVAILABLE<sup>**</sup></center></span></div></div></div></div></div></div></div></div>'),e.put("partials/mly/partner/call/addressForOrder.modal.html",'<div class="modal fade" id=AddressObjectViewForOrder tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAddAddressForOrder() class="btn btn-default pull-right">Close</button> <button type=button style="margin-right:5px;margin-top: -7px;" ng-click=addAddressForOrder() class="btn btn-primary pull-right" ng-disabled="!addressFrmValid || !addaddress.sublocation_id"><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></button><h4 class=modal-title id=myModalLabel><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></h4></div><div class=modal-body><div ng-form=addressFrm><span ng-hide=true>{{addressFrmValid = addressFrm.$valid}}</span><div ng-include="\'partials/mly/partner/call/patientAddress.html\'"></div></div></div><div class=modal-footer></div></div></div></div>'),e.put("partials/mly/partner/call/call-add.html",'<div><h2 ng-hide=call._id>NEW VISIT<small><sup></sup></small></h2></div><div class="panel panel-default"><div class=panel-body><div class=row><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.partner_id }"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partnerList track by partner._id" ng-model=call.partner_id class="form-control input-sm" placeholder=Partner ng-change=changePartner(call.partner_id) ng-disabled="temp.parentorder_id || temp.partnerformtoffice"><option value>--Select--</option></select></div></div></div><div id=dialog-confirm style="display: none;">IT WILL REMOVE OTHER ENTERED DETAIL</div><div id=NOT-ALLOWED style="display: none;">NOT ALLOWED</div><div id=Call-Created style="display: none;">CALL CREATED</div><div id=Patient-Exist style="display: none;">PATIENT NOT EXIST</div><div id=Test-Exist style="display: none;">TEST NOT EXIST</div><div id=TestAlready-Exist style="display: none;">SELECTED TEST IS ALREADY ADDED</div><div id=profile-Exist style="display: none;">SELECTED TEST IS ALREADY ADDED IN PROFILE</div><div id=package-Exist style="display: none;">SELECTED TEST IS ALREADY ADDED IN PACKAGE</div><div id=addpp-test style="display: none;">PLEASE ADD PP TEST TO CREATE A PP VISIT</div><div class=row><div class="col-md-6 col-lg-6" ng-if="call.partner_id && !temp.otherArea"><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.area_id._id }"><span class=input-group-addon><strong>Partner Slot (area)</strong></span><select name=area ng-options="area as area.area_id.name for area in areaList track by area._id" ng-model=temp.temparea class=form-control ng-change=SelectArea(temp.temparea) ng-disabled=temp.parentorder_id><option value>--Select area--</option></select></div></div><div class="col-md-6 col-lg-6" ng-if="call.partner_id && temp.otherArea"><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.area_id._id }"><span class=input-group-addon><strong>Other Slot (area)</strong></span><select name=area ng-options="area as area.name for area in temp.otherAreaArray" ng-model=temp.temparea class=form-control ng-change=SelectOtherArea(temp.temparea) ng-disabled=temp.parentorder_id><option value>--Select area--</option></select></div></div><div class="col-md-6 col-lg-6" ng-if=call.partner_id><button class="btn btn-sm btn-primary" style="padding: 5px 30px" ng-click=getAllLocation() ng-if=!temp.otherArea ng-disabled=temp.parentorder_id>Other Area</button> <button class="btn btn-sm btn-primary" style="padding: 5px 30px" ng-click=getPartnerArea() ng-if=temp.otherArea ng-disabled=temp.parentorder_id>Partner Area</button></div></div><div class=row ng-if=call.area_id._id><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromdate }"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=call.fromdate is-open=datePickerPopup.dp_fd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_fd\')" readonly ng-change="call.todate = call.fromdate;selectTimeSlot();" ng-disabled=temp.parentorder_id> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd\')" ng-disabled=temp.parentorder_id><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-md-6 col-lg-6" ng-if="temp.otherArea && call.fromdate"><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.fromtime }"><span class=input-group-addon><strong>Time</strong></span><select name=othertime ng-model=call.fromtime class=form-control ng-disabled=temp.parentorder_id><option ng-repeat="timeslot in temp.othertimeSlotss" value={{timeslot.time}} ng-selected="timeslot.time == call.otherfromtime"><span>{{timeslot.time | waqt}}</span></option></select></div></div><div class="col-md-3 col-lg-3" ng-show="call.fromdate && !temp.otherArea"><button class="btn btn-sm btn-primary" style="padding: 5px 30px" ng-click=getWorkingHours() ng-disabled=temp.parentorder_id><span ng-if=call.fromtime>Selected Time: {{call.fromtime | waqt}}&nbsp;&nbsp;&nbsp;<i class="glyphicon glyphicon-pencil pointer"></i></span><span ng-if=!call.fromtime>Open time slot</span></button></div></div><div class=row ng-if=call.fromtime><div class=col-sm-9><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Existing Patient</strong></span> <input type=text style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;" ng-model=searchPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() placeholder="Discover by name, mobile no." class=form-control><table class="table table-responsive searchtable"><tbody><tr ng-repeat="Patient in PatientList"><td ng-click=SelectPatient(Patient) class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, {{Patient.demography.servicedeliveryaddress.branch_id.name}} <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}},</span> <span ng-repeat="altNo in Patient.demography.altnumber">{{altNo}},</span></td></tr></tbody></table></div></div><div class=col-sm-3><div class="btn-group btn-block" role=group><button type=button class="btn btn-sm btn-primary" ng-click=newPatient()><i class="glyphicon glyphicon-plus"></i></button> <button type=button class="btn btn-sm btn-primary" ng-click=newPatient()>New Patient</button></div></div></div><div class=row ng-if=temppatient._id><div class=col-sm-6><div class="panel panel-default"><div class=panel-heading><strong>Personal details 978</strong> <a type=button class="btn btn-xs pull-right" ng-click=editPatient(temppatient)>EDIT</a></div><div class=list-group-item><div ng-if=temppatient.demography.fullname style=margin-bottom:0px><strong><i class="glyphicon glyphicon-user"></i> {{temppatient.demography.salutation}}&nbsp;{{temppatient.demography.fullname | uppercase}}</strong> <span ng-if=temppatient.clientcode><span class="label label-success">{{temppatient.clientcode}}</span></span><br><p style=margin:0px><span ng-if=temppatient.demography.gender><span ng-if="temppatient.demography.gender == \'male\'">Male</span> <span ng-if="temppatient.demography.gender == \'female\'">Female</span> <span ng-if="temppatient.demography.gender == \'third gender\'">Third Gender</span> / {{temppatient.demography.age}} {{temppatient.demography.agetype}}</span></p><p style=margin:0px ng-if=temppatient.demography.mobilenumber><span><i class="glyphicon glyphicon-phone"></i></span> {{temppatient.demography.mobilenumber}}</p><p style=margin:0px ng-if=temppatient.demography.altnumber.length><i class="glyphicon glyphicon-phone-alt"></i> <span ng-repeat="obj in temppatient.demography.altnumber track by $index">{{obj}}{{$last?\'\':\',\'}}&nbsp;</span></p><p style="margin:0px;text-transform: lowercase !important;" ng-if=temppatient.demography.email><i class="glyphicon glyphicon-envelope"></i> {{temppatient.demography.email | lowercase}}</p></div></div></div></div><div class=col-sm-6><div class="panel panel-default"><div class=panel-heading><strong>Address</strong> <a type=button ng-disabled=temp.parentorder_id class="btn btn-xs pull-right" ng-click=openAddAddress()>ADD</a> <a type=button ng-disabled="temp.parentorder_id || temp.otherAddress.length <= 1" class="btn btn-xs pull-right" ng-click=otherAddSelection()>OTHERS</a> <a type=button ng-disabled="temp.parentorder_id || !temp.otherAddress.length" class="btn btn-xs pull-right" ng-click=editServiceAddress()>EDIT</a></div><div class=list-group-item style="border: none;" ng-repeat="tempaddress in temppatient.demography.addresses track by $index" ng-if="tempaddress.servicedeliveryaddress == \'true\'" data-toggle=tooltip data-placement=top title="Click to select address" ng-click="checkServiceAddress(tempaddress, $index)" ng-class="(tempaddress.servicedeliveryaddress == \'true\')?\'active\':\'\'"><strong>{{tempaddress.title}}</strong> <span class=pull-right ng-hide=temp.parentorder_id></span><br>{{tempaddress.address}}<br><span ng-if=tempaddress.sublocation_id.name>{{tempaddress.sublocation_id.name}},</span><br>{{tempaddress.city_id.name}} - {{tempaddress.pincode}}</div></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="form-group input-group input-group-sm typeaheadwidth"><span class=input-group-addon><strong>Test</strong></span> <input type=text class=form-control style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;" placeholder=Search ng-model=searchObj.servicename ng-model-options="{ debounce: 1500 }" ng-change=getAllServices(searchObj,type)><table ng-show=searchObj.servicename class="table searchtable"><tbody><tr ng-repeat="Service in ServiceList track by $index"><td ng-click=SelectService(Service) class=pointer><span>{{Service.name}}</span> <span><small>&nbsp; Rs. {{Service.price.mrp}}</small></span> <span>&nbsp;&nbsp;&nbsp;</span></td></tr></tbody></table></div></div></div><div class=row ng-show="call.services.length > 0"><div class=col-sm-12><div class="panel panel-default nopadding"><div class=panel-heading><small>Selected Test</small></div><table class="table table-striped table-bordered table-hover table-condensed"><thead><tr><th><small>Test Name</small></th><th><small>Amount</small></th></tr></thead><tbody><tr ng-repeat="service in call.services track by $index"><td class=pointer><a ng-click=showDeleteModel($index)><i class="glyphicon glyphicon-remove"></i></a>&nbsp;&nbsp; <span><small class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}">{{service.service_id.name}}</small><small ng-click=addPPTest(service.service_id.postservices) style=color:blue;font-size:15px; ng-if=showPPAddButton(service.service_id)><sup>add pp / pg tests ( delete any one )</sup></small></span><p style=letter-spacing:0.5px><span ng-repeat="chieldTest in service.service_id.childs"><span style=color:#d35400;font-size:11px>{{chieldTest.test_id.name}}</span>{{$last?\'\':\',\'}}&nbsp;</span></p></td><td><small class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}"><span ng-if=service.service_id.price.discountTestPrice>Rs. {{service.service_id.price.discountTestPrice}}&nbsp;&nbsp;</span><span ng-class="{\'orignalprice\':service.service_id.price.discountTestPrice}">Rs. {{service.service_id.price.mrp}}</span></small></td></tr><tr><td><div class=pull-right>TEST CHARGE:</div></td><td><div>Rs. {{call.testamount | number:0}}</div></td></tr><tr ng-if="discountper!=0"><td><div class=pull-right>DISCOUNT <b>({{temp.discountname | uppercase}} {{discountper}}%)</b> :</div></td><td><div>Rs. {{discountamount | number:0}}</div></td></tr><tr ng-if="discountper!=0"><td><div class=pull-right>TEST CHARGES AFTER DISCOUNT:</div></td><td><div>Rs. {{call.testamount - discountamount}}</div></td></tr><tr ng-if="temp.premiumchargesper!=0"><td><div class=pull-right>EXTRA CHARGE <b>({{temp.premiumchargesper}}%)</b>:</div></td><td><div>Rs. {{temp.premiumcharge | number:0}}</div></td></tr><tr><td><div class=pull-right>VISIT CHARGE:</div></td><td><div>Rs. {{finalVisitCharge | number:0}}</div></td></tr><tr><td><div class=pull-right><b>TOTAL:</b></div></td><td><div><b>Rs. {{finalVisitCharge + temp.premiumcharge + call.testamount - discountamount | number:0}}</b></div></td></tr></tbody></table></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id && call.services.length > 0"><div class=col-sm-6><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.discount }"><span class=input-group-addon><strong>DISCOUNTS</strong></span><select name=discount ng-model=call.discount class=form-control ng-options="discount as discount.name for discount in temp.discounts" ng-change=addDiscount()><option ng-selected=true value>--SELECT DISCOUNTS--</option></select></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-6><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.paymentoption }"><span class=input-group-addon><strong>Payment options</strong></span><select name=paymentoption ng-model=call.paymentoption class=form-control ng-options="po as po.displayname for po in temp.paymentoptions"></select></div></div><div class=col-sm-6><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.specialneed }"><span class=input-group-addon><strong>SPECIAL NEED</strong></span><select name=area ng-model=call.specialneed class=form-control ng-options="sp as sp.name for sp in specialneedList"></select></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-6><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.sampledrop }"><span class=input-group-addon><strong>SAMPLE DROP</strong></span><select name=sampledrop ng-model=call.sampledrop class=form-control ng-options="dp as dp.address for dp in temp.droppoints"></select></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>COMMENT</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=call.remark></textarea></div></div><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.createdby }"><span class=input-group-addon><strong>CREATED BY</strong></span> <input type=text class="form-control input-sm" ng-model=call.createdby></div></div></div><div class=row ng-show="temppatient.demography.fullname && !temp.ppavailable && call.createdby"><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoption" ng-click="saveOrder(orderAction = \'saveExit\')">SAVE & EXIT</button></div><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoption" ng-click="saveOrder(orderAction = \'addPatient\')">SAVE & ADD PATIENT</button></div></div><div class=row ng-show="temppatient.demography.fullname && temp.ppavailable && call.createdby"><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoption" ng-click="saveOrder(orderAction = \'saveAddppexit\')">ADD PP VISIT & EXIT</button></div><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoption" ng-click="saveOrder(orderAction = \'saveAddpp\')">ADD PP VISIT & ADD PATIENT</button></div></div></div></div><div ng-include="\'partials/mly/partner/call/slot.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/patient.object.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/addressForOrder.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/list/call.otherarea.html\'"></div><div class="modal fade" id=delServiceModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header></div><div class=modal-body><div class=row><div class=col-lg-12><h4>Are you sure you want to delete ?</h4><div class=row><div class=col-md-12><div class="col pull-right"><a data-dismiss=modal ng-click=deleteService() class="btn btn-default">Yes</a> <a data-dismiss=modal ng-click=closedeletemodal() class="btn btn-primary">No</a></div></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=addressselection tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header style="height: 60px;"><div class=pull-right><button type=button ng-if=temp.otherAddress.length ng-click=updatedServiceAdd() ng-disabled=temp.selectaddress class="btn btn-primary" data-dismiss=modal>UPDATE</button> <button data-dismiss=modal class="btn btn-default">Close</button></div><h4 class=modal-title id=slotModalLabel>SELECT ADDRESS</h4></div><div class=modal-body><div class=row><div class=col-md-12><div class=list-group-item style="border: none;" ng-repeat="tempaddress in temp.otherAddress" data-toggle=tooltip data-placement=top title="Click to select address" ng-click="checkServiceAddress(tempaddress, $index)" ng-class="(tempaddress.servicedeliveryaddress == \'true\')?\'active\':\'\'"><strong>{{tempaddress.title}}</strong> <span class=pull-right><span ng-click="editServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-pencil pointer"></i></span> &nbsp;&nbsp;</span><br>{{tempaddress.address}}<br><span ng-if=tempaddress.sublocation_id.name>{{tempaddress.sublocation_id.name}},</span><br>{{tempaddress.city_id.name}} - {{tempaddress.pincode}}</div><button type=button ng-if=!temp.otherAddress.length ng-click=openAddAddress() class="btn btn-default" data-dismiss=modal>ADD NEW ADDRESS 4</button></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=ppslotModal tabindex=-1 role=dialog aria-labelledby=slotModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal class="btn btn-default pull-right">Close</button><h4 class=modal-title id=slotModalLabel>SELECT PP TIME</h4></div><div class=modal-body><div class=table-responsive><table class="table table-bordered"><tbody style=background-color:white><tr ng-repeat="slottime in temp.timeppSlotss"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td style="padding-top: 5px;padding-bottom: 5px;"><div class="btn-group btn-group-sm" ng-repeat="slot in slottime.slots" style=margin-right:5px><button type=button class="btn dropdown-toggle" ng-class="{\'btn-danger\':!slot.available, \'btn-success\':slot.available, \'btn-warning\':slot.available == -1}" data-toggle=dropdown aria-haspopup=true aria-expanded=false ng-disabled=!slot.available><small ng-if="slot.available == true">{{slot.appTime}}</small> <span ng-if="!slot.available || slot.available == -1">{{slot.appTime | waqt}}</span> <span class=caret></span></button><ul class=dropdown-menu><li ng-repeat-start="subSlot in slottime.subSlots"><a ng-click=changeppTime(subSlot) ng-if="subSlot >= temp.pptimecheck"><small ng-if="subSlot <= maxtimeregpp">{{subSlot | waqt}}</small></a></li><li role=separator class=divider ng-repeat-end ng-if=!$last></li></ul></div></td></tr></tbody></table></div></div></div></div></div><div class="modal fade" id=selectpptime tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header style="height: 60px;"><div class=pull-right><button type=button ng-disabled=!call.fromtimepp ng-click=otherPPvisit() class="btn btn-default" data-dismiss=modal>UPDATE</button> <button data-dismiss=modal ng-click=closeOtherPPmodel() class="btn btn-default">Close</button></div></div><div class=modal-body><div class=row><div class="col-md-12 col-lg-12" ng-if=temp.othertimeSlotsspp.length><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.fromtime }"><span class=input-group-addon><strong>SELECT PP TIME</strong></span><select name=othertimepp ng-model=call.fromtimepp class=form-control><option ng-repeat="timeslot in temp.othertimeSlotsspp" value={{timeslot.time}} ng-selected="timeslot.time == call.fromtimepp"><span>{{timeslot.time | waqt}}</span></option></select></div></div></div></div></div></div></div><script type=text/ng-template id=myPopoverTemplate.html><div class="btn btn-default" style ="display: block !important; margin-bottom:3px !important"ng-repeat="timeslot in temp.timeSlotss" ng-click="changeTime(timeslot.time)" ng-if="timeslot.time >= cutOffTimeForSelectedTimeSlot" type="button" id="popoverbtn"> {{timeslot.time | waqt}} </div></script>'),e.put("partials/mly/partner/call/gmap-call-add.html",'<div><h2 ng-hide=call._id>NEW VISIT</h2></div><div class="panel panel-default"><div class=panel-body><div class=list-group ng-if=temp.parentorder_id><a href=# class="list-group-item disabled"><b>Partner</b> : {{call.partner_id.info.name}}</a> <a href=# class="list-group-item disabled"><b>Area</b> : {{call.servicedeliveryaddress.area_id.name}}</a> <a href=# class="list-group-item disabled"><b>Date</b> :{{call.fromdate | date:\'dd-MMM-yyyy\'}} &nbsp;&nbsp;&nbsp;<b>Time</b>: {{call.fromtime| waqt}}</a> <a href=# class="list-group-item disabled" ng-if="temp.fromppdate || temp.ppppptime"><b>PP Date</b> :{{temp.fromppdate | date:\'dd-MMM-yyyy\'}} &nbsp;&nbsp;&nbsp;<b>PP Time</b>: {{temp.ppppptime| waqt}}</a> <a href=# class="list-group-item disabled"><b>Parent Patient</b> : {{temp.parentPatient}}</a> <a href=# class="list-group-item disabled"><b>Address:</b> {{call.servicedeliveryaddress.address2}}<div>Landmark: {{call.servicedeliveryaddress.landmark}}</div><div style=margin-top:3px>Slot Area: {{call.servicedeliveryaddress.area_id.name}}</div></a></div><div class=row ng-if="globaldata.userdata.role != \'partnerteamlead\'"><div class="col-md-8 col-lg-8"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.partner_id }"><span class=input-group-addon><strong>Partner</strong></span><select name=callpartner ng-options="partner as partner.info.name for partner in partnerList | orderBy:\'info.name\' track by partner._id" ng-model=call.partner_id class="form-control input-sm" placeholder=Partner ng-change=changePartner(call.partner_id) ng-disabled="temp.parentorder_id || temp.partnerformtoffice"><option value>--Select--</option></select></div></div></div></div><div class=row ng-if="globaldata.userdata.role == \'partnerteamlead\'"><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Partner</strong></span> <input name=Partner type=text placeholder=Partner class=form-control disabled ng-model=display.partnername></div></div></div><div id=dialog-confirm style="display: none;">IT WILL REMOVE OTHER ENTERED DETAIL</div><div id=NOT-ALLOWED style="display: none;">NOT ALLOWED</div><div id=Call-Created style="display: none;">CALL CREATED</div><div id=Patient-Exist style="display: none;">PATIENT NOT EXIST</div><div id=Test-Exist style="display: none;">TEST NOT EXIST</div><div id=TestAlready-Exist style="display: none;">SELECTED TEST IS ALREADY ADDED</div><div id=profile-Exist style="display: none;">SELECTED TEST IS ALREADY ADDED IN PROFILE</div><div id=package-Exist style="display: none;">SELECTED TEST IS ALREADY ADDED IN PACKAGE</div><div id=addpp-test style="display: none;">PLEASE ADD PP TEST TO CREATE A PP VISIT</div><div class=row ng-if=call.partner_id><div class=col-md-9><div class=col-md-9 style="padding-left: 0px;"><div class="input-group input-group-sm"><span class=input-group-addon><strong>Existing Patient</strong></span> <input placeholder="first name (min. 3)" ng-model=searchPatientObj.firstname ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() class=form-control style="width: 34%;" type=text ng-minlength=3> <input placeholder="middle name" id=midname ng-model=searchPatientObj.middlename class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 33%;" type=text ng-minlength=1> <input placeholder=surname ng-model=searchPatientObj.lastname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() style="width: 33%;" type=text ng-minlength=1></div></div><div class=col-md-3 style="padding-left: 0px;padding-right: 0px;"><input type=text style="margin-bottom: 0px;" ng-model=searchPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientByName() placeholder="UHID / MOB NO" class="form-group form-control input-sm"></div><div><table class="table table-responsive searchtable" style=width:100%;position:inherit><tbody><tr ng-if=showAddPatientBtn><td><center><button style=width:250px class="btn btn-sm btn-primary" ng-click=newPatient()>Add New Patient</button></center></td></tr><tr ng-repeat="Patient in PatientList"><td ng-click=SelectPatient(Patient) class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, {{Patient.demography.servicedeliveryaddress.branch_id.name}} <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span> <span ng-repeat="altNo in Patient.demography.altnumber">,{{altNo}}</span></td></tr></tbody></table></div></div><div class=col-md-1 ng-if="searchPatientObj.lastname || searchPatientObj.firstname || searchPatientObj.middlename || searchPatientObj.searchText"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchData() style=color:black;margin-left:-13px;><b>clear data</b></a></div><div class=col-md-2 ng-hide=temp.parentorder_id><button type=button class="btn btn-sm btn-primary" ng-click=openSlotSummary()>Slot Summary</button></div></div><div class=row ng-if=temppatient._id><div class=col-sm-6><div class="panel panel-default"><div class=panel-heading><strong>Personal details</strong> <a type=button class="btn btn-xs pull-right" ng-click=editPatient(temppatient)>EDIT</a></div><div class=list-group-item><div ng-if=temppatient.demography.fullname style=margin-bottom:0px><strong><i class="glyphicon glyphicon-user"></i> {{temppatient.demography.salutation}}&nbsp;{{temppatient.demography.fullname | uppercase}}</strong><div class=badge ng-if=temppatient.externalId>UHID: {{temppatient.externalId}}</div><span ng-if=temppatient.clientcode><span class="label label-success">{{temppatient.clientcode}}</span></span><br><p style=margin:0px><span ng-if=temppatient.demography.gender><span ng-if="temppatient.demography.gender == \'male\'">Male</span> <span ng-if="temppatient.demography.gender == \'female\'">Female</span> <span ng-if="temppatient.demography.gender == \'third gender\'">Third Gender</span> / {{temppatient.demography.age}} {{temppatient.demography.agetype}}</span></p><p style=margin:0px ng-if=temppatient.demography.mobilenumber><span><i class="glyphicon glyphicon-phone"></i></span> {{temppatient.demography.mobilenumber}}</p><p style=margin:0px ng-if=temppatient.demography.altnumber.length><i class="glyphicon glyphicon-phone-alt"></i> <span ng-repeat="obj in temppatient.demography.altnumber track by $index">{{obj}}{{$last?\'\':\',\'}}&nbsp;</span></p><p style="margin:0px;text-transform: lowercase !important;" ng-if=temppatient.demography.email><i class="glyphicon glyphicon-envelope"></i> {{temppatient.demography.email | lowercase}}</p></div></div></div></div><div class=col-sm-6><div class="panel panel-default"><div class=panel-heading><strong>Address</strong> <a type=button ng-hide="temp.parentorder_id || addressCount <= 1" class="btn btn-xs pull-right" ng-click=otherAddSelection()><span ng-if="call.servicedeliveryaddress.title && addressCount != 0">{{addressCount-1}} more address</span> <span ng-if="!call.servicedeliveryaddress.title && addressCount != 0">{{addressCount}} address</span></a> <a type=button ng-hide=temp.parentorder_id class="btn btn-xs pull-right" ng-if="addressCount <= 1" ng-click=openAddAddress()>ADD</a> <a type=button ng-hide="temp.parentorder_id || !address.otherAddress.length" class="btn btn-xs pull-right" ng-click=editServiceAddress()>EDIT</a> <a type=button ng-if="temppatient.demography.addresses.length <= 1" ng-hide=temp.parentorder_id class="btn btn-xs pull-right" ng-click=addingNewAddress()>ADD ADDRESS FROM EXISTING PATIENT</a></div><div class="list-group-item line-break" style="border: none;" ng-repeat="tempaddress in temppatient.demography.addresses track by $index" ng-if="tempaddress.servicedeliveryaddress == \'true\'" data-toggle=tooltip data-placement=top title="Click to select address" ng-click="checkServiceAddress(tempaddress, $index)" ng-class="(tempaddress.servicedeliveryaddress == \'true\')?\'active\':\'\'"><strong>{{tempaddress.title}}</strong> <span class=pull-right ng-hide=temp.parentorder_id></span><div>{{tempaddress.address2}}</div><div><b>Landmark:</b>{{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b>{{tempaddress.area_id.name}}</div></div></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromdate }"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=call.fromdate is-open=datePickerPopup.dp_fd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_fd\')" readonly ng-change="call.todate = call.fromdate;getTimeSlot()" ng-disabled=temp.parentorder_id> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd\')" ng-disabled=temp.parentorder_id><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-md-3 col-lg-3" ng-show=call.fromdate><button class="btn btn-sm btn-primary" style="padding: 5px 30px" ng-click=getTimeSlot() ng-disabled=temp.parentorder_id><span ng-if=call.fromtime>Selected Time: {{call.fromtime | waqt}}&nbsp;&nbsp;&nbsp;<i class="glyphicon glyphicon-pencil pointer"></i></span><span ng-if=!call.fromtime>Open time slot</span></button></div><div class="col-md-3 col-lg-3" ng-show="temppatient.allOrder.length && call.fromdate && call.fromtime"><button class="btn btn-sm btn-primary" ng-click=gitVisitHistory()>VISIT HISTORY</button></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id && call.fromdate && call.fromtime"><div class=col-sm-12><div class="form-group input-group typeaheadwidth"><span class=input-group-addon style="background: #ffd9bf;"><strong>Test</strong></span> <input type=text class=form-control style="border-top-right-radius: 5px;border-bottom-right-radius: 5px;" placeholder="Search test by name or code" ng-model=searchObj.servicename ng-model-options="{ debounce: 1500 }" ng-change=getAllServices(searchObj,type)><table ng-show=searchObj.servicename class="table searchtable"><tbody><tr ng-repeat="Service in ServiceList track by $index"><td ng-click=SelectService(Service) class=pointer><span>{{Service.name}}</span> <span><small>&nbsp; Rs. {{Service.price.mrp}}</small></span> <span>&nbsp;&nbsp;&nbsp;</span></td></tr></tbody></table></div></div></div><div class=row ng-show="call.services.length > 0"><div class=col-sm-12><div class="panel panel-default nopadding"><div class=panel-heading><small>Selected Test</small></div><table class="table table-striped table-bordered table-hover table-condensed"><thead><tr><th width=85%><small>Test Name</small></th><th width=15%><small>Amount</small></th></tr></thead><tbody><tr ng-repeat="service in call.services track by $index"><td style="cursor: pointer;"><a ng-click=showDeleteModel($index)><i class="glyphicon glyphicon-remove pointer"></i></a>&nbsp;&nbsp; <span><small class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}">{{service.service_id.name}}</small><small ng-click=addPPTest(service.service_id.postservices) style=color:blue;font-size:15px; ng-if=showPPAddButton(service.service_id)><sup>add pp / pg tests ( delete any one )</sup></small></span><p style=letter-spacing:0.5px><span ng-repeat="chieldTest in service.service_id.childs"><span style=color:#d35400;font-size:11px ng-if="chieldTest.test_id.category==\'TEST\'">{{chieldTest.test_id.name}}</span><u style=color:blue;font-size:11px class=pointer ng-if="chieldTest.test_id.category!=\'TEST\'" ng-click=showComponents(chieldTest.test_id)>{{chieldTest.test_id.name}}</u>{{$last?\'\':\',\'}}&nbsp;</span></p></td><td><small class=testview ng-class="{\'testColor\': !service.service_id.price.discountnotapplicable}"><span ng-if="(service.service_id.price.discountTestPrice || service.service_id.price.discountTestPrice==0) && existDiscountTestPer">Rs. {{service.service_id.price.discountTestPrice}}&nbsp;&nbsp;</span><span ng-class="{\'orignalprice\':(service.service_id.price.discountTestPrice || service.service_id.price.discountTestPrice==0) && existDiscountTestPer}">Rs. {{service.service_id.price.mrp}}</span></small></td></tr><tr><td><div class=pull-right>TEST CHARGE:</div></td><td><div>Rs. {{call.testamount | number:0}}</div></td></tr><tr ng-if=tDiscountName.length><td><div class=pull-right>Test Discount & Premium ( <b ng-repeat="name in tDiscountName"><span ng-class=setDiscountClass(name)>{{name.name}} : <span ng-if="name.discounttype == \'ruppee\'">RS.<span ng-if="name.discountrs < 0">{{name.discountrs * -1}}</span> <span ng-if="name.discountrs > 0">{{name.discountrs}}</span></span> <span ng-if="name.discounttype == \'percentage\' || name.discounttype == undefined"><span ng-if="name.discount < 0">{{name.discount * -1}}</span> <span ng-if="name.discount > 0">{{name.discount}}</span> %</span></span>{{$last?\'\':\' ; \'}}</b> ):</div></td><td><div>Rs. <span ng-if="discountAmountPer + discountAmountRs >= 0">{{discountAmountPer + discountAmountRs | number:0}}</span> <span ng-if="discountAmountPer + discountAmountRs < 0">{{(discountAmountPer + discountAmountRs) * -1 | number:0}}</span></div></td></tr><tr ng-if=tDiscountName.length><td><div class=pull-right>TEST CHARGES AFTER DISCOUNT & Premium:</div></td><td><div>Rs. {{call.testamount - discountAmountPer - discountAmountRs}}</div></td></tr><tr ng-if="temp.premiumchargesper!=0"><td><div class=pull-right>EXTRA CHARGE <b>({{temp.premiumchargesper}}%)</b>:</div></td><td><div>Rs. {{temp.premiumcharge | number:0}}</div></td></tr><tr><td><div class=pull-right>VISIT CHARGE:</div></td><td><div>Rs. {{finalVisitCharge | number:0}}</div></td></tr><tr ng-if=vDiscountName.length><td><div class=pull-right>Visit Discount & Premium ( <b ng-repeat="name in vDiscountName"><span ng-class=setDiscountClass(name)>{{name.name}} : <span ng-if="name.discounttype == \'ruppee\'">RS.<span ng-if="name.discountrs < 0">{{name.discountrs * -1}}</span> <span ng-if="name.discountrs > 0">{{name.discountrs}}</span></span> <span ng-if="name.discounttype == \'percentage\' || name.discounttype == undefined"><span ng-if="name.discount < 0">{{name.discount * -1}}</span> <span ng-if="name.discount > 0">{{name.discount}}</span> %</span></span>{{$last?\'\':\' ; \'}}</b>):</div></td><td><div>Rs. <span ng-if="vDiscountRs + vDiscountPer >= 0">{{vDiscountRs + vDiscountPer | number:0}}</span> <span ng-if="vDiscountRs + vDiscountPer < 0">{{(vDiscountRs + vDiscountPer) * -1 | number:0}}</span></div></td></tr><tr ng-if=call.paymentdetails.reportdeliverymode.length><td><div class=pull-right>Report delivery charges (<span ng-repeat="rn in call.paymentdetails.reportdeliverymode">{{rn.mode}}{{$last?\'\':\', \'}}</span>):</div></td><td><div>Rs. {{totalreportcharge | number:0}}</div></td></tr><tr><td><div class=pull-right><b>TOTAL:</b></div></td><td><div><b>Rs. {{finalVisitCharge + temp.premiumcharge + call.testamount - discountAmountRs - discountAmountPer - vDiscountRs - vDiscountPer + totalreportcharge | number:0}}</b></div></td></tr></tbody></table></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id && call.fromppdate"><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromppdate }"><span class=input-group-addon><strong>PP Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=call.fromppdate is-open=datePickerPopup.dp_ppp close-text=Close min-date=call.fromdate ng-click="openDatePicker($event,\'dp_ppp\')" readonly ng-change="getppWorkingHours(fromdatep = \'true\')"> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_ppp\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="col-md-3 col-lg-3" ng-show=call.fromppdate><button class="btn btn-sm" ng-class="{\'btn-primary\': call.frompptime, \'btn-danger\' : !call.frompptime}" style="padding: 5px 30px" ng-click=getppWorkingHours()><span ng-if=call.frompptime>Selected PP Time: {{call.frompptime | waqt}}&nbsp;&nbsp;&nbsp;<i class="glyphicon glyphicon-pencil pointer"></i></span><span ng-if=!call.frompptime>Open time slot</span></button></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id && call.services.length > 0 && temp.discounts.length"><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.discount }"><span class=input-group-addon><strong>DISCOUNTS & Premium</strong></span><select name=discount ng-model=call.discountobj class=form-control ng-options="discount as (discount | discountfilter) for discount in temp.discounts | orderBy:\'priority\'" ng-change=addDiscount(call.discountobj)><option ng-selected=true value>--SELECT DISCOUNTS & Premium--</option></select></div></div></div><div class=row ng-if="call.discount.length && call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="d in call.discount | orderBy:\'priority\'"><span style="display: inline-block; position:relative" ng-class=setDiscountArrayClass(d)>{{d.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeDiscount(d)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id && call.services.length > 0"><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Report delivery mode</strong></span><select name=paymentoption ng-model=display.reportdeliverymode class=form-control ng-options="po as po.mode for po in temp.reportdeliverymode | orderBy:\'mode\'" ng-change=addReportDelMode(display.reportdeliverymode)><option ng-selected=true value>--Report delivery mode--</option></select></div></div></div><div class=row ng-if="call.paymentdetails.reportdeliverymode.length && call.servicedeliveryaddress._id && call.patient._id && call.services.length > 0"><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="rn in call.paymentdetails.reportdeliverymode"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{rn.mode}} Rs.{{rn.charge}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeReportmode($index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.paymentoptions.length }"><span class=input-group-addon><strong>Payment options</strong></span><select name=paymentoption ng-model=display.paymentoption class=form-control ng-options="po.displayname as po.displayname for po in temp.paymentoptions | orderBy:\'displayname\'" ng-change=addPaymentOptions(display.paymentoption)><option ng-selected=true value>--Payment option--</option></select></div></div></div><div class=row ng-if="call.paymentoptions.length && call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="po in call.paymentoptions"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{po}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removePaymentOptions($index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>SPECIAL NEED</strong></span><select name=area ng-model=call.specialneed class=form-control ng-options="sp as sp.name for sp in specialneedList" ng-change=addMultipleSN(call.specialneed)><option ng-selected=true value>--SELECT SPECIAL NEED--</option></select></div></div></div><div class=row ng-if="call.specialNeedList.length && call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="alert alert-info" role=alert><span ng-repeat="SN in call.specialNeedList | orderBy: \'name\'"><span style="display: inline-block; position:relative" class=typeahead-available-text>{{SN.name}}&nbsp;<i class="glyphicon glyphicon-remove pointer" ng-click=removeSN(SN,$index)></i></span>&nbsp;&nbsp;</span></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.sampledrop }"><span class=input-group-addon><strong>SAMPLE DROP</strong></span><select name=sampledrop ng-model=call.sampledrop class=form-control ng-options="dp as dp.address for dp in temp.droppoints | orderBy:\'address\'"></select></div></div></div><div class=row ng-if="call.servicedeliveryaddress._id && call.patient._id"><div class="col-md-12 col-lg-12"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>COMMENT</strong></span> <textarea msd-elastic class="form-control input-sm" ng-model=call.remark></textarea></div></div></div><div class=row ng-show="call.servicedeliveryaddress._id && temppatient.demography.fullname && !temp.ppavailable && call.fromdate && call.fromtime"><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoptions.length || saveBtnDisable" ng-click="saveOrder(orderAction = \'saveExit\')">SAVE & EXIT</button></div><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoptions.length || saveBtnDisable" ng-click="saveOrder(orderAction = \'addPatient\')">SAVE & ADD PATIENT</button></div></div><div class=row ng-show="call.servicedeliveryaddress._id && temppatient.demography.fullname && temp.ppavailable && call.fromdate && call.fromtime && call.services.length > 0"><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoptions.length || !call.frompptime || saveBtnDisable" ng-click="saveOrder(orderAction = \'saveAddppexit\')">ADD PP VISIT & EXIT</button></div><div class=col-sm-6><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-disabled="callFrm.$invalid || !call.patient._id || !call.servicedeliveryaddress || !call.fromdate || (call.fromtime < -1) || !call.paymentoptions.length || !call.frompptime || saveBtnDisable" ng-click="saveOrder(orderAction = \'saveAddpp\')">ADD PP VISIT & ADD PATIENT</button></div></div></div><div ng-include="\'partials/mly/partner/call/slotsummary.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/gmapaddaddress.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/slot.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/patient.object.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/addressForOrder.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/list/call.otherarea.html\'"></div><div class="modal fade" id=delServiceModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header></div><div class=modal-body><div class=row><div class=col-lg-12><h4>Are you sure you want to delete ?</h4><div class=row><div class=col-md-12><div class="col pull-right"><a data-dismiss=modal ng-click=deleteService() class="btn btn-default">Yes</a> <a data-dismiss=modal ng-click=closedeletemodal() class="btn btn-primary">No</a></div></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=addressselection tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header style="height: 60px;"><div class=pull-right><button type=button ng-if=address.otherAddress.length ng-click=updatedServiceAdd() ng-disabled=address.selectaddress class="btn btn-primary" data-dismiss=modal>UPDATE</button> <button data-dismiss=modal class="btn btn-default">Close</button></div><h4 class=modal-title id=slotModalLabel>SELECT ADDRESS</h4></div><div class=modal-body><div class=row><div class=col-md-12><div class="list-group-item line-break" style="border: none;" ng-repeat="tempaddress in address.otherAddress" data-toggle=tooltip data-placement=top title="Click to select address" ng-click="checkServiceAddress(tempaddress, $index)" ng-class="(tempaddress.servicedeliveryaddress == \'true\')?\'active\':\'\'" ng-if=tempaddress.area_id.name><strong>{{tempaddress.title}}</strong> <span class=pull-right><span ng-click="editServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-pencil pointer"></i></span> &nbsp;&nbsp;</span><div>{{tempaddress.address2}}</div><div><b>Landmark:</b>{{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b>{{tempaddress.area_id.name}}</div></div></div></div><div class=row style=margin-top:10px><div class=col-md-6><center><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-click=openAddAddress() data-dismiss=modal>ADD NEW ADDRESS 5</button></center></div><div class=col-md-6><center><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-click=addingNewAddress() data-dismiss=modal>ADD ADDRESS FROM EXISTING PATIENT</button></center></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=ppslotModal tabindex=-1 role=dialog aria-labelledby=slotModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header style="height: 60px;"><button ng-if="!call.frompptime && !temp.ppavailable" style="margin-right:5px;margin-top: -7px;" data-dismiss=modal class="btn btn-default pull-right" ng-click="call.fromppdate = \'\'">Remove PP test and Close</button> <button ng-if="!call.frompptime && temp.ppavailable" style="margin-right:5px;margin-top: -7px;" data-dismiss=modal class="btn btn-default pull-right">Close</button> <button ng-if="call.frompptime && temp.ppavailable" style="margin-right:5px;margin-top: -7px;" data-dismiss=modal class="btn btn-default pull-right">Close</button><h4 class=modal-title id=slotModalLabel>SELECT PP TIME</h4></div><div class=modal-body><div class=row><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.fromppdate }"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=call.fromppdate is-open=datePickerPopup.dp_pp close-text=Close min-date=call.fromdate ng-click="openDatePicker($event,\'dp_pp\')" readonly ng-change="getppWorkingHours(fromdatep = \'true\')"> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_pp\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=table-responsive><table class="table table-bordered"><tbody style=background-color:white><tr ng-repeat="slottime in temp.timeppSlotss"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td style="padding-top: 5px;padding-bottom: 5px;"><div class="btn-group btn-group-sm" ng-repeat="slot in slottime.slots" style=margin-right:5px><button type=button class="btn dropdown-toggle" ng-class="{\'btn-danger\':!slot.available, \'btn-success\':slot.available, \'btn-warning\':slot.available == -1}" data-toggle=dropdown aria-haspopup=true aria-expanded=false ng-disabled=!slot.available><small ng-if="slot.available == true">{{slot.text}}</small> <span ng-if="!slot.available || slot.available == -1">{{slot.text | waqt}}</span> <span class=caret></span></button><ul class=dropdown-menu><li ng-repeat-start="subSlot in slottime.subSlots"><a ng-click=changeppTime(subSlot)><small>{{subSlot | waqt}}</small></a></li><li role=separator class=divider ng-repeat-end ng-if=!$last></li></ul></div></td></tr><tr ng-if=!temp.timeppSlotss.length><td>No slots</td></tr></tbody></table></div></div></div></div></div><script type=text/ng-template id=myPopoverTemplate.html><div class="btn btn-default" style ="display: block !important; margin-bottom:3px !important"ng-repeat="timeslot in temp.timeSlotss" ng-click="changeTime(timeslot.time)" ng-if = "timeslot.time >= cutOffTimeForSelectedTimeSlot" type="button" id="popoverbtn"> {{timeslot.time | waqt}} </div></script><div class="modal fade" id=addnewpatientmodal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false title=Delete><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header style=height:60px><button class="btn btn-default pull-right" style=margin:5px ng-click=addGmapPatient() ng-disabled="!newpatient.salutation || !newpatient.firstname || !newpatient.lastname || !newpatient.gender || !newpatient.dob || !newpatient.age || !newpatient.agetype || !newpatient.mobilenumber || !address.area || !address.sublocation || !address.pincode || !address.landmark || !address.addresstype || !temp.validEmail || patientFrm.$invalid" ng-if=!temp.parentorder_id>ADD PATIENT</button> <button class="btn btn-default pull-right" style=margin:5px ng-click=addGmapChildPatient() ng-disabled="!newpatient.salutation || !newpatient.firstname || !newpatient.lastname || !newpatient.gender || !newpatient.dob || !newpatient.age || !newpatient.agetype || !newpatient.mobilenumber || !temp.validEmail || patientFrm.$invalid" ng-if=temp.parentorder_id>ADD PATIENT</button> <button class="btn btn-default pull-right" style=margin:5px data-dismiss=modal ng-click=closeNewPatientmodal()>Cancel</button><h4 class=modal-title id=slotModalLabel>NEW PATIENT</h4></div><div class=modal-body><div class=row><div class=col-md-12><form name=patientFrm><ng-demography newpatient=newpatient temp=temp></ng-demography></form><center ng-if=!temp.parentorder_id><div style="margin-bottom: 20px;margin-top: 7px;"><button type=button class="btn btn-primary" ng-class="(addAddressButtonCheck==false )?\'setActice\':\'setDeactice\'" ng-click=openAddAddressCheck()>ADD NEW ADDRESS</button> <button type=button class="btn btn-primary" ng-class="(gampAddressCheck==false)?\'setDeactice\':\'setActice\'" ng-hide=!call.partner_id ng-click=newPatientAddressFromExistingPateint()>ADD ADDRESS FROM EXISTING PATIENT</button></div></center><span ng-if="showMapCheck && !temp.parentorder_id && !gmapshowhideCheck"><ng-gmap-address address=address area-list=areaList></ng-gmap-address></span><div class=row ng-if=gmapshowhideCheck style="box-shadow: 0 -1px 3px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);"><div class=col-md-12><div class=row style="padding-top: 10px;"><h4 class="modal-title pull-left" style="margin-left: 17px;">Add address</h4><button style=margin-right:14px; type=button class="btn btn-primary pull-right" ng-disabled=!address.newAddressArray._id ng-click=saveNewAddresstoGmap()>Add</button></div><div class=row><div class=col-md-10><div class=col-md-9 style="padding-left: 0px;"><div class="input-group input-group-sm pull-right plcholderstyle"><span class=input-group-addon><strong>Existing Patient</strong></span> <input placeholder="first name (min. 3)" ng-model=searchExistingPatientObj.firstname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientfromExisting() style="width: 40%;" type=text ng-minlength=3> <input placeholder="middle name" ng-model=searchExistingPatientObj.middlename class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientfromExisting() style="width: 30%;" type=text ng-minlength=1> <input placeholder=surname ng-model=searchExistingPatientObj.lastname class=form-control ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientfromExisting() style="width: 30%;" type=text ng-minlength=1></div></div><div class="col-md-3 plcholderstyle" style="padding-left: 0px;padding-right: 0px;"><input type=text style="margin-bottom: 0px;" ng-model=searchExistingPatientObj.searchText ng-model-options="{ debounce: 1500 }" ng-change=SearchPatientfromExisting() placeholder="UHID / MOB NO / ALT NO" class="form-group form-control input-sm"></div><table class="table table-responsive searchtable" style=width:100%;position:inherit><tbody><tr ng-repeat="Patient in newPatientList"><td ng-click=selectNewPatientData(Patient) class=pointer><span ng-if=Patient.externalId>UHID: {{Patient.externalId}},&nbsp;</span> {{Patient.demography.salutation}}&nbsp;{{Patient.demography.fullname}}, <span ng-if=Patient.clientcode><span class="label label-success">{{Patient.clientcode}}</span></span>&nbsp; <span>{{Patient.demography.age}} {{Patient.demography.agetype}}, {{Patient.demography.gender}}, <i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span> <span ng-repeat="altNo in Patient.demography.altnumber">,{{altNo}}</span></td></tr></tbody></table></div><div class=col-md-2 style="padding-left: 0px;padding-right: 0px;" ng-if="searchExistingPatientObj.lastname || searchExistingPatientObj.firstname || searchExistingPatientObj.middlename || searchExistingPatientObj.searchText"><a href=# class="btn btn-sm btn-link" ng-click=clearSearchDataFromExisting() style=color:black;><b>clear data</b></a></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;"><strong><i class="glyphicon glyphicon-user">&nbsp;</i>{{existingPatient.demography.salutation}}&nbsp; {{existingPatient.demography.fullname}},</strong> <span class=badge ng-if=existingPatient.externalId><strong>UHID:</strong>{{existingPatient.externalId}}&nbsp;</span> <span>{{existingPatient.demography.age}} {{existingPatient.demography.agetype}}, {{existingPatient.demography.gender}}, <strong><i class="glyphicon glyphicon-phone"></i></strong> {{existingPatient.demography.mobilenumber}}</span> <span ng-repeat="altNo in existingPatient.demography.altnumber">,{{altNo}}</span></div></div></div></div><div class=row><div class=col-md-12 ng-if=existingPatient.demography.fullname><div class="panel panel-default"><div class="list-group-item line-break" style="border: none;border-bottom: 2px solid #b3aeae;" ng-repeat="tempaddress in addressArray track by $index" ng-if=existingPatient.demography.addresses.length ng-click=selectedAddressCheckpoint(tempaddress,$index) ng-class="(tempaddress.servicedeliveryaddress == true)?\'setAddColor\':\'\'"><div><strong>{{tempaddress.title}}</strong><br>{{tempaddress.address2}}<br><div><b>Landmark:</b> {{tempaddress.landmark}}</div><div style=margin-top:3px ng-if=tempaddress.area_id.name><b>Slot Area:</b> {{tempaddress.area_id.name}}</div></div></div><div ng-if=!existingPatient.demography.addresses.length><span><center style=color:red;>NO ADDRESS AVAILABLE</center></span></div></div></div></div></div></div></div></div></div></div></div></div><div class="modal fade" id=patientNotAvailable tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>PATIENT NOT AVAILABLE</h4><button data-dismiss=modal style=width:160px class="btn btn-primary" ng-click=newPatient()>Add New Patient</button> <button data-dismiss=modal style=width:130px class="btn btn-default">Cancel</button></center></div></div></div></div></div></div><div class="modal fade" id=testNotAvailable tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>TEST NOT AVAILABLE</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=testalreadyadded tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>SELECTED TEST IS ALREADY ADDED</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=profilealreadyadded tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>SELECTED TEST IS ALREADY ADDED IN PROFILE</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=packagealreadyadded tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>SELECTED TEST IS ALREADY ADDED IN PACKAGE</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=callCreated tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>CALL CREATED</h4><button ng-click=callcreated() style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=addpatientcallCreated tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>CALL CREATED</h4><h4>Are you sure you want to add a new patient to the same address?</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal ng-click=callcreated() style=width:130px class="btn btn-primary">No</button></center></div></div></div></div></div></div><div class="modal fade" id=factoryprofilemodal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4>{{showMessage}}</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=addffServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="coveredPPTestPopupText | sanitize">{{coveredPPTestPopupText}}</h4><button data-dismiss=modal style=width:130px class="btn btn-primary">OK</button></center></div></div></div></div></div></div><div class="modal fade" id=addPPServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="coveredTestPPPopupText | sanitize">{{coveredTestPPPopupText}}</h4><button data-dismiss=modal ng-click=goToPPTestAdd() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addPPElseServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="coveredTestElsePPPopupText | sanitize">{{coveredTestElsePPPopupText}}</h4><button data-dismiss=modal ng-click=getppWorkingHours() style=width:130px class="btn btn-primary">OK</button></center></div></div></div></div></div></div><div class="modal fade" id=addPPtwoServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addPPtwoServiceConformation | sanitize">{{addPPtwoServiceConformation}}</h4><button data-dismiss=modal ng-click=openSecondpopup() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addPPtwothreeServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addPPtwothreeServiceConformation | sanitize">{{addPPtwothreeServiceConformation}}</h4><button data-dismiss=modal ng-click=getppWorkingHours() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addServiceConformation | sanitize">{{addServiceConformation}}</h4><button data-dismiss=modal ng-click=replaceServices() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addftwoServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addftwoServiceConformation | sanitize">{{addftwoServiceConformation}}</h4><button data-dismiss=modal ng-click=openFSecondpopup() style=width:130px class="btn btn-primary">Yes</button> <button data-dismiss=modal style=width:130px class="btn btn-default">No</button></center></div></div></div></div></div></div><div class="modal fade" id=addftwothreeServiceConformation tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><center><h4 ng-bind-html="addftwothreeServiceConformation | sanitize">{{addftwothreeServiceConformation}}</h4><button data-dismiss=modal ng-click=replaceServices() style=width:130px class="btn btn-primary">Ok</button></center></div></div></div></div></div></div><div class="modal fade" id=visitHistory tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header style=height:60px><button class="btn btn-default pull-right" style=margin:5px data-dismiss=modal>Cancel</button> <button class="btn btn-primary pull-right" style=margin:5px data-dismiss=modal ng-disabled=!oneCheckOrder ng-click=coyTestModal()>copy tests</button><h4 class=modal-title>Visit History</h4></div><div class=modal-body style=padding-top:0px;padding-bottom:0px><div ng-include="\'partials/client/patientVisitHistory.html\'"></div></div></div></div></div><div ng-include="\'partials/client/copyTestMsg.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/addingNewAddaddressFromExisting.modal.html\'"></div><div ng-include="\'partials/mly/partner/call/acceptingAddNewAddress.modal.html\'"></div><div class="modal fade" id=reportdelivery tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;z-index: 1052;" data-backdrop=static data-keyboard=false title=Alert><div class=modal-dialog><div class=modal-content><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><h4><center>you can select only one hardcopy.</center></h4><div><center><button style=width:130px data-dismiss=modal aria-label=Close class="btn btn-primary">Cancel</button></center></div></div></div></div></div></div></div><div ng-include="\'partials/partner/test/modal/testComponent.modal.html\'"></div>'),e.put("partials/mly/partner/call/gmapaddaddress.modal.html",'<div class="modal fade" id=gmapaddaddress tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header>SEARCH AREA <button data-dismiss=modal aria-label=Close class="btn btn-default pull-right" ng-click=clearData()>CANCEL</button></div><div class=modal-body><div class=row><span ng-if=editgmapcheck><ng-gmap-address address=address order=order area-list=areaList></ng-gmap-address></span><div class=row><div class=col-md-12><button type=button class="btn btn-sm btn-warning btn-lg btn-block" ng-click=addGmapAddress() ng-disabled="!address.pincode || !address.addresstype || !address.landmark || !address.landmark || !address.area">SAVE & EXIT</button></div></div></div></div></div></div></div>'),e.put("partials/mly/partner/call/patient.object.modal.html",'<div class="modal fade" id=AddPatientObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=clearPatient() class="btn btn-default pull-right">Cancel</button> <button ng-if="!patient._id && !temp.parentorder_id" type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="(patientFrm.$invalid || addressFrm.$invalid || !addaddress.sublocation_id || !temp.validEmail)"><span>Save and continue</span></button> <button ng-if="!patient._id && temp.parentorder_id" type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="(patientFrm.$invalid || addressFrm.$invalid || !temp.validEmail)"><span>Save and continue</span></button> <button ng-if="patient._id && !temp.showonlypatientupdate && !temp.fromAddPatient" type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="(patientFrm.$invalid || addressFrm.$invalid || !addaddress.sublocation_id || !temp.validEmail)"><span>Update and continue</span></button> <button ng-if="patient._id && temp.showonlypatientupdate" type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="(patientFrm.$invalid) || !temp.validEmail"><span>Update and continue</span></button> <button ng-if="patient._id && temp.fromAddPatient" type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="patientFrm.$invalid || !patient.demography.salutation || !patient.demography.firstname || !patient.demography.lastname || !patient.demography.gender || !patient.demography.dob || !patient.demography.age || !patient.demography.agetype || !patient.demography.mobilenumber || !temp.validEmail"><span>Update and continue</span></button><h4 class=modal-title id=myModalLabel ng-show=!patient._id>Add Patient</h4><h4 class=modal-title id=myModalLabel ng-show=patient._id>Update Patient</h4></div><div class=modal-body style="padding-top: 0px;padding-bottom: 0px;"><div ng-form=patientFrm><div class=panel-body><div ng-include src="\'partials/mly/partner/client/client-include-add.html\'"></div></div></div></div></div></div></div>'),e.put("partials/mly/partner/call/patientAddress.html",'<div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.title.$invalid }"><span class=input-group-addon><strong>Address Type</strong></span><select name=title ng-model=addaddress.title class=form-control ng-options="title.displayname as title.displayname for title in AddressType.childs" ng-init=AddressType.childs[0] required><option value>--Select Address Type--</option></select></div></div></div><div class=row><div class=col-md-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !addaddress.city_id._id }"><span class=input-group-addon><strong>City</strong></span> <input type=text class=form-control ng-model=addaddress.city_id.name readonly></div></div></div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !addaddress.sublocation_id}"><span class=input-group-addon><strong>Sub location</strong></span><tags-input ng-model=temp.sublocation_id display-property=name on-tag-added=changesublocation(addaddress.sublocation_id) placeholder="Sub location" add-from-autocomplete-only=true on-tag-removed=tagRemoved($tag)><auto-complete source=loadSublocation($query) debounce-delay=1000 max-results-to-show=10></auto-complete></tags-input></div></div></div><div class=row><div class=col-md-4><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.addpincode.$invalid }"><span class=input-group-addon><strong>Pincode</strong></span> <input type=text class=form-control ng-model=addaddress.pincode readonly></div></div><div class=col-md-4><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.wing.$invalid }"><span class=input-group-addon><strong>Wing</strong></span> <input name=wing type=text placeholder class=form-control ng-model=addaddress.wing></div></div><div class=col-md-4><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.flatno.$invalid }"><span class=input-group-addon><strong>Flat No.</strong></span> <input name=flatno type=text placeholder class=form-control ng-model=addaddress.flatno></div></div><div class=col-md-4><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>FLOOR NO.</strong></span> <input name=floorno type=text placeholder class=form-control minlength=3 maxlength=3 onkeypress="if ( isNaN( String.fromCharCode(event.keyCode) )) return false;" ng-model=addaddress.floor></div></div><div class=col-md-4><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.plotno.$invalid }"><span class=input-group-addon><strong>Plot No.</strong></span> <input name=plotno type=text placeholder class=form-control ng-model=addaddress.plotno></div></div><div class=col-md-4><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.sectorno.$invalid }"><span class=input-group-addon><strong>Sector No.</strong></span> <input name=sectorno type=ttext placeholder class=form-control ng-model=addaddress.sectorno></div></div></div><div class=row><div class=col-md-6><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.building.$invalid }"><span class=input-group-addon><strong>BUILDING / BUNGALOW</strong></span> <input name=building type=text placeholder="Building / Bunglow Name" class=form-control ng-model=addaddress.building required></div></div><div class=col-md-6><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Street</strong></span><input id=Autocomplete class=form-control name=streetname type=text placeholder="Street Name" ng-model=addaddress.streetname></div></div></div><div class=row><div class=col-md-12><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.landmark.$invalid }" style="margin-bottom: 0px;"><span class=input-group-addon><strong>Landmark</strong></span> <input name=landmark type=text placeholder=Landmark class=form-control ng-model=addaddress.landmark required></div></div></div>'),e.put("partials/mly/partner/call/slot.modal.html",'<div class="modal fade" id=slotModal tabindex=-1 role=dialog aria-labelledby=slotModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" data-dismiss=modal class="btn btn-default pull-right">Close</button><h4 class=modal-title id=slotModalLabel>Slots</h4></div><div class=modal-body><div class=row><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=call.fromdate is-open=datePickerPopup.dp_pfd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_pfd\')" readonly ng-change="call.todate = call.fromdate;getTimeSlot()" ng-disabled=temp.parentorder_id> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_pfd\')" ng-disabled=temp.parentorder_id><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=table-responsive><table class="table table-bordered"><tbody style=background-color:white><tr ng-repeat="slottime in temp.timeSlots"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td style="padding-top: 5px;padding-bottom: 5px;"><div class="btn-group btn-group-sm" ng-repeat="slot in slottime.slots" style=margin-right:5px><button type=button class="btn dropdown-toggle" ng-class="{\'btn-danger\':!slot.available, \'btn-success\':slot.available, \'btn-warning\':slot.available == -1}" data-toggle=dropdown aria-haspopup=true aria-expanded=false ng-disabled=!slot.available><small ng-if="slot.available == true">{{slot.text}}</small> <span ng-if="!slot.available || slot.available == -1">{{slot.text | waqt}}</span> <span class=caret></span></button><ul class=dropdown-menu><li ng-repeat-start="subSlot in slottime.subSlots"><a ng-click=changeTime(subSlot)><small>{{subSlot | waqt}}</small></a></li><li role=separator class=divider ng-repeat-end ng-if=!$last></li></ul></div></td></tr><tr ng-if=!temp.timeSlots.length><td>No slots</td></tr></tbody></table></div></div></div></div></div>'),e.put("partials/mly/partner/call/slotsummary.modal.html",'<div class="modal fade" id=slotsummary tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header>Slot Summary <button data-dismiss=modal aria-label=Close class="btn btn-default pull-right" ng-click=clearValue()>CANCEL</button> <button class="btn btn-primary pull-right" ng-click=refreshSlotSummary() style=margin-right:10px>Refresh</button> <span class=pull-right style=margin-right:10px ng-if=temp.currentTime>Last Refreshed Time : {{temp.currentTime}}</span></div><div class=modal-body><div class=row><div class=col-sm-12><div class="input-group input-group-sm form-group"><span class=input-group-addon><strong>Area</strong></span><select name=area ng-model=temp.summaryArea_id class=form-control ng-options="al.area_id._id as al.area_id.name for al in areaList | orderBy:\'area_id.name\'" ng-change=getSummaryTimeSlot()><option ng-selected=true value>--SELECT Area--</option></select></div></div></div><div class=row><div class="col-md-6 col-lg-6"><div class="form-group input-group input-group-sm"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=temp.summaryfromdate is-open=datePickerPopup.dp_sfd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_sfd\')" readonly ng-change=getSummaryTimeSlot()> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_sfd\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=table-responsive><table class="table table-bordered"><tbody style=background-color:white><tr ng-repeat="slottime in temp.summarytimeSlots"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td style="padding-top: 5px;padding-bottom: 5px;"><div class="btn-group btn-group-sm" ng-repeat="slot in slottime.slots" style=margin-right:5px><button type=button class="btn dropdown-toggle" ng-class="{\'btn-danger\':!slot.available, \'btn-success\':slot.available, \'btn-warning\':slot.available == -1}" data-toggle=dropdown aria-haspopup=true aria-expanded=false ng-disabled=!slot.available><small ng-if="slot.available == true">{{slot.text}}</small> <span ng-if="!slot.available || slot.available == -1">{{slot.text | waqt}}</span> <span class=caret></span></button><ul class=dropdown-menu><li ng-repeat-start="subSlot in slottime.subSlots"><a><small>{{subSlot | waqt}}</small></a></li><li role=separator class=divider ng-repeat-end ng-if=!$last></li></ul></div></td></tr><tr ng-if=!temp.summarytimeSlots.length><td>No slots</td></tr></tbody></table></div></div></div></div></div>'),e.put("partials/mly/partner/servicerequest/servicerequest-include.html",'<div class=row ng-if=call.partner_id><div class=col-sm-12><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !data.area_id._id }"><span class=input-group-addon><strong>Area</strong></span><select name=area ng-options="area as area.area_id.name for area in AreaList track by area._id" ng-model=temparea class=form-control ng-change=SelectArea(temparea)><option value>--Select area--</option></select></div></div></div><div class=row><div class=col-md-6 ng-if=data.area_id._id><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !data.fromdate }"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=data.fromdate is-open=datePickerPopup.dp_fd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_fd\')" readonly ng-change="data.todate = data.fromdate;getWorkingHours();"> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_fd\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div><div class=row><div class=col-sm-12><div class=table-responsive ng-if="data.fromdate && orderList"><table class="table table-striped table-bordered table-hover"><tbody><tr><td><table class="table table-striped table-bordered table-hover"><tr ng-repeat="slottime in temp.timeSlots"><td ng-if=slottime.time>{{slottime.time | waqt}}</td><td ng-if="slottime.time == slot.time" ng-repeat="slot in slots"><span ng-if="slottime.time == slot.time" ng-value="slotdaylength = slot[lowerfromday]"><span ng-repeat="l in returnArray track by $index"><button type=button ng-if="l.time == slot.time" class="btn btn-sm" ng-class="(l.orderexist)?\'btn-default\':\'btn-success\'" ng-click=openBookAppointment(slot,l);><span ng-if=!l.orderexist>Available</span> <span ng-if=l.orderexist>Booked</span></button></span></span></td></tr></table></td></tr></tbody></table></div></div></div><div class="modal fade" id=AddPatientObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=clearPatient() class="btn btn-default pull-right">Cancel</button> <button ng-show=!patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="(patientFrm.$invalid || !patient.demography.addresses.length)"><span>Save and continue</span></button> <button ng-show=patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled="patientFrm.$invalid || !patient.demography.addresses.length"><span>Update and continue</span></button><h4 class=modal-title id=myModalLabel ng-show=!patient._id>Add Patient</h4><h4 class=modal-title id=myModalLabel ng-show=patient._id>Update Patient</h4></div><div class=modal-body><div ng-form=patientFrm><div class=panel-body ng-controller=clientController><div ng-include src="\'partials/client/client-include-add.html\'" data-ng-init=edit()></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=AddressObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAddAddress() class="btn btn-default pull-right">Close</button><h4 class=modal-title id=myModalLabel>Add/Select address</h4></div><div class=modal-body><div class="panel panel-default"><div class=panel-heading><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span> <button type=button style=margin-right:5px; ng-click=addAddress() class="btn btn-xs btn-primary pull-right" ng-disabled=!addressFrmValid><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></button></div><div class=panel-body><div ng-form=addressFrm><span ng-hide=true>{{addressFrmValid = addressFrm.$valid}}</span><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.title.$invalid }"><span class=input-group-addon><strong>Address Type</strong></span><select name=title ng-model=addaddress.title class=form-control ng-options="title.displayname as title.displayname for title in AddressType.childs" required><option value>--Select Address Type--</option></select></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.pincode.$invalid }"><span class=input-group-addon><strong>Pincode</strong></span><select name=pincode ng-model=addaddress.pincode class=form-control ng-options="pincode as pincode for pincode in pincodes" required><option value>--Select Pincode--</option></select></div></div></div><div class=row><div class=col-md-12 style=padding-right:5px; ng-class="{ \'has-error\':addressFrm.addresslineone.$invalid }"><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>Address</strong></span> <textarea msd-elastic row=3 type=text autofocus placeholder=Address name=addresslineone class="form-control input-sm" ng-model=addaddress.address required></textarea></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.landmark.$invalid }"><span class=input-group-addon><strong>Landmark</strong></span> <input name=landmark type=text placeholder=Landmark class=form-control ng-model=addaddress.landmark required></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.sublocation.$invalid }"><span class=input-group-addon><strong>Sub location</strong></span><select name=sublocation ng-model=addaddress.sublocation_id class=form-control ng-options="sublocation as sublocation.name for sublocation in subLocationList track by sublocation._id" ng-change=changesublocation()><option value>--Select Sub location--</option></select></div></div></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=bookAppointmentObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none; overflow: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAppointment() class="btn btn-default pull-right">Cancel</button><button ng-show="whenServiceRequest && !call._id" style="margin-right:5px;margin-top: -7px;" type=button class="btn btn-default pull-right" ng-disabled="callFrm.$invalid || !data.patient._id || !data.services.length || !data.fromdate || (data.fromtime < -1)" ng-click=openPreview()><span ng-hide=call._id>Save call and request</span></button><h4 class=modal-title id=myModalLabel>Book Appointment</h4></div><div class=modal-body><div class=row><div class=col-sm-12><div class=row ng-if="data.fromtime >= 0"><div class=col-sm-10 ng-hide=data._id><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !patient._id }"><span class=input-group-addon><strong>Existing Client</strong></span> <input id=search-input type=text ng-model=searchObj.searchText ng-model-options="{ debounce: 300 }" placeholder="Search by name, mobile no, membership no." class=form-control><table class="table table-responsive searchtable"><tbody><tr ng-repeat="Patient in PatientList"><td ng-click=SelectPatient(Patient) class=pointer>{{Patient.demography.fullname}} <span ng-show=Patient.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span>&nbsp; <span>{{Patient.demography.age}}, {{Patient.demography.gender}}, {{Patient.demography.servicedeliveryaddress.branch_id.name}}</span> <span><i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span></td></tr></tbody></table><span class="input-group-addon pointer" ng-click=SearchPatientByName()><i class="glyphicon glyphicon-search"></i> Search</span></div></div><div class=col-sm-2 ng-hide=data._id><button type=button class="btn btn-sm btn-primary" ng-click=newPatient()><i class="glyphicon glyphicon-plus"></i> New Client</button></div></div><div class="row form-group" ng-show=temppatient._id><div class=col-md-6><p><span ng-if=temppatient.demography.fullname><i class="glyphicon glyphicon-user"></i> <strong>{{temppatient.demography.fullname}}</strong></span> <span ng-show=temppatient.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span> <span ng-if=temppatient.demography.age><strong>{{temppatient.demography.age}} &nbsp;</strong></span> <span ng-if=temppatient.demography.gender><strong>{{temppatient.demography.gender}}</strong></span> <button ng-hide=data._id type=button class="btn btn-xs btn-default" ng-click=editPatient(temppatient)><i class="glyphicon glyphicon-pencil"></i></button></p><p ng-if=temppatient.demography.mobilenumber><span><i class="glyphicon glyphicon-phone"></i></span> <strong>{{temppatient.demography.mobilenumber}}</strong></p><p><strong ng-if=temppatient.demography.servicedeliveryaddress.branch_id.name>{{temppatient.demography.servicedeliveryaddress.branch_id.name}}</strong></p></div></div><div class="row form-group" ng-if=temppatient.demography.addresses.length><div class=col-md-12><button type=button class="btn btn-primary btn-xs" ng-click=openAddAddress()>Add Address</button></div></div><div class=row><div class=col-md-12><div class=row><div class=col-md-12><div class=form-group style="overflow-x:scroll;display: flex;" ng-if=temppatient.demography.addresses.length><span ng-repeat="tempaddress in temppatient.demography.addresses track by $index" style="display: inline;padding-left: 20px;"><div class=panel ng-class="(tempaddress.servicedeliveryaddress == \'true\')?\'panel-info\':\'panel-default\'" style=width:300px;><div class="panel-heading panel-info"><h3 class=panel-title>{{tempaddress.title}} <span ng-if="tempaddress.servicedeliveryaddress == \'true\'"><i class="glyphicon glyphicon-ok pull-right"></i></span></h3></div><div class=panel-body><div style="word-wrap: break-word;"><span><span ng-if=tempaddress.address><span class=angular-with-newlines>{{tempaddress.address}}</span><br></span> <strong ng-if=tempaddress.area_id>{{tempaddress.area_id.name}},<br></strong> <strong ng-if=tempaddress.sublocation_id>{{tempaddress.sublocation_id.name}},<br></strong> <span ng-if=tempaddress.landmark><strong>{{tempaddress.landmark}},<br></strong></span> <span ng-if=tempaddress.city_id>{{tempaddress.city_id.name}}</span> <span ng-if=tempaddress.pincode>- {{tempaddress.pincode}}</span></span></div></div><div class=panel-footer><button type=button class="btn btn-default btn-xs" ng-click="checkServiceAddress(tempaddress, $index)" ng-disabled="tempaddress.servicedeliveryaddress == \'true\'">Select</button> <span class=pull-right><span ng-click="editServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-pencil"></i></span> &nbsp;&nbsp; <span ng-click="deleteServiceAddress(tempaddress, $index)"><i class="glyphicon glyphicon-trash"></i></span> &nbsp;&nbsp;</span></div></div></span></div></div></div></div></div><div class=row><div class=col-md-12 ng-show="patient._id && !patient.demography.deceased"><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>Remarks</strong></span> <textarea msd-elastic name=comment ng-model=data.comment placeholder="Enter remarks" class="form-control input-sm"></textarea></div></div></div><div class=row><div class=col-md-6><div class=row ng-show="patient._id && !patient.demography.deceased"><div ng-hide=data._id><div class=col-sm-12><div class="form-group input-group input-group-sm" ng-init="type=\'service\'"><label class=radio-inline><input type=radio name=typeradio value=service ng-model=type>Services/Tests</label></div><div ng-show="type==\'service\' || type==\'lab\'" class="form-group input-group input-group-sm typeaheadwidth"><span class=input-group-addon><strong>Service/Test</strong></span><script type=text/ng-template id=customService.html><div > <span style="white-space: normal;" > <div class="typeahead-available-text"> <div bind-html-unsafe="match.label | typeaheadHighlight:query"></div> <div>Rs. {{match.model.price.mrp}}</div> <div ng-if="match.model.alias.length > 0">also known as : </div> <div style="display: inline-block; position:relative" ng-repeat="a in match.model.alias"> {{a}} </div> </div> </span> </div></script><input type=text ng-model=searchObj.servicename placeholder="Service Name" typeahead="service as service.name for service in getAllServices($viewValue,searchObj,type)" typeahead-loading=loadingStaffs class="form-control input-sm" typeahead-template-url=customService.html typeahead-on-select=SelectService(searchObj.servicename)> <i ng-show=loadingStaffs class="glyphicon glyphicon-refresh"></i></div></div></div></div><div class=row ng-show="data.services.length > 0"><div class=col-sm-12><div class="panel panel-default nopadding"><div class=panel-heading>Services</div><table class="table table-striped table-bordered table-hover"><thead><tr><th>Name</th><th>Amount</th><th ng-hide=data._id></th></tr></thead><tbody><tr ng-repeat="service in data.services track by $index"><td class=pointer><span>{{service.service_id.name}}</span></td><td>{{service.service_id.price.mrp}}</td><td ng-hide=data._id><a ng-click=showDeleteModel($index)><i class="glyphicon glyphicon-remove"></i></a></td></tr></tbody></table></div></div></div></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=AddressObjectViewForOrder tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;overflow-y: scroll;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAddAddressForOrder() class="btn btn-default pull-right">Close</button><h4 class=modal-title id=myModalLabel><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></h4></div><div class=modal-body><div class="panel panel-default"><div class=panel-heading><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span> <button type=button style=margin-right:5px; ng-click=addAddressForOrder() class="btn btn-xs btn-primary pull-right" ng-disabled=!addressFrmValid><span ng-if=!editAdd>Add address</span> <span ng-if=editAdd>Update address</span></button></div><div class=panel-body><div ng-form=addressFrm><span ng-hide=true>{{addressFrmValid = addressFrm.$valid}}</span><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.title.$invalid }"><span class=input-group-addon><strong>Address Type</strong></span><select name=title ng-model=addaddress.title class=form-control ng-options="title.displayname as title.displayname for title in AddressType.childs" required><option value>--Select Address Type--</option></select></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.addpincode.$invalid }"><span class=input-group-addon><strong>Pincode</strong></span><select name=addpincode ng-model=addaddress.pincode class=form-control ng-options="pincode as pincode for pincode in pincodes" required><option value>--Select Pincode--</option></select></div></div></div><div class=row><div class=col-md-12 style=padding-right:5px; ng-class="{ \'has-error\':addressFrm.addresslineone.$invalid }"><div class="form-group input-group"><span class="input-group-addon input-sm"><strong>Address</strong></span> <textarea msd-elastic type=text autofocus placeholder=Address name=addresslineone class="form-control input-sm" ng-model=addaddress.address required></textarea></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.landmark.$invalid }"><span class=input-group-addon><strong>Landmark</strong></span> <input name=landmark type=text placeholder=Landmark class=form-control ng-model=addaddress.landmark required></div></div></div><div class=row><div class=col-md-6 style=padding-right:5px;><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': addressFrm.sublocation.$invalid }"><span class=input-group-addon><strong>Sub location</strong></span><select name=sublocation ng-model=addaddress.sublocation_id class=form-control ng-options="sublocation as sublocation.name for sublocation in subLocationList track by sublocation._id" ng-change=changesublocation()><option value>--Select Sub location--</option></select></div></div></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=myModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header></div><div class=modal-body><div class=row><div class=col-lg-12><h3>Are you sure you want to delete ?</h3><div class=row><div class=col-md-12><div class="col pull-right"><a data-dismiss=modal ng-click=deleteService() class="btn btn-default">Yes</a> <a data-dismiss=modal ng-click=closedeletemodal() class="btn btn-primary">No</a></div></div></div></div></div></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=mapObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeMap() class="btn btn-default pull-right">Close</button><h4 class=modal-title id=myModalLabel>Map</h4></div><div class=modal-body><map zoom=11 center="[40.74, -74.18]"><marker position="[40.73, -74.19]" title="drag me" draggable></marker></map></div><div class=modal-footer></div></div></div></div><div class="modal fade" id=mapAddressObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeMapAddress() class="btn btn-default pull-right">Close</button><h4 class=modal-title id=myModalLabel>Map</h4></div><div class=modal-body><map zoom=11 center="[40.74, -74.18]"><marker position="[40.73, -74.19]" title="drag me" draggable></marker></map></div><div class=modal-footer></div></div></div></div>'),e.put("partials/mly/partner/servicerequest/servicerequest.html",'<div class="row panelmainDiv"><div class="col-sm-12 panelheaderDiv"><div class=pull-right></div><div class=pull-right style=margin-right:5px;><input type=text ng-model-options="{ debounce: 300 }" ng-model=searchObj.searchText class="form-control input-sm" placeholder=Search ng-change=getUserPatients()></div><h4>Service Request</h4></div></div><div class=row><div class="col-md-12 panelbodyDiv" data-ng-init=getUserPatients()><div class="panel panel-default"><div class=panel-body><div class=row><div class=col-md-4><div class="input-group form-group"><span class=input-group-addon><strong>Date</strong></span> <input type=text class="form-control input-sm" datepicker-popup ng-model=searchObj.searchDate is-open=datePickerPopup.dp_searchDate close-text=Close ng-change=getUserPatients() ng-click="openDatePicker($event,\'dp_searchDate\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_searchDate\')"><i class="glyphicon glyphicon-calendar"></i></button></span> <span class=input-group-btn><button class="btn btn-default btn-sm" ng-click=getUserPatients() type=button><i class="glyphicon glyphicon-search"></i></button></span></div></div><div class=col-md-8><div class=form-group><button class="btn btn-default btn-sm" ng-click=previousDate() type=button><i class="glyphicon glyphicon-chevron-left" style=color:#555></i></button> <button class="btn btn-primary btn-sm" ng-click=todayDate() type=button>Today</button> <button class="btn btn-default btn-sm" ng-click=nextDate() type=button><i class="glyphicon glyphicon-chevron-right" style=color:#555></i></button></div></div></div><div class=row><div class=col-md-12 ng-show="myRequestsList.length > 0"><table class="table table-striped table-bordered table-hover"><thead><tr><th>Patient Name</th><th>Services</th><th>Bill (Rs.)</th><th>Paid (Rs.)</th><th>Balance (Rs.)</th><th>Created by</th><th>Print</th></tr></thead><tbody><tr ng-repeat="myRequest in myRequestsList"><td class=col-md-4><span>{{myRequest.patient_id.demography.name}}</span><span ng-show="myRequest.patient_id.type == \'member\' && myRequest.patient_id.membershipdisplay"><span class="label label-success">{{myRequest.patient_id.membershipdisplay}}</span> &nbsp;</span> <span ng-show="myRequest.patient_id.type == \'nonmember\' && myRequest.patient_id.membershipdisplay"><span class="label label-danger">{{myRequest.patient_id.membershipdisplay}}</span>&nbsp;</span> <span ng-show="myRequest.patient_id.type == \'nonmember\' && !myRequest.patient_id.membershipdisplay"><span class="label label-default">Non member &nbsp;</span></span> <span ng-show=myRequest.patient_id.demography.deceased><span class="label label-danger">Deceased &nbsp;</span></span></td><td class=col-md-3 style="height: auto;max-height: 135px;display: block;width: auto;overflow-y: auto;"><span ng-repeat="service in myRequest.services"><p>- {{service.service_id.name}} <span ng-if=service.package_id>({{service.package_id.name}})</span> [{{service.startdate | date: \'dd/MM/yy @ hh:mm a\'}}]</p></span></td><td class=col-md-1>{{myRequest.totalbillamount}}</td><td class=col-md-1>{{myRequest.totalreceiptamount}}</td><td class=col-md-1>{{myRequest.totalbillamount - myRequest.totalreceiptamount}}</td><td class=col-md-1><span>{{myRequest.createdby.profile.firstname}}&nbsp;{{myRequest.createdby.profile.lastname}} {{myRequest.datetime | date: \' @ hh:mm a\'}}</span></td><td class=col-md-1><button class="btn btn-primary btn-sm" ng-click=receiptRePrint(myRequest._id) type=button ng-show="myRequest.totalbillamount && myRequest.totalreceiptamount"><i class="glyphicon glyphicon-print"></i></button></td></tr></tbody></table><pagination class="pull-right pagination-sm" style=margin-right:5px; total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change="isPaging=true;getUserPatients()"></pagination></div></div></div></div></div></div>'),e.put("partials/mly/partner/servicerequest/servicerequestadd.html",'<div id=app-frame><div class="row panelmainDiv"><div class="col-sm-12 panelheaderDiv"><div class="pull-right input-group input-group-sm" style=margin-right:5px;><button type=button class="btn btn-default btn-sm pull-right" ng-click=cancelRequest()>Cancel</button><button ng-if=!data._id ng-disabled="!(patient._id && data.services.length && data.fromdate && data.fromtime && data.todate && data.totime)" ng-click=saveRequest() class="btn btn-default btn-sm pull-right" style=margin-right:5px;>Save</button></div><h4 ng-if=!data._id>New Service Request</h4><h4 ng-if=data._id>View Service Request</h4></div><div class="col-sm-12 panelbodyDiv"><div class=row><div class=col-sm-12><div class="panel panel-default"><div class=panel-body><div><div ng-include src="\'partials/servicerequest/servicerequest-include.html\'"></div></div></div></div></div></div></div></div></div>'),e.put("partials/mly/partner/servicerequest/servicerequestpatient-include.html",'<div class="modal fade" id=AddPatientObjectView tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false><div class="modal-dialog modal-lg"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=clearPatient() class="btn btn-default pull-right">Cancel</button> <button ng-show=!patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled=patientFrm.$invalid><span>Save and continue</span></button> <button ng-show=patient._id type=button style="margin-right:5px;margin-top: -7px;" ng-click=savePatient() class="btn btn-primary pull-right" ng-disabled=patientFrm.$invalid><span>Update and continue</span></button><h4 class=modal-title id=myModalLabel ng-show=!patient._id>Add Patient</h4><h4 class=modal-title id=myModalLabel ng-show=patient._id>Update Patient</h4></div><div class=modal-body><form name=patientFrm><div class=panel-body ng-controller=patientsController><div ng-include src="\'partials/patient/patient-include-add.html\'" data-ng-init=edit()></div></div></form></div><div class=modal-footer></div></div></div></div>'),e.put("partials/mly/partner/servicerequest/services-include-add.html",'<div class="modal-dialog modal-md"><div class=modal-content><div class=modal-header><button style="margin-right:5px;margin-top: -7px;" ng-click=closeAddService() class="btn btn-sm btn-default pull-right">Cancel</button><button style="margin-right:5px;margin-top: -7px;" ng-click=addService() ng-disabled="!((service_sm.service_id && service_sm.repeatdetails.occurrence && service_sm.repeatdetails.occurrenceperiod && service_sm.startdate && service_sm.repeatdetails.frequency==\'daily\') || (service_sm.service_id && service_sm.repeatdetails.occurrence && service_sm.repeatdetails.occurrenceperiod && service_sm.startdate && service_sm.repeatdetails.frequency && (service_sm.repeatdetails.period || (service_sm.repeatdetails.days[\'mon\'] || service_sm.repeatdetails.days[\'tue\'] || service_sm.repeatdetails.days[\'wed\'] || service_sm.repeatdetails.days[\'thu\'] || service_sm.repeatdetails.days[\'fri\'] || service_sm.repeatdetails.days[\'sat\'] || service_sm.repeatdetails.days[\'sun\']) ) ))" class="btn btn-sm btn-primary pull-right" ng-show=showAddBtn>Add</button> <button style="margin-right:5px;margin-top: -7px;" ng-click=updateService() ng-disabled="!((service_sm.service_id && service_sm.repeatdetails.occurrence && service_sm.repeatdetails.occurrenceperiod && service_sm.startdate && service_sm.repeatdetails.frequency==\'daily\') || (service_sm.service_id && service_sm.repeatdetails.occurrence && service_sm.repeatdetails.occurrenceperiod && service_sm.startdate && service_sm.repeatdetails.frequency && (service_sm.repeatdetails.period || (service_sm.repeatdetails.days[\'mon\'] || service_sm.repeatdetails.days[\'tue\'] || service_sm.repeatdetails.days[\'wed\'] || service_sm.repeatdetails.days[\'thu\'] || service_sm.repeatdetails.days[\'fri\'] || service_sm.repeatdetails.days[\'sat\'] || service_sm.repeatdetails.days[\'sun\']) ) ))" class="btn btn-sm btn-primary pull-right" ng-show=showUpdateBtn>Update</button><h4 class=modal-title id=myModalLabel>{{service_sm.service_id.name}}</h4></div><div class=modal-body><div class=row><div class="col-sm-8 col-md-offset-2"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.primary_id }" ng-if="service_sm.service_id.type==\'membership\' && service_sm.service_id.subtype==\'secondary\'"><span class=input-group-addon><strong>Select primary member</strong></span> <input id=search-input type=text ng-model=data.primarymembername ng-model-options="{ debounce: 300 }" ng-change=SearchMemberByName() placeholder=Search class=form-control><table class="table table-responsive searchtable"><tbody><tr ng-repeat="Patient in MemberList"><td ng-click=SelectPrimaryMember(Patient) class=pointer>{{Patient.demography.name}} <span><label ng-class="(Patient.type==\'member\')?\'label-success\':\'label-default\'" class=label>{{Patient.type}}</label></span>&nbsp; <span>{{Patient.demography.age}}, {{Patient.demography.gender}}</span> <span><i class="glyphicon glyphicon-phone"></i> {{Patient.demography.mobilenumber}}</span></td></tr></tbody></table></div><div class="form-group input-group input-group-sm" ng-if="service_sm.service_id.type==\'membership\' && service_sm.service_id.subtype==\'secondary\'"><span class=input-group-addon><strong>Relation</strong></span><select name=relation ng-options="relation.code as relation.displayname for relation in relationship.optionlist" ng-model=service_sm.relationwithprimary class=form-control><option value>--Select Relation--</option></select></div><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.startdate }"><span class=input-group-addon ng-if=!hideChk><strong>Requested Service Date</strong></span> <span class=input-group-addon ng-if=hideChk><strong>Membership start Date</strong></span><input type=text class="form-control input-sm" datepicker-popup ng-model=service_sm.startdate is-open=datePickerPopup.dp_service_sd close-text=Close min-date=datePickerPopup.minDate ng-click="openDatePicker($event,\'dp_service_sd\')" readonly> <span class=input-group-btn><button type=button class="btn btn-default btn-sm" ng-click="openDatePicker($event,\'dp_service_sd\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !service_sm.startdate }" ng-if=!hideChk><span class=input-group-addon><strong>Requested Service Time</strong></span><div class=form-control style="float:none !important;align:center;"><timepicker ng-model=service_sm.startdate hour-step=hsteps minute-step=msteps show-meridian=true></timepicker></div></div></div></div><div class=row ng-if=!hideChk><div class="col-md-8 col-md-offset-2"><div style=padding-top:0px;padding-bottom:0px;margin-top:-15px;margin-bottom:0px;><div class=checkbox><label><input type=checkbox ng-model=temp.oneoff ng-click=chkOneOff()> One-Off</label></div></div></div></div><div class=row ng-hide=temp.oneoff><div class="col-md-8 col-md-offset-2" ng-hide="service_sm.service_id.type == \'membership\'"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.repeatdetails.frequency }"><span class=input-group-addon><strong>Frequency</strong></span><select ng-model=service_sm.repeatdetails.frequency class=form-control ng-change=changeFrequency() ng-disabled=temp.oneoff><option value>--Select Frequency--</option><option value=daily>Daily</option><option value=once>Once</option><option value=twice>Twice</option><option value=weekly>Weekly</option></select></div></div></div><div class=row ng-show=showPeriod()><div class="col-md-8 col-md-offset-2" ng-hide="service_sm.service_id.type == \'membership\'"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.repeatdetails.period }"><span class=input-group-addon><strong>Period</strong></span><select ng-model=service_sm.repeatdetails.period class=form-control ng-change=changePeriod()><option value>--Period--</option><option value=yearly>yearly</option><option value=quaterly>quaterly</option><option value=halfyearly>halfyearly</option><option value=monthly>monthly</option></select></div></div></div><div class=row ng-show=showWeeks()><div class="col-md-8 col-md-offset-2"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !(service_sm.repeatdetails.days.mon || service_sm.repeatdetails.days.tue || service_sm.repeatdetails.days.wed || service_sm.repeatdetails.days.thu || service_sm.repeatdetails.days.fri || service_sm.repeatdetails.days.sat || service_sm.repeatdetails.days.sun) }"><div class=input-group-addon><strong>Days Of The Week</strong></div><div class=form-control><input type=checkbox ng-model="service_sm.repeatdetails.days[\'mon\']"> Mo <input type=checkbox ng-model="service_sm.repeatdetails.days[\'tue\']"> Tu <input type=checkbox ng-model="service_sm.repeatdetails.days[\'wed\']"> We <input type=checkbox ng-model="service_sm.repeatdetails.days[\'thu\']"> Th <input type=checkbox ng-model="service_sm.repeatdetails.days[\'fri\']"> Fr <input type=checkbox ng-model="service_sm.repeatdetails.days[\'sat\']"> Sa <input type=checkbox ng-model="service_sm.repeatdetails.days[\'sun\']"> Su</div></div></div></div><div class=row ng-show=service_sm.repeatdetails.frequency><div class="col-md-4 col-md-offset-2" ng-hide=temp.oneoff><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.repeatdetails.occurrence }" ng-hide="service_sm.service_id.type == \'membership\'"><span class=input-group-addon><strong>For</strong></span> <input type=text ng-model=service_sm.repeatdetails.occurrence placeholder="Enter Number" class=form-control ng-change=changeOccurrence() ng-disabled=temp.oneoff></div></div><div class=col-md-4 ng-hide=temp.oneoff><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !service_sm.repeatdetails.occurrenceperiod }" ng-hide="service_sm.service_id.type == \'membership\'"><select ng-model=service_sm.repeatdetails.occurrenceperiod class=form-control ng-disabled=temp.oneoff><option value>--Period--</option><option value=day ng-hide=temp.hideDay>Day</option><option value=week ng-hide=temp.hideWeek>Week</option><option value=month>Month</option><option value=year>Year</option></select></div></div></div></div><div class=modal-footer></div></div></div>'),e.put("partials/partner/test/modal/ConfirmPopupDeleteComponent.modal.html",'<div class="modal fade" id=ConfirmPopupDeleteDropPoint tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove Component</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove component?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=confirmDeleteComponent()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/test/modal/active.model.html",'<div id=activeModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>{{activeModal.header}}</h4></div><div class=modal-body><p>Are you sure do you want to {{activeModal.header}} <b>{{activeModal.displayText.name}}</b></p></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button> <button type=button class="btn btn-success" data-dismiss=modal ng-click="deleteTest(activeModal.displayText, activeModal.header)">Save</button></div></div></div></div>'),e.put("partials/partner/test/modal/component.modal.html",'<div class="modal fade" id=componentAddModal tabindex=-1 role=dialog aria-labelledby=componentAddModalLabel style="overflow: scroll;"><div class="modal-dialog modal-lg" role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=componentAddModalLabel>Add component</h4></div><div class=modal-body><form name=componentForm><div class="row form-group"><div class=col-md-2><strong>Test</strong></div><div class=col-md-10><tags-input ng-model=temp.services display-property=name key-property=_id add-from-autocomplete-only=true min-tags=1 template=tag-test-template placeholder="search by name or code" on-tag-adding=onAddingService($tag)><auto-complete source=searchTest($query) template=auto-test-template debounce-delay={1000} max-results-to-show=100></auto-complete></tags-input></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-disabled=componentForm.$invalid ng-click=saveComponent() class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/test/modal/deactive.modal.html",'<div id=deactiveModal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>{{activeModal.header}}</h4></div><div class=modal-body><p>Are you sure do you want to {{activeModal.header}} <b>{{activeModal.displayText.name}}</b></p></div><div class=modal-footer><button type=button class="btn btn-default" data-dismiss=modal>Close</button> <button type=button class="btn btn-success" data-dismiss=modal ng-click=deleteTest(activeModal.displayText)>Save</button></div></div></div></div>'),e.put("partials/partner/test/modal/desc.modal.html",'<div class="modal fade" id=descModal tabindex=-1 role=dialog aria-labelledby=descModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=descModalLabel>Update description</h4></div><div class=modal-body><form name=descForm><div class="row form-group"><div class=col-md-12><textarea msd-elastic ng-model=display.partnertest.description type=text class=form-control name=spcinstructions aria-describedby=sizing-addon2 rows=5 required></textarea></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveDesc() class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/test/modal/pi.modal.html",'<div class="modal fade" id=piModal tabindex=-1 role=dialog aria-labelledby=piModalLabel><div class=modal-dialog role=document><div class="alert alert-danger" role=alert ng-if=!display.partnertest.category>Please Select category</div><div class="alert alert-danger" role=alert ng-if="display.partnertest.category && display.partnertest.category != \'TEST\' && !display.partnertest.childs.length">Please Select Components</div><div class=modal-content ng-if="display.partnertest.category && display.partnertest.category != \'TEST\' && display.partnertest.childs.length"><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=piModalLabel>Update Patient Instruction</h4></div><div class=modal-body><form name=piForm><div class="row form-group profile_package_view" name=instructions ng-if=display.partnertest.customerinstructionarray.length><span><ul style=padding-left:21px;padding-right:10px;><li ng-repeat="pi in display.partnertest.customerinstructionarray" ng-if=pi>{{pi}}</li></ul></span></div><div class="row form-group"><div class=col-md-12><div class=radio><label><input type=radio name=fasting id=fasting value=fasting ng-model=piModal.customerinstructiontype ng-disabled="display.partnertest.category != \'TEST\'"> <span ng-class="{\'has-error-text\' : !piModal.customerinstructiontype}">Fasting Instruction</span></label> <label style=margin-left:15px;><input type=radio name=random id=random value=random ng-model=piModal.customerinstructiontype ng-disabled="display.partnertest.category != \'TEST\'"> <span ng-class="{\'has-error-text\' : !piModal.customerinstructiontype}">Random Instruction</span></label></div></div></div></form></div><div class=modal-footer><span style=pull-right><button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div><div class=modal-content ng-if="display.partnertest.category && display.partnertest.category == \'TEST\'"><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=piModalLabel>Update Patient Instruction</h4></div><div class=modal-body><form name=piForm><div class="row form-group" ng-if="display.partnertest.category == \'TEST\'"><div class=col-md-12><select class=form-control id=selectCity name=area ng-model=temp.patientinstruction ng-options="patientinstruction as patientinstruction.name for patientinstruction in display.patientinstruction | orderBy:\'name\'" ng-change=setPatientInstructionText(temp.patientinstruction)><option disabled value>-- Select --</option></select></div></div><div class="row form-group profile_package_view" ng-if=temp.piids.length><div class=col-md-12 ng-class="{\'has-error\' : piForm.instructions.$invalid}"><ul style=padding-left:21px;padding-right:10px;><li ng-repeat="piid in temp.piids track by piid._id" ng-if=piid>{{piid.description}}</li></ul></div></div><div class="row form-group"><div class=col-md-12><div class=radio><label><input type=radio name=fasting id=fasting value=fasting ng-model=piModal.customerinstructiontype> <span ng-class="{\'has-error-text\' : !piModal.customerinstructiontype}">Fasting Instruction</span></label> <label style=margin-left:15px;><input type=radio name=random id=random value=random ng-model=piModal.customerinstructiontype> <span ng-class="{\'has-error-text\' : !piModal.customerinstructiontype}">Random Instruction</span></label> <span class=pull-right><button type=button class="btn btn-gray" ng-click=clearDataPI()>Clear Data</button></span></div></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=savePI() class="btn btn-primary" ng-disabled="!(piModal.customerinstructions.length && piModal.customerinstructiontype )" ng-if="display.partnertest.category == \'TEST\'">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/test/modal/price.modal.html",'<div class="modal fade" id=priceModal tabindex=-1 role=dialog aria-labelledby=priceModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=priceModalLabel>Update price</h4></div><div class=modal-body><form name=priceForm><div class="row form-group"><div class=col-md-3><label class=pull-right><strong>B2C Purchased</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.B2Cpurchase name=b2c type=number class=form-control></div></div><div class="row form-group"><div class=col-md-3><label class=pull-right><strong>B2B Purchased</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.B2Bpurchase name=b2b type=number class=form-control></div></div><div class="row form-group" ng-class="{\'has-error\' : priceForm.mrp.$invalid}"><div class=col-md-3><label class=pull-right><strong>MRP</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.mrp name=mrp type=number class=form-control required value=1 min=0></div></div><div class="row form-group" ng-class="{\'has-error\' : priceForm.sell.$invalid}"><div class=col-md-3><label class=pull-right><strong>Selling</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.selling name=sell type=number class=form-control required value=1 min=0></div></div><div class="row form-group"><div class=col-md-3><label class=pull-right><strong>Discount</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.discount name=discount type=number class=form-control></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=savePrice() class="btn btn-primary" ng-disabled=priceForm.$invalid>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/test/modal/qadesc.modal.html",'<div class="modal fade" id=qadescModal tabindex=-1 role=dialog aria-labelledby=descModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=descModalLabel>Update description</h4></div><div class=modal-body><form name=descForm><div class="row form-group"><div class=col-md-12><textarea msd-elastic ng-model=display.partnertest.description ng-disabled=true type=text class=form-control name=spcinstructions aria-describedby=sizing-addon2 rows=5 required></textarea></div></div></form></div></div></div></div>'),e.put("partials/partner/test/modal/qapi.modal.html",'<div class="modal fade" id=qapiModal tabindex=-1 role=dialog aria-labelledby=piModalLabel><div class=modal-dialog role=document><div class="alert alert-danger" role=alert ng-if=!display.partnertest.category>Please Select category</div><div class="alert alert-danger" role=alert ng-if="display.partnertest.category && display.partnertest.category != \'TEST\' && !display.partnertest.childs.length">Please Select Components</div><div class=modal-content ng-if="display.partnertest.category && display.partnertest.category != \'TEST\' && display.partnertest.childs.length"><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=piModalLabel>Update Patient Instruction</h4></div><div class=modal-body><form name=piForm><div class="row form-group profile_package_view" name=instructions ng-if=display.partnertest.customerinstructionarray.length><span><ul style=padding-left:21px;padding-right:10px;><li ng-repeat="pi in display.partnertest.customerinstructionarray" ng-if=pi>{{pi}}</li></ul></span></div><div class="row form-group"><div class=col-md-12><div class=radio><label><input type=radio name=fasting id=fasting value=fasting ng-model=piModal.customerinstructiontype ng-disabled="display.partnertest.category != \'TEST\'"> <span ng-class="{\'has-error-text\' : !piModal.customerinstructiontype}">Fasting Instruction</span></label> <label style=margin-left:15px;><input type=radio name=random id=random value=random ng-model=piModal.customerinstructiontype ng-disabled="display.partnertest.category != \'TEST\'"> <span ng-class="{\'has-error-text\' : !piModal.customerinstructiontype}">Random Instruction</span></label></div></div></div></form></div></div><div class=modal-content ng-if="display.partnertest.category && display.partnertest.category == \'TEST\'"><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=piModalLabel>Update Patient Instruction</h4></div><div class=modal-body><form name=piForm><div class="row form-group profile_package_view" ng-if=temp.piids.length><div class=col-md-12 ng-class="{\'has-error\' : piForm.instructions.$invalid}"><ul style=padding-left:21px;padding-right:10px;><li ng-repeat="piid in temp.piids track by piid._id" ng-if=piid>{{piid.description}}</li></ul></div></div><div class="row form-group"><div class=col-md-12><div class=radio><label><input type=radio name=fasting ng-disabled=true id=fasting value=fasting ng-model=piModal.customerinstructiontype> <span ng-class="{\'has-error-text\' : !piModal.customerinstructiontype}">Fasting Instruction</span></label> <label style=margin-left:15px;><input type=radio name=random ng-disabled=true id=random value=random ng-model=piModal.customerinstructiontype> <span ng-class="{\'has-error-text\' : !piModal.customerinstructiontype}">Random Instruction</span></label></div></div></div></form></div></div></div></div>'),e.put("partials/partner/test/modal/qaprice.modal.html",'<div class="modal fade" id=qapriceModal tabindex=-1 role=dialog aria-labelledby=priceModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=priceModalLabel>Update price</h4></div><div class=modal-body><form name=priceForm><div class="row form-group"><div class=col-md-3><label class=pull-right><strong>B2C Purchased</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.B2Cpurchase name=b2c type=number class=form-control></div></div><div class="row form-group"><div class=col-md-3><label class=pull-right><strong>B2B Purchased</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.B2Bpurchase name=b2b type=number class=form-control></div></div><div class="row form-group" ng-class="{\'has-error\' : priceForm.mrp.$invalid}"><div class=col-md-3><label class=pull-right><strong>MRP</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.mrp name=mrp type=number class=form-control required value=1 min=0></div></div><div class="row form-group" ng-class="{\'has-error\' : priceForm.sell.$invalid}"><div class=col-md-3><label class=pull-right><strong>Selling</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.selling name=sell type=number class=form-control required value=1 min=0></div></div><div class="row form-group"><div class=col-md-3><label class=pull-right><strong>Discount</strong></label></div><div class=col-md-3><input ng-model=priceModal.price.discount name=discount type=number class=form-control></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click="savePrice(\'qa\')" class="btn btn-primary" ng-disabled=priceForm.$invalid>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/test/modal/qasi.modal.html",'<div class="modal fade" id=qasiModal tabindex=-1 role=dialog aria-labelledby=siModalLabel><div class=modal-dialog role=document><div class="alert alert-danger" role=alert ng-if=!display.partnertest.category>Please Select category</div><div class="alert alert-danger" role=alert ng-if="display.partnertest.category && display.partnertest.category != \'TEST\' && !display.partnertest.childs.length">Please Select Components</div><div class=modal-content ng-if="display.partnertest.category && display.partnertest.category == \'TEST\'"><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=siModalLabel>Update special instruction</h4></div><div class=modal-body><form name=siForm><div class="row form-group profile_package_view" name=instructions ng-if=temp.siids.length><div class=col-md-12><ul style=padding-left:21px;padding-right:10px;><li ng-repeat="siid in temp.siids track by siid._id" ng-if=siid>{{siid.displayname}}</li></ul></div></div></form></div></div><div class=modal-content ng-if="display.partnertest.category && display.partnertest.category != \'TEST\' && display.partnertest.childs.length"><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=siModalLabel>Update special instruction</h4></div><div class=modal-body><form name=siForm><div class="row form-group profile_package_view" name=instructions ng-if=display.partnertest.specialinstructionarray.length><span><ul style=padding-left:21px;padding-right:10px;><li ng-repeat="si in display.partnertest.specialinstructionarray" ng-if=si>{{si}}</li></ul></span></div></form></div></div></div></div>'),e.put("partials/partner/test/modal/si.modal.html",'<div class="modal fade" id=siModal tabindex=-1 role=dialog aria-labelledby=siModalLabel><div class=modal-dialog role=document><div class="alert alert-danger" role=alert ng-if=!display.partnertest.category>Please Select category</div><div class="alert alert-danger" role=alert ng-if="display.partnertest.category && display.partnertest.category != \'TEST\' && !display.partnertest.childs.length">Please Select Components</div><div class=modal-content ng-if="display.partnertest.category && display.partnertest.category == \'TEST\'"><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=siModalLabel>Update special instruction</h4></div><div class=modal-body><form name=siForm><div class="row form-group"><div class=col-md-12><select class=form-control id=selectCity name=area ng-model=temp.specialinstruction ng-options="si as si.displayname for si in display.SpecailInstruction | orderBy:\'displayname\'" ng-change=setSpecailNeddDescription(temp.specialinstruction)>-- Select --</select></div></div><div class="row form-group profile_package_view" name=instructions ng-if=temp.siids.length><div class=col-md-12><ul style=padding-left:21px;padding-right:10px;><li ng-repeat="siid in temp.siids track by siid._id" ng-if=siid>{{siid.displayname}}</li></ul></div></div><div class="row form-group"><div class=col-md-12 ng-class="{\'has-error\' : siForm.instructions.$invalid}"><span class=pull-right style="padding-top: 10px;"><button type=button class="btn btn-gray" ng-click=clearDataSI()>Clear Data</button></span></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveSI() class="btn btn-primary" ng-disabled=!siModal.specialinstructions.length>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div><div class=modal-content ng-if="display.partnertest.category && display.partnertest.category != \'TEST\' && display.partnertest.childs.length"><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=siModalLabel>Update special instruction</h4></div><div class=modal-body><form name=siForm><div class="row form-group profile_package_view" name=instructions ng-if=display.partnertest.specialinstructionarray.length><span><ul style=padding-left:21px;padding-right:10px;><li ng-repeat="si in display.partnertest.specialinstructionarray" ng-if=si>{{si}}</li></ul></span></div></form></div><div class=modal-footer><span style=pull-right><button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/partner/test/modal/testComponent.modal.html",'<div class="modal fade" id=showComponentsModal tabindex=-1 role=dialog aria-labelledby=myModalLabel aria-hidden=true style="display: none;" data-backdrop=static data-keyboard=false title=Delete><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class="close pull-right" aria-label=Close data-dismiss=modal><span aria-hidden=true>&times;</span></button><h4 class=modal-title><span style="font-weight: 300">Tests covered in {{componemtModal.category}} -</span> {{componemtModal.name}}</h4></div><div class=modal-body style=padding-top:0px;padding-bottom:0px><div class=row><div class=col-ms-12 style=padding:12px><ul><li ng-repeat="ser in componemtModal.services">{{ser.name}}</li></ul></div></div></div></div></div></div>'),e.put("partials/srl/userinfo/modal/ConfirmPopupDeleteForWorkinHour.modal.html",'<div class="modal fade" id=ConfirmPopupDeleteForWorkinHour tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove Working Hour</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove working hour?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=confirmDeleteWorkingHour() class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/userinfo/modal/workingHour.modal.html",'<div class="modal fade" id=workinghourModal tabindex=-1 role=dialog aria-labelledby=workhrModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=visitingModalLabel>Working Hours</h4></div><div class=modal-body><form name=whForm><div class=row ng-class="{ \'has-error\': !workinghour.day.length }"><div class="col-md-2 control-label"><strong>Days</strong></div><div class=col-md-10><ng-daypicker d-model=workinghour.day></ng-daypicker></div></div><div class=row><div ng-class="{ \'has-error\': whForm.fromtime.$invalid }"><div class="col-md-2 control-label"><strong>From time</strong></div><div class=col-md-4><select name=fromtime ng-disabled=workinghour.fullday class=form-control aria-describedby=sizing-addon2 ng-model=workinghour.from ng-required=!workinghour.fullday><option ng-repeat="timeslot in display.timeSlots track by $index" value={{timeslot.time}} ng-selected="workinghour.from == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div><div ng-class="{ \'has-error\': whForm.totime.$invalid }"><div class="col-md-2 control-label"><strong>To time</strong></div><div class=col-md-4><select ng-disabled=workinghour.fullday name=totime class=form-control aria-describedby=sizing-addon2 ng-model=workinghour.to ng-required=!workinghour.fullday><option ng-repeat="timeslot in display.timeSlots track by $index" value={{timeslot.time}} ng-selected="workinghour.to == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div></div><div class=row><div class="col-md-4 col-sm-offset-2"><div class=checkbox><label><input type=checkbox ng-click=fullDayClick() ng-model=workinghour.fullday> <strong>24 hours</strong></label></div></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveWorkingHour() class="btn btn-primary" ng-disabled="whForm.$invalid || (workinghour.day.length == 0 || !workinghour.day)">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/partner/modal/ConfirmPopupDeleteDropPoint.modal.html",'<div class="modal fade" id=ConfirmPopupDeleteDropPoint tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove Drop Point</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove drop point?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=confirmDeleteDropPoint()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/partner/modal/ConfirmPopupDeleteForVisitCharge.modal.html",'<div class="modal fade" id=ConfirmPopupDeleteForVisitCharge tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove Visit Charge</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove visit charge?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button class="btn btn-primary" ng-click=confirmDeleteVisitCharge()>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/partner/modal/ConfirmPopupDeleteForWorkinHour.modal.html",'<div class="modal fade" id=ConfirmPopupDeleteForWorkinHour tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Remove Working Hour</h4></div><div class=modal-body><div class="alert alert-danger"><strong></strong> Are you sure, you want to remove working hour?</div></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=confirmDeleteWorkingHour() class="btn btn-primary">Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/partner/modal/addAddress.modal.html",'<div class="modal fade" id=addAddresstModal tabindex=-1 role=dialog aria-labelledby=addAddresstModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=addAddresstModalLabel>Add major area</h4></div><div class=modal-body><form name=areaForm><div class="alert alert-danger" role=alert ng-show=!partner>Please select partner</div><div class="row form-group" ng-show=partner><div class=col-md-4><label class=pull-right><strong>Partner</strong></label></div><div class=col-md-6>{{partner.info.name}}</div></div><div class="row form-group" ng-show=partner><div class=col-md-4><label class=pull-right><strong>Major area</strong></label></div><div class=col-md-6><select name=majorlocation class=form-control ng-model=data.area ng-options="areasResult as areasResult.name for areasResult in display.areas track by areasResult.name" required></select></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveNewArea() class="btn btn-primary" ng-show=partner ng-disabled=areaForm.$invalid>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div><script type=text/ng-template id=tag-template1><div>{{data.name}}</div></script><script type=text/ng-template id=auto-template1><div>{{data.name}}</div></script><script type=text/ng-template id=auto-template1><div>{{data.name}}</div></script>'),e.put("partials/srl/partner/modal/dropPoint.modal.html",'<div class="modal fade" id=dropPointModal tabindex=-1 role=dialog aria-labelledby=dropPointModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=dropPointModalLabel>Drop point</h4></div><div class=modal-body><form name=dpForm><div class="row form-group" ng-class="{ \'has-error\': dpForm.dpadd.$invalid }"><div class="col-md-2 control-label"><strong>Address</strong></div><div class=col-md-8><textarea msd-elastic type=text class=form-control name=dpadd ng-model=droppoint.address aria-describedby=sizing-addon2 required></textarea></div></div><div class=row ng-class="{ \'has-error\': dpForm.dplong.$invalid || dpForm.dplat.$invalid }"><div class="col-md-2 control-label"><strong>Coordinates</strong></div><div class=col-md-4><input type=number class=form-control name=dplong ng-model=droppoint.coordinates.long placeholder=Latitude aria-describedby=sizing-addon2 required></div><div class=col-md-4><input type=number class=form-control name=dplat ng-model=droppoint.coordinates.lat aria-describedby=sizing-addon2 placeholder=Longitude required></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveDropPoint() class="btn btn-primary" ng-disabled=dpForm.$invalid>Save</button> <button type=button class="btn btn-gray" data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/partner/modal/visitCharge.modal.html",'<div class="modal fade" id=visitChargeModal tabindex=-1 role=dialog aria-labelledby=visitChargeModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=visitChargeModalLabel>Visiting Charges</h4></div><div class=modal-body><form name=vcForm><div class=row ng-class="{ \'has-error\': !visitcharge.day.length }"><div class="col-md-2 control-label"><strong>Days</strong></div><div class=col-md-10><ng-daypicker d-model=visitcharge.day></ng-daypicker></div></div><div class="row form-group"><div ng-class="{ \'has-error\': vcForm.fromtime.$invalid }"><div class="col-md-2 control-label"><strong>From time</strong></div><div class=col-md-4><select name=fromtime class=form-control ng-model=visitcharge.from required><option ng-repeat="timeslot in temp.timeSlots track by $index" value={{timeslot.time}} ng-selected="visitcharge.from == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div><div ng-class="{ \'has-error\': vcForm.totime.$invalid }"><div class="col-md-2 control-label"><strong>To time</strong></div><div class=col-md-4><select name=totime class=form-control ng-model=visitcharge.to required><option ng-repeat="timeslot in temp.timeSlots track by $index" value={{timeslot.time}} ng-selected="visitcharge.to == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div></div><div class="row form-group" ng-class="{ \'has-error\': vcForm.person.$invalid }"><div class="col-md-2 control-label"><strong>Person</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.person class=form-control name=person required></div></div><div class="row form-group" ng-class="{ \'has-error\': vcForm.charge.$invalid }"><div class="col-md-2 control-label"><strong>Charge</strong></div><div class=col-md-4><input type=number ng-model=visitcharge.charge ng-change=calculatePremium() class=form-control name=charge required value=1></div></div><div class="row form-group" ng-class="{ \'has-error\': vcForm.permium.$invalid }"><div class="col-md-2 control-label"><strong>Premium(%)</strong></div><div class=col-md-4><input type=number ng-change=calculatePremium() ng-model=visitcharge.premiumpercent class=form-control name=permium required value=1></div><div class=col-md-6></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveVisitCharge() class="btn btn-primary" ng-disabled="vcForm.$invalid || (visitcharge.day.length == 0 || !visitcharge.day)">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/srl/partner/modal/workingHour.modal.html",'<div class="modal fade" id=workinghourModal tabindex=-1 role=dialog aria-labelledby=workhrModalLabel><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class="modal-title formheading" id=visitingModalLabel>Working Hours</h4></div><div class=modal-body><form name=whForm><div class=row ng-class="{ \'has-error\': !workinghour.day.length }"><div class="col-md-2 control-label"><strong>Days</strong></div><div class=col-md-10><ng-daypicker d-model=workinghour.day name=day></ng-daypicker></div></div><div class=row><div ng-class="{ \'has-error\': whForm.fromtime.$invalid }"><div class="col-md-2 control-label"><strong>From time</strong></div><div class=col-md-4><select name=fromtime ng-disabled=workinghour.fullday class=form-control aria-describedby=sizing-addon2 ng-model=workinghour.from ng-required=!workinghour.fullday><option ng-repeat="timeslot in display.timeSlots track by $index" value={{timeslot.time}} ng-selected="workinghour.from == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div><div ng-class="{ \'has-error\': whForm.totime.$invalid }"><div class="col-md-2 control-label"><strong>To time</strong></div><div class=col-md-4><select ng-disabled=workinghour.fullday name=totime class=form-control aria-describedby=sizing-addon2 ng-model=workinghour.to ng-required=!workinghour.fullday><option ng-repeat="timeslot in display.timeSlots track by $index" value={{timeslot.time}} ng-selected="workinghour.to == timeslot.time">{{timeslot.time | waqt}}</option></select></div></div></div><div class=row><div class="col-md-4 col-sm-offset-2"><div class=checkbox><label><input type=checkbox ng-click=fullDayClick() ng-model=workinghour.fullday> <strong>24 hours</strong></label></div></div></div></form></div><div class=modal-footer><span style=pull-right><button name=save type=button ng-click=saveWorkingHour() class="btn btn-primary" ng-disabled="whForm.$invalid || (workinghour.day.length == 0 || !workinghour.day)">Save</button> <button type=button class="btn btn-gray" ng-click=closemodal() data-dismiss=modal>Close</button></span></div></div></div></div>'),e.put("partials/mly/partner/call/list/call.otherarea.html",'<div id=otherarea class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal>&times;</button><h4 class=modal-title>Other Area</h4></div><div class=modal-body><div class=row><div class=col-md-6 style="padding-right: 5px;"><div class="form-group input-group input-group-sm" ng-class="{ \'has-error\': !call.partner_id }"><span class=input-group-addon><strong>Area</strong></span></div></div><div class=col-md-6 ng-if=call.partner_id><div class="input-group input-group-sm form-group" ng-class="{ \'has-error\': !call.area_id._id }"><span class=input-group-addon><strong>Time</strong></span><select name=area ng-options="area as area.area_id.name for area in areaList track by area._id" ng-model=temparea class=form-control ng-change=SelectArea(temparea)><option value>--Select area--</option></select></div></div></div></div><div class=modal-footer><button type=button class="btn btn-success" data-dismiss=modal>Save</button> <button type=button class="btn btn-default" data-dismiss=modal>Close</button></div></div></div></div>'),e.put("partials/mly/partner/call/list/calls.html",'<div><div class="col-lg-8 col-md-8 col-sm-8 col-xs-6" style=padding-left:0px><h2>Call <small><sup><a href=#/main/call-add class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-4 col-xs-6" style=padding-right:0px><select name=calltype ng-options="type.code as type.displayname for type in calltypelist.optionlist" ng-model=searchObj.calltype class="form-control input-sm" style=margin-top:25px; ng-change=get()></select></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=searchObj.searchText placeholder=Search style=margin-top:25px ng-change=get()></div></div><div><div class=row><div class="col-lg-12 col-sm-12"><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>Name</th><th>Contact Number</th><th>Email</th><th style=width:5%;></th></tr></thead><tbody><tr ng-repeat="call in display.calls | filter:search"><td>{{ count + $index+1}}</td><td><a ng-click=SelectCall(call)>{{call.name}}</a></td><td>{{call.contactnumber}}</td><td>{{call.email}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div></div></div>'),e.put("partials/mly/partner/servicerequest/list/servicerequest.html",'<div><div class="col-lg-10 col-md-10 col-sm-10 col-xs-6" style=padding-left:0px><h2>Service request <small></small> <small><sup><a href=#/main/serviceRequestAdd class="btn btn-link btn-xs">New</a></sup></small></h2></div><div class="col-lg-2 col-md-2 col-sm-2 col-xs-6" style=padding-right:0px><input type=text class="form-control input-sm" ng-model=search placeholder=Search style=margin-top:25px></div><table class="table table-bordered table-hover" style="background-color: white;"><thead><tr><th>No</th><th>FromTime</th><th>Status</th><th>Created By</th><th>Clientr</th></tr></thead><tbody><tr ng-repeat="servicerequest in display.servicerequests | filter:search" ng-click=selectServiceRequest(servicerequest)><td>{{ count + $index+1}}</td><td>{{servicerequest.fromdate | date}}</td><td>{{servicerequest.status}}</td><td>{{servicerequest.createdby}}</td><td>{{servicerequest.client_id.demography.name}}</td></tr></tbody></table><div class=pull-right><pagination class="pull-right pagination-sm" style=margin-right:5px;margin-top:0px total-items=paging.itemCount ng-model=paging.currentPage boundary-links=true rotate=false max-size=3 items-per-page=paging.itemPerPage ng-change=get()></pagination></div></div>')
}]);